function aggregate_any(e,a){if(e.children&&0!==e.children.length){for(var l=0,n=0;n<e.children.length;n++)l+=aggregate_any(e.children[n],a);return e.values||(e.values={}),e.values[a]=l,document.getElementById(a+e.id).value=l,l}return e.values&&e.values[a]?parseFloat(e.values[a]):0}
"use strict";var REDIPS=REDIPS||{};REDIPS.drag=function(){var e,o,t,n,r,d,l,i,a,s,c,f,p,g,u,v,y,m,h,w,E,b,D,I,S,R,P,x,N,T,C,B,j,k=null,L={width:0,height:0},M={width:null,height:null,container:[],obj:null},O={page:{x:0,y:0},div:{x:0,y:0},flag:{x:0,y:0}},Y=[],H=[],W=null,_=null,X={x:0,y:0},A={x:0,y:0,value:7,flag:!1},V=!1,z=!1,F=null,q=null,K=null,$=null,G=null,J=null,Q=!1,U=!1,Z={colorTd:"#FFCFAE",colorTr:"#9BB3DA"},ee={enable:!0,bound:25,speed:20},oe={borderDisabled:"dotted",opacityDisabled:"",rowEmptyColor:"white"},te={},ne={keyDiv:!1,keyRow:!1,sendBack:!1,drop:!1},re={cloned:function(){},clonedDropped:function(){},clonedEnd1:function(){},clonedEnd2:function(){},dropped:function(){},droppedBefore:function(){},finish:function(){},notCloned:function(){},notMoved:function(){},rowChanged:function(){},rowClicked:function(){},rowCloned:function(){},rowDropped:function(){},rowDroppedBefore:function(){},rowDroppedSource:function(){},rowMoved:function(){},rowNotCloned:function(){},rowNotMoved:function(){}};return e=function(){if(W=document.getElementById("redips-drag"),j=m(),!document.getElementById("redips_clone")){var e=document.createElement("div");e.id="redips_clone",e.style.width=e.style.height="1px",W.appendChild(e)}o("init",".redips-drag"),T=document.getElementById("treeTable"),T.redips={},c(),REDIPS.event.add(window,"resize",c),REDIPS.event.add(window,"scroll",y)},n=function(e){var o,t,n,l,i=e||window.event;if(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),V=i.shiftKey,window.getSelection)window.getSelection().removeAllRanges();else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(a){}return n=X.x=i.clientX,l=X.y=i.clientY,A.x=n,A.y=l,A.flag=!1,REDIPS.drag.objOld=U=Q||this,REDIPS.drag.obj=Q=this,z=Q.className.indexOf("redips-clone")>-1,REDIPS.drag.obj=Q=R(Q),y(),F=$=null,f(),K=q=F,J=G=$,REDIPS.drag.event.rowClicked(te.current),null!==F&&null!==$||(f(),K=q=F,J=G=$,null!==F&&null!==$)?(C=B=!1,REDIPS.event.add(document,"mousemove",d),REDIPS.event.add(document,"mouseup",r),null!==F&&(N=u(F)),t=D(T,"position"),"fixed"!==t&&(t=D(T.parentNode,"position")),o=v(Q,t),k=[l-o[0],o[1]-n,o[2]-l,n-o[3]],!1):!0},R=function(e){var o,t,n;return"DIV"===e.nodeName?(n=e,e=I("TR",e),void 0===e.redips&&(e.redips={}),e.redips.div=n,e):(t=e,o=document.createElement("table"),o.innerHTML='<tr id="'+t.id+'" class="'+t.classList+'">'+t.innerHTML+"</tr>",o.redips={},o.redips.sourceRow=t,E(t,o.rows[0]),document.getElementById("redips_clone").appendChild(o),o)},P=function(e){var o,t,n;n=function(e){var o;void 0!==e.redips&&e.redips.emptyRow?S(e,"empty",REDIPS.drag.style.rowEmptyColor):(o=I("TABLE",e),o.deleteRow(e.rowIndex))};var r=Q;e>T.rows.length-1&&(e=T.rows.length-1);var d=T.rows[e];t=r.getElementsByTagName("tr")[0],r.parentNode.removeChild(r),o=REDIPS.drag.event.rowDroppedBefore(T,r.redips.sourceRow.rowIndex),o!==!1&&(e<T.rows.length?d.parentNode.insertBefore(t,d.nextSibling):(d.parentNode.appendChild(t),d=T.rows[0]),B||n(r.redips.sourceRow),delete t.redips.emptyRow,REDIPS.drag.event.rowDropped(d))},r=function(e){var o,t,n,a,s,c,f=e||window.event;if(n=f.clientX,a=f.clientY,O.flag.x=O.flag.y=0,REDIPS.event.remove(document,"mousemove",d),REDIPS.event.remove(document,"mouseup",r),W.onselectstart=null,i(Q),M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,O.flag.x=O.flag.y=0,null===F||null===$)REDIPS.drag.event.notMoved();else{if(REDIPS.drag.td.target=te.target=T.rows[F].cells[$],g(F,N),o=F,C)if(K===o){for(t=Q.getElementsByTagName("tr")[0],U.style.backgroundColor=t.style.backgroundColor,s=0;s<t.cells.length;s++)U.cells[s].style.backgroundColor=t.cells[s].style.backgroundColor;Q.parentNode.removeChild(Q),delete U.redips.emptyRow,B?REDIPS.drag.event.rowNotCloned():REDIPS.drag.event.rowDroppedSource(te.target)}else P(o);else REDIPS.drag.event.rowNotMoved();B||A.flag?B&&K===F&&J===$?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):B&&REDIPS.drag.clone.drop===!1&&(n<T.redips.offset[3]||n>T.redips.offset[1]||a<T.redips.offset[0]||a>T.redips.offset[2])?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):(c=REDIPS.drag.event.droppedBefore(te.target),l(c)):REDIPS.drag.event.notMoved(),y(),REDIPS.drag.event.finish()}q=G=null},l=function(e){var o,t=null;if(e!==!1){if(ne.sendBack===!0){o=te.target.getElementsByTagName("DIV");for(var n=0;n<o.length;n++)if(Q!==o[n]&&0===Q.id.indexOf(o[n].id)){t=o[n];break}if(t)return b(t,1),void Q.parentNode.removeChild(Q)}te.target.appendChild(Q),a(Q),REDIPS.drag.event.dropped(te.target),B&&(REDIPS.drag.event.clonedDropped(te.target),b(U,-1))}else B&&Q.parentNode&&Q.parentNode.removeChild(Q)},a=function(e,o){e.onmousedown=o===!1?null:n},i=function(e){e.style.top="",e.style.left="",e.style.position="",e.style.zIndex=""},d=function(e){var o,t,n,r,d,l,i,a=e||window.event,c=REDIPS.drag.scroll.bound;if(t=X.x=a.clientX,n=X.y=a.clientY,r=Math.abs(A.x-t),d=Math.abs(A.y-n),C||((z||REDIPS.drag.clone.keyRow===!0&&V)&&(B=!0),REDIPS.drag.objOld=U=Q,REDIPS.drag.obj=Q=R(Q),Q.style.zIndex=999,Q.style.position="fixed",y(),f(),B?REDIPS.drag.event.rowCloned():REDIPS.drag.event.rowMoved(),p(),t>L.width-k[1]&&(Q.style.left=L.width-(k[1]+k[3])+"px"),n>L.height-k[2]&&(Q.style.top=L.height-(k[0]+k[2])+"px")),C=!0,t>k[3]&&t<L.width-k[1]&&(Q.style.left=t-k[3]+"px"),n>k[0]&&n<L.height-k[2]&&(Q.style.top=n-k[0]+"px"),t<_[1]&&t>_[3]&&n<_[2]&&n>_[0]&&0===O.flag.x&&0===O.flag.y&&(H.containTable||t<H[3]||t>H[1]||n<H[0]||n>H[2])&&(f(),s()),REDIPS.drag.scroll.enable)for(O.page.x=c-(L.width/2>t?t-k[3]:L.width-t-k[1]),O.page.x>0?(O.page.x>c&&(O.page.x=c),i=0,O.page.x*=t<L.width/2?-1:1,O.page.x<0&&0>=i||O.page.x>0&&i>=M.width-L.width||0===O.flag.x++&&(REDIPS.event.remove(window,"scroll",y),h(window))):O.page.x=0,O.page.y=c-(L.height/2>n?n-k[0]:L.height-n-k[2]),O.page.y>0?(O.page.y>c&&(O.page.y=c),i=window.pageYOffset||document.documentElement.scrollTop,O.page.y*=n<L.height/2?-1:1,O.page.y<0&&0>=i||O.page.y>0&&i>=M.height-L.height||0===O.flag.y++&&(REDIPS.event.remove(window,"scroll",y),w(window))):O.page.y=0,l=0;l<M.container.length;l++){if(o=M.container[l],o.autoscroll&&t<o.offset[1]&&t>o.offset[3]&&n<o.offset[2]&&n>o.offset[0]){O.div.x=c-(o.midstX>t?t-k[3]-o.offset[3]:o.offset[1]-t-k[1]),O.div.x>0?(O.div.x>c&&(O.div.x=c),O.div.x*=t<o.midstX?-1:1,0===O.flag.x++&&(REDIPS.event.remove(o.div,"scroll",y),h(o.div))):O.div.x=0,O.div.y=c-(o.midstY>n?n-k[0]-o.offset[0]:o.offset[2]-n-k[2]),O.div.y>0?(O.div.y>c&&(O.div.y=c),O.div.y*=n<o.midstY?-1:1,0===O.flag.y++&&(REDIPS.event.remove(o.div,"scroll",y),w(o.div))):O.div.y=0;break}O.div.x=O.div.y=0}a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},s=function(){(F!==q||$!==G)&&(null!==q&&null!==G&&(g(q,N),REDIPS.drag.td.previous=te.previous=T.rows[q].cells[G],REDIPS.drag.td.current=te.current=T.rows[F].cells[$],F!==q&&REDIPS.drag.event.rowChanged(te.current)),p())},c=function(){L.width=window.innerWidth,L.height=window.innerHeight,M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,y()},f=function(){var e,o,t,n,r,d,l=[];if(e=function(){null!==q&&null!==G&&(F=q,$=G)},n=X.x,r=X.y,l[0]=T.redips.offset[0],l[1]=T.redips.offset[1],l[2]=T.redips.offset[2],l[3]=T.redips.offset[3],void 0!==T.sca&&(l[0]=l[0]>T.sca.offset[0]?l[0]:T.sca.offset[0],l[1]=l[1]<T.sca.offset[1]?l[1]:T.sca.offset[1],l[2]=l[2]<T.sca.offset[2]?l[2]:T.sca.offset[2],l[3]=l[3]>T.sca.offset[3]?l[3]:T.sca.offset[3]),l[3]<n&&n<l[1]&&l[0]<r&&r<l[2]){for(o=T.redips.row_offset,F=0;F<o.length-1;F++)if(void 0!==o[F]){if(H[0]=o[F][0],void 0!==o[F+1])H[2]=o[F+1][0];else for(d=F+2;d<o.length;d++)if(void 0!==o[d]){H[2]=o[d][0];break}if(r<=H[2])break}t=F,F===o.length-1&&(H[0]=o[F][0],H[2]=T.redips.offset[2]),$=0,0>F||0>$?e():F!==t&&(H[0]=o[F][0],H[2]=H[0]+T.rows[F].cells[$].offsetHeight,(r<H[0]||r>H[2])&&e())}},p=function(){null!==F&&null!==$&&(N=u(F),g(F),q=F,G=$)},g=function(e,o){var t,n;t=T.rows[e];for(var r=0;r<t.cells.length;r++)n=t.cells[r].style,n.backgroundColor=void 0===o?REDIPS.drag.hover.colorTr:o.color[r].toString(),void 0!==REDIPS.drag.hover.borderTr&&(void 0===o?K>F?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:(n.borderTopWidth=o.top[r][0],n.borderTopStyle=o.top[r][1],n.borderTopColor=o.top[r][2],n.borderBottomWidth=o.bottom[r][0],n.borderBottomStyle=o.bottom[r][1],n.borderBottomColor=o.bottom[r][2]))},u=function(e){var o,t,n={color:[],top:[],right:[],bottom:[],left:[]},r=function(e,o){var t="border"+o+"Width",n="border"+o+"Style",r="border"+o+"Color";return[D(e,t),D(e,n),D(e,r)]};o=T.rows[e];for(var d=0;d<o.cells.length;d++)t=o.cells[d],n.color[d]=t.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTr&&(n.top[d]=r(t,"Top"),n.bottom[d]=r(t,"Bottom"));return n},v=function(e,o,t){var n=0,r=0,d=e;if("fixed"!==o&&(n=0-j[0],r=0-j[1]),void 0===t||t===!0){do n+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName)}else do n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName);return[r,n+d.offsetWidth,r+d.offsetHeight,n]},y=function(){var e,o,t;j=m(),e=[],o=D(T,"position"),"fixed"!==o&&(o=D(T.parentNode,"position"));for(var n=T.rows.length-1;n>=0;n--)"none"!==T.rows[n].style.display&&(e[n]=v(T.rows[n],o));T.redips.offset=v(T,o),T.redips.row_offset=e,_=v(W);for(var n=0;n<M.container.length;n++)o=D(M.container[n].div,"position"),t=v(M.container[n].div,o,!1),M.container[n].offset=t,M.container[n].midstX=(t[1]+t[3])/2,M.container[n].midstY=(t[0]+t[2])/2},m=function(){var e=window.pageYOffset||document.documentElement.scrollTop,o=0;return[o,e]},h=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.x>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[0],r=M.width-L.width,d=O.page.x):(n=M.obj.scrollLeft,r=M.obj.scrollWidth-M.obj.clientWidth,d=O.div.x),O.flag.x>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(d,0),n=m()[0],o=parseInt(Q.style.left,10),isNaN(o)&&(o=0)):M.obj.scrollLeft+=d,setTimeout(h,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.x=0,H=[0,0,0,0])},w=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.y>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[1],r=M.height-L.height,d=O.page.y):(n=M.obj.scrollTop,r=M.obj.scrollHeight-M.obj.clientHeight,d=O.div.y),O.flag.y>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(0,d),n=m()[1],o=parseInt(Q.style.top,10),isNaN(o)&&(o=0)):M.obj.scrollTop+=d,setTimeout(w,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.y=0,H=[0,0,0,0])},E=function(e,o){var t,n=[];n[0]=function(e,o){e.redips&&(o.redips={},o.redips.enabled=e.redips.enabled,o.redips.container=e.redips.container,e.redips.enabled&&a(o))},n[1]=function(e,o){e.redips&&(o.redips={},o.redips.emptyRow=e.redips.emptyRow)},t=function(t){var r,d,l=["DIV","TR"];r=e.getElementsByTagName(l[t]),d=o.getElementsByTagName(l[t]);for(var i=0;i<d.length;i++)n[t](r[i],d[i])},"DIV"===e.nodeName?n[0](e,o):"TR"===e.nodeName&&n[1](e,o),t(0),t(1)},b=function(e,t){var n,r,d,l;l=e.className,n=l.match(/climit(\d)_(\d+)/),null!==n&&(r=parseInt(n[1],10),d=parseInt(n[2],10),0===d&&1===t&&(l+=" redips-clone",2===r&&o(!0,e)),d+=t,l=l.replace(/climit\d_\d+/g,"climit"+r+"_"+d),0>=d&&(l=l.replace("redips-clone",""),2===r?(o(!1,e),REDIPS.drag.event.clonedEnd2()):REDIPS.drag.event.clonedEnd1()),e.className=x(l))},o=function(e,o){var n=[];void 0===o?n=W.getElementsByTagName("div"):"string"==typeof o?n=document.querySelectorAll(o):"object"!=typeof o||"DIV"===o.nodeName&&-1!==o.className.indexOf("redips-drag")?n[0]=o:n=o.getElementsByTagName("div"),t(e,n)},t=function(e,o){var t,n,r,d,l,i,s,c,f,p,g,u=[],m=/\bredips-drag\b/i,h=/\bredips-noautoscroll\b/i;for(l=REDIPS.drag.style.opacityDisabled,e===!0||"init"===e?(d=REDIPS.drag.style.borderEnabled,i="move",f=!0):(d=REDIPS.drag.style.borderDisabled,i="auto",f=!1),t=0,n=0;t<o.length;t++)if(m.test(o[t].className))"init"===e||void 0===o[t].redips?(o[t].redips={},o[t].redips.container=W):e===!0&&"number"==typeof l?(o[t].style.opacity="",o[t].style.filter=""):e===!1&&"number"==typeof l&&(o[t].style.opacity=l/100,o[t].style.filter="alpha(opacity="+l+")"),a(o[t],f),o[t].style.borderStyle=d,o[t].style.cursor=i,o[t].redips.enabled=f;else if("init"===e&&(s=D(o[t],"overflow"),"visible"!==s)){for(REDIPS.event.add(o[t],"scroll",y),g=D(o[t],"position"),p=v(o[t],g,!1),c=!h.test(o[t].className),M.container[n]={div:o[t],offset:p,midstX:(p[1]+p[3])/2,midstY:(p[0]+p[2])/2,autoscroll:c},u=o[t].getElementsByTagName("table"),r=0;r<u.length;r++)u[r].sca=M.container[n];n++}},D=function(e,o){return e&&e.currentStyle?e.currentStyle[o]:e&&window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[o]:void 0},I=function(e,o){for(o=o.parentNode;o&&o.nodeName!==e;)o=o.parentNode;return o},x=function(e){return void 0!==e&&(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ")),e},S=function(e,o,t){var n,r,d;if("string"==typeof e&&(e=document.getElementById(e),e=I("TABLE",e)),"TR"===e.nodeName)for(n=e.getElementsByTagName("td"),r=0;r<n.length;r++)if(n[r].style.backgroundColor=t?t:"","empty"===o)n[r].innerHTML="";else for(d=0;d<n[r].childNodes.length;d++)1===n[r].childNodes[d].nodeType&&(n[r].childNodes[d].style.opacity=o/100,n[r].childNodes[d].style.filter="alpha(opacity="+o+")");else e.style.opacity=o/100,e.style.filter="alpha(opacity="+o+")",e.style.backgroundColor=t?t:""},{obj:Q,objOld:U,td:te,hover:Z,scroll:ee,style:oe,clone:ne,init:e,enableDrag:o,enableDivs:t,rowOpacity:S,getScrollPosition:m,getStyle:D,findParent:I,event:re}}(),REDIPS.event||(REDIPS.event=function(){var e,o;return e=function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},o=function(e,o,t){e.removeEventListener?e.removeEventListener(o,t,!1):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=null},{add:e,remove:o}}());
"use strict";var redips={};redips.init=function(){var e=REDIPS.drag;e.init(),e.event.rowDropped=function(o){var n=parseInt(e.objOld.id.replace("rowid","")),t=parseInt(o.id.replace("rowid",""));spreadSheet.moveNode(n,t)},e.event.rowDroppedSource=function(){e.rowOpacity(e.objOld,100)},e.event.rowMoved=function(){e.rowOpacity(e.obj,85),e.rowOpacity(e.objOld,20,"White")},e.event.rowClicked=function(){},e.event.rowNotMoved=function(){},e.event.rowCloned=function(){},e.event.rowNotCloned=function(){},e.event.rowDeleted=function(){},e.event.rowUndeleted=function(){e.rowOpacity(e.objOld,100)}};
var resizeColumnLeft=0,resizeField="0",MIN_COLUMN_WIDTH=70,GRIPS_WIDTH=16,startResize=function(e,i){$(document).bind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).bind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="visible",document.getElementById("resizeLine").style.left=e.pageX+"px",resizeColumnLeft=$(i.parentNode).position().left,resizeField=i.parentNode.id.replace("colHeader","")},resizeEnd=function(e){$(document).unbind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).unbind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="hidden";var i=e.pageX-resizeColumnLeft-GRIPS_WIDTH;MIN_COLUMN_WIDTH>i&&(i=MIN_COLUMN_WIDTH),document.getElementById("colHeaderInput"+resizeField).style.width=i+"px";for(var t=document.querySelectorAll(".fieldInput"+resizeField),r=0;r<t.length;r++)t[r].style.width=i+8+"px"},resizeDrag=function(e){e.pageX>resizeColumnLeft+MIN_COLUMN_WIDTH+GRIPS_WIDTH&&(document.getElementById("resizeLine").style.left=e.pageX+"px")};

var fieldMenuController={displayFieldMenu:function(e,i,t){var n=project.getField(e);this.menu=new FieldMenu(n,spreadSheet.fields),fieldMenuView.render(this.menu,i,t)},handleClick:function(e){var i=this.menu.getMenuItem(e,this.menu),t=this.menu.getMenuItemParent(e,this.menu);if(i.field){var n=project.getField(i.field.name);n[i.varName]=i.value,fieldMenuView.setCheckmarks(e,t.items),t===this.menu&&spreadSheet.updateNumberFieldFormatting(n)}}};
$(document).ready(function(){scrollBarWidth=getScrollBarWidth(),hms.init()});var hms={init:function(){projects.init(function(e){headerView.render(e)})},openProject:function(e){projects.openProject(e,function(r){project.tree=r,$.ajax({type:"GET",url:"api/versions?projectID="+e}).done(function(e){headerView.refresh(JSON.parse(e).versions),hms.selectView(headerView.selectedView()),hms.versionCurrent=!0,headerView.setVersionCurrent(),hms.startVersionChecking()})})},startVersionChecking:function(){clearInterval(hms.versionCheckInterval),hms.versionCheckInterval=setInterval(function(){project.getCurrentVersion(function(e){hms.versionCurrent&&e>project.tree.version?(hms.versionCurrent=!1,headerView.setVersionOutOfDate(),$.ajax({type:"GET",url:"api/versions?projectID="+project.tree.projectID}).done(function(e){headerView.refresh(JSON.parse(e).versions),headerView.selectVersion(project.tree.version)})):hms.versionCurrent||e!==project.tree.version||(hms.versionCurrent=!0,headerView.setVersionCurrent())})},1e3)},openSaveDBDialog:function(){project.getCurrentVersion(function(e){saveDBDialog.render(project.tree.version,project.tree.versionLabel,project.tree.versionDate,e+1)})},saveToDatabase:function(){project.saveToDatabase(function(){hms.openProject(project.tree.projectID)})},selectView:function(e){project.tree&&(this.view&&this.view.destroy(),this.showView(e))},selectVersion:function(e){projects.openProjectVersion(project.tree.projectID,e,function(e){project.tree=e,hms.selectView(headerView.selectedView())})},showView:function(e){switch(e){case SPREADSHEET_VIEW:this.view=spreadSheetView,spreadSheet.display();break;case TREE_VIEW:this.view=treeView,tree.displayTree();break;case WEIGHTED_TREE_VIEW:this.view=weightedTreeView,tree.displayWeightedTree();break;case CIRCLE_VIEW:this.view=circleView,circleView.display()}},createNewProject:function(e){projects.createNewProject(e,function(){$.ajax({type:"GET",url:"api/versions?projectID="+project.tree.projectID}).done(function(e){headerView.refresh(JSON.parse(e).versions),hms.selectView(headerView.selectedView()),hms.startVersionChecking()})})},nextProjectID:function(){return projects.nextProjectID()},expandToLevel:function(e){project.expandToLevel(project.tree,e),this.view===spreadSheetView?spreadSheet.display():this.view===treeView?treeView.refresh():this.view===weightedTreeView&&weightedTreeView.refresh()}},scrollBarWidth,getScrollBarWidth=function(){var e,r;return e=document.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,document.body.appendChild(e),r=e.offsetWidth-e.clientWidth,document.body.removeChild(e),r};
var spreadSheet={display:function(){project.cleanseData(),spreadSheetView.render(project.tree)},fields:function(){return project.fields()},tree:function(){return project.tree},updateFieldValue:function(e,d){var r=project.findNode(d);r&&(r.values||(r.values={}),r.values[e]=spreadSheetView.getFieldValue(e,d)),project.tree.children.forEach(function(d){aggregate_any(d,e)})},rawValue:function(e,d){var r=project.findNode(parseInt(d));return r.values&&r.values[e]?r.values[e]:""},formattedValue:function(e,d){return d.values&&d.values[e.name]?Field.formatValue(e,d.values[e.name]):""},addField:function(e){project.addField(e),spreadSheetView.addField(e)},hasChildren:function(e){return!project.isNodeChildless(e)},childrenHidden:function(e){return project.isNodeCollapsed(e)},moveNode:function(e,d){var r=project.findNode(d),t=project.findNode(e);spreadSheet.removeNode(t),project.addNode(t,r),spreadSheet.addNode(t,r)},removeNode:function(e){var d=project.findParent(e.id);project.traverse(project.getChildren,spreadSheetView.removeNode,e),project.removeNode(e),spreadSheetView.redrawNodeContent(d)},deleteNode:function(e){var d=project.findNode(e);spreadSheet.removeNode(d)},addNode:function(e,d){project.isNodeCollapsed(d)&&spreadSheet.expandNode(d),spreadSheetView.redrawNodeContent(d),spreadSheetView.insertNodeAfter(e,d),spreadSheetView.renderExpander()},copyNode:function(e){var d=project.findNode(e),r=project.cloneNode(d);project.insertNode(r,d),spreadSheetView.insertNodeBefore(r,d)},expandNode:function(e){project.expandNode(e),spreadSheetView.expandNode(e),spreadSheetView.redrawNodeContent(e)},collapseNode:function(e){project.traverseDescendants(project.getChildren,spreadSheetView.removeNode,e),project.collapseNode(e),spreadSheetView.redrawNodeContent(e)},toggleNode:function(e){var d=project.findNode(e);project.isNodeExpanded(d)?spreadSheet.collapseNode(d):project.isNodeCollapsed(d)&&spreadSheet.expandNode(d)},updateNodeName:function(e,d){project.findNode(e).name=d},updateNumberFieldFormatting:function(e){project.traverse(project.getChildren,function(d){if(d.values){var r=Field.formatValue(e,Number(d.values[e.name]));spreadSheetView.updateFieldValue(e.name,d.id,r)}})},enableDragging:function(e){project.traverse(project.getChildren,spreadSheetView.enableDragging,e)}};
var tree={displayTree:function(){this.data=project.tree,this.field=project.fields()[0],treeView.render()},displayWeightedTree:function(){this.data=project.tree,this.field=project.fields()[0],this.maxFieldValue=this.calcMaxFieldValue(),weightedTreeView.render()},calcMaxFieldValue:function(){var e=Number.NEGATIVE_INFINITY;return project.traverse(project.getChildren,function(t){if(t.values){var r=t.values[tree.field.name];r>e&&(e=r)}}),e}};
var Field=function(i){this.name=i,this.datatype=Field.NUMBER,this.format=Field.NUMBER_FORMAT,this.precision=2,this.agg_type=Field.NO_AGGREGATION,this.agg_qty_field=null};Field.NUMBER="0",Field.STRING="1",Field.CHOICE="2",Field.NO_AGGREGATION="0",Field.SUM_ANY_AGGREGATION="1",Field.NUMBER_FORMAT="0",Field.PERCENT_FORMAT="1",Field.SCIENTIFIC_FORMAT="2",Field.formatValue=function(i,e){if(i.datatype===Field.NUMBER){if(e=Number(e),i.format===Field.NUMBER_FORMAT)return e.toFixed(i.precision);if(i.format===Field.PERCENT_FORMAT)return(100*e).toFixed(i.precision)+"%";if(i.format===Field.SCIENTIFIC_FORMAT)return e.toExponential(i.precision)}else{if(i.datatype===Field.STRING)return e;i.datatype===Field.CHOICE}};
var FieldMenu=function(e,i){var t=new FieldMenuItem("Number",Field.NUMBER,"datatype",e),n=new FieldMenuItem("Format"),m=new FieldMenuItem("Number",Field.NUMBER_FORMAT,"format",e);m.items.push(new FieldMenuItem("0",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",m.items.push(new FieldMenuItem(s,u,"precision",e));n.items.push(m);var r=new FieldMenuItem("Percent",Field.PERCENT_FORMAT,"format",e);r.items.push(new FieldMenuItem("0%",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",r.items.push(new FieldMenuItem(s+"%",u,"precision",e));n.items.push(r);var a=new FieldMenuItem("Scientific",Field.SCIENTIFIC_FORMAT,"format",e);a.items.push(new FieldMenuItem("0e+0",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",a.items.push(new FieldMenuItem(s+"e+0",u,"precision",e));n.items.push(a),t.items.push(n);var d=new FieldMenuItem("Aggregation");d.items.push(new FieldMenuItem("No Aggregation",Field.NO_AGGREGATION,"agg_type",e));var l=new FieldMenuItem("Sum any defined children",Field.SUM_ANY_AGGREGATION,"agg_type",e);for(var F in i){var p=i[F];p.name!=e.name&&l.items.push(new FieldMenuItem(p.name,p.name,"agg_qty_field",e))}d.items.push(l),t.items.push(d),this.items=[],this.items.push(t),this.items.push(new FieldMenuItem("Text",Field.STRING,"datatype",e))};FieldMenu.prototype.getMenuItem=function(e,i){if(e===i.id)return i;if(i.items&&i.items.length>0)for(var t,n=0;n<i.items.length;n++)if(t=this.getMenuItem(e,i.items[n]))return t},FieldMenu.prototype.getMenuItemParent=function(e,i){if(i.items&&i.items.length>0)for(var t=0;t<i.items.length;t++){if(i.items[t].id===e)return i;var n=this.getMenuItemParent(e,i.items[t]);if(n)return n}};
var FieldMenuItem=function(i,e,t,s){this.display=i,this.value=e,this.varName=t,this.field=s,this.items=[],this.id=FieldMenuItem.id++,this.parent=-1,this.checked=s?s[t]===e:!1};FieldMenuItem.id=0;
var project={saveToDatabase:function(e){this.cleanseData(),$.ajax({type:"POST",url:"/api/tree",dataType:"json",data:{json:JSON.stringify(this.tree)}}).done(e())},getCurrentVersion:function(e){$.ajax({type:"GET",url:"api/tree?projectID="+this.tree.projectID}).done(function(n){e(n.version)})},fields:function(){return this.tree.fields},cleanseData:function(){this.traverse(project.getChildren,function(e){e.children||(e.children=[]),delete e.parent,delete e.x,delete e.x0,delete e.y,delete e.y0})},addField:function(e){this.tree.fields.push(new Field(e))},getField:function(e){for(var n in this.tree.fields){var r=this.tree.fields[n];if(r.name===e)return r}},removeNode:function(e){var n=this.findParent(e.id);n?n.children.splice(n.children.indexOf(e),1):this.tree.children.splice(this.tree.children.indexOf(e),1)},addNode:function(e,n){n.children.push(e),project.setDepths(n)},setDepths:function(e){e.children.forEach(function(n,r){n.depth=e.depth+1,n.depth>project.tree.maxDepth&&(project.tree.maxDepth=n.depth),project.setDepths(n)})},insertNode:function(e,n){var r=this.findParent(n.id);r?r.children.splice(r.children.indexOf(n),0,e):this.tree.children.splice(this.tree.children.indexOf(n),0,e)},cloneNode:function(e){var n=$.extend(!0,{},e);return this.traverse(this.getChildren,function(e){e.id=project.tree.nextNodeID++},n),n},expandNode:function(e){project.isNodeCollapsed(e)&&(e.children=e._children,e._children=[])},fullyExpandNode:function(e){project.expandNode(e),e.children.forEach(function(e){project.fullyExpandNode(e)})},expandToLevel:function(e,n){if(e.depth<n){project.expandNode(e);for(var r in e.children)project.expandToLevel(e.children[r],n)}else{project.collapseNode(e);for(var r in e._children)project.expandToLevel(e._children[r],n)}},collapseNode:function(e){project.isNodeExpanded(e)&&(e._children=e.children,e.children=[])},fullyCollapseNode:function(e){e.children&&(e._children=e.children,e._children.forEach(project.fullyCollapseNode),e.children=[])},toggleExpansion:function(e){e.children?(e._children=e.children,e.children=[]):e._children&&(e.children=e._children,e._children=[])},hasChildren:function(e){return e.children&&0===e.children.length||e._children&&0===e._children.length},isNodeChildless:function(e){return!(e.children&&0!==e.children.length||e._children&&0!==e._children.length)},isNodeCollapsed:function(e){return e._children&&e._children.length>0},isNodeExpanded:function(e){return e.children&&e.children.length>0},findNode:function(e,n){if(n||(n=this.tree),n.id===e)return n;for(var r in n.children){var i=this.findNode(e,n.children[r]);if(i)return i}},findParent:function(e,n,r){if(n||(n=this.tree),n.id===e)return r;for(var i in n.children){var t=this.findParent(e,n.children[i],n);if(t)return t}},traverse:function(e,n,r){r||(r=project.tree),n(r);var i=e(r);for(var t in i)project.traverse(e,n,i[t])},traverseDescendants:function(e,n,r){r||(r=project.tree),r.children.forEach(function(r){project.traverse(e,n,r)})},getChildren:function(e){return e.children&&e.children.length>0?e.children:null}};
var projects={init:function(e){$.ajax({type:"GET",url:"api/projects"}).done(function(t){projects.data=t,e(t.projects)})},nextProjectID:function(){return projects.data.nextProjectID},createNewProject:function(e,t){$.ajax({type:"POST",url:"/api/addProject?projectName="+e}).done(function(){project.tree={projectID:projects.nextProjectID(),projectName:e,name:e,version:1,versionDate:"1/1/2015 1:23:45",versionLabel:"Project Created",nextNodeID:3,depth:0,id:1,fields:[],children:[{id:2,name:e,depth:1,children:[]}]},project.saveToDatabase(t)})},openProject:function(e,t){$.ajax({type:"GET",url:"api/tree?projectID="+e}).done(function(e){t(e)})},openProjectVersion:function(e,t,o){$.ajax({type:"GET",url:"api/version?projectID="+e+"&version="+t}).done(function(e){o(e)})}};
var spreadSheet={display:function(){project.cleanseData(),spreadSheetView.render(project.tree)},fields:function(){return project.fields()},tree:function(){return project.tree},updateFieldValue:function(e,d){var r=project.findNode(d);r&&(r.values||(r.values={}),r.values[e]=spreadSheetView.getFieldValue(e,d)),project.tree.children.forEach(function(d){aggregate_any(d,e)})},rawValue:function(e,d){var r=project.findNode(parseInt(d));return r.values&&r.values[e]?r.values[e]:""},formattedValue:function(e,d){return d.values&&d.values[e.name]?Field.formatValue(e,d.values[e.name]):""},addField:function(e){project.addField(e),spreadSheetView.addField(e)},hasChildren:function(e){return!project.isNodeChildless(e)},childrenHidden:function(e){return project.isNodeCollapsed(e)},moveNode:function(e,d){var r=project.findNode(d),t=project.findNode(e);spreadSheet.removeNode(t),project.addNode(t,r),spreadSheet.addNode(t,r)},removeNode:function(e){var d=project.findParent(e.id);project.traverse(project.getChildren,spreadSheetView.removeNode,e),project.removeNode(e),spreadSheetView.redrawNodeContent(d)},deleteNode:function(e){var d=project.findNode(e);spreadSheet.removeNode(d)},addNode:function(e,d){project.isNodeCollapsed(d)&&spreadSheet.expandNode(d),spreadSheetView.redrawNodeContent(d),spreadSheetView.insertNodeAfter(e,d),spreadSheetView.renderExpander()},copyNode:function(e){var d=project.findNode(e),r=project.cloneNode(d);project.insertNode(r,d),spreadSheetView.insertNodeBefore(r,d)},expandNode:function(e){project.expandNode(e),spreadSheetView.expandNode(e),spreadSheetView.redrawNodeContent(e)},collapseNode:function(e){project.traverseDescendants(project.getChildren,spreadSheetView.removeNode,e),project.collapseNode(e),spreadSheetView.redrawNodeContent(e)},toggleNode:function(e){var d=project.findNode(e);project.isNodeExpanded(d)?spreadSheet.collapseNode(d):project.isNodeCollapsed(d)&&spreadSheet.expandNode(d)},updateNodeName:function(e,d){project.findNode(e).name=d},updateNumberFieldFormatting:function(e){project.traverse(project.getChildren,function(d){if(d.values){var r=Field.formatValue(e,Number(d.values[e.name]));spreadSheetView.updateFieldValue(e.name,d.id,r)}})},enableDragging:function(e){project.traverse(project.getChildren,spreadSheetView.enableDragging,e)}};
var spreadSheet={display:function(){project.cleanseData(),spreadSheetView.render(project.tree)},fields:function(){return project.fields()},tree:function(){return project.tree},updateFieldValue:function(e,d){var r=project.findNode(d);r&&(r.values||(r.values={}),r.values[e]=spreadSheetView.getFieldValue(e,d)),project.tree.children.forEach(function(d){aggregate_any(d,e)})},rawValue:function(e,d){var r=project.findNode(parseInt(d));return r.values&&r.values[e]?r.values[e]:""},formattedValue:function(e,d){return d.values&&d.values[e.name]?Field.formatValue(e,d.values[e.name]):""},addField:function(e){project.addField(e),spreadSheetView.addField(e)},hasChildren:function(e){return!project.isNodeChildless(e)},childrenHidden:function(e){return project.isNodeCollapsed(e)},moveNode:function(e,d){var r=project.findNode(d),t=project.findNode(e);spreadSheet.removeNode(t),project.addNode(t,r),spreadSheet.addNode(t,r)},removeNode:function(e){var d=project.findParent(e.id);project.traverse(project.getChildren,spreadSheetView.removeNode,e),project.removeNode(e),spreadSheetView.redrawNodeContent(d)},deleteNode:function(e){var d=project.findNode(e);spreadSheet.removeNode(d)},addNode:function(e,d){project.isNodeCollapsed(d)&&spreadSheet.expandNode(d),spreadSheetView.redrawNodeContent(d),spreadSheetView.insertNodeAfter(e,d),spreadSheetView.renderExpander()},copyNode:function(e){var d=project.findNode(e),r=project.cloneNode(d);project.insertNode(r,d),spreadSheetView.insertNodeBefore(r,d)},expandNode:function(e){project.expandNode(e),spreadSheetView.expandNode(e),spreadSheetView.redrawNodeContent(e)},collapseNode:function(e){project.traverseDescendants(project.getChildren,spreadSheetView.removeNode,e),project.collapseNode(e),spreadSheetView.redrawNodeContent(e)},toggleNode:function(e){var d=project.findNode(e);project.isNodeExpanded(d)?spreadSheet.collapseNode(d):project.isNodeCollapsed(d)&&spreadSheet.expandNode(d)},updateNodeName:function(e,d){project.findNode(e).name=d},updateNumberFieldFormatting:function(e){project.traverse(project.getChildren,function(d){if(d.values){var r=Field.formatValue(e,Number(d.values[e.name]));spreadSheetView.updateFieldValue(e.name,d.id,r)}})},enableDragging:function(e){project.traverse(project.getChildren,spreadSheetView.enableDragging,e)}};
var DOWN_ARROW_IMAGE_PATH="images/down-arrow.png",CHECK_MARK_IMAGE_PATH="images/checkmark.png",BLANK_MARK_IMAGE_PATH="images/blankmark.png",ENTER_KEY=13,KEY_UP_ARROW=38,KEY_DOWN_ARROW=40,KEY_LEFT_ARROW=37,KEY_RIGHT_ARROW=39,DEFAULT_NODE_INPUT_WIDTH=390,SPREADSHEET_VIEW="0",TREE_VIEW="1",WEIGHTED_TREE_VIEW="2",CIRCLE_VIEW="3";
function debug(){}debug.print=function(n){console.log(JSON.stringify(n,null,"	"))},debug.printTree=function(){console.log(JSON.stringify(project.tree,null,"	"))};
var circleView={destroy:function(){$("#circleView").remove()},display:function(){function t(t){s=t;var l=d3.transition().duration(d3.event.altKey?7500:750).tween("zoom",function(t){var l=d3.interpolateZoom(n,[s.x,s.y,2*s.r+r]);return function(t){e(l(t))}});l.selectAll("text").filter(function(t){return t.parent===s||"inline"===this.style.display}).style("fill-opacity",function(t){return t.parent===s?1:0}).each("start",function(t){t.parent===s&&(this.style.display="inline")}).each("end",function(t){t.parent!==s&&(this.style.display="none")})}function e(t){var e=l/t[2];n=t,p.attr("transform",function(n){return"translate("+(n.x-t[0])*e+","+(n.y-t[1])*e+")"}),u.attr("r",function(t){return t.r*e})}$("body").append('<div id="circleView"></div>');var n,r=20,l=960,a=d3.scale.linear().domain([-1,5]).range(["hsl(152,80%,80%)","hsl(228,30%,40%)"]).interpolate(d3.interpolateHcl),i=d3.layout.pack().padding(2).size([l-r,l-r]).value(function(t){return Math.PI*t.values.A*t.values.A/4}),c=d3.select("#circleView").append("svg").attr("width",l).attr("height",l).append("g").attr("transform","translate("+l/2+","+l/2+")"),o=project.tree,s=o,d=i.nodes(o),u=c.selectAll("circle").data(d).enter().append("circle").attr("class",function(t){return t.parent?t.children?"node":"node node--leaf":"node node--root"}).style("fill",function(t){return t.children?a(t.depth):null}).on("click",function(e){s!==e&&(t(e),d3.event.stopPropagation())}),p=(c.selectAll("text").data(d).enter().append("text").attr("class","label").style("fill-opacity",function(t){return t.parent===o?1:0}).style("display",function(t){return t.parent===o?null:"none"}).text(function(t){return t.name}),c.selectAll("circle,text"));d3.select("body").style("background",a(-1)).on("click",function(){t(o)}),e([o.x,o.y,2*o.r+r]),d3.select(self.frameElement).style("height",l+"px")}};
var expanderSelector={init:function(e){$("#expanderContainer").html(expanderSelector.getMarkup(e)),$("#expanderSelector").change(expanderSelector.handle)},handle:function(){var e=parseInt($("#expanderSelector").val());e>0&&hms.expandToLevel(e)},getMarkup:function(e){for(var n='<div id="expanderSelectContainer"><select id="expanderSelector" class="form-control"><option value="0">Expand/Collapse to Level</option>',t=1;e+1>t;t++)n+='<option value="'+t+'">'+t+"</option>";return n+='</select><input id="projectActionInput" class="form-control"></input></div>'}};
var fieldMenuView={render:function(e,d,i){var n='<div id="fieldMenu" style="left:'+(d-10)+"px;top:"+(i-10)+'px;">';n+=this.renderMenu(e),n+="</div>",$("body").append($(n)),$("#fieldMenu").mouseleave(function(){$("#fieldMenu").remove()})},renderMenu:function(e){var d="<ul>";return e.items.forEach(function(e){d+='<li onclick="fieldMenuController.handleClick('+e.id+');">';var i="uncheckedFieldMenuItem";e.field&&e.checked&&(i="checkedFieldMenuItem"),d+='<img id="FieldMenuItem'+e.id+'" src="'+CHECK_MARK_IMAGE_PATH+'" class="'+i+'"/>',d+=e.display,e.items&&e.items.length>0&&(d+='<div class="arrowRight"></div>',d+=fieldMenuView.renderMenu(e)),d+="</li>"}),d+"</ul>"},setCheckmarks:function(e,d){d.forEach(function(e){$("#FieldMenuItem"+e.id).removeClass("checkedFieldMenuItem").addClass("uncheckedFieldMenuItem")}),$("#FieldMenuItem"+e).removeClass("uncheckedFieldMenuItem").addClass("checkedFieldMenuItem")}};
var headerView={render:function(e){var t='<label id="projectSelectorLabel">Project:</label><label id="versionSelectorLabel">Version:</label><label id="viewSelectorLabel">View:</label>';t+='<select id="projectSelector" class="form-control"><option id="selectProjectOption" value="0">Select Project...</option>',e.forEach(function(e){t+='<option value="'+e.id+'">'+e.name+"</option>"}),t+='<option id="newProjectOption" value="-1">Create New Project...</option></select><input id="editNewProjectNameInput" class="form-control"></input>',t+='<a href="#" id="save-database-button" class="btn btn-default">Save to Database</a>',t+='<select id="viewSelector" class="form-control"><option value="0">Spread Sheet</option><option value="1">Tree</option><option value="2">Weighted Tree</option><option value="3">Circle Packing</option></select>',$("#header").html(t),$("#viewSelector").hide(),$("#save-database-button").hide(),$("#viewSelectorLabel").hide(),$("#versionSelectorLabel").hide(),$("#projectSelector").change(function(){headerView.selectProject($(this))}),$("#editNewProjectNameInput").keyup(function(e){headerView.createNewProject(e)}),$("#save-database-button").click(function(){hms.openSaveDBDialog()}),$("#viewSelector").change(function(){hms.selectView($(this).val())})},refresh:function(e){$("#versionSelector").remove();var t='<select id="versionSelector" class="form-control">';e.forEach(function(e){t+='<option value="'+e.version+'">'+e.version+"</option>"}),t+="</select>",$("#header").append(t),$("#viewSelector").show(),$("#save-database-button").show(),$("#viewSelectorLabel").show(),$("#versionSelectorLabel").show(),$("#versionSelector").change(function(){hms.selectVersion($(this).val())})},selectedView:function(){return $("#viewSelector").val()},selectProject:function(e){"newProjectOption"===e.find(":selected").attr("id")?($("#editNewProjectNameInput").val("Type New Project Name and Press Enter to Create"),$("#editNewProjectNameInput").show().focus().select()):($("#selectProjectOption").remove(),hms.openProject(e.val()))},createNewProject:function(e){if(e.keyCode==ENTER_KEY){$("#selectProjectOption").remove();var t=$("#editNewProjectNameInput").val();$("#editNewProjectNameInput").hide();var o=hms.nextProjectID(),r=document.createElement("option");r.text=t,r.value=o.toString(),$(r).insertBefore("#projectSelector option:nth-child("+$("#projectSelector").length+")"),$("#projectSelector").val(o),hms.createNewProject(t)}},selectVersion:function(e){$("#versionSelector").val(e)},setVersionOutOfDate:function(){$("#versionSelectorLabel").html("Version Out of Date"),$("#versionSelectorLabel").css("color","red")},setVersionCurrent:function(){$("#versionSelectorLabel").html("Version:"),$("#versionSelectorLabel").css("color","black")}};
var projectAction={init:function(){$("#project-action-container").html(projectAction.markup()),$("#projectActionInput").keyup(function(t){t.keyCode==ENTER_KEY&&projectAction.enterPressed()}),$("#projectActionSelector").change(projectAction.handle)},handle:function(){"addField"==$("#projectActionSelector").val()&&($("#projectActionInput").val("Type New Field Name and Press Enter to Create"),$("#projectActionInput").show().focus().select())},enterPressed:function(){"addField"==$("#projectActionSelector").val()&&(spreadSheet.addField($("#projectActionInput").val()),$("#projectActionInput").hide(),$("#projectActionSelector").val("blank"))},markup:function(){return'<div id="projectActionSelectorContainer"><select id="projectActionSelector" class="form-control"><option value="blank"></option><option value="addField">Add Field</option></select><input id="projectActionInput" class="form-control"></input></div>'}};
var saveDBDialog={render:function(a,e,o,l){$("#saveDBDialog").remove(),$("body").append('<div class="modal fade" id="saveDBDialog" role="dialog"></div>'),$("#saveDBDialog").append('<div class="modal-dialog"><div id="saveDBDialogContent" class="modal-content"></div></div>'),$("#saveDBDialogContent").append('<div class="modal-header" style="padding:15px 30px;"><button type="button" class="close" data-dismiss="modal">&times;</button><h4>Save Project Changes to Database</h4></div>'),$("#saveDBDialogContent").append('<div id="saveDBDialogBody" class="modal-body" style="padding:40px 50px;"></div>'),$("#saveDBDialogBody").append("<div><label>Base Version: "+a+" - "+o+" - "+e+"</label></div>"),$("#saveDBDialogBody").append('<div style="margin-top:20px"><label>New Version:  '+l+"</label></div><div></div>"),$("#saveDBDialogBody").append('<div ><label for="versionLabel">New Version Label</label>'),$("#saveDBDialogBody").append('<input type="text" class="form-control" id="versionLabel"></div>'),$("#saveDBDialogBody").append('<div style="margin-top:20px"><label for="reasonForChange">Reason for Changes</label>'),$("#saveDBDialogBody").append('<textarea style="resize:none" class="form-control" rows="5" id="reasonForChange"></textarea></div>'),$("#saveDBDialogContent").append('<div id="saveDBDialogFooter" class="modal-footer"></div>'),$("#saveDBDialogFooter").append('<button style="margin-left:10px" class="btn btn-danger btn-default pull-right" data-dismiss="modal">Cancel</button>'),$("#saveDBDialogFooter").append('<button id="saveDBDialogSaveButton" class="btn btn-info btn-default pull-right" data-dismiss="modal">Save</button>'),$("#saveDBDialogSaveButton").click(function(){hms.saveToDatabase()}),$("#saveDBDialog").modal()}};
var spreadSheetKeyHandler={checkKey:function(e){if(e=e||window.event,e.keyCode==KEY_UP_ARROW){e.preventDefault();var t=$(spreadSheetKeyHandler.findAncestor(document.activeElement,"tr")).prev()[0];t&&$("#"+spreadSheetKeyHandler.getNextElementID(t)).focus()}else if(e.keyCode==KEY_DOWN_ARROW){e.preventDefault();var n=$(spreadSheetKeyHandler.findAncestor(document.activeElement,"tr")).next()[0];n&&$("#"+spreadSheetKeyHandler.getNextElementID(n)).focus()}else e.keyCode==KEY_RIGHT_ARROW?(e.preventDefault(),$(spreadSheetKeyHandler.findAncestor(document.activeElement,"td")).next().find("input").focus()):e.keyCode==KEY_LEFT_ARROW&&(e.preventDefault(),$(spreadSheetKeyHandler.findAncestor(document.activeElement,"td")).prev().find("input").focus())},getNextElementID:function(e){var t=document.activeElement.id;if(t.indexOf("nodeInput")>-1)return"nodeInput"+e.id.replace("rowid","");for(var n=document.activeElement.className.split(" "),r=0;r<n.length;r++){var d=n[r];if(d.indexOf("fieldInput")>-1&&"fieldInput"!=d){var a=d.replace("fieldInput","");return a+e.id.replace("datarowid","")}}},findAncestor:function(e,t){for(t=t.toLowerCase();e&&e.parentNode;)if(e=e.parentNode,e.tagName&&e.tagName.toLowerCase()===t)return e}};
var spreadSheetView={render:function(){$(document).on("keydown",spreadSheetKeyHandler.checkKey),$("#spreadSheetView").remove(),$("body").append(this.spreadSheetMarkup()),projectAction.init(),this.renderExpander(),this.renderFieldsRow(),this.renderDataTable(),this.renderNodeColumn()},destroy:function(){$("#spreadSheetView").remove(),$(document).off("keydown")},spreadSheetMarkup:function(){return'<div id="spreadSheetView"><div id="spreadSheetViewActions"><div id="project-action-container"></div><div id="expanderContainer"></div></div><div id="fields-header-row"></div><div id="redips-drag"></div><div id="data-container"></div></div>'},renderExpander:function(){expanderSelector.init(spreadSheet.tree().maxDepth)},renderFieldsRow:function(){$("#fields-header-row").html('<table id="fieldHeaderTable"><tr id="fieldHeaderRow"></tr></table>'),spreadSheet.fields().forEach(function(e){$("#fieldHeaderRow").append(spreadSheetView.fieldHeader(e.name)),$("#fieldMenuButton"+e.name).click(function(d){spreadSheetView.showFieldMenu(d,e.name)})}),$("#fields-header-row").css("right",scrollBarWidth+"px")},fieldHeader:function(e){return'<td class="fieldHeaderCell"><div class="fieldHeaderContainer"><div class="moveColGrip"></div><div class="fieldNameInputContainer"><textarea id="colHeaderInput'+e+'" class="fieldNameInput">'+e+'</textarea></div><div class="fieldHeaderButton"><img id="fieldMenuButton'+e+'" src="images/down-arrow.png"/></div><div id="grip'+e+'" class="resizeColGrip" onmousedown="startResize(event, this)"></div></div></td>'},showFieldMenu:function(e,d){0===$("#fieldMenu").length&&fieldMenuController.displayFieldMenu(d,e.clientX,e.clientY)},renderDataTable:function(){$("#data-container").append('<table id="dataTable"></table>'),spreadSheet.tree().children.forEach(function(e){$("#dataTable").append(spreadSheetView.dataRowsMarkup(e))}),$("#data-container").scroll(function(){$("#redips-drag").scrollTop($("#data-container").scrollTop()),$("#fields-header-row").scrollLeft($("#data-container").scrollLeft())})},dataRowsMarkup:function(e){var d='<tr id="datarowid'+e.id+'" class="dataRow">';return spreadSheet.fields().forEach(function(t){d+='<td class="cell"><input class="fieldInput fieldInput'+t.name+'" type="text" id="'+t.name+e.id+'" value="'+spreadSheet.formattedValue(t,e)+'" oninput="spreadSheet.updateFieldValue(\''+t.name+"',"+e.id+')" onfocus="$(this).val(spreadSheet.rawValue(\''+t.name+"',"+e.id+'))"></td>'}),e.children.forEach(function(e){d+=spreadSheetView.dataRowsMarkup(e)}),d+"</tr>"},renderDataCell:function(e,d,t,n){$(e).append(spreadSheetView.fieldCell(d,t,n)),$("#"+d+t).on("input",function(){spreadSheet.updateFieldValue(d,t)}),$("#"+d+t).focus(function(){$(this).val(spreadSheet.rawValue(d,t))})},fieldCell:function(e,d,t){return'<td class="cell"><input class="fieldInput fieldInput'+e+'" type="text" id="'+e+d+'" value="'+t+'"></td>'},nodeRowMarkup:function(e){var d='<tr id="rowid'+e.id+'" class="nodeRow"><td class="redips-rowhandler cell"><div id="nodeContent'+e.id+'" class="node-container">';return d+=spreadSheetView.deleteButton(e.id)+spreadSheetView.copyButton(e.id)+spreadSheetView.dragHandle,d+=spreadSheetView.nodeContent(e),e.children.forEach(function(e){d+=spreadSheetView.nodeRowMarkup(e)}),d+"</div></td></tr>"},nodeContent:function(e){var d,t=10*(e.depth-1),n=t;return spreadSheet.hasChildren(e)?d=spreadSheet.childrenHidden(e)?'<span class="glyphicon glyphicon-chevron-right"></span>':'<span class="glyphicon glyphicon-chevron-down"></span>':(d="<span></span>",t+=12,n-=10),spreadSheetView.expandIcon(e.id,t,d)+spreadSheetView.nodeInput(e,DEFAULT_NODE_INPUT_WIDTH-n)},renderNodeColumn:function(){$("#redips-drag").html('<table id="treeTable"></table>'),spreadSheet.tree().children.forEach(function(e){$("#treeTable").append(spreadSheetView.nodeRowMarkup(e))}),$("#redips-drag").css("bottom",scrollBarWidth+"px"),redips.init()},dragHandle:'<div class="redips-drag pull-right"><i class="glyphicon glyphicon-move"></i></div>',copyButton:function(e){return'<a href="#"  class="pull-right btn btn-info btn-xs copy-button" onclick="spreadSheet.copyNode('+e+')"><i class="glyphicon glyphicon-plus"></i></a>'},deleteButton:function(e){return'<a href="#" class="pull-right btn btn-danger btn-xs delete-button" onclick="spreadSheet.deleteNode('+e+')"><i class="glyphicon glyphicon-remove"></i></a>'},expandIcon:function(e,d,t){return'<a href="#" id="icon'+e+'" class="btn btn-xs" style="margin-left:'+d+'px" onclick="spreadSheet.toggleNode('+e+')">'+t+"</a>"},nodeInput:function(e,d){return'<input id="nodeInput'+e.id+'" class="nodeTextInput" style="width:'+d+'px" type="text" value="'+e.name+'" oninput="spreadSheetView.updateNodeName('+e.id+')"/>'},expandNode:function(e){for(var d,t=e.children.length-1;t>=0;t--)d=e.children[t],$(spreadSheetView.dataRowsMarkup(d)).insertAfter($("#datarowid"+e.id)),$(spreadSheetView.nodeRowMarkup(d)).insertAfter($("#rowid"+e.id));spreadSheetView.enableDragging(e)},redrawNodeContent:function(e){$("#icon"+e.id).remove(),$("#nodeInput"+e.id).remove(),$("#nodeContent"+e.id).append(spreadSheetView.nodeContent(e))},addField:function(e){$("#fieldHeaderRow").append(spreadSheetView.fieldHeader(e)),$("#fieldMenuButton"+e).click(function(d){spreadSheetView.showFieldMenu(d,e)}),$(".dataRow").each(function(d,t){spreadSheetView.renderDataCell(t,e,parseInt(t.id.replace("datarowid","")),"")})},updateNodeName:function(e){var d=$("#nodeInput"+e).val();spreadSheet.updateNodeName(e,d),$("#nodeInput"+e).attr("value",d)},removeNode:function(e){$("#rowid"+e.id).remove(),$("#datarowid"+e.id).remove()},insertNodeBefore:function(e,d){$(spreadSheetView.nodeRowMarkup(e)).insertBefore($("#rowid"+d.id)),$(spreadSheetView.dataRowsMarkup(e)).insertBefore($("#datarowid"+d.id)),spreadSheetView.enableDragging(e)},insertNodeAfter:function(e,d){$(spreadSheetView.nodeRowMarkup(e)).insertAfter($("#rowid"+d.id)),$(spreadSheetView.dataRowsMarkup(e)).insertAfter($("#datarowid"+d.id)),spreadSheetView.enableDragging(e)},enableDragging:function(e){REDIPS.drag.enableDivs("init",$("#rowid"+e.id).find("div"))},getFieldValue:function(e,d){return $("#"+e+d).val()},updateFieldValue:function(e,d,t){$("#"+e+d).val(t)}};
var MIN_NODE_SIZE=5,MAX_NODE_SIZE=100,VERTICAL_VIEW=0,HORIZONTAL_VIEW=1,treeView={destroy:function(){$("#treeView").remove()},refresh:function(){treeView.update(treeView.root)},rotate:function(){treeView.direction===HORIZONTAL_VIEW?(treeView.direction=VERTICAL_VIEW,treeView.horizontal_spacing=100,treeView.vertical_spacing=60,treeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.x,e.y]}),treeView.root.y0=treeView.viewerHeight/2,treeView.root.x0=0):(treeView.direction=HORIZONTAL_VIEW,treeView.horizontal_spacing=150,treeView.vertical_spacing=25,treeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]}),treeView.root.x0=treeView.viewerHeight/2,treeView.root.y0=0),treeView.update(treeView.root)},init:function(){treeView.direction=HORIZONTAL_VIEW,treeView.selectedNode=null,treeView.draggingNode=null,treeView.duration=750,treeView.horizontal_spacing=150,treeView.vertical_spacing=25,treeView.maxLabelLength=0,project.traverse(project.getChildren,function(e){treeView.maxLabelLength=Math.max(e.name.length,treeView.maxLabelLength)}),treeView.viewerWidth=$("#tree-container").width(),treeView.viewerHeight=$("#tree-container").height(),treeView.tree=d3.layout.tree().size([treeView.viewerHeight,treeView.viewerWidth]),treeView.root=project.tree,treeView.dragStarted=null,treeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]})},render:function(){function e(){treeView.svgGroup.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function t(e,t){treeView.draggingNode=e,d3.select(t).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(t).attr("class","node activeDrag"),treeView.svgGroup.selectAll("g.node").sort(function(e,t){return e.id!=treeView.draggingNode.id?1:-1}),nodes.length>1&&(links=treeView.tree.links(nodes),nodePaths=treeView.svgGroup.selectAll("path.link").data(links,function(e){return e.target.id}).remove(),nodesExit=treeView.svgGroup.selectAll("g.node").data(nodes,function(e){return e.id}).filter(function(e,t){return e.id!=treeView.draggingNode.id}).remove()),parentLink=treeView.tree.links(treeView.tree.nodes(treeView.draggingNode.parent)),treeView.svgGroup.selectAll("path.link").filter(function(e,t){return e.target.id==treeView.draggingNode.id}).remove(),treeView.dragStarted=null}function r(e){e!=treeView.root&&(treeView.dragStarted&&(domNode=this,t(e,domNode)),e.x0+=d3.event.dy,e.y0+=d3.event.dx,d3.select(this).attr("transform","translate("+e.y0+","+e.x0+")"),treeView.updateTempConnector())}treeView.destroy(),$("body").append('<div id="treeView"><div id="treeViewOptions"><div id="expanderContainer"></div></div><div id="tree-container"></div></div>'),expanderSelector.init(project.tree.maxDepth),$("#treeViewOptions").append('<a href="#" id="treeViewRotateButton" class="btn btn-default pull-right">Rotate View</a>'),$("#treeViewRotateButton").click(function(){treeView.rotate()}),treeView.init(),treeView.zoomListener=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",e);var i=d3.select("#tree-container").append("svg").attr("width",treeView.viewerWidth).attr("height",treeView.viewerHeight).attr("class","overlay").call(treeView.zoomListener);dragListener=d3.behavior.drag().on("dragstart",treeView.dragstart).on("drag",r).on("dragend",treeView.dragend),treeView.svgGroup=i.append("g"),treeView.root.x0=treeView.viewerHeight/2,treeView.root.y0=0,treeView.update(treeView.root),treeView.centerNode(treeView.root)},click:function(e){d3.event.defaultPrevented||(project.toggleExpansion(e),treeView.update(e))},update:function(e){var t=0,r=[1],i=function(e,t){t.children&&t.children.length>0&&(r.length<=e+1&&r.push(0),r[e+1]+=t.children.length,t.children.forEach(function(t){i(e+1,t)}))};i(0,treeView.root);var n=d3.max(r)*treeView.vertical_spacing;treeView.tree=treeView.tree.size([n,treeView.viewerWidth]);var o=treeView.tree.nodes(treeView.root).reverse(),a=treeView.tree.links(o);o.forEach(function(e){e.y=e.depth*treeView.horizontal_spacing}),node=treeView.svgGroup.selectAll("g.node").data(o,function(e){return e.id||(e.id=++t)});var d=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(t){return"translate("+e.y0+","+e.x0+")"}).on("click",treeView.click);d.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"}),d.append("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}).style("fill-opacity",0),d.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(e){treeView.overCircle(e)}).on("mouseout",function(e){treeView.outCircle(e)}),node.select("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}),node.select("circle.nodeCircle").attr("r",function(e){return treeView.computeNodeSize(e)}).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"});var l;l=treeView.direction===VERTICAL_VIEW?node.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}):node.attr("transform",function(e){return"translate("+e.y+","+e.x+")"}),l.select("text").style("fill-opacity",1);var c=node.exit().attr("transform",function(t){return"translate("+e.y+","+e.x+")"}).remove();c.select("circle").attr("r",0),c.select("text").style("fill-opacity",0);var s=treeView.svgGroup.selectAll("path.link").data(a,function(e){return e.target.id});s.enter().insert("path","g").attr("class","link").attr("d",function(t){var r={x:e.x0,y:e.y0};return treeView.diagonal({source:r,target:r})}),s.attr("d",treeView.diagonal),s.exit().attr("d",function(t){var r={x:e.x,y:e.y};return treeView.diagonal({source:r,target:r})}).remove(),o.forEach(function(e){e.x0=e.x,e.y0=e.y})},dragstart:function(e){e!=treeView.root&&(treeView.dragStarted=!0,nodes=treeView.tree.nodes(e),d3.event.sourceEvent.stopPropagation())},dragend:function(e){e!=treeView.root&&(domNode=this,treeView.selectedNode&&(project.removeNode(treeView.draggingNode),treeView.selectedNode.children||(treeView.selectedNode.children=[]),treeView.selectedNode.children.push(treeView.draggingNode),project.expandNode(treeView.selectedNode)),treeView.selectedNode=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),treeView.updateTempConnector(),null!==treeView.draggingNode&&(treeView.update(treeView.root),treeView.draggingNode=null))},updateTempConnector:function(){var e=[];null!==treeView.draggingNode&&null!==treeView.selectedNode&&(e=[{source:{x:treeView.selectedNode.y0,y:treeView.selectedNode.x0},target:{x:treeView.draggingNode.y0,y:treeView.draggingNode.x0}}]);var t=treeView.svgGroup.selectAll(".templink").data(e);t.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),t.attr("d",d3.svg.diagonal()),t.exit().remove()},overCircle:function(e){treeView.selectedNode=e,treeView.updateTempConnector()},outCircle:function(e){treeView.selectedNode=null,treeView.updateTempConnector()},centerNode:function(e){scale=treeView.zoomListener.scale(),x=-e.y0,y=-e.x0,x=x*scale+treeView.viewerWidth/4,y=y*scale+treeView.viewerHeight/2,d3.select("g").attr("transform","translate("+x+","+y+")scale("+scale+")"),treeView.zoomListener.scale(scale),treeView.zoomListener.translate([x,y])},computeNodeSize:function(e){var t=MIN_NODE_SIZE;return t}};
var MIN_NODE_SIZE=5,MAX_NODE_SIZE=100,VERTICAL_VIEW=0,HORIZONTAL_VIEW=1,weightedTreeView={destroy:function(){$("#treeView").remove()},refresh:function(){weightedTreeView.update(weightedTreeView.root)},rotate:function(){weightedTreeView.direction===HORIZONTAL_VIEW?(weightedTreeView.direction=VERTICAL_VIEW,weightedTreeView.horizontal_spacing=100,weightedTreeView.vertical_spacing=60,weightedTreeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.x,e.y]}),weightedTreeView.root.y0=weightedTreeView.viewerHeight/2,weightedTreeView.root.x0=0):(weightedTreeView.direction=HORIZONTAL_VIEW,weightedTreeView.horizontal_spacing=300,weightedTreeView.vertical_spacing=200,weightedTreeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]}),weightedTreeView.root.x0=weightedTreeView.viewerHeight/2,weightedTreeView.root.y0=0),weightedTreeView.update(weightedTreeView.root)},init:function(){weightedTreeView.direction=HORIZONTAL_VIEW,weightedTreeView.selectedNode=null,weightedTreeView.draggingNode=null,weightedTreeView.duration=750,weightedTreeView.horizontal_spacing=300,weightedTreeView.vertical_spacing=200,weightedTreeView.maxLabelLength=0,project.traverse(project.getChildren,function(e){weightedTreeView.maxLabelLength=Math.max(e.name.length,weightedTreeView.maxLabelLength)}),weightedTreeView.viewerWidth=$("#tree-container").width(),weightedTreeView.viewerHeight=$("#tree-container").height(),weightedTreeView.tree=d3.layout.tree().size([weightedTreeView.viewerHeight,weightedTreeView.viewerWidth]),weightedTreeView.root=project.tree,weightedTreeView.dragStarted=null,weightedTreeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]})},render:function(){function e(){weightedTreeView.svgGroup.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function t(e,t){weightedTreeView.draggingNode=e,d3.select(t).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(t).attr("class","node activeDrag"),weightedTreeView.svgGroup.selectAll("g.node").sort(function(e,t){return e.id!=weightedTreeView.draggingNode.id?1:-1}),nodes.length>1&&(links=weightedTreeView.tree.links(nodes),nodePaths=weightedTreeView.svgGroup.selectAll("path.link").data(links,function(e){return e.target.id}).remove(),nodesExit=weightedTreeView.svgGroup.selectAll("g.node").data(nodes,function(e){return e.id}).filter(function(e,t){return e.id!=weightedTreeView.draggingNode.id}).remove()),parentLink=weightedTreeView.tree.links(weightedTreeView.tree.nodes(weightedTreeView.draggingNode.parent)),weightedTreeView.svgGroup.selectAll("path.link").filter(function(e,t){return e.target.id==weightedTreeView.draggingNode.id}).remove(),weightedTreeView.dragStarted=null}function i(e){e!=weightedTreeView.root&&(weightedTreeView.dragStarted&&(domNode=this,t(e,domNode)),e.x0+=d3.event.dy,e.y0+=d3.event.dx,d3.select(this).attr("transform","translate("+e.y0+","+e.x0+")"),weightedTreeView.updateTempConnector())}weightedTreeView.destroy(),$("body").append('<div id="treeView"><div id="treeViewOptions"><div id="expanderContainer"></div></div><div id="tree-container"></div></div>'),expanderSelector.init(project.tree.maxDepth),$("#treeViewOptions").append('<a href="#" id="treeViewRotateButton" class="btn btn-default pull-right">Rotate View</a>'),$("#treeViewRotateButton").click(function(){weightedTreeView.rotate()}),weightedTreeView.init(),weightedTreeView.zoomListener=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",e);var r=d3.select("#tree-container").append("svg").attr("width",weightedTreeView.viewerWidth).attr("height",weightedTreeView.viewerHeight).attr("class","overlay").call(weightedTreeView.zoomListener);dragListener=d3.behavior.drag().on("dragstart",weightedTreeView.dragstart).on("drag",i).on("dragend",weightedTreeView.dragend),weightedTreeView.svgGroup=r.append("g"),weightedTreeView.root.x0=weightedTreeView.viewerHeight/2,weightedTreeView.root.y0=0,weightedTreeView.update(weightedTreeView.root),weightedTreeView.centerNode(weightedTreeView.root)},click:function(e){d3.event.defaultPrevented||(project.toggleExpansion(e),weightedTreeView.update(e))},update:function(e){var t=0,i=[1],r=function(e,t){t.children&&t.children.length>0&&(i.length<=e+1&&i.push(0),i[e+1]+=t.children.length,t.children.forEach(function(t){r(e+1,t)}))};r(0,weightedTreeView.root);var d=d3.max(i)*weightedTreeView.vertical_spacing;weightedTreeView.tree=weightedTreeView.tree.size([d,weightedTreeView.viewerWidth]);var n=weightedTreeView.tree.nodes(weightedTreeView.root).reverse(),o=weightedTreeView.tree.links(n);n.forEach(function(e){e.y=e.depth*weightedTreeView.horizontal_spacing}),node=weightedTreeView.svgGroup.selectAll("g.node").data(n,function(e){return e.id||(e.id=++t)});var a=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(t){return"translate("+e.y0+","+e.x0+")"}).on("click",weightedTreeView.click);a.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"}),a.append("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}).style("fill-opacity",0),a.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(e){weightedTreeView.overCircle(e)}).on("mouseout",function(e){weightedTreeView.outCircle(e)}),node.select("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}),node.select("circle.nodeCircle").attr("r",function(e){return weightedTreeView.computeNodeSize(e)}).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"});var w;w=weightedTreeView.direction===VERTICAL_VIEW?node.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}):node.attr("transform",function(e){return"translate("+e.y+","+e.x+")"}),w.select("text").style("fill-opacity",1);var g=node.exit().attr("transform",function(t){return"translate("+e.y+","+e.x+")"}).remove();g.select("circle").attr("r",0),g.select("text").style("fill-opacity",0);var l=weightedTreeView.svgGroup.selectAll("path.link").data(o,function(e){return e.target.id});l.enter().insert("path","g").attr("class","link").attr("d",function(t){var i={x:e.x0,y:e.y0};return weightedTreeView.diagonal({source:i,target:i})}),l.attr("d",weightedTreeView.diagonal),l.exit().attr("d",function(t){var i={x:e.x,y:e.y};return weightedTreeView.diagonal({source:i,target:i})}).remove(),n.forEach(function(e){e.x0=e.x,e.y0=e.y})},dragstart:function(e){e!=weightedTreeView.root&&(weightedTreeView.dragStarted=!0,nodes=weightedTreeView.tree.nodes(e),d3.event.sourceEvent.stopPropagation())},dragend:function(e){e!=weightedTreeView.root&&(domNode=this,weightedTreeView.selectedNode&&(project.removeNode(weightedTreeView.draggingNode),weightedTreeView.selectedNode.children||(weightedTreeView.selectedNode.children=[]),weightedTreeView.selectedNode.children.push(weightedTreeView.draggingNode),project.expandNode(weightedTreeView.selectedNode)),weightedTreeView.selectedNode=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),weightedTreeView.updateTempConnector(),null!==weightedTreeView.draggingNode&&(weightedTreeView.update(weightedTreeView.root),weightedTreeView.draggingNode=null))},updateTempConnector:function(){var e=[];null!==weightedTreeView.draggingNode&&null!==weightedTreeView.selectedNode&&(e=[{source:{x:weightedTreeView.selectedNode.y0,y:weightedTreeView.selectedNode.x0},target:{x:weightedTreeView.draggingNode.y0,y:weightedTreeView.draggingNode.x0}}]);var t=weightedTreeView.svgGroup.selectAll(".templink").data(e);t.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),t.attr("d",d3.svg.diagonal()),t.exit().remove()},overCircle:function(e){weightedTreeView.selectedNode=e,weightedTreeView.updateTempConnector()},outCircle:function(e){weightedTreeView.selectedNode=null,weightedTreeView.updateTempConnector()},centerNode:function(e){scale=weightedTreeView.zoomListener.scale(),x=-e.y0,y=-e.x0,x=x*scale+weightedTreeView.viewerWidth/4,y=y*scale+weightedTreeView.viewerHeight/2,d3.select("g").attr("transform","translate("+x+","+y+")scale("+scale+")"),weightedTreeView.zoomListener.scale(scale),weightedTreeView.zoomListener.translate([x,y])},computeNodeSize:function(e){var t=MIN_NODE_SIZE;return tree.field&&(e.values&&e.values[tree.field.name]&&(t=MAX_NODE_SIZE*Math.sqrt(e.values[tree.field.name]/tree.maxFieldValue)),MIN_NODE_SIZE>t&&(t=MIN_NODE_SIZE)),t}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZy5qcyIsImRyYWctbGliLmpzIiwiZHJhZy5qcyIsInJlc2l6ZS1jb2x1bW4uanMiLCJjb250cm9sbGVyL2V4cGFuZGVyLmpzIiwiY29udHJvbGxlci9maWVsZE1lbnVDb250cm9sbGVyLmpzIiwiY29udHJvbGxlci9obXMuanMiLCJjb250cm9sbGVyL3NwcmVhZFNoZWV0LmpzIiwiY29udHJvbGxlci90cmVlLmpzIiwibW9kZWwvRmllbGQuanMiLCJtb2RlbC9GaWVsZE1lbnUuanMiLCJtb2RlbC9GaWVsZE1lbnVJdGVtLmpzIiwibW9kZWwvcHJvamVjdC5qcyIsIm1vZGVsL3Byb2plY3RzLmpzIiwibW9kZWwvc3ByZWFkU2hlZXQuanMiLCJtb2RlbC9fc29tZXN0dWZmLmpzIiwidXRpbC9jb25zdGFudHMuanMiLCJ1dGlsL2RlYnVnLmpzIiwidmlldy9jaXJjbGVWaWV3LmpzIiwidmlldy9leHBhbmRlclNlbGVjdG9yLmpzIiwidmlldy9maWVsZE1lbnVWaWV3LmpzIiwidmlldy9oZWFkZXJWaWV3LmpzIiwidmlldy9wcm9qZWN0QWN0aW9uLmpzIiwidmlldy9zYXZlREJEaWFsb2cuanMiLCJ2aWV3L3NwcmVhZFNoZWV0S2V5SGFuZGxlci5qcyIsInZpZXcvc3ByZWFkU2hlZXRWaWV3LmpzIiwidmlldy90cmVlVmlldy5qcyIsInZpZXcvd2VpZ2h0ZWRUcmVlVmlldy5qcyJdLCJuYW1lcyI6WyJhZ2dyZWdhdGVfYW55Iiwibm9kZSIsImZpZWxkIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJjaGlsZHJlblN1bSIsImkiLCJ2YWx1ZXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJSRURJUFMiLCJkcmFnIiwiaW5pdCIsImVuYWJsZURyYWciLCJlbmFibGVEaXZzIiwiaGFuZGxlck9uTW91c2VEb3duIiwiaGFuZGxlck9uTW91c2VVcCIsImhhbmRsZXJPbk1vdXNlTW92ZSIsImVsZW1lbnREcm9wIiwicmVzZXRTdHlsZXMiLCJyZWdpc3RlckV2ZW50cyIsImNlbGxDaGFuZ2VkIiwiaGFuZGxlck9uUmVzaXplIiwic2V0VGFibGVSb3dDb2x1bW4iLCJzZXRQb3NpdGlvbiIsInNldFRkU3R5bGUiLCJnZXRUZFN0eWxlIiwiYm94T2Zmc2V0IiwiY2FsY3VsYXRlQ2VsbHMiLCJnZXRTY3JvbGxQb3NpdGlvbiIsImF1dG9TY3JvbGxYIiwiYXV0b1Njcm9sbFkiLCJjb3B5UHJvcGVydGllcyIsImNsb25lTGltaXQiLCJnZXRTdHlsZSIsImZpbmRQYXJlbnQiLCJyb3dPcGFjaXR5Iiwicm93Q2xvbmUiLCJyb3dEcm9wIiwibm9ybWFsaXplIiwiYmdTdHlsZU9sZCIsInRhYmxlIiwibW92ZWQiLCJjbG9uZWQiLCJ3aW5kb3dTY3JvbGxQb3NpdGlvbiIsIm9iak1hcmdpbiIsInNjcmVlbiIsIndpZHRoIiwiaGVpZ2h0Iiwic2Nyb2xsRGF0YSIsImNvbnRhaW5lciIsIm9iaiIsImVkZ2UiLCJwYWdlIiwieCIsInkiLCJkaXYiLCJmbGFnIiwiY2xvbmVkSWQiLCJjdXJyZW50Q2VsbCIsImRyYWdDb250YWluZXIiLCJkaXZCb3giLCJwb2ludGVyIiwidGhyZXNob2xkIiwic2hpZnRLZXkiLCJjbG9uZUNsYXNzIiwicm93Iiwicm93X29sZCIsInJvd19zb3VyY2UiLCJjZWxsIiwiY2VsbF9vbGQiLCJjZWxsX3NvdXJjZSIsIm9iak9sZCIsImhvdmVyIiwiY29sb3JUZCIsImNvbG9yVHIiLCJzY3JvbGwiLCJlbmFibGUiLCJib3VuZCIsInNwZWVkIiwic3R5bGUiLCJib3JkZXJEaXNhYmxlZCIsIm9wYWNpdHlEaXNhYmxlZCIsInJvd0VtcHR5Q29sb3IiLCJ0ZCIsImNsb25lIiwia2V5RGl2Iiwia2V5Um93Iiwic2VuZEJhY2siLCJkcm9wIiwiZXZlbnQiLCJjbG9uZWREcm9wcGVkIiwiY2xvbmVkRW5kMSIsImNsb25lZEVuZDIiLCJkcm9wcGVkIiwiZHJvcHBlZEJlZm9yZSIsImZpbmlzaCIsIm5vdENsb25lZCIsIm5vdE1vdmVkIiwicm93Q2hhbmdlZCIsInJvd0NsaWNrZWQiLCJyb3dDbG9uZWQiLCJyb3dEcm9wcGVkIiwicm93RHJvcHBlZEJlZm9yZSIsInJvd0Ryb3BwZWRTb3VyY2UiLCJyb3dNb3ZlZCIsInJvd05vdENsb25lZCIsInJvd05vdE1vdmVkIiwicmVkaXBzQ2xvbmUiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJyZWRpcHMiLCJhZGQiLCJ3aW5kb3ciLCJlIiwib2Zmc2V0IiwicG9zaXRpb24iLCJYIiwiWSIsImV2dCIsImNhbmNlbEJ1YmJsZSIsInN0b3BQcm9wYWdhdGlvbiIsImdldFNlbGVjdGlvbiIsInJlbW92ZUFsbFJhbmdlcyIsInNlbGVjdGlvbiIsInR5cGUiLCJlbXB0eSIsImVycm9yIiwiY2xpZW50WCIsImNsaWVudFkiLCJ0aGlzIiwiY2xhc3NOYW1lIiwiaW5kZXhPZiIsImN1cnJlbnQiLCJwYXJlbnROb2RlIiwiZWwiLCJ0YWJsZU1pbmkiLCJyb3dPYmoiLCJub2RlTmFtZSIsInVuZGVmaW5lZCIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsInNvdXJjZVJvdyIsInJvd3MiLCJyb3dJZHgiLCJ0ck1pbmkiLCJkZWxldGVUYWJsZVJvdyIsInRibCIsImVtcHR5Um93IiwiZGVsZXRlUm93Iiwicm93SW5kZXgiLCJ0YWJsZVJvdyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicmVtb3ZlQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsInJfcm93IiwibXRfdHIiLCJyZW1vdmUiLCJvbnNlbGVjdHN0YXJ0IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsV2lkdGgiLCJzY3JvbGxIZWlnaHQiLCJ0YXJnZXQiLCJjZWxscyIsImJhY2tncm91bmRDb2xvciIsImNsb25lU291cmNlRGl2Iiwib25tb3VzZWRvd24iLCJ0b3AiLCJsZWZ0IiwiekluZGV4Iiwic2NhIiwiZGVsdGFYIiwiZGVsdGFZIiwic2Nyb2xsUG9zaXRpb24iLCJNYXRoIiwiYWJzIiwiY29udGFpblRhYmxlIiwicGFnZVlPZmZzZXQiLCJzY3JvbGxUb3AiLCJhdXRvc2Nyb2xsIiwibWlkc3RYIiwibWlkc3RZIiwicHJldmlvdXMiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJyb3dfb2Zmc2V0Iiwicm93X2ZvdW5kIiwidG9zIiwib2Zmc2V0SGVpZ2h0IiwicmkiLCJ0IiwidHIiLCJzIiwiY29sb3IiLCJ0b1N0cmluZyIsImJvcmRlclRyIiwiYm9yZGVyVG9wIiwiYm9yZGVyQm90dG9tIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJUb3BTdHlsZSIsImJvcmRlclRvcENvbG9yIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3R0b20iLCJib3JkZXJCb3R0b21TdHlsZSIsImJvcmRlckJvdHRvbUNvbG9yIiwiYyIsInJpZ2h0IiwiYm9yZGVyIiwibmFtZSIsImJveCIsImJveF9zY3JvbGwiLCJvTGVmdCIsIm9Ub3AiLCJib3hPbGQiLCJvZmZzZXRMZWZ0Iiwic2Nyb2xsTGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsIm9mZnNldFdpZHRoIiwiY2IiLCJkaXNwbGF5Iiwic2Nyb2xsWSIsInNjcm9sbFgiLCJzbyIsInBvcyIsIm9sZCIsIm1heHNwIiwiZWRnZUNyb3NzZWQiLCJjbGllbnRXaWR0aCIsInNjcm9sbEJ5IiwicGFyc2VJbnQiLCJpc05hTiIsInNldFRpbWVvdXQiLCJjbGllbnRIZWlnaHQiLCJzcmMiLCJjbG4iLCJjaGlsZHMiLCJjb3B5IiwiZTEiLCJlMiIsImVuYWJsZWQiLCJlbDEiLCJlbDIiLCJ0biIsIm1hdGNoQXJyYXkiLCJsaW1pdFR5cGUiLCJsaW1pdCIsImNsYXNzZXMiLCJtYXRjaCIsInJlcGxhY2UiLCJlbmFibGVfZmxhZyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJqIiwiayIsImJvcmRlclN0eWxlIiwib3BhY2l0eSIsImN1cnNvciIsIm92ZXJmbG93IiwidGJscyIsInJlZ2V4RHJhZyIsInJlZ2V4Tm9BdXRvc2Nyb2xsIiwiYm9yZGVyRW5hYmxlZCIsInRlc3QiLCJmaWx0ZXIiLCJzdHlsZV9uYW1lIiwiY3VycmVudFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRlZmF1bHRWaWV3IiwidGFnX25hbWUiLCJzdHIiLCJ0ZE5vZGVMaXN0IiwiY2hpbGROb2RlcyIsIm5vZGVUeXBlIiwiZXZlbnROYW1lIiwiaGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZXRhY2hFdmVudCIsInJkIiwibmV3UGFyZW50Um93IiwibW92ZWRJRCIsIm5ld1BhcmVudElEIiwic3ByZWFkU2hlZXQiLCJtb3ZlTm9kZSIsInJvd0RlbGV0ZWQiLCJyb3dVbmRlbGV0ZWQiLCJyZXNpemVDb2x1bW5MZWZ0IiwicmVzaXplRmllbGQiLCJNSU5fQ09MVU1OX1dJRFRIIiwiR1JJUFNfV0lEVEgiLCJzdGFydFJlc2l6ZSIsImdyaXAiLCIkIiwiYmluZCIsInJlc2l6ZURyYWciLCJyZXNpemVFbmQiLCJ2aXNpYmlsaXR5IiwicGFnZVgiLCJ1bmJpbmQiLCJuZXdXaWR0aCIsImNvbHVtbkNlbGxzIiwiZmllbGRNZW51Q29udHJvbGxlciIsImRpc3BsYXlGaWVsZE1lbnUiLCJmaWVsZE5hbWUiLCJwcm9qZWN0IiwiZ2V0RmllbGQiLCJtZW51IiwiRmllbGRNZW51IiwiZmllbGRzIiwiZmllbGRNZW51VmlldyIsInJlbmRlciIsImhhbmRsZUNsaWNrIiwibWVudUl0ZW1JRCIsImNsaWNrZWQiLCJnZXRNZW51SXRlbSIsInBhcmVudCIsImdldE1lbnVJdGVtUGFyZW50IiwidmFyTmFtZSIsInNldENoZWNrbWFya3MiLCJpdGVtcyIsInVwZGF0ZU51bWJlckZpZWxkRm9ybWF0dGluZyIsInJlYWR5Iiwic2Nyb2xsQmFyV2lkdGgiLCJnZXRTY3JvbGxCYXJXaWR0aCIsImhtcyIsInByb2plY3RzIiwiaGVhZGVyVmlldyIsIm9wZW5Qcm9qZWN0IiwicHJvamVjdElEIiwidHJlZSIsImFqYXgiLCJ1cmwiLCJkb25lIiwidmVyc2lvbnMiLCJyZWZyZXNoIiwiSlNPTiIsInBhcnNlIiwic2VsZWN0VmlldyIsInNlbGVjdGVkVmlldyIsInZlcnNpb25DdXJyZW50Iiwic2V0VmVyc2lvbkN1cnJlbnQiLCJzdGFydFZlcnNpb25DaGVja2luZyIsImNsZWFySW50ZXJ2YWwiLCJ2ZXJzaW9uQ2hlY2tJbnRlcnZhbCIsInNldEludGVydmFsIiwiZ2V0Q3VycmVudFZlcnNpb24iLCJ2ZXJzaW9uIiwic2V0VmVyc2lvbk91dE9mRGF0ZSIsInNlbGVjdFZlcnNpb24iLCJvcGVuU2F2ZURCRGlhbG9nIiwiY3VycmVudFZlcnNpb24iLCJzYXZlREJEaWFsb2ciLCJ2ZXJzaW9uTGFiZWwiLCJ2ZXJzaW9uRGF0ZSIsInNhdmVUb0RhdGFiYXNlIiwidmlld0lEIiwidmlldyIsImRlc3Ryb3kiLCJzaG93VmlldyIsIm9wZW5Qcm9qZWN0VmVyc2lvbiIsIlNQUkVBRFNIRUVUX1ZJRVciLCJzcHJlYWRTaGVldFZpZXciLCJUUkVFX1ZJRVciLCJ0cmVlVmlldyIsImRpc3BsYXlUcmVlIiwiV0VJR0hURURfVFJFRV9WSUVXIiwid2VpZ2h0ZWRUcmVlVmlldyIsImRpc3BsYXlXZWlnaHRlZFRyZWUiLCJDSVJDTEVfVklFVyIsImNpcmNsZVZpZXciLCJjcmVhdGVOZXdQcm9qZWN0IiwibmV3UHJvamVjdE5hbWUiLCJuZXh0UHJvamVjdElEIiwiZXhwYW5kVG9MZXZlbCIsImxldmVsIiwiZmlyc3RDaGlsZCIsImJvZHkiLCJjbGVhbnNlRGF0YSIsInVwZGF0ZUZpZWxkVmFsdWUiLCJub2RlSUQiLCJmaW5kTm9kZSIsImdldEZpZWxkVmFsdWUiLCJmb3JFYWNoIiwiY2hpbGQiLCJyYXdWYWx1ZSIsImZvcm1hdHRlZFZhbHVlIiwiRmllbGQiLCJmb3JtYXRWYWx1ZSIsImFkZEZpZWxkIiwiaGFzQ2hpbGRyZW4iLCJpc05vZGVDaGlsZGxlc3MiLCJjaGlsZHJlbkhpZGRlbiIsImlzTm9kZUNvbGxhcHNlZCIsIm5ld1BhcmVudE5vZGUiLCJyZW1vdmVOb2RlIiwiYWRkTm9kZSIsInRyYXZlcnNlIiwiZ2V0Q2hpbGRyZW4iLCJyZWRyYXdOb2RlQ29udGVudCIsImRlbGV0ZU5vZGUiLCJleHBhbmROb2RlIiwiaW5zZXJ0Tm9kZUFmdGVyIiwicmVuZGVyRXhwYW5kZXIiLCJjb3B5Tm9kZSIsInNvdXJjZU5vZGUiLCJuZXdOb2RlIiwiY2xvbmVOb2RlIiwiaW5zZXJ0Tm9kZSIsImluc2VydE5vZGVCZWZvcmUiLCJjb2xsYXBzZU5vZGUiLCJ0cmF2ZXJzZURlc2NlbmRhbnRzIiwidG9nZ2xlTm9kZSIsImlzTm9kZUV4cGFuZGVkIiwidXBkYXRlTm9kZU5hbWUiLCJuZXdOYW1lIiwiTnVtYmVyIiwiZW5hYmxlRHJhZ2dpbmciLCJkYXRhIiwibWF4RmllbGRWYWx1ZSIsImNhbGNNYXhGaWVsZFZhbHVlIiwibWF4VmFsdWUiLCJORUdBVElWRV9JTkZJTklUWSIsImRhdGF0eXBlIiwiTlVNQkVSIiwiZm9ybWF0IiwiTlVNQkVSX0ZPUk1BVCIsInByZWNpc2lvbiIsImFnZ190eXBlIiwiTk9fQUdHUkVHQVRJT04iLCJhZ2dfcXR5X2ZpZWxkIiwiU1RSSU5HIiwiQ0hPSUNFIiwiU1VNX0FOWV9BR0dSRUdBVElPTiIsIlBFUkNFTlRfRk9STUFUIiwiU0NJRU5USUZJQ19GT1JNQVQiLCJ0b0ZpeGVkIiwidG9FeHBvbmVudGlhbCIsIm51bWJlckl0ZW0iLCJGaWVsZE1lbnVJdGVtIiwiZm9ybWF0SXRlbSIsIm51bWJlckZvcm1hdEl0ZW0iLCJwdXNoIiwiZGlzcGxheVN0cmluZyIsInBlcmNlbnRGb3JtYXRJdGVtIiwic2NpZW50aWZpY0Zvcm1hdEl0ZW0iLCJhZ2dyZWdhdGlvbkl0ZW0iLCJzdW1BbnlBZ2dJdGVtIiwiaW5kZXgiLCJmIiwicHJvdG90eXBlIiwibWVudUl0ZW0iLCJmb3VuZCIsImNoZWNrZWQiLCJmaW5pc2hGbiIsImRhdGFUeXBlIiwianNvbiIsInN0cmluZ2lmeSIsIngwIiwieTAiLCJzcGxpY2UiLCJzZXREZXB0aHMiLCJkZXB0aCIsIm1heERlcHRoIiwiZXh0ZW5kIiwibmV4dE5vZGVJRCIsIl9jaGlsZHJlbiIsImZ1bGx5RXhwYW5kTm9kZSIsImZ1bGx5Q29sbGFwc2VOb2RlIiwidG9nZ2xlRXhwYW5zaW9uIiwic2VhcmNoTm9kZSIsImZvdW5kTm9kZSIsImZvdW5kUGFyZW50IiwiY2hpbGRyZW5GbiIsInZpc2l0Rm4iLCJwcm9qZWN0TmFtZSIsIkRPV05fQVJST1dfSU1BR0VfUEFUSCIsIkNIRUNLX01BUktfSU1BR0VfUEFUSCIsIkJMQU5LX01BUktfSU1BR0VfUEFUSCIsIkVOVEVSX0tFWSIsIktFWV9VUF9BUlJPVyIsIktFWV9ET1dOX0FSUk9XIiwiS0VZX0xFRlRfQVJST1ciLCJLRVlfUklHSFRfQVJST1ciLCJERUZBVUxUX05PREVfSU5QVVRfV0lEVEgiLCJkZWJ1ZyIsInByaW50IiwibyIsImNvbnNvbGUiLCJsb2ciLCJwcmludFRyZWUiLCJ6b29tIiwiZCIsImZvY3VzIiwidHJhbnNpdGlvbiIsImQzIiwiZHVyYXRpb24iLCJhbHRLZXkiLCJ0d2VlbiIsImludGVycG9sYXRlWm9vbSIsInIiLCJtYXJnaW4iLCJ6b29tVG8iLCJzZWxlY3RBbGwiLCJlYWNoIiwidiIsImRpYW1ldGVyIiwiYXR0ciIsImNpcmNsZSIsImFwcGVuZCIsInNjYWxlIiwibGluZWFyIiwiZG9tYWluIiwicmFuZ2UiLCJpbnRlcnBvbGF0ZSIsImludGVycG9sYXRlSGNsIiwicGFjayIsImxheW91dCIsInBhZGRpbmciLCJzaXplIiwiUEkiLCJzdmciLCJzZWxlY3QiLCJyb290Iiwibm9kZXMiLCJlbnRlciIsIm9uIiwidGV4dCIsInNlbGYiLCJmcmFtZUVsZW1lbnQiLCJleHBhbmRlclNlbGVjdG9yIiwibnVtTGV2ZWxzIiwiaHRtbCIsImdldE1hcmt1cCIsImNoYW5nZSIsImhhbmRsZSIsInZhbCIsIm1hcmt1cCIsImZpZWxkTWVudSIsInJlbmRlck1lbnUiLCJtb3VzZWxlYXZlIiwiY2hlY2tNYXJrQ2xhc3MiLCJzaWJsaW5ncyIsInNpYmxpbmciLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiaGlkZSIsInNlbGVjdFByb2plY3QiLCJrZXl1cCIsImNsaWNrIiwidmVyc2lvblNlbGVjdG9yIiwic2hvdyIsInByb2plY3RTZWxlY3RvciIsImZpbmQiLCJrZXlDb2RlIiwibmV3UHJvamVjdElEIiwib3B0aW9uIiwiY3NzIiwicHJvamVjdEFjdGlvbiIsImVudGVyUHJlc3NlZCIsImJhc2VWZXJzaW9uTnVtYmVyIiwiYmFzZVZlcnNpb25MYWJlbCIsImJhc2VWZXJzaW9uRGF0ZSIsIm5ld1ZlcnNpb24iLCJtb2RhbCIsInNwcmVhZFNoZWV0S2V5SGFuZGxlciIsImNoZWNrS2V5IiwicHJldmVudERlZmF1bHQiLCJwcmV2Um93IiwiZmluZEFuY2VzdG9yIiwiYWN0aXZlRWxlbWVudCIsInByZXYiLCJnZXROZXh0RWxlbWVudElEIiwibmV4dFJvdyIsIm5leHQiLCJuZXdSb3ciLCJzcGxpdCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsInNwcmVhZFNoZWV0TWFya3VwIiwicmVuZGVyRmllbGRzUm93IiwicmVuZGVyRGF0YVRhYmxlIiwicmVuZGVyTm9kZUNvbHVtbiIsIm9mZiIsImZpZWxkSGVhZGVyIiwic2hvd0ZpZWxkTWVudSIsImRhdGFSb3dzTWFya3VwIiwicmVuZGVyRGF0YUNlbGwiLCJmaWVsZENlbGwiLCJub2RlUm93TWFya3VwIiwiZGVsZXRlQnV0dG9uIiwiY29weUJ1dHRvbiIsImRyYWdIYW5kbGUiLCJub2RlQ29udGVudCIsImljb25NYXJrdXAiLCJkZXB0aEFkanVzdG1lbnQiLCJ3aWR0aEFkanVzdG1lbnQiLCJleHBhbmRJY29uIiwibm9kZUlucHV0IiwiaW5zZXJ0QWZ0ZXIiLCJpdGVtIiwiaW5zZXJ0QmVmb3JlTm9kZSIsImluc2VydEFmdGVyTm9kZSIsIk1JTl9OT0RFX1NJWkUiLCJNQVhfTk9ERV9TSVpFIiwiVkVSVElDQUxfVklFVyIsIkhPUklaT05UQUxfVklFVyIsInVwZGF0ZSIsInJvdGF0ZSIsImRpcmVjdGlvbiIsImhvcml6b250YWxfc3BhY2luZyIsInZlcnRpY2FsX3NwYWNpbmciLCJkaWFnb25hbCIsInByb2plY3Rpb24iLCJ2aWV3ZXJIZWlnaHQiLCJzZWxlY3RlZE5vZGUiLCJkcmFnZ2luZ05vZGUiLCJtYXhMYWJlbExlbmd0aCIsIm1heCIsInZpZXdlcldpZHRoIiwiZHJhZ1N0YXJ0ZWQiLCJzdmdHcm91cCIsInRyYW5zbGF0ZSIsImluaXRpYXRlRHJhZyIsImRvbU5vZGUiLCJzb3J0IiwiYSIsImIiLCJsaW5rcyIsIm5vZGVQYXRocyIsIm5vZGVzRXhpdCIsInBhcmVudExpbmsiLCJkeSIsImR4IiwidXBkYXRlVGVtcENvbm5lY3RvciIsInpvb21MaXN0ZW5lciIsImJlaGF2aW9yIiwic2NhbGVFeHRlbnQiLCJiYXNlU3ZnIiwiY2FsbCIsImRyYWdMaXN0ZW5lciIsImRyYWdzdGFydCIsImRyYWdlbmQiLCJjZW50ZXJOb2RlIiwiZGVmYXVsdFByZXZlbnRlZCIsInNvdXJjZSIsImxldmVsV2lkdGgiLCJjaGlsZENvdW50IiwibiIsIm5ld0hlaWdodCIsInJldmVyc2UiLCJub2RlRW50ZXIiLCJvdmVyQ2lyY2xlIiwib3V0Q2lyY2xlIiwiY29tcHV0ZU5vZGVTaXplIiwibm9kZVVwZGF0ZSIsIm5vZGVFeGl0IiwiZXhpdCIsImxpbmsiLCJpbnNlcnQiLCJzb3VyY2VFdmVudCIsIm5vZGVTaXplIiwic3FydCJdLCJtYXBwaW5ncyI6IkFBQUEsUUFBU0EsZUFBY0MsRUFBTUMsR0FFM0IsR0FBSUQsRUFBS0UsVUFBcUMsSUFBekJGLEVBQUtFLFNBQVNDLE9BWW5DLENBR0UsSUFBSSxHQUZBQyxHQUFjLEVBRVZDLEVBQUksRUFBR0EsRUFBSUwsRUFBS0UsU0FBU0MsT0FBUUUsSUFFdkNELEdBQWVMLGNBQWNDLEVBQUtFLFNBQVNHLEdBQUlKLEVBV2pELE9BUklELEdBQUtNLFNBRVBOLEVBQUtNLFdBR1BOLEVBQUtNLE9BQU9MLEdBQVNHLEVBQ3JCRyxTQUFTQyxlQUFlUCxFQUFRRCxFQUFLUyxJQUFJQyxNQUFRTixFQUUxQ0EsRUExQlAsTUFBSUosR0FBS00s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QixFQUFLTSxPQUFPdVUsS0FBSzVVLE1BQU1rTixNQUFRMEgsS0FBS3lGLGdCQUc3RHdMLGNBQVgwRCxJQUE0QkEsRUFBVzFELGdCQUdyQzBEIiwiZmlsZSI6Imhtcy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBhZ2dyZWdhdGVfYW55KG5vZGUsIGZpZWxkKVxyXG57XHJcbiAgaWYoIW5vZGUuY2hpbGRyZW4gfHwgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApXHJcbiAge1xyXG4gICAgaWYoIW5vZGUudmFsdWVzIHx8ICFub2RlLnZhbHVlc1tmaWVsZF0pXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiAwLjA7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBwYXJzZUZsb2F0KG5vZGUudmFsdWVzW2ZpZWxkXSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICB2YXIgY2hpbGRyZW5TdW0gPSAwLjA7XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGNoaWxkcmVuU3VtICs9IGFnZ3JlZ2F0ZV9hbnkobm9kZS5jaGlsZHJlbltpXSwgZmllbGQpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmKCFub2RlLnZhbHVlcylcclxuICAgIHtcclxuICAgICAgbm9kZS52YWx1ZXMgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBub2RlLnZhbHVlc1tmaWVsZF0gPSBjaGlsZHJlblN1bTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy91cGRhdGUgdGhlIG1vZGVsXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWVsZCArIG5vZGUuaWQpLnZhbHVlID0gY2hpbGRyZW5TdW07ICAgICAgICAgLy91cGRhdGUgdGhlIHZpZXdcclxuXHJcbiAgICByZXR1cm4gY2hpbGRyZW5TdW07XHJcbiAgfVxyXG59IiwiLypcclxuQ29weXJpZ2h0IChjKSAyMDA4LTIwMTEsIHd3dy5yZWRpcHMubmV0IEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkNvZGUgbGljZW5zZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlOiBodHRwOi8vd3d3LnJlZGlwcy5uZXQvbGljZW5zZS9cclxuaHR0cDovL3d3dy5yZWRpcHMubmV0L2phdmFzY3JpcHQvZHJhZy1hbmQtZHJvcC10YWJsZS1jb250ZW50L1xyXG4qL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgUkVESVBTID0gUkVESVBTIHx8IHt9OyAgICAgIC8vY3JlYXRlIFJFRElQUyBuYW1lc3BhY2UgKGlmIGlzIG5vdCBhbHJlYWR5IGRlZmluZWQgaW4gYW5vdGhlciBSRURJUFMgcGFja2FnZSlcclxuXHJcbi8vUkVESVBTLmRyYWcgaXMgYSBKYXZhU2NyaXB0IGRyYWcgYW5kIGRyb3AgbGlicmFyeSBmb2N1c2VkIG9uIGRyYWdnaW5nIHRhYmxlIGNvbnRlbnQgKERJViBlbGVtZW50cykgYW5kIHRhYmxlIHJvd3MuXHJcblJFRElQUy5kcmFnID0gKGZ1bmN0aW9uICgpXHJcbntcclxuICAgIC8vIG1ldGhvZHNcclxuICB2YXIgaW5pdCwgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uXHJcbiAgICBlbmFibGVEcmFnLCAgICAgICAgIC8vIG1ldGhvZCBhdHRhY2hlcyAvIGRldGFjaGVzIG9ubW91c2Vkb3duIGFuZCBvbnNjcm9sbCBldmVudCBoYW5kbGVycyBmb3IgRElWIGVsZW1lbnRzXHJcbiAgICBlbmFibGVEaXZzLFxyXG4gICAgaGFuZGxlck9uTW91c2VEb3duLCAgICAgLy8gb25tb3VzZWRvd24gaGFuZGxlclxyXG4gICAgaGFuZGxlck9uTW91c2VVcCwgICAgIC8vIG9ubW91c2V1cCBoYW5kbGVyXHJcbiAgICBoYW5kbGVyT25Nb3VzZU1vdmUsICAgICAvLyBvbm1vdXNlbW92ZSBoYW5kbGVyIGZvciB0aGUgZG9jdW1lbnQgbGV2ZWxcclxuICAgIGVsZW1lbnREcm9wLCAgICAgICAgLy8gZHJvcCBlbGVtZW50IHRvIHRoZSB0YWJsZSBjZWxsXHJcbiAgICByZXNldFN0eWxlcywgICAgICAgIC8vIHJlc2V0IG9iamVjdCBzdHlsZXMgYWZ0ZXIgZWxlbWVudCBpcyBkcm9wcGVkXHJcbiAgICByZWdpc3RlckV2ZW50cywgICAgICAgLy8gcmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIGZvciBESVYgZWxlbWVudFxyXG4gICAgY2VsbENoYW5nZWQsICAgICAgICAvLyBwcml2YXRlIG1ldGhvZCBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmUoKSwgYXV0b1Njcm9sbFgoKSwgYXV0b1Njcm9sbFkoKVxyXG4gICAgaGFuZGxlck9uUmVzaXplLCAgICAgIC8vIG9ucmVzaXplIHdpbmRvdyBldmVudCBoYW5kbGVyXHJcbiAgICBzZXRUYWJsZVJvd0NvbHVtbiwgICAgICAvLyBmdW5jdGlvbiBzZXRzIGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbFxyXG4gICAgc2V0UG9zaXRpb24sICAgICAgICAvLyBmdW5jdGlvbiBzZXRzIGNvbG9yIGZvciB0aGUgY3VycmVudCB0YWJsZSBjZWxsIGFuZCByZW1lbWJlcnMgcHJldmlvdXMgcG9zaXRpb24gYW5kIGNvbG9yXHJcbiAgICBzZXRUZFN0eWxlLCAgICAgICAgIC8vIG1ldGhvZCBzZXRzIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgZm9yIFREXHJcbiAgICBnZXRUZFN0eWxlLCAgICAgICAgIC8vIG1ldGhvZCByZXR1cm5zIG9iamVjdCBjb250YWluaW5nIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgZm9yIFREXHJcbiAgICBib3hPZmZzZXQsICAgICAgICAgIC8vIGNhbGN1bGF0ZXMgb2JqZWN0IChib3gpIG9mZnNldCAodG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KVxyXG4gICAgY2FsY3VsYXRlQ2VsbHMsICAgICAgIC8vIGNhbGN1bGF0ZXMgdGFibGUgY29sdW1ucyBhbmQgcm93IG9mZnNldHMgKGNlbGxzIGRpbWVuc2lvbnMpXHJcbiAgICBnZXRTY3JvbGxQb3NpdGlvbiwgICAgICAvLyByZXR1cm5zIHNjcm9sbCBwb3NpdGlvbnMgaW4gYXJyYXlcclxuICAgIGF1dG9TY3JvbGxYLCAgICAgICAgLy8gaG9yaXpvbnRhbCBhdXRvIHNjcm9sbCBmdW5jdGlvblxyXG4gICAgYXV0b1Njcm9sbFksICAgICAgICAvLyB2ZXJ0aWNhbCBhdXRvIHNjcm9sbCBmdW5jdGlvblxyXG4gICAgY29weVByb3BlcnRpZXMsICAgICAgIC8vIG1ldGhvZCBjb3BpZXMgY3VzdG9tIHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgZWxlbWVudCB0byB0aGUgY2xvbmVkIGVsZW1lbnQuXHJcbiAgICBjbG9uZUxpbWl0LCAgICAgICAgIC8vIGNsb25lIGxpbWl0IChhZnRlciBjbG9uaW5nIG9iamVjdCwgdGFrZSBjYXJlIGFib3V0IGNsaW1pdDFfWCBvciBjbGltaXQyX1ggY2xhc3NuYW1lcylcclxuICAgIGdldFN0eWxlLCAgICAgICAgIC8vIG1ldGhvZCByZXR1cm5zIHN0eWxlIHZhbHVlIG9mIHJlcXVlc3RlZCBvYmplY3QgYW5kIHN0eWxlIG5hbWVcclxuICAgIGZpbmRQYXJlbnQsICAgICAgICAgLy8gbWV0aG9kIHJldHVybnMgYSByZWZlcmVuY2Ugb2YgdGhlIHJlcXVpcmVkIHBhcmVudCBlbGVtZW50XHJcbiAgICByb3dPcGFjaXR5LCAgICAgICAgIC8vIG1ldGhvZCBzZXRzIG9wYWNpdHkgdG8gdGFibGUgcm93IChlbCwgb3BhY2l0eSwgY29sb3IpXHJcbiAgICByb3dDbG9uZSwgICAgICAgICAvLyBjbG9uZSB0YWJsZSByb3cgLSBpbnB1dCBwYXJhbWV0ZXIgaXMgRElWIHdpdGggY2xhc3MgbmFtZSBcInJlZGlwcy1yb3dcIiAtPiBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCJcclxuICAgIHJvd0Ryb3AsICAgICAgICAgIC8vIGZ1bmN0aW9uIGRyb3BzIChkZWxldGUgb2xkICYgaW5zZXJ0IG5ldykgdGFibGUgcm93IChpbnB1dCBwYXJhbWV0ZXJzIGFyZSBjdXJyZW50IHRhYmxlIGFuZCByb3cpXHJcbiAgICBub3JtYWxpemUsICAgICAgICAgIC8vIHByaXZhdGUgbWV0aG9kIHJldHVybnMgbm9ybWFsaXplZCBzcGFjZXMgZnJvbSBpbnB1dCBzdHJpbmdcclxuXHJcbiAgICAvLyBwcml2YXRlIHBhcmFtZXRlcnNcclxuICAgIG9iak1hcmdpbiA9IG51bGwsICAgICAvLyBzcGFjZSBmcm9tIGNsaWNrZWQgcG9pbnQgdG8gdGhlIG9iamVjdCBib3VuZHMgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdClcclxuXHJcbiAgICAvLyB3aW5kb3cgd2lkdGggYW5kIGhlaWdodCAocGFyYW1ldGVycyBhcmUgc2V0IGluIG9ubG9hZCBhbmQgb25yZXNpemUgZXZlbnQgaGFuZGxlciksIGp1c3QgZm9yIGEgbm90ZTogd2luZG93IGFuZCBXaW5kb3cgaXMgcmVzZXJ2ZWQgd29yZCBpbiBKUyBzbyBJIG5hbWVkIHZhcmlhYmxlIFwic2NyZWVuXCIpXHJcbiAgICBzY3JlZW4gPSB7d2lkdGg6IDAsIGhlaWdodDogMH0sXHJcblxyXG4gICAgLy8gZGVmaW5lIHNjcm9sbCBvYmplY3Qgd2l0aCBjb250YWluZWQgcHJvcGVydGllcyAodGhpcyBpcyBwcml2YXRlIHByb3BlcnR5KVxyXG4gICAgc2Nyb2xsRGF0YSA9IHt3aWR0aCA6IG51bGwsIC8vIHNjcm9sbCB3aWR0aCBvZiB0aGUgd2luZG93IChpdCBpcyB1c3VhbGx5IGdyZWF0ZXIgdGhlbiB3aW5kb3cpXHJcbiAgICAgICAgaGVpZ2h0IDogbnVsbCwgICAgLy8gc2Nyb2xsIGhlaWdodCBvZiB0aGUgd2luZG93IChpdCBpcyB1c3VhbGx5IGdyZWF0ZXIgdGhlbiB3aW5kb3cpXHJcbiAgICAgICAgY29udGFpbmVyIDogW10sICAgLy8gc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXMgKGNvbnRhaW5zIGF1dG9zY3JvbGwgYXJlYXMsIHJlZmVyZW5jZSB0byB0aGUgY29udGFpbmVyIGFuZCBzY3JvbGwgZGlyZWN0aW9uKVxyXG4gICAgICAgIG9iaiA6IG51bGx9LCAgICAvLyBzY3JvbGwgb2JqZWN0IChuZWVkZWQgaW4gYXV0b3Njcm9sbCBmb3IgcmVjdXJzaXZlIGNhbGxzKVxyXG5cclxuICAgIGVkZ2UgPSB7cGFnZToge3g6IDAsIHk6IDB9LCAvLyBhdXRvc2Nyb2xsIGJvdW5kIHZhbHVlcyBmb3IgcGFnZSBhbmQgZGl2IGFzIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgZGl2OiAge3g6IDAsIHk6IDB9LCAvLyBjbG9zZXIgdG8gdGhlIGVkZ2UsIGZhc3RlciBzY3JvbGxpbmdcclxuICAgICAgICBmbGFnOiB7eDogMCwgeTogMH19LC8vIGZsYWdzIGFyZSBuZWVkZWQgdG8gcHJldmVudCBtdWx0aXBsZSBjYWxscyBvZiBhdXRvU2Nyb2xsWCBhbmQgYXV0b1Njcm9sbFkgZnJvbSBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyXHJcblxyXG4gICAgYmdTdHlsZU9sZCwgICAgICAgICAvLyAob2JqZWN0KSBvbGQgdGQgc3R5bGVzIChiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzKVxyXG5cclxuICAgIHRhYmxlLCAgICAgICAgLy8gdGFibGUgb2Zmc2V0cyBhbmQgcm93IG9mZnNldHMgKGluaXRpYWxpemVkIGluIG9ubG9hZCBldmVudClcclxuICAgIG1vdmVkLCAgICAgICAgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIGVsZW1lbnQgaXMgbW92ZWRcclxuICAgIGNsb25lZCwgICAgICAgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIGVsZW1lbnQgaXMgY2xvbmVkXHJcbiAgICBjbG9uZWRJZCA9IFtdLCAgICAgICAgLy8gbmVlZGVkIGZvciBpbmNyZW1lbnQgSUQgb2YgY2xvbmVkIGVsZW1lbnRzXHJcbiAgICBjdXJyZW50Q2VsbCA9IFtdLCAgICAgLy8gY3VycmVudCBjZWxsIGJvdW5kcyAodG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KSBhbmQgXCJjb250YWluVGFibGVcIiBmbGFnIGZvciBuZXN0ZWQgdGFibGVzXHJcbiAgICBkcmFnQ29udGFpbmVyID0gbnVsbCwgICAvLyBkcmFnIGNvbnRhaW5lciByZWZlcmVuY2VcclxuICAgIGRpdkJveCA9IG51bGwsICAgICAgICAvLyBkaXYgZHJhZyBib3g6IHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdCBtYXJnaW4gKGRlY3JlYXNlIG51bWJlciBjYWxscyBvZiBzZXRUYWJsZVJvd0NvbHVtbilcclxuICAgIHBvaW50ZXIgPSB7eDogMCwgeTogMH0sICAgLy8gbW91c2UgcG9pbnRlciBwb3NpdGlvbiAodGhpcyBwcm9wZXJ0aWVzIGFyZSBzZXQgaW4gaGFuZGxlck9uTW91c2VNb3ZlKCkgLSBuZWVkZWQgZm9yIGF1dG9zY3JvbGwpXHJcbiAgICB0aHJlc2hvbGQgPSB7eDogMCwgICAgICAvLyBpbml0aWFsIHgsIHkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgICAgICAgeTogMCxcclxuICAgICAgICAgIHZhbHVlOiA3LCAgIC8vIHRocmVzaG9sZCBkaXN0YW5jZSB2YWx1ZVxyXG4gICAgICAgICAgZmxhZzogZmFsc2V9LCAvLyB0aHJlc2hvbGQgZmxhZ1xyXG4gICAgc2hpZnRLZXkgPSBmYWxzZSwgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIHNoaWZ0IGtleSBpcyBwcmVzc2VkIChzZXQgaW4gaGFuZGxlcl9tb3VzZWRvd24pXHJcbiAgICBjbG9uZUNsYXNzID0gZmFsc2UsICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBjbGlja2VkIGVsZW1lbnQgY29udGFpbnMgY2xvbmUgaW4gY2xhc3MgbmFtZSAoc2V0IGluIGhhbmRsZXJfbW91c2Vkb3duKVxyXG4gICAgd2luZG93U2Nyb2xsUG9zaXRpb24sICAgLy8gKGFycmF5KSB0b3AgYW5kIGxlZnQgd2luZG93IG9mZnNldCAoc2V0IGluIGNhbGN1bGF0ZUNlbGxzIGFuZCB1c2VkIGluIGJveE9mZnNldClcclxuXHJcbiAgICAvLyBzZWxlY3RlZCwgcHJldmlvdXMgYW5kIHNvdXJjZSByb3cgYW5kIGNlbGwgKHByaXZhdGUgcGFyYW1ldGVycyB0b28pXHJcbiAgICByb3cgPSBudWxsLFxyXG4gICAgcm93X29sZCA9IG51bGwsXHJcbiAgICByb3dfc291cmNlID0gbnVsbCxcclxuICAgIGNlbGwgPSBudWxsLFxyXG4gICAgY2VsbF9vbGQgPSBudWxsLFxyXG4gICAgY2VsbF9zb3VyY2UgPSBudWxsLFxyXG5cclxuICAgIC8vIHZhcmlhYmxlcyBpbiB0aGUgcHJpdmF0ZSBzY29wZSByZXZlYWxlZCBhcyBwdWJsaWMgKHNlZSBpbml0KCkgbWV0aG9kKVxyXG4gICAgb2JqID0gZmFsc2UsICAgICAgICAvLyAob2JqZWN0KSBtb3ZlZCBvYmplY3RcclxuICAgIG9iak9sZCA9IGZhbHNlLCAgICAgICAvLyAob2JqZWN0KSBwcmV2aW91c2x5IG1vdmVkIG9iamVjdCAoYmVmb3JlIGNsaWNrZWQgb3IgY2xvbmVkKVxyXG4gICAgaG92ZXIgPSB7Y29sb3JUZDogJyNGRkNGQUUnLCBjb2xvclRyOiAnIzlCQjNEQSd9LFxyXG4gICAgc2Nyb2xsID0ge2VuYWJsZSA6IHRydWUsICAvLyAoYm9vbGVhbikgZW5hYmxlL2Rpc2FibGUgYXV0b3Njcm9sbCBmdW5jdGlvbiAoZGVmYXVsdCBpcyB0cnVlKVxyXG4gICAgICAgIGJvdW5kIDogMjUsICAgICAvLyAoaW50ZWdlcikgYm91bmQgd2lkdGggZm9yIGF1dG9zY3JvbGxcclxuICAgICAgICBzcGVlZCA6IDIwfSwgICAgLy8gKGludGVnZXIpIHNjcm9sbCBzcGVlZCBpbiBtaWxsaXNlY29uZHNcclxuICAgIHN0eWxlID0gey8vYm9yZGVyRW5hYmxlZCA6ICdzb2xpZCcsIC8vIChzdHJpbmcpIGJvcmRlciBzdHlsZSBmb3IgZW5hYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIGJvcmRlckRpc2FibGVkIDogJ2RvdHRlZCcsICAvLyAoc3RyaW5nKSBib3JkZXIgc3R5bGUgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgICAgb3BhY2l0eURpc2FibGVkIDogJycsICAgLy8gKGludGVnZXIpIHNldCBvcGFjaXR5IGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIHJvd0VtcHR5Q29sb3IgOiAnd2hpdGUnfSwgLy8gKHN0cmluZykgY29sb3Igb2YgZW1wdHkgcm93XHJcbiAgICB0ZCA9IHt9LCAgICAgICAgICAgIC8vIChvYmplY3QpIGNvbnRhaW5zIHJlZmVyZW5jZSB0byBzb3VyY2UgKHNldCBpbiBvbm1vdXNlZG93biksIGN1cnJlbnQgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCksIHByZXZpb3VzIChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpIGFuZCB0YXJnZXQgY2VsbCAoc2V0IGluIG9ubW91c2V1cClcclxuICAgIGNsb25lID0ge2tleURpdiA6IGZhbHNlLCAgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgZWxlbWVudHMgY291bGQgYmUgY2xvbmVkIHdpdGggcHJlc3NlZCBTSElGVCBrZXlcclxuICAgICAgICBrZXlSb3cgOiBmYWxzZSwgICAgIC8vIChib29sZWFuKSBpZiB0cnVlLCByb3dzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5XHJcbiAgICAgICAgc2VuZEJhY2sgOiBmYWxzZSwgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgdGhlbiBjbG9uZWQgZWxlbWVudCBjYW4gYmUgcmV0dXJuZWQgdG8gaXRzIHNvdXJjZVxyXG4gICAgICAgIGRyb3AgOiBmYWxzZX0sICAgICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIHRoZW4gY2xvbmVkIGVsZW1lbnQgd2lsbCBiZSBhbHdheXMgZHJvcHBlZCB0byB0aGUgdGFibGUgbm8gbWF0dGVyIGlmIGRyb3BwZWQgb3V0c2lkZSBvZiB0aGUgdGFibGVcclxuICAgIFxyXG4gICAgZXZlbnQgPSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChvYmplY3QpIGV2ZW50IGhhbmRsZXJzXHJcbiAgICB7XHJcbiAgICAgIGNsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBjbG9uZWREcm9wcGVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGNsb25lZEVuZDEgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgY2xvbmVkRW5kMiA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBkcm9wcGVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGRyb3BwZWRCZWZvcmUgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgZmluaXNoIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIG5vdENsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBub3RNb3ZlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dDaGFuZ2VkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0NsaWNrZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Q2xvbmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Ryb3BwZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93RHJvcHBlZEJlZm9yZSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dEcm9wcGVkU291cmNlIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd01vdmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd05vdENsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dOb3RNb3ZlZCA6IGZ1bmN0aW9uICgpIHt9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRHJhZyBjb250YWluZXIgaW5pdGlhbGl6YXRpb24uIEl0IHNob3VsZCBiZSBjYWxsZWQgYXQgbGVhc3Qgb25jZSBhbmQgaXQncyBwb3NzaWJsZSB0byBjYWxsIGEgbWV0aG9kIG1hbnkgdGltZXMuIEV2ZXJ5IHBhZ2Ugc2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIGRyYWcgY29udGFpbmVyLlxyXG4gICAqIElmIFJFRElQUy5kcmFnLmluaXQoKSBpcyBjYWxsZWQgd2l0aG91dCBpbnB1dCBwYXJhbWV0ZXIsIGxpYnJhcnkgd2lsbCBzZWFyY2ggZm9yIGRyYWcgY29udGFpbmVyIHdpdGggaWQ9XCJyZWRpcHMtZHJhZ1wiLlxyXG4gICAqIE9ubHkgdGFibGVzIGluc2lkZSBkcmFnIGNvbnRhaW5lciB3aWxsIGJlIHNjYW5uZWQuIEl0IGlzIHBvc3NpYmxlIHRvIGhhdmUgc2V2ZXJhbCBkcmFnIGNvbnRhaW5lcnMgdG90YWx5IHNlcGFyYXRlZCAoZWxlbWVudHMgZnJvbSBvbmUgY29udGFpbmVyIHdpbGwgbm90IGJlIHZpc2libGUgdG8gb3RoZXIgZHJhZyBjb250YWluZXJzKS5cclxuICAgKiBcImluaXRcIiBtZXRob2QgY2FsbHMgZW5hYmxlRHJhZy4gSWYgdGFibGVzIGFyZSBnZW5lcmF0ZWQgZHluYW1pY2FsbHkgdGhlbiBSRURJUFMuaW5pdCgpIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIHRvIHNldCBjdXN0b20gcHJvcGVydGllcyB0byB0YWJsZXMgKHRhYmxlIGluaXRpYWxpemF0aW9uKS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2RjXSBEcmFnIGNvbnRhaW5lciBJZCAoZGVmYXVsdCBpcyBcInJlZGlwcy1kcmFnXCIpLlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gaW5pdCBkcmFnIGNvbnRhaW5lciAod2l0aCBkZWZhdWx0IGlkPVwicmVkaXBzLWRyYWdcIilcclxuICAgKiBSRURJUFMuZHJhZy5pbml0KCk7XHJcbiAgICpcclxuICAgKiAvLyBpbml0IGRyYWcgY29udGFpbmVyIHdpdGggaWQ9XCJteS1kcmFnMVwiXHJcbiAgICogUkVESVBTLmRyYWcuaW5pdCgnbXktZHJhZzEnKTtcclxuICAgKi9cclxuICBpbml0ID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICBkcmFnQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZGlwcy1kcmFnJyk7ICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBkcmFnIGNvbnRhaW5lclxyXG5cclxuICAgIHdpbmRvd1Njcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHdpbmRvdyBzY3JvbGwgcG9zaXRpb25cclxuXHJcbiAgICAvLyBhcHBlbmQgRElWIGlkPVwicmVkaXBzX2Nsb25lXCIgaWYgRElWIGRvZXNuJ3QgZXhpc3QgKG5lZWRlZCBmb3IgY2xvbmluZyBESVYgZWxlbWVudHMpXHJcbiAgICAvLyBpZiBhdXRvbWF0aWMgY3JlYXRpb24gaXNuJ3QgcHJlY2lzZSBlbm91Z2gsIHVzZXIgY2FuIG1hbnVhbGx5IGNyZWF0ZSBhbmQgcGxhY2UgZWxlbWVudCB3aXRoIGlkPVwicmVkaXBzX2Nsb25lXCIgdG8gcHJldmVudCB3aW5kb3cgZXhwYW5kaW5nICh0aGVuIHRoaXMgY29kZSB3aWxsIGJlIHNraXBwZWQpXHJcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWRpcHNfY2xvbmUnKSlcclxuICAgIHtcclxuICAgICAgdmFyIHJlZGlwc0Nsb25lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIHJlZGlwc0Nsb25lLmlkID0gJ3JlZGlwc19jbG9uZSc7XHJcbiAgICAgIHJlZGlwc0Nsb25lLnN0eWxlLndpZHRoID0gcmVkaXBzQ2xvbmUuc3R5bGUuaGVpZ2h0ID0gJzFweCc7XHJcbiAgICAgIGRyYWdDb250YWluZXIuYXBwZW5kQ2hpbGQocmVkaXBzQ2xvbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZURyYWcoJ2luaXQnLCAnLnJlZGlwcy1kcmFnJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0dGFjaCBvbm1vdXNlZG93biBldmVudCBoYW5kbGVyIHRvIHRoZSBESVYgZWxlbWVudHMsIGF0dGFjaCBvbnNjcm9sbD0nY2FsY3VsYXRlQ2VsbHMnIGZvciBESVYgZWxlbWVudHMgd2l0aCAnc2Nyb2xsJyBpbiBjbGFzcyBuYW1lIChwcmVwYXJlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzKVxyXG4gICAgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJlZVRhYmxlJyk7XHJcbiAgICB0YWJsZS5yZWRpcHMgPSB7fTtcclxuXHJcbiAgICBoYW5kbGVyT25SZXNpemUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCB3aW5kb3cgd2lkdGgvaGVpZ2h0LCBzY3JvbGwgd2lkdGgvaGVpZ2h0IGFuZCBkZWZpbmUgb25yZXNpemUgZXZlbnQgaGFuZGxlciwgb25yZXNpemUgZXZlbnQgaGFuZGxlciBjYWxscyBjYWxjdWxhdGUgY29sdW1uc1xyXG4gICAgUkVESVBTLmV2ZW50LmFkZCh3aW5kb3csICdyZXNpemUnLCBoYW5kbGVyT25SZXNpemUpO1xyXG4gICAgUkVESVBTLmV2ZW50LmFkZCh3aW5kb3csICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgICAgLy8gYXR0YWNoIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSB3aW5kb3cgKG5lZWRlZCBmb3IgcmVjYWxjdWxhdGluZyB0YWJsZSBjZWxscyBwb3NpdGlvbnMpXHJcbiAgfTtcclxuXHJcblxyXG4gIC8vIG9ubW91c2Vkb3duIGV2ZW50IGhhbmRsZXIuICBUaGlzIGV2ZW50IGhhbmRsZXIgaXMgYXR0YWNoZWQgdG8gZXZlcnkgRElWIGVsZW1lbnQgaW4gZHJhZyBjb250YWluZXIgKHBsZWFzZSBzZWUgXCJlbmFibGVEcmFnXCIpLlxyXG4gIGhhbmRsZXJPbk1vdXNlRG93biA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgICAgICAgLy8gZGVmaW5lIGV2ZW50IChjcm9zcyBicm93c2VyKVxyXG4gICAgdmFyIG9mZnNldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvYmplY3Qgb2Zmc2V0XHJcbiAgICB2YXIgcG9zaXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc2l0aW9uIG9mIHRhYmxlIG9yIGNvbnRhaW5lciBib3ggb2YgdGFibGUgKGlmIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIGV4Y2x1ZGUgc2Nyb2xsIG9mZnNldClcclxuICAgIHZhciBYLCBZOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcblxyXG4gICAgZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7ICAgICAgICAgICAgICAvLyBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uIChvbmx5IGZpcnN0IGNsaWNrZWQgZWxlbWVudCB3aWxsIHJlZ2lzdGVyIG9ubW91c2Vkb3duIGV2ZW50KSwgbmVlZGVkIGluIGNhc2Ugb2YgcGxhY2luZyB0YWJsZSBpbnNpZGUgb2YgPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnXCI+IChhZnRlciBlbGVtZW50IHdhcyBkcm9wcGVkIHRvIHRoaXMgdGFibGUgaXQgY291bGRuJ3QgYmUgbW92ZWQgb3V0IGFueSBtb3JlIC0gdGFibGUgYW5kIGVsZW1lbnQgbW92ZWQgdG9nZXRoZXIgYmVjYXVzZSB0YWJsZSBjYXB0dXJlcyBtb3VzZWRvd24gZXZlbnQgYWxzbyBpbiBidWJibGluZyBwcm9jZXMpXHJcbiAgICBpZiAoZXZ0LnN0b3BQcm9wYWdhdGlvbilcclxuICAgIHtcclxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNoaWZ0S2V5ID0gZXZ0LnNoaWZ0S2V5OyAgICAgICAgICAgICAgLy8gc2V0IHRydWUgb3IgZmFsc2UgaWYgc2hpZnQga2V5IGlzIHByZXNzZWRcclxuXHJcbiAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0ZXh0IHNlbGVjdGlvbiAoQ2hyb21lLCBGRiwgT3BlcmEsIFNhZmFyaSlcclxuICAgIHtcclxuICAgICAgd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uICYmIGRvY3VtZW50LnNlbGVjdGlvbi50eXBlID09PSBcIlRleHRcIikgIC8vIElFOFxyXG4gICAge1xyXG4gICAgICB0cnkgeyBkb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkoKTsgfSBjYXRjaCAoZXJyb3IpIHsgfSAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3IgdG8gYXMgYSB3b3JrYXJvdW5kIGZvciBidWcgaW4gSUU4XHJcbiAgICB9XHJcblxyXG4gICAgWCA9IHBvaW50ZXIueCA9IGV2dC5jbGllbnRYO1xyXG4gICAgWSA9IHBvaW50ZXIueSA9IGV2dC5jbGllbnRZO1xyXG5cclxuICAgIHRocmVzaG9sZC54ID0gWDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGluaXRpYWwgdGhyZXNob2xkIHBvc2l0aW9uIChuZWVkZWQgZm9yIGNhbGN1bGF0aW5nIGRpc3RhbmNlKVxyXG4gICAgdGhyZXNob2xkLnkgPSBZO1xyXG4gICAgdGhyZXNob2xkLmZsYWcgPSBmYWxzZTtcclxuXHJcbiAgICBSRURJUFMuZHJhZy5vYmpPbGQgPSBvYmpPbGQgPSBvYmogfHwgdGhpczsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHByZXZpb3VzIG9iamVjdCBpZiBkZWZpbmVkIG9yIHNldCB0byB0aGUgY2xpY2tlZCBvYmplY3RcclxuICAgIFJFRElQUy5kcmFnLm9iaiA9IG9iaiA9IHRoaXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY2xpY2tlZCBvYmplY3RcclxuXHJcbiAgICBjbG9uZUNsYXNzID0gb2JqLmNsYXNzTmFtZS5pbmRleE9mKCdyZWRpcHMtY2xvbmUnKSA+IC0xOyAgICAgICAgICAgIC8vIHNldCB0cnVlIG9yIGZhbHNlIGlmIGNsaWNrZWQgZWxlbWVudCBjb250YWlucyBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIG5hbWUgKG5lZWRlZCBmb3IgY2xvbmUgZWxlbWVudCBhbmQgY2xvbmUgdGFibGUgcm93KVxyXG5cclxuICAgIFJFRElQUy5kcmFnLm9iaiA9IG9iaiA9IHJvd0Nsb25lKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ganVzdCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjdXJyZW50IHJvdyAoZG8gbm90IGNsb25lKVxyXG5cclxuICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHVzZXIgaGFzIHVzZWQgYSBtb3VzZSBldmVudCB0byBpbmNyZWFzZSB0aGUgZGltZW5zaW9ucyBvZiB0aGUgdGFibGUgLSBjYWxsIGNhbGN1bGF0ZUNlbGxzKClcclxuXHJcbiAgICByb3cgPSBjZWxsID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHJvdyBhbmQgY2VsbCBpbmRleGVzIChuZWVkZWQgaW4gY2FzZSBvZiBlbmFibGUgLyBkaXNhYmxlIHRhYmxlcylcclxuICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCBhbmQgcmVtZW1iZXIgc291cmNlIHBvc2l0aW9uIChvbGQgcG9zaXRpb24gaXMgaW5pdGlhbGx5IHRoZSBzYW1lIGFzIHNvdXJjZSBwb3NpdGlvbilcclxuICAgIHJvd19zb3VyY2UgPSByb3dfb2xkID0gcm93O1xyXG4gICAgY2VsbF9zb3VyY2UgPSBjZWxsX29sZCA9IGNlbGw7XHJcblxyXG4gICAgUkVESVBTLmRyYWcuZXZlbnQucm93Q2xpY2tlZCh0ZC5jdXJyZW50KTtcclxuXHJcbiAgICAvLyBpZiBzdGFydCBwb3NpdGlvbiBjYW5ub3QgYmUgZGVmaW5lZCB0aGVuIHVzZXIgcHJvYmFibHkgY2xpY2tlZCBvbiBlbGVtZW50IHRoYXQgYmVsb25ncyB0byB0aGUgZGlzYWJsZWQgdGFibGUgKG9yIHNvbWV0aGluZyBlbHNlIGhhcHBlbmVkIHRoYXQgd2FzIG5vdCBzdXBwb3NlZCB0byBoYXBwZW4gLSBldmVyeSBlbGVtZW50IHNob3VsZCBiZWxvbmcgdG8gdGhlIHRhYmxlKSB0aGlzIGNvZGUgbXVzdCBnbyBhZnRlciBleGVjdXRpb24gb2YgZXZlbnQgaGFuZGxlcnNcclxuICAgIGlmIChyb3cgPT09IG51bGwgfHwgY2VsbCA9PT0gbnVsbClcclxuICAgIHtcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVydW4gc2V0VGFibGVSb3dDb2x1bW4oKSBhZ2FpbiBiZWNhdXNlIHNvbWUgb2YgdGFibGVzIG1pZ2h0IGJlIGVuYWJsZWQgaW4gaGFuZGxlciBldmVudHMgYWJvdmVcclxuICAgICAgcm93X3NvdXJjZSA9IHJvd19vbGQgPSByb3c7XHJcbiAgICAgIGNlbGxfc291cmNlID0gY2VsbF9vbGQgPSBjZWxsO1xyXG5cclxuICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCBjZWxsID09PSBudWxsKSAgLy8gbm8sIGNsaWNrZWQgZWxlbWVudCBpcyBvbiB0aGUgZGlzYWJsZWQgdGFibGUgLSBzb3JyeVxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb3ZlZCA9IGNsb25lZCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IFwibW92ZWRcIiBmbGFnIChuZWVkZWQgZm9yIGNsb25lIG9iamVjdCBpbiBoYW5kbGVyT25Nb3VzZU1vdmUpIGFuZCBcImNsb25lZFwiIGZsYWdcclxuXHJcbiAgICBSRURJUFMuZXZlbnQuYWRkKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgaGFuZGxlck9uTW91c2VNb3ZlKTsgICAgICAgIC8vIGFjdGl2YXRlIG9ubW91c2Vtb3ZlIGV2ZW50IGhhbmRsZXIgb24gZG9jdW1lbnQgb2JqZWN0XHJcbiAgICBSRURJUFMuZXZlbnQuYWRkKGRvY3VtZW50LCAnbW91c2V1cCcsIGhhbmRsZXJPbk1vdXNlVXApOyAgICAgICAgICAgIC8vIGFjdGl2YXRlIG9ubW91c2V1cCBldmVudCBoYW5kbGVyIG9uIGRvY3VtZW50IG9iamVjdFxyXG5cclxuICAgIGlmIChyb3cgIT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgYmFja2dyb3VuZCBjb2xvciBpZiBpcyBwb3NzaWJsZVxyXG4gICAge1xyXG4gICAgICBiZ1N0eWxlT2xkID0gZ2V0VGRTdHlsZShyb3cpO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUsICdwb3NpdGlvbicpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRhYmxlIENTUyBwb3NpdGlvbiAobmVlZGVkIGZvciBleGNsdXNpb24gXCJzY3JvbGwgb2Zmc2V0XCIgaWYgdGFibGUgYm94IGhhcyBwb3NpdGlvbiBmaXhlZClcclxuXHJcbiAgICBpZiAocG9zaXRpb24gIT09ICdmaXhlZCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRhYmxlIGRvZXNuJ3QgaGF2ZSBzdHlsZSBwb3NpdGlvbjpmaXhlZCB0aGVuIHRhYmxlIGNvbnRhaW5lciBzaG91bGQgYmUgdGVzdGVkXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUucGFyZW50Tm9kZSwgJ3Bvc2l0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb2Zmc2V0ID0gYm94T2Zmc2V0KG9iaiwgcG9zaXRpb24pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvYmplY3Qgb2Zmc2V0XHJcbiAgICBvYmpNYXJnaW4gPSBbWSAtIG9mZnNldFswXSwgb2Zmc2V0WzFdIC0gWCwgb2Zmc2V0WzJdIC0gWSwgWCAtIG9mZnNldFszXV07ICAgLy8gY2FsY3VsYXRlIG9mZnNldCBmcm9tIHRoZSBjbGlja2VkIHBvaW50IGluc2lkZSBlbGVtZW50IHRvIHRoZSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgc2lkZSBvZiB0aGUgZWxlbWVudFxyXG5cclxuICAgIHJldHVybiBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHRleHQgc2VsZWN0aW9uIGZvciBub24gSUUgYnJvd3NlcnNcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kcyByZXR1cm5zIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IG9yIGNsb25lcyB0YWJsZSByb3cuXHJcbiAgICogSWYgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VEb3duOlxyXG4gICAqIDx1bD5cclxuICAgKiA8bGk+aW5wdXQgcGFyYW1ldGVyIGlzIERJViBjbGFzcz1cInJlZGlwcy1yb3dcIjwvbGk+XHJcbiAgICogPGxpPm1ldGhvZCB3aWxsIHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGN1cnJlbnQgcm93PC9saT5cclxuICAgKiA8L3VsPlxyXG4gICAqIElmIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZTpcclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmlucHV0IHBhcmFtZXRlciBpcyBUUiAoY3VycmVudCByb3cpIC0gcHJldmlvdXNseSByZXR1cm5lZCB3aXRoIHRoaXMgZnVuY3Rpb248L2xpPlxyXG4gICAqIDxsaT5tZXRob2Qgd2lsbCBjbG9uZSBjdXJyZW50IHJvdyBhbmQgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY2xvbmVkIHJvdzwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBESVYgY2xhc3M9XCJyZWRpcHMtcm93XCIgb3IgVFIgKGN1cnJlbnQgcm93KVxyXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBSZXR1cm5zIHJlZmVyZW5jZSBvZiB0aGUgY3VycmVudCByb3cgb3IgY2xvbmUgY3VycmVudCByb3cgYW5kIHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGNsb25lZCByb3cuXHJcbiAgICovXHJcbiAgcm93Q2xvbmUgPSBmdW5jdGlvbiAoZWwpXHJcbiAge1xyXG4gICAgdmFyIHRhYmxlTWluaTsgICAgICAvLyBvcmlnaW5hbCB0YWJsZSBpcyBjbG9uZWQgYW5kIGFsbCByb3dzIGV4Y2VwdCBwaWNrZWQgcm93IGFyZSBkZWxldGVkXHJcbiAgICB2YXIgcm93T2JqOyAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgcm93IG9iamVjdFxyXG4gICAgdmFyIGRpdjsgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIDxESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCI+IGVsZW1lbnRcclxuXHJcbiAgICBpZiAoZWwubm9kZU5hbWUgPT09ICdESVYnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxKSByb3dDbG9uZSBjYWxsIGluIG9ubW91c2Vkb3duIHdpbGwgcmV0dXJuIHJlZmVyZW5jZSBvZiBUUiBlbGVtZW50IChpbnB1dCBwYXJhbWV0ZXIgaXMgSFRNTEVsZW1lbnQgPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIj4pXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGVsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciByZWZlcmVuY2UgdG8gdGhlIDxESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCI+XHJcbiAgICAgIGVsID0gZmluZFBhcmVudCgnVFInLCBlbCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIHBhcmVudCBUUiBlbGVtZW50XHJcbiAgICAgIGlmIChlbC5yZWRpcHMgPT09IHVuZGVmaW5lZCkgeyBlbC5yZWRpcHMgPSB7fTsgfSAgICAvLyBjcmVhdGUgYSBcInByb3BlcnR5IG9iamVjdFwiIGluIHdoaWNoIGFsbCBjdXN0b20gcHJvcGVydGllcyB3aWxsIGJlIHNhdmVkIChpdCBpcyBvbmx5IG9uZSBwcm9wZXJ0eSBmb3Igbm93KVxyXG4gICAgICBlbC5yZWRpcHMuZGl2ID0gZGl2OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSByZWZlcmVuY2UgdG8gdGhlIERJViBlbGVtZW50IGFzIHJlZGlwcy5kaXYgdGhpcyB3aWxsIG1vc3RseSBiZSByZWZlcmVuY2VkIGFzIG9iak9sZC5yZWRpcHMuZGl2IChiZWNhdXNlIG9iak9sZCBpbiByb3cgZHJhZ2dpbmcgY29udGV4dCBpcyByZWZlcmVuY2UgdG8gdGhlIHNvdXJjZSByb3cpXHJcbiAgICAgIHJldHVybiBlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gcmVmZXJlbmNlIHRvIHRoZSBUUiBlbGVtZW50XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAyKSByb3dDbG9uZSBjYWxsIGluIG9ubW91c2Vtb3ZlIHdpbGwgY2xvbmUgY3VycmVudCByb3cgKGVsLm5vZGVOYW1lID09PSAnVFInKVxyXG4gICAge1xyXG4gICAgICByb3dPYmogPSBlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBzb3VyY2Ugcm93XHJcblxyXG4gICAgICB0YWJsZU1pbmkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xyXG4gICAgICB0YWJsZU1pbmkuaW5uZXJIVE1MID0gJzx0ciBpZD1cIicgKyByb3dPYmouaWQgKyAnXCIgY2xhc3M9XCInICsgcm93T2JqLmNsYXNzTGlzdCArICdcIj4nICsgcm93T2JqLmlubmVySFRNTCArICc8L3RyPic7XHJcbiAgICAgIC8vdGFibGVNaW5pLmlubmVySFRNTCA9IGdldEFzc2VtYmx5TWFya3VwKHBhcnNlSW50KHJvd09iai5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSkpOyAgIC8vY2FuIGJlIHVzZWQgdG8gc2hvdyB0aGUgZW50aXJlIGFzc2VtYmx5IHdoZW4gZHJhZ2dpbmcsIHRlbmRzIHRvIHNsb3cgdGhpbmdzIGRvd24gYW5kIGJlIGN1bWJlcnNvbWVcclxuXHJcbiAgICAgIHRhYmxlTWluaS5yZWRpcHMgPSB7fTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZFxyXG4gICAgICB0YWJsZU1pbmkucmVkaXBzLnNvdXJjZVJvdyA9IHJvd09iajsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgc291cmNlIHJvdyByZWZlcmVuY2UgKG5lZWRlZCBmb3Igc291cmNlIHJvdyBkZWxldGlvbiBpbiByb3dEcm9wIG1ldGhvZClcclxuXHJcbiAgICAgIGNvcHlQcm9wZXJ0aWVzKHJvd09iaiwgdGFibGVNaW5pLnJvd3NbMF0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBjdXN0b20gcHJvcGVydGllcyB0byBhbGwgY2hpbGQgRElWIGVsZW1lbnRzIGFuZCBzZXQgb25tb3VzZWRvd24vb25kYmxjbGljayBldmVudCBoYW5kbGVyc1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVkaXBzX2Nsb25lJykuYXBwZW5kQ2hpbGQodGFibGVNaW5pKTsgICAgIC8vIGFwcGVuZCBjbG9uZWQgbWluaSB0YWJsZSB0byB0aGUgRElWIGlkPVwicmVkaXBzX2Nsb25lXCJcclxuXHJcbiAgICAgIHJldHVybiB0YWJsZU1pbmk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBkcm9wcyB0YWJsZSByb3cgdG8gdGhlIHRhcmdldCByb3cgYW5kIGNhbGxzIHVzZXIgZXZlbnQgaGFuZGxlcnMuIFNvdXJjZSByb3cgaXMgZGVsZXRlZCBhbmQgY2xvbmVkIHJvdyBpcyBpbnNlcnRlZCBhdCB0aGUgbmV3IHBvc2l0aW9uLlxyXG4gICAqIE1ldGhvZCB0YWtlcyBjYXJlIGFib3V0IHRoZSBsYXN0IHJvdyBpbiB0aGUgdGFibGUgb25seSBpZiB1c2VyIGRyYWdzIGVsZW1lbnQuIEluIGNhc2Ugb2YgbW92aW5nIHJvd3Mgd2l0aCBtb3ZlT2JqZWN0KCksIGNvbnRyb2xcclxuICAgKiBhbmQgbG9naWMgZm9yIGxhc3Qgcm93IGlzIHR1cm5lZCBvZmYuIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlVXAoKVxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gdGFibGVJZHggVGFibGUgaW5kZXguXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSByb3dJZHggUm93IGluZGV4LlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFt0YWJsZU1pbmldIFJlZmVyZW5jZSB0byB0aGUgbWluaSB0YWJsZSAodGFibGUgdGhhdCBjb250YWlucyBvbmx5IG9uZSByb3cpLiBUaGlzIGlzIGFjdHVhbGx5IGNsb25lIG9mIHNvdXJjZSByb3cuXHJcbiAgICovXHJcbiAgcm93RHJvcCA9IGZ1bmN0aW9uIChyb3dJZHgpXHJcbiAge1xyXG4gICAgdmFyIGRyb3A7ICAgICAgICAgICAgICAgLy8gKGJvb2xlYW4pIGlmIGZhbHNlIHRoZW4gZHJvcHBpbmcgcm93IHdpbGwgYmUgY2FuY2VsZWRcclxuICAgIHZhciB0ck1pbmk7ICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgVFIgaW4gbWluaSB0YWJsZVxyXG4gICAgdmFyIGRlbGV0ZVRhYmxlUm93OyAgICAgLy8gZGVsZXRlIHJvdyAocHJpdmF0ZSBtZXRob2QpXHJcblxyXG4gICAgZGVsZXRlVGFibGVSb3cgPSBmdW5jdGlvbiAoZWwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgdGFibGUgcm93IC0gaW5wdXQgcGFyZW1ldGVyIGlzIHJvdyByZWZlcmVuY2UgKHByaXZhdGUgbWV0aG9kKVxyXG4gICAge1xyXG4gICAgICB2YXIgdGJsO1xyXG5cclxuICAgICAgaWYgKGVsLnJlZGlwcyA9PT0gdW5kZWZpbmVkIHx8ICFlbC5yZWRpcHMuZW1wdHlSb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGRvZXNuJ3QgaGF2ZSBjdXN0b20gXCJyZWRpcHNcIiBwcm9wZXJ0eSBvciBpcyBub3QgbWFya2VkIGFzIGVtcHR5LCB0aGVuIGl0IGNhbiBiZSBkZWxldGVkXHJcbiAgICAgIHtcclxuICAgICAgICB0YmwgPSBmaW5kUGFyZW50KCdUQUJMRScsIGVsKTtcclxuICAgICAgICB0YmwuZGVsZXRlUm93KGVsLnJvd0luZGV4KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlLCByb3cgaXMgbWFya2VkIGFzIFwiZW1wdHlcIiBhbmQgaXQgd2lsbCBiZSBvbmx5IGNvbG9yZWQgKG5vdCBkZWxldGVkKSwgY29udGVudCBvZiB0YWJsZSBjZWxscyB3aWxsIGJlIGRlbGV0ZWQgYW5kIGJhY2tncm91bmQgY29sb3Igd2lsbCBiZSBzZXQgdG8gZGVmYXVsdCBjb2xvclxyXG4gICAgICB7XHJcbiAgICAgICAgcm93T3BhY2l0eShlbCwgJ2VtcHR5JywgUkVESVBTLmRyYWcuc3R5bGUucm93RW1wdHlDb2xvcik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIHRhYmxlTWluaSA9IG9iajsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50bHkgZHJhZ2dlZCByb3cgLSBtaW5pIHRhYmxlXHJcblxyXG4gICAgaWYgKHJvd0lkeCA+IHRhYmxlLnJvd3MubGVuZ3RoIC0gMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaW5kZXggaXMgb3V0IG9mIGJvdW5kcywgdGhlbiBzZXQgbWF4IHJvdyBpbmRleCAocm93IHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhlIHRhYmxlIGJvdHRvbSlcclxuICAgIHtcclxuICAgICAgcm93SWR4ID0gdGFibGUucm93cy5sZW5ndGggLSAxO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB0YWJsZVJvdyA9IHRhYmxlLnJvd3Nbcm93SWR4XTtcclxuXHJcbiAgICB0ck1pbmkgPSB0YWJsZU1pbmkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RyJylbMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIFRSIGluIG1pbmkgdGFibGUgKG1pbmkgdGFibGUgaGFzIG9ubHkgb25lIHJvdyAtIGZpcnN0IHJvdylcclxuXHJcbiAgICB0YWJsZU1pbmkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YWJsZU1pbmkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlc3Ryb3kgbWluaSB0YWJsZSAobm9kZSBzdGlsbCBleGlzdHMgaW4gbWVtb3J5KVxyXG5cclxuICAgIGRyb3AgPSBSRURJUFMuZHJhZy5ldmVudC5yb3dEcm9wcGVkQmVmb3JlKHRhYmxlLCB0YWJsZU1pbmkucmVkaXBzLnNvdXJjZVJvdy5yb3dJbmRleCk7ICAgICAgLy8gY2FsbCBldmVudC5yb3dEcm9wcGVkQmVmb3JlKCkgLSB0aGlzIGhhbmRsZXIgY2FuIHJldHVybiBcImZhbHNlXCIgdmFsdWVcclxuXHJcbiAgICBpZiAoZHJvcCAhPT0gZmFsc2UpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGhhbmRsZXIgcmV0dXJuZWQgZmFsc2UgdGhlbiByb3cgZHJvcHBpbmcgd2lsbCBiZSBjYW5jZWxlZFxyXG4gICAge1xyXG4gICAgICBpZiAocm93SWR4IDwgdGFibGUucm93cy5sZW5ndGgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaXMgbm90IGRyb3BwZWQgdG8gdGhlIGxhc3Qgcm93IHBvc2l0aW9uXHJcbiAgICAgIHtcclxuICAgICAgICB0YWJsZVJvdy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0ck1pbmksIHRhYmxlUm93Lm5leHRTaWJsaW5nKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgaXMgZHJvcHBlZCB0byB0aGUgbGFzdCByb3cgcG9zaXRpb24sIGl0J3MgcG9zc2libGUgdG8gc2V0IHRhcmdldCByb3cgaW5kZXggZ3JlYXRlciB0aGVuIG51bWJlciBvZiByb3dzIC0gaW4gdGhpcyBjYXNlIHJvdyB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSB0YWJsZSBlbmRcclxuICAgICAge1xyXG4gICAgICAgIHRhYmxlUm93LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodHJNaW5pKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgc2hvdWxkIGJlIGFwcGVuZGVkXHJcbiAgICAgICAgdGFibGVSb3cgPSB0YWJsZS5yb3dzWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIHVwcGVyIHJvdywgYWZ0ZXIgcm93IGlzIGFwcGVuZGVkLCB1cHBlciByb3cgc2hvdWxkIGJlIHRlc3RlZCBpZiBjb250YWlucyBcImVtcHR5Um93XCIgc2V0IHRvIHRydWUsIHRoaXMgY291bGQgaGFwcGVuIGluIGNhc2Ugd2hlbiByb3cgaXMgbW92ZWQgdG8gdGhlIHRhYmxlIHdpdGggb25seSBvbmUgZW1wdHkgcm93XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBzb3VyY2Ugcm93IGlmIHJvdyBpcyBub3QgY2xvbmVkXHJcbiAgICAgIHtcclxuICAgICAgICBkZWxldGVUYWJsZVJvdyh0YWJsZU1pbmkucmVkaXBzLnNvdXJjZVJvdyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRlbGV0ZSB0ck1pbmkucmVkaXBzLmVtcHR5Um93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBlbXB0eVJvdyBwcm9wZXJ0eSBmcm9tIGluc2VydGVkL2FwcGVuZGVkIHJvdyBiZWNhdXNlIGVtcHR5Um93IHdpbGwgYmUgc2V0IG9uIG5leHQgbW92ZSwgY29weVByb3BlcnRpZXMoKSBpbiByb3dDbG9uZSgpIGNvcGllZCBlbXB0eVJvdyBwcm9wZXJ0eSB0byB0aGUgcm93IGluIHRhYmxlTWluaSwgb3RoZXJ3aXNlIHJvdyB3aWxsIGJlIG92ZXJ3cml0dGVuIGFuZCB0aGF0IGlzIG5vdCBnb29kXHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0Ryb3BwZWQodGFibGVSb3cpOyAgICAgICAgIC8vIGNhbGwgcm93RHJvcHBlZCBldmVudCBoYW5kbGVyXHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50LnJvd0Ryb3BwZWRCZWZvcmUoKSByZXR1cm5lZCBcImZhbHNlXCIgKGl0J3MgdXAgdG8gdXNlciB0byByZXR1cm4gc291cmNlIHJvdyBvcGFjaXR5IHRvIGl0cyBvcmlnaW5hbCBzdGF0ZSlcclxuICAgIHtcclxuICAgICAgLy8gcm93T3BhY2l0eShvYmpPbGQsIDEwMCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIG9ubW91c2V1cCBldmVudCBoYW5kbGVyLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlVXAgaXMgYXR0YWNoZWQgdG8gdGhlIERJViBlbGVtZW50IGluIGEgbW9tZW50IHdoZW4gRElWIGVsZW1lbnQgaXMgY2xpY2tlZCAodGhpcyBoYXBwZW5zIGluIGhhbmRsZXJPbk1vdXNlRG93bikuXHJcbiAgICogVGhpcyBldmVudCBoYW5kbGVyIGRldGFjaGVzIG9ubW91c2Vtb3ZlIGFuZCBvbm1vdXNldXAgZXZlbnQgaGFuZGxlcnMuXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZSBFdmVudCBpbmZvcm1hdGlvbi5cclxuICAgKi9cclxuICBoYW5kbGVyT25Nb3VzZVVwID0gZnVuY3Rpb24gKGUpXHJcbiAge1xyXG4gICAgdmFyIGV2dCA9IGUgfHwgd2luZG93LmV2ZW50OyAgICAvLyBkZWZpbmUgZXZlbnQgKEZGICYgSUUpXHJcbiAgICB2YXIgcl9yb3c7ICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgbW9kZT1cInJvd1wiXHJcbiAgICB2YXIgbXRfdHI7ICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgcmV0dXJuaW5nIGNvbG9yIHRvIHRoZSB0YWJsZSBjZWxsIChtdF90ciAtIFwibWluaSB0YWJsZVwiIFwidGFibGVfcm93XCIpXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgdmFyIGk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VkIGluIGxvY2FsIGxvb3BcclxuICAgIHZhciBkcm9wOyAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZmFsc2UgdGhlbiBkcm9wcGVkIERJViBlbGVtZW50XHJcblxyXG4gICAgWCA9IGV2dC5jbGllbnRYO1xyXG4gICAgWSA9IGV2dC5jbGllbnRZO1xyXG5cclxuICAgIGVkZ2UuZmxhZy54ID0gZWRnZS5mbGFnLnkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0dXJuIG9mZiBhdXRvc2Nyb2xsIFwiY3VycmVudCBjZWxsXCIgaGFuZGxpbmcgKGlmIHVzZXIgbW91c2V1cCBpbiB0aGUgbWlkZGxlIG9mIGF1dG9zY3JvbGxpbmcpXHJcblxyXG4gICAgUkVESVBTLmV2ZW50LnJlbW92ZShkb2N1bWVudCwgJ21vdXNlbW92ZScsIGhhbmRsZXJPbk1vdXNlTW92ZSk7XHJcbiAgICBSRURJUFMuZXZlbnQucmVtb3ZlKGRvY3VtZW50LCAnbW91c2V1cCcsIGhhbmRsZXJPbk1vdXNlVXApO1xyXG5cclxuICAgIGRyYWdDb250YWluZXIub25zZWxlY3RzdGFydCA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhY2ggZHJhZ0NvbnRhaW5lci5vbnNlbGVjdHN0YXJ0IGhhbmRsZXIgdG8gZW5hYmxlIHNlbGVjdCBmb3IgSUU3L0lFOCBicm93c2VyXHJcblxyXG4gICAgcmVzZXRTdHlsZXMob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9iamVjdCBzdHlsZXNcclxuXHJcbiAgICBzY3JvbGxEYXRhLndpZHRoICA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDtcclxuICAgIHNjcm9sbERhdGEuaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodDtcclxuXHJcbiAgICBlZGdlLmZsYWcueCA9IGVkZ2UuZmxhZy55ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgYXV0b3Njcm9sbCBmbGFnc1xyXG5cclxuICAgIGlmIChyb3cgPT09IG51bGwgfHwgY2VsbCA9PT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgZWxlbWVudCB3YXMgY2xpY2tlZCBhbmQgbGVmdCBidXR0b24gd2FzIHJlbGVhc2VkLCBidXQgZWxlbWVudCBpcyBwbGFjZWQgaW5zaWRlIHVubW92YWJsZSB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdE1vdmVkKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIFJFRElQUy5kcmFnLnRkLnRhcmdldCA9IHRkLnRhcmdldCA9IHRhYmxlLnJvd3Nbcm93XS5jZWxsc1tjZWxsXTtcclxuXHJcbiAgICAgIHNldFRkU3R5bGUocm93LCBiZ1N0eWxlT2xkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJhY2tncm91bmQgY29sb3IgZm9yIGRlc3RpbmF0aW9uIHJvd1xyXG5cclxuICAgICAgcl9yb3cgPSByb3c7XHJcblxyXG4gICAgICBpZiAoIW1vdmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyB3YXMgY2xpY2tlZCBhbmQgbW91c2UgYnV0dG9uIHdhcyByZWxlYXNlZCByaWdodCBhd2F5IChyb3cgd2FzIG5vdCBtb3ZlZClcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd05vdE1vdmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgd2FzIG1vdmVkXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAocm93X3NvdXJjZSA9PT0gcl9yb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZHJvcHBlZCB0byB0aGUgc291cmNlIHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG10X3RyID0gb2JqLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIFRSIGluIG1pbmkgdGFibGUgKG1pbmkgdGFibGUgaGFzIG9ubHkgb25lIHJvdylcclxuXHJcbiAgICAgICAgICBvYmpPbGQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbXRfdHIuc3R5bGUuYmFja2dyb3VuZENvbG9yOyAgICAgICAgICAgLy8gcmV0dXJuIGNvbG9yIHRvIHRoZSBzb3VyY2Ugcm93IGZyb20gdGhlIHJvdyBvZiBjbG9uZWQgbWluaSB0YWJsZSwgY29sb3Igb2YgdGhlIHNvdXJjZSByb3cgY2FuIGJlIGNoYW5nZWQgaW4gZXZlbnQucm93TW92ZWQoKSAod2hlbiB1c2VyIHdhbnRzIHRvIG1hcmsgc291cmNlIHJvdylcclxuXHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbXRfdHIuY2VsbHMubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGNvbG9yIHRvIHRoZSBlYWNoIHRhYmxlIGNlbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgb2JqT2xkLmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG10X3RyLmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvcjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGNsb25lZCBtaW5pIHRhYmxlXHJcbiAgICAgICAgICBkZWxldGUgb2JqT2xkLnJlZGlwcy5lbXB0eVJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGVtcHR5Um93IHByb3BlcnR5IGZyb20gc291cmNlIHJvdyBiZWNhdXNlIGVtcHR5Um93IHdpbGwgYmUgc2V0IG9uIG5leHQgbW92ZSwgb3RoZXJ3aXNlIHJvdyB3b3VsZCBiZSBvdmVyd3JpdHRlbiBhbmQgdGhhdCdzIG5vIGdvb2RcclxuXHJcbiAgICAgICAgICBpZiAoY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IHdhcyBjbG9uZWQgYW5kIGRyb3BwZWQgdG8gdGhlIHNvdXJjZSBsb2NhdGlvbiB0aGVuIGNhbGwgcm93Tm90Q2xvbmVkIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Tm90Q2xvbmVkKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5yb3dEcm9wcGVkU291cmNlKCkgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dEcm9wcGVkU291cmNlKHRkLnRhcmdldCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBkcm9wcGVkIHRvIHRoZSBuZXcgcm93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcm93RHJvcChyX3Jvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIWNsb25lZCAmJiAhdGhyZXNob2xkLmZsYWcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsaWNrZWQgZWxlbWVudCB3YXMgbm90IG1vdmVkIC0gRElWIGVsZW1lbnQgZGlkbid0IGNyb3NzIHRocmVzaG9sZCB2YWx1ZSwganVzdCBjYWxsIGV2ZW50Lm5vdE1vdmVkIGV2ZW50IGhhbmRsZXJcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdE1vdmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoY2xvbmVkICYmIHJvd19zb3VyY2UgPT09IHJvdyAmJiBjZWxsX3NvdXJjZSA9PT0gY2VsbCkgICAgICAgICAgICAvLyBkZWxldGUgY2xvbmVkIGVsZW1lbnQgaWYgZHJvcHBlZCBvbiB0aGUgc3RhcnQgcG9zaXRpb25cclxuICAgICAge1xyXG4gICAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7XHJcbiAgICAgICAgY2xvbmVkSWRbb2JqT2xkLmlkXSAtPSAxO1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdENsb25lZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGNsb25lZCAmJiBSRURJUFMuZHJhZy5jbG9uZS5kcm9wID09PSBmYWxzZSAmJiAoWCA8IHRhYmxlLnJlZGlwcy5vZmZzZXRbM10gfHwgWCA+IHRhYmxlLnJlZGlwcy5vZmZzZXRbMV0gfHwgWSA8IHRhYmxlLnJlZGlwcy5vZmZzZXRbMF0gfHwgWSA+IHRhYmxlLnJlZGlwcy5vZmZzZXRbMl0pKSAgICAvLyBkZWxldGUgY2xvbmVkIGVsZW1lbnQgaWYgZHJvcHBlZCBvdXRzaWRlIGN1cnJlbnQgdGFibGUgYW5kIGNsb25lLmRyb3AgaXMgc2V0IHRvIGZhbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopO1xyXG4gICAgICAgIGNsb25lZElkW29iak9sZC5pZF0gLT0gMTtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RDbG9uZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2UgY2FsbCBldmVudC5kcm9wcGVkQmVmb3JlKCksIGFwcGVuZCBvYmplY3QgdG8gdGhlIGNlbGwgYW5kIGNhbGwgZXZlbnQuZHJvcHBlZCgpXHJcbiAgICAgIHtcclxuICAgICAgICBkcm9wID0gUkVESVBTLmRyYWcuZXZlbnQuZHJvcHBlZEJlZm9yZSh0ZC50YXJnZXQpOyAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmRyb3BwZWRCZWZvcmUgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgIGVsZW1lbnREcm9wKGRyb3ApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRyb3AgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbCAob3IgZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3A9XCJmYWxzZVwiKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY2FsY3VsYXRlIHRhYmxlIGNlbGxzIGFuZCBzY3JvbGxlcnMgYmVjYXVzZSBjZWxsIGNvbnRlbnQgY291bGQgY2hhbmdlIHJvdyBkaW1lbnNpb25zXHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmZpbmlzaCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBsYXN0IGV2ZW50IGhhbmRsZXJcclxuICAgIH1cclxuXHJcbiAgICByb3dfb2xkID0gY2VsbF9vbGQgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgb2xkIHBvc2l0aW9uc1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBFbGVtZW50IGRyb3AuIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlVXAgYW5kIGFwcGVuZHMgZWxlbWVudCB0byB0aGUgdGFyZ2V0IHRhYmxlIGNlbGwuXHJcbiAgICogSWYgaW5wdXQgcGFyYW1ldGVyIFwiZHJvcFwiIGlzIHNldCB0byBcImZhbHNlXCIgKHRoaXMgaXMgYWN0dWFsbHkgcmV0dXJuIHZhbHVlIGZyb20gZXZlbnQuZHJvcHBlZEJlZm9yZSkgdGhlbiBESVYgZWxlbWVudHMgd2lsbCBub3QgYmUgZHJvcHBlZCAob25seSBjbG9uZWQgZWxlbWVudCB3aWxsIGJlIGRlbGV0ZWQpLlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2Ryb3BdIElmIG5vdCBcImZhbHNlXCIgdGhlbiBESVYgZWxlbWVudCB3aWxsIGJlIGRyb3BwZWQgdG8gdGhlIGNlbGwuXHJcbiAgICovXHJcbiAgZWxlbWVudERyb3AgPSBmdW5jdGlvbiAoZHJvcCkgXHJcbiAge1xyXG4gICAgdmFyIGNsb25lU291cmNlRGl2ID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmUgc291cmNlIGVsZW1lbnQgKG5lZWRlZCBpZiBjbG9uZS5zZW5kQmFjayBpcyBzZXQgdG8gdHJ1ZSlcclxuICAgIHZhciBkaXY7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vZGVMaXN0IG9mIERJViBlbGVtZW50cyBpbiB0YXJnZXQgY2VsbCAobmVlZGVkIGlmIGNsb25lLnNlbmRCYWNrIGlzIHNldCB0byB0cnVlKVxyXG4gICAgXHJcbiAgICBpZiAoZHJvcCAhPT0gZmFsc2UpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpbnB1dCBwYXJhbWV0ZXIgaXMgbm90IFwiZmFsc2VcIiB0aGVuIERJViBlbGVtZW50IHdpbGwgYmUgZHJvcHBlZCB0byB0aGUgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBpZiAoY2xvbmUuc2VuZEJhY2sgPT09IHRydWUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2xvbmUuc2VuZEJhY2sgaXMgc2V0IHRvIHRydWUgdGhlbiB0cnkgdG8gZmluZCBzb3VyY2UgZWxlbWVudCBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICB7XHJcbiAgICAgICAgZGl2ID0gdGQudGFyZ2V0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdESVYnKTsgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggYWxsIERJViBlbGVtZW50cyBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGFsbCBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAvLyBpZiBESVYgaW4gdGFyZ2V0IGNlbGwgaXMgc291cmNlIG9mIGRyb3BwZWQgRElWIGVsZW1lbnQgKGRyb3BwZWQgRElWIGlkIGFuZCBpZCBvZiBESVYgaW4gdGFyZ2V0IGNlbGwgaGFzIHRoZSBzYW1lIG5hbWUgYmVnaW5uaW5nIGxpa2UgXCJkMTJjMlwiIGFuZCBcImQxMlwiKVxyXG4gICAgICAgICAgLy8gb2YgY291cnNlLCB0aGUgY2FzZSB3aGVyZSBzb3VyY2UgRElWIGVsZW1lbnQgaXMgZHJvcHBlZCB0byB0aGUgY2VsbCB3aXRoIGNsb25lZCBESVYgZWxlbWVudCBzaG91bGQgYmUgZXhjbHVkZWQgKHBvc3NpYmxlIGluIGNsaW1pdDEgdHlwZSlcclxuICAgICAgICAgIGlmIChvYmogIT09IGRpdltpXSAmJiBvYmouaWQuaW5kZXhPZihkaXZbaV0uaWQpID09PSAwKSBcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY2xvbmVTb3VyY2VEaXYgPSBkaXZbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gY2xvbmVTb3VyY2VEaXYgZWxlbWVudFxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGNsb25lU291cmNlRGl2KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjbG9uZSBzb3VyY2UgRElWIGVsZW1lbnQgZXhpc3RzIGluIHRhcmdldCBjZWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY2xvbmVMaW1pdChjbG9uZVNvdXJjZURpdiwgMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdCBjbGFzcyAoaW5jcmVtZW50IGJ5IDEpXHJcbiAgICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgZHJvcHBlZCBESVYgZWxlbWVudFxyXG4gICAgICAgICAgcmV0dXJuOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGZyb20gdGhlIG1ldGhvZCAoZXZlcnl0aGluZyBpcyBkb25lKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGQudGFyZ2V0LmFwcGVuZENoaWxkKG9iaik7XHJcbiAgICAgIFxyXG4gICAgICByZWdpc3RlckV2ZW50cyhvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyAoRklYIGZvciBTYWZhcmkgTW9iaWxlKVxyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5kcm9wcGVkKHRkLnRhcmdldCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQuZHJvcHBlZCBiZWNhdXNlIGNsb25lTGltaXQgY291bGQgY2FsbCBldmVudC5jbG9uZWRFbmQxIG9yIGV2ZW50LmNsb25lZEVuZDJcclxuICAgICAgXHJcbiAgICAgIGlmIChjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgb2JqZWN0IGlzIGNsb25lZFxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQuY2xvbmVkRHJvcHBlZCh0ZC50YXJnZXQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBjbG9uZWREcm9wcGVkIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICBjbG9uZUxpbWl0KG9iak9sZCwgLTEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY2xpbWl0MV9YIG9yIGNsaW1pdDJfWCBjbGFzc25hbWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoY2xvbmVkICYmIG9iai5wYXJlbnROb2RlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lZCBlbGVtZW50IHNob3VsZCBiZSBkZWxldGVkIChpZiBub3QgYWxyZWFkeSBkZWxldGVkKVxyXG4gICAge1xyXG4gICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3IgRElWIGVsZW1lbnQuXHJcbiAgICogRElWIGVsZW1lbnRzIHNob3VsZCBoYXZlIG9ubHkgb25tb3VzZWRvd24gKHVzaW5nIHRyYWRpdGlvbmFsIGV2ZW50IHJlZ2lzdHJhdGlvbiBtb2RlbCkuXHJcbiAgICogSSBoYWQgYSBwcm9ibGVtIHdpdGggYWR2YW5jZWQgZXZlbnQgcmVnaXN0cmF0aW9uIG1vZGVsLlxyXG4gICAqIEluIGNhc2Ugb2YgdXNpbmcgYWR2YW5jZWQgbW9kZWwsIHNlbGVjdGVkIHRleHQgYW5kIGRyYWdnZWQgRElWIGVsZW1lbnQgd2VyZSBpbiBjb2xsaXNpb24uXHJcbiAgICogSXQgbG9va3MgbGlrZSBzZWxlY3RlZCB0ZXh0IHdhcyBhYmxlIHRvIGRyYWcgaW5zdGVhZCBvZiBESVYgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBkaXYgUmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIGZvciBvbm1vdXNlZG93biwgb250b3VjaHN0YXJ0IGFuZCBvbmRibGNsaWNrIHRvIHRoZSBESVYgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmbGFnXSBJZiBzZXQgdG8gZmFsc2UgdGhlbiBldmVudCBsaXN0ZW5lcnMgd2lsbCBiZSBkZWxldGVkLlxyXG4gICAqL1xyXG4gIHJlZ2lzdGVyRXZlbnRzID0gZnVuY3Rpb24gKGRpdiwgZmxhZylcclxuICB7XHJcbiAgICBpZiAoZmxhZyA9PT0gZmFsc2UpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGZsYWcgaXMgc2UgdG8gZmFsc2UsIHRoZW4gcmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBvbiBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBkaXYub25tb3VzZWRvd24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBkaXYub25tb3VzZWRvd24gPSBoYW5kbGVyT25Nb3VzZURvd247XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIHJlc2V0U3R5bGVzID0gZnVuY3Rpb24gKGVsKSAgICAgICAgIC8vIEFmdGVyIGVsZW1lbnQgaXMgZHJvcHBlZCwgc3R5bGVzIG5lZWQgdG8gYmUgcmVzZXQuXHJcbiAge1xyXG4gICAgZWwuc3R5bGUudG9wICA9ICcnO1xyXG4gICAgZWwuc3R5bGUubGVmdCA9ICcnO1xyXG4gICAgZWwuc3R5bGUucG9zaXRpb24gPSAnJztcclxuICAgIGVsLnN0eWxlLnpJbmRleCA9ICcnO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIG9ubW91c2Vtb3ZlIGV2ZW50IGhhbmRsZXIuXHJcbiAgICogaGFuZGxlck9uTW91c2VNb3ZlIGlzIGF0dGFjaGVkIHRvIGRvY3VtZW50IGxldmVsIGluIGEgbW9tZW50IHdoZW4gRElWIGVsZW1lbnQgaXMgY2xpY2tlZCAodGhpcyBoYXBwZW5zIGluIGhhbmRsZXJPbk1vdXNlRG93bikuXHJcbiAgICogaGFuZGxlck9uTW91c2VVcCBkZXRhY2hlcyBvbm1vdXNlbW92ZSBhbmQgb25tb3VzZXVwIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGUgRXZlbnQgaW5mb3JtYXRpb24uXHJcbiAgICovXHJcbiAgaGFuZGxlck9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpXHJcbiAge1xyXG4gICAgdmFyIGV2dCA9IGUgfHwgd2luZG93LmV2ZW50OyAgICAgICAgICAgIC8vIGRlZmluZSBldmVudCAoRkYgJiBJRSlcclxuICAgIHZhciBib3VuZCA9IFJFRElQUy5kcmFnLnNjcm9sbC5ib3VuZDsgICAvLyByZWFkIFwiYm91bmRcIiBwdWJsaWMgcHJvcGVydHkgKG1heWJlIGNvZGUgd2lsbCBiZSBmYXN0ZXIsIGFuZCBpdCB3aWxsIGJlIGVhc2llciB0byByZWZlcmVuY2UgaW4gb25tb3VzZW1vdmUgaGFuZGxlcilcclxuICAgIHZhciBzY2E7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50IHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFcclxuICAgIHZhciBYLCBZOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBkZWx0YVgsIGRlbHRhWTsgICAgICAgICAgICAgICAgICAgICAvLyBkZWx0YSBmcm9tIGluaXRpYWwgcG9zaXRpb25cclxuICAgIHZhciBpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIGxvY2FsIGxvb3BcclxuICAgIHZhciBzY3JvbGxQb3NpdGlvbjsgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgcG9zaXRpb24gdmFyaWFibGUgbmVlZGVkIGZvciBhdXRvc2Nyb2xsIGNhbGxcclxuXHJcbiAgICBYID0gcG9pbnRlci54ID0gZXZ0LmNsaWVudFg7XHJcbiAgICBZID0gcG9pbnRlci55ID0gZXZ0LmNsaWVudFk7XHJcblxyXG4gICAgZGVsdGFYID0gTWF0aC5hYnModGhyZXNob2xkLnggLSBYKTsgICAgICAgICAvLyBjYWxjdWxhdGUgZGVsdGEgZnJvbSBpbml0aWFsIHBvc2l0aW9uXHJcbiAgICBkZWx0YVkgPSBNYXRoLmFicyh0aHJlc2hvbGQueSAtIFkpO1xyXG5cclxuICAgIGlmICghbW92ZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgXCJtb3ZlZFwiIGZsYWcgaXNuJ3Qgc2V0ICh0aGlzIGlzIHRoZSBmaXJzdCBtb21lbnQgd2hlbiBvYmplY3QgaXMgbW92ZWQpXHJcbiAgICB7XHJcbiAgICAgIC8vcmVtZW1iZXIgcmVmZXJlbmNlIG9mIHRoZSBzb3VyY2Ugcm93LCBjbG9uZSBzb3VyY2Ugcm93IGFuZCBzZXQgb2JqIGFzIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCByb3cgc2V0dGluZ3Mgb2YgXCJjbG9uZWRcIiBmbGFnIHNob3VsZCBnbyBiZWZvcmUgY2FsbGluZyByb3dDbG9uZSgpIGJlY2F1c2UgXCJjbG9uZWRcIiBpcyBuZWVkZWQgaW4gcm93Q2xvbmUoKSB0byBjdXQgb3V0IFwicmVkaXBzLWNsb25lXCIgY2xhc3MgbmFtZSBmcm9tIDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93IHJlZGlwcy1jbG9uZVwiPiBlbGVtZW50c1xyXG4gICAgICBpZiAoY2xvbmVDbGFzcyB8fCAoUkVESVBTLmRyYWcuY2xvbmUua2V5Um93ID09PSB0cnVlICYmIHNoaWZ0S2V5KSlcclxuICAgICAge1xyXG4gICAgICAgIGNsb25lZCA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFJFRElQUy5kcmFnLm9iak9sZCA9IG9iak9sZCA9IG9iajsgICAgICAgIC8vIHJlbWVtYmVyIHJlZmVyZW5jZSB0byB0aGUgc291cmNlIHJvd1xyXG4gICAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSByb3dDbG9uZShvYmopOyAgICAvLyBjbG9uZSBzb3VyY2Ugcm93IGFuZCBzZXQgYXMgb2JqXHJcbiAgICAgIG9iai5zdHlsZS56SW5kZXggPSA5OTk7ICAgICAgICAgICAgICAgICAgIC8vIHNldCBoaWdoIHotaW5kZXggZm9yIGNsb25lZCBtaW5pIHRhYmxlXHJcblxyXG4gICAgICBvYmouc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOyAgICAgICAgICAgICAvLyBzZXQgc3R5bGUgdG8gZml4ZWQgdG8gYWxsb3cgZHJhZ2dpbmcgRElWIG9iamVjdFxyXG4gICAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBjYWxjdWxhdGUgY2VsbHMgZm9yIGNhc2Ugd2hlcmUgbW92ZWQgZWxlbWVudCBjaGFuZ2VkIGNlbGwgZGltZW5zaW9uLCBwbGFjZSAzIGVsZW1lbnRzIGluIHRoZSBzYW1lIGNlbGwgaW4gZXhhbXBsZTA4IGFuZCB0cnkgdG8gbW92ZSBvbmUgb3V0IG9mIHRoZSB0YWJsZSBjZWxsXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNvbHVtblxyXG5cclxuICAgICAgaWYgKGNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudCBoYW5kbGVyIChyb3cgY2xvbmVkL21vdmVkKVxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Q2xvbmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93TW92ZWQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0UG9zaXRpb24oKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjb2xvciBmb3IgdGhlIGN1cnJlbnQgdGFibGUgY2VsbCBhbmQgcmVtZW1iZXIgcHJldmlvdXMgcG9zaXRpb24gYW5kIGNvbG9yLCBzZXRQb3NpdGlvbigpIG11c3QgZ28gYWZ0ZXIgY2FsbGluZyBldmVudC5tb3ZlZCgpIGFuZCBldmVudC5yb3dNb3ZlZCgpIGlmIHVzZXIgd2FudHMgdG8gY2hhbmdlIGNvbG9yIG9mIHNvdXJjZSByb3dcclxuXHJcbiAgICAgIGlmIChYID4gc2NyZWVuLndpZHRoIC0gb2JqTWFyZ2luWzFdKSAgICAvLyBpZiBlbGVtZW50IGlzIGZhciBhd2F5IG9uIHRoZSByaWdodCBzaWRlIG9mIHBhZ2UsIHNldCBwb3NzaWJsZSByaWdodCBwb3NpdGlvbiAoc2NyZWVuLndpZHRoIC0gb2JqZWN0IHdpZHRoKSwgb2JqTWFyZ2luWzFdICsgb2JqTWFyZ2luWzNdID0gb2JqZWN0IHdpZHRoXHJcbiAgICAgIHtcclxuICAgICAgICBvYmouc3R5bGUubGVmdCA9IChzY3JlZW4ud2lkdGggLSAob2JqTWFyZ2luWzFdICsgIG9iak1hcmdpblszXSkpICsgJ3B4JztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKFkgPiBzY3JlZW4uaGVpZ2h0IC0gb2JqTWFyZ2luWzJdKSAgIC8vIGlmIGVsZW1lbnQgaXMgYmVsb3cgcGFnZSBib3R0b20sIHNldCBwb3NzaWJsZSBsb3dlciBwb3NpdGlvbiAoc2NyZWVuLndpZHRoIC0gb2JqZWN0IGhlaWdodCksIG9iak1hcmdpblswXSArIG9iak1hcmdpblsyXSA9IG9iamVjdCBoZWlnaHRcclxuICAgICAge1xyXG4gICAgICAgIG9iai5zdHlsZS50b3AgID0gKHNjcmVlbi5oZWlnaHQgLSAob2JqTWFyZ2luWzBdICsgb2JqTWFyZ2luWzJdKSkgKyAncHgnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZWQgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG1vdmVkX2ZsYWdcclxuXHJcbiAgICAvLyBzZXQgbGVmdCBhbmQgdG9wIHN0eWxlcyBmb3IgdGhlIG1vdmVkIGVsZW1lbnQgaWYgZWxlbWVudCBpcyBpbnNpZGUgd2luZG93LCB0aGlzIGNvbmRpdGlvbnMgd2lsbCBzdG9wIGVsZW1lbnQgb24gd2luZG93IGJvdW5kc1xyXG4gICAgaWYgKFggPiBvYmpNYXJnaW5bM10gJiYgWCA8IHNjcmVlbi53aWR0aCAtIG9iak1hcmdpblsxXSlcclxuICAgIHtcclxuICAgICAgb2JqLnN0eWxlLmxlZnQgPSAoWCAtIG9iak1hcmdpblszXSkgKyAncHgnO1xyXG4gICAgfVxyXG4gICAgaWYgKFkgPiBvYmpNYXJnaW5bMF0gJiYgWSA8IHNjcmVlbi5oZWlnaHQgLSBvYmpNYXJnaW5bMl0pXHJcbiAgICB7XHJcbiAgICAgIG9iai5zdHlsZS50b3AgID0gKFkgLSBvYmpNYXJnaW5bMF0pICsgJ3B4JztcclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsICh0aGlzIGNvbmRpdGlvbiBzaG91bGQgc3BhcmUgQ1BVKTogMSkgaWYgbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgRElWIGlkPVwicmVkaXBzLWRyYWdcIiAyKSBhbmQgYXV0b3Njcm9sbCBpcyBub3Qgd29ya2luZyAzKSBhbmQgY3VycmVudCB0YWJsZSBjb250YWlucyBuZXN0ZWQgdGFibGUgb3IgY3Vyc29yIGlzIG91dHNpZGUgb2YgY3VycmVudCBjZWxsXHJcbiAgICBpZiAoWCA8IGRpdkJveFsxXSAmJiBYID4gZGl2Qm94WzNdICYmIFkgPCBkaXZCb3hbMl0gJiYgWSA+IGRpdkJveFswXSAmJlxyXG4gICAgICBlZGdlLmZsYWcueCA9PT0gMCAmJiBlZGdlLmZsYWcueSA9PT0gMCAmJlxyXG4gICAgICAoY3VycmVudENlbGwuY29udGFpblRhYmxlIHx8IChYIDwgY3VycmVudENlbGxbM10gfHwgWCA+IGN1cnJlbnRDZWxsWzFdIHx8IFkgPCBjdXJyZW50Q2VsbFswXSB8fCBZID4gY3VycmVudENlbGxbMl0pKSlcclxuICAgIHtcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlIHJvdyBhbmQgdGFibGUgY2VsbFxyXG4gICAgICBjZWxsQ2hhbmdlZCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbmV3IGxvY2F0aW9uIGlzIGluc2lkZSB0YWJsZSBhbmQgbmV3IGxvY2F0aW9uIGlzIGRpZmZlcmVudCB0aGVuIG9sZCBsb2NhdGlvblxyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGF1dG9TY3JvbGwgb3B0aW9uIGlzIGVuYWJsZWQgKGJ5IGRlZmF1bHQgaXQgaXMgYnV0IGl0IGNhbiBiZSB0dXJuZWQgb2ZmKVxyXG4gICAgaWYgKFJFRElQUy5kcmFnLnNjcm9sbC5lbmFibGUpXHJcbiAgICB7XHJcbiAgICAgIGVkZ2UucGFnZS54ID0gYm91bmQgLSAoc2NyZWVuLndpZHRoIC8gMiAgPiBYID8gWCAtIG9iak1hcmdpblszXSA6IHNjcmVlbi53aWR0aCAtIFggLSBvYmpNYXJnaW5bMV0pOyAgICAgICAvLyBjYWxjdWxhdGUgaG9yaXpvbnRhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG5cclxuICAgICAgaWYgKGVkZ2UucGFnZS54ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kIHRoZW4gc2V0IHNjcm9sbCBkaXJlY3Rpb24gYW5kIGNhbGwgYXV0byBzY3JvbGxcclxuICAgICAge1xyXG4gICAgICAgIGlmIChlZGdlLnBhZ2UueCA+IGJvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3aGVuIG9iamVjdCBpcyBvbmx5IGhhbGYgdmlzaWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UucGFnZS54ID0gYm91bmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBnZXQgaG9yaXpvbnRhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgICAgLy9zY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IDA7ICAgLy9kaXNhYmxpbmcgYmVjYXVzZSB3ZSBzaG91bGRuJ3QgaGF2ZSB0aGUgdXNlciBzY3JvbGxpbmcgaG9yaXpvbnRhbGx5IGFuZCB0aGlzIGltcHJvdmVzIHBlcmZvcm1hbmNlIGZvciBsYXJnZSB0cmVlc1xyXG5cclxuICAgICAgICBlZGdlLnBhZ2UueCAqPSBYIDwgc2NyZWVuLndpZHRoIC8gMiA/IC0xIDogMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzY3JvbGwgZGlyZWN0aW9uXHJcblxyXG4gICAgICAgIC8vIGlmIHBhZ2UgYm91bmQgaXMgY3Jvc3NlZCBhbmQgdGhpcyB0d28gY2FzZXMgYXJlbid0IG1ldDogMSkgc2Nyb2xsYmFyIGlzIG9uIHRoZSBsZWZ0IGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCBsZWZ0IDIpIHNjcm9sbGJhciBpcyBvbiB0aGUgcmlnaHQgYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIHJpZ2h0XHJcbiAgICAgICAgaWYgKCEoKGVkZ2UucGFnZS54IDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA8PSAwKSB8fCAoZWRnZS5wYWdlLnggPiAwICYmIHNjcm9sbFBvc2l0aW9uID49IChzY3JvbGxEYXRhLndpZHRoIC0gc2NyZWVuLndpZHRoKSkpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChlZGdlLmZsYWcueCsrID09PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpcmUgYXV0b3Njcm9sbCBmdW5jdGlvbiAodGhpcyBzaG91bGQgaGFwcGVuIG9ubHkgb25jZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZSh3aW5kb3csICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgIC8vIHJlc2V0IG9uc2Nyb2xsIGV2ZW50XHJcbiAgICAgICAgICAgIGF1dG9TY3JvbGxYKHdpbmRvdyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHdpbmRvdyBhdXRvc2Nyb2xsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIGVkZ2UucGFnZS54ID0gMDtcclxuICAgICAgfVxyXG5cclxuICAgICAgZWRnZS5wYWdlLnkgPSBib3VuZCAtIChzY3JlZW4uaGVpZ2h0IC8gMiA+IFkgPyBZIC0gb2JqTWFyZ2luWzBdIDogc2NyZWVuLmhlaWdodCAtIFkgLSBvYmpNYXJnaW5bMl0pOyAgICAgIC8vIGNhbGN1bGF0ZSB2ZXJ0aWNhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICBcclxuICAgICAgaWYgKGVkZ2UucGFnZS55ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZWRnZS5wYWdlLnkgPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBtYXggY3Jvc3NlZCBib3VuZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UucGFnZS55ID0gYm91bmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHZlcnRpY2FsIHdpbmRvdyBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgICBlZGdlLnBhZ2UueSAqPSBZIDwgc2NyZWVuLmhlaWdodCAvIDIgPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzY3JvbGwgZGlyZWN0aW9uXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCEoKGVkZ2UucGFnZS55IDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA8PSAwKSB8fCAoZWRnZS5wYWdlLnkgPiAwICYmIHNjcm9sbFBvc2l0aW9uID49IChzY3JvbGxEYXRhLmhlaWdodCAtIHNjcmVlbi5oZWlnaHQpKSkpICAgIC8vIGlmIHBhZ2UgYm91bmQgaXMgY3Jvc3NlZCBhbmQgdGhpcyB0d28gY2FzZXMgYXJlbid0IG1ldDogMSkgc2Nyb2xsYmFyIGlzIG9uIHRoZSBwYWdlIHRvcCBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgdXAgMikgc2Nyb2xsYmFyIGlzIG9uIHRoZSBwYWdlIGJvdHRvbSBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgZG93blxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChlZGdlLmZsYWcueSsrID09PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpcmUgYXV0b3Njcm9sbCAodGhpcyBzaG91bGQgaGFwcGVuIG9ubHkgb25jZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZSh3aW5kb3csICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9uc2Nyb2xsIGV2ZW50XHJcbiAgICAgICAgICAgIGF1dG9TY3JvbGxZKHdpbmRvdyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHdpbmRvdyBhdXRvc2Nyb2xsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgXHJcbiAgICAgIHtcclxuICAgICAgICBlZGdlLnBhZ2UueSA9IDA7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzY3JvbGxEYXRhLmNvbnRhaW5lci5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXN0IGlmIGRyYWdnZWQgb2JqZWN0IGlzIGluIHNjcm9sbGFibGUgY29udGFpbmVyLCB0aGlzIGNvZGUgd2lsbCBiZSBleGVjdXRlZCBvbmx5IGlmIHNjcm9sbGFibGUgY29udGFpbmVyIChESVYgd2l0aCBvdmVyZmxvdyBvdGhlciB0aGFuICd2aXNpYmxlKSBleGlzdHMgb24gcGFnZVxyXG4gICAgICB7XHJcbiAgICAgICAgc2NhID0gc2Nyb2xsRGF0YS5jb250YWluZXJbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHNjYS5hdXRvc2Nyb2xsICYmIFggPCBzY2Eub2Zmc2V0WzFdICYmIFggPiBzY2Eub2Zmc2V0WzNdICYmIFkgPCBzY2Eub2Zmc2V0WzJdICYmIFkgPiBzY2Eub2Zmc2V0WzBdKSAvLyBpZiBkcmFnZ2VkIG9iamVjdCBpcyBpbnNpZGUgc2Nyb2xsYWJsZSBjb250YWluZXIgYW5kIHNjcm9sbGFibGUgY29udGFpbmVyIGhhcyBlbmFibGVkIGF1dG9zY3JvbGwgb3B0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWRnZS5kaXYueCA9IGJvdW5kIC0gKHNjYS5taWRzdFggID4gWCA/IFggLSBvYmpNYXJnaW5bM10gLSBzY2Eub2Zmc2V0WzNdIDogc2NhLm9mZnNldFsxXSAtIFggLSBvYmpNYXJnaW5bMV0pOyAgIC8vIGNhbGN1bGF0ZSBob3Jpem9udGFsbHkgY3Jvc3NlZCBwYWdlIGJvdW5kXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChlZGdlLmRpdi54ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kIHRoZW4gc2V0IHNjcm9sbCBkaXJlY3Rpb24gYW5kIGNhbGwgYXV0byBzY3JvbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZGl2LnggPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2hlbiBvYmplY3QgaXMgb25seSBoYWxmIHZpc2libGUgKHBhZ2UgaXMgc2Nyb2xsZWQgb24gdGhhdCBvYmplY3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBlZGdlLmRpdi54ID0gYm91bmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnggKj0gWCA8IHNjYS5taWRzdFggPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvbjogbmVnYXRpdmUgLSBsZWZ0LCBwb3NpdGl2ZSAtIHJpZ2h0XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZWRnZS5mbGFnLngrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgYW5kIGNhbGwgYXV0b1Njcm9sbFkgZnVuY3Rpb24gb25seSBvbmNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBSRURJUFMuZXZlbnQucmVtb3ZlKHNjYS5kaXYsICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7XHJcbiAgICAgICAgICAgICAgYXV0b1Njcm9sbFgoc2NhLmRpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnggPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBlZGdlLmRpdi55ID0gYm91bmQgLSAoc2NhLm1pZHN0WSAgPiBZID8gWSAtIG9iak1hcmdpblswXSAtIHNjYS5vZmZzZXRbMF0gOiBzY2Eub2Zmc2V0WzJdIC0gWSAtIG9iak1hcmdpblsyXSk7ICAgLy8gY2FsY3VsYXRlIHZlcnRpY2FsbHkgY3Jvc3NlZCBwYWdlIGJvdW5kXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChlZGdlLmRpdi55ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kIHRoZW4gc2V0IHNjcm9sbCBkaXJlY3Rpb24gYW5kIGNhbGwgYXV0byBzY3JvbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZGl2LnkgPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2hlbiBvYmplY3QgaXMgb25seSBoYWxmIHZpc2libGUgKHBhZ2UgaXMgc2Nyb2xsZWQgb24gdGhhdCBvYmplY3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBlZGdlLmRpdi55ID0gYm91bmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnkgKj0gWSA8IHNjYS5taWRzdFkgPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvbjogbmVnYXRpdmUgLSB1cCwgcG9zaXRpdmUgLSBkb3duXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZWRnZS5mbGFnLnkrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgYW5kIGNhbGwgYXV0b1Njcm9sbFkgZnVuY3Rpb24gb25seSBvbmNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBSRURJUFMuZXZlbnQucmVtb3ZlKHNjYS5kaXYsICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7XHJcbiAgICAgICAgICAgICAgYXV0b1Njcm9sbFkoc2NhLmRpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnkgPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnJlYWsgdGhlIGxvb3AgKGNoZWNraW5nIGZvciBvdGhlciBzY3JvbGxhYmxlIGNvbnRhaW5lcnMgaXMgbm90IG5lZWRlZClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIChJIG1lYW4gZHJhZ2dlZCBvYmplY3QgaXNuJ3QgaW5zaWRlIGFueSBvZiBzY3JvbGxhYmxlIGNvbnRhaW5lcikgcmVzZXQgY3Jvc3NlZCBlZGdlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWRnZS5kaXYueCA9IGVkZ2UuZGl2LnkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBzdG9wIGFsbCBwcm9wYWdhdGlvbiBvZiB0aGUgZXZlbnQgaW4gdGhlIGJ1YmJsaW5nIHBoYXNlLiAgKHNhdmUgc3lzdGVtIHJlc291cmNlcyBieSB0dXJuaW5nIG9mZiBldmVudCBidWJibGluZyAvIHByb3BhZ2F0aW9uKVxyXG4gICAgZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICBpZiAoZXZ0LnN0b3BQcm9wYWdhdGlvbikgXHJcbiAgICB7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgKGZyb20gaGFuZGxlck9uTW91c2VNb3ZlLCBhdXRvU2Nyb2xsWCwgYXV0b1Njcm9sbFkpIGluIGNhc2Ugb2YgY2hhbmdlIG9mIGN1cnJlbnQgdGFibGUgY2VsbC5cclxuICAvLyBXaGVuIGNoYW5nZSBoYXBwZW5zLCB0aGVuIHJldHVybiBiYWNrZ3JvdW5kIGNvbG9yIHRvIG9sZCBwb3NpdGlvbiwgaGlnaGxpZ2h0IG5ldyBwb3NpdGlvbiwgY2FsY3VsYXRlIGNlbGwgYm91bmRhcmllcyBhbmQgY2FsbCBldmVudC5jaGFuZ2VkLlxyXG4gIGNlbGxDaGFuZ2VkID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgaWYgKChyb3cgIT09IHJvd19vbGQgfHwgY2VsbCAhPT0gY2VsbF9vbGQpKSBcclxuICAgIHtcclxuICAgICAgaWYgKHJvd19vbGQgIT09IG51bGwgJiYgY2VsbF9vbGQgIT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNlbGwgYmFja2dyb3VuZCBjb2xvciB0byB0aGUgcHJldmlvdXMgY2VsbFxyXG4gICAgICB7XHJcbiAgICAgICAgc2V0VGRTdHlsZShyb3dfb2xkLCBiZ1N0eWxlT2xkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIGZvciBwcmV2aW91cyB0YWJsZSByb3dcclxuICAgICAgICBSRURJUFMuZHJhZy50ZC5wcmV2aW91cyA9IHRkLnByZXZpb3VzID0gdGFibGUucm93c1tyb3dfb2xkXS5jZWxsc1tjZWxsX29sZF07ICAgICAgLy8gZGVmaW5lIHByZXZpb3VzIHRhYmxlIGNlbGxcclxuICAgICAgICBSRURJUFMuZHJhZy50ZC5jdXJyZW50ID0gdGQuY3VycmVudCA9IHRhYmxlLnJvd3Nbcm93XS5jZWxsc1tjZWxsXTsgICAgICAgICAgICAgICAgLy8gZGVmaW5lIGN1cnJlbnQgdGFibGUgY2VsbFxyXG5cclxuICAgICAgICBpZiAocm93ICE9PSByb3dfb2xkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRhYmxlIG9yIHJvdyBzaG91bGQgY2hhbmdlIChjaGFuZ2luZyBjZWxsIGluIHRoZSBzYW1lIHJvdyB3aWxsIGJlIGlnbm9yZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Q2hhbmdlZCh0ZC5jdXJyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNldFBvc2l0aW9uKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gSW4gaW5pdGlhbGl6YXRpb24gcGhhc2UsIHRoaXMgbWV0aG9kIGlzIGF0dGFjaGVkIGFzIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIgZm9yIHdpbmRvdy4gIEl0IGFsc28gY2FsY3VsYXRlcyB3aW5kb3cgd2lkdGggYW5kIHdpbmRvdyBoZWlnaHQuIFJlc3VsdCBpcyBzYXZlZCBpbiB2YXJpYWJsZXMgc2NyZWVuLndpZHRoIGFuZCBzY3JlZW4uaGVpZ2h0IHZpc2libGUgaW5zaWRlIFJFRElQUy5kcmFnIHByaXZhdGUgc2NvcGUuXHJcbiAgaGFuZGxlck9uUmVzaXplID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgc2NyZWVuLndpZHRoICA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgc2NyZWVuLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIFxyXG4gICAgc2Nyb2xsRGF0YS53aWR0aCAgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg7ICAgICAvLyBzZXQgc2Nyb2xsIHNpemUgKG9ucmVzaXplLCBvbmxvYWQgYW5kIG9ubW91c2V1cCBldmVudClcclxuICAgIHNjcm9sbERhdGEuaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodDtcclxuICAgIFxyXG4gICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgY29sdW1zIGFuZCByb3dzIG9mZnNldCAoY2VsbHMgZGltZW5zaW9ucylcclxuICB9O1xyXG5cclxuICAvLyBNZXRob2Qgc2V0cyBjdXJyZW50IHJvdyBhbmQgY2VsbC4gIEN1cnJlbnQgY2VsbCBwb3NpdGlvbiBpcyBiYXNlZCBvbiBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyIGFuZCBjYWxjdWxhdGVkIGdyaWQgb2YgdGFibGVzIGluc2lkZSBkcmFnIGNvbnRhaW5lci5cclxuICAvLyBSb3dzIHdpdGggZGlzcGxheT0nbm9uZScgYXJlIG5vdCBjb250YWluZWQgaW4gcm93X29mZnNldCBhcnJheSBzbyByb3cgYm91bmRzIGNhbGN1bGF0aW9uIHNob3VsZCB0YWtlIGNhcmUgYWJvdXQgc3BhcnNlIGFycmF5cyAoc2luY2UgdmVyc2lvbiA0LjMuNikuXHJcbiAgc2V0VGFibGVSb3dDb2x1bW4gPSBmdW5jdGlvbiAoKVxyXG4gIHtcclxuICAgIHZhciBwcmV2aW91czsgICAgICAgLy8gc2V0IHByZXZpb3VzIHBvc2l0aW9uIChjdXJyZW50IGNlbGwgd2lsbCBub3QgYmUgaGlnaGxpZ2h0ZWQpXHJcbiAgICB2YXIgcm93X29mZnNldDsgICAgIC8vIHJvdyBvZmZzZXRzIGZvciB0aGUgc2VsZWN0ZWQgdGFibGUgKHJvdyBib3ggYm91bmRzKVxyXG4gICAgdmFyIHJvd19mb3VuZDsgICAgICAvLyByZW1lbWJlciBmb3VuZCByb3dcclxuICAgIHZhciB0b3MgPSBbXTsgICAgICAgLy8gdGFibGUgb2Zmc2V0XHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgdmFyIGk7ICAgICAgICAgICAgICAvLyB1c2VkIGluIGxvY2FsIGxvb3BcclxuXHJcbiAgICBwcmV2aW91cyA9IGZ1bmN0aW9uICgpICAgIC8vIHNldCBwcmV2aW91cyBwb3NpdGlvbiAoY3VycmVudCBjZWxsIHdpbGwgbm90IGJlIGhpZ2hsaWdodGVkKVxyXG4gICAge1xyXG4gICAgICBpZiAocm93X29sZCAhPT0gbnVsbCAmJiBjZWxsX29sZCAhPT0gbnVsbClcclxuICAgICAge1xyXG4gICAgICAgIHJvdyA9IHJvd19vbGQ7XHJcbiAgICAgICAgY2VsbCA9IGNlbGxfb2xkO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFggPSBwb2ludGVyLng7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICBZID0gcG9pbnRlci55O1xyXG5cclxuICAgIHRvc1swXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMF07IC8vIHRvcFxyXG4gICAgdG9zWzFdID0gdGFibGUucmVkaXBzLm9mZnNldFsxXTsgLy8gcmlnaHRcclxuICAgIHRvc1syXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMl07IC8vIGJvdHRvbVxyXG4gICAgdG9zWzNdID0gdGFibGUucmVkaXBzLm9mZnNldFszXTsgLy8gbGVmdFxyXG5cclxuICAgIC8vIGlmIHRhYmxlIGJlbG9uZ3MgdG8gdGhlIHNjcm9sbGFibGUgY29udGFpbmVyIHRoZW4gc2V0IHNjcm9sbGFibGUgY29udGFpbmVyIG9mZnNldCBpZiBuZWVkZWQgaW4gY2FzZSB3aGVuIHNvbWUgcGFydHMgb2YgdGFibGUgYXJlIGhpZGRlbiAoZm9yIGV4YW1wbGUgd2l0aCBcIm92ZXJmbG93OiBhdXRvXCIpXHJcbiAgICBpZiAodGFibGUuc2NhICE9PSB1bmRlZmluZWQpXHJcbiAgICB7XHJcbiAgICAgIHRvc1swXSA9IHRvc1swXSA+IHRhYmxlLnNjYS5vZmZzZXRbMF0gPyB0b3NbMF0gOiB0YWJsZS5zY2Eub2Zmc2V0WzBdOyAvLyB0b3BcclxuICAgICAgdG9zWzFdID0gdG9zWzFdIDwgdGFibGUuc2NhLm9mZnNldFsxXSA/IHRvc1sxXSA6IHRhYmxlLnNjYS5vZmZzZXRbMV07IC8vIHJpZ2h0XHJcbiAgICAgIHRvc1syXSA9IHRvc1syXSA8IHRhYmxlLnNjYS5vZmZzZXRbMl0gPyB0b3NbMl0gOiB0YWJsZS5zY2Eub2Zmc2V0WzJdOyAvLyBib3R0b21cclxuICAgICAgdG9zWzNdID0gdG9zWzNdID4gdGFibGUuc2NhLm9mZnNldFszXSA/IHRvc1szXSA6IHRhYmxlLnNjYS5vZmZzZXRbM107IC8vIGxlZnRcclxuICAgIH1cclxuXHJcbiAgICBpZiAodG9zWzNdIDwgWCAmJiBYIDwgdG9zWzFdICYmIHRvc1swXSA8IFkgJiYgWSA8IHRvc1syXSkgICAgICAgICAgICAgICAgIC8vIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIHRhYmxlIChvciBzY3JvbGxhYmxlIGNvbnRhaW5lcilcclxuICAgIHtcclxuICAgICAgcm93X29mZnNldCA9IHRhYmxlLnJlZGlwcy5yb3dfb2Zmc2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIHJvdyBvZmZzZXRzIGZvciB0aGUgc2VsZWN0ZWQgdGFibGUgKHJvdyBib3ggYm91bmRzKVxyXG5cclxuICAgICAgZm9yIChyb3cgPSAwOyByb3cgPCByb3dfb2Zmc2V0Lmxlbmd0aCAtIDE7IHJvdysrKSAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCB0aGUgY3VycmVudCByb3cgKGxvb3Agc2tpcHMgaGlkZGVuIHJvd3MpXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAocm93X29mZnNldFtyb3ddID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGRvZXNuJ3QgZXhpc3QgKGluIGNhc2Ugb2YgaGlkZGVuIHJvdykgLSBza2lwIGl0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdXJyZW50Q2VsbFswXSA9IHJvd19vZmZzZXRbcm93XVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRvcCBhbmQgYm90dG9tIGNlbGwgYm91bmRzXHJcblxyXG4gICAgICAgIGlmIChyb3dfb2Zmc2V0W3JvdyArIDFdICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYm90dG9tIGNlbGwgYm91bmQgKGlmIGlzIHBvc3NpYmxlKSAtIGhpZGRlbiByb3cgZG9lc24ndCBleGlzdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGN1cnJlbnRDZWxsWzJdID0gcm93X29mZnNldFtyb3cgKyAxXVswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhpZGRlbiByb3cgKGxpa2Ugc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZvciAoaSA9IHJvdyArIDI7IGkgPCByb3dfb2Zmc2V0Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZvciBuZXh0IHZpc2libGUgcm93XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChyb3dfb2Zmc2V0W2ldICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZpc2libGUgcm93IGZvdW5kXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IHJvd19vZmZzZXRbaV1bMF07XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChZIDw9IGN1cnJlbnRDZWxsWzJdKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b3AgYm91bmQgb2YgdGhlIG5leHQgcm93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByb3dfZm91bmQgPSByb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBmb3VuZCByb3dcclxuXHJcbiAgICAgIGlmIChyb3cgPT09IHJvd19vZmZzZXQubGVuZ3RoIC0gMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGxvb3AgZXhjZWVkcywgdGhlbiBzZXQgYm91bmRzIGZvciB0aGUgbGFzdCByb3cgKG9mZnNldCBmb3IgdGhlIGxhc3Qgcm93IGRvZXNuJ3Qgd29yayBpbiBJRTgsIHNvIHVzZSB0YWJsZSBib3VuZHMpXHJcbiAgICAgIHtcclxuICAgICAgICBjdXJyZW50Q2VsbFswXSA9IHJvd19vZmZzZXRbcm93XVswXTtcclxuICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMl07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNlbGwgPSAwO1xyXG5cclxuICAgICAgaWYgKHJvdyA8IDAgfHwgY2VsbCA8IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNlbGwgPCAwIG9yIHJvdyA8IDAgdGhlbiB1c2UgbGFzdCBwb3NzaWJsZSBsb2NhdGlvblxyXG4gICAgICB7XHJcbiAgICAgICAgcHJldmlvdXMoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChyb3cgIT09IHJvd19mb3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBjZWxsIGZvdW5kIGJ1dCBpZiBjdXJyZW50IHJvdyBkaWZmZXIgZnJvbSBwcmV2aW91c2x5IGZvdW5kIHJvdyAodGhhbmtzIHRvbyB3aGlsZSBsb29wIHdpdGggcm93LS0pIHRoZW4gdGVzdCBpZiBZIGlzIGluc2lkZSBjdXJyZW50IGNlbGwsICh0aGlzIHNob3VsZCBwcmV2ZW50IGNhc2Ugd2hlcmUgVEQgYm9yZGVyID4gMXB4IGFuZCB1cHBlciBjb2xzcGFuZWQgcm93IGxpa2UgaW4gZXhhbXBsZTE1KSBsb2dpYyB3aWxsIGVuZCBpbiB1cHBlciBjb2xzcGFuZWQgcm93IHdoaWxlIGN1cnJlbnQgcm93IHdpbGwgbm90IG1vdmUgLSBhbmQgdGhhdCB3YXMgd3JvbmdcclxuICAgICAge1xyXG5cclxuICAgICAgICBjdXJyZW50Q2VsbFswXSA9IHJvd19vZmZzZXRbcm93XVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY2FsY3VsYXRlIHRvcCBhbmQgYm90dG9tIHJvdyBvZmZzZXQgKGFnYWluKVxyXG4gICAgICAgIGN1cnJlbnRDZWxsWzJdID0gY3VycmVudENlbGxbMF0gKyB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF0ub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAoWSA8IGN1cnJlbnRDZWxsWzBdIHx8IFkgPiBjdXJyZW50Q2VsbFsyXSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIFkgaXMgb3V0c2lkZSBvZiB0aGUgY3VycmVudCByb3csIHJldHVybiBwcmV2aW91cyBsb2NhdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByZXZpb3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIHNldHMgYmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIGN1cnJlbnQgdGFibGUgY2VsbCBhbmQgcmVtZW1iZXJzIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBiYWNrZ3JvdW5kIGNvbG9yLiAgSXQgaXMgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlIGFuZCBjZWxsQ2hhbmdlZC5cclxuICBzZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgaWYgKHJvdyAhPT0gbnVsbCAmJiBjZWxsICE9PSBudWxsKSAgICAgIC8vIGluIGNhc2UgaWYgb3JkaW5hcnkgZWxlbWVudCBpcyBwbGFjZWQgaW5zaWRlICdkZW55JyB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIGJnU3R5bGVPbGQgPSBnZXRUZFN0eWxlKHJvdyk7ICAgICAgICAgLy8gcmVtZW1iZXIgYmFja2dyb3VuZCBjb2xvciBiZWZvcmUgc2V0dGluZyB0aGUgbmV3IGJhY2tncm91bmQgY29sb3JcclxuICAgICAgc2V0VGRTdHlsZShyb3cpOyAgICAgICAgICAgICAgICAgICAgICAvLyBoaWdobGlnaHQgY3VycmVudCBURCAvIFRSIChjb2xvcnMgYW5kIHN0eWxlcyBhcmUgcmVhZCBmcm9tIHB1YmxpYyBwcm9wZXJ0eSBcImhvdmVyXCJcclxuICAgICAgcm93X29sZCA9IHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBjdXJyZW50IHBvc2l0aW9uIChmb3Igcm93IGFuZCBjZWxsKVxyXG4gICAgICBjZWxsX29sZCA9IGNlbGw7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHNldHMgdGFibGUgY2VsbChzKSBiYWNrZ3JvdW5kIHN0eWxlcyAoYmFja2dyb3VuZCBjb2xvcnMgYW5kIGJvcmRlciBzdHlsZXMpLlxyXG4gICAqIElmIHRkU3R5bGUgaXMgdW5kZWZpbmVkIHRoZW4gY3VycmVudCB0ZC90ciB3aWxsIGJlIGhpZ2hsaWdodGVkIGZyb20gcHVibGljIHByb3BlcnR5IGhvdmVyLmNvbG9yX3RkLCBob3Zlci5jb2xvcl90ciAuLi5cclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHJpIFJvdyBpbmRleC5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gdCBPYmplY3QgY29udGFpbnMgYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcyAoXCJ0XCIgaXMgVEQgc3R5bGUgb2JqZWN0IGlzIHByZXBhcmVkIGluIGdldFRkU3R5bGUgbWV0aG9kKS5cclxuICAgKi9cclxuICBzZXRUZFN0eWxlID0gZnVuY3Rpb24gKHJpLCB0KSBcclxuICB7XHJcbiAgICB2YXIgdHIsIHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgYW5kIHRkLnN0eWxlXHJcblxyXG4gICAgdHIgPSB0YWJsZS5yb3dzW3JpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgdGFibGUgcm93XHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHIuY2VsbHMubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29sb3JzIHRvIHRhYmxlIGNlbGxzIChyZXNwZWN0aXZlbHkpIG9yIGZpcnN0IGNvbG9yIHRvIGFsbCBjZWxscyAoaW4gY2FzZSBvZiBzZXR0aW5ncyBob3ZlciB0byB0aGUgcm93KVxyXG4gICAge1xyXG4gICAgICBzID0gdHIuY2VsbHNbaV0uc3R5bGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gY3VycmVudCBURCBzdHlsZVxyXG4gICAgICBzLmJhY2tncm91bmRDb2xvciA9ICh0ID09PSB1bmRlZmluZWQpID8gUkVESVBTLmRyYWcuaG92ZXIuY29sb3JUciA6IHQuY29sb3JbaV0udG9TdHJpbmcoKTsgIC8vIFRSIGJhY2tncm91bmQgY29sb3IgLSB0ZFN0eWxlIGlzIHVuZGVmaW5lZCB0aGVuIGhpZ2hsaWdodCBURCBvdGhlcndpc2UgcmV0dXJuIHByZXZpb3VzIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgXHJcbiAgICAgIGlmIChSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUciAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVFIgYm9yZGVyIC0gaWYgaG92ZXIuYm9yZGVyVGQgaXMgc2V0IHRoZW4gdGFrZSBjYXJlIG9mIGJvcmRlciBzdHlsZVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJvcmRlciAoaGlnaGxpZ2h0KSAtIHNvdXJjZSByb3cgd2lsbCBub3QgaGF2ZSBhbnkgYm9yZGVyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKHJvdyA8IHJvd19zb3VyY2UpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBpcyBtb3ZlZCBhYm92ZSBzb3VyY2Ugcm93IGluIGN1cnJlbnQgdGFibGVcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcy5ib3JkZXJUb3AgPSBSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaXMgbW92ZWQgYmVsb3cgc291cmNlIHJvdyBpbiBjdXJyZW50IHRhYmxlXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHMuYm9yZGVyQm90dG9tID0gUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBwcmV2aW91cyBzdGF0ZSBib3JkZXJUb3AgYW5kIGJvcmRlckJvdHRvbSAoZXhpdCBmcm9tIFREKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHMuYm9yZGVyVG9wV2lkdGggPSB0LnRvcFtpXVswXTtcclxuICAgICAgICAgIHMuYm9yZGVyVG9wU3R5bGUgPSB0LnRvcFtpXVsxXTtcclxuICAgICAgICAgIHMuYm9yZGVyVG9wQ29sb3IgPSB0LnRvcFtpXVsyXTtcclxuICAgICAgICAgIHMuYm9yZGVyQm90dG9tV2lkdGggPSB0LmJvdHRvbVtpXVswXTtcclxuICAgICAgICAgIHMuYm9yZGVyQm90dG9tU3R5bGUgPSB0LmJvdHRvbVtpXVsxXTtcclxuICAgICAgICAgIHMuYm9yZGVyQm90dG9tQ29sb3IgPSB0LmJvdHRvbVtpXVsyXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLy8gTWV0aG9kIHJldHVybnMgYmFja2dyb3VuZCBhbmQgYm9yZGVyIHN0eWxlcyBhcyBvYmplY3QgZm9yIHRoZSBpbnB1dCBwYXJhbWV0ZXIgcm93IGluZGV4IChyaSkuICBAcmV0dXJuIHtPYmplY3R9IE9iamVjdCBjb250YWluaW5nIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgKGZvciB0aGUgcm93KS5cclxuICBnZXRUZFN0eWxlID0gZnVuY3Rpb24gKHJpKSBcclxuICB7XHJcbiAgICB2YXIgdHIsIGM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgYW5kIHRkIHJlZmVyZW5jZSAgIFxyXG4gICAgdmFyIHQgPSB7Y29sb3I6IFtdLCB0b3A6IFtdLCByaWdodDogW10sIGJvdHRvbTogW10sIGxlZnQ6IFtdfTsgICAgICAgIC8vIGRlZmluZSBURCBzdHlsZSBvYmplY3Qgd2l0aCBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzOiB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnRcclxuICAgICAgXHJcbiAgICB2YXIgYm9yZGVyID0gZnVuY3Rpb24gKGMsIG5hbWUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2QgZ2V0cyBib3JkZXIgc3R5bGVzOiB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRcclxuICAgIHtcclxuICAgICAgdmFyIHdpZHRoID0gJ2JvcmRlcicgKyBuYW1lICsgJ1dpZHRoJywgc3R5bGUgPSAnYm9yZGVyJyArIG5hbWUgKyAnU3R5bGUnLCBjb2xvciA9ICdib3JkZXInICsgbmFtZSArICdDb2xvcic7XHJcbiAgICAgIHJldHVybiBbZ2V0U3R5bGUoYywgd2lkdGgpLCBnZXRTdHlsZShjLCBzdHlsZSksIGdldFN0eWxlKGMsIGNvbG9yKV07XHJcbiAgICB9O1xyXG5cclxuICAgIHRyID0gdGFibGUucm93c1tyaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHRhYmxlIHJvd1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgc3R5bGVzIGZvciBlYWNoIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgYyA9IHRyLmNlbGxzW2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgVEQgcmVmZXJlbmNlXHJcbiAgICAgIHQuY29sb3JbaV0gPSBjLnN0eWxlLmJhY2tncm91bmRDb2xvcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICBcclxuICAgICAgaWYgKFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciB0b3AgYW5kIGJvdHRvbSBURCBib3JkZXIgc3R5bGVzIGlmIGhvdmVyLmJvcmRlclRyIHByb3BlcnR5IGlzIHNldFxyXG4gICAgICB7XHJcbiAgICAgICAgdC50b3BbaV0gPSBib3JkZXIoYywgJ1RvcCcpO1xyXG4gICAgICAgIHQuYm90dG9tW2ldID0gYm9yZGVyKGMsICdCb3R0b20nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0O1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCByZXR1cm5zIGFycmF5IG9mIGVsZW1lbnQgYm91bmRzIChvZmZzZXQpIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdCAobmVlZGVkIGZvciB0YWJsZSBncmlkIGNhbGN1bGF0aW9uKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBib3ggSFRNTEVsZW1lbnQgZm9yIGJveCBtZXRyaWNzLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcG9zaXRpb25dIEhUTUxFbGVtZW50IFwicG9zaXRpb25cIiBzdHlsZS4gRWxlbWVudHMgd2l0aCBzdHlsZSBcImZpeGVkXCIgd2lsbCBub3QgaGF2ZSBpbmNsdWRlZCBwYWdlIHNjcm9sbCBvZmZzZXQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYm94X3Njcm9sbF0gSWYgc2V0IHRvIFwiZmFsc2VcIiB0aGVuIGVsZW1lbnQgc2Nyb2xsIG9mZnNldCB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbiBjYWxjdWxhdGlvbiAoZGVmYXVsdCBpcyBcInRydWVcIikuXHJcbiAgICogQHJldHVybiB7QXJyYXl9IEJveCBvZmZzZXQgYXJyYXk6IFsgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0IF1cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGNhbGN1bGF0ZSBib3ggb2Zmc2V0IGZvciB0aGUgZGl2IGlkPVwicmVkaXBzLWRyYWdcIlxyXG4gICAqIGRpdmJveCA9IGJveE9mZnNldChkcmFnQ29udGFpbmVyKTtcclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGluY2x1ZGUgc2Nyb2xsIHBvc2l0aW9uIGluIG9mZnNldFxyXG4gICAqIG9mZnNldCA9IGJveE9mZnNldChyb3dPYmosICdmaXhlZCcpO1xyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gZ2V0IERJViBvZmZzZXQgd2l0aCBvciB3aXRob3V0IFwicGFnZSBzY3JvbGxcIiBhbmQgZXhjbHVkZWQgZWxlbWVudCBzY3JvbGwgb2Zmc2V0XHJcbiAgICogY2IgPSBib3hPZmZzZXQoZGl2LCBwb3NpdGlvbiwgZmFsc2UpO1xyXG4gICAqL1xyXG4gIGJveE9mZnNldCA9IGZ1bmN0aW9uIChib3gsIHBvc2l0aW9uLCBib3hfc2Nyb2xsKVxyXG4gIHtcclxuICAgIHZhciBvTGVmdCA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9mZnNldCBsZWZ0ICh0YWtlIGNhcmUgb2YgaG9yaXpvbnRhbCBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB2YXIgb1RvcCAgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgdG9wICh0YWtlIGNhcmUgb2QgdmVydGljYWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgdmFyIGJveE9sZCA9IGJveDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBib3ggb2JqZWN0XHJcblxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZV9wb3NpdGlvbiBpcyB1bmRlZmluZWQsICcnIG9yICdwYWdlX3Njcm9sbCcgdGhlbiBpbmNsdWRlIHBhZ2Ugc2Nyb2xsIG9mZnNldCwgd2luZG93U2Nyb2xsUG9zaXRpb24gaXMgc2V0IGluIGNhbGN1bGF0ZUNlbGxzKCksIGNhbGN1bGF0ZUNlbGxzKCkgaXMgY2FsbGVkIG9uIHdpbmRvdyBzY3JvbGwgZXZlbnRcclxuICAgIHtcclxuICAgICAgb0xlZnQgPSAwIC0gd2luZG93U2Nyb2xsUG9zaXRpb25bMF07ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9mZnNldCBsZWZ0ICh0YWtlIGNhcmUgb2YgaG9yaXpvbnRhbCBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICAgIG9Ub3AgID0gMCAtIHdpbmRvd1Njcm9sbFBvc2l0aW9uWzFdOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgdG9wICh0YWtlIGNhcmUgb2QgdmVydGljYWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChib3hfc2Nyb2xsID09PSB1bmRlZmluZWQgfHwgYm94X3Njcm9sbCA9PT0gdHJ1ZSkgICAgICAgICAgLy8gY2xpbWIgdXAgdGhyb3VnaCBET00gaGllcmFyY2h5IChnZXRTY3JvbGxQb3NpdGlvbigpIHRha2VzIGNhcmUgYWJvdXQgcGFnZSBzY3JvbGwgcG9zaXRpb25zKVxyXG4gICAge1xyXG4gICAgICBkb1xyXG4gICAgICB7XHJcbiAgICAgICAgb0xlZnQgKz0gYm94Lm9mZnNldExlZnQgLSBib3guc2Nyb2xsTGVmdDtcclxuICAgICAgICBvVG9wICs9IGJveC5vZmZzZXRUb3AgLSBib3guc2Nyb2xsVG9wO1xyXG4gICAgICAgIGJveCA9IGJveC5vZmZzZXRQYXJlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgd2hpbGUgKGJveCAmJiBib3gubm9kZU5hbWUgIT09ICdCT0RZJyk7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsaW1iIHVwIHRvIHRoZSBCT0RZIGVsZW1lbnQgYnV0IHdpdGhvdXQgc2Nyb2xsIHBvc2l0aW9uc1xyXG4gICAge1xyXG4gICAgICBkb1xyXG4gICAgICB7XHJcbiAgICAgICAgb0xlZnQgKz0gYm94Lm9mZnNldExlZnQ7XHJcbiAgICAgICAgb1RvcCArPSBib3gub2Zmc2V0VG9wO1xyXG4gICAgICAgIGJveCA9IGJveC5vZmZzZXRQYXJlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgd2hpbGUgKGJveCAmJiBib3gubm9kZU5hbWUgIT09ICdCT0RZJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gICAgICAgIHRvcCAgICAgICAgICAgICAgICAgcmlnaHQsICAgICAgICAgICAgICAgICAgICAgYm90dG9tICAgICAgICAgICBsZWZ0XHJcbiAgICByZXR1cm4gWyBvVG9wLCBvTGVmdCArIGJveE9sZC5vZmZzZXRXaWR0aCwgb1RvcCArIGJveE9sZC5vZmZzZXRIZWlnaHQsIG9MZWZ0IF07XHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIGlzIGNhbGxlZCBpbiBldmVyeSBwb3NzaWJsZSBjYXNlIHdoZW4gcG9zaXRpb24gb3Igc2l6ZSBvZiB0YWJsZSBncmlkIGNvdWxkIGNoYW5nZSBsaWtlOiBwYWdlIHNjcm9sbGluZywgZWxlbWVudCBkcm9wcGVkIHRvIHRoZSB0YWJsZSBjZWxsLCBlbGVtZW50IHN0YXJ0IGRyYWdnaW5nIGFuZCBzbyBvbi5cclxuICAvLyBJdCBjYWxjdWxhdGVzIHRhYmxlIHJvdyBvZmZzZXRzICh0YWJsZSBncmlkKSBhbmQgc2F2ZXMgdG8gdGhlIFwidGFibGVzXCIgYXJyYXkuXHJcbiAgLy8gVGFibGUgcm93cyB3aXRoIHN0eWxlIGRpc3BsYXk9J25vbmUnIGFyZSBza2lwcGVkLlxyXG4gIGNhbGN1bGF0ZUNlbGxzID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgdmFyIHJvd19vZmZzZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgYm94XHJcbiAgICB2YXIgcG9zaXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgKHRhYmxlIG9yIHRhYmxlIGNvbnRhaW5lcikgaGFzIHBvc2l0aW9uOmZpeGVkIHRoZW4gXCJwYWdlIHNjcm9sbFwiIG9mZnNldCBzaG91bGQgbm90IGJlIGFkZGVkXHJcbiAgICB2YXIgY2I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJveCBvZmZzZXQgZm9yIGNvbnRhaW5lciBib3ggKGNiKVxyXG5cclxuICAgIHdpbmRvd1Njcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlQ2VsbHMoKSBpcyBjYWxsZWQgb24gd2luZG93IHNjcm9sbCBldmVudCBzbyBoZXJlIGlzIHBlcmZlY3QgcGxhY2UgdG8gcmVmcmVzaCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICByb3dfb2Zmc2V0ID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgcm93X29mZnNldCBhcnJheVxyXG4gICAgXHJcbiAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLCAncG9zaXRpb24nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0YWJsZSBzdHlsZSBwb3NpdGlvbiAodG8gZXhjbHVkZSBcInBhZ2Ugc2Nyb2xsXCIgb2Zmc2V0IGZyb20gY2FsY3VsYXRpb24gaWYgbmVlZGVkKVxyXG4gICAgXHJcbiAgICBpZiAocG9zaXRpb24gIT09ICdmaXhlZCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRhYmxlIGRvZXNuJ3QgaGF2ZSBzdHlsZSBwb3NpdGlvbjpmaXhlZCB0aGVuIHRhYmxlIGNvbnRhaW5lciBzaG91bGQgYmUgdGVzdGVkXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUucGFyZW50Tm9kZSwgJ3Bvc2l0aW9uJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSB0YWJsZS5yb3dzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSAgICAgICAgICAgICAgICAgICAgLy8gYmFja3dhcmQgbG9vcCBoYXMgYmV0dGVyIHBlcmZvbWFuY2VcclxuICAgIHtcclxuICAgICAgaWYgKHRhYmxlLnJvd3NbaV0uc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKSAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHJvd3MgdG8gdGhlIG9mZnNldCBhcnJheSBpZiByb3cgaXMgbm90IGhpZGRlblxyXG4gICAgICB7XHJcbiAgICAgICAgcm93X29mZnNldFtpXSA9IGJveE9mZnNldCh0YWJsZS5yb3dzW2ldLCBwb3NpdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgdGFibGUucmVkaXBzLm9mZnNldCA9IGJveE9mZnNldCh0YWJsZSwgcG9zaXRpb24pOyAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHRhYmxlIGluZm9ybWF0aW9ucyAodGFibGUgb2Zmc2V0IGFuZCByb3cgb2Zmc2V0cylcclxuICAgIHRhYmxlLnJlZGlwcy5yb3dfb2Zmc2V0ID0gcm93X29mZnNldDtcclxuXHJcbiAgICBkaXZCb3ggPSBib3hPZmZzZXQoZHJhZ0NvbnRhaW5lcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBib3ggb2Zmc2V0IGZvciB0aGUgZGl2IGlkPXJlZGlwcy1kcmFnXHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2Nyb2xsRGF0YS5jb250YWluZXIubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhcyBpZiBuZWVkZWRcclxuICAgIHtcclxuICAgICAgcG9zaXRpb24gPSBnZXRTdHlsZShzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5kaXYsICdwb3NpdGlvbicpOyAgICAgLy8gc2V0IGNvbnRhaW5lciBib3ggc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgcGFnZSBzY3JvbGwgb2Zmc2V0IGZyb20gY2FsY3VsYXRpb24gaWYgbmVlZGVkKVxyXG4gICAgICBjYiA9IGJveE9mZnNldChzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5kaXYsIHBvc2l0aW9uLCBmYWxzZSk7ICAgICAvLyBnZXQgRElWIGNvbnRhaW5lciBvZmZzZXQgd2l0aCBvciB3aXRob3V0IFwicGFnZSBzY3JvbGxcIiBhbmQgZXhjbHVkZWQgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBjb250ZW50XHJcbiAgICAgIFxyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5vZmZzZXQgPSBjYjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzXHJcbiAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2ldLm1pZHN0WCA9IChjYlsxXSArIGNiWzNdKSAvIDI7XHJcbiAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2ldLm1pZHN0WSA9IChjYlswXSArIGNiWzJdKSAvIDI7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIHJldHVybnMgY3VycmVudCBwYWdlIHNjcm9sbCB2YWx1ZXMgYXMgYXJyYXkgKFggYW5kIFkgYXhpcykuXHJcbiAgZ2V0U2Nyb2xsUG9zaXRpb24gPSBmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICB2YXIgc2Nyb2xsWSA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgLy92YXIgc2Nyb2xsWCA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcclxuICAgIHZhciBzY3JvbGxYID0gMDtcclxuXHJcbiAgICByZXR1cm4gWyBzY3JvbGxYLCBzY3JvbGxZIF07XHJcbiAgfTtcclxuXHJcbiAgLy8gSG9yaXpvbnRhbCBhdXRvIHNjcm9sbCBtZXRob2QuICBAcGFyYW0ge0hUTUxFbGVtZW50fSBzbyBXaW5kb3cgb3IgRElWIGVsZW1lbnQgKHNvIC0gc2Nyb2xsIG9iamVjdCkuXHJcbiAgYXV0b1Njcm9sbFggPSBmdW5jdGlvbiAoc28pIFxyXG4gIHtcclxuICAgIHZhciBwb3MsICAgICAgLy8gbGVmdCBzdHlsZSBwb3NpdGlvblxyXG4gICAgICBvbGQsICAgICAgLy8gb2xkIHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKG5lZWRlZCBmb3Igd2luZG93IHNjcm9sbGluZylcclxuICAgICAgc2Nyb2xsUG9zaXRpb24sIC8vIGRlZmluZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBtYXhzcCwgICAgICAvLyBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBlZGdlQ3Jvc3NlZCwgIC8vIGNyb3NzZWQgZWRnZSBmb3Igd2luZG93IGFuZCBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICBYID0gcG9pbnRlci54LCAgLy8gZGVmaW5lIHBvaW50ZXIgWCBwb3NpdGlvblxyXG4gICAgICBZID0gcG9pbnRlci55OyAgLy8gZGVmaW5lIHBvaW50ZXIgWSBwb3NpdGlvblxyXG4gICAgLy8gaWYgbW91c2V1cCB0aGVuIHN0b3AgaGFuZGxpbmcgXCJjdXJyZW50IGNlbGxcIlxyXG4gICAgaWYgKGVkZ2UuZmxhZy54ID4gMCkge1xyXG4gICAgICAvLyBjYWxjdWxhdGUgY2VsbCAoYXV0b3Njcm9sbCBpcyB3b3JraW5nKVxyXG4gICAgICBjYWxjdWxhdGVDZWxscygpO1xyXG4gICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSByb3cgYW5kIHRhYmxlIGNlbGxcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTtcclxuICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCBpZiBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSBESVYgaWQ9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICAgIGlmIChYIDwgZGl2Qm94WzFdICYmIFggPiBkaXZCb3hbM10gJiYgWSA8IGRpdkJveFsyXSAmJiBZID4gZGl2Qm94WzBdKSB7XHJcbiAgICAgICAgY2VsbENoYW5nZWQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gc2F2ZSBzY3JvbGwgb2JqZWN0IHRvIHRoZSBnbG9iYWwgdmFyaWFibGUgZm9yIHRoZSBmaXJzdCBjYWxsIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlXHJcbiAgICAvLyByZWN1cnNpdmUgY2FsbHMgd2lsbCBub3QgZW50ZXIgdGhpcyBjb2RlIGFuZCByZWZlcmVuY2UgdG8gdGhlIHNjcm9sbERhdGEub2JqIHdpbGwgYmUgcHJlc2VydmVkXHJcbiAgICBpZiAodHlwZW9mKHNvKSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgc2Nyb2xsRGF0YS5vYmogPSBzbztcclxuICAgIH1cclxuICAgIC8vIHdpbmRvdyBhdXRvc2Nyb2xsIChkZWZpbmUgY3VycmVudCwgb2xkIGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gb2xkID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVswXTtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLndpZHRoIC0gc2NyZWVuLndpZHRoO1xyXG4gICAgICBlZGdlQ3Jvc3NlZCA9IGVkZ2UucGFnZS54O1xyXG4gICAgfVxyXG4gICAgLy8gc2Nyb2xsYWJsZSBjb250YWluZXIgKGRlZmluZSBjdXJyZW50IGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIGVsc2Uge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IHNjcm9sbERhdGEub2JqLnNjcm9sbExlZnQ7XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsV2lkdGggLSBzY3JvbGxEYXRhLm9iai5jbGllbnRXaWR0aDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLmRpdi54O1xyXG4gICAgfVxyXG4gICAgLy8gaWYgc2Nyb2xsaW5nIGlzIHBvc3NpYmxlXHJcbiAgICBpZiAoZWRnZS5mbGFnLnggPiAwICYmICgoZWRnZUNyb3NzZWQgPCAwICYmIHNjcm9sbFBvc2l0aW9uID4gMCkgfHwgKGVkZ2VDcm9zc2VkID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA8IG1heHNwKSkpIHtcclxuICAgICAgLy8gaWYgb2JqZWN0IGlzIHdpbmRvd1xyXG4gICAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykge1xyXG4gICAgICAgIC8vIHNjcm9sbCB3aW5kb3dcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoZWRnZUNyb3NzZWQsIDApO1xyXG4gICAgICAgIC8vIGdldCBuZXcgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAoYWZ0ZXIgc2Nyb2xsaW5nKVxyXG4gICAgICAgIC8vIGJlY2F1c2UgYXQgcGFnZSB0b3Agb3IgYm90dG9tIGVkZ2VZIGNhbiBiZSBiaWdnZXIgdGhlbiB0aGUgcmVzdCBvZiBzY3JvbGxpbmcgYXJlYVxyXG4gICAgICAgIC8vIGl0IHdpbGwgYmUgbmljZSB0byBrbm93IGhvdyBtdWNoIHdhcyB3aW5kb3cgc2Nyb2xsZWQgYWZ0ZXIgc2Nyb2xsQnkgY29tbWFuZFxyXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVswXTtcclxuICAgICAgICAvLyBnZXQgY3VycmVudCBvYmplY3QgdG9wIHN0eWxlXHJcbiAgICAgICAgcG9zID0gcGFyc2VJbnQob2JqLnN0eWxlLmxlZnQsIDEwKTtcclxuICAgICAgICBpZiAoaXNOYU4ocG9zKSkge1xyXG4gICAgICAgICAgcG9zID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gb3Igc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2Nyb2xsRGF0YS5vYmouc2Nyb2xsTGVmdCArPSBlZGdlQ3Jvc3NlZDtcclxuICAgICAgfVxyXG4gICAgICAvLyByZWN1cnNpdmUgYXV0b3Njcm9sbCBjYWxsXHJcbiAgICAgIHNldFRpbWVvdXQoYXV0b1Njcm9sbFgsIFJFRElQUy5kcmFnLnNjcm9sbC5zcGVlZCk7XHJcbiAgICB9XHJcbiAgICAvLyBhdXRvc2Nyb2xsIGlzIGVuZGVkOiBlbGVtZW50IGlzIG91dCBvZiB0aGUgcGFnZSBlZGdlIG9yIG1heGltdW0gcG9zaXRpb24gaXMgcmVhY2hlZCAobGVmdCBvciByaWdodClcclxuICAgIGVsc2Uge1xyXG4gICAgICAvLyByZXR1cm4gb25zY3JvbGwgZXZlbnQgaGFuZGxlciAodG8gd2luZG93IG9yIGRpdiBlbGVtZW50KVxyXG4gICAgICBSRURJUFMuZXZlbnQuYWRkKHNjcm9sbERhdGEub2JqLCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAvLyByZXNldCBhdXRvIHNjcm9sbCBmbGFnIFhcclxuICAgICAgZWRnZS5mbGFnLnggPSAwO1xyXG4gICAgICAvLyByZXNldCBjdXJyZW50IGNlbGwgcG9zaXRpb25cclxuICAgICAgY3VycmVudENlbGwgPSBbMCwgMCwgMCwgMF07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gVmVydGljYWwgYXV0byBzY3JvbGwgbWV0aG9kLiAgQHBhcmFtIHtIVE1MRWxlbWVudH0gc28gV2luZG93IG9yIERJViBlbGVtZW50IChzbyAtIHNjcm9sbCBvYmplY3QpLlxyXG4gIGF1dG9TY3JvbGxZID0gZnVuY3Rpb24gKHNvKSBcclxuICB7XHJcbiAgICB2YXIgcG9zLCAgICAgIC8vIHRvcCBzdHlsZSBwb3NpdGlvblxyXG4gICAgICBvbGQsICAgICAgLy8gb2xkIHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKG5lZWRlZCBmb3Igd2luZG93IHNjcm9sbGluZylcclxuICAgICAgc2Nyb2xsUG9zaXRpb24sIC8vIGRlZmluZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBtYXhzcCwgICAgICAvLyBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBlZGdlQ3Jvc3NlZCwgIC8vIGNyb3NzZWQgZWRnZSBmb3Igd2luZG93IGFuZCBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICBYID0gcG9pbnRlci54LCAgLy8gZGVmaW5lIHBvaW50ZXIgWCBwb3NpdGlvblxyXG4gICAgICBZID0gcG9pbnRlci55OyAgLy8gZGVmaW5lIHBvaW50ZXIgWSBwb3NpdGlvblxyXG4gICAgXHJcbiAgICBpZiAoZWRnZS5mbGFnLnkgPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG1vdXNldXAgdGhlbiBzdG9wIGhhbmRsaW5nIFwiY3VycmVudCBjZWxsXCJcclxuICAgIHtcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGNlbGwgKGF1dG9zY3JvbGwgaXMgd29ya2luZylcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUgcm93IGFuZCB0YWJsZSBjZWxsXHJcbiAgICAgIFxyXG4gICAgICBpZiAoWCA8IGRpdkJveFsxXSAmJiBYID4gZGl2Qm94WzNdICYmIFkgPCBkaXZCb3hbMl0gJiYgWSA+IGRpdkJveFswXSkgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsIGlmIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIERJViBpZD1cInJlZGlwcy1kcmFnXCJcclxuICAgICAge1xyXG4gICAgICAgIGNlbGxDaGFuZ2VkKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gc2F2ZSBzY3JvbGwgb2JqZWN0IHRvIHRoZSBnbG9iYWwgdmFyaWFibGUgZm9yIHRoZSBmaXJzdCBjYWxsIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlLCByZWN1cnNpdmUgY2FsbHMgd2lsbCBub3QgZW50ZXIgdGhpcyBjb2RlIGFuZCByZWZlcmVuY2UgdG8gdGhlIHNjcm9sbERhdGEub2JqIHdpbGwgYmUgcHJlc2VydmVkXHJcbiAgICBpZiAodHlwZW9mKHNvKSA9PT0gJ29iamVjdCcpIFxyXG4gICAge1xyXG4gICAgICBzY3JvbGxEYXRhLm9iaiA9IHNvO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpbmRvdyBhdXRvc2Nyb2xsIChkZWZpbmUgY3VycmVudCwgb2xkIGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBvbGQgPSBnZXRTY3JvbGxQb3NpdGlvbigpWzFdO1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEuaGVpZ2h0IC0gc2NyZWVuLmhlaWdodDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLnBhZ2UueTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsYWJsZSBjb250YWluZXIgKGRlZmluZSBjdXJyZW50IGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxUb3A7XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsRGF0YS5vYmouY2xpZW50SGVpZ2h0O1xyXG4gICAgICBlZGdlQ3Jvc3NlZCA9IGVkZ2UuZGl2Lnk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIGlmIHNjcm9sbGluZyBpcyBwb3NzaWJsZVxyXG4gICAgaWYgKGVkZ2UuZmxhZy55ID4gMCAmJiAoKGVkZ2VDcm9zc2VkIDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA+IDApIHx8IChlZGdlQ3Jvc3NlZCA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPCBtYXhzcCkpKSBcclxuICAgIHtcclxuICAgICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgb2JqZWN0IGlzIHdpbmRvd1xyXG4gICAgICB7XHJcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KDAsIGVkZ2VDcm9zc2VkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjcm9sbCB3aW5kb3dcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKClbMV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IG5ldyB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChhZnRlciBzY3JvbGxpbmcpLCBiZWNhdXNlIGF0IHBhZ2UgdG9wIG9yIGJvdHRvbSBlZGdlWSBjYW4gYmUgYmlnZ2VyIHRoZW4gdGhlIHJlc3Qgb2Ygc2Nyb2xsaW5nIGFyZWEsIGl0IHdpbGwgYmUgbmljZSB0byBrbm93IGhvdyBtdWNoIHdhcyB3aW5kb3cgc2Nyb2xsZWQgYWZ0ZXIgc2Nyb2xsQnkgY29tbWFuZFxyXG4gICAgICAgIHBvcyA9IHBhcnNlSW50KG9iai5zdHlsZS50b3AsIDEwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgY3VycmVudCBvYmplY3QgdG9wIHN0eWxlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGlzTmFOKHBvcykpIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIHtcclxuICAgICAgICBzY3JvbGxEYXRhLm9iai5zY3JvbGxUb3AgKz0gZWRnZUNyb3NzZWQ7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHNldFRpbWVvdXQoYXV0b1Njcm9sbFksIFJFRElQUy5kcmFnLnNjcm9sbC5zcGVlZCk7ICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZSBhdXRvc2Nyb2xsIGNhbGxcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXV0b3Njcm9sbCBpcyBlbmRlZDogZWxlbWVudCBpcyBvdXQgb2YgdGhlIHBhZ2UgZWRnZSBvciBtYXhpbXVtIHBvc2l0aW9uIGlzIHJlYWNoZWQgKHRvcCBvciBib3R0b20pXHJcbiAgICB7XHJcbiAgICAgIFJFRElQUy5ldmVudC5hZGQoc2Nyb2xsRGF0YS5vYmosICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgIC8vIHJldHVybiBvbnNjcm9sbCBldmVudCBoYW5kbGVyICh0byB3aW5kb3cgb3IgZGl2IGVsZW1lbnQpXHJcbiAgICAgIGVkZ2UuZmxhZy55ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGF1dG8gc2Nyb2xsIGZsYWcgWVxyXG4gICAgICBjdXJyZW50Q2VsbCA9IFswLCAwLCAwLCAwXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBjdXJyZW50IGNlbGwgcG9zaXRpb25cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgY29waWVzIGN1c3RvbSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIGVsZW1lbnQgdG8gdGhlIGNsb25lZCBlbGVtZW50IGFuZCBzZXRzIGV2ZW50IGhhbmRsZXJzIChvbm1vdXNlZG93biBhbmQgb25kYmxjbGljaykuXHJcbiAgICogVGhpcyBhY3Rpb24gd2lsbCBiZSB0YWtlbiBvbiBESVYgZWxlbWVudCBpdHNlbGYgYW5kIGFsbCBjaGlsZCBESVYgZWxlbWVudHMuXHJcbiAgICogTmVlZGVkIGluIGNhc2Ugd2hlbiBESVYgZWxlbWVudCBpcyBjbG9uZWQgb3IgUk9XIGlzIGNsb25lZCAoZm9yIGRyYWdnaW5nIG1vZGU9XCJyb3dcIikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gc3JjIFNvdXJjZSBlbGVtZW50IChESVYgb3IgVFIgZWxlbWVudCkuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2xuIENsb25lZCBlbGVtZW50IChESVYgb3IgVFIgZWxlbWVudCkuXHJcbiAgICovXHJcbiAgY29weVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoc3JjLCBjbG4pIFxyXG4gIHtcclxuICAgIHZhciBjb3B5ID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IG1ldGhvZFxyXG4gICAgdmFyIGNoaWxkczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcHJvcGVydGllcyBmb3IgY2hpbGQgZWxlbWVudHMgKHRoaXMgbWV0aG9kIGNhbGxzIFwiY29weVwiIG1ldGhvZClcclxuICAgIFxyXG4gICAgY29weVswXSA9IGZ1bmN0aW9uIChlMSwgZTIpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjb3B5IG1ldGhvZCBmb3IgRElWIGVsZW1lbnRzIChlMSBzb3VyY2UgZWxlbWVudCwgZTIgY2xvbmVkIGVsZW1lbnQpLCBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQwOTQ4MTEvamF2YXNjcmlwdC1jbG9uZW5vZGUtYW5kLXByb3BlcnRpZXNcclxuICAgIHtcclxuICAgICAgaWYgKGUxLnJlZGlwcykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByZWRpcHMgcHJvcGVydHkgZXhpc3RzIGluIHNvdXJjZSBlbGVtZW50LCBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIChyZWRpcHMuZW5hYmxlZCwgIHJlZGlwcy5jb250YWluZXIgLi4uKVxyXG4gICAgICB7XHJcbiAgICAgICAgZTIucmVkaXBzID0ge307XHJcbiAgICAgICAgZTIucmVkaXBzLmVuYWJsZWQgPSBlMS5yZWRpcHMuZW5hYmxlZDtcclxuICAgICAgICBlMi5yZWRpcHMuY29udGFpbmVyID0gZTEucmVkaXBzLmNvbnRhaW5lcjtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZTEucmVkaXBzLmVuYWJsZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb25tb3VzZWRvd24gZXZlbnQgaGFuZGxlciBpZiBzb3VyY2UgZWxlbWVudCBpcyBlbmFibGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcmVnaXN0ZXJFdmVudHMoZTIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29weVsxXSA9IGZ1bmN0aW9uIChlMSwgZTIpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjb3B5IG1ldGhvZCBmb3IgVFIgZWxlbWVudHMgXHJcbiAgICB7XHJcbiAgICAgIGlmIChlMS5yZWRpcHMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVkaXBzIHByb3BlcnR5IGV4aXN0cyBpbiBzb3VyY2UgZWxlbWVudCwgY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVtcHR5Um93IC4uLilcclxuICAgICAge1xyXG4gICAgICAgIGUyLnJlZGlwcyA9IHt9O1xyXG4gICAgICAgIGUyLnJlZGlwcy5lbXB0eVJvdyA9IGUxLnJlZGlwcy5lbXB0eVJvdztcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY2hpbGRzID0gZnVuY3Rpb24gKGUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBtZXRob2QgdG8gY29weSBwcm9wZXJ0aWVzIGZvciBjaGlsZCBlbGVtZW50cyAoaW5wdXQgcGFyYW1ldGVyIGlzIGVsZW1lbnQgaW5kZXggMCAtIERJViwgMSAtIFRSKVxyXG4gICAge1xyXG4gICAgICB2YXIgZWwxLCBlbDI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gb2YgRElWL1RSIGVsZW1lbnRzIGluIHNvdXJjZSBhbmQgY2xvbmVkIGVsZW1lbnRcclxuICAgICAgdmFyIHRuID0gWydESVYnLCAnVFInXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWcgbmFtZVxyXG4gICAgICBcclxuICAgICAgZWwxID0gc3JjLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRuW2VdKTsgICAgICAgICAgICAvLyBjb2xsZWN0IGNoaWxkIERJVi9UUiBlbGVtZW50cyBmcm9tIHRoZSBzb3VyY2UgZWxlbWVudCAocG9zc2libGUgaWYgZGl2IGVsZW1lbnQgY29udGFpbnMgdGFibGUpXHJcbiAgICAgIGVsMiA9IGNsbi5nZXRFbGVtZW50c0J5VGFnTmFtZSh0bltlXSk7ICAgICAgICAgICAgLy8gY29sbGVjdCBjaGlsZCBESVYvVFIgZWxlbWVudHMgZnJvbSBjbG9uZWQgZWxlbWVudFxyXG4gICAgICBcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbDIubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAvLyBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIChyZWRpcHMuZW5hYmxlZCwgIHJlZGlwcy5jb250YWluZXIgLi4uKSBhbmQgc2V0IGV2ZW50IGhhbmRsZXJzIHRvIGNoaWxkIERJViBlbGVtZW50c1xyXG4gICAgICB7XHJcbiAgICAgICAgY29weVtlXShlbDFbaV0sIGVsMltpXSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGlmIChzcmMubm9kZU5hbWUgPT09ICdESVYnKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBzb3VyY2UgZWxlbWVudCBpcyBESVYgZWxlbWVudCB0aGVuIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgZm9yIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGNvcHlbMF0oc3JjLCBjbG4pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoc3JjLm5vZGVOYW1lID09PSAnVFInKSAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHNvdXJjZSBlbGVtZW50IGlzIFRSIGVsZW1lbnQgdGhlbiBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIGZvciBUUiBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGNvcHlbMV0oc3JjLCBjbG4pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjaGlsZHMoMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIGZvciBESVYgY2hpbGQgZWxlbWVudHNcclxuICAgIGNoaWxkcygxKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHByb3BlcnRpZXMgZm9yIFRSIGNoaWxkIGVsZW1lbnRzXHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCB1cGRhdGVzIGNsaW1pdDFfWCBvciBjbGltaXQyX1ggY2xhc3MgbmFtZSAoWCBkZWZpbmVzIGNsb25pbmcgbGltaXQpLlxyXG4gICAqIDx1bD5cclxuICAgKiA8bGk+Y2xpbWl0MV9YIC0gYWZ0ZXIgY2xvbmluZyBYIGVsZW1lbnRzLCBsYXN0IGVsZW1lbnQgd2lsbCBiZSBub3JtYWwgZHJhZy1hYmxlIGVsZW1lbnQ8L2xpPlxyXG4gICAqIDxsaT5jbGltaXQyX1ggLSBhZnRlciBjbG9uaW5nIFggZWxlbWVudHMsIGxhc3QgZWxlbWVudCB3aWxsIHN0YXkgdW5tb3ZhYmxlPC9saT5cclxuICAgKiA8L3VsPlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIEVsZW1lbnQgb24gd2hpY2ggY25hbWUgY2xhc3Mgc2hvdWxkIGJlIHVwZGF0ZWQuXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSB2YWx1ZSBJbmNyZW1lbnQgb3IgZGVjcmVtZW50IGNsaW1pdCB2YWx1ZS5cclxuICAgKi9cclxuICBjbG9uZUxpbWl0ID0gZnVuY3Rpb24gKGVsLCB2YWx1ZSkgXHJcbiAge1xyXG4gICAgdmFyIG1hdGNoQXJyYXk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2ggYXJyYXlcclxuICAgIHZhciBsaW1pdFR5cGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpbWl0IHR5cGUgKDEgLSBjbG9uZSBiZWNvbWVzIFwibm9ybWFsXCIgZHJhZyBlbGVtZW50IGF0IGxhc3Q7IDIgLSBjbG9uZSBlbGVtZW50IHN0YXlzIGltbW92YWJsZSlcclxuICAgIHZhciBsaW1pdDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpbWl0IG51bWJlclxyXG4gICAgdmFyIGNsYXNzZXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xhc3MgbmFtZXMgb2YgY2xvbmUgZWxlbWVudFxyXG4gICAgXHJcbiAgICBjbGFzc2VzID0gZWwuY2xhc3NOYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWFkIGNsYXNzIG5hbWUgZnJvbSBlbGVtZW50XHJcbiAgICBtYXRjaEFycmF5ID0gY2xhc3Nlcy5tYXRjaCgvY2xpbWl0KFxcZClfKFxcZCspLyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoIGNsaW1pdCBjbGFzcyBuYW1lXHJcbiAgICBcclxuICAgIGlmIChtYXRjaEFycmF5ICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIERJViBjbGFzcyBjb250YWlucyBjbGltaXRcclxuICAgIHtcclxuICAgICAgbGltaXRUeXBlID0gcGFyc2VJbnQobWF0Y2hBcnJheVsxXSwgMTApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgbGltaXRUeXBlICgxIG9yIDIpIGFuZCBsaW1pdFxyXG4gICAgICBsaW1pdCA9IHBhcnNlSW50KG1hdGNoQXJyYXlbMl0sIDEwKTtcclxuICAgICAgXHJcbiAgICAgIGlmIChsaW1pdCA9PT0gMCAmJiB2YWx1ZSA9PT0gMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjdXJyZW50IGxpbWl0IGlzIDAgYW5kIHNob3VsZCBiZSBzZXQgdG8gMSB0aGVuIHJldHVybiBcImNsb25pbmdcIiB0byB0aGUgRElWIGVsZW1lbnRcclxuICAgICAge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyByZWRpcHMtY2xvbmUnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIFwicmVkaXBzLWNsb25lXCIgY2xhc3MgdG8gY2xhc3MgYXR0cmlidXRlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGxpbWl0VHlwZSA9PT0gMikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGUgRElWIGVsZW1lbnQgZm9yIGNsaW1pdDIgdHlwZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVuYWJsZURyYWcodHJ1ZSwgZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgbGltaXQgKz0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBsaW1pdCB2YWx1ZVxyXG4gICAgICBjbGFzc2VzID0gY2xhc3Nlcy5yZXBsYWNlKC9jbGltaXRcXGRfXFxkKy9nLCAnY2xpbWl0JyArIGxpbWl0VHlwZSArICdfJyArIGxpbWl0KTsgICAgICAgICAvLyB1cGRhdGUgY2xpbWl0IGNsYXNzIG5hbWUgd2l0aCBuZXcgbGltaXQgdmFsdWVcclxuICAgICAgXHJcbiAgICAgIGlmIChsaW1pdCA8PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXN0IGlmIGxpbWl0IGRyb3BzIHRvIHplcm9cclxuICAgICAge1xyXG4gICAgICAgIGNsYXNzZXMgPSBjbGFzc2VzLnJlcGxhY2UoJ3JlZGlwcy1jbG9uZScsICcnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gbW9yZSBjbG9uaW5nLCBjdXQgb3V0IFwicmVkaXBzLWNsb25lXCIgZnJvbSBjbGFzcyBuYW1lXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGxpbWl0VHlwZSA9PT0gMikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBsaW1pdCB0eXBlIGlzIDIgdGhlbiBkaXNhYmxlIGNsb25lIGVsZW1lbnQgKGl0IHdpbGwgc3RheSBpbiBjZWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVuYWJsZURyYWcoZmFsc2UsIGVsKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgc291cmNlIERJViBlbGVtZW50XHJcbiAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5jbG9uZWRFbmQyKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmNsb25lZEVuZDIgaGFuZGxlclxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmNsb25lZEVuZDEoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQuY2xvbmVkRW5kMSBoYW5kbGVyXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBlbC5jbGFzc05hbWUgPSBub3JtYWxpemUoY2xhc3Nlcyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsaXplIHNwYWNlcyBhbmQgcmV0dXJuIGNsYXNzZXMgdG8gdGhlIGNsb25lIG9iamVjdFxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBhdHRhY2hlcyAvIGRldGFjaGVzIG9ubW91c2Vkb3duLCBvbnRvdWNoc3RhcnQgYW5kIG9uZGJsY2xpY2sgZXZlbnRzIHRvIERJViBlbGVtZW50cyBhbmQgYXR0YWNoZXMgb25zY3JvbGwgZXZlbnQgdG8gdGhlIHNjcm9sbCBjb250YWluZXJzIGluIGluaXRpYWxpemF0aW9uIHBoYXNlLlxyXG4gICAqIEl0IGFsc28gY2FuIGJlIHVzZWQgZm9yIGVsZW1lbnQgaW5pdGlhbGl6YXRpb24gYWZ0ZXIgRElWIGVsZW1lbnQgd2FzIG1hbnVhbGx5IGFkZGVkIHRvIHRoZSB0YWJsZS5cclxuICAgKiBJZiBjbGFzcyBhdHRyaWJ1dGUgb2YgRElWIGNvbnRhaW5lciBjb250YWlucyBcInJlZGlwcy1ub2F1dG9zY3JvbGxcIiBjbGFzcyBuYW1lIHRoZW4gYXV0b1Njcm9sbCBvcHRpb24gd2lsbCBiZSBkaXNhYmxlZC5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW58U3RyaW5nfSBlbmFibGVfZmxhZyBFbmFibGUgLyBkaXNhYmxlIGVsZW1lbnQgKG9yIGVsZW1lbnQgc3VidHJlZSBsaWtlIHRhYmxlLCBkcmFnZ2luZyBjb250YWluZXIgLi4uKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ30gW2VsXSBIVE1MIG5vZGUgb3IgQ1NTIHNlbGVjdG9yIHRvIGVuYWJsZSAvIGRpc2FibGUuIFBhcmFtZXRlciBkZWZpbmVzIGVsZW1lbnQgcmVmZXJlbmNlIG9yIENTUyBzZWxlY3RvciBvZiBESVYgZWxlbWVudHMgdG8gZW5hYmxlIC8gZGlzYWJsZS5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGVuYWJsZSBlbGVtZW50IHdpdGggaWQ9XCJpZDEyM1wiIChlbGVtZW50IGlkIHNob3VsZCBiZSBhIHN0cmluZyBhY2NvcmRpbmcgdG8gRE9NIGRvY3MpXHJcbiAgICogcmQuZW5hYmxlRHJhZyh0cnVlLCAnI2lkMTIzJyk7XHJcbiAgICpcclxuICAgKiAvLyBvciBpbml0IG1hbnVhbGx5IGFkZGVkIGVsZW1lbnQgd2l0aCBrbm93biBpZFxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcodHJ1ZSwgJyNpZDIzNCcpO1xyXG4gICAqXHJcbiAgICogLy8gZGlzYWJsZSBhbGwgRElWIGVsZW1lbnRzIGluIGRyYWcxIHN1YnRyZWVcclxuICAgKiByZC5lbmFibGVEcmFnKGZhbHNlLCAnI2RyYWcxIGRpdicpXHJcbiAgICpcclxuICAgKiAvLyBpbml0IERJViBlbGVtZW50cyBpbiBkcmFnZ2luZyBhcmVhIChpbmNsdWRpbmcgbmV3bHkgYWRkZWQgRElWIGVsZW1lbnQpXHJcbiAgICogLy8gRElWIGluaXRpYWxpemF0aW9uIHdpbGwgd29yayBpZiB0YWJsZSBub2RlIHN0YXlzIGludGFjdCAodGFibGUgaXMgbm90IGdlbmVyYXRlZCBkeW5hbWljYWxseSlcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKCdpbml0Jyk7XHJcbiAgICpcclxuICAgKiAvLyBpbml0IGFkZGVkIGVsZW1lbnQgd2l0aCByZWZlcmVuY2UgbXlFbGVtZW50XHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZyh0cnVlLCBteUVsZW1lbnQpO1xyXG4gICAqXHJcbiAgICogLy8gZGlzYWJsZSBhbGwgRElWIGVsZW1lbnRzIHdpdGhpbiBURCAodGQgaXMgcmVmZXJlbmNlIHRvIFREIG5vZGUpXHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZyhmYWxzZSwgdGQpO1xyXG4gICAqL1xyXG4gIGVuYWJsZURyYWcgPSBmdW5jdGlvbiAoZW5hYmxlX2ZsYWcsIGVsKSBcclxuICB7XHJcbiAgICB2YXIgZGl2ID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29sbGVjdGlvbiBvZiBkaXYgZWxlbWVudHMgY29udGFpbmVkIGluIHRhYmxlcyBvciBvbmUgZGl2IGVsZW1lbnRcclxuICAgIFxyXG4gICAgaWYgKGVsID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3QgRElWIGVsZW1lbnRzIGluc2lkZSBjdXJyZW50IGRyYWcgYXJlYSAoZHJhZyBlbGVtZW50cyBhbmQgc2Nyb2xsIGNvbnRhaW5lcnMpIGUuZy4gZW5hYmxlRHJhZyh0cnVlKVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBkcmFnQ29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKTtcclxuICAgIH0gICAgXHJcbiAgICBlbHNlIGlmICh0eXBlb2YoZWwpID09PSAnc3RyaW5nJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJlbFwiIGlzIHN0cmluZyAoQ1NTIHNlbGVjdG9yKSAtIGl0IGNhbiBjb2xsZWN0IG9uZSBESVYgZWxlbWVudCAobGlrZSBcIiNkMTJcIikgb3IgbWFueSBESVYgZWxlbWVudHMgKGxpa2UgXCIjZHJhZzEgZGl2XCIpXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWwpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mKGVsKSA9PT0gJ29iamVjdCcgJiYgKGVsLm5vZGVOYW1lICE9PSAnRElWJyB8fCBlbC5jbGFzc05hbWUuaW5kZXhPZigncmVkaXBzLWRyYWcnKSA9PT0gLTEpKSAgICAgIC8vIFwiZWxcIiBpcyBub2RlIHJlZmVyZW5jZSB0byBlbGVtZW50IHRoYXQgaXMgbm90IERJViBjbGFzcz1cInJlZGlwcy1kcmFnXCJcclxuICAgIHtcclxuICAgICAgZGl2ID0gZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpO1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vbmUgb2YgYWJvdmUsIGVsIGlzIERJViBjbGFzcz1cInJlZGlwcy1kcmFnXCIsIHNvIHByZXBhcmUgYXJyYXkgd2l0aCBvbmUgRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgZGl2WzBdID0gZWw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGVuYWJsZURpdnMoZW5hYmxlX2ZsYWcsIGRpdik7XHJcbiAgfTtcclxuICBcclxuICBcclxuICBlbmFibGVEaXZzID0gZnVuY3Rpb24oZW5hYmxlX2ZsYWcsIGRpdilcclxuICB7XHJcbiAgICAgdmFyIGksIGosIGssICAgIC8vIGxvY2FsIHZhcmlhYmxlcyB1c2VkIGluIGxvb3BcclxuICAgICAgdGJscyA9IFtdLCAgICAvLyBjb2xsZWN0aW9uIG9mIHRhYmxlcyBpbnNpZGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgYm9yZGVyU3R5bGUsICAvLyBib3JkZXIgc3R5bGUgKHNvbGlkIG9yIGRvdHRlZClcclxuICAgICAgb3BhY2l0eSwgICAgLy8gKGludGVnZXIpIHNldCBvcGFjaXR5IGZvciBlbmFibGVkIC8gZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgY3Vyc29yLCAgICAgLy8gY3Vyc29yIHN0eWxlIChtb3ZlIG9yIGF1dG8pXHJcbiAgICAgIG92ZXJmbG93LCAgIC8vIGNzcyB2YWx1ZSBvZiBvdmVyZmxvdyBwcm9wZXJ0eVxyXG4gICAgICBhdXRvc2Nyb2xsLCAgIC8vIGJvb2xlYW4gLSBpZiBzY3JvbGxhYmxlIGNvbnRhaW5lciB3aWxsIGhhdmUgYXV0b3Njcm9sbCBvcHRpb24gKGRlZmF1bHQgaXMgdHJ1ZSlcclxuICAgICAgZW5hYmxlZCwgICAgLy8gZW5hYmxlZCBwcm9wZXJ0eSAodHJ1ZSBvciBmYWxzZSlcclxuICAgICAgY2IsICAgICAgIC8vIGJveCBvZmZzZXQgZm9yIGNvbnRhaW5lciBib3ggKGNiKVxyXG4gICAgICBwb3NpdGlvbiwgICAvLyBpZiB0YWJsZSBjb250YWluZXIgaGFzIHBvc2l0aW9uOmZpeGVkIHRoZW4gXCJwYWdlIHNjcm9sbFwiIG9mZnNldCBzaG91bGQgbm90IGJlIGFkZGVkXHJcbiAgICAgIHJlZ2V4RHJhZyA9IC9cXGJyZWRpcHMtZHJhZ1xcYi9pLCAvLyByZWd1bGFyIGV4cHJlc3Npb24gdG8gc2VhcmNoIFwicmVkaXBzLWRyYWdcIiBjbGFzcyBuYW1lXHJcbiAgICAgIHJlZ2V4Tm9BdXRvc2Nyb2xsID0gL1xcYnJlZGlwcy1ub2F1dG9zY3JvbGxcXGIvaTsgLy8gcmVndWxhciBleHByZXNzaW9uIHRvIHNlYXJjaCBcInJlZGlwcy1ub2F1dG9zY3JvbGxcIiBjbGFzcyBuYW1lICAgXHJcblxyXG4gICAgb3BhY2l0eSA9IFJFRElQUy5kcmFnLnN0eWxlLm9wYWNpdHlEaXNhYmxlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBkaXNhYmxlZCBlbGVtZW50cyBmcm9tIHB1YmxpYyBwcm9wZXJ0eSBcIm9wYWNpdHlEaXNhYmxlZFwiXHJcbiAgICBcclxuICAgIGlmIChlbmFibGVfZmxhZyA9PT0gdHJ1ZSB8fCBlbmFibGVfZmxhZyA9PT0gJ2luaXQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc3R5bGVzIGZvciBlbmFibGVkIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGJvcmRlclN0eWxlID0gUkVESVBTLmRyYWcuc3R5bGUuYm9yZGVyRW5hYmxlZDtcclxuICAgICAgY3Vyc29yID0gJ21vdmUnO1xyXG4gICAgICBlbmFibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIHNldCBzdHlsZXMgZm9yIGRpc2FibGVkIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGJvcmRlclN0eWxlID0gUkVESVBTLmRyYWcuc3R5bGUuYm9yZGVyRGlzYWJsZWQ7XHJcbiAgICAgIGN1cnNvciA9ICdhdXRvJztcclxuICAgICAgZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfSAgICBcclxuICAgIFxyXG4gICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBkaXYubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW4gbG9vcCB0aGF0IGdvZXMgdGhyb3VnaCBhbGwgRElWIGVsZW1lbnRzXHJcbiAgICB7ICAgIFxyXG4gICAgICBpZiAocmVnZXhEcmFnLnRlc3QoZGl2W2ldLmNsYXNzTmFtZSkpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIERJViBlbGVtZW50IGNvbnRhaW5zIFwicmVkaXBzLWRyYWdcIiBjbGFzcyBuYW1lXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZW5hYmxlX2ZsYWcgPT09ICdpbml0JyB8fCBkaXZbaV0ucmVkaXBzID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAvLyBhZGQgcmVmZXJlbmNlIHRvIHRoZSBESVYgY29udGFpbmVyIChpbml0aWFsaXphdGlvbiBvciBuZXdseSBhZGRlZCBlbGVtZW50IHRvIHRoZSB0YWJsZSkgdGhpcyBwcm9wZXJ0eSBzaG91bGQgbm90IGJlIGNoYW5nZWQgaW4gbGF0ZXIgZWxlbWVudCBlbmFibGUvZGlzYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRpdltpXS5yZWRpcHMgPSB7fTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBcInByb3BlcnR5IG9iamVjdFwiIGluIHdoaWNoIGFsbCBjdXN0b20gcHJvcGVydGllcyB3aWxsIGJlIHNhdmVkXHJcbiAgICAgICAgICBkaXZbaV0ucmVkaXBzLmNvbnRhaW5lciA9IGRyYWdDb250YWluZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVuYWJsZV9mbGFnID09PSB0cnVlICYmIHR5cGVvZihvcGFjaXR5KSA9PT0gJ251bWJlcicpICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvcGFjaXR5IG1hc2tcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUub3BhY2l0eSA9ICcnO1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLmZpbHRlciA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbmFibGVfZmxhZyA9PT0gZmFsc2UgJiYgdHlwZW9mKG9wYWNpdHkpID09PSAnbnVtYmVyJykgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUuZmlsdGVyID0gJ2FscGhhKG9wYWNpdHk9JyArIG9wYWNpdHkgKyAnKSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlZ2lzdGVyRXZlbnRzKGRpdltpXSwgZW5hYmxlZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVyIGZvciBESVYgZWxlbWVudFxyXG4gICAgICAgIFxyXG4gICAgICAgIGRpdltpXS5zdHlsZS5ib3JkZXJTdHlsZSA9IGJvcmRlclN0eWxlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzdHlsZXMgZm9yIERJViBlbGVtZW50XHJcbiAgICAgICAgZGl2W2ldLnN0eWxlLmN1cnNvciA9IGN1cnNvcjtcclxuICAgICAgICBkaXZbaV0ucmVkaXBzLmVuYWJsZWQgPSBlbmFibGVkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZW5hYmxlZCBwcm9wZXJ0eSB0byB0aGUgRElWIGVsZW1lbnQgKHRydWUgb3IgZmFsc2UpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoZW5hYmxlX2ZsYWcgPT09ICdpbml0JykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhdHRhY2ggb25zY3JvbGwgZXZlbnQgdG8gdGhlIERJViBlbGVtZW50IGluIGluaXQgcGhhc2Ugb25seSBpZiBESVYgZWxlbWVudCBoYXMgb3ZlcmZsb3cgb3RoZXIgdGhhbiBkZWZhdWx0IHZhbHVlICd2aXNpYmxlJyBhbmQgdGhhdCBtZWFucyBzY3JvbGxhYmxlIERJViBjb250YWluZXJcclxuICAgICAge1xyXG4gICAgICAgIG92ZXJmbG93ID0gZ2V0U3R5bGUoZGl2W2ldLCAnb3ZlcmZsb3cnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzayBmb3Igb3ZlcmZsb3cgc3R5bGVcclxuICAgICAgICBcclxuICAgICAgICBpZiAob3ZlcmZsb3cgIT09ICd2aXNpYmxlJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgaXMgc2Nyb2xsYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFJFRElQUy5ldmVudC5hZGQoZGl2W2ldLCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb25zY3JvbGwgZXZlbnQgaGFuZGxlciBmb3Igc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUoZGl2W2ldLCAncG9zaXRpb24nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29udGFpbmVyIGJveCBzdHlsZSBwb3NpdGlvbiAodG8gZXhjbHVkZSBwYWdlIHNjcm9sbCBvZmZzZXQgZnJvbSBjYWxjdWxhdGlvbiBpZiBuZWVkZWQpXHJcbiAgICAgICAgICBjYiA9IGJveE9mZnNldChkaXZbaV0sIHBvc2l0aW9uLCBmYWxzZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IERJViBjb250YWluZXIgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIHNjcm9sbCBwb3NpdGlvbiBvZiB0aGUgY29udGVudFxyXG4gICAgICAgICAgYXV0b3Njcm9sbCA9ICFyZWdleE5vQXV0b3Njcm9sbC50ZXN0KGRpdltpXS5jbGFzc05hbWUpOyAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgcmVkaXBzLW5vYXV0b3Njcm9sbCBvcHRpb25cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbal0gPSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXNcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZGl2IDogZGl2W2ldLCAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBvZmZzZXQgOiBjYiwgICAgICAgICAgICAgICAgICAvLyBib3ggb2Zmc2V0IG9mIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBtaWRzdFggOiAoY2JbMV0gKyBjYlszXSkgLyAyLCAvLyBtaWRkbGUgWFxyXG4gICAgICAgICAgICBtaWRzdFkgOiAoY2JbMF0gKyBjYlsyXSkgLyAyLCAvLyBtaWRkbGUgWVxyXG4gICAgICAgICAgICBhdXRvc2Nyb2xsIDogYXV0b3Njcm9sbCAgICAgICAvLyBhdXRvc2Nyb2xsIGVuYWJsZWQgb3IgZGlzYWJsZWQgKHRydWUgb3IgZmFsc2UpXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0YmxzID0gZGl2W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0YWJsZScpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZvciB0YWJsZXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGZvciAoayA9IDA7IGsgPCB0YmxzLmxlbmd0aDsgaysrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIGdvZXMgdGhyb3VnaCBmb3VuZCB0YWJsZXMgaW5zaWRlIHNjcm9sbGFibGUgYXJlYVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB0YmxzW2tdLnNjYSA9IHNjcm9sbERhdGEuY29udGFpbmVyW2pdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhIHJlZmVyZW5jZSB0byB0aGUgY29ycmVzcG9uZGluZyBzY3JvbGxhYmxlIGFyZWFcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaisrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluY3JlYXNlIHNjcm9sbGFibGUgY29udGFpbmVyIGNvdW50ZXJcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gICBcclxuICB9O1xyXG5cclxuICAvL01ldGhvZCByZXR1cm5zIHN0eWxlIHZhbHVlIGZvciByZXF1ZXN0ZWQgSFRNTCBlbGVtZW50IGFuZCBzdHlsZSBuYW1lLlxyXG4gIGdldFN0eWxlID0gZnVuY3Rpb24gKGVsLCBzdHlsZV9uYW1lKSBcclxuICB7XHJcbiAgICBpZiAoZWwgJiYgZWwuY3VycmVudFN0eWxlKSBcclxuICAgIHtcclxuICAgICAgcmV0dXJuIGVsLmN1cnJlbnRTdHlsZVtzdHlsZV9uYW1lXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGVsICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKSBcclxuICAgIHtcclxuICAgICAgcmV0dXJuIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpW3N0eWxlX25hbWVdO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIGZpbmQgdGhlIGZpcnN0IHBhcmVudCBlbGVtZW50IG9mIGVsIHdpdGggdGhlIHRhZyBuYW1lIHRhZ19uYW1lIFxyXG4gIGZpbmRQYXJlbnQgPSBmdW5jdGlvbiAodGFnX25hbWUsIGVsKSBcclxuICB7XHJcbiAgICBlbCA9IGVsLnBhcmVudE5vZGU7ICAgICAgICAgICAgICAgICAvLyBzZXQgXCJlbFwiIHRvIHRoZSBuZXh0IG5vZGUgKHRvIHByZXZlbnQgZmluZGluZyBub2RlIGl0c2VsZilcclxuICAgIFxyXG4gICAgd2hpbGUgKGVsKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnQgbG9vcFxyXG4gICAge1xyXG4gICAgICBpZiAoZWwubm9kZU5hbWUgPT09IHRhZ19uYW1lKSAgICAgLy8gbm9kZSBpcyBmb3VuZFxyXG4gICAgICB7XHJcbiAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAvLyBub2RlIGlzIGZvdW5kIGFuZCBsb29wIGNhbiBiZSBlbmRlZFxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBlbCA9IGVsLnBhcmVudE5vZGU7ICAgICAgICAgICAgICAgLy8gbW92ZSBvbiB0byB0aGUgcGFyZW50IG5vZGVcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGVsO1xyXG4gIH07XHJcblxyXG4gIC8vRnVuY3Rpb24gcmV0dXJucyBhIHN0cmluZyBpbiB3aGljaCBhbGwgb2YgdGhlIHByZWNlZGluZyBhbmQgdHJhaWxpbmcgd2hpdGUgc3BhY2UgaGFzIGJlZW4gcmVtb3ZlZCwgYW5kIGluIHdoaWNoIGFsbCBpbnRlcm5hbCBzZXF1ZW5jZXMgb2Ygd2hpdGUgaXMgcmVwbGFjZWQgd2l0aCBvbmUgd2hpdGUgc3BhY2UuXHJcbiAgbm9ybWFsaXplID0gZnVuY3Rpb24gKHN0cikgXHJcbiAge1xyXG4gICAgaWYgKHN0ciAhPT0gdW5kZWZpbmVkKSBcclxuICAgIHtcclxuICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKS5yZXBsYWNlKC9cXHN7Mix9L2csICcgJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBzdHI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBub3JtYWxpemVkIHN0cmluZyAod2l0aG91dCBwcmVjZWRpbmcgYW5kIHRyYWlsaW5nIHNwYWNlcylcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2Qgc2V0cyBvcGFjaXR5IHRvIHRhYmxlIHJvdyBvciBkZWxldGVzIHJvdyBjb250ZW50LlxyXG4gICAqIElucHV0IHBhcmFtZXRlciBcImVsXCIgaXMgcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgb3IgcmVmZXJlbmNlIHRvIHRoZSBjbG9uZWQgbWluaSB0YWJsZSAod2hlbiByb3cgaXMgbW92ZWQpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U3RyaW5nfSBlbCBJZCBvZiByb3cgaGFuZGxlciAoZGl2IGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiKSBvciByZWZlcmVuY2UgdG8gZWxlbWVudCAoc291cmNlIHJvdyBvciBtaW5pIHRhYmxlKS5cclxuICAgKiBAcGFyYW0ge0ludGVnZXJ8U3RyaW5nfSBvcGFjaXR5IE9wYWNpdHkgbGV2ZWwgKGZyb20gMCB0byAxMDApIG9yIFwiZW1wdHlcIiAodGhlbiBjb250ZW50IG9mIHRhYmxlIGNlbGxzIGluIHJvdyB3aWxsIGJlIGRlbGV0ZWQgLSBpbiB0aGF0IGNhc2UgZmlyc3QgcGFyYW1ldGVyIHNob3VsZCBiZSBUUikuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtjb2xvcl0gQmFja2dyb3VuZCBjb2xvci5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIFJFRElQUy5kcmFnIGxpYnJhcnlcclxuICAgKiByZCA9IFJFRElQUy5kcmFnO1xyXG4gICAqXHJcbiAgICogLy8gbWFrZSByb3cgc2VtaS10cmFuc3BhcmVudFxyXG4gICAqIHJkLnJvd09wYWNpdHkocm93T2JqLCA1MCk7XHJcbiAgICpcclxuICAgKiAvLyBzZXQgcm93IGFzIGVtcHR5IGFuZCB3aGl0ZSAoY29udGVudCBpbiB0YWJsZSBjZWxscyB3aWxsIGJlIGRlbGV0ZWQpXHJcbiAgICogcmQucm93T3BhY2l0eShyb3dPYmosICdlbXB0eScsICdXaGl0ZScpO1xyXG4gICAqL1xyXG4gIHJvd09wYWNpdHkgPSBmdW5jdGlvbiAoZWwsIG9wYWNpdHksIGNvbG9yKSBcclxuICB7XHJcbiAgICB2YXIgdGROb2RlTGlzdDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhYmxlIGNlbGxzXHJcbiAgICB2YXIgaSwgajsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgdmFyaWFibGVzXHJcbiAgICBcclxuICAgIGlmICh0eXBlb2YoZWwpID09PSAnc3RyaW5nJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaW5wdXQgcGFyYW1ldGVyIGlzIHN0cmluZyAodGhpcyBzaG91bGQgYmUgZWxlbWVudCBpZCksIHRoZW4gc2V0IGVsZW1lbnQgcmVmZXJlbmNlXHJcbiAgICB7XHJcbiAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpO1xyXG4gICAgICBlbCA9IGZpbmRQYXJlbnQoJ1RBQkxFJywgZWwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbCBjb3VsZCBiZSByZWZlcmVuY2Ugb2YgdGhlIERJViBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIiAocm93IGhhbmRsZXIpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChlbC5ub2RlTmFtZSA9PT0gJ1RSJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWwgaXMgVFIsIHRoZW4gc2V0IGJhY2tncm91bmQgY29sb3IgdG8gZWFjaCBjZWxsIChpZiBuZWVkZWQpIGFuZCBhcHBseSBvcGFjaXR5XHJcbiAgICB7XHJcbiAgICAgIHRkTm9kZUxpc3QgPSBlbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGQnKTsgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3QgdGFibGUgY2VsbCBmcm9tIHRoZSByb3dcclxuICAgICAgXHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0ZE5vZGVMaXN0Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBESVYgZWxlbWVudFxyXG4gICAgICB7XHJcbiAgICAgICAgdGROb2RlTGlzdFtpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvciA/IGNvbG9yIDogJyc7IC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIHRhYmxlIGNlbGwgaWYgbmVlZGVkXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG9wYWNpdHkgPT09ICdlbXB0eScpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9wYWNpdHkgaXMgc2V0IHRvIFwiZW1wdHlcIiB0aGVuIGRlbGV0ZSBjZWxsIGNvbnRlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0ZE5vZGVMaXN0W2ldLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHNldCBvcGFjaXR5IHRvIGV2ZXJ5IGNoaWxkIG5vZGUgaW4gdGFibGUgY2VsbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspICAgLy8gbG9vcCB0aHJvdWdoIGNoaWxkIG5vZGVzIG9mIGV2ZXJ5IHRhYmxlIGNlbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgLy8gYXBwbHkgc3R5bGVzIG9ubHkgdG8gRWxlbWVudCBub2RlcyAobm90IHRleHQgbm9kZXMsIGF0dHJpYnV0ZXMgLi4uKSwgaHR0cDovL2NvZGUuc3RlcGhlbm1vcmxleS5vcmcvamF2YXNjcmlwdC9kb20tbm9kZXR5cGUtY29uc3RhbnRzL1xyXG4gICAgICAgICAgICBpZiAodGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzW2pdLm5vZGVUeXBlID09PSAxKSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlc1tqXS5zdHlsZS5vcGFjaXR5ID0gb3BhY2l0eSAvIDEwMDtcclxuICAgICAgICAgICAgICB0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXNbal0uc3R5bGUuZmlsdGVyID0gJ2FscGhhKG9wYWNpdHk9JyArIG9wYWNpdHkgKyAnKSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiByb3cgaXMgbW92ZWQgdGhlbiBSRURJUFMuZHJhZyB3aWxsIGNyZWF0ZSBtaW5pIHRhYmxlIHdpdGggb25lIHJvdywgYWxsIGJyb3dzZXJzIChJRTgsIE9wZXJhMTEsIEZGMy42LCBDaHJvbWUxMCkgY2FuIHNldCBvcGFjaXR5IHRvIHRoZSB0YWJsZVxyXG4gICAge1xyXG4gICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gb3BhY2l0eSAvIDEwMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgRkYsIENocm9tZSwgT3BlcmFcclxuICAgICAgZWwuc3R5bGUuZmlsdGVyID0gJ2FscGhhKG9wYWNpdHk9JyArIG9wYWNpdHkgKyAnKSc7ICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIElFXHJcbiAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yID8gY29sb3IgOiAnJzsgICAgICAgICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC8qIHB1YmxpYyBwcm9wZXJ0aWVzICovXHJcbiAgICBvYmogOiBvYmosICAgICAgICAgICAgICAgICAgLy9UeXBlOiBIVE1MRWxlbWVudCAtIEN1cnJlbnRseSBtb3ZlZCBESVYgZWxlbWVudC4gUmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZy5vYmogKGRyYWdnZWQgRElWIGVsZW1lbnQpIGlzIHZpc2libGUgYW5kIGNhbiBiZSB1c2VkIGluIGFwcHJvcHJpYXRlIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAgb2JqT2xkICA6IG9iak9sZCwgICAgICAgICAgIC8vVHlwZTogSFRNTEVsZW1lbnQgLSBQcmV2aW91c2x5IG1vdmVkIERJViBlbGVtZW50IChiZWZvcmUgY2xpY2tlZCBvciBjbG9uZWQpLiBJbiBjYXNlIHdoZW4gRElWIGVsZW1lbnQgaXMgY2xvbmVkLCBvYmogaXMgcmVmZXJlbmNlIG9mIGN1cnJlbnQgKGNsb25lZCkgRElWIGVsZW1lbnQgd2hpbGUgb2JqT2xkIGlzIHJlZmVyZW5jZSBvZiBib3R0b20gKG9yaWdpbikgRElWIGVsZW1lbnQuXHJcbiAgICAvKipcclxuICAgICAqIE9iamVjdCBjb250YWlucyByZWZlcmVuY2UgdG8gcHJldmlvdXMsIHNvdXJjZSwgY3VycmVudCBhbmQgdGFyZ2V0IHRhYmxlIGNlbGwuIFRkIHJlZmVyZW5jZXMgY2FuIGJlIHVzZWQgaW4gZXZlbnQgaGFuZGxlcnMuXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC5zb3VyY2UgLSByZWZlcmVuY2UgdG8gc291cmNlIHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlZG93bik8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQucHJldmlvdXMgLSByZWZlcmVuY2UgdG8gcHJldmlvdXMgdGFibGUgY2VsbCAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKTwvbGk+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC5jdXJyZW50IC0gcmVmZXJlbmNlIHRvIGN1cnJlbnQgdGFibGUgY2VsbCAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKTwvbGk+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC50YXJnZXQgLSByZWZlcmVuY2UgdG8gdGFyZ2V0IHRhYmxlIGNlbGwgKHRhcmdldCB0YWJsZSBjZWxsIGlzIHNldCBpbiBhIG1vbWVudCBvZiBkcm9wcGluZyBlbGVtZW50IHRvIHRoZSB0YWJsZSBjZWxsKTwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHRkIDogdGQsXHJcbiAgICAvKipcclxuICAgICAqIEhvdmVyIG9iamVjdCBjb250YWlucyA0IHByb3BlcnRpZXM6IGNvbG9yVGQsIGNvbG9yVHIsIGJvcmRlclRkIGFuZCBib3JkZXJUci4gY29sb3JUZCBhbmQgY29sb3JUciBkZWZpbmUgaG92ZXIgY29sb3IgZm9yIERJViBlbGVtZW50IGFuZCB0YWJsZSByb3cuXHJcbiAgICAgKiBJZiBib3JkZXJUZCBpcyBkZWZpbmVkLCB0aGVuIGhpZ2hsaWdodGVkIGNlbGwgd2lsbCBoYXZlIGJvcmRlci4gSWYgYm9yZGVyVHIgaXMgZGVmaW5lZCB0aGVuIGhpZ2hsaWdodGVkIHJvdyB3aWxsIGhhdmUgb25seSB0b3Agb3IgYm90dG9tIGJvcmRlci5cclxuICAgICAqIFRvcCBib3JkZXIgc2hvd3MgdGhhdCByb3cgd2lsbCBiZSBwbGFjZWQgYWJvdmUgY3VycmVudCByb3csIHdoaWxlIGJvdHRvbSBib3JkZXIgc2hvd3MgdGhhdCBjdXJyZW50IHJvdyB3aWxsIGJlIHBsYWNlZCBiZWxvdyBjdXJyZW50IHJvdy5cclxuICAgICAqIFNvbWUgYnJvd3NlcnMgbWF5IGhhdmUgcHJvYmxlbSB3aXRoIFwiYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlXCIgdGFibGUgc3R5bGUgYW5kIGJvcmRlciBoaWdobGlnaHRpbmcuXHJcbiAgICAgKiBJbiB0aGF0IGNhc2UgdHJ5IHdpdGhvdXQgY29sbGFwc2luZyBURCBib3JkZXJzIChlLmcgc2V0IFwiYm9yZGVyLXNwYWNpbmc6MFwiIGFuZCBzbWFsbGVyIFwidGQuYm9yZGVyLXdpZHRoXCIpLlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKiBAbmFtZSBSRURJUFMuZHJhZyNob3ZlclxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIC8vIHNldCBcIiM5QkIzREFcIiBhcyBob3ZlciBjb2xvciBmb3IgVERcclxuICAgICAqIFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVGQgPSAnIzlCQjNEQSc7XHJcbiAgICAgKlxyXG4gICAgICogLy8gb3Igc2V0IFwiTGltZVwiIGFzIGhvdmVyIGNvbG9yIGZvciBUUlxyXG4gICAgICogUkVESVBTLmRyYWcuaG92ZXIuY29sb3JUciA9ICdMaW1lJztcclxuICAgICAqXHJcbiAgICAgKiAvLyBzZXQgcmVkIGJvcmRlciBmb3IgaGlnaGxpZ2h0ZWQgVERcclxuICAgICAqIFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRkID0gJzJweCBzb2xpZCByZWQnO1xyXG4gICAgICovXHJcbiAgICBob3ZlciA6IGhvdmVyLFxyXG4gICAgLyoqXHJcbiAgICAgKiBTY3JvbGwgb2JqZWN0IGNvbnRhaW5zIHByb3BlcnRpZXMgbmVlZGVkIGZvciBhdXRvc2Nyb2xsIG9wdGlvbi5cclxuICAgICAqIDx1bD5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gc2Nyb2xsLmVuYWJsZSAtIEVuYWJsZSAvIGRpc2FibGUgYXV0b3Njcm9sbCBvcHRpb24uIEJ5IGRlZmF1bHQgYXV0b3Njcm9sbCBpcyBlbmFibGVkIGJ1dCBpdCBjYW4gYmUgdXNlZnVsbCBpbiBzb21lIGNhc2VzIHRvIGNvbXBsZXRlbHkgdHVybiBvZmYgYXV0b3Njcm9sbCAoaWYgYXBwbGljYXRpb24gZG9lc24ndCBuZWVkIGF1dG9zY3JvbGxpbmcgcGFnZSBub3IgYXV0b3Njcm9sbGluZyBESVYgY29udGFpbmVyKS4gVHVybmluZyBvZmYgYXV0b3Njcm9sbCB3aWxsIHNwZWVkIHVwIGFwcGxpY2F0aW9uIGJlY2F1c2UgZXh0cmEgY2FsY3VsYXRpb25zIHdpbGwgYmUgc2tpcHBlZC4gRGVmYXVsdCBpcyB0cnVlPC9saT5cclxuICAgICAqIDxsaT57SW50ZWdlcn0gc2Nyb2xsLmJvdW5kIC0gQm91bmQgc2l6ZSBmb3IgdHJpZ2dlcmluZyBwYWdlIGF1dG9TY3JvbGwgb3IgYXV0b1Njcm9sbCBvZiBzY3JvbGxhYmxlIERJViBjb250YWluZXIuIERlZmF1bHQgdmFsdWUgaXMgMjUgKHB4KS48L2xpPlxyXG4gICAgICogPGxpPntJbnRlZ2VyfSBzY3JvbGwuc3BlZWQgLSBBdXRvc2Nyb2xsIHBhdXNlIGluIG1pbGxpc2Vjb25kcy4gRGVmYXVsdCB2YWx1ZSBpcyAyMCAobWlsbGlzZWNvbmRzKS48L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBzY3JvbGwgOiBzY3JvbGwsXHJcbiAgICAvKipcclxuICAgICAqIE9iamVjdCBjb250YWlucyBzdHlsZXMgKGNvbG9ycywgb3BhY2l0eSBsZXZlbHMpIGZvciBESVYgZWxlbWVudHMgYW5kIHRhYmxlIHJvd3MuXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e1N0cmluZ30gc3R5bGUuYm9yZGVyRW5hYmxlZCAtIEJvcmRlciBzdHlsZSBmb3IgZW5hYmxlZCBESVYgZWxlbWVudHMuIERlZmF1bHQgaXMgXCJzb2xpZFwiLjwvbGk+XHJcbiAgICAgKiA8bGk+e1N0cmluZ30gc3R5bGUuYm9yZGVyRGlzYWJsZWQgLSBCb3JkZXIgc3R5bGUgZm9yIGRpc2FibGVkIERJViBlbGVtZW50cy4gRGVmYXVsdCBpcyBcImRvdHRlZFwiLjwvbGk+XHJcbiAgICAgKiA8bGk+e0ludGVnZXJ9IHN0eWxlLm9wYWNpdHlEaXNhYmxlZCAtIE9wYWNpdHkgbGV2ZWwgZm9yIGRpc2FibGVkIGVsZW1lbnRzLiBEZWZhdWx0IGlzIGVtcHR5IHN0cmluZy48L2xpPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLnJvd0VtcHR5Q29sb3IgLSBcIkVtcHR5IHJvd1wiIGNvbG9yLiBXaGVuIGxhc3Qgcm93IGZyb20gdGFibGUgaXMgbW92ZWQgdGhlbiB0aGlzIGNvbG9yIHdpbGwgYmUgc2V0IHRvIFwiZW1wdHkgcm93XCIuIERlZmF1bHQgaXMgXCJ3aGl0ZVwiLjwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIC8vIGRlZmluZSBib3JkZXIgc3R5bGUgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgKiBSRURJUFMuZHJhZy5zdHlsZS5ib3JkZXJEaXNhYmxlZCA9ICdkYXNoZWQnO1xyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHN0eWxlIDogc3R5bGUsXHJcbiAgICAvKipcclxuICAgICAqIE9iamVjdCBkZWZpbmVzIHNldmVyYWwgcnVsZXMgcmVsYXRlZCB0byBjbG9uaW5nIERJViBlbGVtZW50cyBsaWtlIGVuYWJsZSBjbG9uaW5nIHdpdGggc2hpZnQga2V5LCBlbmFibGUgcmV0dXJuaW5nIGNsb25lZCBESVYgZWxlbWVudCB0byBpdHMgc291cmNlIGFuZCBzbyBvbi5cclxuICAgICAqIEluc3RlYWQgb2YgbW92aW5nLCBESVYgZWxlbWVudCAvIHJvdyB3aWxsIGJlIGNsb25lZCBhbmQgcmVhZHkgZm9yIGRyYWdnaW5nLlxyXG4gICAgICogSnVzdCBwcmVzcyBTSElGVCBrZXkgYW5kIHRyeSB0byBkcmFnIERJViBlbGVtZW50IC8gcm93LlxyXG4gICAgICogaWYgY2xvbmUuc2VuZEJhY2sgcHJvcGVydHkgc2V0IHRvIHRydWUsIGNsb25lZCBESVYgZWxlbWVudCB3aWxsIGJlIGRlbGV0ZWQgd2hlbiBkcm9wcGVkIHRvIHRoZSBjZWxsIGNvbnRhaW5pbmcgaXRzIHNvdXJjZSBjbG9uZSBlbGVtZW50LlxyXG4gICAgICogSWYgZXhpc3RzLCBcImNsaW1pdFwiIGNsYXNzIHdpbGwgYmUgdXBkYXRlZCAoaW5jcmVhc2VkIGJ5IDEpLlxyXG4gICAgICogY2xvbmUuZHJvcCBwcm9wZXJ0eSBkZWZpbmVzIHBsYWNpbmcgY2xvbmVkIERJViBlbGVtZW50IChkcm9wcGVkIG91dHNpZGUgYW55IHRhYmxlKSB0byB0aGUgbGFzdCBtYXJrZWQgcG9zaXRpb24uXHJcbiAgICAgKiBJZiB0aGlzIHByb3BlcnR5IGlzIHNldCB0byB0cnVlLCB0aGUgY2xvbmVkIERJViBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIHBsYWNlZCB0byB0aGUgdGFibGUgY2VsbC5cclxuICAgICAqIDx1bD5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gY2xvbmUua2V5RGl2IC0gSWYgc2V0IHRvIHRydWUsIGFsbCBESVYgZWxlbWVudHMgb24gdGFibGVzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5LiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLmtleVJvdyAtIElmIHNldCB0byB0cnVlLCB0YWJsZSByb3dzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5LiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLnNlbmRCYWNrIC0gSWYgc2V0IHRvIHRydWUsIGNsb25lZCBlbGVtZW50IGNhbiBiZSByZXR1cm5lZCB0byBpdHMgc291cmNlLiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLmRyb3AgLSBJZiBzZXQgdG8gdHJ1ZSwgY2xvbmVkIGVsZW1lbnQgd2lsbCBiZSBhbHdheXMgcGxhY2VkIHRvIHRoZSB0YWJsZSAodG8gdGhlIGxhc3QgcG9zc2libGUgY2VsbCkgbm8gbWF0dGVyIGlmIGlzIGRyb3BwZWQgb3V0c2lkZSB0aGUgdGFibGUuIERlZmF1bHQgaXMgZmFsc2UuPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgY2xvbmUgOiBjbG9uZSxcclxuICAgIC8qIHB1YmxpYyBtZXRob2RzIChkb2N1bWVudGVkIGluIG1haW4gY29kZSkgKi9cclxuICAgIGluaXQgOiBpbml0LFxyXG4gICAgZW5hYmxlRHJhZyA6IGVuYWJsZURyYWcsXHJcbiAgICBlbmFibGVEaXZzIDogZW5hYmxlRGl2cyxcclxuICAgIHJvd09wYWNpdHkgOiByb3dPcGFjaXR5LFxyXG4gICAgZ2V0U2Nyb2xsUG9zaXRpb24gOiBnZXRTY3JvbGxQb3NpdGlvbixcclxuICAgIGdldFN0eWxlIDogZ2V0U3R5bGUsXHJcbiAgICBmaW5kUGFyZW50IDogZmluZFBhcmVudCxcclxuICAgIGV2ZW50IDogZXZlbnRcclxuICB9O1xyXG59KCkpO1xyXG5cclxuXHJcbmlmICghUkVESVBTLmV2ZW50KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBSRURJUFMuZXZlbnQgaXNuJ3QgYWxyZWFkeSBkZWZpbmVkIChmcm9tIG90aGVyIFJFRElQUyBmaWxlKVxyXG57XHJcbiAgUkVESVBTLmV2ZW50ID0gKGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHZhciBhZGQ7XHJcbiAgICB2YXIgcmVtb3ZlO1xyXG5cclxuICAgIGFkZCA9IGZ1bmN0aW9uIChvYmosIGV2ZW50TmFtZSwgaGFuZGxlcikgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBldmVudCBsaXN0ZW5lclxyXG4gICAge1xyXG4gICAgICBpZiAob2JqLmFkZEV2ZW50TGlzdGVuZXIpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCBmYWxzZSk7ICAgICAgICAvLyAoZmFsc2UpIHJlZ2lzdGVyIGV2ZW50IGluIGJ1YmJsZSBwaGFzZSAoZXZlbnQgcHJvcGFnYXRlcyBmcm9tIGZyb20gdGFyZ2V0IGVsZW1lbnQgdXAgdG8gdGhlIERPTSByb290KVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKG9iai5hdHRhY2hFdmVudCkgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmouYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgaGFuZGxlcik7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBcclxuICAgICAge1xyXG4gICAgICAgIG9ialsnb24nICsgZXZlbnROYW1lXSA9IGhhbmRsZXI7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gKG9iaiwgZXZlbnROYW1lLCBoYW5kbGVyKSAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVyXHJcbiAgICB7XHJcbiAgICAgIGlmIChvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcikgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChvYmouZGV0YWNoRXZlbnQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLmRldGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmpbJ29uJyArIGV2ZW50TmFtZV0gPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7IGFkZDogYWRkLCByZW1vdmU6IHJlbW92ZSB9O1xyXG4gIH0oKSk7XHJcbn0iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciByZWRpcHMgPSB7fTtcclxuXHJcbnJlZGlwcy5pbml0ID0gZnVuY3Rpb24gKCkgXHJcbntcclxuICB2YXIgcmQgPSBSRURJUFMuZHJhZzsgICAvLyByZWZlcmVuY2UgdG8gdGhlIFJFRElQUy5kcmFnIGxpYnJhcnlcclxuXHJcbiAgcmQuaW5pdCgpO1xyXG5cclxuICAvL3JkLmNsb25lLmtleURpdiA9IHJkLmNsb25lLmtleVJvdyA9IHRydWU7ICAgLy8gZW5hYmxlIGNsb25lIGVsZW1lbnQgYW5kIGNsb25lIHJvdyB3aXRoIHNoaWZ0IGtleVxyXG5cclxuICByZC5ldmVudC5yb3dEcm9wcGVkID0gZnVuY3Rpb24gKG5ld1BhcmVudFJvdylcclxuICB7XHJcbiAgICB2YXIgbW92ZWRJRCAgICAgICA9IHBhcnNlSW50KHJkLm9iak9sZC5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSk7XHJcbiAgICB2YXIgbmV3UGFyZW50SUQgICA9IHBhcnNlSW50KG5ld1BhcmVudFJvdy5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSk7XHJcbiAgICBzcHJlYWRTaGVldC5tb3ZlTm9kZShtb3ZlZElELCBuZXdQYXJlbnRJRCk7XHJcbiAgfTtcclxuXHJcbiAgcmQuZXZlbnQucm93RHJvcHBlZFNvdXJjZSA9IGZ1bmN0aW9uICgpICAgICAgICAgLy8gcm93IHdhcyBkcm9wcGVkIHRvIHRoZSBzb3VyY2UgLSBldmVudCBoYW5kbGVyLCBtaW5pIHRhYmxlIChjbG9uZWQgcm93KSB3aWxsIGJlIGRlbGV0ZWQgYW5kIHNvdXJjZSByb3cgc2hvdWxkIHJldHVybiB0byBvcmlnaW5hbCBzdGF0ZVxyXG4gIHtcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAxMDApOyAgICAgICAgICAgICAgICAvLyBtYWtlIHNvdXJjZSByb3cgY29tcGxldGVseSB2aXNpYmxlIChubyBvcGFjaXR5KVxyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd01vdmVkID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iaiwgODUpOyAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIG1vdmVkIHJvdywgcmQub2JqIGlzIHJlZmVyZW5jZSBvZiBjbG9uZWQgcm93IChtaW5pIHRhYmxlKVxyXG4gICAgcmQucm93T3BhY2l0eShyZC5vYmpPbGQsIDIwLCAnV2hpdGUnKTsgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBzb3VyY2Ugcm93IGFuZCBjaGFuZ2Ugc291cmNlIHJvdyBiYWNrZ3JvdW5kIGNvbG9yLCBvYmoub2JqT2xkIGlzIHJlZmVyZW5jZSBvZiBzb3VyY2Ugcm93XHJcbiAgfTtcclxuXHJcbiAgcmQuZXZlbnQucm93Q2xpY2tlZCAgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Tm90TW92ZWQgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Q2xvbmVkICAgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Tm90Q2xvbmVkID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93RGVsZXRlZCAgID0gZnVuY3Rpb24gKCkge307XHJcblxyXG4gIHJkLmV2ZW50LnJvd1VuZGVsZXRlZCA9IGZ1bmN0aW9uICgpICAgICAgICAgICAgIC8vIHJvdyBpcyB1bmRlbGV0ZWQgKHJldHVybiBzb3VyY2Ugcm93IHRvIG9yaWdpbmFsIHN0YXRlKVxyXG4gIHtcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAxMDApO1xyXG4gIH07XHJcbn07XHJcbiIsInZhciByZXNpemVDb2x1bW5MZWZ0ID0gMDtcclxudmFyIHJlc2l6ZUZpZWxkID0gJzAnO1xyXG52YXIgTUlOX0NPTFVNTl9XSURUSCA9IDcwO1xyXG52YXIgR1JJUFNfV0lEVEggPSAxNjtcclxuXHJcbnZhciBzdGFydFJlc2l6ZSA9IGZ1bmN0aW9uKGUsIGdyaXApXHJcbntcclxuICAkKGRvY3VtZW50KS5iaW5kKCd0b3VjaG1vdmUucmVzaXplQ29sR3JpcCBtb3VzZW1vdmUucmVzaXplQ29sR3JpcCcsIHJlc2l6ZURyYWcpLmJpbmQoJ3RvdWNoZW5kLnJlc2l6ZUNvbEdyaXAgbW91c2V1cC5yZXNpemVDb2xHcmlwJywgcmVzaXplRW5kKTtcclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUubGVmdCA9IGUucGFnZVggKyAncHgnO1xyXG5cclxuICByZXNpemVDb2x1bW5MZWZ0ID0gJChncmlwLnBhcmVudE5vZGUpLnBvc2l0aW9uKCkubGVmdDsgICAgICAgICAgICAgICAgICAgIC8vc2F2ZSB0aGUgbGVmdCBwb3NpdGlvbiBvZiB0aGUgY29sdW1uIGJlaW5nIHJlc2l6ZWRcclxuICByZXNpemVGaWVsZCA9IGdyaXAucGFyZW50Tm9kZS5pZC5yZXBsYWNlKCdjb2xIZWFkZXInLCAnJyk7ICAgICAgICAgICAgICAgIC8vc2F2ZSB0aGUgZmllbGQgb2YgdGhlIGNvbHVtbiBiZWluZyByZXNpemVkXHJcbn07XHJcblxyXG52YXIgcmVzaXplRW5kID0gZnVuY3Rpb24oZSlcclxue1xyXG4gICQoZG9jdW1lbnQpLnVuYmluZCgndG91Y2htb3ZlLnJlc2l6ZUNvbEdyaXAgbW91c2Vtb3ZlLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVEcmFnKS51bmJpbmQoJ3RvdWNoZW5kLnJlc2l6ZUNvbEdyaXAgbW91c2V1cC5yZXNpemVDb2xHcmlwJywgcmVzaXplRW5kKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuXHJcbiAgdmFyIG5ld1dpZHRoID0gZS5wYWdlWCAtIHJlc2l6ZUNvbHVtbkxlZnQgLSBHUklQU19XSURUSDtcclxuXHJcbiAgaWYobmV3V2lkdGggPCBNSU5fQ09MVU1OX1dJRFRIKVxyXG4gIHtcclxuICAgIG5ld1dpZHRoID0gTUlOX0NPTFVNTl9XSURUSDtcclxuICB9XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xIZWFkZXJJbnB1dCcgKyByZXNpemVGaWVsZCkuc3R5bGUud2lkdGggPSBuZXdXaWR0aCArICdweCc7ICAgIC8vcmVzaXplIHRoZSB3aWR0aCBvZiB0aGUgY29sdW1uIGhlYWRlclxyXG5cclxuICAvL3Jlc2l6ZSB0aGUgd2lkdGggb2YgZXZlcnkgY2VsbCBpbiB0aGUgY29sdW1uXHJcbiAgdmFyIGNvbHVtbkNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpZWxkSW5wdXQnICsgcmVzaXplRmllbGQpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY29sdW1uQ2VsbHMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgY29sdW1uQ2VsbHNbaV0uc3R5bGUud2lkdGggPSAobmV3V2lkdGggKyA4KSArICdweCc7XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHJlc2l6ZURyYWcgPSBmdW5jdGlvbihlKVxyXG57XHJcbiAgaWYoZS5wYWdlWCA+IHJlc2l6ZUNvbHVtbkxlZnQgKyBNSU5fQ09MVU1OX1dJRFRIICsgR1JJUFNfV0lEVEgpXHJcbiAge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS5sZWZ0ID0gZS5wYWdlWCArICdweCc7ICAgICAgLy9tb3ZlIHRoZSByZXNpemUgbGluZSBhcyB0aGUgdXNlciBkcmFncyBpdFxyXG4gIH1cclxufTsiLCIiLCJ2YXIgZmllbGRNZW51Q29udHJvbGxlciA9XHJcbntcclxuICBkaXNwbGF5RmllbGRNZW51OiBmdW5jdGlvbihmaWVsZE5hbWUsIHgsIHkpIFxyXG4gIHtcclxuICAgIHZhciBmaWVsZCA9IHByb2plY3QuZ2V0RmllbGQoZmllbGROYW1lKTtcclxuICAgICAgXHJcbiAgICB0aGlzLm1lbnUgPSBuZXcgRmllbGRNZW51KGZpZWxkLCBzcHJlYWRTaGVldC5maWVsZHMpO1xyXG4gICAgXHJcbiAgICBmaWVsZE1lbnVWaWV3LnJlbmRlcih0aGlzLm1lbnUsIHgsIHkpOyAgICBcclxuICB9LFxyXG4gIGhhbmRsZUNsaWNrOiBmdW5jdGlvbihtZW51SXRlbUlEKVxyXG4gIHtcclxuICAgIHZhciBjbGlja2VkID0gdGhpcy5tZW51LmdldE1lbnVJdGVtKG1lbnVJdGVtSUQsIHRoaXMubWVudSk7XHJcbiAgICB2YXIgcGFyZW50ID0gdGhpcy5tZW51LmdldE1lbnVJdGVtUGFyZW50KG1lbnVJdGVtSUQsIHRoaXMubWVudSk7XHJcbiAgXHJcbiAgICBpZihjbGlja2VkLmZpZWxkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgdGhlIG1lbnUgaXRlbSBkb2Vzbid0IGhhdmUgYSBmaWVsZCB0aGVuIGlnbm9yZSBpdFxyXG4gICAge1xyXG4gICAgICB2YXIgZmllbGQgPSBwcm9qZWN0LmdldEZpZWxkKGNsaWNrZWQuZmllbGQubmFtZSk7XHJcbiAgICAgIGZpZWxkW2NsaWNrZWQudmFyTmFtZV0gPSBjbGlja2VkLnZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2V0IHZhbHVlIGZvciB0aGUgZmllbGQgaW4gdGhlIG1vZGVsIGJhc2VkIG9uIHRoZSBjbGlja2VkIG1lbnUgaXRlbVxyXG4gICAgXHJcbiAgICAgIGZpZWxkTWVudVZpZXcuc2V0Q2hlY2ttYXJrcyhtZW51SXRlbUlELCBwYXJlbnQuaXRlbXMpO1xyXG5cclxuICAgICAgaWYocGFyZW50ID09PSB0aGlzLm1lbnUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGlzIGlzIGEgdG9wIGxldmVsIG1lbnUgaXRlbSB0aGVuIHVwZGF0ZSB0aGUgZm9ybWF0dGluZywgc2luY2Ugd2Ugb25seSB3YW50IHRvIGRvIHRoaXMgb25jZSBwZXIgY2xpY2tcclxuICAgICAge1xyXG4gICAgICAgIHNwcmVhZFNoZWV0LnVwZGF0ZU51bWJlckZpZWxkRm9ybWF0dGluZyhmaWVsZCk7XHJcbiAgICAgIH1cclxuICAgIH0gICAgXHJcbiAgfVxyXG59OyIsIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKClcclxue1xyXG4gIHNjcm9sbEJhcldpZHRoID0gZ2V0U2Nyb2xsQmFyV2lkdGgoKTsgIC8vZ2V0IHRoZSBzY3JvbGxiYXIgd2lkdGggZm9yIHRoZSBicm93c2VyLCB0byB1c2UgbGF0ZXIgZm9yIHNpemluZyBvdGhlciBlbGVtZW50cyBcclxuICBobXMuaW5pdCgpO1xyXG59KTtcclxuXHJcbnZhciBobXMgPSBcclxue1xyXG4gIGluaXQ6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICBwcm9qZWN0cy5pbml0KGZ1bmN0aW9uKHByb2plY3RzKSB7IGhlYWRlclZpZXcucmVuZGVyKHByb2plY3RzKTsgfSk7ICAgXHJcbiAgfSxcclxuICBvcGVuUHJvamVjdDogZnVuY3Rpb24ocHJvamVjdElEKVxyXG4gIHtcclxuICAgIHByb2plY3RzLm9wZW5Qcm9qZWN0KHByb2plY3RJRCwgZnVuY3Rpb24odHJlZSlcclxuICAgIHtcclxuICAgICAgcHJvamVjdC50cmVlID0gdHJlZTtcclxuICAgICAgXHJcbiAgICAgICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvdmVyc2lvbnM/cHJvamVjdElEPScgKyBwcm9qZWN0SUQgfSkuZG9uZShmdW5jdGlvbih2ZXJzaW9ucylcclxuICAgICAge1xyXG4gICAgICAgIGhlYWRlclZpZXcucmVmcmVzaChKU09OLnBhcnNlKHZlcnNpb25zKS52ZXJzaW9ucyk7XHJcbiAgICAgICAgaG1zLnNlbGVjdFZpZXcoaGVhZGVyVmlldy5zZWxlY3RlZFZpZXcoKSk7XHJcbiAgICAgICAgaG1zLnZlcnNpb25DdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgICBoZWFkZXJWaWV3LnNldFZlcnNpb25DdXJyZW50KCk7XHJcbiAgICAgICAgaG1zLnN0YXJ0VmVyc2lvbkNoZWNraW5nKCk7XHJcbiAgICAgIH0pOyAgICBcclxuICAgIH0pOyAgICAgXHJcbiAgfSxcclxuICBzdGFydFZlcnNpb25DaGVja2luZzogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIGNsZWFySW50ZXJ2YWwoaG1zLnZlcnNpb25DaGVja0ludGVydmFsKTtcclxuICAgIGhtcy52ZXJzaW9uQ2hlY2tJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkgXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3QuZ2V0Q3VycmVudFZlcnNpb24oZnVuY3Rpb24odmVyc2lvbilcclxuICAgICAge1xyXG4gICAgICAgIGlmKGhtcy52ZXJzaW9uQ3VycmVudCAmJiB2ZXJzaW9uID4gcHJvamVjdC50cmVlLnZlcnNpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaG1zLnZlcnNpb25DdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgICAgICBoZWFkZXJWaWV3LnNldFZlcnNpb25PdXRPZkRhdGUoKTtcclxuICAgICAgICAgICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvdmVyc2lvbnM/cHJvamVjdElEPScgKyBwcm9qZWN0LnRyZWUucHJvamVjdElEIH0pLmRvbmUoZnVuY3Rpb24odmVyc2lvbnMpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGhlYWRlclZpZXcucmVmcmVzaChKU09OLnBhcnNlKHZlcnNpb25zKS52ZXJzaW9ucyk7XHJcbiAgICAgICAgICAgIGhlYWRlclZpZXcuc2VsZWN0VmVyc2lvbihwcm9qZWN0LnRyZWUudmVyc2lvbik7XHJcbiAgICAgICAgICB9KTsgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKCFobXMudmVyc2lvbkN1cnJlbnQgJiYgdmVyc2lvbiA9PT0gcHJvamVjdC50cmVlLnZlcnNpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaG1zLnZlcnNpb25DdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgICAgIGhlYWRlclZpZXcuc2V0VmVyc2lvbkN1cnJlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgMTAwMCk7ICAgIFxyXG4gIH0sXHJcbiAgb3BlblNhdmVEQkRpYWxvZzogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHByb2plY3QuZ2V0Q3VycmVudFZlcnNpb24oZnVuY3Rpb24oY3VycmVudFZlcnNpb24pIFxyXG4gICAgeyBcclxuICAgICAgc2F2ZURCRGlhbG9nLnJlbmRlcihwcm9qZWN0LnRyZWUudmVyc2lvbiwgcHJvamVjdC50cmVlLnZlcnNpb25MYWJlbCwgcHJvamVjdC50cmVlLnZlcnNpb25EYXRlLCBjdXJyZW50VmVyc2lvbisxKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgc2F2ZVRvRGF0YWJhc2U6IGZ1bmN0aW9uKCkgXHJcbiAgeyBcclxuICAgIHByb2plY3Quc2F2ZVRvRGF0YWJhc2UoZnVuY3Rpb24oKSB7IGhtcy5vcGVuUHJvamVjdChwcm9qZWN0LnRyZWUucHJvamVjdElEKTsgfSk7XHJcbiAgfSxcclxuICBzZWxlY3RWaWV3OiBmdW5jdGlvbih2aWV3SUQpXHJcbiAge1xyXG4gICAgaWYocHJvamVjdC50cmVlKVxyXG4gICAge1xyXG4gICAgICBpZih0aGlzLnZpZXcpIHsgdGhpcy52aWV3LmRlc3Ryb3koKTsgfVxyXG4gICAgICB0aGlzLnNob3dWaWV3KHZpZXdJRCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBzZWxlY3RWZXJzaW9uOiBmdW5jdGlvbih2ZXJzaW9uKVxyXG4gIHtcclxuICAgIHByb2plY3RzLm9wZW5Qcm9qZWN0VmVyc2lvbihwcm9qZWN0LnRyZWUucHJvamVjdElELCB2ZXJzaW9uLCBmdW5jdGlvbih0cmVlKVxyXG4gICAge1xyXG4gICAgICBwcm9qZWN0LnRyZWUgPSB0cmVlO1xyXG4gICAgICBobXMuc2VsZWN0VmlldyhoZWFkZXJWaWV3LnNlbGVjdGVkVmlldygpKTtcclxuICAgIH0pO1xyXG4gIH0sICBcclxuICBzaG93VmlldzogZnVuY3Rpb24odmlld0lEKVxyXG4gIHtcclxuICAgIHN3aXRjaCh2aWV3SUQpXHJcbiAgICB7XHJcbiAgICAgIGNhc2UgU1BSRUFEU0hFRVRfVklFVzpcclxuICAgICAgICB0aGlzLnZpZXcgPSBzcHJlYWRTaGVldFZpZXc7XHJcbiAgICAgICAgc3ByZWFkU2hlZXQuZGlzcGxheSgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICAgIFxyXG4gICAgICBjYXNlIFRSRUVfVklFVzpcclxuICAgICAgICB0aGlzLnZpZXcgPSB0cmVlVmlldztcclxuICAgICAgICB0cmVlLmRpc3BsYXlUcmVlKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgXHJcbiAgICAgIGNhc2UgV0VJR0hURURfVFJFRV9WSUVXOlxyXG4gICAgICAgIHRoaXMudmlldyA9IHdlaWdodGVkVHJlZVZpZXc7XHJcbiAgICAgICAgdHJlZS5kaXNwbGF5V2VpZ2h0ZWRUcmVlKCk7XHJcbiAgICAgICAgYnJlYWs7IFxyXG4gICAgICAgIFxyXG4gICAgICBjYXNlIENJUkNMRV9WSUVXOlxyXG4gICAgICAgIHRoaXMudmlldyA9IGNpcmNsZVZpZXc7XHJcbiAgICAgICAgY2lyY2xlVmlldy5kaXNwbGF5KCk7XHJcbiAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgIFxyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGNyZWF0ZU5ld1Byb2plY3Q6IGZ1bmN0aW9uKG5ld1Byb2plY3ROYW1lKVxyXG4gIHsgIFx0XHJcbiAgICBwcm9qZWN0cy5jcmVhdGVOZXdQcm9qZWN0KG5ld1Byb2plY3ROYW1lLCBmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvdmVyc2lvbnM/cHJvamVjdElEPScgKyBwcm9qZWN0LnRyZWUucHJvamVjdElEIH0pLmRvbmUoZnVuY3Rpb24odmVyc2lvbnMpXHJcbiAgICAgIHtcclxuICAgICAgICBoZWFkZXJWaWV3LnJlZnJlc2goSlNPTi5wYXJzZSh2ZXJzaW9ucykudmVyc2lvbnMpO1xyXG4gICAgICAgIGhtcy5zZWxlY3RWaWV3KGhlYWRlclZpZXcuc2VsZWN0ZWRWaWV3KCkpO1xyXG4gICAgICAgIGhtcy5zdGFydFZlcnNpb25DaGVja2luZygpO1xyXG4gICAgICB9KTtcclxuICAgIH0pOyAgICAgXHJcbiAgfSxcclxuICBuZXh0UHJvamVjdElEOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuIHByb2plY3RzLm5leHRQcm9qZWN0SUQoKTtcclxuICB9LFxyXG4gIGV4cGFuZFRvTGV2ZWw6IGZ1bmN0aW9uKGxldmVsKVxyXG4gIHtcclxuICAgIHByb2plY3QuZXhwYW5kVG9MZXZlbChwcm9qZWN0LnRyZWUsIGxldmVsKTtcclxuICAgIC8vVE9ETzogdGhlIGZvbGxvd2luZyBuZWVkcyB0byBiZSByZWZhY3RvcmVkXHJcbiAgICBpZih0aGlzLnZpZXcgPT09IHNwcmVhZFNoZWV0VmlldykgeyBzcHJlYWRTaGVldC5kaXNwbGF5KCk7IH1cclxuICAgIGVsc2UgaWYodGhpcy52aWV3ID09PSB0cmVlVmlldykgeyB0cmVlVmlldy5yZWZyZXNoKCk7IH1cclxuICAgIGVsc2UgaWYodGhpcy52aWV3ID09PSB3ZWlnaHRlZFRyZWVWaWV3KSB7IHdlaWdodGVkVHJlZVZpZXcucmVmcmVzaCgpOyB9ICAgXHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHNjcm9sbEJhcldpZHRoO1xyXG52YXIgZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbigpIFxyXG57XHJcbiAgdmFyIGRpdiwgd2lkdGg7XHJcbiAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZGl2LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPVwid2lkdGg6NTBweDtoZWlnaHQ6NTBweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi01MHB4O3RvcDotNTBweDtvdmVyZmxvdzphdXRvO1wiPjxkaXYgc3R5bGU9XCJ3aWR0aDoxcHg7aGVpZ2h0OjEwMHB4O1wiPjwvZGl2PjwvZGl2Pic7XHJcbiAgZGl2ID0gZGl2LmZpcnN0Q2hpbGQ7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xyXG4gIHdpZHRoID0gZGl2Lm9mZnNldFdpZHRoIC0gZGl2LmNsaWVudFdpZHRoO1xyXG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KTtcclxuICByZXR1cm4gd2lkdGg7XHJcbn07IiwidmFyIHNwcmVhZFNoZWV0ID0gXHJcbntcclxuICBkaXNwbGF5OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcHJvamVjdC5jbGVhbnNlRGF0YSgpOyAgICAgICAgICAgICAgICAgIC8vcmVxdWlyZWQgdG8gcmVtb3ZlIGNpcmN1bGFyIHJlZmVyZW5jZXMgdGhhdCBvdGhlciB2aWV3cyBtYXkgYWRkXHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVuZGVyKHByb2plY3QudHJlZSk7XHJcbiAgfSxcclxuICBmaWVsZHM6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC5maWVsZHMoKTtcclxuICB9LFxyXG4gIHRyZWU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC50cmVlO1xyXG4gIH0sXHJcbiAgdXBkYXRlRmllbGRWYWx1ZTogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQpXHJcbiAge1xyXG4gICAgdmFyIG5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgXHJcbiAgICBpZihub2RlKVxyXG4gICAge1xyXG4gICAgICBpZighbm9kZS52YWx1ZXMpIHsgbm9kZS52YWx1ZXMgPSB7fTsgfVxyXG4gICAgICBub2RlLnZhbHVlc1tmaWVsZE5hbWVdID0gc3ByZWFkU2hlZXRWaWV3LmdldEZpZWxkVmFsdWUoZmllbGROYW1lLCBub2RlSUQpOyAgICAgXHJcbiAgICB9ICBcclxuICBcclxuICAgIC8vVE9ETzogc2hvdWxkIHBlcmZvcm0gdGhlIGFnZ3JlZ2F0aW9uIGJhc2VkIG9uIHRoZSBmaWVsZCBzZXR0aW5ncyBmb3IgYWdncmVnYXRpbmcgdGhpcyBmaWVsZFxyXG4gICAgcHJvamVjdC50cmVlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIFxyXG4gICAge1xyXG4gICAgICBhZ2dyZWdhdGVfYW55KGNoaWxkLCBmaWVsZE5hbWUpO1xyXG4gICAgfSk7ICAgIFxyXG4gIH0sXHJcbiAgcmF3VmFsdWU6IGZ1bmN0aW9uKGZpZWxkTmFtZSwgbm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShwYXJzZUludChub2RlSUQpKTtcclxuICAgIFxyXG4gICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbZmllbGROYW1lXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIG5vZGUudmFsdWVzW2ZpZWxkTmFtZV07XHJcbiAgICB9ICBcclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGZvcm1hdHRlZFZhbHVlOiBmdW5jdGlvbihmaWVsZCwgbm9kZSlcclxuICB7XHJcbiAgICBpZihub2RlLnZhbHVlcyAmJiBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIEZpZWxkLmZvcm1hdFZhbHVlKGZpZWxkLCBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgIHByb2plY3QuYWRkRmllbGQoZmllbGROYW1lKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5hZGRGaWVsZChmaWVsZE5hbWUpO1xyXG4gIH0sXHJcbiAgaGFzQ2hpbGRyZW46IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuICFwcm9qZWN0LmlzTm9kZUNoaWxkbGVzcyhub2RlKTtcclxuICB9LFxyXG4gIGNoaWxkcmVuSGlkZGVuOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChub2RlKTtcclxuICB9LFxyXG4gIG1vdmVOb2RlOiBmdW5jdGlvbihub2RlSUQsIG5ld1BhcmVudElEKVxyXG4gIHtcclxuICAgIHZhciBuZXdQYXJlbnROb2RlID0gcHJvamVjdC5maW5kTm9kZShuZXdQYXJlbnRJRCk7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICBcclxuICAgIHNwcmVhZFNoZWV0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgICBwcm9qZWN0LmFkZE5vZGUobm9kZSwgbmV3UGFyZW50Tm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldC5hZGROb2RlKG5vZGUsIG5ld1BhcmVudE5vZGUpOyAgICBcclxuICB9LFxyXG4gIHJlbW92ZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIHBhcmVudE5vZGUgPSBwcm9qZWN0LmZpbmRQYXJlbnQobm9kZS5pZCk7XHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5yZW1vdmVOb2RlLCBub2RlKTtcclxuICAgIHByb2plY3QucmVtb3ZlTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZWRyYXdOb2RlQ29udGVudChwYXJlbnROb2RlKTsgICAgICAgICAgLy9pZiB0aGUgcGFyZW50IGlzIGNoaWxkbGVzcyBub3csIHRoZW4gaGlkZSB0aGUgb2xkIHBhcmVudCdzIGV4cGFuZC9jb2xsYXBzZSBpY29uICAgICBcclxuICB9LFxyXG4gIGRlbGV0ZU5vZGU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICAgIHNwcmVhZFNoZWV0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgfSxcclxuICBhZGROb2RlOiBmdW5jdGlvbihub2RlLCBwYXJlbnROb2RlKVxyXG4gIHtcclxuICAgIGlmKHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKHBhcmVudE5vZGUpKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAge1xyXG4gICAgICBzcHJlYWRTaGVldC5leHBhbmROb2RlKHBhcmVudE5vZGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQocGFyZW50Tm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuaW5zZXJ0Tm9kZUFmdGVyKG5vZGUsIHBhcmVudE5vZGUpOyAgICAgIC8vYWRkIHRoZSBtb3ZlZCBub2RlIGFuZCBpdHMgZGVzY2VuZGFudHMgdG8gdGhlIG5ldyBwYXJlbnQgaW4gdGhlIHZpZXdcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZW5kZXJFeHBhbmRlcigpOyAgXHJcbiAgfSxcclxuICBjb3B5Tm9kZTogZnVuY3Rpb24obm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBzb3VyY2VOb2RlID0gcHJvamVjdC5maW5kTm9kZShub2RlSUQpO1xyXG4gICAgdmFyIG5ld05vZGUgPSBwcm9qZWN0LmNsb25lTm9kZShzb3VyY2VOb2RlKTtcclxuICAgIHByb2plY3QuaW5zZXJ0Tm9kZShuZXdOb2RlLCBzb3VyY2VOb2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5pbnNlcnROb2RlQmVmb3JlKG5ld05vZGUsIHNvdXJjZU5vZGUpOyAgICBcclxuICB9LFxyXG4gIGV4cGFuZE5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcHJvamVjdC5leHBhbmROb2RlKG5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXRWaWV3LmV4cGFuZE5vZGUobm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQobm9kZSk7ICAgICAgXHJcbiAgfSxcclxuICBjb2xsYXBzZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZURlc2NlbmRhbnRzKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5yZW1vdmVOb2RlLCBub2RlKTsgICAgXHJcbiAgICBwcm9qZWN0LmNvbGxhcHNlTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZWRyYXdOb2RlQ29udGVudChub2RlKTsgICAgIFxyXG4gIH0sXHJcbiAgdG9nZ2xlTm9kZTogZnVuY3Rpb24obm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShub2RlSUQpO1xyXG4gICAgXHJcbiAgICBpZihwcm9qZWN0LmlzTm9kZUV4cGFuZGVkKG5vZGUpKVxyXG4gICAge1xyXG4gICAgICBzcHJlYWRTaGVldC5jb2xsYXBzZU5vZGUobm9kZSk7ICAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZSBpZihwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChub2RlKSlcclxuICAgIHtcclxuICAgICAgc3ByZWFkU2hlZXQuZXhwYW5kTm9kZShub2RlKTsgXHJcbiAgICB9ICBcclxuICB9LFxyXG4gIHVwZGF0ZU5vZGVOYW1lOiBmdW5jdGlvbihub2RlSUQsIG5ld05hbWUpXHJcbiAge1xyXG4gICAgcHJvamVjdC5maW5kTm9kZShub2RlSUQpLm5hbWUgPSBuZXdOYW1lOyAgICBcclxuICB9LFxyXG4gIHVwZGF0ZU51bWJlckZpZWxkRm9ybWF0dGluZzogZnVuY3Rpb24oZmllbGQpXHJcbiAge1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZShwcm9qZWN0LmdldENoaWxkcmVuLCBmdW5jdGlvbihub2RlKVxyXG4gICAgeyAgICAgIFxyXG4gICAgICBpZihub2RlLnZhbHVlcylcclxuICAgICAge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IEZpZWxkLmZvcm1hdFZhbHVlKGZpZWxkLCBOdW1iZXIobm9kZS52YWx1ZXNbZmllbGQubmFtZV0pKTsgICAgICAgICAgICAgICAgLy9nZXQgdGhlIHZhbHVlIGZyb20gdGhlIG1vZGVsXHJcbiAgICAgICAgc3ByZWFkU2hlZXRWaWV3LnVwZGF0ZUZpZWxkVmFsdWUoZmllbGQubmFtZSwgbm9kZS5pZCwgdmFsdWUpO1xyXG4gICAgICB9ICAgICAgXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGVuYWJsZURyYWdnaW5nOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgc3ByZWFkU2hlZXRWaWV3LmVuYWJsZURyYWdnaW5nLCBub2RlKTsgICAgXHJcbiAgfSAgXHJcbn07IiwidmFyIHRyZWUgPVxyXG57XHJcbiAgZGlzcGxheVRyZWU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB0aGlzLmRhdGEgPSBwcm9qZWN0LnRyZWU7XHJcbiAgICB0aGlzLmZpZWxkID0gcHJvamVjdC5maWVsZHMoKVswXTtcclxuICAgIHRyZWVWaWV3LnJlbmRlcigpO1xyXG4gIH0sXHJcbiAgZGlzcGxheVdlaWdodGVkVHJlZTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHRoaXMuZGF0YSA9IHByb2plY3QudHJlZTtcclxuICAgIHRoaXMuZmllbGQgPSBwcm9qZWN0LmZpZWxkcygpWzBdO1xyXG4gICAgdGhpcy5tYXhGaWVsZFZhbHVlID0gdGhpcy5jYWxjTWF4RmllbGRWYWx1ZSgpO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5yZW5kZXIoKTtcclxuICB9LCAgXHJcbiAgY2FsY01heEZpZWxkVmFsdWU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB2YXIgbWF4VmFsdWUgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICBcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgZnVuY3Rpb24obm9kZSkgXHJcbiAgICB7XHJcbiAgICAgIGlmKG5vZGUudmFsdWVzKVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gbm9kZS52YWx1ZXNbdHJlZS5maWVsZC5uYW1lXTtcclxuICAgICAgICBpZih2YWx1ZSA+IG1heFZhbHVlKSB7IG1heFZhbHVlID0gdmFsdWU7IH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiBtYXhWYWx1ZTtcclxuICB9XHJcbn07IiwidmFyIEZpZWxkID0gZnVuY3Rpb24obmFtZSlcclxue1xyXG4gIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgdGhpcy5kYXRhdHlwZSA9IEZpZWxkLk5VTUJFUjtcclxuICB0aGlzLmZvcm1hdCA9IEZpZWxkLk5VTUJFUl9GT1JNQVQ7XHJcbiAgdGhpcy5wcmVjaXNpb24gPSAyO1xyXG4gIHRoaXMuYWdnX3R5cGUgPSBGaWVsZC5OT19BR0dSRUdBVElPTjtcclxuICB0aGlzLmFnZ19xdHlfZmllbGQgPSBudWxsO1xyXG59O1xyXG5cclxuRmllbGQuTlVNQkVSID0gJzAnO1xyXG5GaWVsZC5TVFJJTkcgPSAnMSc7XHJcbkZpZWxkLkNIT0lDRSA9ICcyJztcclxuXHJcbkZpZWxkLk5PX0FHR1JFR0FUSU9OID0gJzAnO1xyXG5GaWVsZC5TVU1fQU5ZX0FHR1JFR0FUSU9OID0gJzEnO1xyXG5cclxuRmllbGQuTlVNQkVSX0ZPUk1BVCA9ICcwJztcclxuRmllbGQuUEVSQ0VOVF9GT1JNQVQgPSAnMSc7XHJcbkZpZWxkLlNDSUVOVElGSUNfRk9STUFUID0gJzInO1xyXG5cclxuRmllbGQuZm9ybWF0VmFsdWUgPSBmdW5jdGlvbihmaWVsZCwgdmFsdWUpXHJcbntcclxuICBpZihmaWVsZC5kYXRhdHlwZSA9PT0gRmllbGQuTlVNQkVSKVxyXG4gIHtcclxuICAgIHZhbHVlID0gTnVtYmVyKHZhbHVlKTsgICAgICAvL1RPRE86IGhhbmRsZSBjYXNlIHdoZXJlIHZhbHVlIGRvZXNuJ3QgcGFyc2UgdG8gYSBudW1iZXJcclxuICAgIFxyXG4gICAgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5OVU1CRVJfRk9STUFUKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gdmFsdWUudG9GaXhlZChmaWVsZC5wcmVjaXNpb24pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihmaWVsZC5mb3JtYXQgPT09IEZpZWxkLlBFUkNFTlRfRk9STUFUKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gKDEwMC4wICogdmFsdWUpLnRvRml4ZWQoZmllbGQucHJlY2lzaW9uKSArICclJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLnRvRXhwb25lbnRpYWwoZmllbGQucHJlY2lzaW9uKTtcclxuICAgIH1cclxuICB9XHJcbiAgZWxzZSBpZihmaWVsZC5kYXRhdHlwZSA9PT0gRmllbGQuU1RSSU5HKVxyXG4gIHtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9IFxyXG4gIGVsc2UgaWYoZmllbGQuZGF0YXR5cGUgPT09IEZpZWxkLkNIT0lDRSlcclxuICB7XHJcbiAgICAvL1RPRE86IGltcGxlbWVudFxyXG4gIH0gICAgICBcclxufTsgICIsInZhciBGaWVsZE1lbnUgPSBmdW5jdGlvbihmaWVsZCwgZmllbGRzKVxyXG57XHJcbiAgdmFyIG51bWJlckl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnTnVtYmVyJywgRmllbGQuTlVNQkVSLCAnZGF0YXR5cGUnLCBmaWVsZCk7XHJcbiAgdmFyIGZvcm1hdEl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnRm9ybWF0Jyk7XHJcbiAgXHJcbiAgdmFyIG51bWJlckZvcm1hdEl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnTnVtYmVyJywgRmllbGQuTlVNQkVSX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKTtcclxuICBudW1iZXJGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oJzAnLCAwLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB2YXIgZGlzcGxheVN0cmluZyA9ICcwLic7XHJcbiAgZm9yKHZhciBpID0gMTsgaSA8IDExOyBpKyspXHJcbiAge1xyXG4gICAgZGlzcGxheVN0cmluZyArPSAnMCc7XHJcbiAgICBudW1iZXJGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oZGlzcGxheVN0cmluZywgaSwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgfVxyXG4gIGZvcm1hdEl0ZW0uaXRlbXMucHVzaChudW1iZXJGb3JtYXRJdGVtKTtcclxuICBcclxuICB2YXIgcGVyY2VudEZvcm1hdEl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnUGVyY2VudCcsIEZpZWxkLlBFUkNFTlRfRk9STUFULCAnZm9ybWF0JywgZmllbGQpO1xyXG4gIHBlcmNlbnRGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oJzAlJywgMCwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgdmFyIGRpc3BsYXlTdHJpbmcgPSAnMC4nO1xyXG4gIGZvcih2YXIgaSA9IDE7IGkgPCAxMTsgaSsrKVxyXG4gIHtcclxuICAgIGRpc3BsYXlTdHJpbmcgKz0gJzAnO1xyXG4gICAgcGVyY2VudEZvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgRmllbGRNZW51SXRlbShkaXNwbGF5U3RyaW5nICsgJyUnLCBpLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB9XHJcbiAgZm9ybWF0SXRlbS5pdGVtcy5wdXNoKHBlcmNlbnRGb3JtYXRJdGVtKTtcclxuICBcclxuICB2YXIgc2NpZW50aWZpY0Zvcm1hdEl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnU2NpZW50aWZpYycsIEZpZWxkLlNDSUVOVElGSUNfRk9STUFULCAnZm9ybWF0JywgZmllbGQpO1xyXG4gIHNjaWVudGlmaWNGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oJzBlKzAnLCAwLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB2YXIgZGlzcGxheVN0cmluZyA9ICcwLic7XHJcbiAgZm9yKHZhciBpID0gMTsgaSA8IDExOyBpKyspXHJcbiAge1xyXG4gICAgZGlzcGxheVN0cmluZyArPSAnMCc7XHJcbiAgICBzY2llbnRpZmljRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKGRpc3BsYXlTdHJpbmcgKyAnZSswJywgaSwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgfVxyXG4gIGZvcm1hdEl0ZW0uaXRlbXMucHVzaChzY2llbnRpZmljRm9ybWF0SXRlbSk7ICBcclxuICBcclxuICBudW1iZXJJdGVtLml0ZW1zLnB1c2goZm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIGFnZ3JlZ2F0aW9uSXRlbSA9IG5ldyBGaWVsZE1lbnVJdGVtKCdBZ2dyZWdhdGlvbicpO1xyXG4gIGFnZ3JlZ2F0aW9uSXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCdObyBBZ2dyZWdhdGlvbicsIEZpZWxkLk5PX0FHR1JFR0FUSU9OLCAnYWdnX3R5cGUnLCBmaWVsZCkpO1xyXG4gIFxyXG4gIHZhciBzdW1BbnlBZ2dJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ1N1bSBhbnkgZGVmaW5lZCBjaGlsZHJlbicsIEZpZWxkLlNVTV9BTllfQUdHUkVHQVRJT04sICdhZ2dfdHlwZScsIGZpZWxkKTtcclxuICBcclxuICBmb3IodmFyIGluZGV4IGluIGZpZWxkcylcclxuICB7XHJcbiAgICB2YXIgZiA9IGZpZWxkc1tpbmRleF07XHJcbiAgICBcclxuICAgIGlmKGYubmFtZSAhPSBmaWVsZC5uYW1lKVxyXG4gICAge1xyXG4gICAgICBzdW1BbnlBZ2dJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oZi5uYW1lLCBmLm5hbWUsICdhZ2dfcXR5X2ZpZWxkJywgZmllbGQpKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgYWdncmVnYXRpb25JdGVtLml0ZW1zLnB1c2goc3VtQW55QWdnSXRlbSk7XHJcbiAgbnVtYmVySXRlbS5pdGVtcy5wdXNoKGFnZ3JlZ2F0aW9uSXRlbSk7XHJcbiAgXHJcbiAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gIHRoaXMuaXRlbXMucHVzaChudW1iZXJJdGVtKTtcclxuICB0aGlzLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oJ1RleHQnLCBGaWVsZC5TVFJJTkcsICdkYXRhdHlwZScsIGZpZWxkKSk7XHJcbiAgLy9UT0RPOiB0aGlzLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oJ0Nob2ljZScsIEZpZWxkLkNIT0lDRSwgJ2RhdGF0eXBlJywgZmllbGQpKTsgIFxyXG59O1xyXG5cclxuRmllbGRNZW51LnByb3RvdHlwZS5nZXRNZW51SXRlbSA9IGZ1bmN0aW9uKGlkLCBtZW51SXRlbSlcclxue1xyXG4gIGlmKGlkID09PSBtZW51SXRlbS5pZClcclxuICB7XHJcbiAgICByZXR1cm4gbWVudUl0ZW07XHJcbiAgfVxyXG4gIGVsc2UgaWYobWVudUl0ZW0uaXRlbXMgJiYgbWVudUl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICB2YXIgZm91bmQ7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbWVudUl0ZW0uaXRlbXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGZvdW5kID0gdGhpcy5nZXRNZW51SXRlbShpZCwgbWVudUl0ZW0uaXRlbXNbaV0pO1xyXG4gICAgICBpZihmb3VuZCkgeyByZXR1cm4gZm91bmQ7IH1cclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5GaWVsZE1lbnUucHJvdG90eXBlLmdldE1lbnVJdGVtUGFyZW50ID0gZnVuY3Rpb24oaWQsIG1lbnVJdGVtKVxyXG57XHJcbiAgaWYobWVudUl0ZW0uaXRlbXMgJiYgbWVudUl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbWVudUl0ZW0uaXRlbXMubGVuZ3RoOyBpKyspXHJcbiAgICB7IFxyXG4gICAgICBpZihtZW51SXRlbS5pdGVtc1tpXS5pZCA9PT0gaWQpXHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gbWVudUl0ZW07XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kID0gdGhpcy5nZXRNZW51SXRlbVBhcmVudChpZCwgbWVudUl0ZW0uaXRlbXNbaV0pO1xyXG4gICAgICAgIGlmKGZvdW5kKSB7IHJldHVybiBmb3VuZDsgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59OyIsInZhciBGaWVsZE1lbnVJdGVtID0gZnVuY3Rpb24oZGlzcGxheSwgdmFsdWUsIHZhck5hbWUsIGZpZWxkKVxyXG57XHJcbiAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTtcclxuICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgdGhpcy52YXJOYW1lID0gdmFyTmFtZTtcclxuICB0aGlzLmZpZWxkID0gZmllbGQ7XHJcbiAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gIHRoaXMuaWQgPSBGaWVsZE1lbnVJdGVtLmlkKys7XHJcbiAgdGhpcy5wYXJlbnQgPSAtMTtcclxuXHJcbiAgaWYoZmllbGQpXHJcbiAge1xyXG4gICAgdGhpcy5jaGVja2VkID0gZmllbGRbdmFyTmFtZV0gPT09IHZhbHVlO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdGhpcy5jaGVja2VkID0gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG5cclxuRmllbGRNZW51SXRlbS5pZCA9IDA7IiwidmFyIHByb2plY3QgPVxyXG57XHJcbiAgc2F2ZVRvRGF0YWJhc2U6IGZ1bmN0aW9uKGZpbmlzaEZuKVxyXG4gIHtcclxuICAgIHRoaXMuY2xlYW5zZURhdGEoKTtcclxuICAgICQuYWpheCh7IHR5cGU6ICdQT1NUJywgdXJsOiAnL2FwaS90cmVlJywgZGF0YVR5cGU6ICdqc29uJywgZGF0YTogeyBqc29uOiBKU09OLnN0cmluZ2lmeSh0aGlzLnRyZWUpIH0gfSkuZG9uZShmaW5pc2hGbigpKTtcclxuICB9LFxyXG4gIGdldEN1cnJlbnRWZXJzaW9uOiBmdW5jdGlvbihmaW5pc2hGbilcclxuICB7XHJcbiAgICAkLmFqYXgoeyB0eXBlOiAnR0VUJywgdXJsOiAnYXBpL3RyZWU/cHJvamVjdElEPScgKyB0aGlzLnRyZWUucHJvamVjdElEIH0pLmRvbmUoZnVuY3Rpb24oZGF0YSkgICAgICAgICAgICAgICAvL3JlYWQgdHJlZSBmb3IgdGhlIHNlbGVjdGVkIHByb2plY3QgZnJvbSB0aGUgZGF0YWJhc2VcclxuICAgIHtcclxuICAgICAgZmluaXNoRm4oZGF0YS52ZXJzaW9uKTtcclxuICAgIH0pOyAgICAgIFxyXG4gIH0sXHJcbiAgZmllbGRzOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuIHRoaXMudHJlZS5maWVsZHM7XHJcbiAgfSxcclxuICBjbGVhbnNlRGF0YTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHRoaXMudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgZnVuY3Rpb24obm9kZSlcclxuICAgIHtcclxuICAgICAgaWYoIW5vZGUuY2hpbGRyZW4pIHsgbm9kZS5jaGlsZHJlbiA9IFtdOyB9XHJcbiAgICAgIGRlbGV0ZSBub2RlLnBhcmVudDtcclxuICAgICAgZGVsZXRlIG5vZGUueDtcclxuICAgICAgZGVsZXRlIG5vZGUueDA7XHJcbiAgICAgIGRlbGV0ZSBub2RlLnk7XHJcbiAgICAgIGRlbGV0ZSBub2RlLnkwO1xyXG4gICAgfSk7ICAgIFxyXG4gIH0sXHJcbiAgYWRkRmllbGQ6IGZ1bmN0aW9uKGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICB0aGlzLnRyZWUuZmllbGRzLnB1c2gobmV3IEZpZWxkKGZpZWxkTmFtZSkpO1xyXG4gIH0sXHJcbiAgZ2V0RmllbGQ6IGZ1bmN0aW9uKGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICBmb3IodmFyIGkgaW4gdGhpcy50cmVlLmZpZWxkcylcclxuICAgIHtcclxuICAgICAgdmFyIGZpZWxkID0gdGhpcy50cmVlLmZpZWxkc1tpXTtcclxuICAgICAgaWYoZmllbGQubmFtZSA9PT0gZmllbGROYW1lKVxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIGZpZWxkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICByZW1vdmVOb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBwYXJlbnROb2RlID0gdGhpcy5maW5kUGFyZW50KG5vZGUuaWQpO1xyXG4gIFxyXG4gICAgaWYocGFyZW50Tm9kZSlcclxuICAgIHtcclxuICAgICAgcGFyZW50Tm9kZS5jaGlsZHJlbi5zcGxpY2UocGFyZW50Tm9kZS5jaGlsZHJlbi5pbmRleE9mKG5vZGUpLCAxKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgdGhpcy50cmVlLmNoaWxkcmVuLnNwbGljZSh0aGlzLnRyZWUuY2hpbGRyZW4uaW5kZXhPZihub2RlKSwgMSk7ICBcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBhZGROb2RlOiBmdW5jdGlvbihub2RlLCBwYXJlbnROb2RlKVxyXG4gIHtcclxuICAgIHBhcmVudE5vZGUuY2hpbGRyZW4ucHVzaChub2RlKTsgICAgICAgICAgICAvL2FkZCB0aGUgbW92ZWQgbm9kZSB0byBpdCdzIG5ldyBwYXJlbnQgaW4gdGhlIG1vZGVsXHJcbiAgICBwcm9qZWN0LnNldERlcHRocyhwYXJlbnROb2RlKTsgICAgICAgICAgICAgLy9zZXQgdGhlIG5ldyBkZXB0aCB2YWx1ZXMgZm9yIHRoZSBtb3ZlZCBub2RlcyAgICAgICBcclxuICB9LFxyXG4gIHNldERlcHRoczogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBub2RlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQsIGkpXHJcbiAgICB7XHJcbiAgICAgIGNoaWxkLmRlcHRoID0gbm9kZS5kZXB0aCArIDE7XHJcbiAgICAgIFxyXG4gICAgICBpZihjaGlsZC5kZXB0aCA+IHByb2plY3QudHJlZS5tYXhEZXB0aCkgXHJcbiAgICAgIHsgXHJcbiAgICAgICAgcHJvamVjdC50cmVlLm1heERlcHRoID0gY2hpbGQuZGVwdGg7IFxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBwcm9qZWN0LnNldERlcHRocyhjaGlsZCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGluc2VydE5vZGU6IGZ1bmN0aW9uKG5vZGUsIHNvdXJjZU5vZGUpXHJcbiAge1xyXG4gICAgdmFyIHBhcmVudE5vZGUgPSB0aGlzLmZpbmRQYXJlbnQoc291cmNlTm9kZS5pZCk7XHJcbiAgICBpZihwYXJlbnROb2RlKVxyXG4gICAge1xyXG4gICAgICBwYXJlbnROb2RlLmNoaWxkcmVuLnNwbGljZShwYXJlbnROb2RlLmNoaWxkcmVuLmluZGV4T2Yoc291cmNlTm9kZSksIDAsIG5vZGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICB0aGlzLnRyZWUuY2hpbGRyZW4uc3BsaWNlKHRoaXMudHJlZS5jaGlsZHJlbi5pbmRleE9mKHNvdXJjZU5vZGUpLCAwLCBub2RlKTtcclxuICAgIH0gICAgIFxyXG4gIH0sXHJcbiAgY2xvbmVOb2RlOiBmdW5jdGlvbihzb3VyY2VOb2RlKVxyXG4gIHtcclxuICAgIHZhciBuZXdOb2RlID0gJC5leHRlbmQodHJ1ZSwge30sIHNvdXJjZU5vZGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2Nsb25lIHRoZSBzb3VyY2Ugbm9kZVxyXG4gICAgdGhpcy50cmF2ZXJzZSh0aGlzLmdldENoaWxkcmVuLCBmdW5jdGlvbihub2RlKSB7IG5vZGUuaWQgPSBwcm9qZWN0LnRyZWUubmV4dE5vZGVJRCsrOyB9LCBuZXdOb2RlKTsgIC8vYXNzaWduIHVuaXF1ZSBpZHMgdG8gZWFjaCBub2RlIGluIHRoZSBjbG9uZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICByZXR1cm4gbmV3Tm9kZTsgICAgIFxyXG4gIH0sXHJcbiAgZXhwYW5kTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBpZihwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChub2RlKSlcclxuICAgIHtcclxuICAgICAgbm9kZS5jaGlsZHJlbiA9IG5vZGUuX2NoaWxkcmVuO1xyXG4gICAgICBub2RlLl9jaGlsZHJlbiA9IFtdOyBcclxuICAgIH0gICBcclxuICB9LFxyXG4gIGZ1bGx5RXhwYW5kTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBwcm9qZWN0LmV4cGFuZE5vZGUobm9kZSk7XHJcbiAgICBub2RlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHsgcHJvamVjdC5mdWxseUV4cGFuZE5vZGUoY2hpbGQpOyB9KTsgICAgICAgXHJcbiAgfSxcclxuICBleHBhbmRUb0xldmVsOiBmdW5jdGlvbihub2RlLCBsZXZlbClcclxuICB7ICAgIFxyXG4gICAgaWYobm9kZS5kZXB0aCA8IGxldmVsKVxyXG4gICAge1xyXG4gICAgICBwcm9qZWN0LmV4cGFuZE5vZGUobm9kZSk7XHJcbiAgICAgIGZvcih2YXIgaSBpbiBub2RlLmNoaWxkcmVuKSB7IHByb2plY3QuZXhwYW5kVG9MZXZlbChub2RlLmNoaWxkcmVuW2ldLCBsZXZlbCk7IH1cclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgcHJvamVjdC5jb2xsYXBzZU5vZGUobm9kZSk7XHJcbiAgICAgIGZvcih2YXIgaSBpbiBub2RlLl9jaGlsZHJlbikgeyBwcm9qZWN0LmV4cGFuZFRvTGV2ZWwobm9kZS5fY2hpbGRyZW5baV0sIGxldmVsKTsgfVxyXG4gICAgfVxyXG4gIH0sIFxyXG4gIGNvbGxhcHNlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBpZihwcm9qZWN0LmlzTm9kZUV4cGFuZGVkKG5vZGUpKVxyXG4gICAge1xyXG4gICAgICBub2RlLl9jaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XHJcbiAgICAgIG5vZGUuY2hpbGRyZW4gPSBbXTtcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBmdWxseUNvbGxhcHNlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBpZihub2RlLmNoaWxkcmVuKVxyXG4gICAge1xyXG4gICAgICBub2RlLl9jaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XHJcbiAgICAgIG5vZGUuX2NoaWxkcmVuLmZvckVhY2gocHJvamVjdC5mdWxseUNvbGxhcHNlTm9kZSk7XHJcbiAgICAgIG5vZGUuY2hpbGRyZW4gPSBbXTtcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICB0b2dnbGVFeHBhbnNpb246IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4pIFxyXG4gICAge1xyXG4gICAgICAgIG5vZGUuX2NoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjtcclxuICAgICAgICBub2RlLmNoaWxkcmVuID0gW107XHJcbiAgICB9IFxyXG4gICAgZWxzZSBpZiAobm9kZS5fY2hpbGRyZW4pIFxyXG4gICAge1xyXG4gICAgICAgIG5vZGUuY2hpbGRyZW4gPSBub2RlLl9jaGlsZHJlbjtcclxuICAgICAgICBub2RlLl9jaGlsZHJlbiA9IFtdO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGhhc0NoaWxkcmVuOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiAobm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgfHwgKG5vZGUuX2NoaWxkcmVuICYmIG5vZGUuX2NoaWxkcmVuLmxlbmd0aCA9PT0gMCk7XHJcbiAgfSwgIFxyXG4gIGlzTm9kZUNoaWxkbGVzczogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gKCFub2RlLmNoaWxkcmVuIHx8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSAmJiAoIW5vZGUuX2NoaWxkcmVuIHx8IG5vZGUuX2NoaWxkcmVuLmxlbmd0aCA9PT0gMCk7XHJcbiAgfSxcclxuICBpc05vZGVDb2xsYXBzZWQ6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuIG5vZGUuX2NoaWxkcmVuICYmIG5vZGUuX2NoaWxkcmVuLmxlbmd0aCA+IDA7XHJcbiAgfSxcclxuICBpc05vZGVFeHBhbmRlZDogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gbm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDA7XHJcbiAgfSxcclxuICBmaW5kTm9kZTogZnVuY3Rpb24obm9kZUlELCBzZWFyY2hOb2RlKVxyXG4gIHtcclxuICAgIGlmKCFzZWFyY2hOb2RlKSB7IHNlYXJjaE5vZGUgPSB0aGlzLnRyZWU7IH1cclxuICAgIFxyXG4gICAgaWYoc2VhcmNoTm9kZS5pZCA9PT0gbm9kZUlEKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gc2VhcmNoTm9kZTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgZm9yKHZhciBpIGluIHNlYXJjaE5vZGUuY2hpbGRyZW4pXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgZm91bmROb2RlID0gdGhpcy5maW5kTm9kZShub2RlSUQsIHNlYXJjaE5vZGUuY2hpbGRyZW5baV0pO1xyXG4gICAgICAgIGlmKGZvdW5kTm9kZSkgeyByZXR1cm4gZm91bmROb2RlOyB9XHJcbiAgICAgIH1cclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBmaW5kUGFyZW50OiBmdW5jdGlvbihub2RlSUQsIHNlYXJjaE5vZGUsIHBhcmVudClcclxuICB7XHJcbiAgICBpZighc2VhcmNoTm9kZSkgeyBzZWFyY2hOb2RlID0gdGhpcy50cmVlOyB9XHJcbiAgICBcclxuICAgIGlmKHNlYXJjaE5vZGUuaWQgPT09IG5vZGVJRClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHBhcmVudDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgZm9yKHZhciBpIGluIHNlYXJjaE5vZGUuY2hpbGRyZW4pXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgZm91bmRQYXJlbnQgPSB0aGlzLmZpbmRQYXJlbnQobm9kZUlELCBzZWFyY2hOb2RlLmNoaWxkcmVuW2ldLCBzZWFyY2hOb2RlKTtcclxuICAgICAgICBpZihmb3VuZFBhcmVudCkgeyByZXR1cm4gZm91bmRQYXJlbnQ7IH1cclxuICAgICAgfVxyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIHRyYXZlcnNlOiBmdW5jdGlvbihjaGlsZHJlbkZuLCB2aXNpdEZuLCBwYXJlbnQpXHJcbiAge1xyXG4gICAgaWYgKCFwYXJlbnQpIHsgcGFyZW50ID0gcHJvamVjdC50cmVlOyB9XHJcbiAgICB2aXNpdEZuKHBhcmVudCk7XHJcbiAgICBcclxuICAgIHZhciBjaGlsZHJlbiA9IGNoaWxkcmVuRm4ocGFyZW50KTtcclxuICAgIGZvciAodmFyIGkgaW4gY2hpbGRyZW4pIFxyXG4gICAge1xyXG4gICAgICBwcm9qZWN0LnRyYXZlcnNlKGNoaWxkcmVuRm4sIHZpc2l0Rm4sIGNoaWxkcmVuW2ldKTtcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICB0cmF2ZXJzZURlc2NlbmRhbnRzOiBmdW5jdGlvbihjaGlsZHJlbkZuLCB2aXNpdEZuLCBwYXJlbnQpXHJcbiAge1xyXG4gICAgaWYoIXBhcmVudCkgeyBwYXJlbnQgPSBwcm9qZWN0LnRyZWU7IH1cclxuICAgIHBhcmVudC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7IHByb2plY3QudHJhdmVyc2UoY2hpbGRyZW5GbiwgdmlzaXRGbiwgY2hpbGQpOyB9KTsgIFxyXG4gIH0sXHJcbiAgZ2V0Q2hpbGRyZW46IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuIG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwID8gbm9kZS5jaGlsZHJlbiA6IG51bGw7ICAgIFxyXG4gIH0gICBcclxufTsiLCJ2YXIgcHJvamVjdHMgPVxyXG57XHJcbiAgaW5pdDogZnVuY3Rpb24oZmluaXNoRm4pXHJcbiAgeyAgXHRcclxuICAgICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvcHJvamVjdHMnfSkuZG9uZShmdW5jdGlvbihkYXRhKSAgIC8vcmVhZCBwcm9qZWN0cyBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgIHsgXHJcbiAgICAgIHByb2plY3RzLmRhdGEgPSBkYXRhO1xyXG4gICAgICBmaW5pc2hGbihkYXRhLnByb2plY3RzKTtcclxuICAgIH0pOyAgICAgXHJcbiAgfSxcclxuICBuZXh0UHJvamVjdElEOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuIHByb2plY3RzLmRhdGEubmV4dFByb2plY3RJRDtcclxuICB9LFxyXG4gIGNyZWF0ZU5ld1Byb2plY3Q6IGZ1bmN0aW9uKG5ld1Byb2plY3ROYW1lLCBmaW5pc2hGbilcclxuICB7XHJcbiAgXHQkLmFqYXgoeyB0eXBlOiAnUE9TVCcsIHVybDogJy9hcGkvYWRkUHJvamVjdD9wcm9qZWN0TmFtZT0nICsgbmV3UHJvamVjdE5hbWUgfSkuZG9uZShmdW5jdGlvbigpICAgICAvLyBhZGQgdGhlIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBkb2N1bWVudCBpbiB0aGUgZGF0YWJhc2VcclxuICAgIHtcclxuICAgICAgLy9UT0RPOiBuZWVkIHRvIHNldCB0aGUgdmVyc2lvbkRhdGUgaGVyZSBvciBiZXR0ZXIgeWV0IG9uIHRoZSBzZXJ2ZXIsIHdoZW4gd2UgZG8gc2F2ZVRvRGF0YWJhc2UoKVxyXG4gICAgICBwcm9qZWN0LnRyZWUgPSB7IFwicHJvamVjdElEXCI6IHByb2plY3RzLm5leHRQcm9qZWN0SUQoKSwgXCJwcm9qZWN0TmFtZVwiOiBuZXdQcm9qZWN0TmFtZSwgXCJuYW1lXCI6IG5ld1Byb2plY3ROYW1lLCBcInZlcnNpb25cIjogMSwgXCJ2ZXJzaW9uRGF0ZVwiOiAnMS8xLzIwMTUgMToyMzo0NScsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgIFwidmVyc2lvbkxhYmVsXCI6ICdQcm9qZWN0IENyZWF0ZWQnLCBcIm5leHROb2RlSURcIjogMywgXCJkZXB0aFwiOiAwLCBcImlkXCI6IDEsIFwiZmllbGRzXCI6IFtdLCBcImNoaWxkcmVuXCI6IFt7IFwiaWRcIjogMiwgXCJuYW1lXCI6IG5ld1Byb2plY3ROYW1lLCBcImRlcHRoXCI6IDEsIFwiY2hpbGRyZW5cIjogW10gfV0gfTtcclxuICAgIFx0cHJvamVjdC5zYXZlVG9EYXRhYmFzZShmaW5pc2hGbik7XHJcbiAgICB9KTsgIFxyXG4gIH0sXHJcbiAgb3BlblByb2plY3Q6IGZ1bmN0aW9uKHByb2plY3RJRCwgZmluaXNoRm4pXHJcbiAge1xyXG4gICAgJC5hamF4KHsgdHlwZTogJ0dFVCcsIHVybDogJ2FwaS90cmVlP3Byb2plY3RJRD0nICsgcHJvamVjdElEIH0pLmRvbmUoZnVuY3Rpb24oZGF0YSkgICAgICAgICAgICAgICAvL3JlYWQgdHJlZSBmb3IgdGhlIHNlbGVjdGVkIHByb2plY3QgZnJvbSB0aGUgZGF0YWJhc2VcclxuICAgIHtcclxuICAgICAgZmluaXNoRm4oZGF0YSk7XHJcbiAgICB9KTsgICAgIFxyXG4gIH0sXHJcbiAgb3BlblByb2plY3RWZXJzaW9uOiBmdW5jdGlvbihwcm9qZWN0SUQsIHZlcnNpb24sIGZpbmlzaEZuKVxyXG4gIHtcclxuICAgICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvdmVyc2lvbj9wcm9qZWN0SUQ9JyArIHByb2plY3RJRCArICcmdmVyc2lvbj0nICsgdmVyc2lvbiB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpICAgICAgICAgICAgICAgLy9yZWFkIHRyZWUgZm9yIHRoZSBzZWxlY3RlZCBwcm9qZWN0IHZlcnNpb24gZnJvbSB0aGUgZGF0YWJhc2VcclxuICAgIHtcclxuICAgICAgZmluaXNoRm4oZGF0YSk7XHJcbiAgICB9KTsgICAgIFxyXG4gIH0gXHJcbn07IiwidmFyIHNwcmVhZFNoZWV0ID0gXHJcbntcclxuICBkaXNwbGF5OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcHJvamVjdC5jbGVhbnNlRGF0YSgpOyAgICAgICAgICAgICAgICAgIC8vcmVxdWlyZWQgdG8gcmVtb3ZlIGNpcmN1bGFyIHJlZmVyZW5jZXMgdGhhdCBvdGhlciB2aWV3cyBtYXkgYWRkXHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVuZGVyKHByb2plY3QudHJlZSk7XHJcbiAgfSxcclxuICBmaWVsZHM6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC5maWVsZHMoKTtcclxuICB9LFxyXG4gIHRyZWU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC50cmVlO1xyXG4gIH0sXHJcbiAgdXBkYXRlRmllbGRWYWx1ZTogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQpXHJcbiAge1xyXG4gICAgdmFyIG5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgXHJcbiAgICBpZihub2RlKVxyXG4gICAge1xyXG4gICAgICBpZighbm9kZS52YWx1ZXMpIHsgbm9kZS52YWx1ZXMgPSB7fTsgfVxyXG4gICAgICBub2RlLnZhbHVlc1tmaWVsZE5hbWVdID0gc3ByZWFkU2hlZXRWaWV3LmdldEZpZWxkVmFsdWUoZmllbGROYW1lLCBub2RlSUQpOyAgICAgXHJcbiAgICB9ICBcclxuICBcclxuICAgIC8vVE9ETzogc2hvdWxkIHBlcmZvcm0gdGhlIGFnZ3JlZ2F0aW9uIGJhc2VkIG9uIHRoZSBmaWVsZCBzZXR0aW5ncyBmb3IgYWdncmVnYXRpbmcgdGhpcyBmaWVsZFxyXG4gICAgcHJvamVjdC50cmVlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIFxyXG4gICAge1xyXG4gICAgICBhZ2dyZWdhdGVfYW55KGNoaWxkLCBmaWVsZE5hbWUpO1xyXG4gICAgfSk7ICAgIFxyXG4gIH0sXHJcbiAgcmF3VmFsdWU6IGZ1bmN0aW9uKGZpZWxkTmFtZSwgbm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShwYXJzZUludChub2RlSUQpKTtcclxuICAgIFxyXG4gICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbZmllbGROYW1lXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIG5vZGUudmFsdWVzW2ZpZWxkTmFtZV07XHJcbiAgICB9ICBcclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGZvcm1hdHRlZFZhbHVlOiBmdW5jdGlvbihmaWVsZCwgbm9kZSlcclxuICB7XHJcbiAgICBpZihub2RlLnZhbHVlcyAmJiBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIEZpZWxkLmZvcm1hdFZhbHVlKGZpZWxkLCBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgIHByb2plY3QuYWRkRmllbGQoZmllbGROYW1lKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5hZGRGaWVsZChmaWVsZE5hbWUpO1xyXG4gIH0sXHJcbiAgaGFzQ2hpbGRyZW46IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuICFwcm9qZWN0LmlzTm9kZUNoaWxkbGVzcyhub2RlKTtcclxuICB9LFxyXG4gIGNoaWxkcmVuSGlkZGVuOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChub2RlKTtcclxuICB9LFxyXG4gIG1vdmVOb2RlOiBmdW5jdGlvbihub2RlSUQsIG5ld1BhcmVudElEKVxyXG4gIHtcclxuICAgIHZhciBuZXdQYXJlbnROb2RlID0gcHJvamVjdC5maW5kTm9kZShuZXdQYXJlbnRJRCk7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICBcclxuICAgIHNwcmVhZFNoZWV0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgICBwcm9qZWN0LmFkZE5vZGUobm9kZSwgbmV3UGFyZW50Tm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldC5hZGROb2RlKG5vZGUsIG5ld1BhcmVudE5vZGUpOyAgICBcclxuICB9LFxyXG4gIHJlbW92ZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIHBhcmVudE5vZGUgPSBwcm9qZWN0LmZpbmRQYXJlbnQobm9kZS5pZCk7XHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5yZW1vdmVOb2RlLCBub2RlKTtcclxuICAgIHByb2plY3QucmVtb3ZlTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZWRyYXdOb2RlQ29udGVudChwYXJlbnROb2RlKTsgICAgICAgICAgLy9pZiB0aGUgcGFyZW50IGlzIGNoaWxkbGVzcyBub3csIHRoZW4gaGlkZSB0aGUgb2xkIHBhcmVudCdzIGV4cGFuZC9jb2xsYXBzZSBpY29uICAgICBcclxuICB9LFxyXG4gIGRlbGV0ZU5vZGU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICAgIHNwcmVhZFNoZWV0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgfSxcclxuICBhZGROb2RlOiBmdW5jdGlvbihub2RlLCBwYXJlbnROb2RlKVxyXG4gIHtcclxuICAgIGlmKHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKHBhcmVudE5vZGUpKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAge1xyXG4gICAgICBzcHJlYWRTaGVldC5leHBhbmROb2RlKHBhcmVudE5vZGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQocGFyZW50Tm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuaW5zZXJ0Tm9kZUFmdGVyKG5vZGUsIHBhcmVudE5vZGUpOyAgICAgIC8vYWRkIHRoZSBtb3ZlZCBub2RlIGFuZCBpdHMgZGVzY2VuZGFudHMgdG8gdGhlIG5ldyBwYXJlbnQgaW4gdGhlIHZpZXdcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZW5kZXJFeHBhbmRlcigpOyAgXHJcbiAgfSxcclxuICBjb3B5Tm9kZTogZnVuY3Rpb24obm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBzb3VyY2VOb2RlID0gcHJvamVjdC5maW5kTm9kZShub2RlSUQpO1xyXG4gICAgdmFyIG5ld05vZGUgPSBwcm9qZWN0LmNsb25lTm9kZShzb3VyY2VOb2RlKTtcclxuICAgIHByb2plY3QuaW5zZXJ0Tm9kZShuZXdOb2RlLCBzb3VyY2VOb2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5pbnNlcnROb2RlQmVmb3JlKG5ld05vZGUsIHNvdXJjZU5vZGUpOyAgICBcclxuICB9LFxyXG4gIGV4cGFuZE5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcHJvamVjdC5leHBhbmROb2RlKG5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXRWaWV3LmV4cGFuZE5vZGUobm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQobm9kZSk7ICAgICAgXHJcbiAgfSxcclxuICBjb2xsYXBzZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZURlc2NlbmRhbnRzKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5yZW1vdmVOb2RlLCBub2RlKTsgICAgXHJcbiAgICBwcm9qZWN0LmNvbGxhcHNlTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZWRyYXdOb2RlQ29udGVudChub2RlKTsgICAgIFxyXG4gIH0sXHJcbiAgdG9nZ2xlTm9kZTogZnVuY3Rpb24obm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShub2RlSUQpO1xyXG4gICAgXHJcbiAgICBpZihwcm9qZWN0LmlzTm9kZUV4cGFuZGVkKG5vZGUpKVxyXG4gICAge1xyXG4gICAgICBzcHJlYWRTaGVldC5jb2xsYXBzZU5vZGUobm9kZSk7ICAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZSBpZihwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChub2RlKSlcclxuICAgIHtcclxuICAgICAgc3ByZWFkU2hlZXQuZXhwYW5kTm9kZShub2RlKTsgXHJcbiAgICB9ICBcclxuICB9LFxyXG4gIHVwZGF0ZU5vZGVOYW1lOiBmdW5jdGlvbihub2RlSUQsIG5ld05hbWUpXHJcbiAge1xyXG4gICAgcHJvamVjdC5maW5kTm9kZShub2RlSUQpLm5hbWUgPSBuZXdOYW1lOyAgICBcclxuICB9LFxyXG4gIHVwZGF0ZU51bWJlckZpZWxkRm9ybWF0dGluZzogZnVuY3Rpb24oZmllbGQpXHJcbiAge1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZShwcm9qZWN0LmdldENoaWxkcmVuLCBmdW5jdGlvbihub2RlKVxyXG4gICAgeyAgICAgIFxyXG4gICAgICBpZihub2RlLnZhbHVlcylcclxuICAgICAge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IEZpZWxkLmZvcm1hdFZhbHVlKGZpZWxkLCBOdW1iZXIobm9kZS52YWx1ZXNbZmllbGQubmFtZV0pKTsgICAgICAgICAgICAgICAgLy9nZXQgdGhlIHZhbHVlIGZyb20gdGhlIG1vZGVsXHJcbiAgICAgICAgc3ByZWFkU2hlZXRWaWV3LnVwZGF0ZUZpZWxkVmFsdWUoZmllbGQubmFtZSwgbm9kZS5pZCwgdmFsdWUpO1xyXG4gICAgICB9ICAgICAgXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGVuYWJsZURyYWdnaW5nOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgc3ByZWFkU2hlZXRWaWV3LmVuYWJsZURyYWdnaW5nLCBub2RlKTsgICAgXHJcbiAgfSAgXHJcbn07IiwidmFyIHNwcmVhZFNoZWV0ID0gXHJcbntcclxuICBkaXNwbGF5OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcHJvamVjdC5jbGVhbnNlRGF0YSgpOyAgICAgICAgICAgICAgICAgIC8vcmVxdWlyZWQgdG8gcmVtb3ZlIGNpcmN1bGFyIHJlZmVyZW5jZXMgdGhhdCBvdGhlciB2aWV3cyBtYXkgYWRkXHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVuZGVyKHByb2plY3QudHJlZSk7XHJcbiAgfSxcclxuICBmaWVsZHM6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC5maWVsZHMoKTtcclxuICB9LFxyXG4gIHRyZWU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC50cmVlO1xyXG4gIH0sXHJcbiAgdXBkYXRlRmllbGRWYWx1ZTogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQpXHJcbiAge1xyXG4gICAgdmFyIG5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgXHJcbiAgICBpZihub2RlKVxyXG4gICAge1xyXG4gICAgICBpZighbm9kZS52YWx1ZXMpIHsgbm9kZS52YWx1ZXMgPSB7fTsgfVxyXG4gICAgICBub2RlLnZhbHVlc1tmaWVsZE5hbWVdID0gc3ByZWFkU2hlZXRWaWV3LmdldEZpZWxkVmFsdWUoZmllbGROYW1lLCBub2RlSUQpOyAgICAgXHJcbiAgICB9ICBcclxuICBcclxuICAgIC8vVE9ETzogc2hvdWxkIHBlcmZvcm0gdGhlIGFnZ3JlZ2F0aW9uIGJhc2VkIG9uIHRoZSBmaWVsZCBzZXR0aW5ncyBmb3IgYWdncmVnYXRpbmcgdGhpcyBmaWVsZFxyXG4gICAgcHJvamVjdC50cmVlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIFxyXG4gICAge1xyXG4gICAgICBhZ2dyZWdhdGVfYW55KGNoaWxkLCBmaWVsZE5hbWUpO1xyXG4gICAgfSk7ICAgIFxyXG4gIH0sXHJcbiAgcmF3VmFsdWU6IGZ1bmN0aW9uKGZpZWxkTmFtZSwgbm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShwYXJzZUludChub2RlSUQpKTtcclxuICAgIFxyXG4gICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbZmllbGROYW1lXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIG5vZGUudmFsdWVzW2ZpZWxkTmFtZV07XHJcbiAgICB9ICBcclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGZvcm1hdHRlZFZhbHVlOiBmdW5jdGlvbihmaWVsZCwgbm9kZSlcclxuICB7XHJcbiAgICBpZihub2RlLnZhbHVlcyAmJiBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIEZpZWxkLmZvcm1hdFZhbHVlKGZpZWxkLCBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgIHByb2plY3QuYWRkRmllbGQoZmllbGROYW1lKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5hZGRGaWVsZChmaWVsZE5hbWUpO1xyXG4gIH0sXHJcbiAgaGFzQ2hpbGRyZW46IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuICFwcm9qZWN0LmlzTm9kZUNoaWxkbGVzcyhub2RlKTtcclxuICB9LFxyXG4gIGNoaWxkcmVuSGlkZGVuOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChub2RlKTtcclxuICB9LFxyXG4gIG1vdmVOb2RlOiBmdW5jdGlvbihub2RlSUQsIG5ld1BhcmVudElEKVxyXG4gIHtcclxuICAgIHZhciBuZXdQYXJlbnROb2RlID0gcHJvamVjdC5maW5kTm9kZShuZXdQYXJlbnRJRCk7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICBcclxuICAgIHNwcmVhZFNoZWV0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgICBwcm9qZWN0LmFkZE5vZGUobm9kZSwgbmV3UGFyZW50Tm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldC5hZGROb2RlKG5vZGUsIG5ld1BhcmVudE5vZGUpOyAgICBcclxuICB9LFxyXG4gIHJlbW92ZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIHBhcmVudE5vZGUgPSBwcm9qZWN0LmZpbmRQYXJlbnQobm9kZS5pZCk7XHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5yZW1vdmVOb2RlLCBub2RlKTtcclxuICAgIHByb2plY3QucmVtb3ZlTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZWRyYXdOb2RlQ29udGVudChwYXJlbnROb2RlKTsgICAgICAgICAgLy9pZiB0aGUgcGFyZW50IGlzIGNoaWxkbGVzcyBub3csIHRoZW4gaGlkZSB0aGUgb2xkIHBhcmVudCdzIGV4cGFuZC9jb2xsYXBzZSBpY29uICAgICBcclxuICB9LFxyXG4gIGRlbGV0ZU5vZGU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICAgIHNwcmVhZFNoZWV0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgfSxcclxuICBhZGROb2RlOiBmdW5jdGlvbihub2RlLCBwYXJlbnROb2RlKVxyXG4gIHtcclxuICAgIGlmKHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKHBhcmVudE5vZGUpKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAge1xyXG4gICAgICBzcHJlYWRTaGVldC5leHBhbmROb2RlKHBhcmVudE5vZGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQocGFyZW50Tm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuaW5zZXJ0Tm9kZUFmdGVyKG5vZGUsIHBhcmVudE5vZGUpOyAgICAgIC8vYWRkIHRoZSBtb3ZlZCBub2RlIGFuZCBpdHMgZGVzY2VuZGFudHMgdG8gdGhlIG5ldyBwYXJlbnQgaW4gdGhlIHZpZXdcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZW5kZXJFeHBhbmRlcigpOyAgXHJcbiAgfSxcclxuICBjb3B5Tm9kZTogZnVuY3Rpb24obm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBzb3VyY2VOb2RlID0gcHJvamVjdC5maW5kTm9kZShub2RlSUQpO1xyXG4gICAgdmFyIG5ld05vZGUgPSBwcm9qZWN0LmNsb25lTm9kZShzb3VyY2VOb2RlKTtcclxuICAgIHByb2plY3QuaW5zZXJ0Tm9kZShuZXdOb2RlLCBzb3VyY2VOb2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5pbnNlcnROb2RlQmVmb3JlKG5ld05vZGUsIHNvdXJjZU5vZGUpOyAgICBcclxuICB9LFxyXG4gIGV4cGFuZE5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcHJvamVjdC5leHBhbmROb2RlKG5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXRWaWV3LmV4cGFuZE5vZGUobm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQobm9kZSk7ICAgICAgXHJcbiAgfSxcclxuICBjb2xsYXBzZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZURlc2NlbmRhbnRzKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5yZW1vdmVOb2RlLCBub2RlKTsgICAgXHJcbiAgICBwcm9qZWN0LmNvbGxhcHNlTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZWRyYXdOb2RlQ29udGVudChub2RlKTsgICAgIFxyXG4gIH0sXHJcbiAgdG9nZ2xlTm9kZTogZnVuY3Rpb24obm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShub2RlSUQpO1xyXG4gICAgXHJcbiAgICBpZihwcm9qZWN0LmlzTm9kZUV4cGFuZGVkKG5vZGUpKVxyXG4gICAge1xyXG4gICAgICBzcHJlYWRTaGVldC5jb2xsYXBzZU5vZGUobm9kZSk7ICAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZSBpZihwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChub2RlKSlcclxuICAgIHtcclxuICAgICAgc3ByZWFkU2hlZXQuZXhwYW5kTm9kZShub2RlKTsgXHJcbiAgICB9ICBcclxuICB9LFxyXG4gIHVwZGF0ZU5vZGVOYW1lOiBmdW5jdGlvbihub2RlSUQsIG5ld05hbWUpXHJcbiAge1xyXG4gICAgcHJvamVjdC5maW5kTm9kZShub2RlSUQpLm5hbWUgPSBuZXdOYW1lOyAgICBcclxuICB9LFxyXG4gIHVwZGF0ZU51bWJlckZpZWxkRm9ybWF0dGluZzogZnVuY3Rpb24oZmllbGQpXHJcbiAge1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZShwcm9qZWN0LmdldENoaWxkcmVuLCBmdW5jdGlvbihub2RlKVxyXG4gICAgeyAgICAgIFxyXG4gICAgICBpZihub2RlLnZhbHVlcylcclxuICAgICAge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IEZpZWxkLmZvcm1hdFZhbHVlKGZpZWxkLCBOdW1iZXIobm9kZS52YWx1ZXNbZmllbGQubmFtZV0pKTsgICAgICAgICAgICAgICAgLy9nZXQgdGhlIHZhbHVlIGZyb20gdGhlIG1vZGVsXHJcbiAgICAgICAgc3ByZWFkU2hlZXRWaWV3LnVwZGF0ZUZpZWxkVmFsdWUoZmllbGQubmFtZSwgbm9kZS5pZCwgdmFsdWUpO1xyXG4gICAgICB9ICAgICAgXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGVuYWJsZURyYWdnaW5nOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgc3ByZWFkU2hlZXRWaWV3LmVuYWJsZURyYWdnaW5nLCBub2RlKTsgICAgXHJcbiAgfSAgXHJcbn07IiwidmFyIERPV05fQVJST1dfSU1BR0VfUEFUSCA9ICdpbWFnZXMvZG93bi1hcnJvdy5wbmcnO1xyXG52YXIgQ0hFQ0tfTUFSS19JTUFHRV9QQVRIID0gJ2ltYWdlcy9jaGVja21hcmsucG5nJztcclxudmFyIEJMQU5LX01BUktfSU1BR0VfUEFUSCA9ICdpbWFnZXMvYmxhbmttYXJrLnBuZyc7XHJcblxyXG52YXIgRU5URVJfS0VZID0gMTM7XHJcblxyXG52YXIgS0VZX1VQX0FSUk9XID0gMzg7XHJcbnZhciBLRVlfRE9XTl9BUlJPVyA9IDQwO1xyXG52YXIgS0VZX0xFRlRfQVJST1cgPSAzNztcclxudmFyIEtFWV9SSUdIVF9BUlJPVyA9IDM5O1xyXG5cclxudmFyIERFRkFVTFRfTk9ERV9JTlBVVF9XSURUSCA9IDM5MDtcclxuXHJcbnZhciBTUFJFQURTSEVFVF9WSUVXID0gJzAnO1xyXG52YXIgVFJFRV9WSUVXID0gJzEnO1xyXG52YXIgV0VJR0hURURfVFJFRV9WSUVXID0gJzInO1xyXG52YXIgQ0lSQ0xFX1ZJRVcgPSAnMyc7IiwiZnVuY3Rpb24gZGVidWcoKSB7fVxyXG5cclxuZGVidWcucHJpbnQgPSBmdW5jdGlvbihvKVxyXG57XHJcbiAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkobywgbnVsbCwgJ1xcdCcpKTsgIFxyXG59O1xyXG5cclxuZGVidWcucHJpbnRUcmVlID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocHJvamVjdC50cmVlLCBudWxsLCAnXFx0JykpO1xyXG59OyIsInZhciBjaXJjbGVWaWV3ID1cclxue1xyXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKCcjY2lyY2xlVmlldycpLnJlbW92ZSgpO1xyXG4gIH0sXHJcbiAgZGlzcGxheTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJjaXJjbGVWaWV3XCI+PC9kaXY+Jyk7XHJcbiAgICBcclxuICAgIHZhciBtYXJnaW4gPSAyMCxcclxuICAgICAgICBkaWFtZXRlciA9IDk2MDtcclxuICAgIFxyXG4gICAgdmFyIGNvbG9yID0gZDMuc2NhbGUubGluZWFyKClcclxuICAgICAgICAuZG9tYWluKFstMSwgNV0pXHJcbiAgICAgICAgLnJhbmdlKFtcImhzbCgxNTIsODAlLDgwJSlcIiwgXCJoc2woMjI4LDMwJSw0MCUpXCJdKVxyXG4gICAgICAgIC5pbnRlcnBvbGF0ZShkMy5pbnRlcnBvbGF0ZUhjbCk7XHJcbiAgICBcclxuICAgIHZhciBwYWNrID0gZDMubGF5b3V0LnBhY2soKVxyXG4gICAgICAgIC5wYWRkaW5nKDIpXHJcbiAgICAgICAgLnNpemUoW2RpYW1ldGVyIC0gbWFyZ2luLCBkaWFtZXRlciAtIG1hcmdpbl0pXHJcbiAgICAgICAgLnZhbHVlKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIE1hdGguUEkgKiBkLnZhbHVlc1snQSddICogZC52YWx1ZXNbJ0EnXSAvIDQ7IH0pO1xyXG4gICAgXHJcbiAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KFwiI2NpcmNsZVZpZXdcIikuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBkaWFtZXRlcilcclxuICAgICAgICAuYXR0cihcImhlaWdodFwiLCBkaWFtZXRlcilcclxuICAgICAgLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGRpYW1ldGVyIC8gMiArIFwiLFwiICsgZGlhbWV0ZXIgLyAyICsgXCIpXCIpO1xyXG4gICAgXHJcbiAgICB2YXIgcm9vdCA9IHByb2plY3QudHJlZTtcclxuXHJcbiAgICBcclxuICAgICAgdmFyIGZvY3VzID0gcm9vdCxcclxuICAgICAgICAgIG5vZGVzID0gcGFjay5ub2Rlcyhyb290KSxcclxuICAgICAgICAgIHZpZXc7XHJcbiAgICBcclxuICAgICAgdmFyIGNpcmNsZSA9IHN2Zy5zZWxlY3RBbGwoXCJjaXJjbGVcIilcclxuICAgICAgICAgIC5kYXRhKG5vZGVzKVxyXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnBhcmVudCA/IGQuY2hpbGRyZW4gPyBcIm5vZGVcIiA6IFwibm9kZSBub2RlLS1sZWFmXCIgOiBcIm5vZGUgbm9kZS0tcm9vdFwiOyB9KVxyXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmNoaWxkcmVuID8gY29sb3IoZC5kZXB0aCkgOiBudWxsOyB9KVxyXG4gICAgICAgICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZCkgeyBpZiAoZm9jdXMgIT09IGQpIHpvb20oZCksIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyB9KTtcclxuICAgIFxyXG4gICAgICB2YXIgdGV4dCA9IHN2Zy5zZWxlY3RBbGwoXCJ0ZXh0XCIpXHJcbiAgICAgICAgICAuZGF0YShub2RlcylcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGFiZWxcIilcclxuICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnBhcmVudCA9PT0gcm9vdCA/IDEgOiAwOyB9KVxyXG4gICAgICAgICAgLnN0eWxlKFwiZGlzcGxheVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnBhcmVudCA9PT0gcm9vdCA/IG51bGwgOiBcIm5vbmVcIjsgfSlcclxuICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubmFtZTsgfSk7XHJcbiAgICBcclxuICAgICAgdmFyIG5vZGUgPSBzdmcuc2VsZWN0QWxsKFwiY2lyY2xlLHRleHRcIik7XHJcbiAgICBcclxuICAgICAgZDMuc2VsZWN0KFwiYm9keVwiKVxyXG4gICAgICAgICAgLnN0eWxlKFwiYmFja2dyb3VuZFwiLCBjb2xvcigtMSkpXHJcbiAgICAgICAgICAub24oXCJjbGlja1wiLCBmdW5jdGlvbigpIHsgem9vbShyb290KTsgfSk7XHJcbiAgICBcclxuICAgICAgem9vbVRvKFtyb290LngsIHJvb3QueSwgcm9vdC5yICogMiArIG1hcmdpbl0pO1xyXG4gICAgXHJcbiAgICAgIGZ1bmN0aW9uIHpvb20oZCkge1xyXG4gICAgICAgIHZhciBmb2N1czAgPSBmb2N1czsgZm9jdXMgPSBkO1xyXG4gICAgXHJcbiAgICAgICAgdmFyIHRyYW5zaXRpb24gPSBkMy50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgLmR1cmF0aW9uKGQzLmV2ZW50LmFsdEtleSA/IDc1MDAgOiA3NTApXHJcbiAgICAgICAgICAgIC50d2VlbihcInpvb21cIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHZhciBpID0gZDMuaW50ZXJwb2xhdGVab29tKHZpZXcsIFtmb2N1cy54LCBmb2N1cy55LCBmb2N1cy5yICogMiArIG1hcmdpbl0pO1xyXG4gICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7IHpvb21UbyhpKHQpKTsgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICB0cmFuc2l0aW9uLnNlbGVjdEFsbChcInRleHRcIilcclxuICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5wYXJlbnQgPT09IGZvY3VzIHx8IHRoaXMuc3R5bGUuZGlzcGxheSA9PT0gXCJpbmxpbmVcIjsgfSlcclxuICAgICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucGFyZW50ID09PSBmb2N1cyA/IDEgOiAwOyB9KVxyXG4gICAgICAgICAgICAuZWFjaChcInN0YXJ0XCIsIGZ1bmN0aW9uKGQpIHsgaWYgKGQucGFyZW50ID09PSBmb2N1cykgdGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmVcIjsgfSlcclxuICAgICAgICAgICAgLmVhY2goXCJlbmRcIiwgZnVuY3Rpb24oZCkgeyBpZiAoZC5wYXJlbnQgIT09IGZvY3VzKSB0aGlzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgfSk7XHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgICBmdW5jdGlvbiB6b29tVG8odikge1xyXG4gICAgICAgIHZhciBrID0gZGlhbWV0ZXIgLyB2WzJdOyB2aWV3ID0gdjtcclxuICAgICAgICBub2RlLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyAoZC54IC0gdlswXSkgKiBrICsgXCIsXCIgKyAoZC55IC0gdlsxXSkgKiBrICsgXCIpXCI7IH0pO1xyXG4gICAgICAgIGNpcmNsZS5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnIgKiBrOyB9KTtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICBkMy5zZWxlY3Qoc2VsZi5mcmFtZUVsZW1lbnQpLnN0eWxlKFwiaGVpZ2h0XCIsIGRpYW1ldGVyICsgXCJweFwiKTsgICAgXHJcbiAgfVxyXG59OyIsInZhciBleHBhbmRlclNlbGVjdG9yID1cclxue1xyXG4gIGluaXQ6IGZ1bmN0aW9uKG51bUxldmVscylcclxuICB7XHJcbiAgICAkKCcjZXhwYW5kZXJDb250YWluZXInKS5odG1sKGV4cGFuZGVyU2VsZWN0b3IuZ2V0TWFya3VwKG51bUxldmVscykpO1xyXG4gICAgJChcIiNleHBhbmRlclNlbGVjdG9yXCIpLmNoYW5nZShleHBhbmRlclNlbGVjdG9yLmhhbmRsZSk7XHJcbiAgfSxcclxuICBoYW5kbGU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB2YXIgbGV2ZWwgPSBwYXJzZUludCgkKCcjZXhwYW5kZXJTZWxlY3RvcicpLnZhbCgpKTtcclxuXHJcbiAgICBpZihsZXZlbCA+IDApXHJcbiAgICB7XHJcbiAgICAgIGhtcy5leHBhbmRUb0xldmVsKGxldmVsKTsgIFxyXG4gICAgfVxyXG4gIH0sICBcclxuICBnZXRNYXJrdXA6IGZ1bmN0aW9uKG51bUxldmVscylcclxuICB7XHJcbiAgICB2YXIgbWFya3VwID0gJzxkaXYgaWQ9XCJleHBhbmRlclNlbGVjdENvbnRhaW5lclwiPidcclxuICAgICsgJzxzZWxlY3QgaWQ9XCJleHBhbmRlclNlbGVjdG9yXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4nXHJcbiAgICArICc8b3B0aW9uIHZhbHVlPVwiMFwiPkV4cGFuZC9Db2xsYXBzZSB0byBMZXZlbDwvb3B0aW9uPic7XHJcbiAgICBcclxuICAgIGZvcih2YXIgaSA9IDE7IGkgPCBudW1MZXZlbHMrMTsgaSsrKVxyXG4gICAge1xyXG4gICAgICBtYXJrdXAgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgaSArICdcIj4nICsgaSArICc8L29wdGlvbj4nO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBtYXJrdXAgKz0gJzwvc2VsZWN0PidcclxuICAgICsgJzxpbnB1dCBpZD1cInByb2plY3RBY3Rpb25JbnB1dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+PC9pbnB1dD4nXHJcbiAgICArICc8L2Rpdj4nO1xyXG4gICAgcmV0dXJuIG1hcmt1cDsgXHJcbiAgfVxyXG59OyIsInZhciBmaWVsZE1lbnVWaWV3ID0gXHJcbntcclxuICByZW5kZXI6IGZ1bmN0aW9uKGZpZWxkTWVudSwgeCwgeSlcclxuICB7XHJcbiAgICB2YXIgbWFya3VwID0gJzxkaXYgaWQ9XCJmaWVsZE1lbnVcIiBzdHlsZT1cImxlZnQ6JyArICh4LTEwKSArICdweDt0b3A6JyArICh5LTEwKSArICdweDtcIj4nO1xyXG4gICAgXHJcbiAgICBtYXJrdXAgKz0gdGhpcy5yZW5kZXJNZW51KGZpZWxkTWVudSk7XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSAnPC9kaXY+JztcclxuICAgIFxyXG4gICAgJCgnYm9keScpLmFwcGVuZCgkKG1hcmt1cCkpO1xyXG4gICAgJCgnI2ZpZWxkTWVudScpLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7ICQoJyNmaWVsZE1lbnUnKS5yZW1vdmUoKTsgfSk7ICBcclxuICB9LFxyXG4gIHJlbmRlck1lbnU6IGZ1bmN0aW9uKG1lbnUpXHJcbiAge1xyXG4gICAgdmFyIG1hcmt1cCA9ICc8dWw+JztcclxuICAgIFxyXG4gICAgbWVudS5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKG1lbnVJdGVtKVxyXG4gICAge1xyXG4gICAgICBtYXJrdXAgKz0gJzxsaSBvbmNsaWNrPVwiZmllbGRNZW51Q29udHJvbGxlci5oYW5kbGVDbGljaygnICsgbWVudUl0ZW0uaWQgKyAnKTtcIj4nO1xyXG4gIFxyXG4gICAgICB2YXIgY2hlY2tNYXJrQ2xhc3MgPSAndW5jaGVja2VkRmllbGRNZW51SXRlbSc7XHJcbiAgICAgIGlmKG1lbnVJdGVtLmZpZWxkICYmIG1lbnVJdGVtLmNoZWNrZWQpXHJcbiAgICAgIHtcclxuICAgICAgICBjaGVja01hcmtDbGFzcyA9ICdjaGVja2VkRmllbGRNZW51SXRlbSc7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIG1hcmt1cCArPSAnPGltZyBpZD1cIkZpZWxkTWVudUl0ZW0nICsgbWVudUl0ZW0uaWQgKyAnXCIgc3JjPVwiJyArIENIRUNLX01BUktfSU1BR0VfUEFUSCArICdcIiBjbGFzcz1cIicgKyBjaGVja01hcmtDbGFzcyArICdcIi8+JztcclxuICAgICAgbWFya3VwICs9IG1lbnVJdGVtLmRpc3BsYXk7XHJcbiAgICAgIFxyXG4gICAgICBpZihtZW51SXRlbS5pdGVtcyAmJiBtZW51SXRlbS5pdGVtcy5sZW5ndGggPiAwKVxyXG4gICAgICB7XHJcbiAgICAgICAgbWFya3VwICs9ICc8ZGl2IGNsYXNzPVwiYXJyb3dSaWdodFwiPjwvZGl2Pic7XHJcbiAgICAgICAgbWFya3VwICs9IGZpZWxkTWVudVZpZXcucmVuZGVyTWVudShtZW51SXRlbSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIG1hcmt1cCArPSAnPC9saT4nOyAgICAgIFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiBtYXJrdXAgKyAnPC91bD4nOyAgICBcclxuICB9LFxyXG4gIHNldENoZWNrbWFya3M6IGZ1bmN0aW9uKG1lbnVJdGVtSUQsIHNpYmxpbmdzKVxyXG4gIHtcclxuICAgIHNpYmxpbmdzLmZvckVhY2goZnVuY3Rpb24oc2libGluZykgeyAkKCcjRmllbGRNZW51SXRlbScgKyBzaWJsaW5nLmlkKS5yZW1vdmVDbGFzcygnY2hlY2tlZEZpZWxkTWVudUl0ZW0nKS5hZGRDbGFzcygndW5jaGVja2VkRmllbGRNZW51SXRlbScpOyB9KTsgIC8vY2xlYXIgdGhlIGNoZWNrbWFya3MgZm9yIGFsbCBpdGVtIG9uIHRoZSBzYW1lIG1lbnUgbGV2ZWxcclxuICBcclxuICAgICQoJyNGaWVsZE1lbnVJdGVtJyArIG1lbnVJdGVtSUQpLnJlbW92ZUNsYXNzKCd1bmNoZWNrZWRGaWVsZE1lbnVJdGVtJykuYWRkQ2xhc3MoJ2NoZWNrZWRGaWVsZE1lbnVJdGVtJyk7ICAgICAgXHJcbiAgfVxyXG59OyIsInZhciBoZWFkZXJWaWV3ID0gXHJcbntcclxuICByZW5kZXI6IGZ1bmN0aW9uKHByb2plY3RzKVxyXG4gIHtcclxuICAgIHZhciBtYXJrdXAgPSAnPGxhYmVsIGlkPVwicHJvamVjdFNlbGVjdG9yTGFiZWxcIj5Qcm9qZWN0OjwvbGFiZWw+PGxhYmVsIGlkPVwidmVyc2lvblNlbGVjdG9yTGFiZWxcIj5WZXJzaW9uOjwvbGFiZWw+PGxhYmVsIGlkPVwidmlld1NlbGVjdG9yTGFiZWxcIj5WaWV3OjwvbGFiZWw+JztcclxuICAgIFxyXG4gICAgbWFya3VwICs9ICc8c2VsZWN0IGlkPVwicHJvamVjdFNlbGVjdG9yXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4nICtcclxuICAgICc8b3B0aW9uIGlkPVwic2VsZWN0UHJvamVjdE9wdGlvblwiIHZhbHVlPVwiMFwiPlNlbGVjdCBQcm9qZWN0Li4uPC9vcHRpb24+JztcclxuICBcclxuICAgIHByb2plY3RzLmZvckVhY2goZnVuY3Rpb24ocHJvamVjdClcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIHByb2plY3QuaWQgKyAnXCI+JyArIHByb2plY3QubmFtZSArICc8L29wdGlvbj4nO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBtYXJrdXAgKz0gJzxvcHRpb24gaWQ9XCJuZXdQcm9qZWN0T3B0aW9uXCIgdmFsdWU9XCItMVwiPkNyZWF0ZSBOZXcgUHJvamVjdC4uLjwvb3B0aW9uPjwvc2VsZWN0PidcclxuICAgICsgJzxpbnB1dCBpZD1cImVkaXROZXdQcm9qZWN0TmFtZUlucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj48L2lucHV0Pic7XHJcbiAgICAvL21hcmt1cCArPSAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGlkPVwic2F2ZS1maWxlLWJ1dHRvblwiIG9uY2xpY2s9XCJzYXZlTG9jYWxseSgpXCI+U2F2ZSBhcyBGaWxlPC9hPic7ICAgIFxyXG4gICAgXHJcbiAgICAgbWFya3VwICs9ICc8YSBocmVmPVwiI1wiIGlkPVwic2F2ZS1kYXRhYmFzZS1idXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiPlNhdmUgdG8gRGF0YWJhc2U8L2E+JztcclxuICAgIFxyXG4gICAgbWFya3VwICs9ICc8c2VsZWN0IGlkPVwidmlld1NlbGVjdG9yXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4nICtcclxuICAgICc8b3B0aW9uIHZhbHVlPVwiMFwiPlNwcmVhZCBTaGVldDwvb3B0aW9uPicgK1xyXG4gICAgJzxvcHRpb24gdmFsdWU9XCIxXCI+VHJlZTwvb3B0aW9uPicgK1xyXG4gICAgJzxvcHRpb24gdmFsdWU9XCIyXCI+V2VpZ2h0ZWQgVHJlZTwvb3B0aW9uPicgK1xyXG4gICAgJzxvcHRpb24gdmFsdWU9XCIzXCI+Q2lyY2xlIFBhY2tpbmc8L29wdGlvbj4nICtcclxuICAgICc8L3NlbGVjdD4nOyBcclxuICAgIFxyXG4gICAgJCgnI2hlYWRlcicpLmh0bWwobWFya3VwKTtcclxuICAgIFxyXG4gICAgJCgnI3ZpZXdTZWxlY3RvcicpLmhpZGUoKTtcclxuICAgICQoJyNzYXZlLWRhdGFiYXNlLWJ1dHRvbicpLmhpZGUoKTtcclxuICAgICQoJyN2aWV3U2VsZWN0b3JMYWJlbCcpLmhpZGUoKTtcclxuICAgICQoJyN2ZXJzaW9uU2VsZWN0b3JMYWJlbCcpLmhpZGUoKTtcclxuICAgIFxyXG4gICAgLy9ldmVudCBoYW5kbGVyc1xyXG4gICAgJCgnI3Byb2plY3RTZWxlY3RvcicpLmNoYW5nZShmdW5jdGlvbigpIHsgaGVhZGVyVmlldy5zZWxlY3RQcm9qZWN0KCQodGhpcykpOyB9KTtcclxuICAgICQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLmtleXVwKGZ1bmN0aW9uKGUpIHsgaGVhZGVyVmlldy5jcmVhdGVOZXdQcm9qZWN0KGUpOyB9KTtcclxuICAgICQoJyNzYXZlLWRhdGFiYXNlLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkgeyBobXMub3BlblNhdmVEQkRpYWxvZygpOyB9KTtcclxuICAgICQoJyN2aWV3U2VsZWN0b3InKS5jaGFuZ2UoZnVuY3Rpb24oKSB7IGhtcy5zZWxlY3RWaWV3KCQodGhpcykudmFsKCkpOyB9KTtcclxuICB9LFxyXG4gIHJlZnJlc2g6IGZ1bmN0aW9uKHZlcnNpb25zKVxyXG4gIHtcclxuICAgICQoJyN2ZXJzaW9uU2VsZWN0b3InKS5yZW1vdmUoKTtcclxuICAgIFxyXG4gICAgdmFyIHZlcnNpb25TZWxlY3RvciA9ICc8c2VsZWN0IGlkPVwidmVyc2lvblNlbGVjdG9yXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4nO1xyXG4gICAgXHJcbiAgICB2ZXJzaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHZlcnNpb24pIFxyXG4gICAgeyBcclxuICAgICAgdmVyc2lvblNlbGVjdG9yICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIHZlcnNpb24udmVyc2lvbiArICdcIj4nICsgdmVyc2lvbi52ZXJzaW9uICsgJzwvb3B0aW9uPic7ICAgXHJcbiAgICB9KTtcclxuICAgIHZlcnNpb25TZWxlY3RvciArPSAnPC9zZWxlY3Q+JztcclxuICAgICQoJyNoZWFkZXInKS5hcHBlbmQodmVyc2lvblNlbGVjdG9yKTtcclxuICAgIFxyXG4gICAgJCgnI3ZpZXdTZWxlY3RvcicpLnNob3coKTtcclxuICAgICQoJyNzYXZlLWRhdGFiYXNlLWJ1dHRvbicpLnNob3coKTtcclxuICAgICQoJyN2aWV3U2VsZWN0b3JMYWJlbCcpLnNob3coKTtcclxuICAgICQoJyN2ZXJzaW9uU2VsZWN0b3JMYWJlbCcpLnNob3coKTtcclxuICAgIFxyXG4gICAgJCgnI3ZlcnNpb25TZWxlY3RvcicpLmNoYW5nZShmdW5jdGlvbigpIHsgaG1zLnNlbGVjdFZlcnNpb24oJCh0aGlzKS52YWwoKSk7IH0pOyAgICAgXHJcbiAgfSxcclxuICBzZWxlY3RlZFZpZXc6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gJCgnI3ZpZXdTZWxlY3RvcicpLnZhbCgpO1xyXG4gIH0sXHJcbiAgc2VsZWN0UHJvamVjdDogZnVuY3Rpb24ocHJvamVjdFNlbGVjdG9yKVxyXG4gIHtcclxuICAgIGlmKHByb2plY3RTZWxlY3Rvci5maW5kKFwiOnNlbGVjdGVkXCIpLmF0dHIoJ2lkJykgPT09IFwibmV3UHJvamVjdE9wdGlvblwiKVxyXG4gICAge1xyXG4gICAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS52YWwoXCJUeXBlIE5ldyBQcm9qZWN0IE5hbWUgYW5kIFByZXNzIEVudGVyIHRvIENyZWF0ZVwiKTtcclxuICAgICAgJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0Jykuc2hvdygpLmZvY3VzKCkuc2VsZWN0KCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICQoJyNzZWxlY3RQcm9qZWN0T3B0aW9uJykucmVtb3ZlKCk7ICAgICAvL3JlbW92ZSB0aGUgc2VsZWN0IHByb2plY3Qgb3B0aW9uLCBvbmNlIHRoZSB1c2VyIHNlbGVjdHMgYSBwcm9qZWN0ICAgICAgXHJcbiAgICAgIGhtcy5vcGVuUHJvamVjdChwcm9qZWN0U2VsZWN0b3IudmFsKCkpO1xyXG4gICAgfSAgICAgICBcclxuICB9LFxyXG4gIGNyZWF0ZU5ld1Byb2plY3Q6IGZ1bmN0aW9uKGUpXHJcbiAge1xyXG4gICAgaWYoZS5rZXlDb2RlID09IEVOVEVSX0tFWSlcclxuICAgIHtcclxuICAgIFx0JCgnI3NlbGVjdFByb2plY3RPcHRpb24nKS5yZW1vdmUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSB0aGUgc2VsZWN0IHByb2plY3Qgb3B0aW9uLCBvbmNlIHRoZSB1c2VyIHNlbGVjdHMgYSBwcm9qZWN0IFxyXG4gICAgXHRcclxuICAgIFx0dmFyIG5ld1Byb2plY3ROYW1lID0gJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0JykudmFsKCk7XHJcbiAgICBcdCQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLmhpZGUoKTtcclxuICAgIFx0XHJcbiAgICBcdC8vYWRkIGFuIG9wdGlvbiBmb3IgdGhlIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBsaXN0LCBzZWxlY3QgdGhhdCBvcHRpb25cclxuICAgIFx0dmFyIG5ld1Byb2plY3RJRCA9IGhtcy5uZXh0UHJvamVjdElEKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBuZWVkIHRvIGdldCB0aGlzIGZyb20gdGhlIGRhdGFiYXNlIHRvIGluc3VyZSB3ZSBnZXQgdGhlIGNvcnJlY3QgaWRcclxuICAgIFx0dmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICBcdG9wdGlvbi50ZXh0ID0gbmV3UHJvamVjdE5hbWU7XHJcbiAgICBcdG9wdGlvbi52YWx1ZSA9IG5ld1Byb2plY3RJRC50b1N0cmluZygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIFx0JChvcHRpb24pLmluc2VydEJlZm9yZSgnI3Byb2plY3RTZWxlY3RvciBvcHRpb246bnRoLWNoaWxkKCcgKyAkKCcjcHJvamVjdFNlbGVjdG9yJykubGVuZ3RoICsgJyknKTtcclxuICAgIFx0JCgnI3Byb2plY3RTZWxlY3RvcicpLnZhbChuZXdQcm9qZWN0SUQpO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICBobXMuY3JlYXRlTmV3UHJvamVjdChuZXdQcm9qZWN0TmFtZSk7XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgc2VsZWN0VmVyc2lvbjogZnVuY3Rpb24odmVyc2lvbilcclxuICB7XHJcbiAgICAkKCcjdmVyc2lvblNlbGVjdG9yJykudmFsKHZlcnNpb24pO1xyXG4gIH0sXHJcbiAgc2V0VmVyc2lvbk91dE9mRGF0ZTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoJyN2ZXJzaW9uU2VsZWN0b3JMYWJlbCcpLmh0bWwoJ1ZlcnNpb24gT3V0IG9mIERhdGUnKTtcclxuICAgICQoJyN2ZXJzaW9uU2VsZWN0b3JMYWJlbCcpLmNzcygnY29sb3InLCAncmVkJyk7XHJcbiAgfSxcclxuICBzZXRWZXJzaW9uQ3VycmVudDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoJyN2ZXJzaW9uU2VsZWN0b3JMYWJlbCcpLmh0bWwoJ1ZlcnNpb246Jyk7XHJcbiAgICAkKCcjdmVyc2lvblNlbGVjdG9yTGFiZWwnKS5jc3MoJ2NvbG9yJywgJ2JsYWNrJyk7ICAgIFxyXG4gIH1cclxufTsiLCJ2YXIgcHJvamVjdEFjdGlvbiA9XHJcbntcclxuICBpbml0OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI3Byb2plY3QtYWN0aW9uLWNvbnRhaW5lcicpLmh0bWwocHJvamVjdEFjdGlvbi5tYXJrdXAoKSk7XHJcbiAgICBcclxuICAgICQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS5rZXl1cChmdW5jdGlvbihlKVxyXG4gICAge1xyXG4gICAgICBpZihlLmtleUNvZGUgPT0gRU5URVJfS0VZKVxyXG4gICAgICB7XHJcbiAgICAgICAgcHJvamVjdEFjdGlvbi5lbnRlclByZXNzZWQoKTtcclxuICAgICAgfVxyXG4gICAgfSk7IFxyXG4gICAgXHJcbiAgICAkKFwiI3Byb2plY3RBY3Rpb25TZWxlY3RvclwiKS5jaGFuZ2UocHJvamVjdEFjdGlvbi5oYW5kbGUpO1xyXG4gIH0sXHJcbiAgaGFuZGxlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gIFx0aWYoJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgpID09ICdhZGRGaWVsZCcpXHJcbiAgXHR7XHJcbiAgICAgICQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS52YWwoXCJUeXBlIE5ldyBGaWVsZCBOYW1lIGFuZCBQcmVzcyBFbnRlciB0byBDcmVhdGVcIik7XHJcbiAgXHRcdCQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS5zaG93KCkuZm9jdXMoKS5zZWxlY3QoKTtcclxuICBcdH1cdFxyXG4gIH0sXHJcbiAgZW50ZXJQcmVzc2VkOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gIFx0aWYoJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgpID09ICdhZGRGaWVsZCcpXHJcbiAgXHR7XHJcbiAgICAgIHNwcmVhZFNoZWV0LmFkZEZpZWxkKCQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS52YWwoKSk7XHRcclxuICAgICAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLmhpZGUoKTtcclxuICAgICAgJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgnYmxhbmsnKTtcclxuICBcdH1cclxuICB9LFxyXG4gIG1hcmt1cDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHJldHVybiAnPGRpdiBpZD1cInByb2plY3RBY3Rpb25TZWxlY3RvckNvbnRhaW5lclwiPidcclxuICAgICsgJzxzZWxlY3QgaWQ9XCJwcm9qZWN0QWN0aW9uU2VsZWN0b3JcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPidcclxuICAgICsgJzxvcHRpb24gdmFsdWU9XCJibGFua1wiPjwvb3B0aW9uPidcclxuICAgICsgJzxvcHRpb24gdmFsdWU9XCJhZGRGaWVsZFwiPkFkZCBGaWVsZDwvb3B0aW9uPidcclxuICAgICsgJzwvc2VsZWN0PidcclxuICAgICsgJzxpbnB1dCBpZD1cInByb2plY3RBY3Rpb25JbnB1dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+PC9pbnB1dD4nXHJcbiAgICArICc8L2Rpdj4nOyBcclxuICB9XHJcbn07IiwidmFyIHNhdmVEQkRpYWxvZyA9XHJcbntcclxuICByZW5kZXI6IGZ1bmN0aW9uKGJhc2VWZXJzaW9uTnVtYmVyLCBiYXNlVmVyc2lvbkxhYmVsLCBiYXNlVmVyc2lvbkRhdGUsIG5ld1ZlcnNpb24pXHJcbiAge1xyXG4gICAgJCgnI3NhdmVEQkRpYWxvZycpLnJlbW92ZSgpO1xyXG4gICAgXHJcbiAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwic2F2ZURCRGlhbG9nXCIgcm9sZT1cImRpYWxvZ1wiPjwvZGl2PicpO1xyXG4gICAgJCgnI3NhdmVEQkRpYWxvZycpLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPjxkaXYgaWQ9XCJzYXZlREJEaWFsb2dDb250ZW50XCIgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nQ29udGVudCcpLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiIHN0eWxlPVwicGFkZGluZzoxNXB4IDMwcHg7XCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+JnRpbWVzOzwvYnV0dG9uPjxoND5TYXZlIFByb2plY3QgQ2hhbmdlcyB0byBEYXRhYmFzZTwvaDQ+PC9kaXY+Jyk7XHJcbiAgICBcclxuICAgICQoJyNzYXZlREJEaWFsb2dDb250ZW50JykuYXBwZW5kKCc8ZGl2IGlkPVwic2F2ZURCRGlhbG9nQm9keVwiIGNsYXNzPVwibW9kYWwtYm9keVwiIHN0eWxlPVwicGFkZGluZzo0MHB4IDUwcHg7XCI+PC9kaXY+Jyk7XHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nQm9keScpLmFwcGVuZCgnPGRpdj48bGFiZWw+QmFzZSBWZXJzaW9uOiAnICsgYmFzZVZlcnNpb25OdW1iZXIgKyAnIC0gJyArIGJhc2VWZXJzaW9uRGF0ZSArICcgLSAnICsgYmFzZVZlcnNpb25MYWJlbCArICc8L2xhYmVsPjwvZGl2PicpO1xyXG4gICAgJCgnI3NhdmVEQkRpYWxvZ0JvZHknKS5hcHBlbmQoJzxkaXYgc3R5bGU9XCJtYXJnaW4tdG9wOjIwcHhcIj48bGFiZWw+TmV3IFZlcnNpb246ICAnICsgbmV3VmVyc2lvbiArICc8L2xhYmVsPjwvZGl2PjxkaXY+PC9kaXY+Jyk7XHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nQm9keScpLmFwcGVuZCgnPGRpdiA+PGxhYmVsIGZvcj1cInZlcnNpb25MYWJlbFwiPk5ldyBWZXJzaW9uIExhYmVsPC9sYWJlbD4nKTtcclxuICAgICQoJyNzYXZlREJEaWFsb2dCb2R5JykuYXBwZW5kKCc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwidmVyc2lvbkxhYmVsXCI+PC9kaXY+Jyk7XHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nQm9keScpLmFwcGVuZCgnPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6MjBweFwiPjxsYWJlbCBmb3I9XCJyZWFzb25Gb3JDaGFuZ2VcIj5SZWFzb24gZm9yIENoYW5nZXM8L2xhYmVsPicpO1xyXG4gICAgJCgnI3NhdmVEQkRpYWxvZ0JvZHknKS5hcHBlbmQoJzx0ZXh0YXJlYSBzdHlsZT1cInJlc2l6ZTpub25lXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiByb3dzPVwiNVwiIGlkPVwicmVhc29uRm9yQ2hhbmdlXCI+PC90ZXh0YXJlYT48L2Rpdj4nKTtcclxuICAgIFxyXG4gICAgJCgnI3NhdmVEQkRpYWxvZ0NvbnRlbnQnKS5hcHBlbmQoJzxkaXYgaWQ9XCJzYXZlREJEaWFsb2dGb290ZXJcIiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPjwvZGl2PicpO1xyXG4gICAgJCgnI3NhdmVEQkRpYWxvZ0Zvb3RlcicpLmFwcGVuZCgnPGJ1dHRvbiBzdHlsZT1cIm1hcmdpbi1sZWZ0OjEwcHhcIiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyIGJ0bi1kZWZhdWx0IHB1bGwtcmlnaHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPkNhbmNlbDwvYnV0dG9uPicpO1xyXG4gICAgJCgnI3NhdmVEQkRpYWxvZ0Zvb3RlcicpLmFwcGVuZCgnPGJ1dHRvbiBpZD1cInNhdmVEQkRpYWxvZ1NhdmVCdXR0b25cIiBjbGFzcz1cImJ0biBidG4taW5mbyBidG4tZGVmYXVsdCBwdWxsLXJpZ2h0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5TYXZlPC9idXR0b24+Jyk7XHJcbiAgICBcclxuICAgICQoJyNzYXZlREJEaWFsb2dTYXZlQnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7IGhtcy5zYXZlVG9EYXRhYmFzZSgpOyB9KTtcclxuICAgICQoXCIjc2F2ZURCRGlhbG9nXCIpLm1vZGFsKCk7XHJcbiAgfVxyXG59OyIsInZhciBzcHJlYWRTaGVldEtleUhhbmRsZXIgPVxyXG57XHJcbiAgY2hlY2tLZXk6IGZ1bmN0aW9uKGUpIFxyXG4gIHtcclxuICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuICBcclxuICAgIGlmIChlLmtleUNvZGUgPT0gS0VZX1VQX0FSUk9XKSBcclxuICAgIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB2YXIgcHJldlJvdyA9ICQoc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmZpbmRBbmNlc3Rvcihkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndHInKSkucHJldigpWzBdO1xyXG4gICAgICBcclxuICAgICAgaWYocHJldlJvdykgeyAkKCcjJyArIHNwcmVhZFNoZWV0S2V5SGFuZGxlci5nZXROZXh0RWxlbWVudElEKHByZXZSb3cpKS5mb2N1cygpOyB9ICAgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChlLmtleUNvZGUgPT0gS0VZX0RPV05fQVJST1cpIFxyXG4gICAge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciBuZXh0Um93ID0gJChzcHJlYWRTaGVldEtleUhhbmRsZXIuZmluZEFuY2VzdG9yKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0cicpKS5uZXh0KClbMF07XHJcbiAgICAgIFxyXG4gICAgICBpZihuZXh0Um93KSB7ICQoJyMnICsgc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmdldE5leHRFbGVtZW50SUQobmV4dFJvdykpLmZvY3VzKCk7IH0gICAgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChlLmtleUNvZGUgPT0gS0VZX1JJR0hUX0FSUk9XKSBcclxuICAgIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0S2V5SGFuZGxlci5maW5kQW5jZXN0b3IoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RkJykpLm5leHQoKS5maW5kKCdpbnB1dCcpLmZvY3VzKCk7ICBcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfTEVGVF9BUlJPVykgXHJcbiAgICB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgJChzcHJlYWRTaGVldEtleUhhbmRsZXIuZmluZEFuY2VzdG9yKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0ZCcpKS5wcmV2KCkuZmluZCgnaW5wdXQnKS5mb2N1cygpOyAgXHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgZ2V0TmV4dEVsZW1lbnRJRDogZnVuY3Rpb24obmV3Um93KVxyXG4gIHtcclxuICAgIHZhciBpZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuaWQ7ICBcclxuICAgIGlmKGlkLmluZGV4T2YoJ25vZGVJbnB1dCcpID4gLTEpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiAnbm9kZUlucHV0JyArIG5ld1Jvdy5pZC5yZXBsYWNlKCdyb3dpZCcsJycpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICB2YXIgY2xhc3NlcyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcbiAgXHJcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGMgPSBjbGFzc2VzW2ldO1xyXG4gIFxyXG4gICAgICAgIGlmKGMuaW5kZXhPZignZmllbGRJbnB1dCcpID4gLTEgJiYgYyAhPSAnZmllbGRJbnB1dCcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGMucmVwbGFjZSgnZmllbGRJbnB1dCcsICcnKTtcclxuICAgICAgICAgIHJldHVybiBmaWVsZE5hbWUgKyBuZXdSb3cuaWQucmVwbGFjZSgnZGF0YXJvd2lkJywnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICAgXHJcbiAgfSxcclxuICBmaW5kQW5jZXN0b3I6IGZ1bmN0aW9uKGVsLCB0YWdOYW1lKSBcclxuICB7XHJcbiAgICB0YWdOYW1lID0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gIFxyXG4gICAgd2hpbGUgKGVsICYmIGVsLnBhcmVudE5vZGUpIFxyXG4gICAge1xyXG4gICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XHJcbiAgICAgIGlmIChlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnTmFtZSkgeyByZXR1cm4gZWw7IH1cclxuICAgIH1cclxuICB9XHJcbn07IiwiLy9UT0RPOiBhZGQgY29tbWVudHNcclxudmFyIHNwcmVhZFNoZWV0VmlldyA9IFxyXG57XHJcbiAgcmVuZGVyOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJChkb2N1bWVudCkub24oXCJrZXlkb3duXCIsIHNwcmVhZFNoZWV0S2V5SGFuZGxlci5jaGVja0tleSk7XHJcbiAgICBcclxuICAgICQoJyNzcHJlYWRTaGVldFZpZXcnKS5yZW1vdmUoKTtcclxuICAgICQoJ2JvZHknKS5hcHBlbmQodGhpcy5zcHJlYWRTaGVldE1hcmt1cCgpKTtcclxuICAgIFxyXG4gICAgcHJvamVjdEFjdGlvbi5pbml0KCk7XHJcbiAgICB0aGlzLnJlbmRlckV4cGFuZGVyKCk7XHJcbiAgICB0aGlzLnJlbmRlckZpZWxkc1JvdygpO1xyXG4gICAgdGhpcy5yZW5kZXJEYXRhVGFibGUoKTtcclxuICAgIHRoaXMucmVuZGVyTm9kZUNvbHVtbigpO1xyXG4gIH0sXHJcbiAgZGVzdHJveTogZnVuY3Rpb24oKSBcclxuICB7IFxyXG4gICAgJCgnI3NwcmVhZFNoZWV0VmlldycpLnJlbW92ZSgpO1xyXG4gICAgJChkb2N1bWVudCkub2ZmKFwia2V5ZG93blwiKTsgXHJcbiAgfSxcclxuICBzcHJlYWRTaGVldE1hcmt1cDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHJldHVybiAnPGRpdiBpZD1cInNwcmVhZFNoZWV0Vmlld1wiPicgK1xyXG4gICAgICAnPGRpdiBpZD1cInNwcmVhZFNoZWV0Vmlld0FjdGlvbnNcIj48ZGl2IGlkPVwicHJvamVjdC1hY3Rpb24tY29udGFpbmVyXCI+PC9kaXY+PGRpdiBpZD1cImV4cGFuZGVyQ29udGFpbmVyXCI+PC9kaXY+PC9kaXY+JyArXHJcbiAgICAgICc8ZGl2IGlkPVwiZmllbGRzLWhlYWRlci1yb3dcIj48L2Rpdj4nICtcclxuICAgICAgJzxkaXYgaWQ9XCJyZWRpcHMtZHJhZ1wiPjwvZGl2PicgK1xyXG4gICAgICAnPGRpdiBpZD1cImRhdGEtY29udGFpbmVyXCI+PC9kaXY+JyArXHJcbiAgICAnPC9kaXY+JztcclxuICB9LFxyXG4gIHJlbmRlckV4cGFuZGVyOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgZXhwYW5kZXJTZWxlY3Rvci5pbml0KHNwcmVhZFNoZWV0LnRyZWUoKS5tYXhEZXB0aCk7XHJcbiAgfSxcclxuICByZW5kZXJGaWVsZHNSb3c6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKCcjZmllbGRzLWhlYWRlci1yb3cnKS5odG1sKCc8dGFibGUgaWQ9XCJmaWVsZEhlYWRlclRhYmxlXCI+PHRyIGlkPVwiZmllbGRIZWFkZXJSb3dcIj48L3RyPjwvdGFibGU+Jyk7XHJcbiAgXHJcbiAgICBzcHJlYWRTaGVldC5maWVsZHMoKS5mb3JFYWNoKGZ1bmN0aW9uKGZpZWxkKVxyXG4gICAgeyBcclxuICAgICAgJCgnI2ZpZWxkSGVhZGVyUm93JykuYXBwZW5kKHNwcmVhZFNoZWV0Vmlldy5maWVsZEhlYWRlcihmaWVsZC5uYW1lKSk7XHJcbiAgICAgICQoJyNmaWVsZE1lbnVCdXR0b24nICsgZmllbGQubmFtZSkuY2xpY2soZnVuY3Rpb24oZSkgeyBzcHJlYWRTaGVldFZpZXcuc2hvd0ZpZWxkTWVudShlLCBmaWVsZC5uYW1lKTsgfSk7XHJcbiAgICB9KTtcclxuICBcclxuICAgICQoJyNmaWVsZHMtaGVhZGVyLXJvdycpLmNzcygncmlnaHQnLCBzY3JvbGxCYXJXaWR0aCArICdweCcpOyAgIC8vc2hvcnRlbiB0aGUgd2lkdGggb2YgdGhlIGZpZWxkc1JvdyBieSB0aGUgd2lkdGggb2YgdGhlIHNjcm9sbCBiYXIgICBcclxuICB9LFxyXG4gIGZpZWxkSGVhZGVyOiBmdW5jdGlvbihmaWVsZE5hbWUpXHJcbiAge1xyXG4gICAgcmV0dXJuICc8dGQgY2xhc3M9XCJmaWVsZEhlYWRlckNlbGxcIj48ZGl2IGNsYXNzPVwiZmllbGRIZWFkZXJDb250YWluZXJcIj4nXHJcbiAgICAgICsgJzxkaXYgY2xhc3M9XCJtb3ZlQ29sR3JpcFwiPjwvZGl2PidcclxuICAgICAgKyAnPGRpdiBjbGFzcz1cImZpZWxkTmFtZUlucHV0Q29udGFpbmVyXCI+PHRleHRhcmVhIGlkPVwiY29sSGVhZGVySW5wdXQnICsgZmllbGROYW1lICsgJ1wiIGNsYXNzPVwiZmllbGROYW1lSW5wdXRcIj4nICsgZmllbGROYW1lICsgJzwvdGV4dGFyZWE+PC9kaXY+J1xyXG4gICAgICArICc8ZGl2IGNsYXNzPVwiZmllbGRIZWFkZXJCdXR0b25cIj4nXHJcbiAgICAgICsgJzxpbWcgaWQ9XCJmaWVsZE1lbnVCdXR0b24nICsgZmllbGROYW1lICsgJ1wiIHNyYz1cImltYWdlcy9kb3duLWFycm93LnBuZ1wiLz4nXHJcbiAgICAgICsgJzwvZGl2PidcclxuICAgICAgKyAnPGRpdiBpZD1cImdyaXAnICsgZmllbGROYW1lICsgJ1wiIGNsYXNzPVwicmVzaXplQ29sR3JpcFwiIG9ubW91c2Vkb3duPVwic3RhcnRSZXNpemUoZXZlbnQsIHRoaXMpXCI+PC9kaXY+J1xyXG4gICAgICArICc8L2Rpdj48L3RkPic7XHJcbiAgfSxcclxuICBzaG93RmllbGRNZW51OiBmdW5jdGlvbihlLCBmaWVsZE5hbWUpXHJcbiAge1xyXG4gICAgaWYoJCgnI2ZpZWxkTWVudScpLmxlbmd0aCA9PT0gMClcclxuICAgIHtcclxuICAgICAgZmllbGRNZW51Q29udHJvbGxlci5kaXNwbGF5RmllbGRNZW51KGZpZWxkTmFtZSwgZS5jbGllbnRYLCBlLmNsaWVudFkpO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIHJlbmRlckRhdGFUYWJsZTogZnVuY3Rpb24oKVxyXG4gIHsgICAgXHJcbiAgICAkKCcjZGF0YS1jb250YWluZXInKS5hcHBlbmQoJzx0YWJsZSBpZD1cImRhdGFUYWJsZVwiPjwvdGFibGU+Jyk7XHJcbiAgICBzcHJlYWRTaGVldC50cmVlKCkuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkgXHJcbiAgICB7IFxyXG4gICAgICAkKCcjZGF0YVRhYmxlJykuYXBwZW5kKHNwcmVhZFNoZWV0Vmlldy5kYXRhUm93c01hcmt1cChjaGlsZCkpOyBcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAkKCcjZGF0YS1jb250YWluZXInKS5zY3JvbGwoZnVuY3Rpb24oKSBcclxuICAgIHtcclxuICAgICAgJCgnI3JlZGlwcy1kcmFnJykuc2Nyb2xsVG9wKCQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbFRvcCgpKTtcclxuICAgICAgJCgnI2ZpZWxkcy1oZWFkZXItcm93Jykuc2Nyb2xsTGVmdCgkKCcjZGF0YS1jb250YWluZXInKS5zY3JvbGxMZWZ0KCkpOyAgICAgIFxyXG4gICAgfSk7ICAgICBcclxuICB9LFxyXG4gIGRhdGFSb3dzTWFya3VwOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBtYXJrdXAgPSAnPHRyIGlkPVwiZGF0YXJvd2lkJyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJkYXRhUm93XCI+JztcclxuICAgIFxyXG4gICAgc3ByZWFkU2hlZXQuZmllbGRzKCkuZm9yRWFjaChmdW5jdGlvbihmaWVsZCkgXHJcbiAgICB7ICBcclxuICAgICAgbWFya3VwICs9ICc8dGQgY2xhc3M9XCJjZWxsXCI+J1xyXG4gICAgICAgICAgICAgKyAnPGlucHV0IGNsYXNzPVwiZmllbGRJbnB1dCBmaWVsZElucHV0JyArIGZpZWxkLm5hbWUgKyAnXCIgdHlwZT1cInRleHRcIiBpZD1cIicgKyBmaWVsZC5uYW1lICsgbm9kZS5pZCArICdcIiB2YWx1ZT1cIicgKyBzcHJlYWRTaGVldC5mb3JtYXR0ZWRWYWx1ZShmaWVsZCwgbm9kZSkgKyAnXCIgJ1xyXG4gICAgICAgICAgICAgKyAnb25pbnB1dD1cInNwcmVhZFNoZWV0LnVwZGF0ZUZpZWxkVmFsdWUoXFwnJyArIGZpZWxkLm5hbWUgKyAnXFwnLCcgKyBub2RlLmlkICsgJylcIiBvbmZvY3VzPVwiJCh0aGlzKS52YWwoc3ByZWFkU2hlZXQucmF3VmFsdWUoXFwnJyArIGZpZWxkLm5hbWUgKyAnXFwnLCcgKyBub2RlLmlkICsgJykpXCI+J1xyXG4gICAgICAgICAgICAgKyAnPC90ZD4nO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7IG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcuZGF0YVJvd3NNYXJrdXAoY2hpbGQpOyB9KTsgICBcclxuXHJcbiAgICByZXR1cm4gbWFya3VwICsgJzwvdHI+JztcclxuICB9LFxyXG4gIHJlbmRlckRhdGFDZWxsOiBmdW5jdGlvbihyb3csIGZpZWxkTmFtZSwgbm9kZUlELCB2YWx1ZSlcclxuICB7XHJcbiAgICAkKHJvdykuYXBwZW5kKHNwcmVhZFNoZWV0Vmlldy5maWVsZENlbGwoZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKSk7XHJcbiAgICAkKCcjJyArIGZpZWxkTmFtZSArIG5vZGVJRCkub24oJ2lucHV0JywgZnVuY3Rpb24oKSB7IHNwcmVhZFNoZWV0LnVwZGF0ZUZpZWxkVmFsdWUoZmllbGROYW1lLCBub2RlSUQpOyB9KTtcclxuICAgICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS5mb2N1cyhmdW5jdGlvbigpIHsgJCh0aGlzKS52YWwoc3ByZWFkU2hlZXQucmF3VmFsdWUoZmllbGROYW1lLCBub2RlSUQpKTsgfSk7ICAgICBcclxuICB9LFxyXG4gIGZpZWxkQ2VsbDogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG4gIHtcclxuICAgIHJldHVybiAnPHRkIGNsYXNzPVwiY2VsbFwiPjxpbnB1dCBjbGFzcz1cImZpZWxkSW5wdXQgZmllbGRJbnB1dCcgKyBmaWVsZE5hbWUgKyAnXCIgdHlwZT1cInRleHRcIiBpZD1cIicgKyBmaWVsZE5hbWUgKyBub2RlSUQgKyAnXCIgdmFsdWU9XCInICsgdmFsdWUgKyAnXCI+PC90ZD4nO1xyXG4gIH0sXHJcbiAgbm9kZVJvd01hcmt1cDogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICB2YXIgbWFya3VwID0gJzx0ciBpZD1cInJvd2lkJyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJub2RlUm93XCI+PHRkIGNsYXNzPVwicmVkaXBzLXJvd2hhbmRsZXIgY2VsbFwiPjxkaXYgaWQ9XCJub2RlQ29udGVudCcgKyBub2RlLmlkICsgJ1wiIGNsYXNzPVwibm9kZS1jb250YWluZXJcIj4nO1xyXG4gICAgXHJcbiAgICBtYXJrdXAgKz0gc3ByZWFkU2hlZXRWaWV3LmRlbGV0ZUJ1dHRvbihub2RlLmlkKSArIHNwcmVhZFNoZWV0Vmlldy5jb3B5QnV0dG9uKG5vZGUuaWQpICsgc3ByZWFkU2hlZXRWaWV3LmRyYWdIYW5kbGU7XHJcbiAgICBtYXJrdXAgKz0gc3ByZWFkU2hlZXRWaWV3Lm5vZGVDb250ZW50KG5vZGUpOyAgICBcclxuICBcclxuICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkgeyBtYXJrdXAgKz0gc3ByZWFkU2hlZXRWaWV3Lm5vZGVSb3dNYXJrdXAoY2hpbGQpOyB9KTtcclxuICBcclxuICAgIHJldHVybiBtYXJrdXAgKyAnPC9kaXY+PC90ZD48L3RyPic7XHJcbiAgfSxcclxuICBub2RlQ29udGVudDogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICB2YXIgaWNvbk1hcmt1cDtcclxuICAgIHZhciBkZXB0aEFkanVzdG1lbnQgPSAobm9kZS5kZXB0aC0xKSAqIDEwO1xyXG4gICAgdmFyIHdpZHRoQWRqdXN0bWVudCA9IGRlcHRoQWRqdXN0bWVudDsgICBcclxuICBcclxuICAgIGlmKHNwcmVhZFNoZWV0Lmhhc0NoaWxkcmVuKG5vZGUpKVxyXG4gICAge1xyXG4gICAgICBpZihzcHJlYWRTaGVldC5jaGlsZHJlbkhpZGRlbihub2RlKSkgeyBpY29uTWFya3VwID0gJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XCI+PC9zcGFuPic7IH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWNvbk1hcmt1cCA9ICc8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duXCI+PC9zcGFuPic7IH1cclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgaWNvbk1hcmt1cCA9ICc8c3Bhbj48L3NwYW4+JztcclxuICAgICAgZGVwdGhBZGp1c3RtZW50ICs9IDEyO1xyXG4gICAgICB3aWR0aEFkanVzdG1lbnQgLT0gMTA7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBzcHJlYWRTaGVldFZpZXcuZXhwYW5kSWNvbihub2RlLmlkLCBkZXB0aEFkanVzdG1lbnQsIGljb25NYXJrdXApICsgc3ByZWFkU2hlZXRWaWV3Lm5vZGVJbnB1dChub2RlLCBERUZBVUxUX05PREVfSU5QVVRfV0lEVEgtd2lkdGhBZGp1c3RtZW50KTsgICAgIFxyXG4gIH0sXHJcbiAgcmVuZGVyTm9kZUNvbHVtbjogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoJyNyZWRpcHMtZHJhZycpLmh0bWwoJzx0YWJsZSBpZD1cInRyZWVUYWJsZVwiPjwvdGFibGU+Jyk7XHJcbiAgICBzcHJlYWRTaGVldC50cmVlKCkuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkgXHJcbiAgICB7IFxyXG4gICAgICAgJCgnI3RyZWVUYWJsZScpLmFwcGVuZChzcHJlYWRTaGVldFZpZXcubm9kZVJvd01hcmt1cChjaGlsZCkpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcjcmVkaXBzLWRyYWcnKS5jc3MoJ2JvdHRvbScsIHNjcm9sbEJhcldpZHRoICsgJ3B4Jyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2hvcnRlbiB0aGUgaGVpZ2h0IG9mIHRoZSB0cmVlIHNlY3Rpb24gYnkgdGhlIHdpZHRoIG9mIHRoZSBzY3JvbGwgYmFyXHJcbiAgXHRyZWRpcHMuaW5pdCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaW5pdGlhbGl6ZSB0cmVlIGRyYWcvZHJvcCBsaWJyYXJ5ICAgIFxyXG4gIH0sXHJcbiAgZHJhZ0hhbmRsZTogJzxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyBwdWxsLXJpZ2h0XCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLW1vdmVcIj48L2k+PC9kaXY+JyxcclxuICBjb3B5QnV0dG9uOiBmdW5jdGlvbihub2RlSUQpIHsgcmV0dXJuICc8YSBocmVmPVwiI1wiICBjbGFzcz1cInB1bGwtcmlnaHQgYnRuIGJ0bi1pbmZvIGJ0bi14cyBjb3B5LWJ1dHRvblwiIG9uY2xpY2s9XCJzcHJlYWRTaGVldC5jb3B5Tm9kZSgnICsgbm9kZUlEICsgJylcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1c1wiPjwvaT48L2E+JyB9LFxyXG4gIGRlbGV0ZUJ1dHRvbjogZnVuY3Rpb24obm9kZUlEKSB7IHJldHVybiAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cInB1bGwtcmlnaHQgYnRuIGJ0bi1kYW5nZXIgYnRuLXhzIGRlbGV0ZS1idXR0b25cIiBvbmNsaWNrPVwic3ByZWFkU2hlZXQuZGVsZXRlTm9kZSgnICsgbm9kZUlEICsgJylcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlXCI+PC9pPjwvYT4nIH0sXHJcbiAgZXhwYW5kSWNvbjogZnVuY3Rpb24obm9kZUlELCBkZXB0aEFkanVzdG1lbnQsIGljb25NYXJrdXApIFxyXG4gIHsgXHJcbiAgICByZXR1cm4gJzxhIGhyZWY9XCIjXCIgaWQ9XCJpY29uJyArIG5vZGVJRCArICdcIiBjbGFzcz1cImJ0biBidG4teHNcIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OicgKyBkZXB0aEFkanVzdG1lbnQgKyAncHhcIiAnXHJcbiAgICAgICAgICsgJ29uY2xpY2s9XCJzcHJlYWRTaGVldC50b2dnbGVOb2RlKCcgKyBub2RlSUQgKyAnKVwiPicgKyBpY29uTWFya3VwICsgJzwvYT4nOyBcclxuICB9LFxyXG4gIG5vZGVJbnB1dDogZnVuY3Rpb24obm9kZSwgd2lkdGgpXHJcbiAgeyBcclxuICAgIHJldHVybiAnPGlucHV0IGlkPVwibm9kZUlucHV0JyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJub2RlVGV4dElucHV0XCIgc3R5bGU9XCJ3aWR0aDonICsgd2lkdGggKyAncHhcIiB0eXBlPVwidGV4dFwiICdcclxuICAgICAgICAgKyAndmFsdWU9XCInICsgbm9kZS5uYW1lICsgJ1wiIG9uaW5wdXQ9XCJzcHJlYWRTaGVldFZpZXcudXBkYXRlTm9kZU5hbWUoJyArIG5vZGUuaWQgKyAnKVwiLz4nOyBcclxuICB9LFxyXG4gIGV4cGFuZE5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIGNoaWxkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCBkZXNjZW5kYW50IG5vZGUgcm93cyB0byB0aGUgRE9NXHJcbiAgICBmb3IodmFyIGkgPSBub2RlLmNoaWxkcmVuLmxlbmd0aC0xOyBpID49IDA7IGktLSkgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyIHRvIHByZXNlcnZlIHRoZSBub2RlIG9yZGVyaW5nXHJcbiAgICB7XHJcbiAgICAgIGNoaWxkID0gbm9kZS5jaGlsZHJlbltpXTtcclxuICAgICAgJChzcHJlYWRTaGVldFZpZXcuZGF0YVJvd3NNYXJrdXAoY2hpbGQpKS5pbnNlcnRBZnRlcigkKCcjZGF0YXJvd2lkJyArIG5vZGUuaWQpKTtcclxuICAgICAgJChzcHJlYWRTaGVldFZpZXcubm9kZVJvd01hcmt1cChjaGlsZCkpLmluc2VydEFmdGVyKCQoJyNyb3dpZCcgKyBub2RlLmlkKSk7XHJcbiAgICB9ICAgICBcclxuXHJcbiAgICBzcHJlYWRTaGVldFZpZXcuZW5hYmxlRHJhZ2dpbmcobm9kZSk7ICAgICBcclxuICB9LFxyXG4gIHJlZHJhd05vZGVDb250ZW50OiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgICQoJyNpY29uJyArIG5vZGUuaWQpLnJlbW92ZSgpO1xyXG4gICAgJCgnI25vZGVJbnB1dCcgKyBub2RlLmlkKS5yZW1vdmUoKTtcclxuICAgICQoJyNub2RlQ29udGVudCcgKyBub2RlLmlkKS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3Lm5vZGVDb250ZW50KG5vZGUpKTsgICAgIFxyXG4gIH0sXHJcbiAgYWRkRmllbGQ6IGZ1bmN0aW9uKGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICAkKCcjZmllbGRIZWFkZXJSb3cnKS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmZpZWxkSGVhZGVyKGZpZWxkTmFtZSkpO1xyXG4gICAgJCgnI2ZpZWxkTWVudUJ1dHRvbicgKyBmaWVsZE5hbWUpLmNsaWNrKGZ1bmN0aW9uKGUpIHsgc3ByZWFkU2hlZXRWaWV3LnNob3dGaWVsZE1lbnUoZSwgZmllbGROYW1lKTsgfSk7XHJcbiAgICAkKCcuZGF0YVJvdycpLmVhY2goZnVuY3Rpb24oaSwgaXRlbSkgeyBzcHJlYWRTaGVldFZpZXcucmVuZGVyRGF0YUNlbGwoaXRlbSwgZmllbGROYW1lLCBwYXJzZUludChpdGVtLmlkLnJlcGxhY2UoJ2RhdGFyb3dpZCcsICcnKSksICcnKTsgfSk7ICAgICAgICBcclxuICB9LFxyXG4gIHVwZGF0ZU5vZGVOYW1lOiBmdW5jdGlvbihub2RlSUQpXHJcbiAge1xyXG4gICAgdmFyIHZhbHVlID0gJCgnI25vZGVJbnB1dCcgKyBub2RlSUQpLnZhbCgpO1xyXG4gICAgc3ByZWFkU2hlZXQudXBkYXRlTm9kZU5hbWUobm9kZUlELCB2YWx1ZSk7XHJcbiAgICAkKCcjbm9kZUlucHV0JyArIG5vZGVJRCkuYXR0cigndmFsdWUnLCB2YWx1ZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvL3VwZGF0ZSB0aGUgaW5wdXQgdmFsdWUgaW4gdGhlIERPTSwgc28gdGhhdCB3aGVuIHdlIGRyYWcvbW92ZSB0aGUgcm93LCB0aGUgdmFsdWUgaXMgY29ycmVjdCAgICBcclxuICB9LFxyXG4gIHJlbW92ZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgJCgnI3Jvd2lkJyArIG5vZGUuaWQpLnJlbW92ZSgpO1xyXG4gICAgJCgnI2RhdGFyb3dpZCcgKyBub2RlLmlkKS5yZW1vdmUoKTsgICAgIFxyXG4gIH0sXHJcbiAgaW5zZXJ0Tm9kZUJlZm9yZTogZnVuY3Rpb24obm9kZSwgaW5zZXJ0QmVmb3JlTm9kZSlcclxuICB7XHJcbiAgICAkKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKG5vZGUpKS5pbnNlcnRCZWZvcmUoJCgnI3Jvd2lkJyArIGluc2VydEJlZm9yZU5vZGUuaWQpKTsgICAgICAvL2luc2VydCB0aGUgbmV3IHJvd3MgYmVmb3JlIHRoZSBzb3VyY2Ugcm93XHJcbiAgICAkKHNwcmVhZFNoZWV0Vmlldy5kYXRhUm93c01hcmt1cChub2RlKSkuaW5zZXJ0QmVmb3JlKCQoJyNkYXRhcm93aWQnICsgaW5zZXJ0QmVmb3JlTm9kZS5pZCkpOyAvL2luc2VydCB0aGUgbmV3IHJvd3MgYmVmb3JlIHRoZSBzb3VyY2Ugcm93XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuZW5hYmxlRHJhZ2dpbmcobm9kZSk7ICAgIFxyXG4gIH0sXHJcbiAgaW5zZXJ0Tm9kZUFmdGVyOiBmdW5jdGlvbihub2RlLCBpbnNlcnRBZnRlck5vZGUpXHJcbiAge1xyXG4gICAgJChzcHJlYWRTaGVldFZpZXcubm9kZVJvd01hcmt1cChub2RlKSkuaW5zZXJ0QWZ0ZXIoJCgnI3Jvd2lkJyArIGluc2VydEFmdGVyTm9kZS5pZCkpOyAgICAgIC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgICQoc3ByZWFkU2hlZXRWaWV3LmRhdGFSb3dzTWFya3VwKG5vZGUpKS5pbnNlcnRBZnRlcigkKCcjZGF0YXJvd2lkJyArIGluc2VydEFmdGVyTm9kZS5pZCkpOyAvL2luc2VydCB0aGUgbmV3IHJvd3MgYmVmb3JlIHRoZSBzb3VyY2Ugcm93XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuZW5hYmxlRHJhZ2dpbmcobm9kZSk7ICAgIFxyXG4gIH0sXHJcbiAgZW5hYmxlRHJhZ2dpbmc6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgUkVESVBTLmRyYWcuZW5hYmxlRGl2cygnaW5pdCcsICQoJyNyb3dpZCcgKyBub2RlLmlkKS5maW5kKCdkaXYnKSk7ICAgICAgIFxyXG4gIH0sXHJcbiAgZ2V0RmllbGRWYWx1ZTogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQpXHJcbiAge1xyXG4gICAgcmV0dXJuICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS52YWwoKTtcclxuICB9LFxyXG4gIHVwZGF0ZUZpZWxkVmFsdWU6IGZ1bmN0aW9uKGZpZWxkTmFtZSwgbm9kZUlELCB2YWx1ZSlcclxuICB7XHJcbiAgICAkKCcjJyArIGZpZWxkTmFtZSArIG5vZGVJRCkudmFsKHZhbHVlKTtcclxuICB9XHJcbn07IiwidmFyIE1JTl9OT0RFX1NJWkUgPSA1O1xyXG52YXIgTUFYX05PREVfU0laRSA9IDEwMDtcclxuXHJcbnZhciBWRVJUSUNBTF9WSUVXID0gMDtcclxudmFyIEhPUklaT05UQUxfVklFVyA9IDE7XHJcblxyXG4vL1RPRE86IHJlZmFjdG9yLCByZW1vdmUgcmVmZXJlbmNlcyB0byBwcm9qZWN0IGFuZCBwdXQgdGhlbSBpbiB0aGUgdHJlZSBjb250cm9sbGVyIGZpbGVcclxudmFyIHRyZWVWaWV3ID0gXHJcbntcclxuICBkZXN0cm95OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI3RyZWVWaWV3JykucmVtb3ZlKCk7XHJcbiAgfSxcclxuICByZWZyZXNoOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgdHJlZVZpZXcudXBkYXRlKHRyZWVWaWV3LnJvb3QpO1xyXG4gIH0sXHJcbiAgcm90YXRlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgaWYodHJlZVZpZXcuZGlyZWN0aW9uID09PSBIT1JJWk9OVEFMX1ZJRVcpXHJcbiAgICB7XHJcbiAgICAgIHRyZWVWaWV3LmRpcmVjdGlvbiA9IFZFUlRJQ0FMX1ZJRVc7XHJcbiAgICAgIHRyZWVWaWV3Lmhvcml6b250YWxfc3BhY2luZyA9IDEwMDtcclxuICAgICAgdHJlZVZpZXcudmVydGljYWxfc3BhY2luZyA9IDYwO1xyXG4gICAgICB0cmVlVmlldy5kaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpLnByb2plY3Rpb24oZnVuY3Rpb24oZCkgeyByZXR1cm4gW2QueCwgZC55XTsgfSk7ICAvLyBkZWZpbmUgYSBkMyBkaWFnb25hbCBwcm9qZWN0aW9uIGZvciB1c2UgYnkgdGhlIG5vZGUgcGF0aHMgbGF0ZXIgb24uXHJcbiAgICAgIFxyXG4gICAgICB0cmVlVmlldy5yb290LnkwID0gdHJlZVZpZXcudmlld2VySGVpZ2h0IC8gMjtcclxuICAgICAgdHJlZVZpZXcucm9vdC54MCA9IDA7ICAgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHRyZWVWaWV3LmRpcmVjdGlvbiA9IEhPUklaT05UQUxfVklFVztcclxuICAgICAgdHJlZVZpZXcuaG9yaXpvbnRhbF9zcGFjaW5nID0gMTUwO1xyXG4gICAgICB0cmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nID0gMjU7XHJcbiAgICAgIHRyZWVWaWV3LmRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKCkucHJvamVjdGlvbihmdW5jdGlvbihkKSB7IHJldHVybiBbZC55LCBkLnhdOyB9KTsgIC8vIGRlZmluZSBhIGQzIGRpYWdvbmFsIHByb2plY3Rpb24gZm9yIHVzZSBieSB0aGUgbm9kZSBwYXRocyBsYXRlciBvbi5cclxuICAgICAgXHJcbiAgICAgIHRyZWVWaWV3LnJvb3QueDAgPSB0cmVlVmlldy52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgICB0cmVlVmlldy5yb290LnkwID0gMDsgICAgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRyZWVWaWV3LnVwZGF0ZSh0cmVlVmlldy5yb290KTtcclxuICB9LFxyXG4gIGluaXQ6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB0cmVlVmlldy5kaXJlY3Rpb24gPSBIT1JJWk9OVEFMX1ZJRVc7XHJcbiAgICB0cmVlVmlldy5zZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgdHJlZVZpZXcuZHJhZ2dpbmdOb2RlID0gbnVsbDtcclxuICAgIHRyZWVWaWV3LmR1cmF0aW9uID0gNzUwO1xyXG4gICAgdHJlZVZpZXcuaG9yaXpvbnRhbF9zcGFjaW5nID0gMTUwO1xyXG4gICAgdHJlZVZpZXcudmVydGljYWxfc3BhY2luZyA9IDI1OyAgICBcclxuICAgIFxyXG4gICAgdHJlZVZpZXcubWF4TGFiZWxMZW5ndGggPSAwO1xyXG4gICAgXHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIGZ1bmN0aW9uKGQpXHJcbiAgICB7XHJcbiAgICAgIHRyZWVWaWV3Lm1heExhYmVsTGVuZ3RoID0gTWF0aC5tYXgoZC5uYW1lLmxlbmd0aCwgdHJlZVZpZXcubWF4TGFiZWxMZW5ndGgpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRyZWVWaWV3LnZpZXdlcldpZHRoID0gJCgnI3RyZWUtY29udGFpbmVyJykud2lkdGgoKTtcclxuICAgIHRyZWVWaWV3LnZpZXdlckhlaWdodCA9ICQoJyN0cmVlLWNvbnRhaW5lcicpLmhlaWdodCgpO1xyXG4gICAgXHJcbiAgICB0cmVlVmlldy50cmVlID0gZDMubGF5b3V0LnRyZWUoKS5zaXplKFt0cmVlVmlldy52aWV3ZXJIZWlnaHQsIHRyZWVWaWV3LnZpZXdlcldpZHRoXSk7XHJcbiAgICB0cmVlVmlldy5yb290ID0gcHJvamVjdC50cmVlO1xyXG4gICAgXHJcbiAgICB0cmVlVmlldy5kcmFnU3RhcnRlZCA9IG51bGw7XHJcbiAgICB0cmVlVmlldy5kaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpLnByb2plY3Rpb24oZnVuY3Rpb24oZCkgeyByZXR1cm4gW2QueSwgZC54XTsgfSk7ICAvLyBkZWZpbmUgYSBkMyBkaWFnb25hbCBwcm9qZWN0aW9uIGZvciB1c2UgYnkgdGhlIG5vZGUgcGF0aHMgbGF0ZXIgb24uICAgICAgICAgICAgICAgIFxyXG4gIH0sICBcclxuICByZW5kZXI6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB0cmVlVmlldy5kZXN0cm95KCk7XHJcbiAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwidHJlZVZpZXdcIj48ZGl2IGlkPVwidHJlZVZpZXdPcHRpb25zXCI+PGRpdiBpZD1cImV4cGFuZGVyQ29udGFpbmVyXCI+PC9kaXY+PC9kaXY+PGRpdiBpZD1cInRyZWUtY29udGFpbmVyXCI+PC9kaXY+PC9kaXY+Jyk7XHJcbiBcclxuICAgIGV4cGFuZGVyU2VsZWN0b3IuaW5pdChwcm9qZWN0LnRyZWUubWF4RGVwdGgpO1xyXG4gICAgJCgnI3RyZWVWaWV3T3B0aW9ucycpLmFwcGVuZCgnPGEgaHJlZj1cIiNcIiBpZD1cInRyZWVWaWV3Um90YXRlQnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgcHVsbC1yaWdodFwiPlJvdGF0ZSBWaWV3PC9hPicpO1xyXG4gICAgJCgnI3RyZWVWaWV3Um90YXRlQnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7IHRyZWVWaWV3LnJvdGF0ZSgpOyB9KTsgIFxyXG4gXHJcbiAgICB0cmVlVmlldy5pbml0KCk7XHJcblxyXG4gICAgZnVuY3Rpb24gem9vbSgpIHsgdHJlZVZpZXcuc3ZnR3JvdXAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQzLmV2ZW50LnRyYW5zbGF0ZSArIFwiKXNjYWxlKFwiICsgZDMuZXZlbnQuc2NhbGUgKyBcIilcIik7IH0gICAvLyBEZWZpbmUgdGhlIHpvb20gZnVuY3Rpb24gZm9yIHRoZSB6b29tYWJsZSB0cmVlXHJcbiAgXHJcbiAgICB0cmVlVmlldy56b29tTGlzdGVuZXIgPSBkMy5iZWhhdmlvci56b29tKCkuc2NhbGVFeHRlbnQoWzAuMSwgM10pLm9uKFwiem9vbVwiLCB6b29tKTsgICAgIC8vIGRlZmluZSB0aGUgdHJlZVZpZXcuem9vbUxpc3RlbmVyIHdoaWNoIGNhbGxzIHRoZSB6b29tIGZ1bmN0aW9uIG9uIHRoZSBcInpvb21cIiBldmVudCBjb25zdHJhaW5lZCB3aXRoaW4gdGhlIHNjYWxlRXh0ZW50c1xyXG4gIFxyXG4gICAgZnVuY3Rpb24gaW5pdGlhdGVEcmFnKGQsIGRvbU5vZGUpIFxyXG4gICAge1xyXG4gICAgICB0cmVlVmlldy5kcmFnZ2luZ05vZGUgPSBkO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcbiAgICAgIGQzLnNlbGVjdEFsbCgnLmdob3N0Q2lyY2xlJykuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUgc2hvdycpO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuYXR0cignY2xhc3MnLCAnbm9kZSBhY3RpdmVEcmFnJyk7XHJcblxyXG4gICAgICB0cmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoXCJnLm5vZGVcIikuc29ydChmdW5jdGlvbihhLCBiKSAgICAvLyBzZWxlY3QgdGhlIHBhcmVudCBhbmQgc29ydCB0aGUgcGF0aCdzXHJcbiAgICAgIHsgXHJcbiAgICAgICAgaWYgKGEuaWQgIT0gdHJlZVZpZXcuZHJhZ2dpbmdOb2RlLmlkKSByZXR1cm4gMTsgICAgICAgICAgLy8gYSBpcyBub3QgdGhlIGhvdmVyZWQgZWxlbWVudCwgc2VuZCBcImFcIiB0byB0aGUgYmFja1xyXG4gICAgICAgIGVsc2UgcmV0dXJuIC0xOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgaXMgdGhlIGhvdmVyZWQgZWxlbWVudCwgYnJpbmcgXCJhXCIgdG8gdGhlIGZyb250XHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyBpZiBub2RlcyBoYXMgY2hpbGRyZW4sIHJlbW92ZSB0aGUgbGlua3MgYW5kIG5vZGVzXHJcbiAgICAgIGlmIChub2Rlcy5sZW5ndGggPiAxKSBcclxuICAgICAge1xyXG4gICAgICAgIC8vIHJlbW92ZSBsaW5rIHBhdGhzXHJcbiAgICAgICAgbGlua3MgPSB0cmVlVmlldy50cmVlLmxpbmtzKG5vZGVzKTtcclxuICAgICAgICBub2RlUGF0aHMgPSB0cmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIikuZGF0YShsaW5rcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50YXJnZXQuaWQ7IH0pLnJlbW92ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHJlbW92ZSBjaGlsZCBub2Rlc1xyXG4gICAgICAgIG5vZGVzRXhpdCA9IHRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKS5kYXRhKG5vZGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkOyB9KS5maWx0ZXIoZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gZC5pZCAhPSB0cmVlVmlldy5kcmFnZ2luZ05vZGUuaWQ7IH0pLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vIHJlbW92ZSBwYXJlbnQgbGlua1xyXG4gICAgICBwYXJlbnRMaW5rID0gdHJlZVZpZXcudHJlZS5saW5rcyh0cmVlVmlldy50cmVlLm5vZGVzKHRyZWVWaWV3LmRyYWdnaW5nTm9kZS5wYXJlbnQpKTtcclxuICAgICAgdHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKCdwYXRoLmxpbmsnKS5maWx0ZXIoZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gZC50YXJnZXQuaWQgPT0gdHJlZVZpZXcuZHJhZ2dpbmdOb2RlLmlkOyB9KS5yZW1vdmUoKTtcclxuXHJcbiAgICAgIHRyZWVWaWV3LmRyYWdTdGFydGVkID0gbnVsbDtcclxuICAgIH1cclxuICBcclxuICAgIC8vIGRlZmluZSB0aGUgYmFzZVN2ZywgYXR0YWNoaW5nIGEgY2xhc3MgZm9yIHN0eWxpbmcgYW5kIHRoZSB0cmVlVmlldy56b29tTGlzdGVuZXJcclxuICAgIHZhciBiYXNlU3ZnID0gZDMuc2VsZWN0KFwiI3RyZWUtY29udGFpbmVyXCIpLmFwcGVuZChcInN2Z1wiKVxyXG4gICAgICAuYXR0cihcIndpZHRoXCIsIHRyZWVWaWV3LnZpZXdlcldpZHRoKVxyXG4gICAgICAuYXR0cihcImhlaWdodFwiLCB0cmVlVmlldy52aWV3ZXJIZWlnaHQpXHJcbiAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJvdmVybGF5XCIpXHJcbiAgICAgIC5jYWxsKHRyZWVWaWV3Lnpvb21MaXN0ZW5lcik7XHJcbiAgXHJcbiAgICBkcmFnTGlzdGVuZXIgPSBkMy5iZWhhdmlvci5kcmFnKCkub24oXCJkcmFnc3RhcnRcIiwgdHJlZVZpZXcuZHJhZ3N0YXJ0KS5vbihcImRyYWdcIiwgZHJhZykub24oXCJkcmFnZW5kXCIsIHRyZWVWaWV3LmRyYWdlbmQpOyAgLy8gRGVmaW5lIHRoZSBkcmFnIGxpc3RlbmVycyBmb3IgZHJhZy9kcm9wIGJlaGF2aW91ciBvZiBub2Rlcy5cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gZHJhZyhkKVxyXG4gICAge1xyXG4gICAgICBpZiAoZCA9PSB0cmVlVmlldy5yb290KSB7IHJldHVybjsgfVxyXG4gICAgICBcclxuICAgICAgaWYgKHRyZWVWaWV3LmRyYWdTdGFydGVkKSBcclxuICAgICAge1xyXG4gICAgICAgIGRvbU5vZGUgPSB0aGlzO1xyXG4gICAgICAgIGluaXRpYXRlRHJhZyhkLCBkb21Ob2RlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZC54MCArPSBkMy5ldmVudC5keTtcclxuICAgICAgZC55MCArPSBkMy5ldmVudC5keDtcclxuICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkLnkwICsgXCIsXCIgKyBkLngwICsgXCIpXCIpO1xyXG4gICAgICB0cmVlVmlldy51cGRhdGVUZW1wQ29ubmVjdG9yKCk7ICAgICAgXHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBBcHBlbmQgYSBncm91cCB3aGljaCBob2xkcyBhbGwgbm9kZXMgYW5kIHdoaWNoIHRoZSB6b29tIExpc3RlbmVyIGNhbiBhY3QgdXBvbi5cclxuICAgIHRyZWVWaWV3LnN2Z0dyb3VwID0gYmFzZVN2Zy5hcHBlbmQoXCJnXCIpO1xyXG4gIFxyXG4gICAgLy8gRGVmaW5lIHRoZSByb290XHJcbiAgICB0cmVlVmlldy5yb290LngwID0gdHJlZVZpZXcudmlld2VySGVpZ2h0IC8gMjtcclxuICAgIHRyZWVWaWV3LnJvb3QueTAgPSAwO1xyXG4gICAgXHJcbiAgICAvLyBMYXlvdXQgdGhlIHRyZWUgaW5pdGlhbGx5IGFuZCBjZW50ZXIgb24gdGhlIHJvb3Qgbm9kZS5cclxuICAgIHRyZWVWaWV3LnVwZGF0ZSh0cmVlVmlldy5yb290KTtcclxuICAgIHRyZWVWaWV3LmNlbnRlck5vZGUodHJlZVZpZXcucm9vdCk7ICAgIFxyXG4gIH0sXHJcbiAgY2xpY2s6IGZ1bmN0aW9uKGQpICAgLy8gVG9nZ2xlIGNoaWxkcmVuIG9uIGNsaWNrLlxyXG4gIHtcclxuICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSB7IHJldHVybjsgfSAvLyBjbGljayBzdXBwcmVzc2VkXHJcbiAgICBwcm9qZWN0LnRvZ2dsZUV4cGFuc2lvbihkKTtcclxuICAgIHRyZWVWaWV3LnVwZGF0ZShkKTtcclxuICB9LCAgXHJcbiAgdXBkYXRlOiBmdW5jdGlvbihzb3VyY2UpIFxyXG4gIHsgXHJcbiAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAvLyBDb21wdXRlIHRoZSBuZXcgaGVpZ2h0LCBmdW5jdGlvbiBjb3VudHMgdG90YWwgY2hpbGRyZW4gb2Ygcm9vdCBub2RlIGFuZCBzZXRzIHRyZWUgaGVpZ2h0IGFjY29yZGluZ2x5LlxyXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgbGF5b3V0IGxvb2tpbmcgc3F1YXNoZWQgd2hlbiBuZXcgbm9kZXMgYXJlIG1hZGUgdmlzaWJsZSBvciBsb29raW5nIHNwYXJzZSB3aGVuIG5vZGVzIGFyZSByZW1vdmVkXHJcbiAgICAvLyBUaGlzIG1ha2VzIHRoZSBsYXlvdXQgbW9yZSBjb25zaXN0ZW50LlxyXG4gICAgdmFyIGxldmVsV2lkdGggPSBbMV07XHJcbiAgICB2YXIgY2hpbGRDb3VudCA9IGZ1bmN0aW9uKGxldmVsLCBuKSBcclxuICAgIHtcclxuICAgICAgaWYgKG4uY2hpbGRyZW4gJiYgbi5jaGlsZHJlbi5sZW5ndGggPiAwKSBcclxuICAgICAge1xyXG4gICAgICAgIGlmIChsZXZlbFdpZHRoLmxlbmd0aCA8PSBsZXZlbCArIDEpIHsgbGV2ZWxXaWR0aC5wdXNoKDApOyB9XHJcblxyXG4gICAgICAgIGxldmVsV2lkdGhbbGV2ZWwgKyAxXSArPSBuLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICBuLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oZCkgeyBjaGlsZENvdW50KGxldmVsICsgMSwgZCk7IH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjaGlsZENvdW50KDAsIHRyZWVWaWV3LnJvb3QpO1xyXG4gICAgdmFyIG5ld0hlaWdodCA9IGQzLm1heChsZXZlbFdpZHRoKSAqIHRyZWVWaWV3LnZlcnRpY2FsX3NwYWNpbmc7IC8vIDI1IHBpeGVscyBwZXIgbGluZVxyXG4gICAgdHJlZVZpZXcudHJlZSA9IHRyZWVWaWV3LnRyZWUuc2l6ZShbbmV3SGVpZ2h0LCB0cmVlVmlldy52aWV3ZXJXaWR0aF0pO1xyXG5cclxuICAgIC8vIENvbXB1dGUgdGhlIG5ldyB0cmVlIGxheW91dC5cclxuICAgIHZhciBub2RlcyA9IHRyZWVWaWV3LnRyZWUubm9kZXModHJlZVZpZXcucm9vdCkucmV2ZXJzZSgpO1xyXG4gICAgdmFyIGxpbmtzID0gdHJlZVZpZXcudHJlZS5saW5rcyhub2Rlcyk7XHJcblxyXG4gICAgLy8gU2V0IHdpZHRocyBiZXR3ZWVuIGxldmVscyBiYXNlZCBvbiBtYXhMYWJlbExlbmd0aC5cclxuICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgIC8vZC55ID0gKGQuZGVwdGggKiAodHJlZVZpZXcubWF4TGFiZWxMZW5ndGggKiAxMCkpOyAvL21heExhYmVsTGVuZ3RoICogMTBweFxyXG4gICAgICAgIC8vIGFsdGVybmF0aXZlbHkgdG8ga2VlcCBhIGZpeGVkIHNjYWxlIG9uZSBjYW4gc2V0IGEgZml4ZWQgZGVwdGggcGVyIGxldmVsXHJcbiAgICAgICAgLy8gTm9ybWFsaXplIGZvciBmaXhlZC1kZXB0aCBieSBjb21tZW50aW5nIG91dCBiZWxvdyBsaW5lXHJcbiAgICAgICAgZC55ID0gKGQuZGVwdGggKiB0cmVlVmlldy5ob3Jpem9udGFsX3NwYWNpbmcpOyAvLzIwMHB4IHBlciBsZXZlbC5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgbm9kZXPigKZcclxuICAgIG5vZGUgPSB0cmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoXCJnLm5vZGVcIikuZGF0YShub2RlcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5pZCB8fCAoZC5pZCA9ICsraSk7IH0pO1xyXG5cclxuICAgIC8vIEVudGVyIGFueSBuZXcgbm9kZXMgYXQgdGhlIHBhcmVudCdzIHByZXZpb3VzIHBvc2l0aW9uLlxyXG4gICAgdmFyIG5vZGVFbnRlciA9IG5vZGUuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXHJcbiAgICAgIC5jYWxsKGRyYWdMaXN0ZW5lcilcclxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGVcIilcclxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueTAgKyBcIixcIiArIHNvdXJjZS54MCArIFwiKVwiOyB9KVxyXG4gICAgICAub24oJ2NsaWNrJywgdHJlZVZpZXcuY2xpY2spO1xyXG5cclxuICAgIG5vZGVFbnRlci5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ25vZGVDaXJjbGUnKVxyXG4gICAgICAuYXR0cihcInJcIiwgMClcclxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChkKSA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiOyB9KTtcclxuXHJcbiAgICBub2RlRW50ZXIuYXBwZW5kKFwidGV4dFwiKVxyXG4gICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5oYXNDaGlsZHJlbihkKSA/IC0xMCA6IDEwOyB9KVxyXG4gICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcclxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ25vZGVUZXh0JylcclxuICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0Lmhhc0NoaWxkcmVuKGQpID8gXCJlbmRcIiA6IFwic3RhcnRcIjsgfSlcclxuICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5uYW1lOyB9KVxyXG4gICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMCk7XHJcblxyXG4gICAgLy8gcGhhbnRvbSBub2RlIHRvIGdpdmUgdXMgbW91c2VvdmVyIGluIGEgcmFkaXVzIGFyb3VuZCBpdFxyXG4gICAgbm9kZUVudGVyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUnKVxyXG4gICAgICAuYXR0cihcInJcIiwgMzApXHJcbiAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCAwLjIpIC8vIGNoYW5nZSB0aGlzIHRvIHplcm8gdG8gaGlkZSB0aGUgdGFyZ2V0IGFyZWFcclxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcInJlZFwiKVxyXG4gICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbW91c2VvdmVyJylcclxuICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uKG5vZGUpIHsgdHJlZVZpZXcub3ZlckNpcmNsZShub2RlKTsgfSlcclxuICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24obm9kZSkgeyB0cmVlVmlldy5vdXRDaXJjbGUobm9kZSk7IH0pO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgdGV4dCB0byByZWZsZWN0IHdoZXRoZXIgbm9kZSBoYXMgY2hpbGRyZW4gb3Igbm90LlxyXG4gICAgbm9kZS5zZWxlY3QoJ3RleHQnKVxyXG4gICAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0Lmhhc0NoaWxkcmVuKGQpID8gLTEwIDogMTA7IH0pXHJcbiAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0Lmhhc0NoaWxkcmVuKGQpID8gXCJlbmRcIiA6IFwic3RhcnRcIjsgfSlcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLm5hbWU7IH0pO1xyXG5cclxuICAgIC8vIENoYW5nZSB0aGUgY2lyY2xlIGZpbGwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgaXQgaGFzIGNoaWxkcmVuIGFuZCBpcyBjb2xsYXBzZWRcclxuICAgIG5vZGUuc2VsZWN0KFwiY2lyY2xlLm5vZGVDaXJjbGVcIilcclxuICAgICAgLmF0dHIoXCJyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHRyZWVWaWV3LmNvbXB1dGVOb2RlU2l6ZShkKTsgfSlcclxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChkKSA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiOyB9KTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIG5vZGVzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cclxuICAgIHZhciBub2RlVXBkYXRlO1xyXG4gICAgaWYodHJlZVZpZXcuZGlyZWN0aW9uID09PSBWRVJUSUNBTF9WSUVXKVxyXG4gICAge1xyXG4gICAgICBub2RlVXBkYXRlID0gbm9kZS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjsgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIG5vZGVVcGRhdGUgPSBub2RlLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnkgKyBcIixcIiArIGQueCArIFwiKVwiOyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGYWRlIHRoZSB0ZXh0IGluXHJcbiAgICBub2RlVXBkYXRlLnNlbGVjdChcInRleHRcIikuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMSk7XHJcblxyXG4gICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5vZGVzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXHJcbiAgICB2YXIgbm9kZUV4aXQgPSBub2RlLmV4aXQoKVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgc291cmNlLnkgKyBcIixcIiArIHNvdXJjZS54ICsgXCIpXCI7IH0pXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgIG5vZGVFeGl0LnNlbGVjdChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCAwKTtcclxuICAgIG5vZGVFeGl0LnNlbGVjdChcInRleHRcIikuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMCk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBsaW5rc+KAplxyXG4gICAgdmFyIGxpbmsgPSB0cmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIikuZGF0YShsaW5rcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50YXJnZXQuaWQ7IH0pO1xyXG5cclxuICAgIC8vIEVudGVyIGFueSBuZXcgbGlua3MgYXQgdGhlIHBhcmVudCdzIHByZXZpb3VzIHBvc2l0aW9uLlxyXG4gICAgbGluay5lbnRlcigpLmluc2VydChcInBhdGhcIiwgXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtcIilcclxuICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB2YXIgbyA9IHsgeDogc291cmNlLngwLCB5OiBzb3VyY2UueTAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHRyZWVWaWV3LmRpYWdvbmFsKHsgc291cmNlOiBvLCB0YXJnZXQ6IG8gfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gVHJhbnNpdGlvbiBsaW5rcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICBsaW5rLmF0dHIoXCJkXCIsIHRyZWVWaWV3LmRpYWdvbmFsKTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgIGxpbmsuZXhpdCgpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgdmFyIG8gPSB7IHg6IHNvdXJjZS54LCB5OiBzb3VyY2UueSB9O1xyXG4gICAgICAgICAgICByZXR1cm4gdHJlZVZpZXcuZGlhZ29uYWwoeyBzb3VyY2U6IG8sIHRhcmdldDogbyB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAvLyBTdGFzaCB0aGUgb2xkIHBvc2l0aW9ucyBmb3IgdHJhbnNpdGlvbi5cclxuICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24oZCkgeyBkLngwID0gZC54OyBkLnkwID0gZC55OyB9KTtcclxuICB9LCAgXHJcbiAgZHJhZ3N0YXJ0OiBmdW5jdGlvbihkKVxyXG4gIHtcclxuICAgIGlmIChkID09IHRyZWVWaWV3LnJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICB0cmVlVmlldy5kcmFnU3RhcnRlZCA9IHRydWU7XHJcbiAgICBub2RlcyA9IHRyZWVWaWV3LnRyZWUubm9kZXMoZCk7XHJcbiAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIC8vIGl0J3MgaW1wb3J0YW50IHRoYXQgd2Ugc3VwcHJlc3MgdGhlIG1vdXNlb3ZlciBldmVudCBvbiB0aGUgbm9kZSBiZWluZyBkcmFnZ2VkLiBPdGhlcndpc2UgaXQgd2lsbCBhYnNvcmIgdGhlIG1vdXNlb3ZlciBldmVudCBhbmQgdGhlIHVuZGVybHlpbmcgbm9kZSB3aWxsIG5vdCBkZXRlY3QgaXQgZDMuc2VsZWN0KHRoaXMpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTsgICAgICBcclxuICB9LFxyXG4gIGRyYWdlbmQ6IGZ1bmN0aW9uKGQpXHJcbiAge1xyXG4gICAgaWYgKGQgPT0gdHJlZVZpZXcucm9vdCkgeyByZXR1cm47IH1cclxuICAgIGRvbU5vZGUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICBpZiAodHJlZVZpZXcuc2VsZWN0ZWROb2RlKSBcclxuICAgIHtcclxuICAgICAgLy8gbm93IHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBwYXJlbnQsIGFuZCBpbnNlcnQgaXQgaW50byB0aGUgbmV3IGVsZW1lbnRzIGNoaWxkcmVuXHJcbiAgICAgIHByb2plY3QucmVtb3ZlTm9kZSh0cmVlVmlldy5kcmFnZ2luZ05vZGUpO1xyXG4gICAgICBcclxuICAgICAgaWYoIXRyZWVWaWV3LnNlbGVjdGVkTm9kZS5jaGlsZHJlbikgeyB0cmVlVmlldy5zZWxlY3RlZE5vZGUuY2hpbGRyZW4gPSBbXTsgfVxyXG4gICAgICB0cmVlVmlldy5zZWxlY3RlZE5vZGUuY2hpbGRyZW4ucHVzaCh0cmVlVmlldy5kcmFnZ2luZ05vZGUpO1xyXG4gICAgICBcclxuICAgICAgcHJvamVjdC5leHBhbmROb2RlKHRyZWVWaWV3LnNlbGVjdGVkTm9kZSk7ICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgbm9kZSBiZWluZyBhZGRlZCB0byBpcyBleHBhbmRlZCBzbyB1c2VyIGNhbiBzZWUgYWRkZWQgbm9kZSBpcyBjb3JyZWN0bHkgbW92ZWQgICAgXHJcbiAgICB9IFxyXG4gIFxyXG4gICAgdHJlZVZpZXcuc2VsZWN0ZWROb2RlID0gbnVsbDtcclxuICAgIGQzLnNlbGVjdEFsbCgnLmdob3N0Q2lyY2xlJykuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUnKTtcclxuICAgIGQzLnNlbGVjdChkb21Ob2RlKS5hdHRyKCdjbGFzcycsICdub2RlJyk7XHJcbiAgICBcclxuICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJy5naG9zdENpcmNsZScpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJycpOyAgIC8vIG5vdyByZXN0b3JlIHRoZSBtb3VzZW92ZXIgZXZlbnQgb3Igd2Ugd29uJ3QgYmUgYWJsZSB0byBkcmFnIGEgMm5kIHRpbWVcclxuICAgIHRyZWVWaWV3LnVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICAgIFxyXG4gICAgaWYgKHRyZWVWaWV3LmRyYWdnaW5nTm9kZSAhPT0gbnVsbCkgXHJcbiAgICB7XHJcbiAgICAgIHRyZWVWaWV3LnVwZGF0ZSh0cmVlVmlldy5yb290KTtcclxuICAgICAgLy90cmVlVmlldy5jZW50ZXJOb2RlKHRyZWVWaWV3LmRyYWdnaW5nTm9kZSk7XHJcbiAgICAgIHRyZWVWaWV3LmRyYWdnaW5nTm9kZSA9IG51bGw7XHJcbiAgICB9ICAgICAgXHJcbiAgfSxcclxuICAvLyBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIHRlbXBvcmFyeSBjb25uZWN0b3IgaW5kaWNhdGluZyBkcmFnZ2luZyBhZmZpbGlhdGlvblxyXG4gIHVwZGF0ZVRlbXBDb25uZWN0b3I6IGZ1bmN0aW9uKCkgXHJcbiAge1xyXG4gICAgdmFyIGRhdGEgPSBbXTtcclxuICAgIGlmICh0cmVlVmlldy5kcmFnZ2luZ05vZGUgIT09IG51bGwgJiYgdHJlZVZpZXcuc2VsZWN0ZWROb2RlICE9PSBudWxsKSAgIC8vIGhhdmUgdG8gZmxpcCB0aGUgc291cmNlIGNvb3JkaW5hdGVzIHNpbmNlIHdlIGRpZCB0aGlzIGZvciB0aGUgZXhpc3RpbmcgY29ubmVjdG9ycyBvbiB0aGUgb3JpZ2luYWwgdHJlZVxyXG4gICAge1xyXG4gICAgICBkYXRhID0gW3sgc291cmNlOiB7IHg6IHRyZWVWaWV3LnNlbGVjdGVkTm9kZS55MCwgeTogdHJlZVZpZXcuc2VsZWN0ZWROb2RlLngwIH0sIHRhcmdldDogeyB4OiB0cmVlVmlldy5kcmFnZ2luZ05vZGUueTAsIHk6IHRyZWVWaWV3LmRyYWdnaW5nTm9kZS54MCB9IH1dO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgbGluayA9IHRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcIi50ZW1wbGlua1wiKS5kYXRhKGRhdGEpO1xyXG4gICAgbGluay5lbnRlcigpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsIFwidGVtcGxpbmtcIikuYXR0cihcImRcIiwgZDMuc3ZnLmRpYWdvbmFsKCkpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuICAgIGxpbmsuYXR0cihcImRcIiwgZDMuc3ZnLmRpYWdvbmFsKCkpO1xyXG4gICAgbGluay5leGl0KCkucmVtb3ZlKCk7XHJcbiAgfSxcclxuICBvdmVyQ2lyY2xlOiBmdW5jdGlvbihkKSBcclxuICB7XHJcbiAgICB0cmVlVmlldy5zZWxlY3RlZE5vZGUgPSBkO1xyXG4gICAgdHJlZVZpZXcudXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gIH0sXHJcbiAgb3V0Q2lyY2xlOiBmdW5jdGlvbihkKSBcclxuICB7XHJcbiAgICB0cmVlVmlldy5zZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgdHJlZVZpZXcudXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gIH0sXHJcbiAgY2VudGVyTm9kZTogZnVuY3Rpb24oc291cmNlKSAgICAgLy8gRnVuY3Rpb24gdG8gY2VudGVyIG5vZGUgd2hlbiBjbGlja2VkL2Ryb3BwZWQgc28gbm9kZSBkb2Vzbid0IGdldCBsb3N0IHdoZW4gY29sbGFwc2luZy9tb3Zpbmcgd2l0aCBsYXJnZSBhbW91bnQgb2YgY2hpbGRyZW4uXHJcbiAge1xyXG4gICAgc2NhbGUgPSB0cmVlVmlldy56b29tTGlzdGVuZXIuc2NhbGUoKTtcclxuICAgIHggPSAtc291cmNlLnkwO1xyXG4gICAgeSA9IC1zb3VyY2UueDA7XHJcbiAgICB4ID0geCAqIHNjYWxlICsgdHJlZVZpZXcudmlld2VyV2lkdGggLyA0O1xyXG4gICAgeSA9IHkgKiBzY2FsZSArIHRyZWVWaWV3LnZpZXdlckhlaWdodCAvIDI7XHJcbiAgICBkMy5zZWxlY3QoJ2cnKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgeCArIFwiLFwiICsgeSArIFwiKXNjYWxlKFwiICsgc2NhbGUgKyBcIilcIik7XHJcbiAgICB0cmVlVmlldy56b29tTGlzdGVuZXIuc2NhbGUoc2NhbGUpO1xyXG4gICAgdHJlZVZpZXcuem9vbUxpc3RlbmVyLnRyYW5zbGF0ZShbeCwgeV0pO1xyXG4gIH0sICAgICAgICAgIFxyXG4gIGNvbXB1dGVOb2RlU2l6ZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICB2YXIgbm9kZVNpemUgPSBNSU5fTk9ERV9TSVpFO1xyXG4gICAgXHJcbiAgICAvKmlmKHRyZWUuZmllbGQpXHJcbiAgICB7XHJcbiAgICAgIGlmKG5vZGUudmFsdWVzICYmIG5vZGUudmFsdWVzW3RyZWUuZmllbGQubmFtZV0pXHJcbiAgICAgIHtcclxuICAgICAgICAvL25vZGVTaXplID0gMiAqIE1hdGguUEkgKiBNYXRoLnNxcnQoTUFYX05PREVfU0laRSAqIG5vZGUudmFsdWVzW3RyZWUuZmllbGQubmFtZV0gLyB0cmVlLm1heEZpZWxkVmFsdWUgLyBNYXRoLlBJKTtcclxuICAgICAgICBub2RlU2l6ZSA9IE1BWF9OT0RFX1NJWkUgKiBNYXRoLnNxcnQobm9kZS52YWx1ZXNbdHJlZS5maWVsZC5uYW1lXSAvIHRyZWUubWF4RmllbGRWYWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmKG5vZGVTaXplIDwgTUlOX05PREVfU0laRSkgeyBub2RlU2l6ZSA9IE1JTl9OT0RFX1NJWkU7IH1cclxuICAgIH0qL1xyXG4gICAgXHJcbiAgICByZXR1cm4gbm9kZVNpemU7ICAgICAgIFxyXG4gIH0gICBcclxufTsiLCJ2YXIgTUlOX05PREVfU0laRSA9IDU7XHJcbnZhciBNQVhfTk9ERV9TSVpFID0gMTAwO1xyXG5cclxudmFyIFZFUlRJQ0FMX1ZJRVcgPSAwO1xyXG52YXIgSE9SSVpPTlRBTF9WSUVXID0gMTtcclxuXHJcbnZhciB3ZWlnaHRlZFRyZWVWaWV3ID0gXHJcbntcclxuICBkZXN0cm95OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI3RyZWVWaWV3JykucmVtb3ZlKCk7XHJcbiAgfSxcclxuICByZWZyZXNoOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGUod2VpZ2h0ZWRUcmVlVmlldy5yb290KTtcclxuICB9LFxyXG4gIHJvdGF0ZTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIGlmKHdlaWdodGVkVHJlZVZpZXcuZGlyZWN0aW9uID09PSBIT1JJWk9OVEFMX1ZJRVcpXHJcbiAgICB7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcuZGlyZWN0aW9uID0gVkVSVElDQUxfVklFVztcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5ob3Jpem9udGFsX3NwYWNpbmcgPSAxMDA7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcudmVydGljYWxfc3BhY2luZyA9IDYwO1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LmRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKCkucHJvamVjdGlvbihmdW5jdGlvbihkKSB7IHJldHVybiBbZC54LCBkLnldOyB9KTsgIC8vIGRlZmluZSBhIGQzIGRpYWdvbmFsIHByb2plY3Rpb24gZm9yIHVzZSBieSB0aGUgbm9kZSBwYXRocyBsYXRlciBvbi5cclxuICAgICAgXHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcucm9vdC55MCA9IHdlaWdodGVkVHJlZVZpZXcudmlld2VySGVpZ2h0IC8gMjtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5yb290LngwID0gMDsgICAgICBcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5kaXJlY3Rpb24gPSBIT1JJWk9OVEFMX1ZJRVc7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcuaG9yaXpvbnRhbF9zcGFjaW5nID0gMzAwO1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LnZlcnRpY2FsX3NwYWNpbmcgPSAyMDA7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcuZGlhZ29uYWwgPSBkMy5zdmcuZGlhZ29uYWwoKS5wcm9qZWN0aW9uKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFtkLnksIGQueF07IH0pOyAgLy8gZGVmaW5lIGEgZDMgZGlhZ29uYWwgcHJvamVjdGlvbiBmb3IgdXNlIGJ5IHRoZSBub2RlIHBhdGhzIGxhdGVyIG9uLlxyXG4gICAgICBcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5yb290LngwID0gd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QueTAgPSAwOyAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGUod2VpZ2h0ZWRUcmVlVmlldy5yb290KTtcclxuICB9LFxyXG4gIGluaXQ6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LmRpcmVjdGlvbiA9IEhPUklaT05UQUxfVklFVztcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuc2VsZWN0ZWROb2RlID0gbnVsbDtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlID0gbnVsbDtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuZHVyYXRpb24gPSA3NTA7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3Lmhvcml6b250YWxfc3BhY2luZyA9IDMwMDtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcudmVydGljYWxfc3BhY2luZyA9IDIwMDsgICAgXHJcbiAgICBcclxuICAgIHdlaWdodGVkVHJlZVZpZXcubWF4TGFiZWxMZW5ndGggPSAwO1xyXG4gICAgXHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIGZ1bmN0aW9uKGQpXHJcbiAgICB7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcubWF4TGFiZWxMZW5ndGggPSBNYXRoLm1heChkLm5hbWUubGVuZ3RoLCB3ZWlnaHRlZFRyZWVWaWV3Lm1heExhYmVsTGVuZ3RoKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnZpZXdlcldpZHRoID0gJCgnI3RyZWUtY29udGFpbmVyJykud2lkdGgoKTtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcudmlld2VySGVpZ2h0ID0gJCgnI3RyZWUtY29udGFpbmVyJykuaGVpZ2h0KCk7XHJcbiAgICBcclxuICAgIHdlaWdodGVkVHJlZVZpZXcudHJlZSA9IGQzLmxheW91dC50cmVlKCkuc2l6ZShbd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJIZWlnaHQsIHdlaWdodGVkVHJlZVZpZXcudmlld2VyV2lkdGhdKTtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcucm9vdCA9IHByb2plY3QudHJlZTtcclxuICAgIFxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5kcmFnU3RhcnRlZCA9IG51bGw7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LmRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKCkucHJvamVjdGlvbihmdW5jdGlvbihkKSB7IHJldHVybiBbZC55LCBkLnhdOyB9KTsgIC8vIGRlZmluZSBhIGQzIGRpYWdvbmFsIHByb2plY3Rpb24gZm9yIHVzZSBieSB0aGUgbm9kZSBwYXRocyBsYXRlciBvbi4gICAgICAgICAgICAgICAgXHJcbiAgfSwgIFxyXG4gIHJlbmRlcjogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuZGVzdHJveSgpO1xyXG4gICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cInRyZWVWaWV3XCI+PGRpdiBpZD1cInRyZWVWaWV3T3B0aW9uc1wiPjxkaXYgaWQ9XCJleHBhbmRlckNvbnRhaW5lclwiPjwvZGl2PjwvZGl2PjxkaXYgaWQ9XCJ0cmVlLWNvbnRhaW5lclwiPjwvZGl2PjwvZGl2PicpO1xyXG4gXHJcbiAgICBleHBhbmRlclNlbGVjdG9yLmluaXQocHJvamVjdC50cmVlLm1heERlcHRoKTtcclxuICAgICQoJyN0cmVlVmlld09wdGlvbnMnKS5hcHBlbmQoJzxhIGhyZWY9XCIjXCIgaWQ9XCJ0cmVlVmlld1JvdGF0ZUJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IHB1bGwtcmlnaHRcIj5Sb3RhdGUgVmlldzwvYT4nKTtcclxuICAgICQoJyN0cmVlVmlld1JvdGF0ZUJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkgeyB3ZWlnaHRlZFRyZWVWaWV3LnJvdGF0ZSgpOyB9KTsgIFxyXG4gXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LmluaXQoKTtcclxuXHJcbiAgICBmdW5jdGlvbiB6b29tKCkgeyB3ZWlnaHRlZFRyZWVWaWV3LnN2Z0dyb3VwLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkMy5ldmVudC50cmFuc2xhdGUgKyBcIilzY2FsZShcIiArIGQzLmV2ZW50LnNjYWxlICsgXCIpXCIpOyB9ICAgLy8gRGVmaW5lIHRoZSB6b29tIGZ1bmN0aW9uIGZvciB0aGUgem9vbWFibGUgdHJlZVxyXG4gIFxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy56b29tTGlzdGVuZXIgPSBkMy5iZWhhdmlvci56b29tKCkuc2NhbGVFeHRlbnQoWzAuMSwgM10pLm9uKFwiem9vbVwiLCB6b29tKTsgICAgIC8vIGRlZmluZSB0aGUgd2VpZ2h0ZWRUcmVlVmlldy56b29tTGlzdGVuZXIgd2hpY2ggY2FsbHMgdGhlIHpvb20gZnVuY3Rpb24gb24gdGhlIFwiem9vbVwiIGV2ZW50IGNvbnN0cmFpbmVkIHdpdGhpbiB0aGUgc2NhbGVFeHRlbnRzXHJcbiAgXHJcbiAgICBmdW5jdGlvbiBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSkgXHJcbiAgICB7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlID0gZDtcclxuICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdCgnLmdob3N0Q2lyY2xlJykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xyXG4gICAgICBkMy5zZWxlY3RBbGwoJy5naG9zdENpcmNsZScpLmF0dHIoJ2NsYXNzJywgJ2dob3N0Q2lyY2xlIHNob3cnKTtcclxuICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUgYWN0aXZlRHJhZycpO1xyXG5cclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoXCJnLm5vZGVcIikuc29ydChmdW5jdGlvbihhLCBiKSAgICAvLyBzZWxlY3QgdGhlIHBhcmVudCBhbmQgc29ydCB0aGUgcGF0aCdzXHJcbiAgICAgIHsgXHJcbiAgICAgICAgaWYgKGEuaWQgIT0gd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUuaWQpIHJldHVybiAxOyAgICAgICAgICAvLyBhIGlzIG5vdCB0aGUgaG92ZXJlZCBlbGVtZW50LCBzZW5kIFwiYVwiIHRvIHRoZSBiYWNrXHJcbiAgICAgICAgZWxzZSByZXR1cm4gLTE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBpcyB0aGUgaG92ZXJlZCBlbGVtZW50LCBicmluZyBcImFcIiB0byB0aGUgZnJvbnRcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIGlmIG5vZGVzIGhhcyBjaGlsZHJlbiwgcmVtb3ZlIHRoZSBsaW5rcyBhbmQgbm9kZXNcclxuICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEpIFxyXG4gICAgICB7XHJcbiAgICAgICAgLy8gcmVtb3ZlIGxpbmsgcGF0aHNcclxuICAgICAgICBsaW5rcyA9IHdlaWdodGVkVHJlZVZpZXcudHJlZS5saW5rcyhub2Rlcyk7XHJcbiAgICAgICAgbm9kZVBhdGhzID0gd2VpZ2h0ZWRUcmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIikuZGF0YShsaW5rcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50YXJnZXQuaWQ7IH0pLnJlbW92ZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHJlbW92ZSBjaGlsZCBub2Rlc1xyXG4gICAgICAgIG5vZGVzRXhpdCA9IHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpLmRhdGEobm9kZXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuaWQ7IH0pLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkLmlkICE9IHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlLmlkOyB9KS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICAvLyByZW1vdmUgcGFyZW50IGxpbmtcclxuICAgICAgcGFyZW50TGluayA9IHdlaWdodGVkVHJlZVZpZXcudHJlZS5saW5rcyh3ZWlnaHRlZFRyZWVWaWV3LnRyZWUubm9kZXMod2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUucGFyZW50KSk7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKCdwYXRoLmxpbmsnKS5maWx0ZXIoZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gZC50YXJnZXQuaWQgPT0gd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUuaWQ7IH0pLnJlbW92ZSgpO1xyXG5cclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5kcmFnU3RhcnRlZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBkZWZpbmUgdGhlIGJhc2VTdmcsIGF0dGFjaGluZyBhIGNsYXNzIGZvciBzdHlsaW5nIGFuZCB0aGUgd2VpZ2h0ZWRUcmVlVmlldy56b29tTGlzdGVuZXJcclxuICAgIHZhciBiYXNlU3ZnID0gZDMuc2VsZWN0KFwiI3RyZWUtY29udGFpbmVyXCIpLmFwcGVuZChcInN2Z1wiKVxyXG4gICAgICAuYXR0cihcIndpZHRoXCIsIHdlaWdodGVkVHJlZVZpZXcudmlld2VyV2lkdGgpXHJcbiAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHdlaWdodGVkVHJlZVZpZXcudmlld2VySGVpZ2h0KVxyXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwib3ZlcmxheVwiKVxyXG4gICAgICAuY2FsbCh3ZWlnaHRlZFRyZWVWaWV3Lnpvb21MaXN0ZW5lcik7XHJcbiAgXHJcbiAgICBkcmFnTGlzdGVuZXIgPSBkMy5iZWhhdmlvci5kcmFnKCkub24oXCJkcmFnc3RhcnRcIiwgd2VpZ2h0ZWRUcmVlVmlldy5kcmFnc3RhcnQpLm9uKFwiZHJhZ1wiLCBkcmFnKS5vbihcImRyYWdlbmRcIiwgd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZW5kKTsgIC8vIERlZmluZSB0aGUgZHJhZyBsaXN0ZW5lcnMgZm9yIGRyYWcvZHJvcCBiZWhhdmlvdXIgb2Ygbm9kZXMuXHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGRyYWcoZClcclxuICAgIHtcclxuICAgICAgaWYgKGQgPT0gd2VpZ2h0ZWRUcmVlVmlldy5yb290KSB7IHJldHVybjsgfVxyXG4gICAgICBcclxuICAgICAgaWYgKHdlaWdodGVkVHJlZVZpZXcuZHJhZ1N0YXJ0ZWQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgZG9tTm9kZSA9IHRoaXM7XHJcbiAgICAgICAgaW5pdGlhdGVEcmFnKGQsIGRvbU5vZGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkLngwICs9IGQzLmV2ZW50LmR5O1xyXG4gICAgICBkLnkwICs9IGQzLmV2ZW50LmR4O1xyXG4gICAgICBkMy5zZWxlY3QodGhpcykuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQueTAgKyBcIixcIiArIGQueDAgKyBcIilcIik7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcudXBkYXRlVGVtcENvbm5lY3RvcigpOyAgICAgIFxyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gQXBwZW5kIGEgZ3JvdXAgd2hpY2ggaG9sZHMgYWxsIG5vZGVzIGFuZCB3aGljaCB0aGUgem9vbSBMaXN0ZW5lciBjYW4gYWN0IHVwb24uXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnN2Z0dyb3VwID0gYmFzZVN2Zy5hcHBlbmQoXCJnXCIpO1xyXG4gIFxyXG4gICAgLy8gRGVmaW5lIHRoZSByb290XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QueDAgPSB3ZWlnaHRlZFRyZWVWaWV3LnZpZXdlckhlaWdodCAvIDI7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QueTAgPSAwO1xyXG4gICAgXHJcbiAgICAvLyBMYXlvdXQgdGhlIHRyZWUgaW5pdGlhbGx5IGFuZCBjZW50ZXIgb24gdGhlIHJvb3Qgbm9kZS5cclxuICAgIHdlaWdodGVkVHJlZVZpZXcudXBkYXRlKHdlaWdodGVkVHJlZVZpZXcucm9vdCk7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LmNlbnRlck5vZGUod2VpZ2h0ZWRUcmVlVmlldy5yb290KTsgICAgXHJcbiAgfSxcclxuICBjbGljazogZnVuY3Rpb24oZCkgICAvLyBUb2dnbGUgY2hpbGRyZW4gb24gY2xpY2suXHJcbiAge1xyXG4gICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHsgcmV0dXJuOyB9IC8vIGNsaWNrIHN1cHByZXNzZWRcclxuICAgIHByb2plY3QudG9nZ2xlRXhwYW5zaW9uKGQpO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGUoZCk7XHJcbiAgfSwgIFxyXG4gIHVwZGF0ZTogZnVuY3Rpb24oc291cmNlKSBcclxuICB7IFxyXG4gICAgdmFyIGkgPSAwO1xyXG4gICAgICAgIFxyXG4gICAgLy8gQ29tcHV0ZSB0aGUgbmV3IGhlaWdodCwgZnVuY3Rpb24gY291bnRzIHRvdGFsIGNoaWxkcmVuIG9mIHJvb3Qgbm9kZSBhbmQgc2V0cyB0cmVlIGhlaWdodCBhY2NvcmRpbmdseS5cclxuICAgIC8vIFRoaXMgcHJldmVudHMgdGhlIGxheW91dCBsb29raW5nIHNxdWFzaGVkIHdoZW4gbmV3IG5vZGVzIGFyZSBtYWRlIHZpc2libGUgb3IgbG9va2luZyBzcGFyc2Ugd2hlbiBub2RlcyBhcmUgcmVtb3ZlZFxyXG4gICAgLy8gVGhpcyBtYWtlcyB0aGUgbGF5b3V0IG1vcmUgY29uc2lzdGVudC5cclxuICAgIHZhciBsZXZlbFdpZHRoID0gWzFdO1xyXG4gICAgdmFyIGNoaWxkQ291bnQgPSBmdW5jdGlvbihsZXZlbCwgbikgXHJcbiAgICB7XHJcbiAgICAgIGlmIChuLmNoaWxkcmVuICYmIG4uY2hpbGRyZW4ubGVuZ3RoID4gMCkgXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAobGV2ZWxXaWR0aC5sZW5ndGggPD0gbGV2ZWwgKyAxKSB7IGxldmVsV2lkdGgucHVzaCgwKTsgfVxyXG5cclxuICAgICAgICBsZXZlbFdpZHRoW2xldmVsICsgMV0gKz0gbi5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgbi5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsgY2hpbGRDb3VudChsZXZlbCArIDEsIGQpOyB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY2hpbGRDb3VudCgwLCB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpO1xyXG4gICAgdmFyIG5ld0hlaWdodCA9IGQzLm1heChsZXZlbFdpZHRoKSAqIHdlaWdodGVkVHJlZVZpZXcudmVydGljYWxfc3BhY2luZzsgLy8gMjUgcGl4ZWxzIHBlciBsaW5lXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnRyZWUgPSB3ZWlnaHRlZFRyZWVWaWV3LnRyZWUuc2l6ZShbbmV3SGVpZ2h0LCB3ZWlnaHRlZFRyZWVWaWV3LnZpZXdlcldpZHRoXSk7XHJcblxyXG4gICAgLy8gQ29tcHV0ZSB0aGUgbmV3IHRyZWUgbGF5b3V0LlxyXG4gICAgdmFyIG5vZGVzID0gd2VpZ2h0ZWRUcmVlVmlldy50cmVlLm5vZGVzKHdlaWdodGVkVHJlZVZpZXcucm9vdCkucmV2ZXJzZSgpO1xyXG4gICAgdmFyIGxpbmtzID0gd2VpZ2h0ZWRUcmVlVmlldy50cmVlLmxpbmtzKG5vZGVzKTtcclxuXHJcbiAgICAvLyBTZXQgd2lkdGhzIGJldHdlZW4gbGV2ZWxzIGJhc2VkIG9uIG1heExhYmVsTGVuZ3RoLlxyXG4gICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgLy9kLnkgPSAoZC5kZXB0aCAqICh3ZWlnaHRlZFRyZWVWaWV3Lm1heExhYmVsTGVuZ3RoICogMTApKTsgLy9tYXhMYWJlbExlbmd0aCAqIDEwcHhcclxuICAgICAgICAvLyBhbHRlcm5hdGl2ZWx5IHRvIGtlZXAgYSBmaXhlZCBzY2FsZSBvbmUgY2FuIHNldCBhIGZpeGVkIGRlcHRoIHBlciBsZXZlbFxyXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBmb3IgZml4ZWQtZGVwdGggYnkgY29tbWVudGluZyBvdXQgYmVsb3cgbGluZVxyXG4gICAgICAgIGQueSA9IChkLmRlcHRoICogd2VpZ2h0ZWRUcmVlVmlldy5ob3Jpem9udGFsX3NwYWNpbmcpOyAvLzIwMHB4IHBlciBsZXZlbC5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgbm9kZXPigKZcclxuICAgIG5vZGUgPSB3ZWlnaHRlZFRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKS5kYXRhKG5vZGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkIHx8IChkLmlkID0gKytpKTsgfSk7XHJcblxyXG4gICAgLy8gRW50ZXIgYW55IG5ldyBub2RlcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXHJcbiAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcImdcIilcclxuICAgICAgLmNhbGwoZHJhZ0xpc3RlbmVyKVxyXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZVwiKVxyXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS55MCArIFwiLFwiICsgc291cmNlLngwICsgXCIpXCI7IH0pXHJcbiAgICAgIC5vbignY2xpY2snLCB3ZWlnaHRlZFRyZWVWaWV3LmNsaWNrKTtcclxuXHJcbiAgICBub2RlRW50ZXIuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgIC5hdHRyKCdjbGFzcycsICdub2RlQ2lyY2xlJylcclxuICAgICAgLmF0dHIoXCJyXCIsIDApXHJcbiAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5pc05vZGVDb2xsYXBzZWQoZCkgPyBcImxpZ2h0c3RlZWxibHVlXCIgOiBcIiNmZmZcIjsgfSk7XHJcblxyXG4gICAgbm9kZUVudGVyLmFwcGVuZChcInRleHRcIilcclxuICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyAtMTAgOiAxMDsgfSlcclxuICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgIC5hdHRyKCdjbGFzcycsICdub2RlVGV4dCcpXHJcbiAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5oYXNDaGlsZHJlbihkKSA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7IH0pXHJcbiAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubmFtZTsgfSlcclxuICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDApO1xyXG5cclxuICAgIC8vIHBoYW50b20gbm9kZSB0byBnaXZlIHVzIG1vdXNlb3ZlciBpbiBhIHJhZGl1cyBhcm91bmQgaXRcclxuICAgIG5vZGVFbnRlci5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ2dob3N0Q2lyY2xlJylcclxuICAgICAgLmF0dHIoXCJyXCIsIDMwKVxyXG4gICAgICAuYXR0cihcIm9wYWNpdHlcIiwgMC4yKSAvLyBjaGFuZ2UgdGhpcyB0byB6ZXJvIHRvIGhpZGUgdGhlIHRhcmdldCBhcmVhXHJcbiAgICAgIC5zdHlsZShcImZpbGxcIiwgXCJyZWRcIilcclxuICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ21vdXNlb3ZlcicpXHJcbiAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbihub2RlKSB7IHdlaWdodGVkVHJlZVZpZXcub3ZlckNpcmNsZShub2RlKTsgfSlcclxuICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24obm9kZSkgeyB3ZWlnaHRlZFRyZWVWaWV3Lm91dENpcmNsZShub2RlKTsgfSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSB0ZXh0IHRvIHJlZmxlY3Qgd2hldGhlciBub2RlIGhhcyBjaGlsZHJlbiBvciBub3QuXHJcbiAgICBub2RlLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyAtMTAgOiAxMDsgfSlcclxuICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyBcImVuZFwiIDogXCJzdGFydFwiOyB9KVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubmFtZTsgfSk7XHJcblxyXG4gICAgLy8gQ2hhbmdlIHRoZSBjaXJjbGUgZmlsbCBkZXBlbmRpbmcgb24gd2hldGhlciBpdCBoYXMgY2hpbGRyZW4gYW5kIGlzIGNvbGxhcHNlZFxyXG4gICAgbm9kZS5zZWxlY3QoXCJjaXJjbGUubm9kZUNpcmNsZVwiKVxyXG4gICAgICAuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gd2VpZ2h0ZWRUcmVlVmlldy5jb21wdXRlTm9kZVNpemUoZCk7IH0pXHJcbiAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5pc05vZGVDb2xsYXBzZWQoZCkgPyBcImxpZ2h0c3RlZWxibHVlXCIgOiBcIiNmZmZcIjsgfSk7XHJcblxyXG4gICAgLy8gVHJhbnNpdGlvbiBub2RlcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICB2YXIgbm9kZVVwZGF0ZTtcclxuICAgIGlmKHdlaWdodGVkVHJlZVZpZXcuZGlyZWN0aW9uID09PSBWRVJUSUNBTF9WSUVXKVxyXG4gICAge1xyXG4gICAgICBub2RlVXBkYXRlID0gbm9kZS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjsgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIG5vZGVVcGRhdGUgPSBub2RlLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnkgKyBcIixcIiArIGQueCArIFwiKVwiOyB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGYWRlIHRoZSB0ZXh0IGluXHJcbiAgICBub2RlVXBkYXRlLnNlbGVjdChcInRleHRcIikuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMSk7XHJcblxyXG4gICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5vZGVzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXHJcbiAgICB2YXIgbm9kZUV4aXQgPSBub2RlLmV4aXQoKVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgc291cmNlLnkgKyBcIixcIiArIHNvdXJjZS54ICsgXCIpXCI7IH0pXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgIG5vZGVFeGl0LnNlbGVjdChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCAwKTtcclxuICAgIG5vZGVFeGl0LnNlbGVjdChcInRleHRcIikuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMCk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBsaW5rc+KAplxyXG4gICAgdmFyIGxpbmsgPSB3ZWlnaHRlZFRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcInBhdGgubGlua1wiKS5kYXRhKGxpbmtzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC5pZDsgfSk7XHJcblxyXG4gICAgLy8gRW50ZXIgYW55IG5ldyBsaW5rcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXHJcbiAgICBsaW5rLmVudGVyKCkuaW5zZXJ0KFwicGF0aFwiLCBcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGlua1wiKVxyXG4gICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHZhciBvID0geyB4OiBzb3VyY2UueDAsIHk6IHNvdXJjZS55MCB9O1xyXG4gICAgICAgICAgICByZXR1cm4gd2VpZ2h0ZWRUcmVlVmlldy5kaWFnb25hbCh7IHNvdXJjZTogbywgdGFyZ2V0OiBvIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIFRyYW5zaXRpb24gbGlua3MgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxyXG4gICAgbGluay5hdHRyKFwiZFwiLCB3ZWlnaHRlZFRyZWVWaWV3LmRpYWdvbmFsKTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgIGxpbmsuZXhpdCgpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgdmFyIG8gPSB7IHg6IHNvdXJjZS54LCB5OiBzb3VyY2UueSB9O1xyXG4gICAgICAgICAgICByZXR1cm4gd2VpZ2h0ZWRUcmVlVmlldy5kaWFnb25hbCh7IHNvdXJjZTogbywgdGFyZ2V0OiBvIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgIC8vIFN0YXNoIHRoZSBvbGQgcG9zaXRpb25zIGZvciB0cmFuc2l0aW9uLlxyXG4gICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7IGQueDAgPSBkLng7IGQueTAgPSBkLnk7IH0pO1xyXG4gIH0sICBcclxuICBkcmFnc3RhcnQ6IGZ1bmN0aW9uKGQpXHJcbiAge1xyXG4gICAgaWYgKGQgPT0gd2VpZ2h0ZWRUcmVlVmlldy5yb290KSB7IHJldHVybjsgfVxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5kcmFnU3RhcnRlZCA9IHRydWU7XHJcbiAgICBub2RlcyA9IHdlaWdodGVkVHJlZVZpZXcudHJlZS5ub2RlcyhkKTtcclxuICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgLy8gaXQncyBpbXBvcnRhbnQgdGhhdCB3ZSBzdXBwcmVzcyB0aGUgbW91c2VvdmVyIGV2ZW50IG9uIHRoZSBub2RlIGJlaW5nIGRyYWdnZWQuIE90aGVyd2lzZSBpdCB3aWxsIGFic29yYiB0aGUgbW91c2VvdmVyIGV2ZW50IGFuZCB0aGUgdW5kZXJseWluZyBub2RlIHdpbGwgbm90IGRldGVjdCBpdCBkMy5zZWxlY3QodGhpcykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpOyAgICAgIFxyXG4gIH0sXHJcbiAgZHJhZ2VuZDogZnVuY3Rpb24oZClcclxuICB7XHJcbiAgICBpZiAoZCA9PSB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICBkb21Ob2RlID0gdGhpcztcclxuICAgIFxyXG4gICAgaWYgKHdlaWdodGVkVHJlZVZpZXcuc2VsZWN0ZWROb2RlKSBcclxuICAgIHtcclxuICAgICAgLy8gbm93IHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBwYXJlbnQsIGFuZCBpbnNlcnQgaXQgaW50byB0aGUgbmV3IGVsZW1lbnRzIGNoaWxkcmVuXHJcbiAgICAgIHByb2plY3QucmVtb3ZlTm9kZSh3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZSk7XHJcbiAgICAgIFxyXG4gICAgICBpZighd2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUuY2hpbGRyZW4pIHsgd2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUuY2hpbGRyZW4gPSBbXTsgfVxyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZS5jaGlsZHJlbi5wdXNoKHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgXHJcbiAgICAgIHByb2plY3QuZXhwYW5kTm9kZSh3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZSk7ICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgbm9kZSBiZWluZyBhZGRlZCB0byBpcyBleHBhbmRlZCBzbyB1c2VyIGNhbiBzZWUgYWRkZWQgbm9kZSBpcyBjb3JyZWN0bHkgbW92ZWQgICAgXHJcbiAgICB9IFxyXG4gIFxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZScpO1xyXG4gICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUnKTtcclxuICAgIFxyXG4gICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdCgnLmdob3N0Q2lyY2xlJykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnJyk7ICAgLy8gbm93IHJlc3RvcmUgdGhlIG1vdXNlb3ZlciBldmVudCBvciB3ZSB3b24ndCBiZSBhYmxlIHRvIGRyYWcgYSAybmQgdGltZVxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgICBcclxuICAgIGlmICh3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZSAhPT0gbnVsbCkgXHJcbiAgICB7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcudXBkYXRlKHdlaWdodGVkVHJlZVZpZXcucm9vdCk7XHJcbiAgICAgIC8vd2VpZ2h0ZWRUcmVlVmlldy5jZW50ZXJOb2RlKHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUgPSBudWxsO1xyXG4gICAgfSAgICAgIFxyXG4gIH0sXHJcbiAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIHRoZSB0ZW1wb3JhcnkgY29ubmVjdG9yIGluZGljYXRpbmcgZHJhZ2dpbmcgYWZmaWxpYXRpb25cclxuICB1cGRhdGVUZW1wQ29ubmVjdG9yOiBmdW5jdGlvbigpIFxyXG4gIHtcclxuICAgIHZhciBkYXRhID0gW107XHJcbiAgICBpZiAod2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUgIT09IG51bGwgJiYgd2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUgIT09IG51bGwpICAgLy8gaGF2ZSB0byBmbGlwIHRoZSBzb3VyY2UgY29vcmRpbmF0ZXMgc2luY2Ugd2UgZGlkIHRoaXMgZm9yIHRoZSBleGlzdGluZyBjb25uZWN0b3JzIG9uIHRoZSBvcmlnaW5hbCB0cmVlXHJcbiAgICB7XHJcbiAgICAgIGRhdGEgPSBbeyBzb3VyY2U6IHsgeDogd2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUueTAsIHk6IHdlaWdodGVkVHJlZVZpZXcuc2VsZWN0ZWROb2RlLngwIH0sIHRhcmdldDogeyB4OiB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZS55MCwgeTogd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUueDAgfSB9XTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFyIGxpbmsgPSB3ZWlnaHRlZFRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcIi50ZW1wbGlua1wiKS5kYXRhKGRhdGEpO1xyXG4gICAgbGluay5lbnRlcigpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsIFwidGVtcGxpbmtcIikuYXR0cihcImRcIiwgZDMuc3ZnLmRpYWdvbmFsKCkpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuICAgIGxpbmsuYXR0cihcImRcIiwgZDMuc3ZnLmRpYWdvbmFsKCkpO1xyXG4gICAgbGluay5leGl0KCkucmVtb3ZlKCk7XHJcbiAgfSxcclxuICBvdmVyQ2lyY2xlOiBmdW5jdGlvbihkKSBcclxuICB7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IGQ7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICB9LFxyXG4gIG91dENpcmNsZTogZnVuY3Rpb24oZCkgXHJcbiAge1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgfSxcclxuICBjZW50ZXJOb2RlOiBmdW5jdGlvbihzb3VyY2UpICAgICAvLyBGdW5jdGlvbiB0byBjZW50ZXIgbm9kZSB3aGVuIGNsaWNrZWQvZHJvcHBlZCBzbyBub2RlIGRvZXNuJ3QgZ2V0IGxvc3Qgd2hlbiBjb2xsYXBzaW5nL21vdmluZyB3aXRoIGxhcmdlIGFtb3VudCBvZiBjaGlsZHJlbi5cclxuICB7XHJcbiAgICBzY2FsZSA9IHdlaWdodGVkVHJlZVZpZXcuem9vbUxpc3RlbmVyLnNjYWxlKCk7XHJcbiAgICB4ID0gLXNvdXJjZS55MDtcclxuICAgIHkgPSAtc291cmNlLngwO1xyXG4gICAgeCA9IHggKiBzY2FsZSArIHdlaWdodGVkVHJlZVZpZXcudmlld2VyV2lkdGggLyA0O1xyXG4gICAgeSA9IHkgKiBzY2FsZSArIHdlaWdodGVkVHJlZVZpZXcudmlld2VySGVpZ2h0IC8gMjtcclxuICAgIGQzLnNlbGVjdCgnZycpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB4ICsgXCIsXCIgKyB5ICsgXCIpc2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiKTtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuem9vbUxpc3RlbmVyLnNjYWxlKHNjYWxlKTtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuem9vbUxpc3RlbmVyLnRyYW5zbGF0ZShbeCwgeV0pO1xyXG4gIH0sICAgICAgICAgIFxyXG4gIGNvbXB1dGVOb2RlU2l6ZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICB2YXIgbm9kZVNpemUgPSBNSU5fTk9ERV9TSVpFO1xyXG4gICAgXHJcbiAgICBpZih0cmVlLmZpZWxkKVxyXG4gICAge1xyXG4gICAgICBpZihub2RlLnZhbHVlcyAmJiBub2RlLnZhbHVlc1t0cmVlLmZpZWxkLm5hbWVdKVxyXG4gICAgICB7XHJcbiAgICAgICAgLy9ub2RlU2l6ZSA9IDIgKiBNYXRoLlBJICogTWF0aC5zcXJ0KE1BWF9OT0RFX1NJWkUgKiBub2RlLnZhbHVlc1t0cmVlLmZpZWxkLm5hbWVdIC8gdHJlZS5tYXhGaWVsZFZhbHVlIC8gTWF0aC5QSSk7XHJcbiAgICAgICAgbm9kZVNpemUgPSBNQVhfTk9ERV9TSVpFICogTWF0aC5zcXJ0KG5vZGUudmFsdWVzW3RyZWUuZmllbGQubmFtZV0gLyB0cmVlLm1heEZpZWxkVmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZihub2RlU2l6ZSA8IE1JTl9OT0RFX1NJWkUpIHsgbm9kZVNpemUgPSBNSU5fTk9ERV9TSVpFOyB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBub2RlU2l6ZTsgICAgICAgXHJcbiAgfSAgIFxyXG59OyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==