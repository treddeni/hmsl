function aggregate_any(e,a){if(e.children&&0!==e.children.length){for(var l=0,n=0;n<e.children.length;n++)l+=aggregate_any(e.children[n],a);return e.values||(e.values={}),e.values[a]=l,document.getElementById(a+e.id).value=l,l}return e.values&&e.values[a]?parseFloat(e.values[a]):0}
"use strict";var REDIPS=REDIPS||{};REDIPS.drag=function(){var e,o,t,n,r,d,l,i,a,s,c,f,p,g,u,v,y,m,h,w,E,b,D,I,S,R,P,x,N,T,C,B,j,k=null,L={width:0,height:0},M={width:null,height:null,container:[],obj:null},O={page:{x:0,y:0},div:{x:0,y:0},flag:{x:0,y:0}},Y=[],H=[],W=null,_=null,X={x:0,y:0},A={x:0,y:0,value:7,flag:!1},V=!1,z=!1,F=null,q=null,K=null,$=null,G=null,J=null,Q=!1,U=!1,Z={colorTd:"#FFCFAE",colorTr:"#9BB3DA"},ee={enable:!0,bound:25,speed:20},oe={borderDisabled:"dotted",opacityDisabled:"",rowEmptyColor:"white"},te={},ne={keyDiv:!1,keyRow:!1,sendBack:!1,drop:!1},re={cloned:function(){},clonedDropped:function(){},clonedEnd1:function(){},clonedEnd2:function(){},dropped:function(){},droppedBefore:function(){},finish:function(){},notCloned:function(){},notMoved:function(){},rowChanged:function(){},rowClicked:function(){},rowCloned:function(){},rowDropped:function(){},rowDroppedBefore:function(){},rowDroppedSource:function(){},rowMoved:function(){},rowNotCloned:function(){},rowNotMoved:function(){}};return e=function(){if(W=document.getElementById("redips-drag"),j=m(),!document.getElementById("redips_clone")){var e=document.createElement("div");e.id="redips_clone",e.style.width=e.style.height="1px",W.appendChild(e)}o("init",".redips-drag"),T=document.getElementById("treeTable"),T.redips={},c(),REDIPS.event.add(window,"resize",c),REDIPS.event.add(window,"scroll",y)},n=function(e){var o,t,n,l,i=e||window.event;if(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),V=i.shiftKey,window.getSelection)window.getSelection().removeAllRanges();else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(a){}return n=X.x=i.clientX,l=X.y=i.clientY,A.x=n,A.y=l,A.flag=!1,REDIPS.drag.objOld=U=Q||this,REDIPS.drag.obj=Q=this,z=Q.className.indexOf("redips-clone")>-1,REDIPS.drag.obj=Q=R(Q),y(),F=$=null,f(),K=q=F,J=G=$,REDIPS.drag.event.rowClicked(te.current),null!==F&&null!==$||(f(),K=q=F,J=G=$,null!==F&&null!==$)?(C=B=!1,REDIPS.event.add(document,"mousemove",d),REDIPS.event.add(document,"mouseup",r),null!==F&&(N=u(F)),t=D(T,"position"),"fixed"!==t&&(t=D(T.parentNode,"position")),o=v(Q,t),k=[l-o[0],o[1]-n,o[2]-l,n-o[3]],!1):!0},R=function(e){var o,t,n;return"DIV"===e.nodeName?(n=e,e=I("TR",e),void 0===e.redips&&(e.redips={}),e.redips.div=n,e):(t=e,o=document.createElement("table"),o.innerHTML='<tr id="'+t.id+'" class="'+t.classList+'">'+t.innerHTML+"</tr>",o.redips={},o.redips.sourceRow=t,E(t,o.rows[0]),document.getElementById("redips_clone").appendChild(o),o)},P=function(e){var o,t,n;n=function(e){var o;void 0!==e.redips&&e.redips.emptyRow?S(e,"empty",REDIPS.drag.style.rowEmptyColor):(o=I("TABLE",e),o.deleteRow(e.rowIndex))};var r=Q;e>T.rows.length-1&&(e=T.rows.length-1);var d=T.rows[e];t=r.getElementsByTagName("tr")[0],r.parentNode.removeChild(r),o=REDIPS.drag.event.rowDroppedBefore(T,r.redips.sourceRow.rowIndex),o!==!1&&(e<T.rows.length?d.parentNode.insertBefore(t,d.nextSibling):(d.parentNode.appendChild(t),d=T.rows[0]),B||n(r.redips.sourceRow),delete t.redips.emptyRow,REDIPS.drag.event.rowDropped(d))},r=function(e){var o,t,n,a,s,c,f=e||window.event;if(n=f.clientX,a=f.clientY,O.flag.x=O.flag.y=0,REDIPS.event.remove(document,"mousemove",d),REDIPS.event.remove(document,"mouseup",r),W.onselectstart=null,i(Q),M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,O.flag.x=O.flag.y=0,null===F||null===$)REDIPS.drag.event.notMoved();else{if(REDIPS.drag.td.target=te.target=T.rows[F].cells[$],g(F,N),o=F,C)if(K===o){for(t=Q.getElementsByTagName("tr")[0],U.style.backgroundColor=t.style.backgroundColor,s=0;s<t.cells.length;s++)U.cells[s].style.backgroundColor=t.cells[s].style.backgroundColor;Q.parentNode.removeChild(Q),delete U.redips.emptyRow,B?REDIPS.drag.event.rowNotCloned():REDIPS.drag.event.rowDroppedSource(te.target)}else P(o);else REDIPS.drag.event.rowNotMoved();B||A.flag?B&&K===F&&J===$?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):B&&REDIPS.drag.clone.drop===!1&&(n<T.redips.offset[3]||n>T.redips.offset[1]||a<T.redips.offset[0]||a>T.redips.offset[2])?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):(c=REDIPS.drag.event.droppedBefore(te.target),l(c)):REDIPS.drag.event.notMoved(),y(),REDIPS.drag.event.finish()}q=G=null},l=function(e){var o,t=null;if(e!==!1){if(ne.sendBack===!0){o=te.target.getElementsByTagName("DIV");for(var n=0;n<o.length;n++)if(Q!==o[n]&&0===Q.id.indexOf(o[n].id)){t=o[n];break}if(t)return b(t,1),void Q.parentNode.removeChild(Q)}te.target.appendChild(Q),a(Q),REDIPS.drag.event.dropped(te.target),B&&(REDIPS.drag.event.clonedDropped(te.target),b(U,-1))}else B&&Q.parentNode&&Q.parentNode.removeChild(Q)},a=function(e,o){e.onmousedown=o===!1?null:n},i=function(e){e.style.top="",e.style.left="",e.style.position="",e.style.zIndex=""},d=function(e){var o,t,n,r,d,l,i,a=e||window.event,c=REDIPS.drag.scroll.bound;if(t=X.x=a.clientX,n=X.y=a.clientY,r=Math.abs(A.x-t),d=Math.abs(A.y-n),C||((z||REDIPS.drag.clone.keyRow===!0&&V)&&(B=!0),REDIPS.drag.objOld=U=Q,REDIPS.drag.obj=Q=R(Q),Q.style.zIndex=999,Q.style.position="fixed",y(),f(),B?REDIPS.drag.event.rowCloned():REDIPS.drag.event.rowMoved(),p(),t>L.width-k[1]&&(Q.style.left=L.width-(k[1]+k[3])+"px"),n>L.height-k[2]&&(Q.style.top=L.height-(k[0]+k[2])+"px")),C=!0,t>k[3]&&t<L.width-k[1]&&(Q.style.left=t-k[3]+"px"),n>k[0]&&n<L.height-k[2]&&(Q.style.top=n-k[0]+"px"),t<_[1]&&t>_[3]&&n<_[2]&&n>_[0]&&0===O.flag.x&&0===O.flag.y&&(H.containTable||t<H[3]||t>H[1]||n<H[0]||n>H[2])&&(f(),s()),REDIPS.drag.scroll.enable)for(O.page.x=c-(L.width/2>t?t-k[3]:L.width-t-k[1]),O.page.x>0?(O.page.x>c&&(O.page.x=c),i=0,O.page.x*=t<L.width/2?-1:1,O.page.x<0&&0>=i||O.page.x>0&&i>=M.width-L.width||0===O.flag.x++&&(REDIPS.event.remove(window,"scroll",y),h(window))):O.page.x=0,O.page.y=c-(L.height/2>n?n-k[0]:L.height-n-k[2]),O.page.y>0?(O.page.y>c&&(O.page.y=c),i=window.pageYOffset||document.documentElement.scrollTop,O.page.y*=n<L.height/2?-1:1,O.page.y<0&&0>=i||O.page.y>0&&i>=M.height-L.height||0===O.flag.y++&&(REDIPS.event.remove(window,"scroll",y),w(window))):O.page.y=0,l=0;l<M.container.length;l++){if(o=M.container[l],o.autoscroll&&t<o.offset[1]&&t>o.offset[3]&&n<o.offset[2]&&n>o.offset[0]){O.div.x=c-(o.midstX>t?t-k[3]-o.offset[3]:o.offset[1]-t-k[1]),O.div.x>0?(O.div.x>c&&(O.div.x=c),O.div.x*=t<o.midstX?-1:1,0===O.flag.x++&&(REDIPS.event.remove(o.div,"scroll",y),h(o.div))):O.div.x=0,O.div.y=c-(o.midstY>n?n-k[0]-o.offset[0]:o.offset[2]-n-k[2]),O.div.y>0?(O.div.y>c&&(O.div.y=c),O.div.y*=n<o.midstY?-1:1,0===O.flag.y++&&(REDIPS.event.remove(o.div,"scroll",y),w(o.div))):O.div.y=0;break}O.div.x=O.div.y=0}a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},s=function(){(F!==q||$!==G)&&(null!==q&&null!==G&&(g(q,N),REDIPS.drag.td.previous=te.previous=T.rows[q].cells[G],REDIPS.drag.td.current=te.current=T.rows[F].cells[$],F!==q&&REDIPS.drag.event.rowChanged(te.current)),p())},c=function(){L.width=window.innerWidth,L.height=window.innerHeight,M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,y()},f=function(){var e,o,t,n,r,d,l=[];if(e=function(){null!==q&&null!==G&&(F=q,$=G)},n=X.x,r=X.y,l[0]=T.redips.offset[0],l[1]=T.redips.offset[1],l[2]=T.redips.offset[2],l[3]=T.redips.offset[3],void 0!==T.sca&&(l[0]=l[0]>T.sca.offset[0]?l[0]:T.sca.offset[0],l[1]=l[1]<T.sca.offset[1]?l[1]:T.sca.offset[1],l[2]=l[2]<T.sca.offset[2]?l[2]:T.sca.offset[2],l[3]=l[3]>T.sca.offset[3]?l[3]:T.sca.offset[3]),l[3]<n&&n<l[1]&&l[0]<r&&r<l[2]){for(o=T.redips.row_offset,F=0;F<o.length-1;F++)if(void 0!==o[F]){if(H[0]=o[F][0],void 0!==o[F+1])H[2]=o[F+1][0];else for(d=F+2;d<o.length;d++)if(void 0!==o[d]){H[2]=o[d][0];break}if(r<=H[2])break}t=F,F===o.length-1&&(H[0]=o[F][0],H[2]=T.redips.offset[2]),$=0,0>F||0>$?e():F!==t&&(H[0]=o[F][0],H[2]=H[0]+T.rows[F].cells[$].offsetHeight,(r<H[0]||r>H[2])&&e())}},p=function(){null!==F&&null!==$&&(N=u(F),g(F),q=F,G=$)},g=function(e,o){var t,n;t=T.rows[e];for(var r=0;r<t.cells.length;r++)n=t.cells[r].style,n.backgroundColor=void 0===o?REDIPS.drag.hover.colorTr:o.color[r].toString(),void 0!==REDIPS.drag.hover.borderTr&&(void 0===o?K>F?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:(n.borderTopWidth=o.top[r][0],n.borderTopStyle=o.top[r][1],n.borderTopColor=o.top[r][2],n.borderBottomWidth=o.bottom[r][0],n.borderBottomStyle=o.bottom[r][1],n.borderBottomColor=o.bottom[r][2]))},u=function(e){var o,t,n={color:[],top:[],right:[],bottom:[],left:[]},r=function(e,o){var t="border"+o+"Width",n="border"+o+"Style",r="border"+o+"Color";return[D(e,t),D(e,n),D(e,r)]};o=T.rows[e];for(var d=0;d<o.cells.length;d++)t=o.cells[d],n.color[d]=t.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTr&&(n.top[d]=r(t,"Top"),n.bottom[d]=r(t,"Bottom"));return n},v=function(e,o,t){var n=0,r=0,d=e;if("fixed"!==o&&(n=0-j[0],r=0-j[1]),void 0===t||t===!0){do n+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName)}else do n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName);return[r,n+d.offsetWidth,r+d.offsetHeight,n]},y=function(){var e,o,t;j=m(),e=[],o=D(T,"position"),"fixed"!==o&&(o=D(T.parentNode,"position"));for(var n=T.rows.length-1;n>=0;n--)"none"!==T.rows[n].style.display&&(e[n]=v(T.rows[n],o));T.redips.offset=v(T,o),T.redips.row_offset=e,_=v(W);for(var n=0;n<M.container.length;n++)o=D(M.container[n].div,"position"),t=v(M.container[n].div,o,!1),M.container[n].offset=t,M.container[n].midstX=(t[1]+t[3])/2,M.container[n].midstY=(t[0]+t[2])/2},m=function(){var e=window.pageYOffset||document.documentElement.scrollTop,o=0;return[o,e]},h=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.x>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[0],r=M.width-L.width,d=O.page.x):(n=M.obj.scrollLeft,r=M.obj.scrollWidth-M.obj.clientWidth,d=O.div.x),O.flag.x>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(d,0),n=m()[0],o=parseInt(Q.style.left,10),isNaN(o)&&(o=0)):M.obj.scrollLeft+=d,setTimeout(h,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.x=0,H=[0,0,0,0])},w=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.y>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[1],r=M.height-L.height,d=O.page.y):(n=M.obj.scrollTop,r=M.obj.scrollHeight-M.obj.clientHeight,d=O.div.y),O.flag.y>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(0,d),n=m()[1],o=parseInt(Q.style.top,10),isNaN(o)&&(o=0)):M.obj.scrollTop+=d,setTimeout(w,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.y=0,H=[0,0,0,0])},E=function(e,o){var t,n=[];n[0]=function(e,o){e.redips&&(o.redips={},o.redips.enabled=e.redips.enabled,o.redips.container=e.redips.container,e.redips.enabled&&a(o))},n[1]=function(e,o){e.redips&&(o.redips={},o.redips.emptyRow=e.redips.emptyRow)},t=function(t){var r,d,l=["DIV","TR"];r=e.getElementsByTagName(l[t]),d=o.getElementsByTagName(l[t]);for(var i=0;i<d.length;i++)n[t](r[i],d[i])},"DIV"===e.nodeName?n[0](e,o):"TR"===e.nodeName&&n[1](e,o),t(0),t(1)},b=function(e,t){var n,r,d,l;l=e.className,n=l.match(/climit(\d)_(\d+)/),null!==n&&(r=parseInt(n[1],10),d=parseInt(n[2],10),0===d&&1===t&&(l+=" redips-clone",2===r&&o(!0,e)),d+=t,l=l.replace(/climit\d_\d+/g,"climit"+r+"_"+d),0>=d&&(l=l.replace("redips-clone",""),2===r?(o(!1,e),REDIPS.drag.event.clonedEnd2()):REDIPS.drag.event.clonedEnd1()),e.className=x(l))},o=function(e,o){var n=[];void 0===o?n=W.getElementsByTagName("div"):"string"==typeof o?n=document.querySelectorAll(o):"object"!=typeof o||"DIV"===o.nodeName&&-1!==o.className.indexOf("redips-drag")?n[0]=o:n=o.getElementsByTagName("div"),t(e,n)},t=function(e,o){var t,n,r,d,l,i,s,c,f,p,g,u=[],m=/\bredips-drag\b/i,h=/\bredips-noautoscroll\b/i;for(l=REDIPS.drag.style.opacityDisabled,e===!0||"init"===e?(d=REDIPS.drag.style.borderEnabled,i="move",f=!0):(d=REDIPS.drag.style.borderDisabled,i="auto",f=!1),t=0,n=0;t<o.length;t++)if(m.test(o[t].className))"init"===e||void 0===o[t].redips?(o[t].redips={},o[t].redips.container=W):e===!0&&"number"==typeof l?(o[t].style.opacity="",o[t].style.filter=""):e===!1&&"number"==typeof l&&(o[t].style.opacity=l/100,o[t].style.filter="alpha(opacity="+l+")"),a(o[t],f),o[t].style.borderStyle=d,o[t].style.cursor=i,o[t].redips.enabled=f;else if("init"===e&&(s=D(o[t],"overflow"),"visible"!==s)){for(REDIPS.event.add(o[t],"scroll",y),g=D(o[t],"position"),p=v(o[t],g,!1),c=!h.test(o[t].className),M.container[n]={div:o[t],offset:p,midstX:(p[1]+p[3])/2,midstY:(p[0]+p[2])/2,autoscroll:c},u=o[t].getElementsByTagName("table"),r=0;r<u.length;r++)u[r].sca=M.container[n];n++}},D=function(e,o){return e&&e.currentStyle?e.currentStyle[o]:e&&window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[o]:void 0},I=function(e,o){for(o=o.parentNode;o&&o.nodeName!==e;)o=o.parentNode;return o},x=function(e){return void 0!==e&&(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ")),e},S=function(e,o,t){var n,r,d;if("string"==typeof e&&(e=document.getElementById(e),e=I("TABLE",e)),"TR"===e.nodeName)for(n=e.getElementsByTagName("td"),r=0;r<n.length;r++)if(n[r].style.backgroundColor=t?t:"","empty"===o)n[r].innerHTML="";else for(d=0;d<n[r].childNodes.length;d++)1===n[r].childNodes[d].nodeType&&(n[r].childNodes[d].style.opacity=o/100,n[r].childNodes[d].style.filter="alpha(opacity="+o+")");else e.style.opacity=o/100,e.style.filter="alpha(opacity="+o+")",e.style.backgroundColor=t?t:""},{obj:Q,objOld:U,td:te,hover:Z,scroll:ee,style:oe,clone:ne,init:e,enableDrag:o,enableDivs:t,rowOpacity:S,getScrollPosition:m,getStyle:D,findParent:I,event:re}}(),REDIPS.event||(REDIPS.event=function(){var e,o;return e=function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},o=function(e,o,t){e.removeEventListener?e.removeEventListener(o,t,!1):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=null},{add:e,remove:o}}());
"use strict";var redips={};redips.init=function(){var e=REDIPS.drag;e.init(),e.event.rowDropped=function(o){var n=parseInt(e.objOld.id.replace("rowid","")),t=parseInt(o.id.replace("rowid",""));spreadSheet.moveNode(n,t)},e.event.rowDroppedSource=function(){e.rowOpacity(e.objOld,100)},e.event.rowMoved=function(){e.rowOpacity(e.obj,85),e.rowOpacity(e.objOld,20,"White")},e.event.rowClicked=function(){},e.event.rowNotMoved=function(){},e.event.rowCloned=function(){},e.event.rowNotCloned=function(){},e.event.rowDeleted=function(){},e.event.rowUndeleted=function(){e.rowOpacity(e.objOld,100)}};
var resizeColumnLeft=0,resizeField="0",MIN_COLUMN_WIDTH=70,GRIPS_WIDTH=16,startResize=function(e,i){$(document).bind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).bind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="visible",document.getElementById("resizeLine").style.left=e.pageX+"px",resizeColumnLeft=$(i.parentNode).position().left,resizeField=i.parentNode.id.replace("colHeader","")},resizeEnd=function(e){$(document).unbind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).unbind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="hidden";var i=e.pageX-resizeColumnLeft-GRIPS_WIDTH;MIN_COLUMN_WIDTH>i&&(i=MIN_COLUMN_WIDTH),document.getElementById("colHeaderInput"+resizeField).style.width=i+"px";for(var t=document.querySelectorAll(".fieldInput"+resizeField),r=0;r<t.length;r++)t[r].style.width=i+8+"px"},resizeDrag=function(e){e.pageX>resizeColumnLeft+MIN_COLUMN_WIDTH+GRIPS_WIDTH&&(document.getElementById("resizeLine").style.left=e.pageX+"px")};

var fieldMenuController={displayFieldMenu:function(e,i,t){var n=project.getField(e);this.menu=new FieldMenu(n,spreadSheet.fields),fieldMenuView.render(this.menu,i,t)},handleClick:function(e){var i=this.menu.getMenuItem(e,this.menu),t=this.menu.getMenuItemParent(e,this.menu);if(i.field){var n=project.getField(i.field.name);n[i.varName]=i.value,fieldMenuView.setCheckmarks(e,t.items),t===this.menu&&spreadSheet.updateNumberFieldFormatting(n)}}};
$(document).ready(function(){scrollBarWidth=getScrollBarWidth(),hms.init()});var hms={init:function(){projects.init(function(e){headerView.render(e)})},openProject:function(e){projects.openProject(e,function(t){project.tree=t,$.ajax({type:"GET",url:"api/versions?projectID="+e}).done(function(e){headerView.refresh(JSON.parse(e).versions),hms.selectView(headerView.selectedView())})})},openSaveDBDialog:function(){project.getCurrentVersion(function(e){saveDBDialog.render(project.tree.version,project.tree.versionLabel,project.tree.versionDate,e+1)})},saveToDatabase:function(){project.saveToDatabase(),this.openProject(project.tree.projectID)},selectView:function(e){project.tree&&(this.view&&this.view.destroy(),this.showView(e))},selectVersion:function(e){projects.openProjectVersion(project.tree.projectID,e,function(e){project.tree=e,hms.selectView(headerView.selectedView())})},showView:function(e){switch(e){case SPREADSHEET_VIEW:this.view=spreadSheetView,spreadSheet.display();break;case TREE_VIEW:this.view=treeView,tree.displayTree();break;case WEIGHTED_TREE_VIEW:this.view=weightedTreeView,tree.displayWeightedTree();break;case CIRCLE_VIEW:this.view=circleView,circleView.display()}},createNewProject:function(e){projects.createNewProject(e),hms.selectView(headerView.selectedView())},nextProjectID:function(){return projects.nextProjectID++},expandToLevel:function(e){project.expandToLevel(project.tree,e),this.view===spreadSheetView?spreadSheet.display():this.view===treeView?treeView.refresh():this.view===weightedTreeView&&weightedTreeView.refresh()}},scrollBarWidth,getScrollBarWidth=function(){var e,t;return e=document.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t};
var spreadSheet={display:function(){project.cleanseData(),spreadSheetView.render(project.tree)},fields:function(){return project.fields()},tree:function(){return project.tree},updateFieldValue:function(e,d){var r=project.findNode(d);r&&(r.values||(r.values={}),r.values[e]=spreadSheetView.getFieldValue(e,d)),project.tree.children.forEach(function(d){aggregate_any(d,e)})},rawValue:function(e,d){var r=project.findNode(parseInt(d));return r.values&&r.values[e]?r.values[e]:""},formattedValue:function(e,d){return d.values&&d.values[e.name]?Field.formatValue(e,d.values[e.name]):""},addField:function(e){project.addField(e),spreadSheetView.addField(e)},hasChildren:function(e){return!project.isNodeChildless(e)},childrenHidden:function(e){return project.isNodeCollapsed(e)},moveNode:function(e,d){var r=project.findNode(d),t=project.findNode(e);spreadSheet.removeNode(t),project.addNode(t,r),spreadSheet.addNode(t,r)},removeNode:function(e){var d=project.findParent(e.id);project.traverse(project.getChildren,spreadSheetView.removeNode,e),project.removeNode(e),spreadSheetView.redrawNodeContent(d)},deleteNode:function(e){var d=project.findNode(e);spreadSheet.removeNode(d)},addNode:function(e,d){project.isNodeCollapsed(d)&&spreadSheet.expandNode(d),spreadSheetView.redrawNodeContent(d),spreadSheetView.insertNodeAfter(e,d),spreadSheetView.renderExpander()},copyNode:function(e){var d=project.findNode(e),r=project.cloneNode(d);project.insertNode(r,d),spreadSheetView.insertNodeBefore(r,d)},expandNode:function(e){project.expandNode(e),spreadSheetView.expandNode(e),spreadSheetView.redrawNodeContent(e)},collapseNode:function(e){project.traverseDescendants(project.getChildren,spreadSheetView.removeNode,e),project.collapseNode(e),spreadSheetView.redrawNodeContent(e)},toggleNode:function(e){var d=project.findNode(e);project.isNodeExpanded(d)?spreadSheet.collapseNode(d):project.isNodeCollapsed(d)&&spreadSheet.expandNode(d)},updateNodeName:function(e,d){project.findNode(e).name=d},updateNumberFieldFormatting:function(e){project.traverse(project.getChildren,function(d){if(d.values){var r=Field.formatValue(e,Number(d.values[e.name]));spreadSheetView.updateFieldValue(e.name,d.id,r)}})},enableDragging:function(e){project.traverse(project.getChildren,spreadSheetView.enableDragging,e)}};
var tree={displayTree:function(){this.data=project.tree,this.field=project.fields()[0],treeView.render()},displayWeightedTree:function(){this.data=project.tree,this.field=project.fields()[0],this.maxFieldValue=this.calcMaxFieldValue(),weightedTreeView.render()},calcMaxFieldValue:function(){var e=Number.NEGATIVE_INFINITY;return project.traverse(project.getChildren,function(t){if(t.values){var r=t.values[tree.field.name];r>e&&(e=r)}}),e}};
var Field=function(i){this.name=i,this.datatype=Field.NUMBER,this.format=Field.NUMBER_FORMAT,this.precision=2,this.agg_type=Field.NO_AGGREGATION,this.agg_qty_field=null};Field.NUMBER="0",Field.STRING="1",Field.CHOICE="2",Field.NO_AGGREGATION="0",Field.SUM_ANY_AGGREGATION="1",Field.NUMBER_FORMAT="0",Field.PERCENT_FORMAT="1",Field.SCIENTIFIC_FORMAT="2",Field.formatValue=function(i,e){if(i.datatype===Field.NUMBER){if(e=Number(e),i.format===Field.NUMBER_FORMAT)return e.toFixed(i.precision);if(i.format===Field.PERCENT_FORMAT)return(100*e).toFixed(i.precision)+"%";if(i.format===Field.SCIENTIFIC_FORMAT)return e.toExponential(i.precision)}else{if(i.datatype===Field.STRING)return e;i.datatype===Field.CHOICE}};
var FieldMenu=function(e,i){var t=new FieldMenuItem("Number",Field.NUMBER,"datatype",e),n=new FieldMenuItem("Format"),m=new FieldMenuItem("Number",Field.NUMBER_FORMAT,"format",e);m.items.push(new FieldMenuItem("0",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",m.items.push(new FieldMenuItem(s,u,"precision",e));n.items.push(m);var r=new FieldMenuItem("Percent",Field.PERCENT_FORMAT,"format",e);r.items.push(new FieldMenuItem("0%",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",r.items.push(new FieldMenuItem(s+"%",u,"precision",e));n.items.push(r);var a=new FieldMenuItem("Scientific",Field.SCIENTIFIC_FORMAT,"format",e);a.items.push(new FieldMenuItem("0e+0",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",a.items.push(new FieldMenuItem(s+"e+0",u,"precision",e));n.items.push(a),t.items.push(n);var d=new FieldMenuItem("Aggregation");d.items.push(new FieldMenuItem("No Aggregation",Field.NO_AGGREGATION,"agg_type",e));var l=new FieldMenuItem("Sum any defined children",Field.SUM_ANY_AGGREGATION,"agg_type",e);for(var F in i){var p=i[F];p.name!=e.name&&l.items.push(new FieldMenuItem(p.name,p.name,"agg_qty_field",e))}d.items.push(l),t.items.push(d),this.items=[],this.items.push(t),this.items.push(new FieldMenuItem("Text",Field.STRING,"datatype",e))};FieldMenu.prototype.getMenuItem=function(e,i){if(e===i.id)return i;if(i.items&&i.items.length>0)for(var t,n=0;n<i.items.length;n++)if(t=this.getMenuItem(e,i.items[n]))return t},FieldMenu.prototype.getMenuItemParent=function(e,i){if(i.items&&i.items.length>0)for(var t=0;t<i.items.length;t++){if(i.items[t].id===e)return i;var n=this.getMenuItemParent(e,i.items[t]);if(n)return n}};
var FieldMenuItem=function(i,e,t,s){this.display=i,this.value=e,this.varName=t,this.field=s,this.items=[],this.id=FieldMenuItem.id++,this.parent=-1,this.checked=s?s[t]===e:!1};FieldMenuItem.id=0;
var project={saveToDatabase:function(){this.cleanseData(),$.ajax({type:"POST",url:"/api/tree",dataType:"json",data:{json:JSON.stringify(this.tree)}})},getCurrentVersion:function(e){$.ajax({type:"GET",url:"api/tree?projectID="+this.tree.projectID}).done(function(n){e(n.version)})},fields:function(){return this.tree.fields},cleanseData:function(){this.traverse(project.getChildren,function(e){e.children||(e.children=[]),delete e.parent,delete e.x,delete e.x0,delete e.y,delete e.y0})},addField:function(e){this.tree.fields.push(new Field(e))},getField:function(e){for(var n in this.tree.fields){var r=this.tree.fields[n];if(r.name===e)return r}},removeNode:function(e){var n=this.findParent(e.id);n?n.children.splice(n.children.indexOf(e),1):this.tree.children.splice(this.tree.children.indexOf(e),1)},addNode:function(e,n){n.children.push(e),project.setDepths(n)},setDepths:function(e){e.children.forEach(function(n,r){n.depth=e.depth+1,n.depth>project.tree.maxDepth&&(project.tree.maxDepth=n.depth),project.setDepths(n)})},insertNode:function(e,n){var r=this.findParent(n.id);r?r.children.splice(r.children.indexOf(n),0,e):this.tree.children.splice(this.tree.children.indexOf(n),0,e)},cloneNode:function(e){var n=$.extend(!0,{},e);return this.traverse(this.getChildren,function(e){e.id=project.tree.nextNodeID++},n),n},expandNode:function(e){project.isNodeCollapsed(e)&&(e.children=e._children,e._children=[])},fullyExpandNode:function(e){project.expandNode(e),e.children.forEach(function(e){project.fullyExpandNode(e)})},expandToLevel:function(e,n){if(e.depth<n){project.expandNode(e);for(var r in e.children)project.expandToLevel(e.children[r],n)}else{project.collapseNode(e);for(var r in e._children)project.expandToLevel(e._children[r],n)}},collapseNode:function(e){project.isNodeExpanded(e)&&(e._children=e.children,e.children=[])},fullyCollapseNode:function(e){e.children&&(e._children=e.children,e._children.forEach(project.fullyCollapseNode),e.children=[])},toggleExpansion:function(e){e.children?(e._children=e.children,e.children=[]):e._children&&(e.children=e._children,e._children=[])},hasChildren:function(e){return e.children&&0===e.children.length||e._children&&0===e._children.length},isNodeChildless:function(e){return!(e.children&&0!==e.children.length||e._children&&0!==e._children.length)},isNodeCollapsed:function(e){return e._children&&e._children.length>0},isNodeExpanded:function(e){return e.children&&e.children.length>0},findNode:function(e,n){if(n||(n=this.tree),n.id===e)return n;for(var r in n.children){var i=this.findNode(e,n.children[r]);if(i)return i}},findParent:function(e,n,r){if(n||(n=this.tree),n.id===e)return r;for(var i in n.children){var t=this.findParent(e,n.children[i],n);if(t)return t}},traverse:function(e,n,r){r||(r=project.tree),n(r);var i=e(r);for(var t in i)project.traverse(e,n,i[t])},traverseDescendants:function(e,n,r){r||(r=project.tree),r.children.forEach(function(r){project.traverse(e,n,r)})},getChildren:function(e){return e.children&&e.children.length>0?e.children:null}};
var projects={init:function(e){$.ajax({type:"GET",url:"api/projects"}).done(function(t){this.data=t,e(t.projects)})},createNewProject:function(e){$.ajax({type:"POST",url:"/api/addProject?projectName="+e}),project.tree={projectID:project.nextProjectID,projectName:e,name:e,version:1,nextNodeID:3,depth:0,id:1,fields:[],children:[{id:2,name:e,depth:1,children:[]}]},project.saveToDatabase()},openProject:function(e,t){$.ajax({type:"GET",url:"api/tree?projectID="+e}).done(function(e){t(e)})},openProjectVersion:function(e,t,o){$.ajax({type:"GET",url:"api/version?projectID="+e+"&version="+t}).done(function(e){o(e)})}};
var DOWN_ARROW_IMAGE_PATH="images/down-arrow.png",CHECK_MARK_IMAGE_PATH="images/checkmark.png",BLANK_MARK_IMAGE_PATH="images/blankmark.png",ENTER_KEY=13,KEY_UP_ARROW=38,KEY_DOWN_ARROW=40,KEY_LEFT_ARROW=37,KEY_RIGHT_ARROW=39,DEFAULT_NODE_INPUT_WIDTH=390,SPREADSHEET_VIEW="0",TREE_VIEW="1",WEIGHTED_TREE_VIEW="2",CIRCLE_VIEW="3";
function debug(){}debug.print=function(n){console.log(JSON.stringify(n,null,"	"))},debug.printTree=function(){console.log(JSON.stringify(project.tree,null,"	"))};
var circleView={destroy:function(){$("#circleView").remove()},display:function(){function t(t){s=t;var l=d3.transition().duration(d3.event.altKey?7500:750).tween("zoom",function(t){var l=d3.interpolateZoom(n,[s.x,s.y,2*s.r+r]);return function(t){e(l(t))}});l.selectAll("text").filter(function(t){return t.parent===s||"inline"===this.style.display}).style("fill-opacity",function(t){return t.parent===s?1:0}).each("start",function(t){t.parent===s&&(this.style.display="inline")}).each("end",function(t){t.parent!==s&&(this.style.display="none")})}function e(t){var e=l/t[2];n=t,p.attr("transform",function(n){return"translate("+(n.x-t[0])*e+","+(n.y-t[1])*e+")"}),u.attr("r",function(t){return t.r*e})}$("body").append('<div id="circleView"></div>');var n,r=20,l=960,a=d3.scale.linear().domain([-1,5]).range(["hsl(152,80%,80%)","hsl(228,30%,40%)"]).interpolate(d3.interpolateHcl),i=d3.layout.pack().padding(2).size([l-r,l-r]).value(function(t){return Math.PI*t.values.A*t.values.A/4}),c=d3.select("#circleView").append("svg").attr("width",l).attr("height",l).append("g").attr("transform","translate("+l/2+","+l/2+")"),o=project.tree,s=o,d=i.nodes(o),u=c.selectAll("circle").data(d).enter().append("circle").attr("class",function(t){return t.parent?t.children?"node":"node node--leaf":"node node--root"}).style("fill",function(t){return t.children?a(t.depth):null}).on("click",function(e){s!==e&&(t(e),d3.event.stopPropagation())}),p=(c.selectAll("text").data(d).enter().append("text").attr("class","label").style("fill-opacity",function(t){return t.parent===o?1:0}).style("display",function(t){return t.parent===o?null:"none"}).text(function(t){return t.name}),c.selectAll("circle,text"));d3.select("body").style("background",a(-1)).on("click",function(){t(o)}),e([o.x,o.y,2*o.r+r]),d3.select(self.frameElement).style("height",l+"px")}};
var expanderSelector={init:function(e){$("#expanderContainer").html(expanderSelector.getMarkup(e)),$("#expanderSelector").change(expanderSelector.handle)},handle:function(){var e=parseInt($("#expanderSelector").val());e>0&&hms.expandToLevel(e)},getMarkup:function(e){for(var n='<div id="expanderSelectContainer"><select id="expanderSelector" class="form-control"><option value="0">Expand/Collapse to Level</option>',t=1;e+1>t;t++)n+='<option value="'+t+'">'+t+"</option>";return n+='</select><input id="projectActionInput" class="form-control"></input></div>'}};
var fieldMenuView={render:function(e,d,i){var n='<div id="fieldMenu" style="left:'+(d-10)+"px;top:"+(i-10)+'px;">';n+=this.renderMenu(e),n+="</div>",$("body").append($(n)),$("#fieldMenu").mouseleave(function(){$("#fieldMenu").remove()})},renderMenu:function(e){var d="<ul>";return e.items.forEach(function(e){d+='<li onclick="fieldMenuController.handleClick('+e.id+');">';var i="uncheckedFieldMenuItem";e.field&&e.checked&&(i="checkedFieldMenuItem"),d+='<img id="FieldMenuItem'+e.id+'" src="'+CHECK_MARK_IMAGE_PATH+'" class="'+i+'"/>',d+=e.display,e.items&&e.items.length>0&&(d+='<div class="arrowRight"></div>',d+=fieldMenuView.renderMenu(e)),d+="</li>"}),d+"</ul>"},setCheckmarks:function(e,d){d.forEach(function(e){$("#FieldMenuItem"+e.id).removeClass("checkedFieldMenuItem").addClass("uncheckedFieldMenuItem")}),$("#FieldMenuItem"+e).removeClass("uncheckedFieldMenuItem").addClass("checkedFieldMenuItem")}};
var headerView={render:function(e){console.log("render");var t='<select id="projectSelector" class="form-control"><option id="selectProjectOption" value="0">Select Project...</option>';e.forEach(function(e){t+='<option value="'+e.id+'">'+e.name+"</option>"}),t+='<option id="newProjectOption" value="-1">Create New Project...</option></select><input id="editNewProjectNameInput" class="form-control"></input>',t+='<a href="#" id="save-database-button" class="btn btn-default">Save to Database</a>',t+='<select id="viewSelector" class="form-control"><option value="0">Spread Sheet</option><option value="1">Tree</option><option value="2">Weighted Tree</option><option value="3">Circle Packing</option></select>',$("#header").html(t),$("#viewSelector").hide(),$("#save-database-button").hide(),$("#projectSelector").change(function(){headerView.selectProject($(this))}),$("#editNewProjectNameInput").keyup(function(e){headerView.createNewProject(e)}),$("#save-database-button").click(function(){hms.openSaveDBDialog()}),$("#viewSelector").change(function(){hms.selectView($(this).val())})},refresh:function(e){console.log("refresh"),$("#versionSelector").remove();var t='<select id="versionSelector" class="form-control">';e.forEach(function(e){t+='<option value="'+e.version+'">'+e.version+"</option>"}),t+="</select>",$("#header").append(t),$("#viewSelector").show(),$("#save-database-button").show(),$("#versionSelector").change(function(){hms.selectVersion($(this).val())})},selectedView:function(){return $("#viewSelector").val()},selectProject:function(e){"newProjectOption"===e.find(":selected").attr("id")?($("#editNewProjectNameInput").val("Type New Project Name and Press Enter to Create"),$("#editNewProjectNameInput").show().focus().select()):($("#selectProjectOption").remove(),hms.openProject(e.val()))},createNewProject:function(e){if(e.keyCode==ENTER_KEY){$("#selectProjectOption").remove();var t=$("#editNewProjectNameInput").val();$("#editNewProjectNameInput").hide();var o=hms.nextProjectID(),n=document.createElement("option");n.text=t,n.value=o.toString(),$(n).insertBefore("#projectSelector option:nth-child("+$("#projectSelector").length+")"),$("#projectSelector").val(o),hms.createNewProject(t)}}};
var projectAction={init:function(){$("#project-action-container").html(projectAction.markup()),$("#projectActionInput").keyup(function(t){t.keyCode==ENTER_KEY&&projectAction.enterPressed()}),$("#projectActionSelector").change(projectAction.handle)},handle:function(){"addField"==$("#projectActionSelector").val()&&($("#projectActionInput").val("Type New Field Name and Press Enter to Create"),$("#projectActionInput").show().focus().select())},enterPressed:function(){"addField"==$("#projectActionSelector").val()&&(spreadSheet.addField($("#projectActionInput").val()),$("#projectActionInput").hide(),$("#projectActionSelector").val("blank"))},markup:function(){return'<div id="projectActionSelectorContainer"><select id="projectActionSelector" class="form-control"><option value="blank"></option><option value="addField">Add Field</option></select><input id="projectActionInput" class="form-control"></input></div>'}};
var saveDBDialog={render:function(a,e,o,l){$("#saveDBDialog").remove(),$("body").append('<div class="modal fade" id="saveDBDialog" role="dialog"></div>'),$("#saveDBDialog").append('<div class="modal-dialog"><div id="saveDBDialogContent" class="modal-content"></div></div>'),$("#saveDBDialogContent").append('<div class="modal-header" style="padding:15px 30px;"><button type="button" class="close" data-dismiss="modal">&times;</button><h4>Save Project Changes to Database</h4></div>'),$("#saveDBDialogContent").append('<div id="saveDBDialogBody" class="modal-body" style="padding:40px 50px;"></div>'),$("#saveDBDialogBody").append("<div><label>Base Version: "+a+" - "+o+" - "+e+"</label></div>"),$("#saveDBDialogBody").append('<div style="margin-top:20px"><label>New Version:  '+l+"</label></div><div></div>"),$("#saveDBDialogBody").append('<div ><label for="versionLabel">New Version Label</label>'),$("#saveDBDialogBody").append('<input type="text" class="form-control" id="versionLabel"></div>'),$("#saveDBDialogBody").append('<div style="margin-top:20px"><label for="reasonForChange">Reason for Changes</label>'),$("#saveDBDialogBody").append('<textarea style="resize:none" class="form-control" rows="5" id="reasonForChange"></textarea></div>'),$("#saveDBDialogContent").append('<div id="saveDBDialogFooter" class="modal-footer"></div>'),$("#saveDBDialogFooter").append('<button style="margin-left:10px" class="btn btn-danger btn-default pull-right" data-dismiss="modal">Cancel</button>'),$("#saveDBDialogFooter").append('<button id="saveDBDialogSaveButton" class="btn btn-info btn-default pull-right" data-dismiss="modal">Save</button>'),$("#saveDBDialogSaveButton").click(function(){hms.saveToDatabase()}),$("#saveDBDialog").modal()}};
var spreadSheetKeyHandler={checkKey:function(e){if(e=e||window.event,e.keyCode==KEY_UP_ARROW){e.preventDefault();var t=$(spreadSheetKeyHandler.findAncestor(document.activeElement,"tr")).prev()[0];t&&$("#"+spreadSheetKeyHandler.getNextElementID(t)).focus()}else if(e.keyCode==KEY_DOWN_ARROW){e.preventDefault();var n=$(spreadSheetKeyHandler.findAncestor(document.activeElement,"tr")).next()[0];n&&$("#"+spreadSheetKeyHandler.getNextElementID(n)).focus()}else e.keyCode==KEY_RIGHT_ARROW?(e.preventDefault(),$(spreadSheetKeyHandler.findAncestor(document.activeElement,"td")).next().find("input").focus()):e.keyCode==KEY_LEFT_ARROW&&(e.preventDefault(),$(spreadSheetKeyHandler.findAncestor(document.activeElement,"td")).prev().find("input").focus())},getNextElementID:function(e){var t=document.activeElement.id;if(t.indexOf("nodeInput")>-1)return"nodeInput"+e.id.replace("rowid","");for(var n=document.activeElement.className.split(" "),r=0;r<n.length;r++){var d=n[r];if(d.indexOf("fieldInput")>-1&&"fieldInput"!=d){var a=d.replace("fieldInput","");return a+e.id.replace("datarowid","")}}},findAncestor:function(e,t){for(t=t.toLowerCase();e&&e.parentNode;)if(e=e.parentNode,e.tagName&&e.tagName.toLowerCase()===t)return e}};
var spreadSheetView={render:function(){$(document).on("keydown",spreadSheetKeyHandler.checkKey),$("#spreadSheetView").remove(),$("body").append(this.spreadSheetMarkup()),projectAction.init(),this.renderExpander(),this.renderFieldsRow(),this.renderDataTable(),this.renderNodeColumn()},destroy:function(){$("#spreadSheetView").remove(),$(document).off("keydown")},spreadSheetMarkup:function(){return'<div id="spreadSheetView"><div id="spreadSheetViewActions"><div id="project-action-container"></div><div id="expanderContainer"></div></div><div id="fields-header-row"></div><div id="redips-drag"></div><div id="data-container"></div></div>'},renderExpander:function(){expanderSelector.init(spreadSheet.tree().maxDepth)},renderFieldsRow:function(){$("#fields-header-row").html('<table id="fieldHeaderTable"><tr id="fieldHeaderRow"></tr></table>'),spreadSheet.fields().forEach(function(e){$("#fieldHeaderRow").append(spreadSheetView.fieldHeader(e.name)),$("#fieldMenuButton"+e.name).click(function(d){spreadSheetView.showFieldMenu(d,e.name)})}),$("#fields-header-row").css("right",scrollBarWidth+"px")},fieldHeader:function(e){return'<td class="fieldHeaderCell"><div class="fieldHeaderContainer"><div class="moveColGrip"></div><div class="fieldNameInputContainer"><textarea id="colHeaderInput'+e+'" class="fieldNameInput">'+e+'</textarea></div><div class="fieldHeaderButton"><img id="fieldMenuButton'+e+'" src="images/down-arrow.png"/></div><div id="grip'+e+'" class="resizeColGrip" onmousedown="startResize(event, this)"></div></div></td>'},showFieldMenu:function(e,d){0===$("#fieldMenu").length&&fieldMenuController.displayFieldMenu(d,e.clientX,e.clientY)},renderDataTable:function(){$("#data-container").append('<table id="dataTable"></table>'),spreadSheet.tree().children.forEach(function(e){$("#dataTable").append(spreadSheetView.dataRowsMarkup(e))}),$("#data-container").scroll(function(){$("#redips-drag").scrollTop($("#data-container").scrollTop()),$("#fields-header-row").scrollLeft($("#data-container").scrollLeft())})},dataRowsMarkup:function(e){var d='<tr id="datarowid'+e.id+'" class="dataRow">';return spreadSheet.fields().forEach(function(t){d+='<td class="cell"><input class="fieldInput fieldInput'+t.name+'" type="text" id="'+t.name+e.id+'" value="'+spreadSheet.formattedValue(t,e)+'" oninput="spreadSheet.updateFieldValue(\''+t.name+"',"+e.id+')" onfocus="$(this).val(spreadSheet.rawValue(\''+t.name+"',"+e.id+'))"></td>'}),e.children.forEach(function(e){d+=spreadSheetView.dataRowsMarkup(e)}),d+"</tr>"},renderDataCell:function(e,d,t,n){$(e).append(spreadSheetView.fieldCell(d,t,n)),$("#"+d+t).on("input",function(){spreadSheet.updateFieldValue(d,t)}),$("#"+d+t).focus(function(){$(this).val(spreadSheet.rawValue(d,t))})},fieldCell:function(e,d,t){return'<td class="cell"><input class="fieldInput fieldInput'+e+'" type="text" id="'+e+d+'" value="'+t+'"></td>'},nodeRowMarkup:function(e){var d='<tr id="rowid'+e.id+'" class="nodeRow"><td class="redips-rowhandler cell"><div id="nodeContent'+e.id+'" class="node-container">';return d+=spreadSheetView.deleteButton(e.id)+spreadSheetView.copyButton(e.id)+spreadSheetView.dragHandle,d+=spreadSheetView.nodeContent(e),e.children.forEach(function(e){d+=spreadSheetView.nodeRowMarkup(e)}),d+"</div></td></tr>"},nodeContent:function(e){var d,t=10*(e.depth-1),n=t;return spreadSheet.hasChildren(e)?d=spreadSheet.childrenHidden(e)?'<span class="glyphicon glyphicon-chevron-right"></span>':'<span class="glyphicon glyphicon-chevron-down"></span>':(d="<span></span>",t+=12,n-=10),spreadSheetView.expandIcon(e.id,t,d)+spreadSheetView.nodeInput(e,DEFAULT_NODE_INPUT_WIDTH-n)},renderNodeColumn:function(){$("#redips-drag").html('<table id="treeTable"></table>'),spreadSheet.tree().children.forEach(function(e){$("#treeTable").append(spreadSheetView.nodeRowMarkup(e))}),$("#redips-drag").css("bottom",scrollBarWidth+"px"),redips.init()},dragHandle:'<div class="redips-drag pull-right"><i class="glyphicon glyphicon-move"></i></div>',copyButton:function(e){return'<a href="#"  class="pull-right btn btn-info btn-xs copy-button" onclick="spreadSheet.copyNode('+e+')"><i class="glyphicon glyphicon-plus"></i></a>'},deleteButton:function(e){return'<a href="#" class="pull-right btn btn-danger btn-xs delete-button" onclick="spreadSheet.deleteNode('+e+')"><i class="glyphicon glyphicon-remove"></i></a>'},expandIcon:function(e,d,t){return'<a href="#" id="icon'+e+'" class="btn btn-xs" style="margin-left:'+d+'px" onclick="spreadSheet.toggleNode('+e+')">'+t+"</a>"},nodeInput:function(e,d){return'<input id="nodeInput'+e.id+'" class="nodeTextInput" style="width:'+d+'px" type="text" value="'+e.name+'" oninput="spreadSheetView.updateNodeName('+e.id+')"/>'},expandNode:function(e){for(var d,t=e.children.length-1;t>=0;t--)d=e.children[t],$(spreadSheetView.dataRowsMarkup(d)).insertAfter($("#datarowid"+e.id)),$(spreadSheetView.nodeRowMarkup(d)).insertAfter($("#rowid"+e.id));spreadSheetView.enableDragging(e)},redrawNodeContent:function(e){$("#icon"+e.id).remove(),$("#nodeInput"+e.id).remove(),$("#nodeContent"+e.id).append(spreadSheetView.nodeContent(e))},addField:function(e){$("#fieldHeaderRow").append(spreadSheetView.fieldHeader(e)),$("#fieldMenuButton"+e).click(function(d){spreadSheetView.showFieldMenu(d,e)}),$(".dataRow").each(function(d,t){spreadSheetView.renderDataCell(t,e,parseInt(t.id.replace("datarowid","")),"")})},updateNodeName:function(e){var d=$("#nodeInput"+e).val();spreadSheet.updateNodeName(e,d),$("#nodeInput"+e).attr("value",d)},removeNode:function(e){$("#rowid"+e.id).remove(),$("#datarowid"+e.id).remove()},insertNodeBefore:function(e,d){$(spreadSheetView.nodeRowMarkup(e)).insertBefore($("#rowid"+d.id)),$(spreadSheetView.dataRowsMarkup(e)).insertBefore($("#datarowid"+d.id)),spreadSheetView.enableDragging(e)},insertNodeAfter:function(e,d){$(spreadSheetView.nodeRowMarkup(e)).insertAfter($("#rowid"+d.id)),$(spreadSheetView.dataRowsMarkup(e)).insertAfter($("#datarowid"+d.id)),spreadSheetView.enableDragging(e)},enableDragging:function(e){REDIPS.drag.enableDivs("init",$("#rowid"+e.id).find("div"))},getFieldValue:function(e,d){return $("#"+e+d).val()},updateFieldValue:function(e,d,t){$("#"+e+d).val(t)}};
var MIN_NODE_SIZE=5,MAX_NODE_SIZE=100,VERTICAL_VIEW=0,HORIZONTAL_VIEW=1,treeView={destroy:function(){$("#treeView").remove()},refresh:function(){treeView.update(treeView.root)},rotate:function(){treeView.direction===HORIZONTAL_VIEW?(treeView.direction=VERTICAL_VIEW,treeView.horizontal_spacing=100,treeView.vertical_spacing=60,treeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.x,e.y]}),treeView.root.y0=treeView.viewerHeight/2,treeView.root.x0=0):(treeView.direction=HORIZONTAL_VIEW,treeView.horizontal_spacing=150,treeView.vertical_spacing=25,treeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]}),treeView.root.x0=treeView.viewerHeight/2,treeView.root.y0=0),treeView.update(treeView.root)},init:function(){treeView.direction=HORIZONTAL_VIEW,treeView.selectedNode=null,treeView.draggingNode=null,treeView.duration=750,treeView.horizontal_spacing=150,treeView.vertical_spacing=25,treeView.maxLabelLength=0,project.traverse(project.getChildren,function(e){treeView.maxLabelLength=Math.max(e.name.length,treeView.maxLabelLength)}),treeView.viewerWidth=$("#tree-container").width(),treeView.viewerHeight=$("#tree-container").height(),treeView.tree=d3.layout.tree().size([treeView.viewerHeight,treeView.viewerWidth]),treeView.root=project.tree,treeView.dragStarted=null,treeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]})},render:function(){function e(){treeView.svgGroup.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function t(e,t){treeView.draggingNode=e,d3.select(t).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(t).attr("class","node activeDrag"),treeView.svgGroup.selectAll("g.node").sort(function(e,t){return e.id!=treeView.draggingNode.id?1:-1}),nodes.length>1&&(links=treeView.tree.links(nodes),nodePaths=treeView.svgGroup.selectAll("path.link").data(links,function(e){return e.target.id}).remove(),nodesExit=treeView.svgGroup.selectAll("g.node").data(nodes,function(e){return e.id}).filter(function(e,t){return e.id!=treeView.draggingNode.id}).remove()),parentLink=treeView.tree.links(treeView.tree.nodes(treeView.draggingNode.parent)),treeView.svgGroup.selectAll("path.link").filter(function(e,t){return e.target.id==treeView.draggingNode.id}).remove(),treeView.dragStarted=null}function r(e){e!=treeView.root&&(treeView.dragStarted&&(domNode=this,t(e,domNode)),e.x0+=d3.event.dy,e.y0+=d3.event.dx,d3.select(this).attr("transform","translate("+e.y0+","+e.x0+")"),treeView.updateTempConnector())}treeView.destroy(),$("body").append('<div id="treeView"><div id="treeViewOptions"><div id="expanderContainer"></div></div><div id="tree-container"></div></div>'),expanderSelector.init(project.tree.maxDepth),$("#treeViewOptions").append('<a href="#" id="treeViewRotateButton" class="btn btn-default pull-right">Rotate View</a>'),$("#treeViewRotateButton").click(function(){treeView.rotate()}),treeView.init(),treeView.zoomListener=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",e);var i=d3.select("#tree-container").append("svg").attr("width",treeView.viewerWidth).attr("height",treeView.viewerHeight).attr("class","overlay").call(treeView.zoomListener);dragListener=d3.behavior.drag().on("dragstart",treeView.dragstart).on("drag",r).on("dragend",treeView.dragend),treeView.svgGroup=i.append("g"),treeView.root.x0=treeView.viewerHeight/2,treeView.root.y0=0,treeView.update(treeView.root),treeView.centerNode(treeView.root)},click:function(e){d3.event.defaultPrevented||(project.toggleExpansion(e),treeView.update(e))},update:function(e){var t=0,r=[1],i=function(e,t){t.children&&t.children.length>0&&(r.length<=e+1&&r.push(0),r[e+1]+=t.children.length,t.children.forEach(function(t){i(e+1,t)}))};i(0,treeView.root);var n=d3.max(r)*treeView.vertical_spacing;treeView.tree=treeView.tree.size([n,treeView.viewerWidth]);var o=treeView.tree.nodes(treeView.root).reverse(),a=treeView.tree.links(o);o.forEach(function(e){e.y=e.depth*treeView.horizontal_spacing}),node=treeView.svgGroup.selectAll("g.node").data(o,function(e){return e.id||(e.id=++t)});var d=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(t){return"translate("+e.y0+","+e.x0+")"}).on("click",treeView.click);d.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"}),d.append("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}).style("fill-opacity",0),d.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(e){treeView.overCircle(e)}).on("mouseout",function(e){treeView.outCircle(e)}),node.select("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}),node.select("circle.nodeCircle").attr("r",function(e){return treeView.computeNodeSize(e)}).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"});var l;l=treeView.direction===VERTICAL_VIEW?node.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}):node.attr("transform",function(e){return"translate("+e.y+","+e.x+")"}),l.select("text").style("fill-opacity",1);var c=node.exit().attr("transform",function(t){return"translate("+e.y+","+e.x+")"}).remove();c.select("circle").attr("r",0),c.select("text").style("fill-opacity",0);var s=treeView.svgGroup.selectAll("path.link").data(a,function(e){return e.target.id});s.enter().insert("path","g").attr("class","link").attr("d",function(t){var r={x:e.x0,y:e.y0};return treeView.diagonal({source:r,target:r})}),s.attr("d",treeView.diagonal),s.exit().attr("d",function(t){var r={x:e.x,y:e.y};return treeView.diagonal({source:r,target:r})}).remove(),o.forEach(function(e){e.x0=e.x,e.y0=e.y})},dragstart:function(e){e!=treeView.root&&(treeView.dragStarted=!0,nodes=treeView.tree.nodes(e),d3.event.sourceEvent.stopPropagation())},dragend:function(e){e!=treeView.root&&(domNode=this,treeView.selectedNode&&(project.removeNode(treeView.draggingNode),treeView.selectedNode.children||(treeView.selectedNode.children=[]),treeView.selectedNode.children.push(treeView.draggingNode),project.expandNode(treeView.selectedNode)),treeView.selectedNode=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),treeView.updateTempConnector(),null!==treeView.draggingNode&&(treeView.update(treeView.root),treeView.draggingNode=null))},updateTempConnector:function(){var e=[];null!==treeView.draggingNode&&null!==treeView.selectedNode&&(e=[{source:{x:treeView.selectedNode.y0,y:treeView.selectedNode.x0},target:{x:treeView.draggingNode.y0,y:treeView.draggingNode.x0}}]);var t=treeView.svgGroup.selectAll(".templink").data(e);t.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),t.attr("d",d3.svg.diagonal()),t.exit().remove()},overCircle:function(e){treeView.selectedNode=e,treeView.updateTempConnector()},outCircle:function(e){treeView.selectedNode=null,treeView.updateTempConnector()},centerNode:function(e){scale=treeView.zoomListener.scale(),x=-e.y0,y=-e.x0,x=x*scale+treeView.viewerWidth/4,y=y*scale+treeView.viewerHeight/2,d3.select("g").attr("transform","translate("+x+","+y+")scale("+scale+")"),treeView.zoomListener.scale(scale),treeView.zoomListener.translate([x,y])},computeNodeSize:function(e){var t=MIN_NODE_SIZE;return t}};
var MIN_NODE_SIZE=5,MAX_NODE_SIZE=100,VERTICAL_VIEW=0,HORIZONTAL_VIEW=1,weightedTreeView={destroy:function(){$("#treeView").remove()},refresh:function(){weightedTreeView.update(weightedTreeView.root)},rotate:function(){weightedTreeView.direction===HORIZONTAL_VIEW?(weightedTreeView.direction=VERTICAL_VIEW,weightedTreeView.horizontal_spacing=100,weightedTreeView.vertical_spacing=60,weightedTreeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.x,e.y]}),weightedTreeView.root.y0=weightedTreeView.viewerHeight/2,weightedTreeView.root.x0=0):(weightedTreeView.direction=HORIZONTAL_VIEW,weightedTreeView.horizontal_spacing=300,weightedTreeView.vertical_spacing=200,weightedTreeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]}),weightedTreeView.root.x0=weightedTreeView.viewerHeight/2,weightedTreeView.root.y0=0),weightedTreeView.update(weightedTreeView.root)},init:function(){weightedTreeView.direction=HORIZONTAL_VIEW,weightedTreeView.selectedNode=null,weightedTreeView.draggingNode=null,weightedTreeView.duration=750,weightedTreeView.horizontal_spacing=300,weightedTreeView.vertical_spacing=200,weightedTreeView.maxLabelLength=0,project.traverse(project.getChildren,function(e){weightedTreeView.maxLabelLength=Math.max(e.name.length,weightedTreeView.maxLabelLength)}),weightedTreeView.viewerWidth=$("#tree-container").width(),weightedTreeView.viewerHeight=$("#tree-container").height(),weightedTreeView.tree=d3.layout.tree().size([weightedTreeView.viewerHeight,weightedTreeView.viewerWidth]),weightedTreeView.root=project.tree,weightedTreeView.dragStarted=null,weightedTreeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]})},render:function(){function e(){weightedTreeView.svgGroup.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function t(e,t){weightedTreeView.draggingNode=e,d3.select(t).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(t).attr("class","node activeDrag"),weightedTreeView.svgGroup.selectAll("g.node").sort(function(e,t){return e.id!=weightedTreeView.draggingNode.id?1:-1}),nodes.length>1&&(links=weightedTreeView.tree.links(nodes),nodePaths=weightedTreeView.svgGroup.selectAll("path.link").data(links,function(e){return e.target.id}).remove(),nodesExit=weightedTreeView.svgGroup.selectAll("g.node").data(nodes,function(e){return e.id}).filter(function(e,t){return e.id!=weightedTreeView.draggingNode.id}).remove()),parentLink=weightedTreeView.tree.links(weightedTreeView.tree.nodes(weightedTreeView.draggingNode.parent)),weightedTreeView.svgGroup.selectAll("path.link").filter(function(e,t){return e.target.id==weightedTreeView.draggingNode.id}).remove(),weightedTreeView.dragStarted=null}function i(e){e!=weightedTreeView.root&&(weightedTreeView.dragStarted&&(domNode=this,t(e,domNode)),e.x0+=d3.event.dy,e.y0+=d3.event.dx,d3.select(this).attr("transform","translate("+e.y0+","+e.x0+")"),weightedTreeView.updateTempConnector())}weightedTreeView.destroy(),$("body").append('<div id="treeView"><div id="treeViewOptions"><div id="expanderContainer"></div></div><div id="tree-container"></div></div>'),expanderSelector.init(project.tree.maxDepth),$("#treeViewOptions").append('<a href="#" id="treeViewRotateButton" class="btn btn-default pull-right">Rotate View</a>'),$("#treeViewRotateButton").click(function(){weightedTreeView.rotate()}),weightedTreeView.init(),weightedTreeView.zoomListener=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",e);var r=d3.select("#tree-container").append("svg").attr("width",weightedTreeView.viewerWidth).attr("height",weightedTreeView.viewerHeight).attr("class","overlay").call(weightedTreeView.zoomListener);dragListener=d3.behavior.drag().on("dragstart",weightedTreeView.dragstart).on("drag",i).on("dragend",weightedTreeView.dragend),weightedTreeView.svgGroup=r.append("g"),weightedTreeView.root.x0=weightedTreeView.viewerHeight/2,weightedTreeView.root.y0=0,weightedTreeView.update(weightedTreeView.root),weightedTreeView.centerNode(weightedTreeView.root)},click:function(e){d3.event.defaultPrevented||(project.toggleExpansion(e),weightedTreeView.update(e))},update:function(e){var t=0,i=[1],r=function(e,t){t.children&&t.children.length>0&&(i.length<=e+1&&i.push(0),i[e+1]+=t.children.length,t.children.forEach(function(t){r(e+1,t)}))};r(0,weightedTreeView.root);var d=d3.max(i)*weightedTreeView.vertical_spacing;weightedTreeView.tree=weightedTreeView.tree.size([d,weightedTreeView.viewerWidth]);var n=weightedTreeView.tree.nodes(weightedTreeView.root).reverse(),o=weightedTreeView.tree.links(n);n.forEach(function(e){e.y=e.depth*weightedTreeView.horizontal_spacing}),node=weightedTreeView.svgGroup.selectAll("g.node").data(n,function(e){return e.id||(e.id=++t)});var a=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(t){return"translate("+e.y0+","+e.x0+")"}).on("click",weightedTreeView.click);a.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"}),a.append("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}).style("fill-opacity",0),a.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(e){weightedTreeView.overCircle(e)}).on("mouseout",function(e){weightedTreeView.outCircle(e)}),node.select("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}),node.select("circle.nodeCircle").attr("r",function(e){return weightedTreeView.computeNodeSize(e)}).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"});var w;w=weightedTreeView.direction===VERTICAL_VIEW?node.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}):node.attr("transform",function(e){return"translate("+e.y+","+e.x+")"}),w.select("text").style("fill-opacity",1);var g=node.exit().attr("transform",function(t){return"translate("+e.y+","+e.x+")"}).remove();g.select("circle").attr("r",0),g.select("text").style("fill-opacity",0);var l=weightedTreeView.svgGroup.selectAll("path.link").data(o,function(e){return e.target.id});l.enter().insert("path","g").attr("class","link").attr("d",function(t){var i={x:e.x0,y:e.y0};return weightedTreeView.diagonal({source:i,target:i})}),l.attr("d",weightedTreeView.diagonal),l.exit().attr("d",function(t){var i={x:e.x,y:e.y};return weightedTreeView.diagonal({source:i,target:i})}).remove(),n.forEach(function(e){e.x0=e.x,e.y0=e.y})},dragstart:function(e){e!=weightedTreeView.root&&(weightedTreeView.dragStarted=!0,nodes=weightedTreeView.tree.nodes(e),d3.event.sourceEvent.stopPropagation())},dragend:function(e){e!=weightedTreeView.root&&(domNode=this,weightedTreeView.selectedNode&&(project.removeNode(weightedTreeView.draggingNode),weightedTreeView.selectedNode.children||(weightedTreeView.selectedNode.children=[]),weightedTreeView.selectedNode.children.push(weightedTreeView.draggingNode),project.expandNode(weightedTreeView.selectedNode)),weightedTreeView.selectedNode=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),weightedTreeView.updateTempConnector(),null!==weightedTreeView.draggingNode&&(weightedTreeView.update(weightedTreeView.root),weightedTreeView.draggingNode=null))},updateTempConnector:function(){var e=[];null!==weightedTreeView.draggingNode&&null!==weightedTreeView.selectedNode&&(e=[{source:{x:weightedTreeView.selectedNode.y0,y:weightedTreeView.selectedNode.x0},target:{x:weightedTreeView.draggingNode.y0,y:weightedTreeView.draggingNode.x0}}]);var t=weightedTreeView.svgGroup.selectAll(".templink").data(e);t.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),t.attr("d",d3.svg.diagonal()),t.exit().remove()},overCircle:function(e){weightedTreeView.selectedNode=e,weightedTreeView.updateTempConnector()},outCircle:function(e){weightedTreeView.selectedNode=null,weightedTreeView.updateTempConnector()},centerNode:function(e){scale=weightedTreeView.zoomListener.scale(),x=-e.y0,y=-e.x0,x=x*scale+weightedTreeView.viewerWidth/4,y=y*scale+weightedTreeView.viewerHeight/2,d3.select("g").attr("transform","translate("+x+","+y+")scale("+scale+")"),weightedTreeView.zoomListener.scale(scale),weightedTreeView.zoomListener.translate([x,y])},computeNodeSize:function(e){var t=MIN_NODE_SIZE;return tree.field&&(e.values&&e.values[tree.field.name]&&(t=MAX_NODE_SIZE*Math.sqrt(e.values[tree.field.name]/tree.maxFieldValue)),MIN_NODE_SIZE>t&&(t=MIN_NODE_SIZE)),t}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZy5qcyIsImRyYWctbGliLmpzIiwiZHJhZy5qcyIsInJlc2l6ZS1jb2x1bW4uanMiLCJjb250cm9sbGVyL2V4cGFuZGVyLmpzIiwiY29udHJvbGxlci9maWVsZE1lbnVDb250cm9sbGVyLmpzIiwiY29udHJvbGxlci9obXMuanMiLCJjb250cm9sbGVyL3NwcmVhZFNoZWV0LmpzIiwiY29udHJvbGxlci90cmVlLmpzIiwibW9kZWwvRmllbGQuanMiLCJtb2RlbC9GaWVsZE1lbnUuanMiLCJtb2RlbC9GaWVsZE1lbnVJdGVtLmpzIiwibW9kZWwvcHJvamVjdC5qcyIsIm1vZGVsL3Byb2plY3RzLmpzIiwidXRpbC9jb25zdGFudHMuanMiLCJ1dGlsL2RlYnVnLmpzIiwidmlldy9jaXJjbGVWaWV3LmpzIiwidmlldy9leHBhbmRlclNlbGVjdG9yLmpzIiwidmlldy9maWVsZE1lbnVWaWV3LmpzIiwidmlldy9oZWFkZXJWaWV3LmpzIiwidmlldy9wcm9qZWN0QWN0aW9uLmpzIiwidmlldy9zYXZlREJEaWFsb2cuanMiLCJ2aWV3L3NwcmVhZFNoZWV0S2V5SGFuZGxlci5qcyIsInZpZXcvc3ByZWFkU2hlZXRWaWV3LmpzIiwidmlldy90cmVlVmlldy5qcyIsInZpZXcvd2VpZ2h0ZWRUcmVlVmlldy5qcyJdLCJuYW1lcyI6WyJhZ2dyZWdhdGVfYW55Iiwibm9kZSIsImZpZWxkIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJjaGlsZHJlblN1bSIsImkiLCJ2YWx1ZXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJSRURJUFMiLCJkcmFnIiwiaW5pdCIsImVuYWJsZURyYWciLCJlbmFibGVEaXZzIiwiaGFuZGxlck9uTW91c2VEb3duIiwiaGFuZGxlck9uTW91c2VVcCIsImhhbmRsZXJPbk1vdXNlTW92ZSIsImVsZW1lbnREcm9wIiwicmVzZXRTdHlsZXMiLCJyZWdpc3RlckV2ZW50cyIsImNlbGxDaGFuZ2VkIiwiaGFuZGxlck9uUmVzaXplIiwic2V0VGFibGVSb3dDb2x1bW4iLCJzZXRQb3NpdGlvbiIsInNldFRkU3R5bGUiLCJnZXRUZFN0eWxlIiwiYm94T2Zmc2V0IiwiY2FsY3VsYXRlQ2VsbHMiLCJnZXRTY3JvbGxQb3NpdGlvbiIsImF1dG9TY3JvbGxYIiwiYXV0b1Njcm9sbFkiLCJjb3B5UHJvcGVydGllcyIsImNsb25lTGltaXQiLCJnZXRTdHlsZSIsImZpbmRQYXJlbnQiLCJyb3dPcGFjaXR5Iiwicm93Q2xvbmUiLCJyb3dEcm9wIiwibm9ybWFsaXplIiwiYmdTdHlsZU9sZCIsInRhYmxlIiwibW92ZWQiLCJjbG9uZWQiLCJ3aW5kb3dTY3JvbGxQb3NpdGlvbiIsIm9iak1hcmdpbiIsInNjcmVlbiIsIndpZHRoIiwiaGVpZ2h0Iiwic2Nyb2xsRGF0YSIsImNvbnRhaW5lciIsIm9iaiIsImVkZ2UiLCJwYWdlIiwieCIsInkiLCJkaXYiLCJmbGFnIiwiY2xvbmVkSWQiLCJjdXJyZW50Q2VsbCIsImRyYWdDb250YWluZXIiLCJkaXZCb3giLCJwb2ludGVyIiwidGhyZXNob2xkIiwic2hpZnRLZXkiLCJjbG9uZUNsYXNzIiwicm93Iiwicm93X29sZCIsInJvd19zb3VyY2UiLCJjZWxsIiwiY2VsbF9vbGQiLCJjZWxsX3NvdXJjZSIsIm9iak9sZCIsImhvdmVyIiwiY29sb3JUZCIsImNvbG9yVHIiLCJzY3JvbGwiLCJlbmFibGUiLCJib3VuZCIsInNwZWVkIiwic3R5bGUiLCJib3JkZXJEaXNhYmxlZCIsIm9wYWNpdHlEaXNhYmxlZCIsInJvd0VtcHR5Q29sb3IiLCJ0ZCIsImNsb25lIiwia2V5RGl2Iiwia2V5Um93Iiwic2VuZEJhY2siLCJkcm9wIiwiZXZlbnQiLCJjbG9uZWREcm9wcGVkIiwiY2xvbmVkRW5kMSIsImNsb25lZEVuZDIiLCJkcm9wcGVkIiwiZHJvcHBlZEJlZm9yZSIsImZpbmlzaCIsIm5vdENsb25lZCIsIm5vdE1vdmVkIiwicm93Q2hhbmdlZCIsInJvd0NsaWNrZWQiLCJyb3dDbG9uZWQiLCJyb3dEcm9wcGVkIiwicm93RHJvcHBlZEJlZm9yZSIsInJvd0Ryb3BwZWRTb3VyY2UiLCJyb3dNb3ZlZCIsInJvd05vdENsb25lZCIsInJvd05vdE1vdmVkIiwicmVkaXBzQ2xvbmUiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJyZWRpcHMiLCJhZGQiLCJ3aW5kb3ciLCJlIiwib2Zmc2V0IiwicG9zaXRpb24iLCJYIiwiWSIsImV2dCIsImNhbmNlbEJ1YmJsZSIsInN0b3BQcm9wYWdhdGlvbiIsImdldFNlbGVjdGlvbiIsInJlbW92ZUFsbFJhbmdlcyIsInNlbGVjdGlvbiIsInR5cGUiLCJlbXB0eSIsImVycm9yIiwiY2xpZW50WCIsImNsaWVudFkiLCJ0aGlzIiwiY2xhc3NOYW1lIiwiaW5kZXhPZiIsImN1cnJlbnQiLCJwYXJlbnROb2RlIiwiZWwiLCJ0YWJsZU1pbmkiLCJyb3dPYmoiLCJub2RlTmFtZSIsInVuZGVmaW5lZCIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsInNvdXJjZVJvdyIsInJvd3MiLCJyb3dJZHgiLCJ0ck1pbmkiLCJkZWxldGVUYWJsZVJvdyIsInRibCIsImVtcHR5Um93IiwiZGVsZXRlUm93Iiwicm93SW5kZXgiLCJ0YWJsZVJvdyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicmVtb3ZlQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsInJfcm93IiwibXRfdHIiLCJyZW1vdmUiLCJvbnNlbGVjdHN0YXJ0IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsV2lkdGgiLCJzY3JvbGxIZWlnaHQiLCJ0YXJnZXQiLCJjZWxscyIsImJhY2tncm91bmRDb2xvciIsImNsb25lU291cmNlRGl2Iiwib25tb3VzZWRvd24iLCJ0b3AiLCJsZWZ0IiwiekluZGV4Iiwic2NhIiwiZGVsdGFYIiwiZGVsdGFZIiwic2Nyb2xsUG9zaXRpb24iLCJNYXRoIiwiYWJzIiwiY29udGFpblRhYmxlIiwicGFnZVlPZmZzZXQiLCJzY3JvbGxUb3AiLCJhdXRvc2Nyb2xsIiwibWlkc3RYIiwibWlkc3RZIiwicHJldmlvdXMiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJyb3dfb2Zmc2V0Iiwicm93X2ZvdW5kIiwidG9zIiwib2Zmc2V0SGVpZ2h0IiwicmkiLCJ0IiwidHIiLCJzIiwiY29sb3IiLCJ0b1N0cmluZyIsImJvcmRlclRyIiwiYm9yZGVyVG9wIiwiYm9yZGVyQm90dG9tIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJUb3BTdHlsZSIsImJvcmRlclRvcENvbG9yIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3R0b20iLCJib3JkZXJCb3R0b21TdHlsZSIsImJvcmRlckJvdHRvbUNvbG9yIiwiYyIsInJpZ2h0IiwiYm9yZGVyIiwibmFtZSIsImJveCIsImJveF9zY3JvbGwiLCJvTGVmdCIsIm9Ub3AiLCJib3hPbGQiLCJvZmZzZXRMZWZ0Iiwic2Nyb2xsTGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsIm9mZnNldFdpZHRoIiwiY2IiLCJkaXNwbGF5Iiwic2Nyb2xsWSIsInNjcm9sbFgiLCJzbyIsInBvcyIsIm9sZCIsIm1heHNwIiwiZWRnZUNyb3NzZWQiLCJjbGllbnRXaWR0aCIsInNjcm9sbEJ5IiwicGFyc2VJbnQiLCJpc05hTiIsInNldFRpbWVvdXQiLCJjbGllbnRIZWlnaHQiLCJzcmMiLCJjbG4iLCJjaGlsZHMiLCJjb3B5IiwiZTEiLCJlMiIsImVuYWJsZWQiLCJlbDEiLCJlbDIiLCJ0biIsIm1hdGNoQXJyYXkiLCJsaW1pdFR5cGUiLCJsaW1pdCIsImNsYXNzZXMiLCJtYXRjaCIsInJlcGxhY2UiLCJlbmFibGVfZmxhZyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJqIiwiayIsImJvcmRlclN0eWxlIiwib3BhY2l0eSIsImN1cnNvciIsIm92ZXJmbG93IiwidGJscyIsInJlZ2V4RHJhZyIsInJlZ2V4Tm9BdXRvc2Nyb2xsIiwiYm9yZGVyRW5hYmxlZCIsInRlc3QiLCJmaWx0ZXIiLCJzdHlsZV9uYW1lIiwiY3VycmVudFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRlZmF1bHRWaWV3IiwidGFnX25hbWUiLCJzdHIiLCJ0ZE5vZGVMaXN0IiwiY2hpbGROb2RlcyIsIm5vZGVUeXBlIiwiZXZlbnROYW1lIiwiaGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZXRhY2hFdmVudCIsInJkIiwibmV3UGFyZW50Um93IiwibW92ZWRJRCIsIm5ld1BhcmVudElEIiwic3ByZWFkU2hlZXQiLCJtb3ZlTm9kZSIsInJvd0RlbGV0ZWQiLCJyb3dVbmRlbGV0ZWQiLCJyZXNpemVDb2x1bW5MZWZ0IiwicmVzaXplRmllbGQiLCJNSU5fQ09MVU1OX1dJRFRIIiwiR1JJUFNfV0lEVEgiLCJzdGFydFJlc2l6ZSIsImdyaXAiLCIkIiwiYmluZCIsInJlc2l6ZURyYWciLCJyZXNpemVFbmQiLCJ2aXNpYmlsaXR5IiwicGFnZVgiLCJ1bmJpbmQiLCJuZXdXaWR0aCIsImNvbHVtbkNlbGxzIiwiZmllbGRNZW51Q29udHJvbGxlciIsImRpc3BsYXlGaWVsZE1lbnUiLCJmaWVsZE5hbWUiLCJwcm9qZWN0IiwiZ2V0RmllbGQiLCJtZW51IiwiRmllbGRNZW51IiwiZmllbGRzIiwiZmllbGRNZW51VmlldyIsInJlbmRlciIsImhhbmRsZUNsaWNrIiwibWVudUl0ZW1JRCIsImNsaWNrZWQiLCJnZXRNZW51SXRlbSIsInBhcmVudCIsImdldE1lbnVJdGVtUGFyZW50IiwidmFyTmFtZSIsInNldENoZWNrbWFya3MiLCJpdGVtcyIsInVwZGF0ZU51bWJlckZpZWxkRm9ybWF0dGluZyIsInJlYWR5Iiwic2Nyb2xsQmFyV2lkdGgiLCJnZXRTY3JvbGxCYXJXaWR0aCIsImhtcyIsInByb2plY3RzIiwiaGVhZGVyVmlldyIsIm9wZW5Qcm9qZWN0IiwicHJvamVjdElEIiwidHJlZSIsImFqYXgiLCJ1cmwiLCJkb25lIiwidmVyc2lvbnMiLCJyZWZyZXNoIiwiSlNPTiIsInBhcnNlIiwic2VsZWN0VmlldyIsInNlbGVjdGVkVmlldyIsIm9wZW5TYXZlREJEaWFsb2ciLCJnZXRDdXJyZW50VmVyc2lvbiIsImN1cnJlbnRWZXJzaW9uIiwic2F2ZURCRGlhbG9nIiwidmVyc2lvbiIsInZlcnNpb25MYWJlbCIsInZlcnNpb25EYXRlIiwic2F2ZVRvRGF0YWJhc2UiLCJ2aWV3SUQiLCJ2aWV3IiwiZGVzdHJveSIsInNob3dWaWV3Iiwic2VsZWN0VmVyc2lvbiIsIm9wZW5Qcm9qZWN0VmVyc2lvbiIsIlNQUkVBRFNIRUVUX1ZJRVciLCJzcHJlYWRTaGVldFZpZXciLCJUUkVFX1ZJRVciLCJ0cmVlVmlldyIsImRpc3BsYXlUcmVlIiwiV0VJR0hURURfVFJFRV9WSUVXIiwid2VpZ2h0ZWRUcmVlVmlldyIsImRpc3BsYXlXZWlnaHRlZFRyZWUiLCJDSVJDTEVfVklFVyIsImNpcmNsZVZpZXciLCJjcmVhdGVOZXdQcm9qZWN0IiwibmV3UHJvamVjdE5hbWUiLCJuZXh0UHJvamVjdElEIiwiZXhwYW5kVG9MZXZlbCIsImxldmVsIiwiZmlyc3RDaGlsZCIsImJvZHkiLCJjbGVhbnNlRGF0YSIsInVwZGF0ZUZpZWxkVmFsdWUiLCJub2RlSUQiLCJmaW5kTm9kZSIsImdldEZpZWxkVmFsdWUiLCJmb3JFYWNoIiwiY2hpbGQiLCJyYXdWYWx1ZSIsImZvcm1hdHRlZFZhbHVlIiwiRmllbGQiLCJmb3JtYXRWYWx1ZSIsImFkZEZpZWxkIiwiaGFzQ2hpbGRyZW4iLCJpc05vZGVDaGlsZGxlc3MiLCJjaGlsZHJlbkhpZGRlbiIsImlzTm9kZUNvbGxhcHNlZCIsIm5ld1BhcmVudE5vZGUiLCJyZW1vdmVOb2RlIiwiYWRkTm9kZSIsInRyYXZlcnNlIiwiZ2V0Q2hpbGRyZW4iLCJyZWRyYXdOb2RlQ29udGVudCIsImRlbGV0ZU5vZGUiLCJleHBhbmROb2RlIiwiaW5zZXJ0Tm9kZUFmdGVyIiwicmVuZGVyRXhwYW5kZXIiLCJjb3B5Tm9kZSIsInNvdXJjZU5vZGUiLCJuZXdOb2RlIiwiY2xvbmVOb2RlIiwiaW5zZXJ0Tm9kZSIsImluc2VydE5vZGVCZWZvcmUiLCJjb2xsYXBzZU5vZGUiLCJ0cmF2ZXJzZURlc2NlbmRhbnRzIiwidG9nZ2xlTm9kZSIsImlzTm9kZUV4cGFuZGVkIiwidXBkYXRlTm9kZU5hbWUiLCJuZXdOYW1lIiwiTnVtYmVyIiwiZW5hYmxlRHJhZ2dpbmciLCJkYXRhIiwibWF4RmllbGRWYWx1ZSIsImNhbGNNYXhGaWVsZFZhbHVlIiwibWF4VmFsdWUiLCJORUdBVElWRV9JTkZJTklUWSIsImRhdGF0eXBlIiwiTlVNQkVSIiwiZm9ybWF0IiwiTlVNQkVSX0ZPUk1BVCIsInByZWNpc2lvbiIsImFnZ190eXBlIiwiTk9fQUdHUkVHQVRJT04iLCJhZ2dfcXR5X2ZpZWxkIiwiU1RSSU5HIiwiQ0hPSUNFIiwiU1VNX0FOWV9BR0dSRUdBVElPTiIsIlBFUkNFTlRfRk9STUFUIiwiU0NJRU5USUZJQ19GT1JNQVQiLCJ0b0ZpeGVkIiwidG9FeHBvbmVudGlhbCIsIm51bWJlckl0ZW0iLCJGaWVsZE1lbnVJdGVtIiwiZm9ybWF0SXRlbSIsIm51bWJlckZvcm1hdEl0ZW0iLCJwdXNoIiwiZGlzcGxheVN0cmluZyIsInBlcmNlbnRGb3JtYXRJdGVtIiwic2NpZW50aWZpY0Zvcm1hdEl0ZW0iLCJhZ2dyZWdhdGlvbkl0ZW0iLCJzdW1BbnlBZ2dJdGVtIiwiaW5kZXgiLCJmIiwicHJvdG90eXBlIiwibWVudUl0ZW0iLCJmb3VuZCIsImNoZWNrZWQiLCJkYXRhVHlwZSIsImpzb24iLCJzdHJpbmdpZnkiLCJmaW5pc2hGbiIsIngwIiwieTAiLCJzcGxpY2UiLCJzZXREZXB0aHMiLCJkZXB0aCIsIm1heERlcHRoIiwiZXh0ZW5kIiwibmV4dE5vZGVJRCIsIl9jaGlsZHJlbiIsImZ1bGx5RXhwYW5kTm9kZSIsImZ1bGx5Q29sbGFwc2VOb2RlIiwidG9nZ2xlRXhwYW5zaW9uIiwic2VhcmNoTm9kZSIsImZvdW5kTm9kZSIsImZvdW5kUGFyZW50IiwiY2hpbGRyZW5GbiIsInZpc2l0Rm4iLCJwcm9qZWN0TmFtZSIsIkRPV05fQVJST1dfSU1BR0VfUEFUSCIsIkNIRUNLX01BUktfSU1BR0VfUEFUSCIsIkJMQU5LX01BUktfSU1BR0VfUEFUSCIsIkVOVEVSX0tFWSIsIktFWV9VUF9BUlJPVyIsIktFWV9ET1dOX0FSUk9XIiwiS0VZX0xFRlRfQVJST1ciLCJLRVlfUklHSFRfQVJST1ciLCJERUZBVUxUX05PREVfSU5QVVRfV0lEVEgiLCJkZWJ1ZyIsInByaW50IiwibyIsImNvbnNvbGUiLCJsb2ciLCJwcmludFRyZWUiLCJ6b29tIiwiZCIsImZvY3VzIiwidHJhbnNpdGlvbiIsImQzIiwiZHVyYXRpb24iLCJhbHRLZXkiLCJ0d2VlbiIsImludGVycG9sYXRlWm9vbSIsInIiLCJtYXJnaW4iLCJ6b29tVG8iLCJzZWxlY3RBbGwiLCJlYWNoIiwidiIsImRpYW1ldGVyIiwiYXR0ciIsImNpcmNsZSIsImFwcGVuZCIsInNjYWxlIiwibGluZWFyIiwiZG9tYWluIiwicmFuZ2UiLCJpbnRlcnBvbGF0ZSIsImludGVycG9sYXRlSGNsIiwicGFjayIsImxheW91dCIsInBhZGRpbmciLCJzaXplIiwiUEkiLCJzdmciLCJzZWxlY3QiLCJyb290Iiwibm9kZXMiLCJlbnRlciIsIm9uIiwidGV4dCIsInNlbGYiLCJmcmFtZUVsZW1lbnQiLCJleHBhbmRlclNlbGVjdG9yIiwibnVtTGV2ZWxzIiwiaHRtbCIsImdldE1hcmt1cCIsImNoYW5nZSIsImhhbmRsZSIsInZhbCIsIm1hcmt1cCIsImZpZWxkTWVudSIsInJlbmRlck1lbnUiLCJtb3VzZWxlYXZlIiwiY2hlY2tNYXJrQ2xhc3MiLCJzaWJsaW5ncyIsInNpYmxpbmciLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiaGlkZSIsInNlbGVjdFByb2plY3QiLCJrZXl1cCIsImNsaWNrIiwidmVyc2lvblNlbGVjdG9yIiwic2hvdyIsInByb2plY3RTZWxlY3RvciIsImZpbmQiLCJrZXlDb2RlIiwibmV3UHJvamVjdElEIiwib3B0aW9uIiwicHJvamVjdEFjdGlvbiIsImVudGVyUHJlc3NlZCIsImJhc2VWZXJzaW9uTnVtYmVyIiwiYmFzZVZlcnNpb25MYWJlbCIsImJhc2VWZXJzaW9uRGF0ZSIsIm5ld1ZlcnNpb24iLCJtb2RhbCIsInNwcmVhZFNoZWV0S2V5SGFuZGxlciIsImNoZWNrS2V5IiwicHJldmVudERlZmF1bHQiLCJwcmV2Um93IiwiZmluZEFuY2VzdG9yIiwiYWN0aXZlRWxlbWVudCIsInByZXYiLCJnZXROZXh0RWxlbWVudElEIiwibmV4dFJvdyIsIm5leHQiLCJuZXdSb3ciLCJzcGxpdCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsInNwcmVhZFNoZWV0TWFya3VwIiwicmVuZGVyRmllbGRzUm93IiwicmVuZGVyRGF0YVRhYmxlIiwicmVuZGVyTm9kZUNvbHVtbiIsIm9mZiIsImZpZWxkSGVhZGVyIiwic2hvd0ZpZWxkTWVudSIsImNzcyIsImRhdGFSb3dzTWFya3VwIiwicmVuZGVyRGF0YUNlbGwiLCJmaWVsZENlbGwiLCJub2RlUm93TWFya3VwIiwiZGVsZXRlQnV0dG9uIiwiY29weUJ1dHRvbiIsImRyYWdIYW5kbGUiLCJub2RlQ29udGVudCIsImljb25NYXJrdXAiLCJkZXB0aEFkanVzdG1lbnQiLCJ3aWR0aEFkanVzdG1lbnQiLCJleHBhbmRJY29uIiwibm9kZUlucHV0IiwiaW5zZXJ0QWZ0ZXIiLCJpdGVtIiwiaW5zZXJ0QmVmb3JlTm9kZSIsImluc2VydEFmdGVyTm9kZSIsIk1JTl9OT0RFX1NJWkUiLCJNQVhfTk9ERV9TSVpFIiwiVkVSVElDQUxfVklFVyIsIkhPUklaT05UQUxfVklFVyIsInVwZGF0ZSIsInJvdGF0ZSIsImRpcmVjdGlvbiIsImhvcml6b250YWxfc3BhY2luZyIsInZlcnRpY2FsX3NwYWNpbmciLCJkaWFnb25hbCIsInByb2plY3Rpb24iLCJ2aWV3ZXJIZWlnaHQiLCJzZWxlY3RlZE5vZGUiLCJkcmFnZ2luZ05vZGUiLCJtYXhMYWJlbExlbmd0aCIsIm1heCIsInZpZXdlcldpZHRoIiwiZHJhZ1N0YXJ0ZWQiLCJzdmdHcm91cCIsInRyYW5zbGF0ZSIsImluaXRpYXRlRHJhZyIsImRvbU5vZGUiLCJzb3J0IiwiYSIsImIiLCJsaW5rcyIsIm5vZGVQYXRocyIsIm5vZGVzRXhpdCIsInBhcmVudExpbmsiLCJkeSIsImR4IiwidXBkYXRlVGVtcENvbm5lY3RvciIsInpvb21MaXN0ZW5lciIsImJlaGF2aW9yIiwic2NhbGVFeHRlbnQiLCJiYXNlU3ZnIiwiY2FsbCIsImRyYWdMaXN0ZW5lciIsImRyYWdzdGFydCIsImRyYWdlbmQiLCJjZW50ZXJOb2RlIiwiZGVmYXVsdFByZXZlbnRlZCIsInNvdXJjZSIsImxldmVsV2lkdGgiLCJjaGlsZENvdW50IiwibiIsIm5ld0hlaWdodCIsInJldmVyc2UiLCJub2RlRW50ZXIiLCJvdmVyQ2lyY2xlIiwib3V0Q2lyY2xlIiwiY29tcHV0ZU5vZGVTaXplIiwibm9kZVVwZGF0ZSIsIm5vZGVFeGl0IiwiZXhpdCIsImxpbmsiLCJpbnNlcnQiLCJzb3VyY2VFdmVudCIsIm5vZGVTaXplIiwic3FydCJdLCJtYXBwaW5ncyI6IkFBQUEsUUFBU0EsZUFBY0MsRUFBTUMsR0FFM0IsR0FBSUQsRUFBS0UsVUFBcUMsSUFBekJGLEVBQUtFLFNBQVNDLE9BWW5DLENBR0UsSUFBSSxHQUZBQyxHQUFjLEVBRVZDLEVBQUksRUFBR0EsRUFBSUwsRUFBS0UsU0FBU0MsT0FBUUUsSUFFdkNELEdBQWVMLGNBQWNDLEVBQUtFLFNBQVNHLEdBQUlKLEVBV2pELE9BUklELEdBQUtNLFNBRVBOLEVBQUtNLFdBR1BOLEVBQUtNLE9BQU9MLEdBQVNHLEVBQ3JCRyxTQUFTQyxlQUFlUCxFQUFRRCxFQUFLUyxJQUFJQyxNQUFRTixFQUUxQ0EsRUExQlAsTUFBSUosR0FBS00sUUFBV04sRUFBS00sT0FBT0wsR0FNdkJVLFdBQVdYLEVBQUtNLE9BQU9MLElBSnZCO0FDQWIsWUFFQSxJQUFJVyxRQUFTQSxVQUdiQSxRQUFPQyxLQUFRLFdBR2IsR0FBSUMsR0FDRkMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFD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Z0JBRzdEd0wsY0FBWDBELElBQTRCQSxFQUFXMUQsZ0JBR3JDMEQiLCJmaWxlIjoiaG1zLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGFnZ3JlZ2F0ZV9hbnkobm9kZSwgZmllbGQpXHJcbntcclxuICBpZighbm9kZS5jaGlsZHJlbiB8fCBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMClcclxuICB7XHJcbiAgICBpZighbm9kZS52YWx1ZXMgfHwgIW5vZGUudmFsdWVzW2ZpZWxkXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIDAuMDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobm9kZS52YWx1ZXNbZmllbGRdKTtcclxuICAgIH1cclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHZhciBjaGlsZHJlblN1bSA9IDAuMDtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgY2hpbGRyZW5TdW0gKz0gYWdncmVnYXRlX2FueShub2RlLmNoaWxkcmVuW2ldLCBmaWVsZCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoIW5vZGUudmFsdWVzKVxyXG4gICAge1xyXG4gICAgICBub2RlLnZhbHVlcyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIG5vZGUudmFsdWVzW2ZpZWxkXSA9IGNoaWxkcmVuU3VtOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3VwZGF0ZSB0aGUgbW9kZWxcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkICsgbm9kZS5pZCkudmFsdWUgPSBjaGlsZHJlblN1bTsgICAgICAgICAvL3VwZGF0ZSB0aGUgdmlld1xyXG5cclxuICAgIHJldHVybiBjaGlsZHJlblN1bTtcclxuICB9XHJcbn0iLCIvKlxyXG5Db3B5cmlnaHQgKGMpIDIwMDgtMjAxMSwgd3d3LnJlZGlwcy5uZXQgQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuQ29kZSBsaWNlbnNlZCB1bmRlciB0aGUgQlNEIExpY2Vuc2U6IGh0dHA6Ly93d3cucmVkaXBzLm5ldC9saWNlbnNlL1xyXG5odHRwOi8vd3d3LnJlZGlwcy5uZXQvamF2YXNjcmlwdC9kcmFnLWFuZC1kcm9wLXRhYmxlLWNvbnRlbnQvXHJcbiovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBSRURJUFMgPSBSRURJUFMgfHwge307ICAgICAgLy9jcmVhdGUgUkVESVBTIG5hbWVzcGFjZSAoaWYgaXMgbm90IGFscmVhZHkgZGVmaW5lZCBpbiBhbm90aGVyIFJFRElQUyBwYWNrYWdlKVxyXG5cclxuLy9SRURJUFMuZHJhZyBpcyBhIEphdmFTY3JpcHQgZHJhZyBhbmQgZHJvcCBsaWJyYXJ5IGZvY3VzZWQgb24gZHJhZ2dpbmcgdGFibGUgY29udGVudCAoRElWIGVsZW1lbnRzKSBhbmQgdGFibGUgcm93cy5cclxuUkVESVBTLmRyYWcgPSAoZnVuY3Rpb24gKClcclxue1xyXG4gICAgLy8gbWV0aG9kc1xyXG4gIHZhciBpbml0LCAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb25cclxuICAgIGVuYWJsZURyYWcsICAgICAgICAgLy8gbWV0aG9kIGF0dGFjaGVzIC8gZGV0YWNoZXMgb25tb3VzZWRvd24gYW5kIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXJzIGZvciBESVYgZWxlbWVudHNcclxuICAgIGVuYWJsZURpdnMsXHJcbiAgICBoYW5kbGVyT25Nb3VzZURvd24sICAgICAvLyBvbm1vdXNlZG93biBoYW5kbGVyXHJcbiAgICBoYW5kbGVyT25Nb3VzZVVwLCAgICAgLy8gb25tb3VzZXVwIGhhbmRsZXJcclxuICAgIGhhbmRsZXJPbk1vdXNlTW92ZSwgICAgIC8vIG9ubW91c2Vtb3ZlIGhhbmRsZXIgZm9yIHRoZSBkb2N1bWVudCBsZXZlbFxyXG4gICAgZWxlbWVudERyb3AsICAgICAgICAvLyBkcm9wIGVsZW1lbnQgdG8gdGhlIHRhYmxlIGNlbGxcclxuICAgIHJlc2V0U3R5bGVzLCAgICAgICAgLy8gcmVzZXQgb2JqZWN0IHN0eWxlcyBhZnRlciBlbGVtZW50IGlzIGRyb3BwZWRcclxuICAgIHJlZ2lzdGVyRXZlbnRzLCAgICAgICAvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgZm9yIERJViBlbGVtZW50XHJcbiAgICBjZWxsQ2hhbmdlZCwgICAgICAgIC8vIHByaXZhdGUgbWV0aG9kIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSgpLCBhdXRvU2Nyb2xsWCgpLCBhdXRvU2Nyb2xsWSgpXHJcbiAgICBoYW5kbGVyT25SZXNpemUsICAgICAgLy8gb25yZXNpemUgd2luZG93IGV2ZW50IGhhbmRsZXJcclxuICAgIHNldFRhYmxlUm93Q29sdW1uLCAgICAgIC8vIGZ1bmN0aW9uIHNldHMgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsXHJcbiAgICBzZXRQb3NpdGlvbiwgICAgICAgIC8vIGZ1bmN0aW9uIHNldHMgY29sb3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlIGNlbGwgYW5kIHJlbWVtYmVycyBwcmV2aW91cyBwb3NpdGlvbiBhbmQgY29sb3JcclxuICAgIHNldFRkU3R5bGUsICAgICAgICAgLy8gbWV0aG9kIHNldHMgYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcyBmb3IgVERcclxuICAgIGdldFRkU3R5bGUsICAgICAgICAgLy8gbWV0aG9kIHJldHVybnMgb2JqZWN0IGNvbnRhaW5pbmcgYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcyBmb3IgVERcclxuICAgIGJveE9mZnNldCwgICAgICAgICAgLy8gY2FsY3VsYXRlcyBvYmplY3QgKGJveCkgb2Zmc2V0ICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpXHJcbiAgICBjYWxjdWxhdGVDZWxscywgICAgICAgLy8gY2FsY3VsYXRlcyB0YWJsZSBjb2x1bW5zIGFuZCByb3cgb2Zmc2V0cyAoY2VsbHMgZGltZW5zaW9ucylcclxuICAgIGdldFNjcm9sbFBvc2l0aW9uLCAgICAgIC8vIHJldHVybnMgc2Nyb2xsIHBvc2l0aW9ucyBpbiBhcnJheVxyXG4gICAgYXV0b1Njcm9sbFgsICAgICAgICAvLyBob3Jpem9udGFsIGF1dG8gc2Nyb2xsIGZ1bmN0aW9uXHJcbiAgICBhdXRvU2Nyb2xsWSwgICAgICAgIC8vIHZlcnRpY2FsIGF1dG8gc2Nyb2xsIGZ1bmN0aW9uXHJcbiAgICBjb3B5UHJvcGVydGllcywgICAgICAgLy8gbWV0aG9kIGNvcGllcyBjdXN0b20gcHJvcGVydGllcyBmcm9tIHNvdXJjZSBlbGVtZW50IHRvIHRoZSBjbG9uZWQgZWxlbWVudC5cclxuICAgIGNsb25lTGltaXQsICAgICAgICAgLy8gY2xvbmUgbGltaXQgKGFmdGVyIGNsb25pbmcgb2JqZWN0LCB0YWtlIGNhcmUgYWJvdXQgY2xpbWl0MV9YIG9yIGNsaW1pdDJfWCBjbGFzc25hbWVzKVxyXG4gICAgZ2V0U3R5bGUsICAgICAgICAgLy8gbWV0aG9kIHJldHVybnMgc3R5bGUgdmFsdWUgb2YgcmVxdWVzdGVkIG9iamVjdCBhbmQgc3R5bGUgbmFtZVxyXG4gICAgZmluZFBhcmVudCwgICAgICAgICAvLyBtZXRob2QgcmV0dXJucyBhIHJlZmVyZW5jZSBvZiB0aGUgcmVxdWlyZWQgcGFyZW50IGVsZW1lbnRcclxuICAgIHJvd09wYWNpdHksICAgICAgICAgLy8gbWV0aG9kIHNldHMgb3BhY2l0eSB0byB0YWJsZSByb3cgKGVsLCBvcGFjaXR5LCBjb2xvcilcclxuICAgIHJvd0Nsb25lLCAgICAgICAgIC8vIGNsb25lIHRhYmxlIHJvdyAtIGlucHV0IHBhcmFtZXRlciBpcyBESVYgd2l0aCBjbGFzcyBuYW1lIFwicmVkaXBzLXJvd1wiIC0+IERJViBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIlxyXG4gICAgcm93RHJvcCwgICAgICAgICAgLy8gZnVuY3Rpb24gZHJvcHMgKGRlbGV0ZSBvbGQgJiBpbnNlcnQgbmV3KSB0YWJsZSByb3cgKGlucHV0IHBhcmFtZXRlcnMgYXJlIGN1cnJlbnQgdGFibGUgYW5kIHJvdylcclxuICAgIG5vcm1hbGl6ZSwgICAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2QgcmV0dXJucyBub3JtYWxpemVkIHNwYWNlcyBmcm9tIGlucHV0IHN0cmluZ1xyXG5cclxuICAgIC8vIHByaXZhdGUgcGFyYW1ldGVyc1xyXG4gICAgb2JqTWFyZ2luID0gbnVsbCwgICAgIC8vIHNwYWNlIGZyb20gY2xpY2tlZCBwb2ludCB0byB0aGUgb2JqZWN0IGJvdW5kcyAodG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KVxyXG5cclxuICAgIC8vIHdpbmRvdyB3aWR0aCBhbmQgaGVpZ2h0IChwYXJhbWV0ZXJzIGFyZSBzZXQgaW4gb25sb2FkIGFuZCBvbnJlc2l6ZSBldmVudCBoYW5kbGVyKSwganVzdCBmb3IgYSBub3RlOiB3aW5kb3cgYW5kIFdpbmRvdyBpcyByZXNlcnZlZCB3b3JkIGluIEpTIHNvIEkgbmFtZWQgdmFyaWFibGUgXCJzY3JlZW5cIilcclxuICAgIHNjcmVlbiA9IHt3aWR0aDogMCwgaGVpZ2h0OiAwfSxcclxuXHJcbiAgICAvLyBkZWZpbmUgc2Nyb2xsIG9iamVjdCB3aXRoIGNvbnRhaW5lZCBwcm9wZXJ0aWVzICh0aGlzIGlzIHByaXZhdGUgcHJvcGVydHkpXHJcbiAgICBzY3JvbGxEYXRhID0ge3dpZHRoIDogbnVsbCwgLy8gc2Nyb2xsIHdpZHRoIG9mIHRoZSB3aW5kb3cgKGl0IGlzIHVzdWFsbHkgZ3JlYXRlciB0aGVuIHdpbmRvdylcclxuICAgICAgICBoZWlnaHQgOiBudWxsLCAgICAvLyBzY3JvbGwgaGVpZ2h0IG9mIHRoZSB3aW5kb3cgKGl0IGlzIHVzdWFsbHkgZ3JlYXRlciB0aGVuIHdpbmRvdylcclxuICAgICAgICBjb250YWluZXIgOiBbXSwgICAvLyBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhcyAoY29udGFpbnMgYXV0b3Njcm9sbCBhcmVhcywgcmVmZXJlbmNlIHRvIHRoZSBjb250YWluZXIgYW5kIHNjcm9sbCBkaXJlY3Rpb24pXHJcbiAgICAgICAgb2JqIDogbnVsbH0sICAgIC8vIHNjcm9sbCBvYmplY3QgKG5lZWRlZCBpbiBhdXRvc2Nyb2xsIGZvciByZWN1cnNpdmUgY2FsbHMpXHJcblxyXG4gICAgZWRnZSA9IHtwYWdlOiB7eDogMCwgeTogMH0sIC8vIGF1dG9zY3JvbGwgYm91bmQgdmFsdWVzIGZvciBwYWdlIGFuZCBkaXYgYXMgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICBkaXY6ICB7eDogMCwgeTogMH0sIC8vIGNsb3NlciB0byB0aGUgZWRnZSwgZmFzdGVyIHNjcm9sbGluZ1xyXG4gICAgICAgIGZsYWc6IHt4OiAwLCB5OiAwfX0sLy8gZmxhZ3MgYXJlIG5lZWRlZCB0byBwcmV2ZW50IG11bHRpcGxlIGNhbGxzIG9mIGF1dG9TY3JvbGxYIGFuZCBhdXRvU2Nyb2xsWSBmcm9tIG9ubW91c2Vtb3ZlIGV2ZW50IGhhbmRsZXJcclxuXHJcbiAgICBiZ1N0eWxlT2xkLCAgICAgICAgIC8vIChvYmplY3QpIG9sZCB0ZCBzdHlsZXMgKGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMpXHJcblxyXG4gICAgdGFibGUsICAgICAgICAvLyB0YWJsZSBvZmZzZXRzIGFuZCByb3cgb2Zmc2V0cyAoaW5pdGlhbGl6ZWQgaW4gb25sb2FkIGV2ZW50KVxyXG4gICAgbW92ZWQsICAgICAgICAgICAgLy8gKGJvb2xlYW4pIHRydWUgaWYgZWxlbWVudCBpcyBtb3ZlZFxyXG4gICAgY2xvbmVkLCAgICAgICAgICAgLy8gKGJvb2xlYW4pIHRydWUgaWYgZWxlbWVudCBpcyBjbG9uZWRcclxuICAgIGNsb25lZElkID0gW10sICAgICAgICAvLyBuZWVkZWQgZm9yIGluY3JlbWVudCBJRCBvZiBjbG9uZWQgZWxlbWVudHNcclxuICAgIGN1cnJlbnRDZWxsID0gW10sICAgICAvLyBjdXJyZW50IGNlbGwgYm91bmRzICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpIGFuZCBcImNvbnRhaW5UYWJsZVwiIGZsYWcgZm9yIG5lc3RlZCB0YWJsZXNcclxuICAgIGRyYWdDb250YWluZXIgPSBudWxsLCAgIC8vIGRyYWcgY29udGFpbmVyIHJlZmVyZW5jZVxyXG4gICAgZGl2Qm94ID0gbnVsbCwgICAgICAgIC8vIGRpdiBkcmFnIGJveDogdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0IG1hcmdpbiAoZGVjcmVhc2UgbnVtYmVyIGNhbGxzIG9mIHNldFRhYmxlUm93Q29sdW1uKVxyXG4gICAgcG9pbnRlciA9IHt4OiAwLCB5OiAwfSwgICAvLyBtb3VzZSBwb2ludGVyIHBvc2l0aW9uICh0aGlzIHByb3BlcnRpZXMgYXJlIHNldCBpbiBoYW5kbGVyT25Nb3VzZU1vdmUoKSAtIG5lZWRlZCBmb3IgYXV0b3Njcm9sbClcclxuICAgIHRocmVzaG9sZCA9IHt4OiAwLCAgICAgIC8vIGluaXRpYWwgeCwgeSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgdmFsdWU6IDcsICAgLy8gdGhyZXNob2xkIGRpc3RhbmNlIHZhbHVlXHJcbiAgICAgICAgICBmbGFnOiBmYWxzZX0sIC8vIHRocmVzaG9sZCBmbGFnXHJcbiAgICBzaGlmdEtleSA9IGZhbHNlLCAgICAgLy8gKGJvb2xlYW4pIHRydWUgaWYgc2hpZnQga2V5IGlzIHByZXNzZWQgKHNldCBpbiBoYW5kbGVyX21vdXNlZG93bilcclxuICAgIGNsb25lQ2xhc3MgPSBmYWxzZSwgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIGNsaWNrZWQgZWxlbWVudCBjb250YWlucyBjbG9uZSBpbiBjbGFzcyBuYW1lIChzZXQgaW4gaGFuZGxlcl9tb3VzZWRvd24pXHJcbiAgICB3aW5kb3dTY3JvbGxQb3NpdGlvbiwgICAvLyAoYXJyYXkpIHRvcCBhbmQgbGVmdCB3aW5kb3cgb2Zmc2V0IChzZXQgaW4gY2FsY3VsYXRlQ2VsbHMgYW5kIHVzZWQgaW4gYm94T2Zmc2V0KVxyXG5cclxuICAgIC8vIHNlbGVjdGVkLCBwcmV2aW91cyBhbmQgc291cmNlIHJvdyBhbmQgY2VsbCAocHJpdmF0ZSBwYXJhbWV0ZXJzIHRvbylcclxuICAgIHJvdyA9IG51bGwsXHJcbiAgICByb3dfb2xkID0gbnVsbCxcclxuICAgIHJvd19zb3VyY2UgPSBudWxsLFxyXG4gICAgY2VsbCA9IG51bGwsXHJcbiAgICBjZWxsX29sZCA9IG51bGwsXHJcbiAgICBjZWxsX3NvdXJjZSA9IG51bGwsXHJcblxyXG4gICAgLy8gdmFyaWFibGVzIGluIHRoZSBwcml2YXRlIHNjb3BlIHJldmVhbGVkIGFzIHB1YmxpYyAoc2VlIGluaXQoKSBtZXRob2QpXHJcbiAgICBvYmogPSBmYWxzZSwgICAgICAgIC8vIChvYmplY3QpIG1vdmVkIG9iamVjdFxyXG4gICAgb2JqT2xkID0gZmFsc2UsICAgICAgIC8vIChvYmplY3QpIHByZXZpb3VzbHkgbW92ZWQgb2JqZWN0IChiZWZvcmUgY2xpY2tlZCBvciBjbG9uZWQpXHJcbiAgICBob3ZlciA9IHtjb2xvclRkOiAnI0ZGQ0ZBRScsIGNvbG9yVHI6ICcjOUJCM0RBJ30sXHJcbiAgICBzY3JvbGwgPSB7ZW5hYmxlIDogdHJ1ZSwgIC8vIChib29sZWFuKSBlbmFibGUvZGlzYWJsZSBhdXRvc2Nyb2xsIGZ1bmN0aW9uIChkZWZhdWx0IGlzIHRydWUpXHJcbiAgICAgICAgYm91bmQgOiAyNSwgICAgIC8vIChpbnRlZ2VyKSBib3VuZCB3aWR0aCBmb3IgYXV0b3Njcm9sbFxyXG4gICAgICAgIHNwZWVkIDogMjB9LCAgICAvLyAoaW50ZWdlcikgc2Nyb2xsIHNwZWVkIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgc3R5bGUgPSB7Ly9ib3JkZXJFbmFibGVkIDogJ3NvbGlkJywgLy8gKHN0cmluZykgYm9yZGVyIHN0eWxlIGZvciBlbmFibGVkIGVsZW1lbnRzXHJcbiAgICAgICAgYm9yZGVyRGlzYWJsZWQgOiAnZG90dGVkJywgIC8vIChzdHJpbmcpIGJvcmRlciBzdHlsZSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgICBvcGFjaXR5RGlzYWJsZWQgOiAnJywgICAvLyAoaW50ZWdlcikgc2V0IG9wYWNpdHkgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgICAgcm93RW1wdHlDb2xvciA6ICd3aGl0ZSd9LCAvLyAoc3RyaW5nKSBjb2xvciBvZiBlbXB0eSByb3dcclxuICAgIHRkID0ge30sICAgICAgICAgICAgLy8gKG9iamVjdCkgY29udGFpbnMgcmVmZXJlbmNlIHRvIHNvdXJjZSAoc2V0IGluIG9ubW91c2Vkb3duKSwgY3VycmVudCAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKSwgcHJldmlvdXMgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCkgYW5kIHRhcmdldCBjZWxsIChzZXQgaW4gb25tb3VzZXVwKVxyXG4gICAgY2xvbmUgPSB7a2V5RGl2IDogZmFsc2UsICAgIC8vIChib29sZWFuKSBpZiB0cnVlLCBlbGVtZW50cyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleVxyXG4gICAgICAgIGtleVJvdyA6IGZhbHNlLCAgICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIHJvd3MgY291bGQgYmUgY2xvbmVkIHdpdGggcHJlc3NlZCBTSElGVCBrZXlcclxuICAgICAgICBzZW5kQmFjayA6IGZhbHNlLCAgIC8vIChib29sZWFuKSBpZiB0cnVlLCB0aGVuIGNsb25lZCBlbGVtZW50IGNhbiBiZSByZXR1cm5lZCB0byBpdHMgc291cmNlXHJcbiAgICAgICAgZHJvcCA6IGZhbHNlfSwgICAgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgdGhlbiBjbG9uZWQgZWxlbWVudCB3aWxsIGJlIGFsd2F5cyBkcm9wcGVkIHRvIHRoZSB0YWJsZSBubyBtYXR0ZXIgaWYgZHJvcHBlZCBvdXRzaWRlIG9mIHRoZSB0YWJsZVxyXG4gICAgXHJcbiAgICBldmVudCA9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKG9iamVjdCkgZXZlbnQgaGFuZGxlcnNcclxuICAgIHtcclxuICAgICAgY2xvbmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGNsb25lZERyb3BwZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgY2xvbmVkRW5kMSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBjbG9uZWRFbmQyIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGRyb3BwZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgZHJvcHBlZEJlZm9yZSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBmaW5pc2ggOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgbm90Q2xvbmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIG5vdE1vdmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0NoYW5nZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Q2xpY2tlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dDbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93RHJvcHBlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dEcm9wcGVkQmVmb3JlIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Ryb3BwZWRTb3VyY2UgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93TW92ZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Tm90Q2xvbmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd05vdE1vdmVkIDogZnVuY3Rpb24gKCkge31cclxuICAgIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBEcmFnIGNvbnRhaW5lciBpbml0aWFsaXphdGlvbi4gSXQgc2hvdWxkIGJlIGNhbGxlZCBhdCBsZWFzdCBvbmNlIGFuZCBpdCdzIHBvc3NpYmxlIHRvIGNhbGwgYSBtZXRob2QgbWFueSB0aW1lcy4gRXZlcnkgcGFnZSBzaG91bGQgaGF2ZSBhdCBsZWFzdCBvbmUgZHJhZyBjb250YWluZXIuXHJcbiAgICogSWYgUkVESVBTLmRyYWcuaW5pdCgpIGlzIGNhbGxlZCB3aXRob3V0IGlucHV0IHBhcmFtZXRlciwgbGlicmFyeSB3aWxsIHNlYXJjaCBmb3IgZHJhZyBjb250YWluZXIgd2l0aCBpZD1cInJlZGlwcy1kcmFnXCIuXHJcbiAgICogT25seSB0YWJsZXMgaW5zaWRlIGRyYWcgY29udGFpbmVyIHdpbGwgYmUgc2Nhbm5lZC4gSXQgaXMgcG9zc2libGUgdG8gaGF2ZSBzZXZlcmFsIGRyYWcgY29udGFpbmVycyB0b3RhbHkgc2VwYXJhdGVkIChlbGVtZW50cyBmcm9tIG9uZSBjb250YWluZXIgd2lsbCBub3QgYmUgdmlzaWJsZSB0byBvdGhlciBkcmFnIGNvbnRhaW5lcnMpLlxyXG4gICAqIFwiaW5pdFwiIG1ldGhvZCBjYWxscyBlbmFibGVEcmFnLiBJZiB0YWJsZXMgYXJlIGdlbmVyYXRlZCBkeW5hbWljYWxseSB0aGVuIFJFRElQUy5pbml0KCkgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgdG8gc2V0IGN1c3RvbSBwcm9wZXJ0aWVzIHRvIHRhYmxlcyAodGFibGUgaW5pdGlhbGl6YXRpb24pLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbZGNdIERyYWcgY29udGFpbmVyIElkIChkZWZhdWx0IGlzIFwicmVkaXBzLWRyYWdcIikuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBpbml0IGRyYWcgY29udGFpbmVyICh3aXRoIGRlZmF1bHQgaWQ9XCJyZWRpcHMtZHJhZ1wiKVxyXG4gICAqIFJFRElQUy5kcmFnLmluaXQoKTtcclxuICAgKlxyXG4gICAqIC8vIGluaXQgZHJhZyBjb250YWluZXIgd2l0aCBpZD1cIm15LWRyYWcxXCJcclxuICAgKiBSRURJUFMuZHJhZy5pbml0KCdteS1kcmFnMScpO1xyXG4gICAqL1xyXG4gIGluaXQgPSBmdW5jdGlvbiAoKVxyXG4gIHtcclxuICAgIGRyYWdDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVkaXBzLWRyYWcnKTsgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGRyYWcgY29udGFpbmVyXHJcblxyXG4gICAgd2luZG93U2Nyb2xsUG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGluaXRpYWwgd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG5cclxuICAgIC8vIGFwcGVuZCBESVYgaWQ9XCJyZWRpcHNfY2xvbmVcIiBpZiBESVYgZG9lc24ndCBleGlzdCAobmVlZGVkIGZvciBjbG9uaW5nIERJViBlbGVtZW50cylcclxuICAgIC8vIGlmIGF1dG9tYXRpYyBjcmVhdGlvbiBpc24ndCBwcmVjaXNlIGVub3VnaCwgdXNlciBjYW4gbWFudWFsbHkgY3JlYXRlIGFuZCBwbGFjZSBlbGVtZW50IHdpdGggaWQ9XCJyZWRpcHNfY2xvbmVcIiB0byBwcmV2ZW50IHdpbmRvdyBleHBhbmRpbmcgKHRoZW4gdGhpcyBjb2RlIHdpbGwgYmUgc2tpcHBlZClcclxuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZGlwc19jbG9uZScpKVxyXG4gICAge1xyXG4gICAgICB2YXIgcmVkaXBzQ2xvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgcmVkaXBzQ2xvbmUuaWQgPSAncmVkaXBzX2Nsb25lJztcclxuICAgICAgcmVkaXBzQ2xvbmUuc3R5bGUud2lkdGggPSByZWRpcHNDbG9uZS5zdHlsZS5oZWlnaHQgPSAnMXB4JztcclxuICAgICAgZHJhZ0NvbnRhaW5lci5hcHBlbmRDaGlsZChyZWRpcHNDbG9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlRHJhZygnaW5pdCcsICcucmVkaXBzLWRyYWcnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXR0YWNoIG9ubW91c2Vkb3duIGV2ZW50IGhhbmRsZXIgdG8gdGhlIERJViBlbGVtZW50cywgYXR0YWNoIG9uc2Nyb2xsPSdjYWxjdWxhdGVDZWxscycgZm9yIERJViBlbGVtZW50cyB3aXRoICdzY3JvbGwnIGluIGNsYXNzIG5hbWUgKHByZXBhcmUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXMpXHJcbiAgICB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cmVlVGFibGUnKTtcclxuICAgIHRhYmxlLnJlZGlwcyA9IHt9O1xyXG5cclxuICAgIGhhbmRsZXJPblJlc2l6ZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHdpbmRvdyB3aWR0aC9oZWlnaHQsIHNjcm9sbCB3aWR0aC9oZWlnaHQgYW5kIGRlZmluZSBvbnJlc2l6ZSBldmVudCBoYW5kbGVyLCBvbnJlc2l6ZSBldmVudCBoYW5kbGVyIGNhbGxzIGNhbGN1bGF0ZSBjb2x1bW5zXHJcbiAgICBSRURJUFMuZXZlbnQuYWRkKHdpbmRvdywgJ3Jlc2l6ZScsIGhhbmRsZXJPblJlc2l6ZSk7XHJcbiAgICBSRURJUFMuZXZlbnQuYWRkKHdpbmRvdywgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgICAgICAgICAgICAvLyBhdHRhY2ggb25zY3JvbGwgZXZlbnQgdG8gdGhlIHdpbmRvdyAobmVlZGVkIGZvciByZWNhbGN1bGF0aW5nIHRhYmxlIGNlbGxzIHBvc2l0aW9ucylcclxuICB9O1xyXG5cclxuXHJcbiAgLy8gb25tb3VzZWRvd24gZXZlbnQgaGFuZGxlci4gIFRoaXMgZXZlbnQgaGFuZGxlciBpcyBhdHRhY2hlZCB0byBldmVyeSBESVYgZWxlbWVudCBpbiBkcmFnIGNvbnRhaW5lciAocGxlYXNlIHNlZSBcImVuYWJsZURyYWdcIikuXHJcbiAgaGFuZGxlck9uTW91c2VEb3duID0gZnVuY3Rpb24gKGUpXHJcbiAge1xyXG4gICAgdmFyIGV2dCA9IGUgfHwgd2luZG93LmV2ZW50OyAgICAgICAgICAvLyBkZWZpbmUgZXZlbnQgKGNyb3NzIGJyb3dzZXIpXHJcbiAgICB2YXIgb2Zmc2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9iamVjdCBvZmZzZXRcclxuICAgIHZhciBwb3NpdGlvbjsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zaXRpb24gb2YgdGFibGUgb3IgY29udGFpbmVyIGJveCBvZiB0YWJsZSAoaWYgaGFzIHBvc2l0aW9uOmZpeGVkIHRoZW4gZXhjbHVkZSBzY3JvbGwgb2Zmc2V0KVxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuXHJcbiAgICBldnQuY2FuY2VsQnViYmxlID0gdHJ1ZTsgICAgICAgICAgICAgIC8vIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24gKG9ubHkgZmlyc3QgY2xpY2tlZCBlbGVtZW50IHdpbGwgcmVnaXN0ZXIgb25tb3VzZWRvd24gZXZlbnQpLCBuZWVkZWQgaW4gY2FzZSBvZiBwbGFjaW5nIHRhYmxlIGluc2lkZSBvZiA8ZGl2IGNsYXNzPVwicmVkaXBzLWRyYWdcIj4gKGFmdGVyIGVsZW1lbnQgd2FzIGRyb3BwZWQgdG8gdGhpcyB0YWJsZSBpdCBjb3VsZG4ndCBiZSBtb3ZlZCBvdXQgYW55IG1vcmUgLSB0YWJsZSBhbmQgZWxlbWVudCBtb3ZlZCB0b2dldGhlciBiZWNhdXNlIHRhYmxlIGNhcHR1cmVzIG1vdXNlZG93biBldmVudCBhbHNvIGluIGJ1YmJsaW5nIHByb2NlcylcclxuICAgIGlmIChldnQuc3RvcFByb3BhZ2F0aW9uKVxyXG4gICAge1xyXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hpZnRLZXkgPSBldnQuc2hpZnRLZXk7ICAgICAgICAgICAgICAvLyBzZXQgdHJ1ZSBvciBmYWxzZSBpZiBzaGlmdCBrZXkgaXMgcHJlc3NlZFxyXG5cclxuICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRleHQgc2VsZWN0aW9uIChDaHJvbWUsIEZGLCBPcGVyYSwgU2FmYXJpKVxyXG4gICAge1xyXG4gICAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24gJiYgZG9jdW1lbnQuc2VsZWN0aW9uLnR5cGUgPT09IFwiVGV4dFwiKSAgLy8gSUU4XHJcbiAgICB7XHJcbiAgICAgIHRyeSB7IGRvY3VtZW50LnNlbGVjdGlvbi5lbXB0eSgpOyB9IGNhdGNoIChlcnJvcikgeyB9ICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvciB0byBhcyBhIHdvcmthcm91bmQgZm9yIGJ1ZyBpbiBJRThcclxuICAgIH1cclxuXHJcbiAgICBYID0gcG9pbnRlci54ID0gZXZ0LmNsaWVudFg7XHJcbiAgICBZID0gcG9pbnRlci55ID0gZXZ0LmNsaWVudFk7XHJcblxyXG4gICAgdGhyZXNob2xkLnggPSBYOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCB0aHJlc2hvbGQgcG9zaXRpb24gKG5lZWRlZCBmb3IgY2FsY3VsYXRpbmcgZGlzdGFuY2UpXHJcbiAgICB0aHJlc2hvbGQueSA9IFk7XHJcbiAgICB0aHJlc2hvbGQuZmxhZyA9IGZhbHNlO1xyXG5cclxuICAgIFJFRElQUy5kcmFnLm9iak9sZCA9IG9iak9sZCA9IG9iaiB8fCB0aGlzOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgcHJldmlvdXMgb2JqZWN0IGlmIGRlZmluZWQgb3Igc2V0IHRvIHRoZSBjbGlja2VkIG9iamVjdFxyXG4gICAgUkVESVBTLmRyYWcub2JqID0gb2JqID0gdGhpczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjbGlja2VkIG9iamVjdFxyXG5cclxuICAgIGNsb25lQ2xhc3MgPSBvYmouY2xhc3NOYW1lLmluZGV4T2YoJ3JlZGlwcy1jbG9uZScpID4gLTE7ICAgICAgICAgICAgLy8gc2V0IHRydWUgb3IgZmFsc2UgaWYgY2xpY2tlZCBlbGVtZW50IGNvbnRhaW5zIFwicmVkaXBzLWNsb25lXCIgY2xhc3MgbmFtZSAobmVlZGVkIGZvciBjbG9uZSBlbGVtZW50IGFuZCBjbG9uZSB0YWJsZSByb3cpXHJcblxyXG4gICAgUkVESVBTLmRyYWcub2JqID0gb2JqID0gcm93Q2xvbmUob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBqdXN0IHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGN1cnJlbnQgcm93IChkbyBub3QgY2xvbmUpXHJcblxyXG4gICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdXNlciBoYXMgdXNlZCBhIG1vdXNlIGV2ZW50IHRvIGluY3JlYXNlIHRoZSBkaW1lbnNpb25zIG9mIHRoZSB0YWJsZSAtIGNhbGwgY2FsY3VsYXRlQ2VsbHMoKVxyXG5cclxuICAgIHJvdyA9IGNlbGwgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgcm93IGFuZCBjZWxsIGluZGV4ZXMgKG5lZWRlZCBpbiBjYXNlIG9mIGVuYWJsZSAvIGRpc2FibGUgdGFibGVzKVxyXG4gICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsIGFuZCByZW1lbWJlciBzb3VyY2UgcG9zaXRpb24gKG9sZCBwb3NpdGlvbiBpcyBpbml0aWFsbHkgdGhlIHNhbWUgYXMgc291cmNlIHBvc2l0aW9uKVxyXG4gICAgcm93X3NvdXJjZSA9IHJvd19vbGQgPSByb3c7XHJcbiAgICBjZWxsX3NvdXJjZSA9IGNlbGxfb2xkID0gY2VsbDtcclxuXHJcbiAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dDbGlja2VkKHRkLmN1cnJlbnQpO1xyXG5cclxuICAgIC8vIGlmIHN0YXJ0IHBvc2l0aW9uIGNhbm5vdCBiZSBkZWZpbmVkIHRoZW4gdXNlciBwcm9iYWJseSBjbGlja2VkIG9uIGVsZW1lbnQgdGhhdCBiZWxvbmdzIHRvIHRoZSBkaXNhYmxlZCB0YWJsZSAob3Igc29tZXRoaW5nIGVsc2UgaGFwcGVuZWQgdGhhdCB3YXMgbm90IHN1cHBvc2VkIHRvIGhhcHBlbiAtIGV2ZXJ5IGVsZW1lbnQgc2hvdWxkIGJlbG9uZyB0byB0aGUgdGFibGUpIHRoaXMgY29kZSBtdXN0IGdvIGFmdGVyIGV4ZWN1dGlvbiBvZiBldmVudCBoYW5kbGVyc1xyXG4gICAgaWYgKHJvdyA9PT0gbnVsbCB8fCBjZWxsID09PSBudWxsKVxyXG4gICAge1xyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXJ1biBzZXRUYWJsZVJvd0NvbHVtbigpIGFnYWluIGJlY2F1c2Ugc29tZSBvZiB0YWJsZXMgbWlnaHQgYmUgZW5hYmxlZCBpbiBoYW5kbGVyIGV2ZW50cyBhYm92ZVxyXG4gICAgICByb3dfc291cmNlID0gcm93X29sZCA9IHJvdztcclxuICAgICAgY2VsbF9zb3VyY2UgPSBjZWxsX29sZCA9IGNlbGw7XHJcblxyXG4gICAgICBpZiAocm93ID09PSBudWxsIHx8IGNlbGwgPT09IG51bGwpICAvLyBubywgY2xpY2tlZCBlbGVtZW50IGlzIG9uIHRoZSBkaXNhYmxlZCB0YWJsZSAtIHNvcnJ5XHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vdmVkID0gY2xvbmVkID0gZmFsc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgXCJtb3ZlZFwiIGZsYWcgKG5lZWRlZCBmb3IgY2xvbmUgb2JqZWN0IGluIGhhbmRsZXJPbk1vdXNlTW92ZSkgYW5kIFwiY2xvbmVkXCIgZmxhZ1xyXG5cclxuICAgIFJFRElQUy5ldmVudC5hZGQoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBoYW5kbGVyT25Nb3VzZU1vdmUpOyAgICAgICAgLy8gYWN0aXZhdGUgb25tb3VzZW1vdmUgZXZlbnQgaGFuZGxlciBvbiBkb2N1bWVudCBvYmplY3RcclxuICAgIFJFRElQUy5ldmVudC5hZGQoZG9jdW1lbnQsICdtb3VzZXVwJywgaGFuZGxlck9uTW91c2VVcCk7ICAgICAgICAgICAgLy8gYWN0aXZhdGUgb25tb3VzZXVwIGV2ZW50IGhhbmRsZXIgb24gZG9jdW1lbnQgb2JqZWN0XHJcblxyXG4gICAgaWYgKHJvdyAhPT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBiYWNrZ3JvdW5kIGNvbG9yIGlmIGlzIHBvc3NpYmxlXHJcbiAgICB7XHJcbiAgICAgIGJnU3R5bGVPbGQgPSBnZXRUZFN0eWxlKHJvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zaXRpb24gPSBnZXRTdHlsZSh0YWJsZSwgJ3Bvc2l0aW9uJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGFibGUgQ1NTIHBvc2l0aW9uIChuZWVkZWQgZm9yIGV4Y2x1c2lvbiBcInNjcm9sbCBvZmZzZXRcIiBpZiB0YWJsZSBib3ggaGFzIHBvc2l0aW9uIGZpeGVkKVxyXG5cclxuICAgIGlmIChwb3NpdGlvbiAhPT0gJ2ZpeGVkJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGFibGUgZG9lc24ndCBoYXZlIHN0eWxlIHBvc2l0aW9uOmZpeGVkIHRoZW4gdGFibGUgY29udGFpbmVyIHNob3VsZCBiZSB0ZXN0ZWRcclxuICAgIHtcclxuICAgICAgcG9zaXRpb24gPSBnZXRTdHlsZSh0YWJsZS5wYXJlbnROb2RlLCAncG9zaXRpb24nKTtcclxuICAgIH1cclxuXHJcbiAgICBvZmZzZXQgPSBib3hPZmZzZXQob2JqLCBwb3NpdGlvbik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9iamVjdCBvZmZzZXRcclxuICAgIG9iak1hcmdpbiA9IFtZIC0gb2Zmc2V0WzBdLCBvZmZzZXRbMV0gLSBYLCBvZmZzZXRbMl0gLSBZLCBYIC0gb2Zmc2V0WzNdXTsgICAvLyBjYWxjdWxhdGUgb2Zmc2V0IGZyb20gdGhlIGNsaWNrZWQgcG9pbnQgaW5zaWRlIGVsZW1lbnQgdG8gdGhlIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdCBzaWRlIG9mIHRoZSBlbGVtZW50XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgdGV4dCBzZWxlY3Rpb24gZm9yIG5vbiBJRSBicm93c2Vyc1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2RzIHJldHVybnMgcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgb3IgY2xvbmVzIHRhYmxlIHJvdy5cclxuICAgKiBJZiBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZURvd246XHJcbiAgICogPHVsPlxyXG4gICAqIDxsaT5pbnB1dCBwYXJhbWV0ZXIgaXMgRElWIGNsYXNzPVwicmVkaXBzLXJvd1wiPC9saT5cclxuICAgKiA8bGk+bWV0aG9kIHdpbGwgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY3VycmVudCByb3c8L2xpPlxyXG4gICAqIDwvdWw+XHJcbiAgICogSWYgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlOlxyXG4gICAqIDx1bD5cclxuICAgKiA8bGk+aW5wdXQgcGFyYW1ldGVyIGlzIFRSIChjdXJyZW50IHJvdykgLSBwcmV2aW91c2x5IHJldHVybmVkIHdpdGggdGhpcyBmdW5jdGlvbjwvbGk+XHJcbiAgICogPGxpPm1ldGhvZCB3aWxsIGNsb25lIGN1cnJlbnQgcm93IGFuZCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjbG9uZWQgcm93PC9saT5cclxuICAgKiA8L3VsPlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIERJViBjbGFzcz1cInJlZGlwcy1yb3dcIiBvciBUUiAoY3VycmVudCByb3cpXHJcbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFJldHVybnMgcmVmZXJlbmNlIG9mIHRoZSBjdXJyZW50IHJvdyBvciBjbG9uZSBjdXJyZW50IHJvdyBhbmQgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY2xvbmVkIHJvdy5cclxuICAgKi9cclxuICByb3dDbG9uZSA9IGZ1bmN0aW9uIChlbClcclxuICB7XHJcbiAgICB2YXIgdGFibGVNaW5pOyAgICAgIC8vIG9yaWdpbmFsIHRhYmxlIGlzIGNsb25lZCBhbmQgYWxsIHJvd3MgZXhjZXB0IHBpY2tlZCByb3cgYXJlIGRlbGV0ZWRcclxuICAgIHZhciByb3dPYmo7ICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSByb3cgb2JqZWN0XHJcbiAgICB2YXIgZGl2OyAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgPERJViBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIj4gZWxlbWVudFxyXG5cclxuICAgIGlmIChlbC5ub2RlTmFtZSA9PT0gJ0RJVicpICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEpIHJvd0Nsb25lIGNhbGwgaW4gb25tb3VzZWRvd24gd2lsbCByZXR1cm4gcmVmZXJlbmNlIG9mIFRSIGVsZW1lbnQgKGlucHV0IHBhcmFtZXRlciBpcyBIVE1MRWxlbWVudCA8ZGl2IGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiPilcclxuICAgIHtcclxuICAgICAgZGl2ID0gZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHJlZmVyZW5jZSB0byB0aGUgPERJViBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIj5cclxuICAgICAgZWwgPSBmaW5kUGFyZW50KCdUUicsIGVsKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgcGFyZW50IFRSIGVsZW1lbnRcclxuICAgICAgaWYgKGVsLnJlZGlwcyA9PT0gdW5kZWZpbmVkKSB7IGVsLnJlZGlwcyA9IHt9OyB9ICAgIC8vIGNyZWF0ZSBhIFwicHJvcGVydHkgb2JqZWN0XCIgaW4gd2hpY2ggYWxsIGN1c3RvbSBwcm9wZXJ0aWVzIHdpbGwgYmUgc2F2ZWQgKGl0IGlzIG9ubHkgb25lIHByb3BlcnR5IGZvciBub3cpXHJcbiAgICAgIGVsLnJlZGlwcy5kaXYgPSBkaXY7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHJlZmVyZW5jZSB0byB0aGUgRElWIGVsZW1lbnQgYXMgcmVkaXBzLmRpdiB0aGlzIHdpbGwgbW9zdGx5IGJlIHJlZmVyZW5jZWQgYXMgb2JqT2xkLnJlZGlwcy5kaXYgKGJlY2F1c2Ugb2JqT2xkIGluIHJvdyBkcmFnZ2luZyBjb250ZXh0IGlzIHJlZmVyZW5jZSB0byB0aGUgc291cmNlIHJvdylcclxuICAgICAgcmV0dXJuIGVsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiByZWZlcmVuY2UgdG8gdGhlIFRSIGVsZW1lbnRcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIpIHJvd0Nsb25lIGNhbGwgaW4gb25tb3VzZW1vdmUgd2lsbCBjbG9uZSBjdXJyZW50IHJvdyAoZWwubm9kZU5hbWUgPT09ICdUUicpXHJcbiAgICB7XHJcbiAgICAgIHJvd09iaiA9IGVsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHNvdXJjZSByb3dcclxuXHJcbiAgICAgIHRhYmxlTWluaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XHJcbiAgICAgIHRhYmxlTWluaS5pbm5lckhUTUwgPSAnPHRyIGlkPVwiJyArIHJvd09iai5pZCArICdcIiBjbGFzcz1cIicgKyByb3dPYmouY2xhc3NMaXN0ICsgJ1wiPicgKyByb3dPYmouaW5uZXJIVE1MICsgJzwvdHI+JztcclxuICAgICAgLy90YWJsZU1pbmkuaW5uZXJIVE1MID0gZ2V0QXNzZW1ibHlNYXJrdXAocGFyc2VJbnQocm93T2JqLmlkLnJlcGxhY2UoJ3Jvd2lkJywgJycpKSk7ICAgLy9jYW4gYmUgdXNlZCB0byBzaG93IHRoZSBlbnRpcmUgYXNzZW1ibHkgd2hlbiBkcmFnZ2luZywgdGVuZHMgdG8gc2xvdyB0aGluZ3MgZG93biBhbmQgYmUgY3VtYmVyc29tZVxyXG5cclxuICAgICAgdGFibGVNaW5pLnJlZGlwcyA9IHt9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBcInByb3BlcnR5IG9iamVjdFwiIGluIHdoaWNoIGFsbCBjdXN0b20gcHJvcGVydGllcyB3aWxsIGJlIHNhdmVkXHJcbiAgICAgIHRhYmxlTWluaS5yZWRpcHMuc291cmNlUm93ID0gcm93T2JqOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSBzb3VyY2Ugcm93IHJlZmVyZW5jZSAobmVlZGVkIGZvciBzb3VyY2Ugcm93IGRlbGV0aW9uIGluIHJvd0Ryb3AgbWV0aG9kKVxyXG5cclxuICAgICAgY29weVByb3BlcnRpZXMocm93T2JqLCB0YWJsZU1pbmkucm93c1swXSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGFsbCBjaGlsZCBESVYgZWxlbWVudHMgYW5kIHNldCBvbm1vdXNlZG93bi9vbmRibGNsaWNrIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWRpcHNfY2xvbmUnKS5hcHBlbmRDaGlsZCh0YWJsZU1pbmkpOyAgICAgLy8gYXBwZW5kIGNsb25lZCBtaW5pIHRhYmxlIHRvIHRoZSBESVYgaWQ9XCJyZWRpcHNfY2xvbmVcIlxyXG5cclxuICAgICAgcmV0dXJuIHRhYmxlTWluaTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIGRyb3BzIHRhYmxlIHJvdyB0byB0aGUgdGFyZ2V0IHJvdyBhbmQgY2FsbHMgdXNlciBldmVudCBoYW5kbGVycy4gU291cmNlIHJvdyBpcyBkZWxldGVkIGFuZCBjbG9uZWQgcm93IGlzIGluc2VydGVkIGF0IHRoZSBuZXcgcG9zaXRpb24uXHJcbiAgICogTWV0aG9kIHRha2VzIGNhcmUgYWJvdXQgdGhlIGxhc3Qgcm93IGluIHRoZSB0YWJsZSBvbmx5IGlmIHVzZXIgZHJhZ3MgZWxlbWVudC4gSW4gY2FzZSBvZiBtb3Zpbmcgcm93cyB3aXRoIG1vdmVPYmplY3QoKSwgY29udHJvbFxyXG4gICAqIGFuZCBsb2dpYyBmb3IgbGFzdCByb3cgaXMgdHVybmVkIG9mZi4gVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VVcCgpXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSB0YWJsZUlkeCBUYWJsZSBpbmRleC5cclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHJvd0lkeCBSb3cgaW5kZXguXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gW3RhYmxlTWluaV0gUmVmZXJlbmNlIHRvIHRoZSBtaW5pIHRhYmxlICh0YWJsZSB0aGF0IGNvbnRhaW5zIG9ubHkgb25lIHJvdykuIFRoaXMgaXMgYWN0dWFsbHkgY2xvbmUgb2Ygc291cmNlIHJvdy5cclxuICAgKi9cclxuICByb3dEcm9wID0gZnVuY3Rpb24gKHJvd0lkeClcclxuICB7XHJcbiAgICB2YXIgZHJvcDsgICAgICAgICAgICAgICAvLyAoYm9vbGVhbikgaWYgZmFsc2UgdGhlbiBkcm9wcGluZyByb3cgd2lsbCBiZSBjYW5jZWxlZFxyXG4gICAgdmFyIHRyTWluaTsgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBUUiBpbiBtaW5pIHRhYmxlXHJcbiAgICB2YXIgZGVsZXRlVGFibGVSb3c7ICAgICAvLyBkZWxldGUgcm93IChwcml2YXRlIG1ldGhvZClcclxuXHJcbiAgICBkZWxldGVUYWJsZVJvdyA9IGZ1bmN0aW9uIChlbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSB0YWJsZSByb3cgLSBpbnB1dCBwYXJlbWV0ZXIgaXMgcm93IHJlZmVyZW5jZSAocHJpdmF0ZSBtZXRob2QpXHJcbiAgICB7XHJcbiAgICAgIHZhciB0Ymw7XHJcblxyXG4gICAgICBpZiAoZWwucmVkaXBzID09PSB1bmRlZmluZWQgfHwgIWVsLnJlZGlwcy5lbXB0eVJvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgZG9lc24ndCBoYXZlIGN1c3RvbSBcInJlZGlwc1wiIHByb3BlcnR5IG9yIGlzIG5vdCBtYXJrZWQgYXMgZW1wdHksIHRoZW4gaXQgY2FuIGJlIGRlbGV0ZWRcclxuICAgICAge1xyXG4gICAgICAgIHRibCA9IGZpbmRQYXJlbnQoJ1RBQkxFJywgZWwpO1xyXG4gICAgICAgIHRibC5kZWxldGVSb3coZWwucm93SW5kZXgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2UsIHJvdyBpcyBtYXJrZWQgYXMgXCJlbXB0eVwiIGFuZCBpdCB3aWxsIGJlIG9ubHkgY29sb3JlZCAobm90IGRlbGV0ZWQpLCBjb250ZW50IG9mIHRhYmxlIGNlbGxzIHdpbGwgYmUgZGVsZXRlZCBhbmQgYmFja2dyb3VuZCBjb2xvciB3aWxsIGJlIHNldCB0byBkZWZhdWx0IGNvbG9yXHJcbiAgICAgIHtcclxuICAgICAgICByb3dPcGFjaXR5KGVsLCAnZW1wdHknLCBSRURJUFMuZHJhZy5zdHlsZS5yb3dFbXB0eUNvbG9yKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgdGFibGVNaW5pID0gb2JqOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnRseSBkcmFnZ2VkIHJvdyAtIG1pbmkgdGFibGVcclxuXHJcbiAgICBpZiAocm93SWR4ID4gdGFibGUucm93cy5sZW5ndGggLSAxKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBpbmRleCBpcyBvdXQgb2YgYm91bmRzLCB0aGVuIHNldCBtYXggcm93IGluZGV4IChyb3cgd2lsbCBiZSBhcHBlbmRlZCB0byB0aGUgdGFibGUgYm90dG9tKVxyXG4gICAge1xyXG4gICAgICByb3dJZHggPSB0YWJsZS5yb3dzLmxlbmd0aCAtIDE7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRhYmxlUm93ID0gdGFibGUucm93c1tyb3dJZHhdO1xyXG5cclxuICAgIHRyTWluaSA9IHRhYmxlTWluaS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndHInKVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgVFIgaW4gbWluaSB0YWJsZSAobWluaSB0YWJsZSBoYXMgb25seSBvbmUgcm93IC0gZmlyc3Qgcm93KVxyXG5cclxuICAgIHRhYmxlTWluaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRhYmxlTWluaSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVzdHJveSBtaW5pIHRhYmxlIChub2RlIHN0aWxsIGV4aXN0cyBpbiBtZW1vcnkpXHJcblxyXG4gICAgZHJvcCA9IFJFRElQUy5kcmFnLmV2ZW50LnJvd0Ryb3BwZWRCZWZvcmUodGFibGUsIHRhYmxlTWluaS5yZWRpcHMuc291cmNlUm93LnJvd0luZGV4KTsgICAgICAvLyBjYWxsIGV2ZW50LnJvd0Ryb3BwZWRCZWZvcmUoKSAtIHRoaXMgaGFuZGxlciBjYW4gcmV0dXJuIFwiZmFsc2VcIiB2YWx1ZVxyXG5cclxuICAgIGlmIChkcm9wICE9PSBmYWxzZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaGFuZGxlciByZXR1cm5lZCBmYWxzZSB0aGVuIHJvdyBkcm9wcGluZyB3aWxsIGJlIGNhbmNlbGVkXHJcbiAgICB7XHJcbiAgICAgIGlmIChyb3dJZHggPCB0YWJsZS5yb3dzLmxlbmd0aCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBpcyBub3QgZHJvcHBlZCB0byB0aGUgbGFzdCByb3cgcG9zaXRpb25cclxuICAgICAge1xyXG4gICAgICAgIHRhYmxlUm93LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRyTWluaSwgdGFibGVSb3cubmV4dFNpYmxpbmcpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyBpcyBkcm9wcGVkIHRvIHRoZSBsYXN0IHJvdyBwb3NpdGlvbiwgaXQncyBwb3NzaWJsZSB0byBzZXQgdGFyZ2V0IHJvdyBpbmRleCBncmVhdGVyIHRoZW4gbnVtYmVyIG9mIHJvd3MgLSBpbiB0aGlzIGNhc2Ugcm93IHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhlIHRhYmxlIGVuZFxyXG4gICAgICB7XHJcbiAgICAgICAgdGFibGVSb3cucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0ck1pbmkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyBzaG91bGQgYmUgYXBwZW5kZWRcclxuICAgICAgICB0YWJsZVJvdyA9IHRhYmxlLnJvd3NbMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgdXBwZXIgcm93LCBhZnRlciByb3cgaXMgYXBwZW5kZWQsIHVwcGVyIHJvdyBzaG91bGQgYmUgdGVzdGVkIGlmIGNvbnRhaW5zIFwiZW1wdHlSb3dcIiBzZXQgdG8gdHJ1ZSwgdGhpcyBjb3VsZCBoYXBwZW4gaW4gY2FzZSB3aGVuIHJvdyBpcyBtb3ZlZCB0byB0aGUgdGFibGUgd2l0aCBvbmx5IG9uZSBlbXB0eSByb3dcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIHNvdXJjZSByb3cgaWYgcm93IGlzIG5vdCBjbG9uZWRcclxuICAgICAge1xyXG4gICAgICAgIGRlbGV0ZVRhYmxlUm93KHRhYmxlTWluaS5yZWRpcHMuc291cmNlUm93KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZGVsZXRlIHRyTWluaS5yZWRpcHMuZW1wdHlSb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGVtcHR5Um93IHByb3BlcnR5IGZyb20gaW5zZXJ0ZWQvYXBwZW5kZWQgcm93IGJlY2F1c2UgZW1wdHlSb3cgd2lsbCBiZSBzZXQgb24gbmV4dCBtb3ZlLCBjb3B5UHJvcGVydGllcygpIGluIHJvd0Nsb25lKCkgY29waWVkIGVtcHR5Um93IHByb3BlcnR5IHRvIHRoZSByb3cgaW4gdGFibGVNaW5pLCBvdGhlcndpc2Ugcm93IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYW5kIHRoYXQgaXMgbm90IGdvb2RcclxuICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93RHJvcHBlZCh0YWJsZVJvdyk7ICAgICAgICAgLy8gY2FsbCByb3dEcm9wcGVkIGV2ZW50IGhhbmRsZXJcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnQucm93RHJvcHBlZEJlZm9yZSgpIHJldHVybmVkIFwiZmFsc2VcIiAoaXQncyB1cCB0byB1c2VyIHRvIHJldHVybiBzb3VyY2Ugcm93IG9wYWNpdHkgdG8gaXRzIG9yaWdpbmFsIHN0YXRlKVxyXG4gICAge1xyXG4gICAgICAvLyByb3dPcGFjaXR5KG9iak9sZCwgMTAwKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogb25tb3VzZXVwIGV2ZW50IGhhbmRsZXIuXHJcbiAgICogaGFuZGxlck9uTW91c2VVcCBpcyBhdHRhY2hlZCB0byB0aGUgRElWIGVsZW1lbnQgaW4gYSBtb21lbnQgd2hlbiBESVYgZWxlbWVudCBpcyBjbGlja2VkICh0aGlzIGhhcHBlbnMgaW4gaGFuZGxlck9uTW91c2VEb3duKS5cclxuICAgKiBUaGlzIGV2ZW50IGhhbmRsZXIgZGV0YWNoZXMgb25tb3VzZW1vdmUgYW5kIG9ubW91c2V1cCBldmVudCBoYW5kbGVycy5cclxuICAgKiBAcGFyYW0ge0V2ZW50fSBlIEV2ZW50IGluZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIGhhbmRsZXJPbk1vdXNlVXAgPSBmdW5jdGlvbiAoZSlcclxuICB7XHJcbiAgICB2YXIgZXZ0ID0gZSB8fCB3aW5kb3cuZXZlbnQ7ICAgIC8vIGRlZmluZSBldmVudCAoRkYgJiBJRSlcclxuICAgIHZhciByX3JvdzsgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciBtb2RlPVwicm93XCJcclxuICAgIHZhciBtdF90cjsgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciByZXR1cm5pbmcgY29sb3IgdG8gdGhlIHRhYmxlIGNlbGwgKG10X3RyIC0gXCJtaW5pIHRhYmxlXCIgXCJ0YWJsZV9yb3dcIilcclxuICAgIHZhciBYLCBZOyAgICAgICAgICAgICAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICB2YXIgaTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZWQgaW4gbG9jYWwgbG9vcFxyXG4gICAgdmFyIGRyb3A7ICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBmYWxzZSB0aGVuIGRyb3BwZWQgRElWIGVsZW1lbnRcclxuXHJcbiAgICBYID0gZXZ0LmNsaWVudFg7XHJcbiAgICBZID0gZXZ0LmNsaWVudFk7XHJcblxyXG4gICAgZWRnZS5mbGFnLnggPSBlZGdlLmZsYWcueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHR1cm4gb2ZmIGF1dG9zY3JvbGwgXCJjdXJyZW50IGNlbGxcIiBoYW5kbGluZyAoaWYgdXNlciBtb3VzZXVwIGluIHRoZSBtaWRkbGUgb2YgYXV0b3Njcm9sbGluZylcclxuXHJcbiAgICBSRURJUFMuZXZlbnQucmVtb3ZlKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgaGFuZGxlck9uTW91c2VNb3ZlKTtcclxuICAgIFJFRElQUy5ldmVudC5yZW1vdmUoZG9jdW1lbnQsICdtb3VzZXVwJywgaGFuZGxlck9uTW91c2VVcCk7XHJcblxyXG4gICAgZHJhZ0NvbnRhaW5lci5vbnNlbGVjdHN0YXJ0ID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldGFjaCBkcmFnQ29udGFpbmVyLm9uc2VsZWN0c3RhcnQgaGFuZGxlciB0byBlbmFibGUgc2VsZWN0IGZvciBJRTcvSUU4IGJyb3dzZXJcclxuXHJcbiAgICByZXNldFN0eWxlcyhvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgb2JqZWN0IHN0eWxlc1xyXG5cclxuICAgIHNjcm9sbERhdGEud2lkdGggID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoO1xyXG4gICAgc2Nyb2xsRGF0YS5oZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xyXG5cclxuICAgIGVkZ2UuZmxhZy54ID0gZWRnZS5mbGFnLnkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBhdXRvc2Nyb2xsIGZsYWdzXHJcblxyXG4gICAgaWYgKHJvdyA9PT0gbnVsbCB8fCBjZWxsID09PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIERJViBlbGVtZW50IHdhcyBjbGlja2VkIGFuZCBsZWZ0IGJ1dHRvbiB3YXMgcmVsZWFzZWQsIGJ1dCBlbGVtZW50IGlzIHBsYWNlZCBpbnNpZGUgdW5tb3ZhYmxlIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgUkVESVBTLmRyYWcuZXZlbnQubm90TW92ZWQoKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgUkVESVBTLmRyYWcudGQudGFyZ2V0ID0gdGQudGFyZ2V0ID0gdGFibGUucm93c1tyb3ddLmNlbGxzW2NlbGxdO1xyXG5cclxuICAgICAgc2V0VGRTdHlsZShyb3csIGJnU3R5bGVPbGQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciBmb3IgZGVzdGluYXRpb24gcm93XHJcblxyXG4gICAgICByX3JvdyA9IHJvdztcclxuXHJcbiAgICAgIGlmICghbW92ZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IHdhcyBjbGlja2VkIGFuZCBtb3VzZSBidXR0b24gd2FzIHJlbGVhc2VkIHJpZ2h0IGF3YXkgKHJvdyB3YXMgbm90IG1vdmVkKVxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Tm90TW92ZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyB3YXMgbW92ZWRcclxuICAgICAge1xyXG4gICAgICAgIGlmIChyb3dfc291cmNlID09PSByX3JvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBkcm9wcGVkIHRvIHRoZSBzb3VyY2Ugcm93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbXRfdHIgPSBvYmouZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RyJylbMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgVFIgaW4gbWluaSB0YWJsZSAobWluaSB0YWJsZSBoYXMgb25seSBvbmUgcm93KVxyXG5cclxuICAgICAgICAgIG9iak9sZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBtdF90ci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7ICAgICAgICAgICAvLyByZXR1cm4gY29sb3IgdG8gdGhlIHNvdXJjZSByb3cgZnJvbSB0aGUgcm93IG9mIGNsb25lZCBtaW5pIHRhYmxlLCBjb2xvciBvZiB0aGUgc291cmNlIHJvdyBjYW4gYmUgY2hhbmdlZCBpbiBldmVudC5yb3dNb3ZlZCgpICh3aGVuIHVzZXIgd2FudHMgdG8gbWFyayBzb3VyY2Ugcm93KVxyXG5cclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBtdF90ci5jZWxscy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gY29sb3IgdG8gdGhlIGVhY2ggdGFibGUgY2VsbFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBvYmpPbGQuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbXRfdHIuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgY2xvbmVkIG1pbmkgdGFibGVcclxuICAgICAgICAgIGRlbGV0ZSBvYmpPbGQucmVkaXBzLmVtcHR5Um93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgZW1wdHlSb3cgcHJvcGVydHkgZnJvbSBzb3VyY2Ugcm93IGJlY2F1c2UgZW1wdHlSb3cgd2lsbCBiZSBzZXQgb24gbmV4dCBtb3ZlLCBvdGhlcndpc2Ugcm93IHdvdWxkIGJlIG92ZXJ3cml0dGVuIGFuZCB0aGF0J3Mgbm8gZ29vZFxyXG5cclxuICAgICAgICAgIGlmIChjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgd2FzIGNsb25lZCBhbmQgZHJvcHBlZCB0byB0aGUgc291cmNlIGxvY2F0aW9uIHRoZW4gY2FsbCByb3dOb3RDbG9uZWQgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dOb3RDbG9uZWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LnJvd0Ryb3BwZWRTb3VyY2UoKSBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0Ryb3BwZWRTb3VyY2UodGQudGFyZ2V0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGRyb3BwZWQgdG8gdGhlIG5ldyByb3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICByb3dEcm9wKHJfcm93KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICghY2xvbmVkICYmICF0aHJlc2hvbGQuZmxhZykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xpY2tlZCBlbGVtZW50IHdhcyBub3QgbW92ZWQgLSBESVYgZWxlbWVudCBkaWRuJ3QgY3Jvc3MgdGhyZXNob2xkIHZhbHVlLCBqdXN0IGNhbGwgZXZlbnQubm90TW92ZWQgZXZlbnQgaGFuZGxlclxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQubm90TW92ZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChjbG9uZWQgJiYgcm93X3NvdXJjZSA9PT0gcm93ICYmIGNlbGxfc291cmNlID09PSBjZWxsKSAgICAgICAgICAgIC8vIGRlbGV0ZSBjbG9uZWQgZWxlbWVudCBpZiBkcm9wcGVkIG9uIHRoZSBzdGFydCBwb3NpdGlvblxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTtcclxuICAgICAgICBjbG9uZWRJZFtvYmpPbGQuaWRdIC09IDE7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQubm90Q2xvbmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoY2xvbmVkICYmIFJFRElQUy5kcmFnLmNsb25lLmRyb3AgPT09IGZhbHNlICYmIChYIDwgdGFibGUucmVkaXBzLm9mZnNldFszXSB8fCBYID4gdGFibGUucmVkaXBzLm9mZnNldFsxXSB8fCBZIDwgdGFibGUucmVkaXBzLm9mZnNldFswXSB8fCBZID4gdGFibGUucmVkaXBzLm9mZnNldFsyXSkpICAgIC8vIGRlbGV0ZSBjbG9uZWQgZWxlbWVudCBpZiBkcm9wcGVkIG91dHNpZGUgY3VycmVudCB0YWJsZSBhbmQgY2xvbmUuZHJvcCBpcyBzZXQgdG8gZmFsc2VcclxuICAgICAge1xyXG4gICAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7XHJcbiAgICAgICAgY2xvbmVkSWRbb2JqT2xkLmlkXSAtPSAxO1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdENsb25lZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBjYWxsIGV2ZW50LmRyb3BwZWRCZWZvcmUoKSwgYXBwZW5kIG9iamVjdCB0byB0aGUgY2VsbCBhbmQgY2FsbCBldmVudC5kcm9wcGVkKClcclxuICAgICAge1xyXG4gICAgICAgIGRyb3AgPSBSRURJUFMuZHJhZy5ldmVudC5kcm9wcGVkQmVmb3JlKHRkLnRhcmdldCk7ICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQuZHJvcHBlZEJlZm9yZSBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgZWxlbWVudERyb3AoZHJvcCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZHJvcCBlbGVtZW50IHRvIHRoZSB0YWJsZSBjZWxsIChvciBkZWxldGUgY2xvbmVkIGVsZW1lbnQgaWYgZHJvcD1cImZhbHNlXCIpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjYWxjdWxhdGUgdGFibGUgY2VsbHMgYW5kIHNjcm9sbGVycyBiZWNhdXNlIGNlbGwgY29udGVudCBjb3VsZCBjaGFuZ2Ugcm93IGRpbWVuc2lvbnNcclxuICAgICAgUkVESVBTLmRyYWcuZXZlbnQuZmluaXNoKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGxhc3QgZXZlbnQgaGFuZGxlclxyXG4gICAgfVxyXG5cclxuICAgIHJvd19vbGQgPSBjZWxsX29sZCA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvbGQgcG9zaXRpb25zXHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEVsZW1lbnQgZHJvcC4gVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VVcCBhbmQgYXBwZW5kcyBlbGVtZW50IHRvIHRoZSB0YXJnZXQgdGFibGUgY2VsbC5cclxuICAgKiBJZiBpbnB1dCBwYXJhbWV0ZXIgXCJkcm9wXCIgaXMgc2V0IHRvIFwiZmFsc2VcIiAodGhpcyBpcyBhY3R1YWxseSByZXR1cm4gdmFsdWUgZnJvbSBldmVudC5kcm9wcGVkQmVmb3JlKSB0aGVuIERJViBlbGVtZW50cyB3aWxsIG5vdCBiZSBkcm9wcGVkIChvbmx5IGNsb25lZCBlbGVtZW50IHdpbGwgYmUgZGVsZXRlZCkuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbZHJvcF0gSWYgbm90IFwiZmFsc2VcIiB0aGVuIERJViBlbGVtZW50IHdpbGwgYmUgZHJvcHBlZCB0byB0aGUgY2VsbC5cclxuICAgKi9cclxuICBlbGVtZW50RHJvcCA9IGZ1bmN0aW9uIChkcm9wKSBcclxuICB7XHJcbiAgICB2YXIgY2xvbmVTb3VyY2VEaXYgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZSBzb3VyY2UgZWxlbWVudCAobmVlZGVkIGlmIGNsb25lLnNlbmRCYWNrIGlzIHNldCB0byB0cnVlKVxyXG4gICAgdmFyIGRpdjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9kZUxpc3Qgb2YgRElWIGVsZW1lbnRzIGluIHRhcmdldCBjZWxsIChuZWVkZWQgaWYgY2xvbmUuc2VuZEJhY2sgaXMgc2V0IHRvIHRydWUpXHJcbiAgICBcclxuICAgIGlmIChkcm9wICE9PSBmYWxzZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGlucHV0IHBhcmFtZXRlciBpcyBub3QgXCJmYWxzZVwiIHRoZW4gRElWIGVsZW1lbnQgd2lsbCBiZSBkcm9wcGVkIHRvIHRoZSB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIGlmIChjbG9uZS5zZW5kQmFjayA9PT0gdHJ1ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjbG9uZS5zZW5kQmFjayBpcyBzZXQgdG8gdHJ1ZSB0aGVuIHRyeSB0byBmaW5kIHNvdXJjZSBlbGVtZW50IGluIHRhcmdldCBjZWxsXHJcbiAgICAgIHtcclxuICAgICAgICBkaXYgPSB0ZC50YXJnZXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0RJVicpOyAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBhbGwgRElWIGVsZW1lbnRzIGluIHRhcmdldCBjZWxsXHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXYubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggYWxsIERJViBlbGVtZW50cyBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIC8vIGlmIERJViBpbiB0YXJnZXQgY2VsbCBpcyBzb3VyY2Ugb2YgZHJvcHBlZCBESVYgZWxlbWVudCAoZHJvcHBlZCBESVYgaWQgYW5kIGlkIG9mIERJViBpbiB0YXJnZXQgY2VsbCBoYXMgdGhlIHNhbWUgbmFtZSBiZWdpbm5pbmcgbGlrZSBcImQxMmMyXCIgYW5kIFwiZDEyXCIpXHJcbiAgICAgICAgICAvLyBvZiBjb3Vyc2UsIHRoZSBjYXNlIHdoZXJlIHNvdXJjZSBESVYgZWxlbWVudCBpcyBkcm9wcGVkIHRvIHRoZSBjZWxsIHdpdGggY2xvbmVkIERJViBlbGVtZW50IHNob3VsZCBiZSBleGNsdWRlZCAocG9zc2libGUgaW4gY2xpbWl0MSB0eXBlKVxyXG4gICAgICAgICAgaWYgKG9iaiAhPT0gZGl2W2ldICYmIG9iai5pZC5pbmRleE9mKGRpdltpXS5pZCkgPT09IDApIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBjbG9uZVNvdXJjZURpdiA9IGRpdltpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byBjbG9uZVNvdXJjZURpdiBlbGVtZW50XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoY2xvbmVTb3VyY2VEaXYpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNsb25lIHNvdXJjZSBESVYgZWxlbWVudCBleGlzdHMgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjbG9uZUxpbWl0KGNsb25lU291cmNlRGl2LCAxKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY2xpbWl0IGNsYXNzIChpbmNyZW1lbnQgYnkgMSlcclxuICAgICAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkcm9wcGVkIERJViBlbGVtZW50XHJcbiAgICAgICAgICByZXR1cm47ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZnJvbSB0aGUgbWV0aG9kIChldmVyeXRoaW5nIGlzIGRvbmUpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0ZC50YXJnZXQuYXBwZW5kQ2hpbGQob2JqKTtcclxuICAgICAgXHJcbiAgICAgIHJlZ2lzdGVyRXZlbnRzKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIChGSVggZm9yIFNhZmFyaSBNb2JpbGUpXHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmRyb3BwZWQodGQudGFyZ2V0KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5kcm9wcGVkIGJlY2F1c2UgY2xvbmVMaW1pdCBjb3VsZCBjYWxsIGV2ZW50LmNsb25lZEVuZDEgb3IgZXZlbnQuY2xvbmVkRW5kMlxyXG4gICAgICBcclxuICAgICAgaWYgKGNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBvYmplY3QgaXMgY2xvbmVkXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5jbG9uZWREcm9wcGVkKHRkLnRhcmdldCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGNsb25lZERyb3BwZWQgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgIGNsb25lTGltaXQob2JqT2xkLCAtMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjbGltaXQxX1ggb3IgY2xpbWl0Ml9YIGNsYXNzbmFtZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChjbG9uZWQgJiYgb2JqLnBhcmVudE5vZGUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmVkIGVsZW1lbnQgc2hvdWxkIGJlIGRlbGV0ZWQgKGlmIG5vdCBhbHJlYWR5IGRlbGV0ZWQpXHJcbiAgICB7XHJcbiAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIGZvciBESVYgZWxlbWVudC5cclxuICAgKiBESVYgZWxlbWVudHMgc2hvdWxkIGhhdmUgb25seSBvbm1vdXNlZG93biAodXNpbmcgdHJhZGl0aW9uYWwgZXZlbnQgcmVnaXN0cmF0aW9uIG1vZGVsKS5cclxuICAgKiBJIGhhZCBhIHByb2JsZW0gd2l0aCBhZHZhbmNlZCBldmVudCByZWdpc3RyYXRpb24gbW9kZWwuXHJcbiAgICogSW4gY2FzZSBvZiB1c2luZyBhZHZhbmNlZCBtb2RlbCwgc2VsZWN0ZWQgdGV4dCBhbmQgZHJhZ2dlZCBESVYgZWxlbWVudCB3ZXJlIGluIGNvbGxpc2lvbi5cclxuICAgKiBJdCBsb29rcyBsaWtlIHNlbGVjdGVkIHRleHQgd2FzIGFibGUgdG8gZHJhZyBpbnN0ZWFkIG9mIERJViBlbGVtZW50LlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGRpdiBSZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgZm9yIG9ubW91c2Vkb3duLCBvbnRvdWNoc3RhcnQgYW5kIG9uZGJsY2xpY2sgdG8gdGhlIERJViBlbGVtZW50LlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2ZsYWddIElmIHNldCB0byBmYWxzZSB0aGVuIGV2ZW50IGxpc3RlbmVycyB3aWxsIGJlIGRlbGV0ZWQuXHJcbiAgICovXHJcbiAgcmVnaXN0ZXJFdmVudHMgPSBmdW5jdGlvbiAoZGl2LCBmbGFnKVxyXG4gIHtcclxuICAgIGlmIChmbGFnID09PSBmYWxzZSkgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZmxhZyBpcyBzZSB0byBmYWxzZSwgdGhlbiByZW1vdmUgZXZlbnQgbGlzdGVuZXJzIG9uIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGRpdi5vbm1vdXNlZG93biA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIGRpdi5vbm1vdXNlZG93biA9IGhhbmRsZXJPbk1vdXNlRG93bjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgcmVzZXRTdHlsZXMgPSBmdW5jdGlvbiAoZWwpICAgICAgICAgLy8gQWZ0ZXIgZWxlbWVudCBpcyBkcm9wcGVkLCBzdHlsZXMgbmVlZCB0byBiZSByZXNldC5cclxuICB7XHJcbiAgICBlbC5zdHlsZS50b3AgID0gJyc7XHJcbiAgICBlbC5zdHlsZS5sZWZ0ID0gJyc7XHJcbiAgICBlbC5zdHlsZS5wb3NpdGlvbiA9ICcnO1xyXG4gICAgZWwuc3R5bGUuekluZGV4ID0gJyc7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogb25tb3VzZW1vdmUgZXZlbnQgaGFuZGxlci5cclxuICAgKiBoYW5kbGVyT25Nb3VzZU1vdmUgaXMgYXR0YWNoZWQgdG8gZG9jdW1lbnQgbGV2ZWwgaW4gYSBtb21lbnQgd2hlbiBESVYgZWxlbWVudCBpcyBjbGlja2VkICh0aGlzIGhhcHBlbnMgaW4gaGFuZGxlck9uTW91c2VEb3duKS5cclxuICAgKiBoYW5kbGVyT25Nb3VzZVVwIGRldGFjaGVzIG9ubW91c2Vtb3ZlIGFuZCBvbm1vdXNldXAgZXZlbnQgaGFuZGxlcnMuXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZSBFdmVudCBpbmZvcm1hdGlvbi5cclxuICAgKi9cclxuICBoYW5kbGVyT25Nb3VzZU1vdmUgPSBmdW5jdGlvbiAoZSlcclxuICB7XHJcbiAgICB2YXIgZXZ0ID0gZSB8fCB3aW5kb3cuZXZlbnQ7ICAgICAgICAgICAgLy8gZGVmaW5lIGV2ZW50IChGRiAmIElFKVxyXG4gICAgdmFyIGJvdW5kID0gUkVESVBTLmRyYWcuc2Nyb2xsLmJvdW5kOyAgIC8vIHJlYWQgXCJib3VuZFwiIHB1YmxpYyBwcm9wZXJ0eSAobWF5YmUgY29kZSB3aWxsIGJlIGZhc3RlciwgYW5kIGl0IHdpbGwgYmUgZWFzaWVyIHRvIHJlZmVyZW5jZSBpbiBvbm1vdXNlbW92ZSBoYW5kbGVyKVxyXG4gICAgdmFyIHNjYTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYVxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgdmFyIGRlbHRhWCwgZGVsdGFZOyAgICAgICAgICAgICAgICAgICAgIC8vIGRlbHRhIGZyb20gaW5pdGlhbCBwb3NpdGlvblxyXG4gICAgdmFyIGk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgbG9jYWwgbG9vcFxyXG4gICAgdmFyIHNjcm9sbFBvc2l0aW9uOyAgICAgICAgICAgICAgICAgICAgIC8vIHNjcm9sbCBwb3NpdGlvbiB2YXJpYWJsZSBuZWVkZWQgZm9yIGF1dG9zY3JvbGwgY2FsbFxyXG5cclxuICAgIFggPSBwb2ludGVyLnggPSBldnQuY2xpZW50WDtcclxuICAgIFkgPSBwb2ludGVyLnkgPSBldnQuY2xpZW50WTtcclxuXHJcbiAgICBkZWx0YVggPSBNYXRoLmFicyh0aHJlc2hvbGQueCAtIFgpOyAgICAgICAgIC8vIGNhbGN1bGF0ZSBkZWx0YSBmcm9tIGluaXRpYWwgcG9zaXRpb25cclxuICAgIGRlbHRhWSA9IE1hdGguYWJzKHRocmVzaG9sZC55IC0gWSk7XHJcblxyXG4gICAgaWYgKCFtb3ZlZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBcIm1vdmVkXCIgZmxhZyBpc24ndCBzZXQgKHRoaXMgaXMgdGhlIGZpcnN0IG1vbWVudCB3aGVuIG9iamVjdCBpcyBtb3ZlZClcclxuICAgIHtcclxuICAgICAgLy9yZW1lbWJlciByZWZlcmVuY2Ugb2YgdGhlIHNvdXJjZSByb3csIGNsb25lIHNvdXJjZSByb3cgYW5kIHNldCBvYmogYXMgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHJvdyBzZXR0aW5ncyBvZiBcImNsb25lZFwiIGZsYWcgc2hvdWxkIGdvIGJlZm9yZSBjYWxsaW5nIHJvd0Nsb25lKCkgYmVjYXVzZSBcImNsb25lZFwiIGlzIG5lZWRlZCBpbiByb3dDbG9uZSgpIHRvIGN1dCBvdXQgXCJyZWRpcHMtY2xvbmVcIiBjbGFzcyBuYW1lIGZyb20gPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3cgcmVkaXBzLWNsb25lXCI+IGVsZW1lbnRzXHJcbiAgICAgIGlmIChjbG9uZUNsYXNzIHx8IChSRURJUFMuZHJhZy5jbG9uZS5rZXlSb3cgPT09IHRydWUgJiYgc2hpZnRLZXkpKVxyXG4gICAgICB7XHJcbiAgICAgICAgY2xvbmVkID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgUkVESVBTLmRyYWcub2JqT2xkID0gb2JqT2xkID0gb2JqOyAgICAgICAgLy8gcmVtZW1iZXIgcmVmZXJlbmNlIHRvIHRoZSBzb3VyY2Ugcm93XHJcbiAgICAgIFJFRElQUy5kcmFnLm9iaiA9IG9iaiA9IHJvd0Nsb25lKG9iaik7ICAgIC8vIGNsb25lIHNvdXJjZSByb3cgYW5kIHNldCBhcyBvYmpcclxuICAgICAgb2JqLnN0eWxlLnpJbmRleCA9IDk5OTsgICAgICAgICAgICAgICAgICAgLy8gc2V0IGhpZ2ggei1pbmRleCBmb3IgY2xvbmVkIG1pbmkgdGFibGVcclxuXHJcbiAgICAgIG9iai5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7ICAgICAgICAgICAgIC8vIHNldCBzdHlsZSB0byBmaXhlZCB0byBhbGxvdyBkcmFnZ2luZyBESVYgb2JqZWN0XHJcbiAgICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGNhbGN1bGF0ZSBjZWxscyBmb3IgY2FzZSB3aGVyZSBtb3ZlZCBlbGVtZW50IGNoYW5nZWQgY2VsbCBkaW1lbnNpb24sIHBsYWNlIDMgZWxlbWVudHMgaW4gdGhlIHNhbWUgY2VsbCBpbiBleGFtcGxlMDggYW5kIHRyeSB0byBtb3ZlIG9uZSBvdXQgb2YgdGhlIHRhYmxlIGNlbGxcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY29sdW1uXHJcblxyXG4gICAgICBpZiAoY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50IGhhbmRsZXIgKHJvdyBjbG9uZWQvbW92ZWQpXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dDbG9uZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dNb3ZlZCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRQb3NpdGlvbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbG9yIGZvciB0aGUgY3VycmVudCB0YWJsZSBjZWxsIGFuZCByZW1lbWJlciBwcmV2aW91cyBwb3NpdGlvbiBhbmQgY29sb3IsIHNldFBvc2l0aW9uKCkgbXVzdCBnbyBhZnRlciBjYWxsaW5nIGV2ZW50Lm1vdmVkKCkgYW5kIGV2ZW50LnJvd01vdmVkKCkgaWYgdXNlciB3YW50cyB0byBjaGFuZ2UgY29sb3Igb2Ygc291cmNlIHJvd1xyXG5cclxuICAgICAgaWYgKFggPiBzY3JlZW4ud2lkdGggLSBvYmpNYXJnaW5bMV0pICAgIC8vIGlmIGVsZW1lbnQgaXMgZmFyIGF3YXkgb24gdGhlIHJpZ2h0IHNpZGUgb2YgcGFnZSwgc2V0IHBvc3NpYmxlIHJpZ2h0IHBvc2l0aW9uIChzY3JlZW4ud2lkdGggLSBvYmplY3Qgd2lkdGgpLCBvYmpNYXJnaW5bMV0gKyBvYmpNYXJnaW5bM10gPSBvYmplY3Qgd2lkdGhcclxuICAgICAge1xyXG4gICAgICAgIG9iai5zdHlsZS5sZWZ0ID0gKHNjcmVlbi53aWR0aCAtIChvYmpNYXJnaW5bMV0gKyAgb2JqTWFyZ2luWzNdKSkgKyAncHgnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoWSA+IHNjcmVlbi5oZWlnaHQgLSBvYmpNYXJnaW5bMl0pICAgLy8gaWYgZWxlbWVudCBpcyBiZWxvdyBwYWdlIGJvdHRvbSwgc2V0IHBvc3NpYmxlIGxvd2VyIHBvc2l0aW9uIChzY3JlZW4ud2lkdGggLSBvYmplY3QgaGVpZ2h0KSwgb2JqTWFyZ2luWzBdICsgb2JqTWFyZ2luWzJdID0gb2JqZWN0IGhlaWdodFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnN0eWxlLnRvcCAgPSAoc2NyZWVuLmhlaWdodCAtIChvYmpNYXJnaW5bMF0gKyBvYmpNYXJnaW5bMl0pKSArICdweCc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb3ZlZCA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgbW92ZWRfZmxhZ1xyXG5cclxuICAgIC8vIHNldCBsZWZ0IGFuZCB0b3Agc3R5bGVzIGZvciB0aGUgbW92ZWQgZWxlbWVudCBpZiBlbGVtZW50IGlzIGluc2lkZSB3aW5kb3csIHRoaXMgY29uZGl0aW9ucyB3aWxsIHN0b3AgZWxlbWVudCBvbiB3aW5kb3cgYm91bmRzXHJcbiAgICBpZiAoWCA+IG9iak1hcmdpblszXSAmJiBYIDwgc2NyZWVuLndpZHRoIC0gb2JqTWFyZ2luWzFdKVxyXG4gICAge1xyXG4gICAgICBvYmouc3R5bGUubGVmdCA9IChYIC0gb2JqTWFyZ2luWzNdKSArICdweCc7XHJcbiAgICB9XHJcbiAgICBpZiAoWSA+IG9iak1hcmdpblswXSAmJiBZIDwgc2NyZWVuLmhlaWdodCAtIG9iak1hcmdpblsyXSlcclxuICAgIHtcclxuICAgICAgb2JqLnN0eWxlLnRvcCAgPSAoWSAtIG9iak1hcmdpblswXSkgKyAncHgnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgKHRoaXMgY29uZGl0aW9uIHNob3VsZCBzcGFyZSBDUFUpOiAxKSBpZiBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSBESVYgaWQ9XCJyZWRpcHMtZHJhZ1wiIDIpIGFuZCBhdXRvc2Nyb2xsIGlzIG5vdCB3b3JraW5nIDMpIGFuZCBjdXJyZW50IHRhYmxlIGNvbnRhaW5zIG5lc3RlZCB0YWJsZSBvciBjdXJzb3IgaXMgb3V0c2lkZSBvZiBjdXJyZW50IGNlbGxcclxuICAgIGlmIChYIDwgZGl2Qm94WzFdICYmIFggPiBkaXZCb3hbM10gJiYgWSA8IGRpdkJveFsyXSAmJiBZID4gZGl2Qm94WzBdICYmXHJcbiAgICAgIGVkZ2UuZmxhZy54ID09PSAwICYmIGVkZ2UuZmxhZy55ID09PSAwICYmXHJcbiAgICAgIChjdXJyZW50Q2VsbC5jb250YWluVGFibGUgfHwgKFggPCBjdXJyZW50Q2VsbFszXSB8fCBYID4gY3VycmVudENlbGxbMV0gfHwgWSA8IGN1cnJlbnRDZWxsWzBdIHx8IFkgPiBjdXJyZW50Q2VsbFsyXSkpKVxyXG4gICAge1xyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUgcm93IGFuZCB0YWJsZSBjZWxsXHJcbiAgICAgIGNlbGxDaGFuZ2VkKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBuZXcgbG9jYXRpb24gaXMgaW5zaWRlIHRhYmxlIGFuZCBuZXcgbG9jYXRpb24gaXMgZGlmZmVyZW50IHRoZW4gb2xkIGxvY2F0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgYXV0b1Njcm9sbCBvcHRpb24gaXMgZW5hYmxlZCAoYnkgZGVmYXVsdCBpdCBpcyBidXQgaXQgY2FuIGJlIHR1cm5lZCBvZmYpXHJcbiAgICBpZiAoUkVESVBTLmRyYWcuc2Nyb2xsLmVuYWJsZSlcclxuICAgIHtcclxuICAgICAgZWRnZS5wYWdlLnggPSBib3VuZCAtIChzY3JlZW4ud2lkdGggLyAyICA+IFggPyBYIC0gb2JqTWFyZ2luWzNdIDogc2NyZWVuLndpZHRoIC0gWCAtIG9iak1hcmdpblsxXSk7ICAgICAgIC8vIGNhbGN1bGF0ZSBob3Jpem9udGFsbHkgY3Jvc3NlZCBwYWdlIGJvdW5kXHJcblxyXG4gICAgICBpZiAoZWRnZS5wYWdlLnggPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWxlbWVudCBjcm9zc2VzIHBhZ2UgYm91bmQgdGhlbiBzZXQgc2Nyb2xsIGRpcmVjdGlvbiBhbmQgY2FsbCBhdXRvIHNjcm9sbFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGVkZ2UucGFnZS54ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdoZW4gb2JqZWN0IGlzIG9ubHkgaGFsZiB2aXNpYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWRnZS5wYWdlLnggPSBib3VuZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGdldCBob3Jpem9udGFsIHdpbmRvdyBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgICAvL3Njcm9sbFBvc2l0aW9uID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xyXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uID0gMDsgICAvL2Rpc2FibGluZyBiZWNhdXNlIHdlIHNob3VsZG4ndCBoYXZlIHRoZSB1c2VyIHNjcm9sbGluZyBob3Jpem9udGFsbHkgYW5kIHRoaXMgaW1wcm92ZXMgcGVyZm9ybWFuY2UgZm9yIGxhcmdlIHRyZWVzXHJcblxyXG4gICAgICAgIGVkZ2UucGFnZS54ICo9IFggPCBzY3JlZW4ud2lkdGggLyAyID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb25cclxuXHJcbiAgICAgICAgLy8gaWYgcGFnZSBib3VuZCBpcyBjcm9zc2VkIGFuZCB0aGlzIHR3byBjYXNlcyBhcmVuJ3QgbWV0OiAxKSBzY3JvbGxiYXIgaXMgb24gdGhlIGxlZnQgYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIGxlZnQgMikgc2Nyb2xsYmFyIGlzIG9uIHRoZSByaWdodCBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgcmlnaHRcclxuICAgICAgICBpZiAoISgoZWRnZS5wYWdlLnggPCAwICYmIHNjcm9sbFBvc2l0aW9uIDw9IDApIHx8IChlZGdlLnBhZ2UueCA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPj0gKHNjcm9sbERhdGEud2lkdGggLSBzY3JlZW4ud2lkdGgpKSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKGVkZ2UuZmxhZy54KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyZSBhdXRvc2Nyb2xsIGZ1bmN0aW9uICh0aGlzIHNob3VsZCBoYXBwZW4gb25seSBvbmNlKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBSRURJUFMuZXZlbnQucmVtb3ZlKHdpbmRvdywgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgLy8gcmVzZXQgb25zY3JvbGwgZXZlbnRcclxuICAgICAgICAgICAgYXV0b1Njcm9sbFgod2luZG93KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgd2luZG93IGF1dG9zY3JvbGxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgZWRnZS5wYWdlLnggPSAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBlZGdlLnBhZ2UueSA9IGJvdW5kIC0gKHNjcmVlbi5oZWlnaHQgLyAyID4gWSA/IFkgLSBvYmpNYXJnaW5bMF0gOiBzY3JlZW4uaGVpZ2h0IC0gWSAtIG9iak1hcmdpblsyXSk7ICAgICAgLy8gY2FsY3VsYXRlIHZlcnRpY2FsbHkgY3Jvc3NlZCBwYWdlIGJvdW5kXHJcbiAgICAgIFxyXG4gICAgICBpZiAoZWRnZS5wYWdlLnkgPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWxlbWVudCBjcm9zc2VzIHBhZ2UgYm91bmRcclxuICAgICAge1xyXG4gICAgICAgIGlmIChlZGdlLnBhZ2UueSA+IGJvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG1heCBjcm9zc2VkIGJvdW5kXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWRnZS5wYWdlLnkgPSBib3VuZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdmVydGljYWwgd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICAgIGVkZ2UucGFnZS55ICo9IFkgPCBzY3JlZW4uaGVpZ2h0IC8gMiA/IC0xIDogMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb25cclxuICAgICAgICBcclxuICAgICAgICBpZiAoISgoZWRnZS5wYWdlLnkgPCAwICYmIHNjcm9sbFBvc2l0aW9uIDw9IDApIHx8IChlZGdlLnBhZ2UueSA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPj0gKHNjcm9sbERhdGEuaGVpZ2h0IC0gc2NyZWVuLmhlaWdodCkpKSkgICAgLy8gaWYgcGFnZSBib3VuZCBpcyBjcm9zc2VkIGFuZCB0aGlzIHR3byBjYXNlcyBhcmVuJ3QgbWV0OiAxKSBzY3JvbGxiYXIgaXMgb24gdGhlIHBhZ2UgdG9wIGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCB1cCAyKSBzY3JvbGxiYXIgaXMgb24gdGhlIHBhZ2UgYm90dG9tIGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCBkb3duXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKGVkZ2UuZmxhZy55KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyZSBhdXRvc2Nyb2xsICh0aGlzIHNob3VsZCBoYXBwZW4gb25seSBvbmNlKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBSRURJUFMuZXZlbnQucmVtb3ZlKHdpbmRvdywgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgb25zY3JvbGwgZXZlbnRcclxuICAgICAgICAgICAgYXV0b1Njcm9sbFkod2luZG93KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgd2luZG93IGF1dG9zY3JvbGxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBcclxuICAgICAge1xyXG4gICAgICAgIGVkZ2UucGFnZS55ID0gMDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZm9yIChpID0gMDsgaSA8IHNjcm9sbERhdGEuY29udGFpbmVyLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlc3QgaWYgZHJhZ2dlZCBvYmplY3QgaXMgaW4gc2Nyb2xsYWJsZSBjb250YWluZXIsIHRoaXMgY29kZSB3aWxsIGJlIGV4ZWN1dGVkIG9ubHkgaWYgc2Nyb2xsYWJsZSBjb250YWluZXIgKERJViB3aXRoIG92ZXJmbG93IG90aGVyIHRoYW4gJ3Zpc2libGUpIGV4aXN0cyBvbiBwYWdlXHJcbiAgICAgIHtcclxuICAgICAgICBzY2EgPSBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFcclxuICAgICAgICBcclxuICAgICAgICBpZiAoc2NhLmF1dG9zY3JvbGwgJiYgWCA8IHNjYS5vZmZzZXRbMV0gJiYgWCA+IHNjYS5vZmZzZXRbM10gJiYgWSA8IHNjYS5vZmZzZXRbMl0gJiYgWSA+IHNjYS5vZmZzZXRbMF0pIC8vIGlmIGRyYWdnZWQgb2JqZWN0IGlzIGluc2lkZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhbmQgc2Nyb2xsYWJsZSBjb250YWluZXIgaGFzIGVuYWJsZWQgYXV0b3Njcm9sbCBvcHRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLmRpdi54ID0gYm91bmQgLSAoc2NhLm1pZHN0WCAgPiBYID8gWCAtIG9iak1hcmdpblszXSAtIHNjYS5vZmZzZXRbM10gOiBzY2Eub2Zmc2V0WzFdIC0gWCAtIG9iak1hcmdpblsxXSk7ICAgLy8gY2FsY3VsYXRlIGhvcml6b250YWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGVkZ2UuZGl2LnggPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWxlbWVudCBjcm9zc2VzIHBhZ2UgYm91bmQgdGhlbiBzZXQgc2Nyb2xsIGRpcmVjdGlvbiBhbmQgY2FsbCBhdXRvIHNjcm9sbFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZWRnZS5kaXYueCA+IGJvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3aGVuIG9iamVjdCBpcyBvbmx5IGhhbGYgdmlzaWJsZSAocGFnZSBpcyBzY3JvbGxlZCBvbiB0aGF0IG9iamVjdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGVkZ2UuZGl2LnggPSBib3VuZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZWRnZS5kaXYueCAqPSBYIDwgc2NhLm1pZHN0WCA/IC0xIDogMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzY3JvbGwgZGlyZWN0aW9uOiBuZWdhdGl2ZSAtIGxlZnQsIHBvc2l0aXZlIC0gcmlnaHRcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChlZGdlLmZsYWcueCsrID09PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgb25zY3JvbGwgZXZlbnQgaGFuZGxlciBhbmQgY2FsbCBhdXRvU2Nyb2xsWSBmdW5jdGlvbiBvbmx5IG9uY2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUoc2NhLmRpdiwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTtcclxuICAgICAgICAgICAgICBhdXRvU2Nyb2xsWChzY2EuZGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZWRnZS5kaXYueCA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGVkZ2UuZGl2LnkgPSBib3VuZCAtIChzY2EubWlkc3RZICA+IFkgPyBZIC0gb2JqTWFyZ2luWzBdIC0gc2NhLm9mZnNldFswXSA6IHNjYS5vZmZzZXRbMl0gLSBZIC0gb2JqTWFyZ2luWzJdKTsgICAvLyBjYWxjdWxhdGUgdmVydGljYWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGVkZ2UuZGl2LnkgPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWxlbWVudCBjcm9zc2VzIHBhZ2UgYm91bmQgdGhlbiBzZXQgc2Nyb2xsIGRpcmVjdGlvbiBhbmQgY2FsbCBhdXRvIHNjcm9sbFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZWRnZS5kaXYueSA+IGJvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3aGVuIG9iamVjdCBpcyBvbmx5IGhhbGYgdmlzaWJsZSAocGFnZSBpcyBzY3JvbGxlZCBvbiB0aGF0IG9iamVjdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGVkZ2UuZGl2LnkgPSBib3VuZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZWRnZS5kaXYueSAqPSBZIDwgc2NhLm1pZHN0WSA/IC0xIDogMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzY3JvbGwgZGlyZWN0aW9uOiBuZWdhdGl2ZSAtIHVwLCBwb3NpdGl2ZSAtIGRvd25cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChlZGdlLmZsYWcueSsrID09PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgb25zY3JvbGwgZXZlbnQgaGFuZGxlciBhbmQgY2FsbCBhdXRvU2Nyb2xsWSBmdW5jdGlvbiBvbmx5IG9uY2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUoc2NhLmRpdiwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTtcclxuICAgICAgICAgICAgICBhdXRvU2Nyb2xsWShzY2EuZGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZWRnZS5kaXYueSA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBicmVhayB0aGUgbG9vcCAoY2hlY2tpbmcgZm9yIG90aGVyIHNjcm9sbGFibGUgY29udGFpbmVycyBpcyBub3QgbmVlZGVkKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgKEkgbWVhbiBkcmFnZ2VkIG9iamVjdCBpc24ndCBpbnNpZGUgYW55IG9mIHNjcm9sbGFibGUgY29udGFpbmVyKSByZXNldCBjcm9zc2VkIGVkZ2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLmRpdi54ID0gZWRnZS5kaXYueSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIHN0b3AgYWxsIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudCBpbiB0aGUgYnViYmxpbmcgcGhhc2UuICAoc2F2ZSBzeXN0ZW0gcmVzb3VyY2VzIGJ5IHR1cm5pbmcgb2ZmIGV2ZW50IGJ1YmJsaW5nIC8gcHJvcGFnYXRpb24pXHJcbiAgICBldnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgIGlmIChldnQuc3RvcFByb3BhZ2F0aW9uKSBcclxuICAgIHtcclxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCAoZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmUsIGF1dG9TY3JvbGxYLCBhdXRvU2Nyb2xsWSkgaW4gY2FzZSBvZiBjaGFuZ2Ugb2YgY3VycmVudCB0YWJsZSBjZWxsLlxyXG4gIC8vIFdoZW4gY2hhbmdlIGhhcHBlbnMsIHRoZW4gcmV0dXJuIGJhY2tncm91bmQgY29sb3IgdG8gb2xkIHBvc2l0aW9uLCBoaWdobGlnaHQgbmV3IHBvc2l0aW9uLCBjYWxjdWxhdGUgY2VsbCBib3VuZGFyaWVzIGFuZCBjYWxsIGV2ZW50LmNoYW5nZWQuXHJcbiAgY2VsbENoYW5nZWQgPSBmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICBpZiAoKHJvdyAhPT0gcm93X29sZCB8fCBjZWxsICE9PSBjZWxsX29sZCkpIFxyXG4gICAge1xyXG4gICAgICBpZiAocm93X29sZCAhPT0gbnVsbCAmJiBjZWxsX29sZCAhPT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY2VsbCBiYWNrZ3JvdW5kIGNvbG9yIHRvIHRoZSBwcmV2aW91cyBjZWxsXHJcbiAgICAgIHtcclxuICAgICAgICBzZXRUZFN0eWxlKHJvd19vbGQsIGJnU3R5bGVPbGQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJhY2tncm91bmQgY29sb3IgZm9yIHByZXZpb3VzIHRhYmxlIHJvd1xyXG4gICAgICAgIFJFRElQUy5kcmFnLnRkLnByZXZpb3VzID0gdGQucHJldmlvdXMgPSB0YWJsZS5yb3dzW3Jvd19vbGRdLmNlbGxzW2NlbGxfb2xkXTsgICAgICAvLyBkZWZpbmUgcHJldmlvdXMgdGFibGUgY2VsbFxyXG4gICAgICAgIFJFRElQUy5kcmFnLnRkLmN1cnJlbnQgPSB0ZC5jdXJyZW50ID0gdGFibGUucm93c1tyb3ddLmNlbGxzW2NlbGxdOyAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY3VycmVudCB0YWJsZSBjZWxsXHJcblxyXG4gICAgICAgIGlmIChyb3cgIT09IHJvd19vbGQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdGFibGUgb3Igcm93IHNob3VsZCBjaGFuZ2UgKGNoYW5naW5nIGNlbGwgaW4gdGhlIHNhbWUgcm93IHdpbGwgYmUgaWdub3JlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dDaGFuZ2VkKHRkLmN1cnJlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0UG9zaXRpb24oKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBJbiBpbml0aWFsaXphdGlvbiBwaGFzZSwgdGhpcyBtZXRob2QgaXMgYXR0YWNoZWQgYXMgb25yZXNpemUgZXZlbnQgaGFuZGxlciBmb3Igd2luZG93LiAgSXQgYWxzbyBjYWxjdWxhdGVzIHdpbmRvdyB3aWR0aCBhbmQgd2luZG93IGhlaWdodC4gUmVzdWx0IGlzIHNhdmVkIGluIHZhcmlhYmxlcyBzY3JlZW4ud2lkdGggYW5kIHNjcmVlbi5oZWlnaHQgdmlzaWJsZSBpbnNpZGUgUkVESVBTLmRyYWcgcHJpdmF0ZSBzY29wZS5cclxuICBoYW5kbGVyT25SZXNpemUgPSBmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICBzY3JlZW4ud2lkdGggID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBzY3JlZW4uaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgXHJcbiAgICBzY3JvbGxEYXRhLndpZHRoICA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDsgICAgIC8vIHNldCBzY3JvbGwgc2l6ZSAob25yZXNpemUsIG9ubG9hZCBhbmQgb25tb3VzZXVwIGV2ZW50KVxyXG4gICAgc2Nyb2xsRGF0YS5oZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgXHJcbiAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBjb2x1bXMgYW5kIHJvd3Mgb2Zmc2V0IChjZWxscyBkaW1lbnNpb25zKVxyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCBzZXRzIGN1cnJlbnQgcm93IGFuZCBjZWxsLiAgQ3VycmVudCBjZWxsIHBvc2l0aW9uIGlzIGJhc2VkIG9uIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXIgYW5kIGNhbGN1bGF0ZWQgZ3JpZCBvZiB0YWJsZXMgaW5zaWRlIGRyYWcgY29udGFpbmVyLlxyXG4gIC8vIFJvd3Mgd2l0aCBkaXNwbGF5PSdub25lJyBhcmUgbm90IGNvbnRhaW5lZCBpbiByb3dfb2Zmc2V0IGFycmF5IHNvIHJvdyBib3VuZHMgY2FsY3VsYXRpb24gc2hvdWxkIHRha2UgY2FyZSBhYm91dCBzcGFyc2UgYXJyYXlzIChzaW5jZSB2ZXJzaW9uIDQuMy42KS5cclxuICBzZXRUYWJsZVJvd0NvbHVtbiA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgdmFyIHByZXZpb3VzOyAgICAgICAvLyBzZXQgcHJldmlvdXMgcG9zaXRpb24gKGN1cnJlbnQgY2VsbCB3aWxsIG5vdCBiZSBoaWdobGlnaHRlZClcclxuICAgIHZhciByb3dfb2Zmc2V0OyAgICAgLy8gcm93IG9mZnNldHMgZm9yIHRoZSBzZWxlY3RlZCB0YWJsZSAocm93IGJveCBib3VuZHMpXHJcbiAgICB2YXIgcm93X2ZvdW5kOyAgICAgIC8vIHJlbWVtYmVyIGZvdW5kIHJvd1xyXG4gICAgdmFyIHRvcyA9IFtdOyAgICAgICAvLyB0YWJsZSBvZmZzZXRcclxuICAgIHZhciBYLCBZOyAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICB2YXIgaTsgICAgICAgICAgICAgIC8vIHVzZWQgaW4gbG9jYWwgbG9vcFxyXG5cclxuICAgIHByZXZpb3VzID0gZnVuY3Rpb24gKCkgICAgLy8gc2V0IHByZXZpb3VzIHBvc2l0aW9uIChjdXJyZW50IGNlbGwgd2lsbCBub3QgYmUgaGlnaGxpZ2h0ZWQpXHJcbiAgICB7XHJcbiAgICAgIGlmIChyb3dfb2xkICE9PSBudWxsICYmIGNlbGxfb2xkICE9PSBudWxsKVxyXG4gICAgICB7XHJcbiAgICAgICAgcm93ID0gcm93X29sZDtcclxuICAgICAgICBjZWxsID0gY2VsbF9vbGQ7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgWCA9IHBvaW50ZXIueDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIFkgPSBwb2ludGVyLnk7XHJcblxyXG4gICAgdG9zWzBdID0gdGFibGUucmVkaXBzLm9mZnNldFswXTsgLy8gdG9wXHJcbiAgICB0b3NbMV0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzFdOyAvLyByaWdodFxyXG4gICAgdG9zWzJdID0gdGFibGUucmVkaXBzLm9mZnNldFsyXTsgLy8gYm90dG9tXHJcbiAgICB0b3NbM10gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzNdOyAvLyBsZWZ0XHJcblxyXG4gICAgLy8gaWYgdGFibGUgYmVsb25ncyB0byB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXIgdGhlbiBzZXQgc2Nyb2xsYWJsZSBjb250YWluZXIgb2Zmc2V0IGlmIG5lZWRlZCBpbiBjYXNlIHdoZW4gc29tZSBwYXJ0cyBvZiB0YWJsZSBhcmUgaGlkZGVuIChmb3IgZXhhbXBsZSB3aXRoIFwib3ZlcmZsb3c6IGF1dG9cIilcclxuICAgIGlmICh0YWJsZS5zY2EgIT09IHVuZGVmaW5lZClcclxuICAgIHtcclxuICAgICAgdG9zWzBdID0gdG9zWzBdID4gdGFibGUuc2NhLm9mZnNldFswXSA/IHRvc1swXSA6IHRhYmxlLnNjYS5vZmZzZXRbMF07IC8vIHRvcFxyXG4gICAgICB0b3NbMV0gPSB0b3NbMV0gPCB0YWJsZS5zY2Eub2Zmc2V0WzFdID8gdG9zWzFdIDogdGFibGUuc2NhLm9mZnNldFsxXTsgLy8gcmlnaHRcclxuICAgICAgdG9zWzJdID0gdG9zWzJdIDwgdGFibGUuc2NhLm9mZnNldFsyXSA/IHRvc1syXSA6IHRhYmxlLnNjYS5vZmZzZXRbMl07IC8vIGJvdHRvbVxyXG4gICAgICB0b3NbM10gPSB0b3NbM10gPiB0YWJsZS5zY2Eub2Zmc2V0WzNdID8gdG9zWzNdIDogdGFibGUuc2NhLm9mZnNldFszXTsgLy8gbGVmdFxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0b3NbM10gPCBYICYmIFggPCB0b3NbMV0gJiYgdG9zWzBdIDwgWSAmJiBZIDwgdG9zWzJdKSAgICAgICAgICAgICAgICAgLy8gbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgdGFibGUgKG9yIHNjcm9sbGFibGUgY29udGFpbmVyKVxyXG4gICAge1xyXG4gICAgICByb3dfb2Zmc2V0ID0gdGFibGUucmVkaXBzLnJvd19vZmZzZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgcm93IG9mZnNldHMgZm9yIHRoZSBzZWxlY3RlZCB0YWJsZSAocm93IGJveCBib3VuZHMpXHJcblxyXG4gICAgICBmb3IgKHJvdyA9IDA7IHJvdyA8IHJvd19vZmZzZXQubGVuZ3RoIC0gMTsgcm93KyspICAgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSBjdXJyZW50IHJvdyAobG9vcCBza2lwcyBoaWRkZW4gcm93cylcclxuICAgICAge1xyXG4gICAgICAgIGlmIChyb3dfb2Zmc2V0W3Jvd10gPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgZG9lc24ndCBleGlzdCAoaW4gY2FzZSBvZiBoaWRkZW4gcm93KSAtIHNraXAgaXRcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN1cnJlbnRDZWxsWzBdID0gcm93X29mZnNldFtyb3ddWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdG9wIGFuZCBib3R0b20gY2VsbCBib3VuZHNcclxuXHJcbiAgICAgICAgaWYgKHJvd19vZmZzZXRbcm93ICsgMV0gIT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBib3R0b20gY2VsbCBib3VuZCAoaWYgaXMgcG9zc2libGUpIC0gaGlkZGVuIHJvdyBkb2Vzbid0IGV4aXN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY3VycmVudENlbGxbMl0gPSByb3dfb2Zmc2V0W3JvdyArIDFdWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGlkZGVuIHJvdyAobGlrZSBzdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZm9yIChpID0gcm93ICsgMjsgaSA8IHJvd19vZmZzZXQubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggZm9yIG5leHQgdmlzaWJsZSByb3dcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHJvd19vZmZzZXRbaV0gIT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmlzaWJsZSByb3cgZm91bmRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGN1cnJlbnRDZWxsWzJdID0gcm93X29mZnNldFtpXVswXTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFkgPD0gY3VycmVudENlbGxbMl0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvcCBib3VuZCBvZiB0aGUgbmV4dCByb3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJvd19mb3VuZCA9IHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGZvdW5kIHJvd1xyXG5cclxuICAgICAgaWYgKHJvdyA9PT0gcm93X29mZnNldC5sZW5ndGggLSAxKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbG9vcCBleGNlZWRzLCB0aGVuIHNldCBib3VuZHMgZm9yIHRoZSBsYXN0IHJvdyAob2Zmc2V0IGZvciB0aGUgbGFzdCByb3cgZG9lc24ndCB3b3JrIGluIElFOCwgc28gdXNlIHRhYmxlIGJvdW5kcylcclxuICAgICAge1xyXG4gICAgICAgIGN1cnJlbnRDZWxsWzBdID0gcm93X29mZnNldFtyb3ddWzBdO1xyXG4gICAgICAgIGN1cnJlbnRDZWxsWzJdID0gdGFibGUucmVkaXBzLm9mZnNldFsyXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2VsbCA9IDA7XHJcblxyXG4gICAgICBpZiAocm93IDwgMCB8fCBjZWxsIDwgMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2VsbCA8IDAgb3Igcm93IDwgMCB0aGVuIHVzZSBsYXN0IHBvc3NpYmxlIGxvY2F0aW9uXHJcbiAgICAgIHtcclxuICAgICAgICBwcmV2aW91cygpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHJvdyAhPT0gcm93X2ZvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50IGNlbGwgZm91bmQgYnV0IGlmIGN1cnJlbnQgcm93IGRpZmZlciBmcm9tIHByZXZpb3VzbHkgZm91bmQgcm93ICh0aGFua3MgdG9vIHdoaWxlIGxvb3Agd2l0aCByb3ctLSkgdGhlbiB0ZXN0IGlmIFkgaXMgaW5zaWRlIGN1cnJlbnQgY2VsbCwgKHRoaXMgc2hvdWxkIHByZXZlbnQgY2FzZSB3aGVyZSBURCBib3JkZXIgPiAxcHggYW5kIHVwcGVyIGNvbHNwYW5lZCByb3cgbGlrZSBpbiBleGFtcGxlMTUpIGxvZ2ljIHdpbGwgZW5kIGluIHVwcGVyIGNvbHNwYW5lZCByb3cgd2hpbGUgY3VycmVudCByb3cgd2lsbCBub3QgbW92ZSAtIGFuZCB0aGF0IHdhcyB3cm9uZ1xyXG4gICAgICB7XHJcblxyXG4gICAgICAgIGN1cnJlbnRDZWxsWzBdID0gcm93X29mZnNldFtyb3ddWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjYWxjdWxhdGUgdG9wIGFuZCBib3R0b20gcm93IG9mZnNldCAoYWdhaW4pXHJcbiAgICAgICAgY3VycmVudENlbGxbMl0gPSBjdXJyZW50Q2VsbFswXSArIHRhYmxlLnJvd3Nbcm93XS5jZWxsc1tjZWxsXS5vZmZzZXRIZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChZIDwgY3VycmVudENlbGxbMF0gfHwgWSA+IGN1cnJlbnRDZWxsWzJdKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgWSBpcyBvdXRzaWRlIG9mIHRoZSBjdXJyZW50IHJvdywgcmV0dXJuIHByZXZpb3VzIGxvY2F0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJldmlvdXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBNZXRob2Qgc2V0cyBiYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgY3VycmVudCB0YWJsZSBjZWxsIGFuZCByZW1lbWJlcnMgcHJldmlvdXMgcG9zaXRpb24gYW5kIGJhY2tncm91bmQgY29sb3IuICBJdCBpcyBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmUgYW5kIGNlbGxDaGFuZ2VkLlxyXG4gIHNldFBvc2l0aW9uID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICBpZiAocm93ICE9PSBudWxsICYmIGNlbGwgIT09IG51bGwpICAgICAgLy8gaW4gY2FzZSBpZiBvcmRpbmFyeSBlbGVtZW50IGlzIHBsYWNlZCBpbnNpZGUgJ2RlbnknIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgYmdTdHlsZU9sZCA9IGdldFRkU3R5bGUocm93KTsgICAgICAgICAvLyByZW1lbWJlciBiYWNrZ3JvdW5kIGNvbG9yIGJlZm9yZSBzZXR0aW5nIHRoZSBuZXcgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICBzZXRUZFN0eWxlKHJvdyk7ICAgICAgICAgICAgICAgICAgICAgIC8vIGhpZ2hsaWdodCBjdXJyZW50IFREIC8gVFIgKGNvbG9ycyBhbmQgc3R5bGVzIGFyZSByZWFkIGZyb20gcHVibGljIHByb3BlcnR5IFwiaG92ZXJcIlxyXG4gICAgICByb3dfb2xkID0gcm93OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGN1cnJlbnQgcG9zaXRpb24gKGZvciByb3cgYW5kIGNlbGwpXHJcbiAgICAgIGNlbGxfb2xkID0gY2VsbDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2Qgc2V0cyB0YWJsZSBjZWxsKHMpIGJhY2tncm91bmQgc3R5bGVzIChiYWNrZ3JvdW5kIGNvbG9ycyBhbmQgYm9yZGVyIHN0eWxlcykuXHJcbiAgICogSWYgdGRTdHlsZSBpcyB1bmRlZmluZWQgdGhlbiBjdXJyZW50IHRkL3RyIHdpbGwgYmUgaGlnaGxpZ2h0ZWQgZnJvbSBwdWJsaWMgcHJvcGVydHkgaG92ZXIuY29sb3JfdGQsIGhvdmVyLmNvbG9yX3RyIC4uLlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gcmkgUm93IGluZGV4LlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0IE9iamVjdCBjb250YWlucyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIChcInRcIiBpcyBURCBzdHlsZSBvYmplY3QgaXMgcHJlcGFyZWQgaW4gZ2V0VGRTdHlsZSBtZXRob2QpLlxyXG4gICAqL1xyXG4gIHNldFRkU3R5bGUgPSBmdW5jdGlvbiAocmksIHQpIFxyXG4gIHtcclxuICAgIHZhciB0ciwgczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIHJvdyBhbmQgdGQuc3R5bGVcclxuXHJcbiAgICB0ciA9IHRhYmxlLnJvd3NbcmldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCB0YWJsZSByb3dcclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ci5jZWxscy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjb2xvcnMgdG8gdGFibGUgY2VsbHMgKHJlc3BlY3RpdmVseSkgb3IgZmlyc3QgY29sb3IgdG8gYWxsIGNlbGxzIChpbiBjYXNlIG9mIHNldHRpbmdzIGhvdmVyIHRvIHRoZSByb3cpXHJcbiAgICB7XHJcbiAgICAgIHMgPSB0ci5jZWxsc1tpXS5zdHlsZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byBjdXJyZW50IFREIHN0eWxlXHJcbiAgICAgIHMuYmFja2dyb3VuZENvbG9yID0gKHQgPT09IHVuZGVmaW5lZCkgPyBSRURJUFMuZHJhZy5ob3Zlci5jb2xvclRyIDogdC5jb2xvcltpXS50b1N0cmluZygpOyAgLy8gVFIgYmFja2dyb3VuZCBjb2xvciAtIHRkU3R5bGUgaXMgdW5kZWZpbmVkIHRoZW4gaGlnaGxpZ2h0IFREIG90aGVyd2lzZSByZXR1cm4gcHJldmlvdXMgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICBcclxuICAgICAgaWYgKFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUUiBib3JkZXIgLSBpZiBob3Zlci5ib3JkZXJUZCBpcyBzZXQgdGhlbiB0YWtlIGNhcmUgb2YgYm9yZGVyIHN0eWxlXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAodCA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYm9yZGVyIChoaWdobGlnaHQpIC0gc291cmNlIHJvdyB3aWxsIG5vdCBoYXZlIGFueSBib3JkZXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAocm93IDwgcm93X3NvdXJjZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGlzIG1vdmVkIGFib3ZlIHNvdXJjZSByb3cgaW4gY3VycmVudCB0YWJsZVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBzLmJvcmRlclRvcCA9IFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBpcyBtb3ZlZCBiZWxvdyBzb3VyY2Ugcm93IGluIGN1cnJlbnQgdGFibGVcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcy5ib3JkZXJCb3R0b20gPSBSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHByZXZpb3VzIHN0YXRlIGJvcmRlclRvcCBhbmQgYm9yZGVyQm90dG9tIChleGl0IGZyb20gVEQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcy5ib3JkZXJUb3BXaWR0aCA9IHQudG9wW2ldWzBdO1xyXG4gICAgICAgICAgcy5ib3JkZXJUb3BTdHlsZSA9IHQudG9wW2ldWzFdO1xyXG4gICAgICAgICAgcy5ib3JkZXJUb3BDb2xvciA9IHQudG9wW2ldWzJdO1xyXG4gICAgICAgICAgcy5ib3JkZXJCb3R0b21XaWR0aCA9IHQuYm90dG9tW2ldWzBdO1xyXG4gICAgICAgICAgcy5ib3JkZXJCb3R0b21TdHlsZSA9IHQuYm90dG9tW2ldWzFdO1xyXG4gICAgICAgICAgcy5ib3JkZXJCb3R0b21Db2xvciA9IHQuYm90dG9tW2ldWzJdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvLyBNZXRob2QgcmV0dXJucyBiYWNrZ3JvdW5kIGFuZCBib3JkZXIgc3R5bGVzIGFzIG9iamVjdCBmb3IgdGhlIGlucHV0IHBhcmFtZXRlciByb3cgaW5kZXggKHJpKS4gIEByZXR1cm4ge09iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcyAoZm9yIHRoZSByb3cpLlxyXG4gIGdldFRkU3R5bGUgPSBmdW5jdGlvbiAocmkpIFxyXG4gIHtcclxuICAgIHZhciB0ciwgYzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIHJvdyBhbmQgdGQgcmVmZXJlbmNlICAgXHJcbiAgICB2YXIgdCA9IHtjb2xvcjogW10sIHRvcDogW10sIHJpZ2h0OiBbXSwgYm90dG9tOiBbXSwgbGVmdDogW119OyAgICAgICAgLy8gZGVmaW5lIFREIHN0eWxlIG9iamVjdCB3aXRoIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXM6IHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdFxyXG4gICAgICBcclxuICAgIHZhciBib3JkZXIgPSBmdW5jdGlvbiAoYywgbmFtZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcml2YXRlIG1ldGhvZCBnZXRzIGJvcmRlciBzdHlsZXM6IHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdFxyXG4gICAge1xyXG4gICAgICB2YXIgd2lkdGggPSAnYm9yZGVyJyArIG5hbWUgKyAnV2lkdGgnLCBzdHlsZSA9ICdib3JkZXInICsgbmFtZSArICdTdHlsZScsIGNvbG9yID0gJ2JvcmRlcicgKyBuYW1lICsgJ0NvbG9yJztcclxuICAgICAgcmV0dXJuIFtnZXRTdHlsZShjLCB3aWR0aCksIGdldFN0eWxlKGMsIHN0eWxlKSwgZ2V0U3R5bGUoYywgY29sb3IpXTtcclxuICAgIH07XHJcblxyXG4gICAgdHIgPSB0YWJsZS5yb3dzW3JpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgdGFibGUgcm93XHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHIuY2VsbHMubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBzdHlsZXMgZm9yIGVhY2ggdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBjID0gdHIuY2VsbHNbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBURCByZWZlcmVuY2VcclxuICAgICAgdC5jb2xvcltpXSA9IGMuc3R5bGUuYmFja2dyb3VuZENvbG9yOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgIFxyXG4gICAgICBpZiAoUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHIgIT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHRvcCBhbmQgYm90dG9tIFREIGJvcmRlciBzdHlsZXMgaWYgaG92ZXIuYm9yZGVyVHIgcHJvcGVydHkgaXMgc2V0XHJcbiAgICAgIHtcclxuICAgICAgICB0LnRvcFtpXSA9IGJvcmRlcihjLCAnVG9wJyk7XHJcbiAgICAgICAgdC5ib3R0b21baV0gPSBib3JkZXIoYywgJ0JvdHRvbScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHQ7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHJldHVybnMgYXJyYXkgb2YgZWxlbWVudCBib3VuZHMgKG9mZnNldCkgdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0IChuZWVkZWQgZm9yIHRhYmxlIGdyaWQgY2FsY3VsYXRpb24pLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGJveCBIVE1MRWxlbWVudCBmb3IgYm94IG1ldHJpY3MuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtwb3NpdGlvbl0gSFRNTEVsZW1lbnQgXCJwb3NpdGlvblwiIHN0eWxlLiBFbGVtZW50cyB3aXRoIHN0eWxlIFwiZml4ZWRcIiB3aWxsIG5vdCBoYXZlIGluY2x1ZGVkIHBhZ2Ugc2Nyb2xsIG9mZnNldC5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtib3hfc2Nyb2xsXSBJZiBzZXQgdG8gXCJmYWxzZVwiIHRoZW4gZWxlbWVudCBzY3JvbGwgb2Zmc2V0IHdpbGwgbm90IGJlIGluY2x1ZGVkIGluIGNhbGN1bGF0aW9uIChkZWZhdWx0IGlzIFwidHJ1ZVwiKS5cclxuICAgKiBAcmV0dXJuIHtBcnJheX0gQm94IG9mZnNldCBhcnJheTogWyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQgXVxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gY2FsY3VsYXRlIGJveCBvZmZzZXQgZm9yIHRoZSBkaXYgaWQ9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICogZGl2Ym94ID0gYm94T2Zmc2V0KGRyYWdDb250YWluZXIpO1xyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gaW5jbHVkZSBzY3JvbGwgcG9zaXRpb24gaW4gb2Zmc2V0XHJcbiAgICogb2Zmc2V0ID0gYm94T2Zmc2V0KHJvd09iaiwgJ2ZpeGVkJyk7XHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBnZXQgRElWIG9mZnNldCB3aXRoIG9yIHdpdGhvdXQgXCJwYWdlIHNjcm9sbFwiIGFuZCBleGNsdWRlZCBlbGVtZW50IHNjcm9sbCBvZmZzZXRcclxuICAgKiBjYiA9IGJveE9mZnNldChkaXYsIHBvc2l0aW9uLCBmYWxzZSk7XHJcbiAgICovXHJcbiAgYm94T2Zmc2V0ID0gZnVuY3Rpb24gKGJveCwgcG9zaXRpb24sIGJveF9zY3JvbGwpXHJcbiAge1xyXG4gICAgdmFyIG9MZWZ0ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IGxlZnQgKHRha2UgY2FyZSBvZiBob3Jpem9udGFsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHZhciBvVG9wICA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9mZnNldCB0b3AgKHRha2UgY2FyZSBvZCB2ZXJ0aWNhbCBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB2YXIgYm94T2xkID0gYm94OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGJveCBvYmplY3RcclxuXHJcbiAgICBpZiAocG9zaXRpb24gIT09ICdmaXhlZCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRhYmxlX3Bvc2l0aW9uIGlzIHVuZGVmaW5lZCwgJycgb3IgJ3BhZ2Vfc2Nyb2xsJyB0aGVuIGluY2x1ZGUgcGFnZSBzY3JvbGwgb2Zmc2V0LCB3aW5kb3dTY3JvbGxQb3NpdGlvbiBpcyBzZXQgaW4gY2FsY3VsYXRlQ2VsbHMoKSwgY2FsY3VsYXRlQ2VsbHMoKSBpcyBjYWxsZWQgb24gd2luZG93IHNjcm9sbCBldmVudFxyXG4gICAge1xyXG4gICAgICBvTGVmdCA9IDAgLSB3aW5kb3dTY3JvbGxQb3NpdGlvblswXTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IGxlZnQgKHRha2UgY2FyZSBvZiBob3Jpem9udGFsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgICAgb1RvcCAgPSAwIC0gd2luZG93U2Nyb2xsUG9zaXRpb25bMV07ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9mZnNldCB0b3AgKHRha2UgY2FyZSBvZCB2ZXJ0aWNhbCBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGJveF9zY3JvbGwgPT09IHVuZGVmaW5lZCB8fCBib3hfc2Nyb2xsID09PSB0cnVlKSAgICAgICAgICAvLyBjbGltYiB1cCB0aHJvdWdoIERPTSBoaWVyYXJjaHkgKGdldFNjcm9sbFBvc2l0aW9uKCkgdGFrZXMgY2FyZSBhYm91dCBwYWdlIHNjcm9sbCBwb3NpdGlvbnMpXHJcbiAgICB7XHJcbiAgICAgIGRvXHJcbiAgICAgIHtcclxuICAgICAgICBvTGVmdCArPSBib3gub2Zmc2V0TGVmdCAtIGJveC5zY3JvbGxMZWZ0O1xyXG4gICAgICAgIG9Ub3AgKz0gYm94Lm9mZnNldFRvcCAtIGJveC5zY3JvbGxUb3A7XHJcbiAgICAgICAgYm94ID0gYm94Lm9mZnNldFBhcmVudDtcclxuICAgICAgfVxyXG4gICAgICB3aGlsZSAoYm94ICYmIGJveC5ub2RlTmFtZSAhPT0gJ0JPRFknKTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xpbWIgdXAgdG8gdGhlIEJPRFkgZWxlbWVudCBidXQgd2l0aG91dCBzY3JvbGwgcG9zaXRpb25zXHJcbiAgICB7XHJcbiAgICAgIGRvXHJcbiAgICAgIHtcclxuICAgICAgICBvTGVmdCArPSBib3gub2Zmc2V0TGVmdDtcclxuICAgICAgICBvVG9wICs9IGJveC5vZmZzZXRUb3A7XHJcbiAgICAgICAgYm94ID0gYm94Lm9mZnNldFBhcmVudDtcclxuICAgICAgfVxyXG4gICAgICB3aGlsZSAoYm94ICYmIGJveC5ub2RlTmFtZSAhPT0gJ0JPRFknKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAgICAgICAgdG9wICAgICAgICAgICAgICAgICByaWdodCwgICAgICAgICAgICAgICAgICAgICBib3R0b20gICAgICAgICAgIGxlZnRcclxuICAgIHJldHVybiBbIG9Ub3AsIG9MZWZ0ICsgYm94T2xkLm9mZnNldFdpZHRoLCBvVG9wICsgYm94T2xkLm9mZnNldEhlaWdodCwgb0xlZnQgXTtcclxuICB9O1xyXG5cclxuICAvLyBNZXRob2QgaXMgY2FsbGVkIGluIGV2ZXJ5IHBvc3NpYmxlIGNhc2Ugd2hlbiBwb3NpdGlvbiBvciBzaXplIG9mIHRhYmxlIGdyaWQgY291bGQgY2hhbmdlIGxpa2U6IHBhZ2Ugc2Nyb2xsaW5nLCBlbGVtZW50IGRyb3BwZWQgdG8gdGhlIHRhYmxlIGNlbGwsIGVsZW1lbnQgc3RhcnQgZHJhZ2dpbmcgYW5kIHNvIG9uLlxyXG4gIC8vIEl0IGNhbGN1bGF0ZXMgdGFibGUgcm93IG9mZnNldHMgKHRhYmxlIGdyaWQpIGFuZCBzYXZlcyB0byB0aGUgXCJ0YWJsZXNcIiBhcnJheS5cclxuICAvLyBUYWJsZSByb3dzIHdpdGggc3R5bGUgZGlzcGxheT0nbm9uZScgYXJlIHNraXBwZWQuXHJcbiAgY2FsY3VsYXRlQ2VsbHMgPSBmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICB2YXIgcm93X29mZnNldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyBib3hcclxuICAgIHZhciBwb3NpdGlvbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWxlbWVudCAodGFibGUgb3IgdGFibGUgY29udGFpbmVyKSBoYXMgcG9zaXRpb246Zml4ZWQgdGhlbiBcInBhZ2Ugc2Nyb2xsXCIgb2Zmc2V0IHNob3VsZCBub3QgYmUgYWRkZWRcclxuICAgIHZhciBjYjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYm94IG9mZnNldCBmb3IgY29udGFpbmVyIGJveCAoY2IpXHJcblxyXG4gICAgd2luZG93U2Nyb2xsUG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGVDZWxscygpIGlzIGNhbGxlZCBvbiB3aW5kb3cgc2Nyb2xsIGV2ZW50IHNvIGhlcmUgaXMgcGVyZmVjdCBwbGFjZSB0byByZWZyZXNoIHdpbmRvdyBzY3JvbGwgcG9zaXRpb25cclxuICAgIHJvd19vZmZzZXQgPSBbXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSByb3dfb2Zmc2V0IGFycmF5XHJcbiAgICBcclxuICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUsICdwb3NpdGlvbicpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRhYmxlIHN0eWxlIHBvc2l0aW9uICh0byBleGNsdWRlIFwicGFnZSBzY3JvbGxcIiBvZmZzZXQgZnJvbSBjYWxjdWxhdGlvbiBpZiBuZWVkZWQpXHJcbiAgICBcclxuICAgIGlmIChwb3NpdGlvbiAhPT0gJ2ZpeGVkJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGFibGUgZG9lc24ndCBoYXZlIHN0eWxlIHBvc2l0aW9uOmZpeGVkIHRoZW4gdGFibGUgY29udGFpbmVyIHNob3VsZCBiZSB0ZXN0ZWRcclxuICAgIHtcclxuICAgICAgcG9zaXRpb24gPSBnZXRTdHlsZSh0YWJsZS5wYXJlbnROb2RlLCAncG9zaXRpb24nKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IHRhYmxlLnJvd3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pICAgICAgICAgICAgICAgICAgICAvLyBiYWNrd2FyZCBsb29wIGhhcyBiZXR0ZXIgcGVyZm9tYW5jZVxyXG4gICAge1xyXG4gICAgICBpZiAodGFibGUucm93c1tpXS5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgcm93cyB0byB0aGUgb2Zmc2V0IGFycmF5IGlmIHJvdyBpcyBub3QgaGlkZGVuXHJcbiAgICAgIHtcclxuICAgICAgICByb3dfb2Zmc2V0W2ldID0gYm94T2Zmc2V0KHRhYmxlLnJvd3NbaV0sIHBvc2l0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0YWJsZS5yZWRpcHMub2Zmc2V0ID0gYm94T2Zmc2V0KHRhYmxlLCBwb3NpdGlvbik7ICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgdGFibGUgaW5mb3JtYXRpb25zICh0YWJsZSBvZmZzZXQgYW5kIHJvdyBvZmZzZXRzKVxyXG4gICAgdGFibGUucmVkaXBzLnJvd19vZmZzZXQgPSByb3dfb2Zmc2V0O1xyXG5cclxuICAgIGRpdkJveCA9IGJveE9mZnNldChkcmFnQ29udGFpbmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGJveCBvZmZzZXQgZm9yIHRoZSBkaXYgaWQ9cmVkaXBzLWRyYWdcclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY3JvbGxEYXRhLmNvbnRhaW5lci5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzIGlmIG5lZWRlZFxyXG4gICAge1xyXG4gICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHNjcm9sbERhdGEuY29udGFpbmVyW2ldLmRpdiwgJ3Bvc2l0aW9uJyk7ICAgICAvLyBzZXQgY29udGFpbmVyIGJveCBzdHlsZSBwb3NpdGlvbiAodG8gZXhjbHVkZSBwYWdlIHNjcm9sbCBvZmZzZXQgZnJvbSBjYWxjdWxhdGlvbiBpZiBuZWVkZWQpXHJcbiAgICAgIGNiID0gYm94T2Zmc2V0KHNjcm9sbERhdGEuY29udGFpbmVyW2ldLmRpdiwgcG9zaXRpb24sIGZhbHNlKTsgICAgIC8vIGdldCBESVYgY29udGFpbmVyIG9mZnNldCB3aXRoIG9yIHdpdGhvdXQgXCJwYWdlIHNjcm9sbFwiIGFuZCBleGNsdWRlZCBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGNvbnRlbnRcclxuICAgICAgXHJcbiAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2ldLm9mZnNldCA9IGNiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXNcclxuICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbaV0ubWlkc3RYID0gKGNiWzFdICsgY2JbM10pIC8gMjtcclxuICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbaV0ubWlkc3RZID0gKGNiWzBdICsgY2JbMl0pIC8gMjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBNZXRob2QgcmV0dXJucyBjdXJyZW50IHBhZ2Ugc2Nyb2xsIHZhbHVlcyBhcyBhcnJheSAoWCBhbmQgWSBheGlzKS5cclxuICBnZXRTY3JvbGxQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHZhciBzY3JvbGxZID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICAvL3ZhciBzY3JvbGxYID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xyXG4gICAgdmFyIHNjcm9sbFggPSAwO1xyXG5cclxuICAgIHJldHVybiBbIHNjcm9sbFgsIHNjcm9sbFkgXTtcclxuICB9O1xyXG5cclxuICAvLyBIb3Jpem9udGFsIGF1dG8gc2Nyb2xsIG1ldGhvZC4gIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNvIFdpbmRvdyBvciBESVYgZWxlbWVudCAoc28gLSBzY3JvbGwgb2JqZWN0KS5cclxuICBhdXRvU2Nyb2xsWCA9IGZ1bmN0aW9uIChzbykgXHJcbiAge1xyXG4gICAgdmFyIHBvcywgICAgICAvLyBsZWZ0IHN0eWxlIHBvc2l0aW9uXHJcbiAgICAgIG9sZCwgICAgICAvLyBvbGQgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAobmVlZGVkIGZvciB3aW5kb3cgc2Nyb2xsaW5nKVxyXG4gICAgICBzY3JvbGxQb3NpdGlvbiwgLy8gZGVmaW5lIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgIG1heHNwLCAgICAgIC8vIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgIGVkZ2VDcm9zc2VkLCAgLy8gY3Jvc3NlZCBlZGdlIGZvciB3aW5kb3cgYW5kIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIFggPSBwb2ludGVyLngsICAvLyBkZWZpbmUgcG9pbnRlciBYIHBvc2l0aW9uXHJcbiAgICAgIFkgPSBwb2ludGVyLnk7ICAvLyBkZWZpbmUgcG9pbnRlciBZIHBvc2l0aW9uXHJcbiAgICAvLyBpZiBtb3VzZXVwIHRoZW4gc3RvcCBoYW5kbGluZyBcImN1cnJlbnQgY2VsbFwiXHJcbiAgICBpZiAoZWRnZS5mbGFnLnggPiAwKSB7XHJcbiAgICAgIC8vIGNhbGN1bGF0ZSBjZWxsIChhdXRvc2Nyb2xsIGlzIHdvcmtpbmcpXHJcbiAgICAgIGNhbGN1bGF0ZUNlbGxzKCk7XHJcbiAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlIHJvdyBhbmQgdGFibGUgY2VsbFxyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpO1xyXG4gICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsIGlmIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIERJViBpZD1cInJlZGlwcy1kcmFnXCJcclxuICAgICAgaWYgKFggPCBkaXZCb3hbMV0gJiYgWCA+IGRpdkJveFszXSAmJiBZIDwgZGl2Qm94WzJdICYmIFkgPiBkaXZCb3hbMF0pIHtcclxuICAgICAgICBjZWxsQ2hhbmdlZCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBzYXZlIHNjcm9sbCBvYmplY3QgdG8gdGhlIGdsb2JhbCB2YXJpYWJsZSBmb3IgdGhlIGZpcnN0IGNhbGwgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmVcclxuICAgIC8vIHJlY3Vyc2l2ZSBjYWxscyB3aWxsIG5vdCBlbnRlciB0aGlzIGNvZGUgYW5kIHJlZmVyZW5jZSB0byB0aGUgc2Nyb2xsRGF0YS5vYmogd2lsbCBiZSBwcmVzZXJ2ZWRcclxuICAgIGlmICh0eXBlb2Yoc28pID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBzY3JvbGxEYXRhLm9iaiA9IHNvO1xyXG4gICAgfVxyXG4gICAgLy8gd2luZG93IGF1dG9zY3JvbGwgKGRlZmluZSBjdXJyZW50LCBvbGQgYW5kIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBvbGQgPSBnZXRTY3JvbGxQb3NpdGlvbigpWzBdO1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEud2lkdGggLSBzY3JlZW4ud2lkdGg7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5wYWdlLng7XHJcbiAgICB9XHJcbiAgICAvLyBzY3JvbGxhYmxlIGNvbnRhaW5lciAoZGVmaW5lIGN1cnJlbnQgYW5kIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsTGVmdDtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxXaWR0aCAtIHNjcm9sbERhdGEub2JqLmNsaWVudFdpZHRoO1xyXG4gICAgICBlZGdlQ3Jvc3NlZCA9IGVkZ2UuZGl2Lng7XHJcbiAgICB9XHJcbiAgICAvLyBpZiBzY3JvbGxpbmcgaXMgcG9zc2libGVcclxuICAgIGlmIChlZGdlLmZsYWcueCA+IDAgJiYgKChlZGdlQ3Jvc3NlZCA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPiAwKSB8fCAoZWRnZUNyb3NzZWQgPiAwICYmIHNjcm9sbFBvc2l0aW9uIDwgbWF4c3ApKSkge1xyXG4gICAgICAvLyBpZiBvYmplY3QgaXMgd2luZG93XHJcbiAgICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSB7XHJcbiAgICAgICAgLy8gc2Nyb2xsIHdpbmRvd1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxCeShlZGdlQ3Jvc3NlZCwgMCk7XHJcbiAgICAgICAgLy8gZ2V0IG5ldyB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChhZnRlciBzY3JvbGxpbmcpXHJcbiAgICAgICAgLy8gYmVjYXVzZSBhdCBwYWdlIHRvcCBvciBib3R0b20gZWRnZVkgY2FuIGJlIGJpZ2dlciB0aGVuIHRoZSByZXN0IG9mIHNjcm9sbGluZyBhcmVhXHJcbiAgICAgICAgLy8gaXQgd2lsbCBiZSBuaWNlIHRvIGtub3cgaG93IG11Y2ggd2FzIHdpbmRvdyBzY3JvbGxlZCBhZnRlciBzY3JvbGxCeSBjb21tYW5kXHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpWzBdO1xyXG4gICAgICAgIC8vIGdldCBjdXJyZW50IG9iamVjdCB0b3Agc3R5bGVcclxuICAgICAgICBwb3MgPSBwYXJzZUludChvYmouc3R5bGUubGVmdCwgMTApO1xyXG4gICAgICAgIGlmIChpc05hTihwb3MpKSB7XHJcbiAgICAgICAgICBwb3MgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBvciBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzY3JvbGxEYXRhLm9iai5zY3JvbGxMZWZ0ICs9IGVkZ2VDcm9zc2VkO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHJlY3Vyc2l2ZSBhdXRvc2Nyb2xsIGNhbGxcclxuICAgICAgc2V0VGltZW91dChhdXRvU2Nyb2xsWCwgUkVESVBTLmRyYWcuc2Nyb2xsLnNwZWVkKTtcclxuICAgIH1cclxuICAgIC8vIGF1dG9zY3JvbGwgaXMgZW5kZWQ6IGVsZW1lbnQgaXMgb3V0IG9mIHRoZSBwYWdlIGVkZ2Ugb3IgbWF4aW11bSBwb3NpdGlvbiBpcyByZWFjaGVkIChsZWZ0IG9yIHJpZ2h0KVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIC8vIHJldHVybiBvbnNjcm9sbCBldmVudCBoYW5kbGVyICh0byB3aW5kb3cgb3IgZGl2IGVsZW1lbnQpXHJcbiAgICAgIFJFRElQUy5ldmVudC5hZGQoc2Nyb2xsRGF0YS5vYmosICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7XHJcbiAgICAgIC8vIHJlc2V0IGF1dG8gc2Nyb2xsIGZsYWcgWFxyXG4gICAgICBlZGdlLmZsYWcueCA9IDA7XHJcbiAgICAgIC8vIHJlc2V0IGN1cnJlbnQgY2VsbCBwb3NpdGlvblxyXG4gICAgICBjdXJyZW50Q2VsbCA9IFswLCAwLCAwLCAwXTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBWZXJ0aWNhbCBhdXRvIHNjcm9sbCBtZXRob2QuICBAcGFyYW0ge0hUTUxFbGVtZW50fSBzbyBXaW5kb3cgb3IgRElWIGVsZW1lbnQgKHNvIC0gc2Nyb2xsIG9iamVjdCkuXHJcbiAgYXV0b1Njcm9sbFkgPSBmdW5jdGlvbiAoc28pIFxyXG4gIHtcclxuICAgIHZhciBwb3MsICAgICAgLy8gdG9wIHN0eWxlIHBvc2l0aW9uXHJcbiAgICAgIG9sZCwgICAgICAvLyBvbGQgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAobmVlZGVkIGZvciB3aW5kb3cgc2Nyb2xsaW5nKVxyXG4gICAgICBzY3JvbGxQb3NpdGlvbiwgLy8gZGVmaW5lIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgIG1heHNwLCAgICAgIC8vIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgIGVkZ2VDcm9zc2VkLCAgLy8gY3Jvc3NlZCBlZGdlIGZvciB3aW5kb3cgYW5kIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIFggPSBwb2ludGVyLngsICAvLyBkZWZpbmUgcG9pbnRlciBYIHBvc2l0aW9uXHJcbiAgICAgIFkgPSBwb2ludGVyLnk7ICAvLyBkZWZpbmUgcG9pbnRlciBZIHBvc2l0aW9uXHJcbiAgICBcclxuICAgIGlmIChlZGdlLmZsYWcueSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbW91c2V1cCB0aGVuIHN0b3AgaGFuZGxpbmcgXCJjdXJyZW50IGNlbGxcIlxyXG4gICAge1xyXG4gICAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgY2VsbCAoYXV0b3Njcm9sbCBpcyB3b3JraW5nKVxyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSByb3cgYW5kIHRhYmxlIGNlbGxcclxuICAgICAgXHJcbiAgICAgIGlmIChYIDwgZGl2Qm94WzFdICYmIFggPiBkaXZCb3hbM10gJiYgWSA8IGRpdkJveFsyXSAmJiBZID4gZGl2Qm94WzBdKSAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgaWYgbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgRElWIGlkPVwicmVkaXBzLWRyYWdcIlxyXG4gICAgICB7XHJcbiAgICAgICAgY2VsbENoYW5nZWQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBzYXZlIHNjcm9sbCBvYmplY3QgdG8gdGhlIGdsb2JhbCB2YXJpYWJsZSBmb3IgdGhlIGZpcnN0IGNhbGwgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmUsIHJlY3Vyc2l2ZSBjYWxscyB3aWxsIG5vdCBlbnRlciB0aGlzIGNvZGUgYW5kIHJlZmVyZW5jZSB0byB0aGUgc2Nyb2xsRGF0YS5vYmogd2lsbCBiZSBwcmVzZXJ2ZWRcclxuICAgIGlmICh0eXBlb2Yoc28pID09PSAnb2JqZWN0JykgXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbERhdGEub2JqID0gc287XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2luZG93IGF1dG9zY3JvbGwgKGRlZmluZSBjdXJyZW50LCBvbGQgYW5kIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IG9sZCA9IGdldFNjcm9sbFBvc2l0aW9uKClbMV07XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS5oZWlnaHQgLSBzY3JlZW4uaGVpZ2h0O1xyXG4gICAgICBlZGdlQ3Jvc3NlZCA9IGVkZ2UucGFnZS55O1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGxhYmxlIGNvbnRhaW5lciAoZGVmaW5lIGN1cnJlbnQgYW5kIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IHNjcm9sbERhdGEub2JqLnNjcm9sbFRvcDtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxIZWlnaHQgLSBzY3JvbGxEYXRhLm9iai5jbGllbnRIZWlnaHQ7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5kaXYueTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gaWYgc2Nyb2xsaW5nIGlzIHBvc3NpYmxlXHJcbiAgICBpZiAoZWRnZS5mbGFnLnkgPiAwICYmICgoZWRnZUNyb3NzZWQgPCAwICYmIHNjcm9sbFBvc2l0aW9uID4gMCkgfHwgKGVkZ2VDcm9zc2VkID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA8IG1heHNwKSkpIFxyXG4gICAge1xyXG4gICAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBvYmplY3QgaXMgd2luZG93XHJcbiAgICAgIHtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoMCwgZWRnZUNyb3NzZWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHdpbmRvd1xyXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVsxXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgbmV3IHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKGFmdGVyIHNjcm9sbGluZyksIGJlY2F1c2UgYXQgcGFnZSB0b3Agb3IgYm90dG9tIGVkZ2VZIGNhbiBiZSBiaWdnZXIgdGhlbiB0aGUgcmVzdCBvZiBzY3JvbGxpbmcgYXJlYSwgaXQgd2lsbCBiZSBuaWNlIHRvIGtub3cgaG93IG11Y2ggd2FzIHdpbmRvdyBzY3JvbGxlZCBhZnRlciBzY3JvbGxCeSBjb21tYW5kXHJcbiAgICAgICAgcG9zID0gcGFyc2VJbnQob2JqLnN0eWxlLnRvcCwgMTApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBjdXJyZW50IG9iamVjdCB0b3Agc3R5bGVcclxuICAgICAgICBcclxuICAgICAgICBpZiAoaXNOYU4ocG9zKSkgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcG9zID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3Igc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAge1xyXG4gICAgICAgIHNjcm9sbERhdGEub2JqLnNjcm9sbFRvcCArPSBlZGdlQ3Jvc3NlZDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgc2V0VGltZW91dChhdXRvU2Nyb2xsWSwgUkVESVBTLmRyYWcuc2Nyb2xsLnNwZWVkKTsgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjdXJzaXZlIGF1dG9zY3JvbGwgY2FsbFxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhdXRvc2Nyb2xsIGlzIGVuZGVkOiBlbGVtZW50IGlzIG91dCBvZiB0aGUgcGFnZSBlZGdlIG9yIG1heGltdW0gcG9zaXRpb24gaXMgcmVhY2hlZCAodG9wIG9yIGJvdHRvbSlcclxuICAgIHtcclxuICAgICAgUkVESVBTLmV2ZW50LmFkZChzY3JvbGxEYXRhLm9iaiwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgICAgICAgICAgLy8gcmV0dXJuIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgKHRvIHdpbmRvdyBvciBkaXYgZWxlbWVudClcclxuICAgICAgZWRnZS5mbGFnLnkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgYXV0byBzY3JvbGwgZmxhZyBZXHJcbiAgICAgIGN1cnJlbnRDZWxsID0gWzAsIDAsIDAsIDBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGN1cnJlbnQgY2VsbCBwb3NpdGlvblxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBjb3BpZXMgY3VzdG9tIHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgZWxlbWVudCB0byB0aGUgY2xvbmVkIGVsZW1lbnQgYW5kIHNldHMgZXZlbnQgaGFuZGxlcnMgKG9ubW91c2Vkb3duIGFuZCBvbmRibGNsaWNrKS5cclxuICAgKiBUaGlzIGFjdGlvbiB3aWxsIGJlIHRha2VuIG9uIERJViBlbGVtZW50IGl0c2VsZiBhbmQgYWxsIGNoaWxkIERJViBlbGVtZW50cy5cclxuICAgKiBOZWVkZWQgaW4gY2FzZSB3aGVuIERJViBlbGVtZW50IGlzIGNsb25lZCBvciBST1cgaXMgY2xvbmVkIChmb3IgZHJhZ2dpbmcgbW9kZT1cInJvd1wiKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBzcmMgU291cmNlIGVsZW1lbnQgKERJViBvciBUUiBlbGVtZW50KS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjbG4gQ2xvbmVkIGVsZW1lbnQgKERJViBvciBUUiBlbGVtZW50KS5cclxuICAgKi9cclxuICBjb3B5UHJvcGVydGllcyA9IGZ1bmN0aW9uIChzcmMsIGNsbikgXHJcbiAge1xyXG4gICAgdmFyIGNvcHkgPSBbXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgbWV0aG9kXHJcbiAgICB2YXIgY2hpbGRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIGZvciBjaGlsZCBlbGVtZW50cyAodGhpcyBtZXRob2QgY2FsbHMgXCJjb3B5XCIgbWV0aG9kKVxyXG4gICAgXHJcbiAgICBjb3B5WzBdID0gZnVuY3Rpb24gKGUxLCBlMikgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIGNvcHkgbWV0aG9kIGZvciBESVYgZWxlbWVudHMgKGUxIHNvdXJjZSBlbGVtZW50LCBlMiBjbG9uZWQgZWxlbWVudCksIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDA5NDgxMS9qYXZhc2NyaXB0LWNsb25lbm9kZS1hbmQtcHJvcGVydGllc1xyXG4gICAge1xyXG4gICAgICBpZiAoZTEucmVkaXBzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJlZGlwcyBwcm9wZXJ0eSBleGlzdHMgaW4gc291cmNlIGVsZW1lbnQsIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgKHJlZGlwcy5lbmFibGVkLCAgcmVkaXBzLmNvbnRhaW5lciAuLi4pXHJcbiAgICAgIHtcclxuICAgICAgICBlMi5yZWRpcHMgPSB7fTtcclxuICAgICAgICBlMi5yZWRpcHMuZW5hYmxlZCA9IGUxLnJlZGlwcy5lbmFibGVkO1xyXG4gICAgICAgIGUyLnJlZGlwcy5jb250YWluZXIgPSBlMS5yZWRpcHMuY29udGFpbmVyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChlMS5yZWRpcHMuZW5hYmxlZCkgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvbm1vdXNlZG93biBldmVudCBoYW5kbGVyIGlmIHNvdXJjZSBlbGVtZW50IGlzIGVuYWJsZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICByZWdpc3RlckV2ZW50cyhlMik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjb3B5WzFdID0gZnVuY3Rpb24gKGUxLCBlMikgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIGNvcHkgbWV0aG9kIGZvciBUUiBlbGVtZW50cyBcclxuICAgIHtcclxuICAgICAgaWYgKGUxLnJlZGlwcykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByZWRpcHMgcHJvcGVydHkgZXhpc3RzIGluIHNvdXJjZSBlbGVtZW50LCBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIChyZWRpcHMuZW1wdHlSb3cgLi4uKVxyXG4gICAgICB7XHJcbiAgICAgICAgZTIucmVkaXBzID0ge307XHJcbiAgICAgICAgZTIucmVkaXBzLmVtcHR5Um93ID0gZTEucmVkaXBzLmVtcHR5Um93O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjaGlsZHMgPSBmdW5jdGlvbiAoZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG1ldGhvZCB0byBjb3B5IHByb3BlcnRpZXMgZm9yIGNoaWxkIGVsZW1lbnRzIChpbnB1dCBwYXJhbWV0ZXIgaXMgZWxlbWVudCBpbmRleCAwIC0gRElWLCAxIC0gVFIpXHJcbiAgICB7XHJcbiAgICAgIHZhciBlbDEsIGVsMjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29sbGVjdGlvbiBvZiBESVYvVFIgZWxlbWVudHMgaW4gc291cmNlIGFuZCBjbG9uZWQgZWxlbWVudFxyXG4gICAgICB2YXIgdG4gPSBbJ0RJVicsICdUUiddOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhZyBuYW1lXHJcbiAgICAgIFxyXG4gICAgICBlbDEgPSBzcmMuZ2V0RWxlbWVudHNCeVRhZ05hbWUodG5bZV0pOyAgICAgICAgICAgIC8vIGNvbGxlY3QgY2hpbGQgRElWL1RSIGVsZW1lbnRzIGZyb20gdGhlIHNvdXJjZSBlbGVtZW50IChwb3NzaWJsZSBpZiBkaXYgZWxlbWVudCBjb250YWlucyB0YWJsZSlcclxuICAgICAgZWwyID0gY2xuLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRuW2VdKTsgICAgICAgICAgICAvLyBjb2xsZWN0IGNoaWxkIERJVi9UUiBlbGVtZW50cyBmcm9tIGNsb25lZCBlbGVtZW50XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsMi5sZW5ndGg7IGkrKykgICAgICAgICAgICAgIC8vIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgKHJlZGlwcy5lbmFibGVkLCAgcmVkaXBzLmNvbnRhaW5lciAuLi4pIGFuZCBzZXQgZXZlbnQgaGFuZGxlcnMgdG8gY2hpbGQgRElWIGVsZW1lbnRzXHJcbiAgICAgIHtcclxuICAgICAgICBjb3B5W2VdKGVsMVtpXSwgZWwyW2ldKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgaWYgKHNyYy5ub2RlTmFtZSA9PT0gJ0RJVicpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHNvdXJjZSBlbGVtZW50IGlzIERJViBlbGVtZW50IHRoZW4gY29weSBjdXN0b20gcHJvcGVydGllcyBmb3IgRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgY29weVswXShzcmMsIGNsbik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChzcmMubm9kZU5hbWUgPT09ICdUUicpICAgICAgICAgICAgICAgICAgICAgLy8gaWYgc291cmNlIGVsZW1lbnQgaXMgVFIgZWxlbWVudCB0aGVuIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgZm9yIFRSIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgY29weVsxXShzcmMsIGNsbik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNoaWxkcygwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHByb3BlcnRpZXMgZm9yIERJViBjaGlsZCBlbGVtZW50c1xyXG4gICAgY2hpbGRzKDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcHJvcGVydGllcyBmb3IgVFIgY2hpbGQgZWxlbWVudHNcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHVwZGF0ZXMgY2xpbWl0MV9YIG9yIGNsaW1pdDJfWCBjbGFzcyBuYW1lIChYIGRlZmluZXMgY2xvbmluZyBsaW1pdCkuXHJcbiAgICogPHVsPlxyXG4gICAqIDxsaT5jbGltaXQxX1ggLSBhZnRlciBjbG9uaW5nIFggZWxlbWVudHMsIGxhc3QgZWxlbWVudCB3aWxsIGJlIG5vcm1hbCBkcmFnLWFibGUgZWxlbWVudDwvbGk+XHJcbiAgICogPGxpPmNsaW1pdDJfWCAtIGFmdGVyIGNsb25pbmcgWCBlbGVtZW50cywgbGFzdCBlbGVtZW50IHdpbGwgc3RheSB1bm1vdmFibGU8L2xpPlxyXG4gICAqIDwvdWw+XHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgRWxlbWVudCBvbiB3aGljaCBjbmFtZSBjbGFzcyBzaG91bGQgYmUgdXBkYXRlZC5cclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHZhbHVlIEluY3JlbWVudCBvciBkZWNyZW1lbnQgY2xpbWl0IHZhbHVlLlxyXG4gICAqL1xyXG4gIGNsb25lTGltaXQgPSBmdW5jdGlvbiAoZWwsIHZhbHVlKSBcclxuICB7XHJcbiAgICB2YXIgbWF0Y2hBcnJheTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaCBhcnJheVxyXG4gICAgdmFyIGxpbWl0VHlwZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGltaXQgdHlwZSAoMSAtIGNsb25lIGJlY29tZXMgXCJub3JtYWxcIiBkcmFnIGVsZW1lbnQgYXQgbGFzdDsgMiAtIGNsb25lIGVsZW1lbnQgc3RheXMgaW1tb3ZhYmxlKVxyXG4gICAgdmFyIGxpbWl0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGltaXQgbnVtYmVyXHJcbiAgICB2YXIgY2xhc3NlczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGFzcyBuYW1lcyBvZiBjbG9uZSBlbGVtZW50XHJcbiAgICBcclxuICAgIGNsYXNzZXMgPSBlbC5jbGFzc05hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlYWQgY2xhc3MgbmFtZSBmcm9tIGVsZW1lbnRcclxuICAgIG1hdGNoQXJyYXkgPSBjbGFzc2VzLm1hdGNoKC9jbGltaXQoXFxkKV8oXFxkKykvKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2ggY2xpbWl0IGNsYXNzIG5hbWVcclxuICAgIFxyXG4gICAgaWYgKG1hdGNoQXJyYXkgIT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGNsYXNzIGNvbnRhaW5zIGNsaW1pdFxyXG4gICAge1xyXG4gICAgICBsaW1pdFR5cGUgPSBwYXJzZUludChtYXRjaEFycmF5WzFdLCAxMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBsaW1pdFR5cGUgKDEgb3IgMikgYW5kIGxpbWl0XHJcbiAgICAgIGxpbWl0ID0gcGFyc2VJbnQobWF0Y2hBcnJheVsyXSwgMTApO1xyXG4gICAgICBcclxuICAgICAgaWYgKGxpbWl0ID09PSAwICYmIHZhbHVlID09PSAxKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGN1cnJlbnQgbGltaXQgaXMgMCBhbmQgc2hvdWxkIGJlIHNldCB0byAxIHRoZW4gcmV0dXJuIFwiY2xvbmluZ1wiIHRvIHRoZSBESVYgZWxlbWVudFxyXG4gICAgICB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIHJlZGlwcy1jbG9uZSc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgXCJyZWRpcHMtY2xvbmVcIiBjbGFzcyB0byBjbGFzcyBhdHRyaWJ1dGVcclxuICAgICAgICBcclxuICAgICAgICBpZiAobGltaXRUeXBlID09PSAyKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZSBESVYgZWxlbWVudCBmb3IgY2xpbWl0MiB0eXBlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZW5hYmxlRHJhZyh0cnVlLCBlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBsaW1pdCArPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGxpbWl0IHZhbHVlXHJcbiAgICAgIGNsYXNzZXMgPSBjbGFzc2VzLnJlcGxhY2UoL2NsaW1pdFxcZF9cXGQrL2csICdjbGltaXQnICsgbGltaXRUeXBlICsgJ18nICsgbGltaXQpOyAgICAgICAgIC8vIHVwZGF0ZSBjbGltaXQgY2xhc3MgbmFtZSB3aXRoIG5ldyBsaW1pdCB2YWx1ZVxyXG4gICAgICBcclxuICAgICAgaWYgKGxpbWl0IDw9IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlc3QgaWYgbGltaXQgZHJvcHMgdG8gemVyb1xyXG4gICAgICB7XHJcbiAgICAgICAgY2xhc3NlcyA9IGNsYXNzZXMucmVwbGFjZSgncmVkaXBzLWNsb25lJywgJycpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBubyBtb3JlIGNsb25pbmcsIGN1dCBvdXQgXCJyZWRpcHMtY2xvbmVcIiBmcm9tIGNsYXNzIG5hbWVcclxuICAgICAgICBcclxuICAgICAgICBpZiAobGltaXRUeXBlID09PSAyKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGxpbWl0IHR5cGUgaXMgMiB0aGVuIGRpc2FibGUgY2xvbmUgZWxlbWVudCAoaXQgd2lsbCBzdGF5IGluIGNlbGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZW5hYmxlRHJhZyhmYWxzZSwgZWwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZSBzb3VyY2UgRElWIGVsZW1lbnRcclxuICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmNsb25lZEVuZDIoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQuY2xvbmVkRW5kMiBoYW5kbGVyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQuY2xvbmVkRW5kMSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5jbG9uZWRFbmQxIGhhbmRsZXJcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGVsLmNsYXNzTmFtZSA9IG5vcm1hbGl6ZShjbGFzc2VzKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub3JtYWxpemUgc3BhY2VzIGFuZCByZXR1cm4gY2xhc3NlcyB0byB0aGUgY2xvbmUgb2JqZWN0XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIGF0dGFjaGVzIC8gZGV0YWNoZXMgb25tb3VzZWRvd24sIG9udG91Y2hzdGFydCBhbmQgb25kYmxjbGljayBldmVudHMgdG8gRElWIGVsZW1lbnRzIGFuZCBhdHRhY2hlcyBvbnNjcm9sbCBldmVudCB0byB0aGUgc2Nyb2xsIGNvbnRhaW5lcnMgaW4gaW5pdGlhbGl6YXRpb24gcGhhc2UuXHJcbiAgICogSXQgYWxzbyBjYW4gYmUgdXNlZCBmb3IgZWxlbWVudCBpbml0aWFsaXphdGlvbiBhZnRlciBESVYgZWxlbWVudCB3YXMgbWFudWFsbHkgYWRkZWQgdG8gdGhlIHRhYmxlLlxyXG4gICAqIElmIGNsYXNzIGF0dHJpYnV0ZSBvZiBESVYgY29udGFpbmVyIGNvbnRhaW5zIFwicmVkaXBzLW5vYXV0b3Njcm9sbFwiIGNsYXNzIG5hbWUgdGhlbiBhdXRvU2Nyb2xsIG9wdGlvbiB3aWxsIGJlIGRpc2FibGVkLlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbnxTdHJpbmd9IGVuYWJsZV9mbGFnIEVuYWJsZSAvIGRpc2FibGUgZWxlbWVudCAob3IgZWxlbWVudCBzdWJ0cmVlIGxpa2UgdGFibGUsIGRyYWdnaW5nIGNvbnRhaW5lciAuLi4pLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U3RyaW5nfSBbZWxdIEhUTUwgbm9kZSBvciBDU1Mgc2VsZWN0b3IgdG8gZW5hYmxlIC8gZGlzYWJsZS4gUGFyYW1ldGVyIGRlZmluZXMgZWxlbWVudCByZWZlcmVuY2Ugb3IgQ1NTIHNlbGVjdG9yIG9mIERJViBlbGVtZW50cyB0byBlbmFibGUgLyBkaXNhYmxlLlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gZW5hYmxlIGVsZW1lbnQgd2l0aCBpZD1cImlkMTIzXCIgKGVsZW1lbnQgaWQgc2hvdWxkIGJlIGEgc3RyaW5nIGFjY29yZGluZyB0byBET00gZG9jcylcclxuICAgKiByZC5lbmFibGVEcmFnKHRydWUsICcjaWQxMjMnKTtcclxuICAgKlxyXG4gICAqIC8vIG9yIGluaXQgbWFudWFsbHkgYWRkZWQgZWxlbWVudCB3aXRoIGtub3duIGlkXHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZyh0cnVlLCAnI2lkMjM0Jyk7XHJcbiAgICpcclxuICAgKiAvLyBkaXNhYmxlIGFsbCBESVYgZWxlbWVudHMgaW4gZHJhZzEgc3VidHJlZVxyXG4gICAqIHJkLmVuYWJsZURyYWcoZmFsc2UsICcjZHJhZzEgZGl2JylcclxuICAgKlxyXG4gICAqIC8vIGluaXQgRElWIGVsZW1lbnRzIGluIGRyYWdnaW5nIGFyZWEgKGluY2x1ZGluZyBuZXdseSBhZGRlZCBESVYgZWxlbWVudClcclxuICAgKiAvLyBESVYgaW5pdGlhbGl6YXRpb24gd2lsbCB3b3JrIGlmIHRhYmxlIG5vZGUgc3RheXMgaW50YWN0ICh0YWJsZSBpcyBub3QgZ2VuZXJhdGVkIGR5bmFtaWNhbGx5KVxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcoJ2luaXQnKTtcclxuICAgKlxyXG4gICAqIC8vIGluaXQgYWRkZWQgZWxlbWVudCB3aXRoIHJlZmVyZW5jZSBteUVsZW1lbnRcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKHRydWUsIG15RWxlbWVudCk7XHJcbiAgICpcclxuICAgKiAvLyBkaXNhYmxlIGFsbCBESVYgZWxlbWVudHMgd2l0aGluIFREICh0ZCBpcyByZWZlcmVuY2UgdG8gVEQgbm9kZSlcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKGZhbHNlLCB0ZCk7XHJcbiAgICovXHJcbiAgZW5hYmxlRHJhZyA9IGZ1bmN0aW9uIChlbmFibGVfZmxhZywgZWwpIFxyXG4gIHtcclxuICAgIHZhciBkaXYgPSBbXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0aW9uIG9mIGRpdiBlbGVtZW50cyBjb250YWluZWQgaW4gdGFibGVzIG9yIG9uZSBkaXYgZWxlbWVudFxyXG4gICAgXHJcbiAgICBpZiAoZWwgPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29sbGVjdCBESVYgZWxlbWVudHMgaW5zaWRlIGN1cnJlbnQgZHJhZyBhcmVhIChkcmFnIGVsZW1lbnRzIGFuZCBzY3JvbGwgY29udGFpbmVycykgZS5nLiBlbmFibGVEcmFnKHRydWUpXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGRyYWdDb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpO1xyXG4gICAgfSAgICBcclxuICAgIGVsc2UgaWYgKHR5cGVvZihlbCkgPT09ICdzdHJpbmcnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcImVsXCIgaXMgc3RyaW5nIChDU1Mgc2VsZWN0b3IpIC0gaXQgY2FuIGNvbGxlY3Qgb25lIERJViBlbGVtZW50IChsaWtlIFwiI2QxMlwiKSBvciBtYW55IERJViBlbGVtZW50cyAobGlrZSBcIiNkcmFnMSBkaXZcIilcclxuICAgIHtcclxuICAgICAgZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YoZWwpID09PSAnb2JqZWN0JyAmJiAoZWwubm9kZU5hbWUgIT09ICdESVYnIHx8IGVsLmNsYXNzTmFtZS5pbmRleE9mKCdyZWRpcHMtZHJhZycpID09PSAtMSkpICAgICAgLy8gXCJlbFwiIGlzIG5vZGUgcmVmZXJlbmNlIHRvIGVsZW1lbnQgdGhhdCBpcyBub3QgRElWIGNsYXNzPVwicmVkaXBzLWRyYWdcIlxyXG4gICAge1xyXG4gICAgICBkaXYgPSBlbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2Jyk7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9uZSBvZiBhYm92ZSwgZWwgaXMgRElWIGNsYXNzPVwicmVkaXBzLWRyYWdcIiwgc28gcHJlcGFyZSBhcnJheSB3aXRoIG9uZSBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBkaXZbMF0gPSBlbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZW5hYmxlRGl2cyhlbmFibGVfZmxhZywgZGl2KTtcclxuICB9O1xyXG4gIFxyXG4gIFxyXG4gIGVuYWJsZURpdnMgPSBmdW5jdGlvbihlbmFibGVfZmxhZywgZGl2KVxyXG4gIHtcclxuICAgICB2YXIgaSwgaiwgaywgICAgLy8gbG9jYWwgdmFyaWFibGVzIHVzZWQgaW4gbG9vcFxyXG4gICAgICB0YmxzID0gW10sICAgIC8vIGNvbGxlY3Rpb24gb2YgdGFibGVzIGluc2lkZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICBib3JkZXJTdHlsZSwgIC8vIGJvcmRlciBzdHlsZSAoc29saWQgb3IgZG90dGVkKVxyXG4gICAgICBvcGFjaXR5LCAgICAvLyAoaW50ZWdlcikgc2V0IG9wYWNpdHkgZm9yIGVuYWJsZWQgLyBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICBjdXJzb3IsICAgICAvLyBjdXJzb3Igc3R5bGUgKG1vdmUgb3IgYXV0bylcclxuICAgICAgb3ZlcmZsb3csICAgLy8gY3NzIHZhbHVlIG9mIG92ZXJmbG93IHByb3BlcnR5XHJcbiAgICAgIGF1dG9zY3JvbGwsICAgLy8gYm9vbGVhbiAtIGlmIHNjcm9sbGFibGUgY29udGFpbmVyIHdpbGwgaGF2ZSBhdXRvc2Nyb2xsIG9wdGlvbiAoZGVmYXVsdCBpcyB0cnVlKVxyXG4gICAgICBlbmFibGVkLCAgICAvLyBlbmFibGVkIHByb3BlcnR5ICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICBjYiwgICAgICAgLy8gYm94IG9mZnNldCBmb3IgY29udGFpbmVyIGJveCAoY2IpXHJcbiAgICAgIHBvc2l0aW9uLCAgIC8vIGlmIHRhYmxlIGNvbnRhaW5lciBoYXMgcG9zaXRpb246Zml4ZWQgdGhlbiBcInBhZ2Ugc2Nyb2xsXCIgb2Zmc2V0IHNob3VsZCBub3QgYmUgYWRkZWRcclxuICAgICAgcmVnZXhEcmFnID0gL1xcYnJlZGlwcy1kcmFnXFxiL2ksIC8vIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggXCJyZWRpcHMtZHJhZ1wiIGNsYXNzIG5hbWVcclxuICAgICAgcmVnZXhOb0F1dG9zY3JvbGwgPSAvXFxicmVkaXBzLW5vYXV0b3Njcm9sbFxcYi9pOyAvLyByZWd1bGFyIGV4cHJlc3Npb24gdG8gc2VhcmNoIFwicmVkaXBzLW5vYXV0b3Njcm9sbFwiIGNsYXNzIG5hbWUgICBcclxuXHJcbiAgICBvcGFjaXR5ID0gUkVESVBTLmRyYWcuc3R5bGUub3BhY2l0eURpc2FibGVkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIGRpc2FibGVkIGVsZW1lbnRzIGZyb20gcHVibGljIHByb3BlcnR5IFwib3BhY2l0eURpc2FibGVkXCJcclxuICAgIFxyXG4gICAgaWYgKGVuYWJsZV9mbGFnID09PSB0cnVlIHx8IGVuYWJsZV9mbGFnID09PSAnaW5pdCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzdHlsZXMgZm9yIGVuYWJsZWQgRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgYm9yZGVyU3R5bGUgPSBSRURJUFMuZHJhZy5zdHlsZS5ib3JkZXJFbmFibGVkO1xyXG4gICAgICBjdXJzb3IgPSAnbW92ZSc7XHJcbiAgICAgIGVuYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2Ugc2V0IHN0eWxlcyBmb3IgZGlzYWJsZWQgRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgYm9yZGVyU3R5bGUgPSBSRURJUFMuZHJhZy5zdHlsZS5ib3JkZXJEaXNhYmxlZDtcclxuICAgICAgY3Vyc29yID0gJ2F1dG8nO1xyXG4gICAgICBlbmFibGVkID0gZmFsc2U7XHJcbiAgICB9ICAgIFxyXG4gICAgXHJcbiAgICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGRpdi5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFpbiBsb29wIHRoYXQgZ29lcyB0aHJvdWdoIGFsbCBESVYgZWxlbWVudHNcclxuICAgIHsgICAgXHJcbiAgICAgIGlmIChyZWdleERyYWcudGVzdChkaXZbaV0uY2xhc3NOYW1lKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGVsZW1lbnQgY29udGFpbnMgXCJyZWRpcHMtZHJhZ1wiIGNsYXNzIG5hbWVcclxuICAgICAge1xyXG4gICAgICAgIGlmIChlbmFibGVfZmxhZyA9PT0gJ2luaXQnIHx8IGRpdltpXS5yZWRpcHMgPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgIC8vIGFkZCByZWZlcmVuY2UgdG8gdGhlIERJViBjb250YWluZXIgKGluaXRpYWxpemF0aW9uIG9yIG5ld2x5IGFkZGVkIGVsZW1lbnQgdG8gdGhlIHRhYmxlKSB0aGlzIHByb3BlcnR5IHNob3VsZCBub3QgYmUgY2hhbmdlZCBpbiBsYXRlciBlbGVtZW50IGVuYWJsZS9kaXNhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGl2W2ldLnJlZGlwcyA9IHt9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIFwicHJvcGVydHkgb2JqZWN0XCIgaW4gd2hpY2ggYWxsIGN1c3RvbSBwcm9wZXJ0aWVzIHdpbGwgYmUgc2F2ZWRcclxuICAgICAgICAgIGRpdltpXS5yZWRpcHMuY29udGFpbmVyID0gZHJhZ0NvbnRhaW5lcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZW5hYmxlX2ZsYWcgPT09IHRydWUgJiYgdHlwZW9mKG9wYWNpdHkpID09PSAnbnVtYmVyJykgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG9wYWNpdHkgbWFza1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRpdltpXS5zdHlsZS5vcGFjaXR5ID0gJyc7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUuZmlsdGVyID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVuYWJsZV9mbGFnID09PSBmYWxzZSAmJiB0eXBlb2Yob3BhY2l0eSkgPT09ICdudW1iZXInKSAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRpdltpXS5zdHlsZS5vcGFjaXR5ID0gb3BhY2l0eSAvIDEwMDtcclxuICAgICAgICAgIGRpdltpXS5zdHlsZS5maWx0ZXIgPSAnYWxwaGEob3BhY2l0eT0nICsgb3BhY2l0eSArICcpJztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmVnaXN0ZXJFdmVudHMoZGl2W2ldLCBlbmFibGVkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXIgZm9yIERJViBlbGVtZW50XHJcbiAgICAgICAgXHJcbiAgICAgICAgZGl2W2ldLnN0eWxlLmJvcmRlclN0eWxlID0gYm9yZGVyU3R5bGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHN0eWxlcyBmb3IgRElWIGVsZW1lbnRcclxuICAgICAgICBkaXZbaV0uc3R5bGUuY3Vyc29yID0gY3Vyc29yO1xyXG4gICAgICAgIGRpdltpXS5yZWRpcHMuZW5hYmxlZCA9IGVuYWJsZWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBlbmFibGVkIHByb3BlcnR5IHRvIHRoZSBESVYgZWxlbWVudCAodHJ1ZSBvciBmYWxzZSlcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChlbmFibGVfZmxhZyA9PT0gJ2luaXQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0dGFjaCBvbnNjcm9sbCBldmVudCB0byB0aGUgRElWIGVsZW1lbnQgaW4gaW5pdCBwaGFzZSBvbmx5IGlmIERJViBlbGVtZW50IGhhcyBvdmVyZmxvdyBvdGhlciB0aGFuIGRlZmF1bHQgdmFsdWUgJ3Zpc2libGUnIGFuZCB0aGF0IG1lYW5zIHNjcm9sbGFibGUgRElWIGNvbnRhaW5lclxyXG4gICAgICB7XHJcbiAgICAgICAgb3ZlcmZsb3cgPSBnZXRTdHlsZShkaXZbaV0sICdvdmVyZmxvdycpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNrIGZvciBvdmVyZmxvdyBzdHlsZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChvdmVyZmxvdyAhPT0gJ3Zpc2libGUnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIERJViBpcyBzY3JvbGxhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgUkVESVBTLmV2ZW50LmFkZChkaXZbaV0sICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvbnNjcm9sbCBldmVudCBoYW5kbGVyIGZvciBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgcG9zaXRpb24gPSBnZXRTdHlsZShkaXZbaV0sICdwb3NpdGlvbicpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjb250YWluZXIgYm94IHN0eWxlIHBvc2l0aW9uICh0byBleGNsdWRlIHBhZ2Ugc2Nyb2xsIG9mZnNldCBmcm9tIGNhbGN1bGF0aW9uIGlmIG5lZWRlZClcclxuICAgICAgICAgIGNiID0gYm94T2Zmc2V0KGRpdltpXSwgcG9zaXRpb24sIGZhbHNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgRElWIGNvbnRhaW5lciBvZmZzZXQgd2l0aCBvciB3aXRob3V0IFwicGFnZSBzY3JvbGxcIiBhbmQgZXhjbHVkZWQgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBjb250ZW50XHJcbiAgICAgICAgICBhdXRvc2Nyb2xsID0gIXJlZ2V4Tm9BdXRvc2Nyb2xsLnRlc3QoZGl2W2ldLmNsYXNzTmFtZSk7ICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZvciByZWRpcHMtbm9hdXRvc2Nyb2xsIG9wdGlvblxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltqXSA9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhc1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkaXYgOiBkaXZbaV0sICAgICAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgIG9mZnNldCA6IGNiLCAgICAgICAgICAgICAgICAgIC8vIGJveCBvZmZzZXQgb2YgdGhlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgIG1pZHN0WCA6IChjYlsxXSArIGNiWzNdKSAvIDIsIC8vIG1pZGRsZSBYXHJcbiAgICAgICAgICAgIG1pZHN0WSA6IChjYlswXSArIGNiWzJdKSAvIDIsIC8vIG1pZGRsZSBZXHJcbiAgICAgICAgICAgIGF1dG9zY3JvbGwgOiBhdXRvc2Nyb2xsICAgICAgIC8vIGF1dG9zY3JvbGwgZW5hYmxlZCBvciBkaXNhYmxlZCAodHJ1ZSBvciBmYWxzZSlcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHRibHMgPSBkaXZbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RhYmxlJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggZm9yIHRhYmxlcyBpbnNpZGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgZm9yIChrID0gMDsgayA8IHRibHMubGVuZ3RoOyBrKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgZ29lcyB0aHJvdWdoIGZvdW5kIHRhYmxlcyBpbnNpZGUgc2Nyb2xsYWJsZSBhcmVhXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHRibHNba10uc2NhID0gc2Nyb2xsRGF0YS5jb250YWluZXJbal07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGEgcmVmZXJlbmNlIHRvIHRoZSBjb3JyZXNwb25kaW5nIHNjcm9sbGFibGUgYXJlYVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBqKys7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5jcmVhc2Ugc2Nyb2xsYWJsZSBjb250YWluZXIgY291bnRlclxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSAgIFxyXG4gIH07XHJcblxyXG4gIC8vTWV0aG9kIHJldHVybnMgc3R5bGUgdmFsdWUgZm9yIHJlcXVlc3RlZCBIVE1MIGVsZW1lbnQgYW5kIHN0eWxlIG5hbWUuXHJcbiAgZ2V0U3R5bGUgPSBmdW5jdGlvbiAoZWwsIHN0eWxlX25hbWUpIFxyXG4gIHtcclxuICAgIGlmIChlbCAmJiBlbC5jdXJyZW50U3R5bGUpIFxyXG4gICAge1xyXG4gICAgICByZXR1cm4gZWwuY3VycmVudFN0eWxlW3N0eWxlX25hbWVdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZWwgJiYgd2luZG93LmdldENvbXB1dGVkU3R5bGUpIFxyXG4gICAge1xyXG4gICAgICByZXR1cm4gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbClbc3R5bGVfbmFtZV07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gZmluZCB0aGUgZmlyc3QgcGFyZW50IGVsZW1lbnQgb2YgZWwgd2l0aCB0aGUgdGFnIG5hbWUgdGFnX25hbWUgXHJcbiAgZmluZFBhcmVudCA9IGZ1bmN0aW9uICh0YWdfbmFtZSwgZWwpIFxyXG4gIHtcclxuICAgIGVsID0gZWwucGFyZW50Tm9kZTsgICAgICAgICAgICAgICAgIC8vIHNldCBcImVsXCIgdG8gdGhlIG5leHQgbm9kZSAodG8gcHJldmVudCBmaW5kaW5nIG5vZGUgaXRzZWxmKVxyXG4gICAgXHJcbiAgICB3aGlsZSAoZWwpICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydCBsb29wXHJcbiAgICB7XHJcbiAgICAgIGlmIChlbC5ub2RlTmFtZSA9PT0gdGFnX25hbWUpICAgICAvLyBub2RlIGlzIGZvdW5kXHJcbiAgICAgIHtcclxuICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vZGUgaXMgZm91bmQgYW5kIGxvb3AgY2FuIGJlIGVuZGVkXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGVsID0gZWwucGFyZW50Tm9kZTsgICAgICAgICAgICAgICAvLyBtb3ZlIG9uIHRvIHRoZSBwYXJlbnQgbm9kZVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gZWw7XHJcbiAgfTtcclxuXHJcbiAgLy9GdW5jdGlvbiByZXR1cm5zIGEgc3RyaW5nIGluIHdoaWNoIGFsbCBvZiB0aGUgcHJlY2VkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZSBzcGFjZSBoYXMgYmVlbiByZW1vdmVkLCBhbmQgaW4gd2hpY2ggYWxsIGludGVybmFsIHNlcXVlbmNlcyBvZiB3aGl0ZSBpcyByZXBsYWNlZCB3aXRoIG9uZSB3aGl0ZSBzcGFjZS5cclxuICBub3JtYWxpemUgPSBmdW5jdGlvbiAoc3RyKSBcclxuICB7XHJcbiAgICBpZiAoc3RyICE9PSB1bmRlZmluZWQpIFxyXG4gICAge1xyXG4gICAgICBzdHIgPSBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpLnJlcGxhY2UoL1xcc3syLH0vZywgJyAnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHN0cjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIG5vcm1hbGl6ZWQgc3RyaW5nICh3aXRob3V0IHByZWNlZGluZyBhbmQgdHJhaWxpbmcgc3BhY2VzKVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBzZXRzIG9wYWNpdHkgdG8gdGFibGUgcm93IG9yIGRlbGV0ZXMgcm93IGNvbnRlbnQuXHJcbiAgICogSW5wdXQgcGFyYW1ldGVyIFwiZWxcIiBpcyByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIHJvdyBvciByZWZlcmVuY2UgdG8gdGhlIGNsb25lZCBtaW5pIHRhYmxlICh3aGVuIHJvdyBpcyBtb3ZlZCkuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxTdHJpbmd9IGVsIElkIG9mIHJvdyBoYW5kbGVyIChkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCIpIG9yIHJlZmVyZW5jZSB0byBlbGVtZW50IChzb3VyY2Ugcm93IG9yIG1pbmkgdGFibGUpLlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcnxTdHJpbmd9IG9wYWNpdHkgT3BhY2l0eSBsZXZlbCAoZnJvbSAwIHRvIDEwMCkgb3IgXCJlbXB0eVwiICh0aGVuIGNvbnRlbnQgb2YgdGFibGUgY2VsbHMgaW4gcm93IHdpbGwgYmUgZGVsZXRlZCAtIGluIHRoYXQgY2FzZSBmaXJzdCBwYXJhbWV0ZXIgc2hvdWxkIGJlIFRSKS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2NvbG9yXSBCYWNrZ3JvdW5kIGNvbG9yLlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgUkVESVBTLmRyYWcgbGlicmFyeVxyXG4gICAqIHJkID0gUkVESVBTLmRyYWc7XHJcbiAgICpcclxuICAgKiAvLyBtYWtlIHJvdyBzZW1pLXRyYW5zcGFyZW50XHJcbiAgICogcmQucm93T3BhY2l0eShyb3dPYmosIDUwKTtcclxuICAgKlxyXG4gICAqIC8vIHNldCByb3cgYXMgZW1wdHkgYW5kIHdoaXRlIChjb250ZW50IGluIHRhYmxlIGNlbGxzIHdpbGwgYmUgZGVsZXRlZClcclxuICAgKiByZC5yb3dPcGFjaXR5KHJvd09iaiwgJ2VtcHR5JywgJ1doaXRlJyk7XHJcbiAgICovXHJcbiAgcm93T3BhY2l0eSA9IGZ1bmN0aW9uIChlbCwgb3BhY2l0eSwgY29sb3IpIFxyXG4gIHtcclxuICAgIHZhciB0ZE5vZGVMaXN0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFibGUgY2VsbHNcclxuICAgIHZhciBpLCBqOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCB2YXJpYWJsZXNcclxuICAgIFxyXG4gICAgaWYgKHR5cGVvZihlbCkgPT09ICdzdHJpbmcnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpbnB1dCBwYXJhbWV0ZXIgaXMgc3RyaW5nICh0aGlzIHNob3VsZCBiZSBlbGVtZW50IGlkKSwgdGhlbiBzZXQgZWxlbWVudCByZWZlcmVuY2VcclxuICAgIHtcclxuICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCk7XHJcbiAgICAgIGVsID0gZmluZFBhcmVudCgnVEFCTEUnLCBlbCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsIGNvdWxkIGJlIHJlZmVyZW5jZSBvZiB0aGUgRElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiIChyb3cgaGFuZGxlcilcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGVsLm5vZGVOYW1lID09PSAnVFInKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbCBpcyBUUiwgdGhlbiBzZXQgYmFja2dyb3VuZCBjb2xvciB0byBlYWNoIGNlbGwgKGlmIG5lZWRlZCkgYW5kIGFwcGx5IG9wYWNpdHlcclxuICAgIHtcclxuICAgICAgdGROb2RlTGlzdCA9IGVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0ZCcpOyAgICAgICAgICAgICAgICAgLy8gY29sbGVjdCB0YWJsZSBjZWxsIGZyb20gdGhlIHJvd1xyXG4gICAgICBcclxuICAgICAgZm9yIChpID0gMDsgaSA8IHRkTm9kZUxpc3QubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIERJViBlbGVtZW50XHJcbiAgICAgIHtcclxuICAgICAgICB0ZE5vZGVMaXN0W2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yID8gY29sb3IgOiAnJzsgLy8gc2V0IGJhY2tncm91bmQgY29sb3IgdG8gdGFibGUgY2VsbCBpZiBuZWVkZWRcclxuICAgICAgICBcclxuICAgICAgICBpZiAob3BhY2l0eSA9PT0gJ2VtcHR5JykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgb3BhY2l0eSBpcyBzZXQgdG8gXCJlbXB0eVwiIHRoZW4gZGVsZXRlIGNlbGwgY29udGVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHRkTm9kZUxpc3RbaV0uaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2Ugc2V0IG9wYWNpdHkgdG8gZXZlcnkgY2hpbGQgbm9kZSBpbiB0YWJsZSBjZWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlcy5sZW5ndGg7IGorKykgICAvLyBsb29wIHRocm91Z2ggY2hpbGQgbm9kZXMgb2YgZXZlcnkgdGFibGUgY2VsbFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBhcHBseSBzdHlsZXMgb25seSB0byBFbGVtZW50IG5vZGVzIChub3QgdGV4dCBub2RlcywgYXR0cmlidXRlcyAuLi4pLCBodHRwOi8vY29kZS5zdGVwaGVubW9ybGV5Lm9yZy9qYXZhc2NyaXB0L2RvbS1ub2RldHlwZS1jb25zdGFudHMvXHJcbiAgICAgICAgICAgIGlmICh0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXNbal0ubm9kZVR5cGUgPT09IDEpIFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzW2pdLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5IC8gMTAwO1xyXG4gICAgICAgICAgICAgIHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlc1tqXS5zdHlsZS5maWx0ZXIgPSAnYWxwaGEob3BhY2l0eT0nICsgb3BhY2l0eSArICcpJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHJvdyBpcyBtb3ZlZCB0aGVuIFJFRElQUy5kcmFnIHdpbGwgY3JlYXRlIG1pbmkgdGFibGUgd2l0aCBvbmUgcm93LCBhbGwgYnJvd3NlcnMgKElFOCwgT3BlcmExMSwgRkYzLjYsIENocm9tZTEwKSBjYW4gc2V0IG9wYWNpdHkgdG8gdGhlIHRhYmxlXHJcbiAgICB7XHJcbiAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5IC8gMTAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBGRiwgQ2hyb21lLCBPcGVyYVxyXG4gICAgICBlbC5zdHlsZS5maWx0ZXIgPSAnYWxwaGEob3BhY2l0eT0nICsgb3BhY2l0eSArICcpJzsgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgSUVcclxuICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3IgPyBjb2xvciA6ICcnOyAgICAgICAgICAgICAgLy8gc2V0IGJhY2tncm91bmQgY29sb3JcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgLyogcHVibGljIHByb3BlcnRpZXMgKi9cclxuICAgIG9iaiA6IG9iaiwgICAgICAgICAgICAgICAgICAvL1R5cGU6IEhUTUxFbGVtZW50IC0gQ3VycmVudGx5IG1vdmVkIERJViBlbGVtZW50LiBSZWZlcmVuY2UgdG8gdGhlIFJFRElQUy5kcmFnLm9iaiAoZHJhZ2dlZCBESVYgZWxlbWVudCkgaXMgdmlzaWJsZSBhbmQgY2FuIGJlIHVzZWQgaW4gYXBwcm9wcmlhdGUgZXZlbnQgaGFuZGxlcnMuXHJcbiAgICBvYmpPbGQgIDogb2JqT2xkLCAgICAgICAgICAgLy9UeXBlOiBIVE1MRWxlbWVudCAtIFByZXZpb3VzbHkgbW92ZWQgRElWIGVsZW1lbnQgKGJlZm9yZSBjbGlja2VkIG9yIGNsb25lZCkuIEluIGNhc2Ugd2hlbiBESVYgZWxlbWVudCBpcyBjbG9uZWQsIG9iaiBpcyByZWZlcmVuY2Ugb2YgY3VycmVudCAoY2xvbmVkKSBESVYgZWxlbWVudCB3aGlsZSBvYmpPbGQgaXMgcmVmZXJlbmNlIG9mIGJvdHRvbSAob3JpZ2luKSBESVYgZWxlbWVudC5cclxuICAgIC8qKlxyXG4gICAgICogT2JqZWN0IGNvbnRhaW5zIHJlZmVyZW5jZSB0byBwcmV2aW91cywgc291cmNlLCBjdXJyZW50IGFuZCB0YXJnZXQgdGFibGUgY2VsbC4gVGQgcmVmZXJlbmNlcyBjYW4gYmUgdXNlZCBpbiBldmVudCBoYW5kbGVycy5cclxuICAgICAqIDx1bD5cclxuICAgICAqIDxsaT57SFRNTEVsZW1lbnR9IHRkLnNvdXJjZSAtIHJlZmVyZW5jZSB0byBzb3VyY2UgdGFibGUgY2VsbCAoc2V0IGluIG9ubW91c2Vkb3duKTwvbGk+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC5wcmV2aW91cyAtIHJlZmVyZW5jZSB0byBwcmV2aW91cyB0YWJsZSBjZWxsIChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpPC9saT5cclxuICAgICAqIDxsaT57SFRNTEVsZW1lbnR9IHRkLmN1cnJlbnQgLSByZWZlcmVuY2UgdG8gY3VycmVudCB0YWJsZSBjZWxsIChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpPC9saT5cclxuICAgICAqIDxsaT57SFRNTEVsZW1lbnR9IHRkLnRhcmdldCAtIHJlZmVyZW5jZSB0byB0YXJnZXQgdGFibGUgY2VsbCAodGFyZ2V0IHRhYmxlIGNlbGwgaXMgc2V0IGluIGEgbW9tZW50IG9mIGRyb3BwaW5nIGVsZW1lbnQgdG8gdGhlIHRhYmxlIGNlbGwpPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgdGQgOiB0ZCxcclxuICAgIC8qKlxyXG4gICAgICogSG92ZXIgb2JqZWN0IGNvbnRhaW5zIDQgcHJvcGVydGllczogY29sb3JUZCwgY29sb3JUciwgYm9yZGVyVGQgYW5kIGJvcmRlclRyLiBjb2xvclRkIGFuZCBjb2xvclRyIGRlZmluZSBob3ZlciBjb2xvciBmb3IgRElWIGVsZW1lbnQgYW5kIHRhYmxlIHJvdy5cclxuICAgICAqIElmIGJvcmRlclRkIGlzIGRlZmluZWQsIHRoZW4gaGlnaGxpZ2h0ZWQgY2VsbCB3aWxsIGhhdmUgYm9yZGVyLiBJZiBib3JkZXJUciBpcyBkZWZpbmVkIHRoZW4gaGlnaGxpZ2h0ZWQgcm93IHdpbGwgaGF2ZSBvbmx5IHRvcCBvciBib3R0b20gYm9yZGVyLlxyXG4gICAgICogVG9wIGJvcmRlciBzaG93cyB0aGF0IHJvdyB3aWxsIGJlIHBsYWNlZCBhYm92ZSBjdXJyZW50IHJvdywgd2hpbGUgYm90dG9tIGJvcmRlciBzaG93cyB0aGF0IGN1cnJlbnQgcm93IHdpbGwgYmUgcGxhY2VkIGJlbG93IGN1cnJlbnQgcm93LlxyXG4gICAgICogU29tZSBicm93c2VycyBtYXkgaGF2ZSBwcm9ibGVtIHdpdGggXCJib3JkZXItY29sbGFwc2U6Y29sbGFwc2VcIiB0YWJsZSBzdHlsZSBhbmQgYm9yZGVyIGhpZ2hsaWdodGluZy5cclxuICAgICAqIEluIHRoYXQgY2FzZSB0cnkgd2l0aG91dCBjb2xsYXBzaW5nIFREIGJvcmRlcnMgKGUuZyBzZXQgXCJib3JkZXItc3BhY2luZzowXCIgYW5kIHNtYWxsZXIgXCJ0ZC5ib3JkZXItd2lkdGhcIikuXHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqIEBuYW1lIFJFRElQUy5kcmFnI2hvdmVyXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogLy8gc2V0IFwiIzlCQjNEQVwiIGFzIGhvdmVyIGNvbG9yIGZvciBURFxyXG4gICAgICogUkVESVBTLmRyYWcuaG92ZXIuY29sb3JUZCA9ICcjOUJCM0RBJztcclxuICAgICAqXHJcbiAgICAgKiAvLyBvciBzZXQgXCJMaW1lXCIgYXMgaG92ZXIgY29sb3IgZm9yIFRSXHJcbiAgICAgKiBSRURJUFMuZHJhZy5ob3Zlci5jb2xvclRyID0gJ0xpbWUnO1xyXG4gICAgICpcclxuICAgICAqIC8vIHNldCByZWQgYm9yZGVyIGZvciBoaWdobGlnaHRlZCBURFxyXG4gICAgICogUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVGQgPSAnMnB4IHNvbGlkIHJlZCc7XHJcbiAgICAgKi9cclxuICAgIGhvdmVyIDogaG92ZXIsXHJcbiAgICAvKipcclxuICAgICAqIFNjcm9sbCBvYmplY3QgY29udGFpbnMgcHJvcGVydGllcyBuZWVkZWQgZm9yIGF1dG9zY3JvbGwgb3B0aW9uLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntCb29sZWFufSBzY3JvbGwuZW5hYmxlIC0gRW5hYmxlIC8gZGlzYWJsZSBhdXRvc2Nyb2xsIG9wdGlvbi4gQnkgZGVmYXVsdCBhdXRvc2Nyb2xsIGlzIGVuYWJsZWQgYnV0IGl0IGNhbiBiZSB1c2VmdWxsIGluIHNvbWUgY2FzZXMgdG8gY29tcGxldGVseSB0dXJuIG9mZiBhdXRvc2Nyb2xsIChpZiBhcHBsaWNhdGlvbiBkb2Vzbid0IG5lZWQgYXV0b3Njcm9sbGluZyBwYWdlIG5vciBhdXRvc2Nyb2xsaW5nIERJViBjb250YWluZXIpLiBUdXJuaW5nIG9mZiBhdXRvc2Nyb2xsIHdpbGwgc3BlZWQgdXAgYXBwbGljYXRpb24gYmVjYXVzZSBleHRyYSBjYWxjdWxhdGlvbnMgd2lsbCBiZSBza2lwcGVkLiBEZWZhdWx0IGlzIHRydWU8L2xpPlxyXG4gICAgICogPGxpPntJbnRlZ2VyfSBzY3JvbGwuYm91bmQgLSBCb3VuZCBzaXplIGZvciB0cmlnZ2VyaW5nIHBhZ2UgYXV0b1Njcm9sbCBvciBhdXRvU2Nyb2xsIG9mIHNjcm9sbGFibGUgRElWIGNvbnRhaW5lci4gRGVmYXVsdCB2YWx1ZSBpcyAyNSAocHgpLjwvbGk+XHJcbiAgICAgKiA8bGk+e0ludGVnZXJ9IHNjcm9sbC5zcGVlZCAtIEF1dG9zY3JvbGwgcGF1c2UgaW4gbWlsbGlzZWNvbmRzLiBEZWZhdWx0IHZhbHVlIGlzIDIwIChtaWxsaXNlY29uZHMpLjwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHNjcm9sbCA6IHNjcm9sbCxcclxuICAgIC8qKlxyXG4gICAgICogT2JqZWN0IGNvbnRhaW5zIHN0eWxlcyAoY29sb3JzLCBvcGFjaXR5IGxldmVscykgZm9yIERJViBlbGVtZW50cyBhbmQgdGFibGUgcm93cy5cclxuICAgICAqIDx1bD5cclxuICAgICAqIDxsaT57U3RyaW5nfSBzdHlsZS5ib3JkZXJFbmFibGVkIC0gQm9yZGVyIHN0eWxlIGZvciBlbmFibGVkIERJViBlbGVtZW50cy4gRGVmYXVsdCBpcyBcInNvbGlkXCIuPC9saT5cclxuICAgICAqIDxsaT57U3RyaW5nfSBzdHlsZS5ib3JkZXJEaXNhYmxlZCAtIEJvcmRlciBzdHlsZSBmb3IgZGlzYWJsZWQgRElWIGVsZW1lbnRzLiBEZWZhdWx0IGlzIFwiZG90dGVkXCIuPC9saT5cclxuICAgICAqIDxsaT57SW50ZWdlcn0gc3R5bGUub3BhY2l0eURpc2FibGVkIC0gT3BhY2l0eSBsZXZlbCBmb3IgZGlzYWJsZWQgZWxlbWVudHMuIERlZmF1bHQgaXMgZW1wdHkgc3RyaW5nLjwvbGk+XHJcbiAgICAgKiA8bGk+e1N0cmluZ30gc3R5bGUucm93RW1wdHlDb2xvciAtIFwiRW1wdHkgcm93XCIgY29sb3IuIFdoZW4gbGFzdCByb3cgZnJvbSB0YWJsZSBpcyBtb3ZlZCB0aGVuIHRoaXMgY29sb3Igd2lsbCBiZSBzZXQgdG8gXCJlbXB0eSByb3dcIi4gRGVmYXVsdCBpcyBcIndoaXRlXCIuPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogLy8gZGVmaW5lIGJvcmRlciBzdHlsZSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAqIFJFRElQUy5kcmFnLnN0eWxlLmJvcmRlckRpc2FibGVkID0gJ2Rhc2hlZCc7XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgc3R5bGUgOiBzdHlsZSxcclxuICAgIC8qKlxyXG4gICAgICogT2JqZWN0IGRlZmluZXMgc2V2ZXJhbCBydWxlcyByZWxhdGVkIHRvIGNsb25pbmcgRElWIGVsZW1lbnRzIGxpa2UgZW5hYmxlIGNsb25pbmcgd2l0aCBzaGlmdCBrZXksIGVuYWJsZSByZXR1cm5pbmcgY2xvbmVkIERJViBlbGVtZW50IHRvIGl0cyBzb3VyY2UgYW5kIHNvIG9uLlxyXG4gICAgICogSW5zdGVhZCBvZiBtb3ZpbmcsIERJViBlbGVtZW50IC8gcm93IHdpbGwgYmUgY2xvbmVkIGFuZCByZWFkeSBmb3IgZHJhZ2dpbmcuXHJcbiAgICAgKiBKdXN0IHByZXNzIFNISUZUIGtleSBhbmQgdHJ5IHRvIGRyYWcgRElWIGVsZW1lbnQgLyByb3cuXHJcbiAgICAgKiBpZiBjbG9uZS5zZW5kQmFjayBwcm9wZXJ0eSBzZXQgdG8gdHJ1ZSwgY2xvbmVkIERJViBlbGVtZW50IHdpbGwgYmUgZGVsZXRlZCB3aGVuIGRyb3BwZWQgdG8gdGhlIGNlbGwgY29udGFpbmluZyBpdHMgc291cmNlIGNsb25lIGVsZW1lbnQuXHJcbiAgICAgKiBJZiBleGlzdHMsIFwiY2xpbWl0XCIgY2xhc3Mgd2lsbCBiZSB1cGRhdGVkIChpbmNyZWFzZWQgYnkgMSkuXHJcbiAgICAgKiBjbG9uZS5kcm9wIHByb3BlcnR5IGRlZmluZXMgcGxhY2luZyBjbG9uZWQgRElWIGVsZW1lbnQgKGRyb3BwZWQgb3V0c2lkZSBhbnkgdGFibGUpIHRvIHRoZSBsYXN0IG1hcmtlZCBwb3NpdGlvbi5cclxuICAgICAqIElmIHRoaXMgcHJvcGVydHkgaXMgc2V0IHRvIHRydWUsIHRoZSBjbG9uZWQgRElWIGVsZW1lbnQgd2lsbCBiZSBhbHdheXMgcGxhY2VkIHRvIHRoZSB0YWJsZSBjZWxsLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5rZXlEaXYgLSBJZiBzZXQgdG8gdHJ1ZSwgYWxsIERJViBlbGVtZW50cyBvbiB0YWJsZXMgY291bGQgYmUgY2xvbmVkIHdpdGggcHJlc3NlZCBTSElGVCBrZXkuIERlZmF1bHQgaXMgZmFsc2UuPC9saT5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gY2xvbmUua2V5Um93IC0gSWYgc2V0IHRvIHRydWUsIHRhYmxlIHJvd3MgY291bGQgYmUgY2xvbmVkIHdpdGggcHJlc3NlZCBTSElGVCBrZXkuIERlZmF1bHQgaXMgZmFsc2UuPC9saT5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gY2xvbmUuc2VuZEJhY2sgLSBJZiBzZXQgdG8gdHJ1ZSwgY2xvbmVkIGVsZW1lbnQgY2FuIGJlIHJldHVybmVkIHRvIGl0cyBzb3VyY2UuIERlZmF1bHQgaXMgZmFsc2UuPC9saT5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gY2xvbmUuZHJvcCAtIElmIHNldCB0byB0cnVlLCBjbG9uZWQgZWxlbWVudCB3aWxsIGJlIGFsd2F5cyBwbGFjZWQgdG8gdGhlIHRhYmxlICh0byB0aGUgbGFzdCBwb3NzaWJsZSBjZWxsKSBubyBtYXR0ZXIgaWYgaXMgZHJvcHBlZCBvdXRzaWRlIHRoZSB0YWJsZS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBjbG9uZSA6IGNsb25lLFxyXG4gICAgLyogcHVibGljIG1ldGhvZHMgKGRvY3VtZW50ZWQgaW4gbWFpbiBjb2RlKSAqL1xyXG4gICAgaW5pdCA6IGluaXQsXHJcbiAgICBlbmFibGVEcmFnIDogZW5hYmxlRHJhZyxcclxuICAgIGVuYWJsZURpdnMgOiBlbmFibGVEaXZzLFxyXG4gICAgcm93T3BhY2l0eSA6IHJvd09wYWNpdHksXHJcbiAgICBnZXRTY3JvbGxQb3NpdGlvbiA6IGdldFNjcm9sbFBvc2l0aW9uLFxyXG4gICAgZ2V0U3R5bGUgOiBnZXRTdHlsZSxcclxuICAgIGZpbmRQYXJlbnQgOiBmaW5kUGFyZW50LFxyXG4gICAgZXZlbnQgOiBldmVudFxyXG4gIH07XHJcbn0oKSk7XHJcblxyXG5cclxuaWYgKCFSRURJUFMuZXZlbnQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIFJFRElQUy5ldmVudCBpc24ndCBhbHJlYWR5IGRlZmluZWQgKGZyb20gb3RoZXIgUkVESVBTIGZpbGUpXHJcbntcclxuICBSRURJUFMuZXZlbnQgPSAoZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgdmFyIGFkZDtcclxuICAgIHZhciByZW1vdmU7XHJcblxyXG4gICAgYWRkID0gZnVuY3Rpb24gKG9iaiwgZXZlbnROYW1lLCBoYW5kbGVyKSAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGV2ZW50IGxpc3RlbmVyXHJcbiAgICB7XHJcbiAgICAgIGlmIChvYmouYWRkRXZlbnRMaXN0ZW5lcikgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIGZhbHNlKTsgICAgICAgIC8vIChmYWxzZSkgcmVnaXN0ZXIgZXZlbnQgaW4gYnViYmxlIHBoYXNlIChldmVudCBwcm9wYWdhdGVzIGZyb20gZnJvbSB0YXJnZXQgZWxlbWVudCB1cCB0byB0aGUgRE9NIHJvb3QpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAob2JqLmF0dGFjaEV2ZW50KSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5hdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBoYW5kbGVyKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqWydvbicgKyBldmVudE5hbWVdID0gaGFuZGxlcjtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZW1vdmUgPSBmdW5jdGlvbiAob2JqLCBldmVudE5hbWUsIGhhbmRsZXIpICAgICAgICAgICAgICAgICAvLyByZW1vdmUgZXZlbnQgbGlzdGVuZXJcclxuICAgIHtcclxuICAgICAgaWYgKG9iai5yZW1vdmVFdmVudExpc3RlbmVyKSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKG9iai5kZXRhY2hFdmVudCkgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmouZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgaGFuZGxlcik7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBcclxuICAgICAge1xyXG4gICAgICAgIG9ialsnb24nICsgZXZlbnROYW1lXSA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHsgYWRkOiBhZGQsIHJlbW92ZTogcmVtb3ZlIH07XHJcbiAgfSgpKTtcclxufSIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHJlZGlwcyA9IHt9O1xyXG5cclxucmVkaXBzLmluaXQgPSBmdW5jdGlvbiAoKSBcclxue1xyXG4gIHZhciByZCA9IFJFRElQUy5kcmFnOyAgIC8vIHJlZmVyZW5jZSB0byB0aGUgUkVESVBTLmRyYWcgbGlicmFyeVxyXG5cclxuICByZC5pbml0KCk7XHJcblxyXG4gIC8vcmQuY2xvbmUua2V5RGl2ID0gcmQuY2xvbmUua2V5Um93ID0gdHJ1ZTsgICAvLyBlbmFibGUgY2xvbmUgZWxlbWVudCBhbmQgY2xvbmUgcm93IHdpdGggc2hpZnQga2V5XHJcblxyXG4gIHJkLmV2ZW50LnJvd0Ryb3BwZWQgPSBmdW5jdGlvbiAobmV3UGFyZW50Um93KVxyXG4gIHtcclxuICAgIHZhciBtb3ZlZElEICAgICAgID0gcGFyc2VJbnQocmQub2JqT2xkLmlkLnJlcGxhY2UoJ3Jvd2lkJywgJycpKTtcclxuICAgIHZhciBuZXdQYXJlbnRJRCAgID0gcGFyc2VJbnQobmV3UGFyZW50Um93LmlkLnJlcGxhY2UoJ3Jvd2lkJywgJycpKTtcclxuICAgIHNwcmVhZFNoZWV0Lm1vdmVOb2RlKG1vdmVkSUQsIG5ld1BhcmVudElEKTtcclxuICB9O1xyXG5cclxuICByZC5ldmVudC5yb3dEcm9wcGVkU291cmNlID0gZnVuY3Rpb24gKCkgICAgICAgICAvLyByb3cgd2FzIGRyb3BwZWQgdG8gdGhlIHNvdXJjZSAtIGV2ZW50IGhhbmRsZXIsIG1pbmkgdGFibGUgKGNsb25lZCByb3cpIHdpbGwgYmUgZGVsZXRlZCBhbmQgc291cmNlIHJvdyBzaG91bGQgcmV0dXJuIHRvIG9yaWdpbmFsIHN0YXRlXHJcbiAge1xyXG4gICAgcmQucm93T3BhY2l0eShyZC5vYmpPbGQsIDEwMCk7ICAgICAgICAgICAgICAgIC8vIG1ha2Ugc291cmNlIHJvdyBjb21wbGV0ZWx5IHZpc2libGUgKG5vIG9wYWNpdHkpXHJcbiAgfTtcclxuXHJcbiAgcmQuZXZlbnQucm93TW92ZWQgPSBmdW5jdGlvbiAoKVxyXG4gIHtcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqLCA4NSk7ICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgbW92ZWQgcm93LCByZC5vYmogaXMgcmVmZXJlbmNlIG9mIGNsb25lZCByb3cgKG1pbmkgdGFibGUpXHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iak9sZCwgMjAsICdXaGl0ZScpOyAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIHNvdXJjZSByb3cgYW5kIGNoYW5nZSBzb3VyY2Ugcm93IGJhY2tncm91bmQgY29sb3IsIG9iai5vYmpPbGQgaXMgcmVmZXJlbmNlIG9mIHNvdXJjZSByb3dcclxuICB9O1xyXG5cclxuICByZC5ldmVudC5yb3dDbGlja2VkICAgPSBmdW5jdGlvbiAoKSB7fTtcclxuICByZC5ldmVudC5yb3dOb3RNb3ZlZCAgPSBmdW5jdGlvbiAoKSB7fTtcclxuICByZC5ldmVudC5yb3dDbG9uZWQgICAgPSBmdW5jdGlvbiAoKSB7fTtcclxuICByZC5ldmVudC5yb3dOb3RDbG9uZWQgPSBmdW5jdGlvbiAoKSB7fTtcclxuICByZC5ldmVudC5yb3dEZWxldGVkICAgPSBmdW5jdGlvbiAoKSB7fTtcclxuXHJcbiAgcmQuZXZlbnQucm93VW5kZWxldGVkID0gZnVuY3Rpb24gKCkgICAgICAgICAgICAgLy8gcm93IGlzIHVuZGVsZXRlZCAocmV0dXJuIHNvdXJjZSByb3cgdG8gb3JpZ2luYWwgc3RhdGUpXHJcbiAge1xyXG4gICAgcmQucm93T3BhY2l0eShyZC5vYmpPbGQsIDEwMCk7XHJcbiAgfTtcclxufTtcclxuIiwidmFyIHJlc2l6ZUNvbHVtbkxlZnQgPSAwO1xyXG52YXIgcmVzaXplRmllbGQgPSAnMCc7XHJcbnZhciBNSU5fQ09MVU1OX1dJRFRIID0gNzA7XHJcbnZhciBHUklQU19XSURUSCA9IDE2O1xyXG5cclxudmFyIHN0YXJ0UmVzaXplID0gZnVuY3Rpb24oZSwgZ3JpcClcclxue1xyXG4gICQoZG9jdW1lbnQpLmJpbmQoJ3RvdWNobW92ZS5yZXNpemVDb2xHcmlwIG1vdXNlbW92ZS5yZXNpemVDb2xHcmlwJywgcmVzaXplRHJhZykuYmluZCgndG91Y2hlbmQucmVzaXplQ29sR3JpcCBtb3VzZXVwLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVFbmQpO1xyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS5sZWZ0ID0gZS5wYWdlWCArICdweCc7XHJcblxyXG4gIHJlc2l6ZUNvbHVtbkxlZnQgPSAkKGdyaXAucGFyZW50Tm9kZSkucG9zaXRpb24oKS5sZWZ0OyAgICAgICAgICAgICAgICAgICAgLy9zYXZlIHRoZSBsZWZ0IHBvc2l0aW9uIG9mIHRoZSBjb2x1bW4gYmVpbmcgcmVzaXplZFxyXG4gIHJlc2l6ZUZpZWxkID0gZ3JpcC5wYXJlbnROb2RlLmlkLnJlcGxhY2UoJ2NvbEhlYWRlcicsICcnKTsgICAgICAgICAgICAgICAgLy9zYXZlIHRoZSBmaWVsZCBvZiB0aGUgY29sdW1uIGJlaW5nIHJlc2l6ZWRcclxufTtcclxuXHJcbnZhciByZXNpemVFbmQgPSBmdW5jdGlvbihlKVxyXG57XHJcbiAgJChkb2N1bWVudCkudW5iaW5kKCd0b3VjaG1vdmUucmVzaXplQ29sR3JpcCBtb3VzZW1vdmUucmVzaXplQ29sR3JpcCcsIHJlc2l6ZURyYWcpLnVuYmluZCgndG91Y2hlbmQucmVzaXplQ29sR3JpcCBtb3VzZXVwLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVFbmQpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG5cclxuICB2YXIgbmV3V2lkdGggPSBlLnBhZ2VYIC0gcmVzaXplQ29sdW1uTGVmdCAtIEdSSVBTX1dJRFRIO1xyXG5cclxuICBpZihuZXdXaWR0aCA8IE1JTl9DT0xVTU5fV0lEVEgpXHJcbiAge1xyXG4gICAgbmV3V2lkdGggPSBNSU5fQ09MVU1OX1dJRFRIO1xyXG4gIH1cclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbEhlYWRlcklucHV0JyArIHJlc2l6ZUZpZWxkKS5zdHlsZS53aWR0aCA9IG5ld1dpZHRoICsgJ3B4JzsgICAgLy9yZXNpemUgdGhlIHdpZHRoIG9mIHRoZSBjb2x1bW4gaGVhZGVyXHJcblxyXG4gIC8vcmVzaXplIHRoZSB3aWR0aCBvZiBldmVyeSBjZWxsIGluIHRoZSBjb2x1bW5cclxuICB2YXIgY29sdW1uQ2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmllbGRJbnB1dCcgKyByZXNpemVGaWVsZCk7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBjb2x1bW5DZWxscy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICBjb2x1bW5DZWxsc1tpXS5zdHlsZS53aWR0aCA9IChuZXdXaWR0aCArIDgpICsgJ3B4JztcclxuICB9XHJcbn07XHJcblxyXG52YXIgcmVzaXplRHJhZyA9IGZ1bmN0aW9uKGUpXHJcbntcclxuICBpZihlLnBhZ2VYID4gcmVzaXplQ29sdW1uTGVmdCArIE1JTl9DT0xVTU5fV0lEVEggKyBHUklQU19XSURUSClcclxuICB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLmxlZnQgPSBlLnBhZ2VYICsgJ3B4JzsgICAgICAvL21vdmUgdGhlIHJlc2l6ZSBsaW5lIGFzIHRoZSB1c2VyIGRyYWdzIGl0XHJcbiAgfVxyXG59OyIsIiIsInZhciBmaWVsZE1lbnVDb250cm9sbGVyID1cclxue1xyXG4gIGRpc3BsYXlGaWVsZE1lbnU6IGZ1bmN0aW9uKGZpZWxkTmFtZSwgeCwgeSkgXHJcbiAge1xyXG4gICAgdmFyIGZpZWxkID0gcHJvamVjdC5nZXRGaWVsZChmaWVsZE5hbWUpO1xyXG4gICAgICBcclxuICAgIHRoaXMubWVudSA9IG5ldyBGaWVsZE1lbnUoZmllbGQsIHNwcmVhZFNoZWV0LmZpZWxkcyk7XHJcbiAgICBcclxuICAgIGZpZWxkTWVudVZpZXcucmVuZGVyKHRoaXMubWVudSwgeCwgeSk7ICAgIFxyXG4gIH0sXHJcbiAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uKG1lbnVJdGVtSUQpXHJcbiAge1xyXG4gICAgdmFyIGNsaWNrZWQgPSB0aGlzLm1lbnUuZ2V0TWVudUl0ZW0obWVudUl0ZW1JRCwgdGhpcy5tZW51KTtcclxuICAgIHZhciBwYXJlbnQgPSB0aGlzLm1lbnUuZ2V0TWVudUl0ZW1QYXJlbnQobWVudUl0ZW1JRCwgdGhpcy5tZW51KTtcclxuICBcclxuICAgIGlmKGNsaWNrZWQuZmllbGQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGUgbWVudSBpdGVtIGRvZXNuJ3QgaGF2ZSBhIGZpZWxkIHRoZW4gaWdub3JlIGl0XHJcbiAgICB7XHJcbiAgICAgIHZhciBmaWVsZCA9IHByb2plY3QuZ2V0RmllbGQoY2xpY2tlZC5maWVsZC5uYW1lKTtcclxuICAgICAgZmllbGRbY2xpY2tlZC52YXJOYW1lXSA9IGNsaWNrZWQudmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zZXQgdmFsdWUgZm9yIHRoZSBmaWVsZCBpbiB0aGUgbW9kZWwgYmFzZWQgb24gdGhlIGNsaWNrZWQgbWVudSBpdGVtXHJcbiAgICBcclxuICAgICAgZmllbGRNZW51Vmlldy5zZXRDaGVja21hcmtzKG1lbnVJdGVtSUQsIHBhcmVudC5pdGVtcyk7XHJcblxyXG4gICAgICBpZihwYXJlbnQgPT09IHRoaXMubWVudSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIHRoaXMgaXMgYSB0b3AgbGV2ZWwgbWVudSBpdGVtIHRoZW4gdXBkYXRlIHRoZSBmb3JtYXR0aW5nLCBzaW5jZSB3ZSBvbmx5IHdhbnQgdG8gZG8gdGhpcyBvbmNlIHBlciBjbGlja1xyXG4gICAgICB7XHJcbiAgICAgICAgc3ByZWFkU2hlZXQudXBkYXRlTnVtYmVyRmllbGRGb3JtYXR0aW5nKGZpZWxkKTtcclxuICAgICAgfVxyXG4gICAgfSAgICBcclxuICB9XHJcbn07IiwiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKVxyXG57XHJcbiAgc2Nyb2xsQmFyV2lkdGggPSBnZXRTY3JvbGxCYXJXaWR0aCgpOyAgLy9nZXQgdGhlIHNjcm9sbGJhciB3aWR0aCBmb3IgdGhlIGJyb3dzZXIsIHRvIHVzZSBsYXRlciBmb3Igc2l6aW5nIG90aGVyIGVsZW1lbnRzIFxyXG4gIGhtcy5pbml0KCk7XHJcbn0pO1xyXG5cclxudmFyIGhtcyA9IFxyXG57XHJcbiAgaW5pdDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHByb2plY3RzLmluaXQoZnVuY3Rpb24ocHJvamVjdHMpIHsgaGVhZGVyVmlldy5yZW5kZXIocHJvamVjdHMpOyB9KTsgICBcclxuICB9LFxyXG4gIG9wZW5Qcm9qZWN0OiBmdW5jdGlvbihwcm9qZWN0SUQpXHJcbiAge1xyXG4gICAgcHJvamVjdHMub3BlblByb2plY3QocHJvamVjdElELCBmdW5jdGlvbih0cmVlKVxyXG4gICAge1xyXG4gICAgICBwcm9qZWN0LnRyZWUgPSB0cmVlO1xyXG4gICAgICBcclxuICAgICAgJC5hamF4KHsgdHlwZTogJ0dFVCcsIHVybDogJ2FwaS92ZXJzaW9ucz9wcm9qZWN0SUQ9JyArIHByb2plY3RJRCB9KS5kb25lKGZ1bmN0aW9uKHZlcnNpb25zKVxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZGVyVmlldy5yZWZyZXNoKEpTT04ucGFyc2UodmVyc2lvbnMpLnZlcnNpb25zKTtcclxuICAgICAgICBobXMuc2VsZWN0VmlldyhoZWFkZXJWaWV3LnNlbGVjdGVkVmlldygpKTtcclxuICAgICAgfSk7ICAgIFxyXG4gICAgfSk7ICAgICBcclxuICB9LFxyXG4gIG9wZW5TYXZlREJEaWFsb2c6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICBwcm9qZWN0LmdldEN1cnJlbnRWZXJzaW9uKGZ1bmN0aW9uKGN1cnJlbnRWZXJzaW9uKSBcclxuICAgIHsgXHJcbiAgICAgIHNhdmVEQkRpYWxvZy5yZW5kZXIocHJvamVjdC50cmVlLnZlcnNpb24sIHByb2plY3QudHJlZS52ZXJzaW9uTGFiZWwsIHByb2plY3QudHJlZS52ZXJzaW9uRGF0ZSwgY3VycmVudFZlcnNpb24rMSk7XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIHNhdmVUb0RhdGFiYXNlOiBmdW5jdGlvbigpIFxyXG4gIHsgXHJcbiAgICBwcm9qZWN0LnNhdmVUb0RhdGFiYXNlKCk7XHJcbiAgICB0aGlzLm9wZW5Qcm9qZWN0KHByb2plY3QudHJlZS5wcm9qZWN0SUQpOyAgICBcclxuICB9LFxyXG4gIHNlbGVjdFZpZXc6IGZ1bmN0aW9uKHZpZXdJRClcclxuICB7XHJcbiAgICBpZihwcm9qZWN0LnRyZWUpXHJcbiAgICB7XHJcbiAgICAgIGlmKHRoaXMudmlldykgeyB0aGlzLnZpZXcuZGVzdHJveSgpOyB9XHJcbiAgICAgIHRoaXMuc2hvd1ZpZXcodmlld0lEKTtcclxuICAgIH1cclxuICB9LFxyXG4gIHNlbGVjdFZlcnNpb246IGZ1bmN0aW9uKHZlcnNpb24pXHJcbiAge1xyXG4gICAgcHJvamVjdHMub3BlblByb2plY3RWZXJzaW9uKHByb2plY3QudHJlZS5wcm9qZWN0SUQsIHZlcnNpb24sIGZ1bmN0aW9uKHRyZWUpXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3QudHJlZSA9IHRyZWU7XHJcbiAgICAgIGhtcy5zZWxlY3RWaWV3KGhlYWRlclZpZXcuc2VsZWN0ZWRWaWV3KCkpO1xyXG4gICAgfSk7XHJcbiAgfSwgIFxyXG4gIHNob3dWaWV3OiBmdW5jdGlvbih2aWV3SUQpXHJcbiAge1xyXG4gICAgc3dpdGNoKHZpZXdJRClcclxuICAgIHtcclxuICAgICAgY2FzZSBTUFJFQURTSEVFVF9WSUVXOlxyXG4gICAgICAgIHRoaXMudmlldyA9IHNwcmVhZFNoZWV0VmlldztcclxuICAgICAgICBzcHJlYWRTaGVldC5kaXNwbGF5KCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgXHJcbiAgICAgIGNhc2UgVFJFRV9WSUVXOlxyXG4gICAgICAgIHRoaXMudmlldyA9IHRyZWVWaWV3O1xyXG4gICAgICAgIHRyZWUuZGlzcGxheVRyZWUoKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgICBcclxuICAgICAgY2FzZSBXRUlHSFRFRF9UUkVFX1ZJRVc6XHJcbiAgICAgICAgdGhpcy52aWV3ID0gd2VpZ2h0ZWRUcmVlVmlldztcclxuICAgICAgICB0cmVlLmRpc3BsYXlXZWlnaHRlZFRyZWUoKTtcclxuICAgICAgICBicmVhazsgXHJcbiAgICAgICAgXHJcbiAgICAgIGNhc2UgQ0lSQ0xFX1ZJRVc6XHJcbiAgICAgICAgdGhpcy52aWV3ID0gY2lyY2xlVmlldztcclxuICAgICAgICBjaXJjbGVWaWV3LmRpc3BsYXkoKTtcclxuICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgXHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgY3JlYXRlTmV3UHJvamVjdDogZnVuY3Rpb24obmV3UHJvamVjdE5hbWUpXHJcbiAgeyAgXHRcclxuICAgIHByb2plY3RzLmNyZWF0ZU5ld1Byb2plY3QobmV3UHJvamVjdE5hbWUpO1xyXG4gIFx0aG1zLnNlbGVjdFZpZXcoaGVhZGVyVmlldy5zZWxlY3RlZFZpZXcoKSk7ICAgICAgXHJcbiAgfSxcclxuICBuZXh0UHJvamVjdElEOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuIHByb2plY3RzLm5leHRQcm9qZWN0SUQrKztcclxuICB9LFxyXG4gIGV4cGFuZFRvTGV2ZWw6IGZ1bmN0aW9uKGxldmVsKVxyXG4gIHtcclxuICAgIHByb2plY3QuZXhwYW5kVG9MZXZlbChwcm9qZWN0LnRyZWUsIGxldmVsKTtcclxuICAgIC8vVE9ETzogdGhlIGZvbGxvd2luZyBuZWVkcyB0byBiZSByZWZhY3RvcmVkXHJcbiAgICBpZih0aGlzLnZpZXcgPT09IHNwcmVhZFNoZWV0VmlldykgeyBzcHJlYWRTaGVldC5kaXNwbGF5KCk7IH1cclxuICAgIGVsc2UgaWYodGhpcy52aWV3ID09PSB0cmVlVmlldykgeyB0cmVlVmlldy5yZWZyZXNoKCk7IH1cclxuICAgIGVsc2UgaWYodGhpcy52aWV3ID09PSB3ZWlnaHRlZFRyZWVWaWV3KSB7IHdlaWdodGVkVHJlZVZpZXcucmVmcmVzaCgpOyB9ICAgXHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHNjcm9sbEJhcldpZHRoO1xyXG52YXIgZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbigpIFxyXG57XHJcbiAgdmFyIGRpdiwgd2lkdGg7XHJcbiAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZGl2LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPVwid2lkdGg6NTBweDtoZWlnaHQ6NTBweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi01MHB4O3RvcDotNTBweDtvdmVyZmxvdzphdXRvO1wiPjxkaXYgc3R5bGU9XCJ3aWR0aDoxcHg7aGVpZ2h0OjEwMHB4O1wiPjwvZGl2PjwvZGl2Pic7XHJcbiAgZGl2ID0gZGl2LmZpcnN0Q2hpbGQ7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xyXG4gIHdpZHRoID0gZGl2Lm9mZnNldFdpZHRoIC0gZGl2LmNsaWVudFdpZHRoO1xyXG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KTtcclxuICByZXR1cm4gd2lkdGg7XHJcbn07IiwidmFyIHNwcmVhZFNoZWV0ID0gXHJcbntcclxuICBkaXNwbGF5OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcHJvamVjdC5jbGVhbnNlRGF0YSgpOyAgICAgICAgICAgICAgICAgIC8vcmVxdWlyZWQgdG8gcmVtb3ZlIGNpcmN1bGFyIHJlZmVyZW5jZXMgdGhhdCBvdGhlciB2aWV3cyBtYXkgYWRkXHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVuZGVyKHByb2plY3QudHJlZSk7XHJcbiAgfSxcclxuICBmaWVsZHM6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC5maWVsZHMoKTtcclxuICB9LFxyXG4gIHRyZWU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC50cmVlO1xyXG4gIH0sXHJcbiAgdXBkYXRlRmllbGRWYWx1ZTogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQpXHJcbiAge1xyXG4gICAgdmFyIG5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgXHJcbiAgICBpZihub2RlKVxyXG4gICAge1xyXG4gICAgICBpZighbm9kZS52YWx1ZXMpIHsgbm9kZS52YWx1ZXMgPSB7fTsgfVxyXG4gICAgICBub2RlLnZhbHVlc1tmaWVsZE5hbWVdID0gc3ByZWFkU2hlZXRWaWV3LmdldEZpZWxkVmFsdWUoZmllbGROYW1lLCBub2RlSUQpOyAgICAgXHJcbiAgICB9ICBcclxuICBcclxuICAgIC8vVE9ETzogc2hvdWxkIHBlcmZvcm0gdGhlIGFnZ3JlZ2F0aW9uIGJhc2VkIG9uIHRoZSBmaWVsZCBzZXR0aW5ncyBmb3IgYWdncmVnYXRpbmcgdGhpcyBmaWVsZFxyXG4gICAgcHJvamVjdC50cmVlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIFxyXG4gICAge1xyXG4gICAgICBhZ2dyZWdhdGVfYW55KGNoaWxkLCBmaWVsZE5hbWUpO1xyXG4gICAgfSk7ICAgIFxyXG4gIH0sXHJcbiAgcmF3VmFsdWU6IGZ1bmN0aW9uKGZpZWxkTmFtZSwgbm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShwYXJzZUludChub2RlSUQpKTtcclxuICAgIFxyXG4gICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbZmllbGROYW1lXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIG5vZGUudmFsdWVzW2ZpZWxkTmFtZV07XHJcbiAgICB9ICBcclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGZvcm1hdHRlZFZhbHVlOiBmdW5jdGlvbihmaWVsZCwgbm9kZSlcclxuICB7XHJcbiAgICBpZihub2RlLnZhbHVlcyAmJiBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIEZpZWxkLmZvcm1hdFZhbHVlKGZpZWxkLCBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgIHByb2plY3QuYWRkRmllbGQoZmllbGROYW1lKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5hZGRGaWVsZChmaWVsZE5hbWUpO1xyXG4gIH0sXHJcbiAgaGFzQ2hpbGRyZW46IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuICFwcm9qZWN0LmlzTm9kZUNoaWxkbGVzcyhub2RlKTtcclxuICB9LFxyXG4gIGNoaWxkcmVuSGlkZGVuOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChub2RlKTtcclxuICB9LFxyXG4gIG1vdmVOb2RlOiBmdW5jdGlvbihub2RlSUQsIG5ld1BhcmVudElEKVxyXG4gIHtcclxuICAgIHZhciBuZXdQYXJlbnROb2RlID0gcHJvamVjdC5maW5kTm9kZShuZXdQYXJlbnRJRCk7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICBcclxuICAgIHNwcmVhZFNoZWV0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgICBwcm9qZWN0LmFkZE5vZGUobm9kZSwgbmV3UGFyZW50Tm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldC5hZGROb2RlKG5vZGUsIG5ld1BhcmVudE5vZGUpOyAgICBcclxuICB9LFxyXG4gIHJlbW92ZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIHBhcmVudE5vZGUgPSBwcm9qZWN0LmZpbmRQYXJlbnQobm9kZS5pZCk7XHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5yZW1vdmVOb2RlLCBub2RlKTtcclxuICAgIHByb2plY3QucmVtb3ZlTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZWRyYXdOb2RlQ29udGVudChwYXJlbnROb2RlKTsgICAgICAgICAgLy9pZiB0aGUgcGFyZW50IGlzIGNoaWxkbGVzcyBub3csIHRoZW4gaGlkZSB0aGUgb2xkIHBhcmVudCdzIGV4cGFuZC9jb2xsYXBzZSBpY29uICAgICBcclxuICB9LFxyXG4gIGRlbGV0ZU5vZGU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICAgIHNwcmVhZFNoZWV0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgfSxcclxuICBhZGROb2RlOiBmdW5jdGlvbihub2RlLCBwYXJlbnROb2RlKVxyXG4gIHtcclxuICAgIGlmKHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKHBhcmVudE5vZGUpKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAge1xyXG4gICAgICBzcHJlYWRTaGVldC5leHBhbmROb2RlKHBhcmVudE5vZGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQocGFyZW50Tm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuaW5zZXJ0Tm9kZUFmdGVyKG5vZGUsIHBhcmVudE5vZGUpOyAgICAgIC8vYWRkIHRoZSBtb3ZlZCBub2RlIGFuZCBpdHMgZGVzY2VuZGFudHMgdG8gdGhlIG5ldyBwYXJlbnQgaW4gdGhlIHZpZXdcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZW5kZXJFeHBhbmRlcigpOyAgXHJcbiAgfSxcclxuICBjb3B5Tm9kZTogZnVuY3Rpb24obm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBzb3VyY2VOb2RlID0gcHJvamVjdC5maW5kTm9kZShub2RlSUQpO1xyXG4gICAgdmFyIG5ld05vZGUgPSBwcm9qZWN0LmNsb25lTm9kZShzb3VyY2VOb2RlKTtcclxuICAgIHByb2plY3QuaW5zZXJ0Tm9kZShuZXdOb2RlLCBzb3VyY2VOb2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5pbnNlcnROb2RlQmVmb3JlKG5ld05vZGUsIHNvdXJjZU5vZGUpOyAgICBcclxuICB9LFxyXG4gIGV4cGFuZE5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcHJvamVjdC5leHBhbmROb2RlKG5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXRWaWV3LmV4cGFuZE5vZGUobm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQobm9kZSk7ICAgICAgXHJcbiAgfSxcclxuICBjb2xsYXBzZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZURlc2NlbmRhbnRzKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5yZW1vdmVOb2RlLCBub2RlKTsgICAgXHJcbiAgICBwcm9qZWN0LmNvbGxhcHNlTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZWRyYXdOb2RlQ29udGVudChub2RlKTsgICAgIFxyXG4gIH0sXHJcbiAgdG9nZ2xlTm9kZTogZnVuY3Rpb24obm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShub2RlSUQpO1xyXG4gICAgXHJcbiAgICBpZihwcm9qZWN0LmlzTm9kZUV4cGFuZGVkKG5vZGUpKVxyXG4gICAge1xyXG4gICAgICBzcHJlYWRTaGVldC5jb2xsYXBzZU5vZGUobm9kZSk7ICAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZSBpZihwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChub2RlKSlcclxuICAgIHtcclxuICAgICAgc3ByZWFkU2hlZXQuZXhwYW5kTm9kZShub2RlKTsgXHJcbiAgICB9ICBcclxuICB9LFxyXG4gIHVwZGF0ZU5vZGVOYW1lOiBmdW5jdGlvbihub2RlSUQsIG5ld05hbWUpXHJcbiAge1xyXG4gICAgcHJvamVjdC5maW5kTm9kZShub2RlSUQpLm5hbWUgPSBuZXdOYW1lOyAgICBcclxuICB9LFxyXG4gIHVwZGF0ZU51bWJlckZpZWxkRm9ybWF0dGluZzogZnVuY3Rpb24oZmllbGQpXHJcbiAge1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZShwcm9qZWN0LmdldENoaWxkcmVuLCBmdW5jdGlvbihub2RlKVxyXG4gICAgeyAgICAgIFxyXG4gICAgICBpZihub2RlLnZhbHVlcylcclxuICAgICAge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IEZpZWxkLmZvcm1hdFZhbHVlKGZpZWxkLCBOdW1iZXIobm9kZS52YWx1ZXNbZmllbGQubmFtZV0pKTsgICAgICAgICAgICAgICAgLy9nZXQgdGhlIHZhbHVlIGZyb20gdGhlIG1vZGVsXHJcbiAgICAgICAgc3ByZWFkU2hlZXRWaWV3LnVwZGF0ZUZpZWxkVmFsdWUoZmllbGQubmFtZSwgbm9kZS5pZCwgdmFsdWUpO1xyXG4gICAgICB9ICAgICAgXHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGVuYWJsZURyYWdnaW5nOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgc3ByZWFkU2hlZXRWaWV3LmVuYWJsZURyYWdnaW5nLCBub2RlKTsgICAgXHJcbiAgfSAgXHJcbn07IiwidmFyIHRyZWUgPVxyXG57XHJcbiAgZGlzcGxheVRyZWU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB0aGlzLmRhdGEgPSBwcm9qZWN0LnRyZWU7XHJcbiAgICB0aGlzLmZpZWxkID0gcHJvamVjdC5maWVsZHMoKVswXTtcclxuICAgIHRyZWVWaWV3LnJlbmRlcigpO1xyXG4gIH0sXHJcbiAgZGlzcGxheVdlaWdodGVkVHJlZTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHRoaXMuZGF0YSA9IHByb2plY3QudHJlZTtcclxuICAgIHRoaXMuZmllbGQgPSBwcm9qZWN0LmZpZWxkcygpWzBdO1xyXG4gICAgdGhpcy5tYXhGaWVsZFZhbHVlID0gdGhpcy5jYWxjTWF4RmllbGRWYWx1ZSgpO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5yZW5kZXIoKTtcclxuICB9LCAgXHJcbiAgY2FsY01heEZpZWxkVmFsdWU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB2YXIgbWF4VmFsdWUgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICBcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgZnVuY3Rpb24obm9kZSkgXHJcbiAgICB7XHJcbiAgICAgIGlmKG5vZGUudmFsdWVzKVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gbm9kZS52YWx1ZXNbdHJlZS5maWVsZC5uYW1lXTtcclxuICAgICAgICBpZih2YWx1ZSA+IG1heFZhbHVlKSB7IG1heFZhbHVlID0gdmFsdWU7IH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiBtYXhWYWx1ZTtcclxuICB9XHJcbn07IiwidmFyIEZpZWxkID0gZnVuY3Rpb24obmFtZSlcclxue1xyXG4gIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgdGhpcy5kYXRhdHlwZSA9IEZpZWxkLk5VTUJFUjtcclxuICB0aGlzLmZvcm1hdCA9IEZpZWxkLk5VTUJFUl9GT1JNQVQ7XHJcbiAgdGhpcy5wcmVjaXNpb24gPSAyO1xyXG4gIHRoaXMuYWdnX3R5cGUgPSBGaWVsZC5OT19BR0dSRUdBVElPTjtcclxuICB0aGlzLmFnZ19xdHlfZmllbGQgPSBudWxsO1xyXG59O1xyXG5cclxuRmllbGQuTlVNQkVSID0gJzAnO1xyXG5GaWVsZC5TVFJJTkcgPSAnMSc7XHJcbkZpZWxkLkNIT0lDRSA9ICcyJztcclxuXHJcbkZpZWxkLk5PX0FHR1JFR0FUSU9OID0gJzAnO1xyXG5GaWVsZC5TVU1fQU5ZX0FHR1JFR0FUSU9OID0gJzEnO1xyXG5cclxuRmllbGQuTlVNQkVSX0ZPUk1BVCA9ICcwJztcclxuRmllbGQuUEVSQ0VOVF9GT1JNQVQgPSAnMSc7XHJcbkZpZWxkLlNDSUVOVElGSUNfRk9STUFUID0gJzInO1xyXG5cclxuRmllbGQuZm9ybWF0VmFsdWUgPSBmdW5jdGlvbihmaWVsZCwgdmFsdWUpXHJcbntcclxuICBpZihmaWVsZC5kYXRhdHlwZSA9PT0gRmllbGQuTlVNQkVSKVxyXG4gIHtcclxuICAgIHZhbHVlID0gTnVtYmVyKHZhbHVlKTsgICAgICAvL1RPRE86IGhhbmRsZSBjYXNlIHdoZXJlIHZhbHVlIGRvZXNuJ3QgcGFyc2UgdG8gYSBudW1iZXJcclxuICAgIFxyXG4gICAgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5OVU1CRVJfRk9STUFUKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gdmFsdWUudG9GaXhlZChmaWVsZC5wcmVjaXNpb24pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihmaWVsZC5mb3JtYXQgPT09IEZpZWxkLlBFUkNFTlRfRk9STUFUKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gKDEwMC4wICogdmFsdWUpLnRvRml4ZWQoZmllbGQucHJlY2lzaW9uKSArICclJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLnRvRXhwb25lbnRpYWwoZmllbGQucHJlY2lzaW9uKTtcclxuICAgIH1cclxuICB9XHJcbiAgZWxzZSBpZihmaWVsZC5kYXRhdHlwZSA9PT0gRmllbGQuU1RSSU5HKVxyXG4gIHtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9IFxyXG4gIGVsc2UgaWYoZmllbGQuZGF0YXR5cGUgPT09IEZpZWxkLkNIT0lDRSlcclxuICB7XHJcbiAgICAvL1RPRE86IGltcGxlbWVudFxyXG4gIH0gICAgICBcclxufTsgICIsInZhciBGaWVsZE1lbnUgPSBmdW5jdGlvbihmaWVsZCwgZmllbGRzKVxyXG57XHJcbiAgdmFyIG51bWJlckl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnTnVtYmVyJywgRmllbGQuTlVNQkVSLCAnZGF0YXR5cGUnLCBmaWVsZCk7XHJcbiAgdmFyIGZvcm1hdEl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnRm9ybWF0Jyk7XHJcbiAgXHJcbiAgdmFyIG51bWJlckZvcm1hdEl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnTnVtYmVyJywgRmllbGQuTlVNQkVSX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKTtcclxuICBudW1iZXJGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oJzAnLCAwLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB2YXIgZGlzcGxheVN0cmluZyA9ICcwLic7XHJcbiAgZm9yKHZhciBpID0gMTsgaSA8IDExOyBpKyspXHJcbiAge1xyXG4gICAgZGlzcGxheVN0cmluZyArPSAnMCc7XHJcbiAgICBudW1iZXJGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oZGlzcGxheVN0cmluZywgaSwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgfVxyXG4gIGZvcm1hdEl0ZW0uaXRlbXMucHVzaChudW1iZXJGb3JtYXRJdGVtKTtcclxuICBcclxuICB2YXIgcGVyY2VudEZvcm1hdEl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnUGVyY2VudCcsIEZpZWxkLlBFUkNFTlRfRk9STUFULCAnZm9ybWF0JywgZmllbGQpO1xyXG4gIHBlcmNlbnRGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oJzAlJywgMCwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgdmFyIGRpc3BsYXlTdHJpbmcgPSAnMC4nO1xyXG4gIGZvcih2YXIgaSA9IDE7IGkgPCAxMTsgaSsrKVxyXG4gIHtcclxuICAgIGRpc3BsYXlTdHJpbmcgKz0gJzAnO1xyXG4gICAgcGVyY2VudEZvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgRmllbGRNZW51SXRlbShkaXNwbGF5U3RyaW5nICsgJyUnLCBpLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB9XHJcbiAgZm9ybWF0SXRlbS5pdGVtcy5wdXNoKHBlcmNlbnRGb3JtYXRJdGVtKTtcclxuICBcclxuICB2YXIgc2NpZW50aWZpY0Zvcm1hdEl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnU2NpZW50aWZpYycsIEZpZWxkLlNDSUVOVElGSUNfRk9STUFULCAnZm9ybWF0JywgZmllbGQpO1xyXG4gIHNjaWVudGlmaWNGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oJzBlKzAnLCAwLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB2YXIgZGlzcGxheVN0cmluZyA9ICcwLic7XHJcbiAgZm9yKHZhciBpID0gMTsgaSA8IDExOyBpKyspXHJcbiAge1xyXG4gICAgZGlzcGxheVN0cmluZyArPSAnMCc7XHJcbiAgICBzY2llbnRpZmljRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKGRpc3BsYXlTdHJpbmcgKyAnZSswJywgaSwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgfVxyXG4gIGZvcm1hdEl0ZW0uaXRlbXMucHVzaChzY2llbnRpZmljRm9ybWF0SXRlbSk7ICBcclxuICBcclxuICBudW1iZXJJdGVtLml0ZW1zLnB1c2goZm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIGFnZ3JlZ2F0aW9uSXRlbSA9IG5ldyBGaWVsZE1lbnVJdGVtKCdBZ2dyZWdhdGlvbicpO1xyXG4gIGFnZ3JlZ2F0aW9uSXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCdObyBBZ2dyZWdhdGlvbicsIEZpZWxkLk5PX0FHR1JFR0FUSU9OLCAnYWdnX3R5cGUnLCBmaWVsZCkpO1xyXG4gIFxyXG4gIHZhciBzdW1BbnlBZ2dJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ1N1bSBhbnkgZGVmaW5lZCBjaGlsZHJlbicsIEZpZWxkLlNVTV9BTllfQUdHUkVHQVRJT04sICdhZ2dfdHlwZScsIGZpZWxkKTtcclxuICBcclxuICBmb3IodmFyIGluZGV4IGluIGZpZWxkcylcclxuICB7XHJcbiAgICB2YXIgZiA9IGZpZWxkc1tpbmRleF07XHJcbiAgICBcclxuICAgIGlmKGYubmFtZSAhPSBmaWVsZC5uYW1lKVxyXG4gICAge1xyXG4gICAgICBzdW1BbnlBZ2dJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oZi5uYW1lLCBmLm5hbWUsICdhZ2dfcXR5X2ZpZWxkJywgZmllbGQpKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgYWdncmVnYXRpb25JdGVtLml0ZW1zLnB1c2goc3VtQW55QWdnSXRlbSk7XHJcbiAgbnVtYmVySXRlbS5pdGVtcy5wdXNoKGFnZ3JlZ2F0aW9uSXRlbSk7XHJcbiAgXHJcbiAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gIHRoaXMuaXRlbXMucHVzaChudW1iZXJJdGVtKTtcclxuICB0aGlzLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oJ1RleHQnLCBGaWVsZC5TVFJJTkcsICdkYXRhdHlwZScsIGZpZWxkKSk7XHJcbiAgLy9UT0RPOiB0aGlzLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oJ0Nob2ljZScsIEZpZWxkLkNIT0lDRSwgJ2RhdGF0eXBlJywgZmllbGQpKTsgIFxyXG59O1xyXG5cclxuRmllbGRNZW51LnByb3RvdHlwZS5nZXRNZW51SXRlbSA9IGZ1bmN0aW9uKGlkLCBtZW51SXRlbSlcclxue1xyXG4gIGlmKGlkID09PSBtZW51SXRlbS5pZClcclxuICB7XHJcbiAgICByZXR1cm4gbWVudUl0ZW07XHJcbiAgfVxyXG4gIGVsc2UgaWYobWVudUl0ZW0uaXRlbXMgJiYgbWVudUl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICB2YXIgZm91bmQ7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbWVudUl0ZW0uaXRlbXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGZvdW5kID0gdGhpcy5nZXRNZW51SXRlbShpZCwgbWVudUl0ZW0uaXRlbXNbaV0pO1xyXG4gICAgICBpZihmb3VuZCkgeyByZXR1cm4gZm91bmQ7IH1cclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5GaWVsZE1lbnUucHJvdG90eXBlLmdldE1lbnVJdGVtUGFyZW50ID0gZnVuY3Rpb24oaWQsIG1lbnVJdGVtKVxyXG57XHJcbiAgaWYobWVudUl0ZW0uaXRlbXMgJiYgbWVudUl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbWVudUl0ZW0uaXRlbXMubGVuZ3RoOyBpKyspXHJcbiAgICB7IFxyXG4gICAgICBpZihtZW51SXRlbS5pdGVtc1tpXS5pZCA9PT0gaWQpXHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gbWVudUl0ZW07XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kID0gdGhpcy5nZXRNZW51SXRlbVBhcmVudChpZCwgbWVudUl0ZW0uaXRlbXNbaV0pO1xyXG4gICAgICAgIGlmKGZvdW5kKSB7IHJldHVybiBmb3VuZDsgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59OyIsInZhciBGaWVsZE1lbnVJdGVtID0gZnVuY3Rpb24oZGlzcGxheSwgdmFsdWUsIHZhck5hbWUsIGZpZWxkKVxyXG57XHJcbiAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTtcclxuICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgdGhpcy52YXJOYW1lID0gdmFyTmFtZTtcclxuICB0aGlzLmZpZWxkID0gZmllbGQ7XHJcbiAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gIHRoaXMuaWQgPSBGaWVsZE1lbnVJdGVtLmlkKys7XHJcbiAgdGhpcy5wYXJlbnQgPSAtMTtcclxuXHJcbiAgaWYoZmllbGQpXHJcbiAge1xyXG4gICAgdGhpcy5jaGVja2VkID0gZmllbGRbdmFyTmFtZV0gPT09IHZhbHVlO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdGhpcy5jaGVja2VkID0gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG5cclxuRmllbGRNZW51SXRlbS5pZCA9IDA7IiwidmFyIHByb2plY3QgPVxyXG57XHJcbiAgc2F2ZVRvRGF0YWJhc2U6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB0aGlzLmNsZWFuc2VEYXRhKCk7XHJcbiAgICAkLmFqYXgoeyB0eXBlOiAnUE9TVCcsIHVybDogJy9hcGkvdHJlZScsIGRhdGFUeXBlOiAnanNvbicsIGRhdGE6IHsganNvbjogSlNPTi5zdHJpbmdpZnkodGhpcy50cmVlKSB9IH0pO1xyXG4gIH0sXHJcbiAgZ2V0Q3VycmVudFZlcnNpb246IGZ1bmN0aW9uKGZpbmlzaEZuKVxyXG4gIHtcclxuICAgICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvdHJlZT9wcm9qZWN0SUQ9JyArIHRoaXMudHJlZS5wcm9qZWN0SUQgfSkuZG9uZShmdW5jdGlvbihkYXRhKSAgICAgICAgICAgICAgIC8vcmVhZCB0cmVlIGZvciB0aGUgc2VsZWN0ZWQgcHJvamVjdCBmcm9tIHRoZSBkYXRhYmFzZVxyXG4gICAge1xyXG4gICAgICBmaW5pc2hGbihkYXRhLnZlcnNpb24pO1xyXG4gICAgfSk7ICAgICAgXHJcbiAgfSxcclxuICBmaWVsZHM6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy50cmVlLmZpZWxkcztcclxuICB9LFxyXG4gIGNsZWFuc2VEYXRhOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgdGhpcy50cmF2ZXJzZShwcm9qZWN0LmdldENoaWxkcmVuLCBmdW5jdGlvbihub2RlKVxyXG4gICAge1xyXG4gICAgICBpZighbm9kZS5jaGlsZHJlbikgeyBub2RlLmNoaWxkcmVuID0gW107IH1cclxuICAgICAgZGVsZXRlIG5vZGUucGFyZW50O1xyXG4gICAgICBkZWxldGUgbm9kZS54O1xyXG4gICAgICBkZWxldGUgbm9kZS54MDtcclxuICAgICAgZGVsZXRlIG5vZGUueTtcclxuICAgICAgZGVsZXRlIG5vZGUueTA7XHJcbiAgICB9KTsgICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgIHRoaXMudHJlZS5maWVsZHMucHVzaChuZXcgRmllbGQoZmllbGROYW1lKSk7XHJcbiAgfSxcclxuICBnZXRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSBpbiB0aGlzLnRyZWUuZmllbGRzKVxyXG4gICAge1xyXG4gICAgICB2YXIgZmllbGQgPSB0aGlzLnRyZWUuZmllbGRzW2ldO1xyXG4gICAgICBpZihmaWVsZC5uYW1lID09PSBmaWVsZE5hbWUpXHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gZmllbGQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHJlbW92ZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIHBhcmVudE5vZGUgPSB0aGlzLmZpbmRQYXJlbnQobm9kZS5pZCk7XHJcbiAgXHJcbiAgICBpZihwYXJlbnROb2RlKVxyXG4gICAge1xyXG4gICAgICBwYXJlbnROb2RlLmNoaWxkcmVuLnNwbGljZShwYXJlbnROb2RlLmNoaWxkcmVuLmluZGV4T2Yobm9kZSksIDEpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICB0aGlzLnRyZWUuY2hpbGRyZW4uc3BsaWNlKHRoaXMudHJlZS5jaGlsZHJlbi5pbmRleE9mKG5vZGUpLCAxKTsgIFxyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGFkZE5vZGU6IGZ1bmN0aW9uKG5vZGUsIHBhcmVudE5vZGUpXHJcbiAge1xyXG4gICAgcGFyZW50Tm9kZS5jaGlsZHJlbi5wdXNoKG5vZGUpOyAgICAgICAgICAgIC8vYWRkIHRoZSBtb3ZlZCBub2RlIHRvIGl0J3MgbmV3IHBhcmVudCBpbiB0aGUgbW9kZWxcclxuICAgIHByb2plY3Quc2V0RGVwdGhzKHBhcmVudE5vZGUpOyAgICAgICAgICAgICAvL3NldCB0aGUgbmV3IGRlcHRoIHZhbHVlcyBmb3IgdGhlIG1vdmVkIG5vZGVzICAgICAgIFxyXG4gIH0sXHJcbiAgc2V0RGVwdGhzOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCwgaSlcclxuICAgIHtcclxuICAgICAgY2hpbGQuZGVwdGggPSBub2RlLmRlcHRoICsgMTtcclxuICAgICAgXHJcbiAgICAgIGlmKGNoaWxkLmRlcHRoID4gcHJvamVjdC50cmVlLm1heERlcHRoKSBcclxuICAgICAgeyBcclxuICAgICAgICBwcm9qZWN0LnRyZWUubWF4RGVwdGggPSBjaGlsZC5kZXB0aDsgXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHByb2plY3Quc2V0RGVwdGhzKGNoaWxkKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgaW5zZXJ0Tm9kZTogZnVuY3Rpb24obm9kZSwgc291cmNlTm9kZSlcclxuICB7XHJcbiAgICB2YXIgcGFyZW50Tm9kZSA9IHRoaXMuZmluZFBhcmVudChzb3VyY2VOb2RlLmlkKTtcclxuICAgIGlmKHBhcmVudE5vZGUpXHJcbiAgICB7XHJcbiAgICAgIHBhcmVudE5vZGUuY2hpbGRyZW4uc3BsaWNlKHBhcmVudE5vZGUuY2hpbGRyZW4uaW5kZXhPZihzb3VyY2VOb2RlKSwgMCwgbm9kZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHRoaXMudHJlZS5jaGlsZHJlbi5zcGxpY2UodGhpcy50cmVlLmNoaWxkcmVuLmluZGV4T2Yoc291cmNlTm9kZSksIDAsIG5vZGUpO1xyXG4gICAgfSAgICAgXHJcbiAgfSxcclxuICBjbG9uZU5vZGU6IGZ1bmN0aW9uKHNvdXJjZU5vZGUpXHJcbiAge1xyXG4gICAgdmFyIG5ld05vZGUgPSAkLmV4dGVuZCh0cnVlLCB7fSwgc291cmNlTm9kZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2xvbmUgdGhlIHNvdXJjZSBub2RlXHJcbiAgICB0aGlzLnRyYXZlcnNlKHRoaXMuZ2V0Q2hpbGRyZW4sIGZ1bmN0aW9uKG5vZGUpIHsgbm9kZS5pZCA9IHByb2plY3QudHJlZS5uZXh0Tm9kZUlEKys7IH0sIG5ld05vZGUpOyAgLy9hc3NpZ24gdW5pcXVlIGlkcyB0byBlYWNoIG5vZGUgaW4gdGhlIGNsb25lICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIHJldHVybiBuZXdOb2RlOyAgICAgXHJcbiAgfSxcclxuICBleHBhbmROb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIGlmKHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKG5vZGUpKVxyXG4gICAge1xyXG4gICAgICBub2RlLmNoaWxkcmVuID0gbm9kZS5fY2hpbGRyZW47XHJcbiAgICAgIG5vZGUuX2NoaWxkcmVuID0gW107IFxyXG4gICAgfSAgIFxyXG4gIH0sXHJcbiAgZnVsbHlFeHBhbmROb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHByb2plY3QuZXhwYW5kTm9kZShub2RlKTtcclxuICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkgeyBwcm9qZWN0LmZ1bGx5RXhwYW5kTm9kZShjaGlsZCk7IH0pOyAgICAgICBcclxuICB9LFxyXG4gIGV4cGFuZFRvTGV2ZWw6IGZ1bmN0aW9uKG5vZGUsIGxldmVsKVxyXG4gIHsgICAgXHJcbiAgICBpZihub2RlLmRlcHRoIDwgbGV2ZWwpXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3QuZXhwYW5kTm9kZShub2RlKTtcclxuICAgICAgZm9yKHZhciBpIGluIG5vZGUuY2hpbGRyZW4pIHsgcHJvamVjdC5leHBhbmRUb0xldmVsKG5vZGUuY2hpbGRyZW5baV0sIGxldmVsKTsgfVxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBwcm9qZWN0LmNvbGxhcHNlTm9kZShub2RlKTtcclxuICAgICAgZm9yKHZhciBpIGluIG5vZGUuX2NoaWxkcmVuKSB7IHByb2plY3QuZXhwYW5kVG9MZXZlbChub2RlLl9jaGlsZHJlbltpXSwgbGV2ZWwpOyB9XHJcbiAgICB9XHJcbiAgfSwgXHJcbiAgY29sbGFwc2VOb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIGlmKHByb2plY3QuaXNOb2RlRXhwYW5kZWQobm9kZSkpXHJcbiAgICB7XHJcbiAgICAgIG5vZGUuX2NoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjtcclxuICAgICAgbm9kZS5jaGlsZHJlbiA9IFtdO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGZ1bGx5Q29sbGFwc2VOb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIGlmKG5vZGUuY2hpbGRyZW4pXHJcbiAgICB7XHJcbiAgICAgIG5vZGUuX2NoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjtcclxuICAgICAgbm9kZS5fY2hpbGRyZW4uZm9yRWFjaChwcm9qZWN0LmZ1bGx5Q29sbGFwc2VOb2RlKTtcclxuICAgICAgbm9kZS5jaGlsZHJlbiA9IFtdO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIHRvZ2dsZUV4cGFuc2lvbjogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbikgXHJcbiAgICB7XHJcbiAgICAgICAgbm9kZS5fY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgIG5vZGUuY2hpbGRyZW4gPSBbXTtcclxuICAgIH0gXHJcbiAgICBlbHNlIGlmIChub2RlLl9jaGlsZHJlbikgXHJcbiAgICB7XHJcbiAgICAgICAgbm9kZS5jaGlsZHJlbiA9IG5vZGUuX2NoaWxkcmVuO1xyXG4gICAgICAgIG5vZGUuX2NoaWxkcmVuID0gW107XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgaGFzQ2hpbGRyZW46IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB8fCAobm9kZS5fY2hpbGRyZW4gJiYgbm9kZS5fY2hpbGRyZW4ubGVuZ3RoID09PSAwKTtcclxuICB9LCAgXHJcbiAgaXNOb2RlQ2hpbGRsZXNzOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiAoIW5vZGUuY2hpbGRyZW4gfHwgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApICYmICghbm9kZS5fY2hpbGRyZW4gfHwgbm9kZS5fY2hpbGRyZW4ubGVuZ3RoID09PSAwKTtcclxuICB9LFxyXG4gIGlzTm9kZUNvbGxhcHNlZDogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gbm9kZS5fY2hpbGRyZW4gJiYgbm9kZS5fY2hpbGRyZW4ubGVuZ3RoID4gMDtcclxuICB9LFxyXG4gIGlzTm9kZUV4cGFuZGVkOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiBub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMDtcclxuICB9LFxyXG4gIGZpbmROb2RlOiBmdW5jdGlvbihub2RlSUQsIHNlYXJjaE5vZGUpXHJcbiAge1xyXG4gICAgaWYoIXNlYXJjaE5vZGUpIHsgc2VhcmNoTm9kZSA9IHRoaXMudHJlZTsgfVxyXG4gICAgXHJcbiAgICBpZihzZWFyY2hOb2RlLmlkID09PSBub2RlSUQpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBzZWFyY2hOb2RlO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBmb3IodmFyIGkgaW4gc2VhcmNoTm9kZS5jaGlsZHJlbilcclxuICAgICAge1xyXG4gICAgICAgIHZhciBmb3VuZE5vZGUgPSB0aGlzLmZpbmROb2RlKG5vZGVJRCwgc2VhcmNoTm9kZS5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgaWYoZm91bmROb2RlKSB7IHJldHVybiBmb3VuZE5vZGU7IH1cclxuICAgICAgfVxyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGZpbmRQYXJlbnQ6IGZ1bmN0aW9uKG5vZGVJRCwgc2VhcmNoTm9kZSwgcGFyZW50KVxyXG4gIHtcclxuICAgIGlmKCFzZWFyY2hOb2RlKSB7IHNlYXJjaE5vZGUgPSB0aGlzLnRyZWU7IH1cclxuICAgIFxyXG4gICAgaWYoc2VhcmNoTm9kZS5pZCA9PT0gbm9kZUlEKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gcGFyZW50O1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBmb3IodmFyIGkgaW4gc2VhcmNoTm9kZS5jaGlsZHJlbilcclxuICAgICAge1xyXG4gICAgICAgIHZhciBmb3VuZFBhcmVudCA9IHRoaXMuZmluZFBhcmVudChub2RlSUQsIHNlYXJjaE5vZGUuY2hpbGRyZW5baV0sIHNlYXJjaE5vZGUpO1xyXG4gICAgICAgIGlmKGZvdW5kUGFyZW50KSB7IHJldHVybiBmb3VuZFBhcmVudDsgfVxyXG4gICAgICB9XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgdHJhdmVyc2U6IGZ1bmN0aW9uKGNoaWxkcmVuRm4sIHZpc2l0Rm4sIHBhcmVudClcclxuICB7XHJcbiAgICBpZiAoIXBhcmVudCkgeyBwYXJlbnQgPSBwcm9qZWN0LnRyZWU7IH1cclxuICAgIHZpc2l0Rm4ocGFyZW50KTtcclxuICAgIFxyXG4gICAgdmFyIGNoaWxkcmVuID0gY2hpbGRyZW5GbihwYXJlbnQpO1xyXG4gICAgZm9yICh2YXIgaSBpbiBjaGlsZHJlbikgXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3QudHJhdmVyc2UoY2hpbGRyZW5GbiwgdmlzaXRGbiwgY2hpbGRyZW5baV0pO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIHRyYXZlcnNlRGVzY2VuZGFudHM6IGZ1bmN0aW9uKGNoaWxkcmVuRm4sIHZpc2l0Rm4sIHBhcmVudClcclxuICB7XHJcbiAgICBpZighcGFyZW50KSB7IHBhcmVudCA9IHByb2plY3QudHJlZTsgfVxyXG4gICAgcGFyZW50LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHsgcHJvamVjdC50cmF2ZXJzZShjaGlsZHJlbkZuLCB2aXNpdEZuLCBjaGlsZCk7IH0pOyAgXHJcbiAgfSxcclxuICBnZXRDaGlsZHJlbjogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gbm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDAgPyBub2RlLmNoaWxkcmVuIDogbnVsbDsgICAgXHJcbiAgfSAgIFxyXG59OyIsInZhciBwcm9qZWN0cyA9XHJcbntcclxuICBpbml0OiBmdW5jdGlvbihmaW5pc2hGbilcclxuICB7ICBcdFxyXG4gICAgJC5hamF4KHsgdHlwZTogJ0dFVCcsIHVybDogJ2FwaS9wcm9qZWN0cyd9KS5kb25lKGZ1bmN0aW9uKGRhdGEpICAgLy9yZWFkIHByb2plY3RzIGZyb20gdGhlIHNlcnZlclxyXG4gICAgeyBcclxuICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgZmluaXNoRm4oZGF0YS5wcm9qZWN0cyk7XHJcbiAgICB9KTsgICAgIFxyXG4gIH0sXHJcbiAgY3JlYXRlTmV3UHJvamVjdDogZnVuY3Rpb24obmV3UHJvamVjdE5hbWUpXHJcbiAge1xyXG4gIFx0JC5hamF4KHsgdHlwZTogJ1BPU1QnLCB1cmw6ICcvYXBpL2FkZFByb2plY3Q/cHJvamVjdE5hbWU9JyArIG5ld1Byb2plY3ROYW1lIH0pOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBkb2N1bWVudCBpbiB0aGUgZGF0YWJhc2VcclxuICBcdFxyXG4gICAgcHJvamVjdC50cmVlID0geyBcInByb2plY3RJRFwiOiBwcm9qZWN0Lm5leHRQcm9qZWN0SUQsIFwicHJvamVjdE5hbWVcIjogbmV3UHJvamVjdE5hbWUsIFwibmFtZVwiOiBuZXdQcm9qZWN0TmFtZSwgXCJ2ZXJzaW9uXCI6IDEsIFwibmV4dE5vZGVJRFwiOiAzLCBcImRlcHRoXCI6IDAsIFwiaWRcIjogMSwgXCJmaWVsZHNcIjogW10sIFwiY2hpbGRyZW5cIjogW3sgXCJpZFwiOiAyLCBcIm5hbWVcIjogbmV3UHJvamVjdE5hbWUsIFwiZGVwdGhcIjogMSwgXCJjaGlsZHJlblwiOiBbXSB9XSB9O1xyXG4gIFx0cHJvamVjdC5zYXZlVG9EYXRhYmFzZSgpOyAgXHJcbiAgfSxcclxuICBvcGVuUHJvamVjdDogZnVuY3Rpb24ocHJvamVjdElELCBmaW5pc2hGbilcclxuICB7XHJcbiAgICAkLmFqYXgoeyB0eXBlOiAnR0VUJywgdXJsOiAnYXBpL3RyZWU/cHJvamVjdElEPScgKyBwcm9qZWN0SUQgfSkuZG9uZShmdW5jdGlvbihkYXRhKSAgICAgICAgICAgICAgIC8vcmVhZCB0cmVlIGZvciB0aGUgc2VsZWN0ZWQgcHJvamVjdCBmcm9tIHRoZSBkYXRhYmFzZVxyXG4gICAge1xyXG4gICAgICBmaW5pc2hGbihkYXRhKTtcclxuICAgIH0pOyAgICAgXHJcbiAgfSxcclxuICBvcGVuUHJvamVjdFZlcnNpb246IGZ1bmN0aW9uKHByb2plY3RJRCwgdmVyc2lvbiwgZmluaXNoRm4pXHJcbiAge1xyXG4gICAgJC5hamF4KHsgdHlwZTogJ0dFVCcsIHVybDogJ2FwaS92ZXJzaW9uP3Byb2plY3RJRD0nICsgcHJvamVjdElEICsgJyZ2ZXJzaW9uPScgKyB2ZXJzaW9uIH0pLmRvbmUoZnVuY3Rpb24oZGF0YSkgICAgICAgICAgICAgICAvL3JlYWQgdHJlZSBmb3IgdGhlIHNlbGVjdGVkIHByb2plY3QgdmVyc2lvbiBmcm9tIHRoZSBkYXRhYmFzZVxyXG4gICAge1xyXG4gICAgICBmaW5pc2hGbihkYXRhKTtcclxuICAgIH0pOyAgICAgXHJcbiAgfSBcclxufTsiLCJ2YXIgRE9XTl9BUlJPV19JTUFHRV9QQVRIID0gJ2ltYWdlcy9kb3duLWFycm93LnBuZyc7XHJcbnZhciBDSEVDS19NQVJLX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2NoZWNrbWFyay5wbmcnO1xyXG52YXIgQkxBTktfTUFSS19JTUFHRV9QQVRIID0gJ2ltYWdlcy9ibGFua21hcmsucG5nJztcclxuXHJcbnZhciBFTlRFUl9LRVkgPSAxMztcclxuXHJcbnZhciBLRVlfVVBfQVJST1cgPSAzODtcclxudmFyIEtFWV9ET1dOX0FSUk9XID0gNDA7XHJcbnZhciBLRVlfTEVGVF9BUlJPVyA9IDM3O1xyXG52YXIgS0VZX1JJR0hUX0FSUk9XID0gMzk7XHJcblxyXG52YXIgREVGQVVMVF9OT0RFX0lOUFVUX1dJRFRIID0gMzkwO1xyXG5cclxudmFyIFNQUkVBRFNIRUVUX1ZJRVcgPSAnMCc7XHJcbnZhciBUUkVFX1ZJRVcgPSAnMSc7XHJcbnZhciBXRUlHSFRFRF9UUkVFX1ZJRVcgPSAnMic7XHJcbnZhciBDSVJDTEVfVklFVyA9ICczJzsiLCJmdW5jdGlvbiBkZWJ1ZygpIHt9XHJcblxyXG5kZWJ1Zy5wcmludCA9IGZ1bmN0aW9uKG8pXHJcbntcclxuICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShvLCBudWxsLCAnXFx0JykpOyAgXHJcbn07XHJcblxyXG5kZWJ1Zy5wcmludFRyZWUgPSBmdW5jdGlvbigpXHJcbntcclxuICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShwcm9qZWN0LnRyZWUsIG51bGwsICdcXHQnKSk7XHJcbn07IiwidmFyIGNpcmNsZVZpZXcgPVxyXG57XHJcbiAgZGVzdHJveTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoJyNjaXJjbGVWaWV3JykucmVtb3ZlKCk7XHJcbiAgfSxcclxuICBkaXNwbGF5OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImNpcmNsZVZpZXdcIj48L2Rpdj4nKTtcclxuICAgIFxyXG4gICAgdmFyIG1hcmdpbiA9IDIwLFxyXG4gICAgICAgIGRpYW1ldGVyID0gOTYwO1xyXG4gICAgXHJcbiAgICB2YXIgY29sb3IgPSBkMy5zY2FsZS5saW5lYXIoKVxyXG4gICAgICAgIC5kb21haW4oWy0xLCA1XSlcclxuICAgICAgICAucmFuZ2UoW1wiaHNsKDE1Miw4MCUsODAlKVwiLCBcImhzbCgyMjgsMzAlLDQwJSlcIl0pXHJcbiAgICAgICAgLmludGVycG9sYXRlKGQzLmludGVycG9sYXRlSGNsKTtcclxuICAgIFxyXG4gICAgdmFyIHBhY2sgPSBkMy5sYXlvdXQucGFjaygpXHJcbiAgICAgICAgLnBhZGRpbmcoMilcclxuICAgICAgICAuc2l6ZShbZGlhbWV0ZXIgLSBtYXJnaW4sIGRpYW1ldGVyIC0gbWFyZ2luXSlcclxuICAgICAgICAudmFsdWUoZnVuY3Rpb24oZCkgeyByZXR1cm4gTWF0aC5QSSAqIGQudmFsdWVzWydBJ10gKiBkLnZhbHVlc1snQSddIC8gNDsgfSk7XHJcbiAgICBcclxuICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoXCIjY2lyY2xlVmlld1wiKS5hcHBlbmQoXCJzdmdcIilcclxuICAgICAgICAuYXR0cihcIndpZHRoXCIsIGRpYW1ldGVyKVxyXG4gICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGRpYW1ldGVyKVxyXG4gICAgICAuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZGlhbWV0ZXIgLyAyICsgXCIsXCIgKyBkaWFtZXRlciAvIDIgKyBcIilcIik7XHJcbiAgICBcclxuICAgIHZhciByb290ID0gcHJvamVjdC50cmVlO1xyXG5cclxuICAgIFxyXG4gICAgICB2YXIgZm9jdXMgPSByb290LFxyXG4gICAgICAgICAgbm9kZXMgPSBwYWNrLm5vZGVzKHJvb3QpLFxyXG4gICAgICAgICAgdmlldztcclxuICAgIFxyXG4gICAgICB2YXIgY2lyY2xlID0gc3ZnLnNlbGVjdEFsbChcImNpcmNsZVwiKVxyXG4gICAgICAgICAgLmRhdGEobm9kZXMpXHJcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucGFyZW50ID8gZC5jaGlsZHJlbiA/IFwibm9kZVwiIDogXCJub2RlIG5vZGUtLWxlYWZcIiA6IFwibm9kZSBub2RlLS1yb290XCI7IH0pXHJcbiAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY2hpbGRyZW4gPyBjb2xvcihkLmRlcHRoKSA6IG51bGw7IH0pXHJcbiAgICAgICAgICAub24oXCJjbGlja1wiLCBmdW5jdGlvbihkKSB7IGlmIChmb2N1cyAhPT0gZCkgem9vbShkKSwgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IH0pO1xyXG4gICAgXHJcbiAgICAgIHZhciB0ZXh0ID0gc3ZnLnNlbGVjdEFsbChcInRleHRcIilcclxuICAgICAgICAgIC5kYXRhKG5vZGVzKVxyXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcInRleHRcIilcclxuICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsYWJlbFwiKVxyXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucGFyZW50ID09PSByb290ID8gMSA6IDA7IH0pXHJcbiAgICAgICAgICAuc3R5bGUoXCJkaXNwbGF5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucGFyZW50ID09PSByb290ID8gbnVsbCA6IFwibm9uZVwiOyB9KVxyXG4gICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5uYW1lOyB9KTtcclxuICAgIFxyXG4gICAgICB2YXIgbm9kZSA9IHN2Zy5zZWxlY3RBbGwoXCJjaXJjbGUsdGV4dFwiKTtcclxuICAgIFxyXG4gICAgICBkMy5zZWxlY3QoXCJib2R5XCIpXHJcbiAgICAgICAgICAuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIGNvbG9yKC0xKSlcclxuICAgICAgICAgIC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCkgeyB6b29tKHJvb3QpOyB9KTtcclxuICAgIFxyXG4gICAgICB6b29tVG8oW3Jvb3QueCwgcm9vdC55LCByb290LnIgKiAyICsgbWFyZ2luXSk7XHJcbiAgICBcclxuICAgICAgZnVuY3Rpb24gem9vbShkKSB7XHJcbiAgICAgICAgdmFyIGZvY3VzMCA9IGZvY3VzOyBmb2N1cyA9IGQ7XHJcbiAgICBcclxuICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IGQzLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgICAuZHVyYXRpb24oZDMuZXZlbnQuYWx0S2V5ID8gNzUwMCA6IDc1MClcclxuICAgICAgICAgICAgLnR3ZWVuKFwiem9vbVwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGkgPSBkMy5pbnRlcnBvbGF0ZVpvb20odmlldywgW2ZvY3VzLngsIGZvY3VzLnksIGZvY3VzLnIgKiAyICsgbWFyZ2luXSk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsgem9vbVRvKGkodCkpOyB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIHRyYW5zaXRpb24uc2VsZWN0QWxsKFwidGV4dFwiKVxyXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihkKSB7IHJldHVybiBkLnBhcmVudCA9PT0gZm9jdXMgfHwgdGhpcy5zdHlsZS5kaXNwbGF5ID09PSBcImlubGluZVwiOyB9KVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5wYXJlbnQgPT09IGZvY3VzID8gMSA6IDA7IH0pXHJcbiAgICAgICAgICAgIC5lYWNoKFwic3RhcnRcIiwgZnVuY3Rpb24oZCkgeyBpZiAoZC5wYXJlbnQgPT09IGZvY3VzKSB0aGlzLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZVwiOyB9KVxyXG4gICAgICAgICAgICAuZWFjaChcImVuZFwiLCBmdW5jdGlvbihkKSB7IGlmIChkLnBhcmVudCAhPT0gZm9jdXMpIHRoaXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyB9KTtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAgIGZ1bmN0aW9uIHpvb21Ubyh2KSB7XHJcbiAgICAgICAgdmFyIGsgPSBkaWFtZXRlciAvIHZbMl07IHZpZXcgPSB2O1xyXG4gICAgICAgIG5vZGUuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIChkLnggLSB2WzBdKSAqIGsgKyBcIixcIiArIChkLnkgLSB2WzFdKSAqIGsgKyBcIilcIjsgfSk7XHJcbiAgICAgICAgY2lyY2xlLmF0dHIoXCJyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuciAqIGs7IH0pO1xyXG4gICAgICB9XHJcbiAgICBcclxuICAgIGQzLnNlbGVjdChzZWxmLmZyYW1lRWxlbWVudCkuc3R5bGUoXCJoZWlnaHRcIiwgZGlhbWV0ZXIgKyBcInB4XCIpOyAgICBcclxuICB9XHJcbn07IiwidmFyIGV4cGFuZGVyU2VsZWN0b3IgPVxyXG57XHJcbiAgaW5pdDogZnVuY3Rpb24obnVtTGV2ZWxzKVxyXG4gIHtcclxuICAgICQoJyNleHBhbmRlckNvbnRhaW5lcicpLmh0bWwoZXhwYW5kZXJTZWxlY3Rvci5nZXRNYXJrdXAobnVtTGV2ZWxzKSk7XHJcbiAgICAkKFwiI2V4cGFuZGVyU2VsZWN0b3JcIikuY2hhbmdlKGV4cGFuZGVyU2VsZWN0b3IuaGFuZGxlKTtcclxuICB9LFxyXG4gIGhhbmRsZTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHZhciBsZXZlbCA9IHBhcnNlSW50KCQoJyNleHBhbmRlclNlbGVjdG9yJykudmFsKCkpO1xyXG5cclxuICAgIGlmKGxldmVsID4gMClcclxuICAgIHtcclxuICAgICAgaG1zLmV4cGFuZFRvTGV2ZWwobGV2ZWwpOyAgXHJcbiAgICB9XHJcbiAgfSwgIFxyXG4gIGdldE1hcmt1cDogZnVuY3Rpb24obnVtTGV2ZWxzKVxyXG4gIHtcclxuICAgIHZhciBtYXJrdXAgPSAnPGRpdiBpZD1cImV4cGFuZGVyU2VsZWN0Q29udGFpbmVyXCI+J1xyXG4gICAgKyAnPHNlbGVjdCBpZD1cImV4cGFuZGVyU2VsZWN0b3JcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPidcclxuICAgICsgJzxvcHRpb24gdmFsdWU9XCIwXCI+RXhwYW5kL0NvbGxhcHNlIHRvIExldmVsPC9vcHRpb24+JztcclxuICAgIFxyXG4gICAgZm9yKHZhciBpID0gMTsgaSA8IG51bUxldmVscysxOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIG1hcmt1cCArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBpICsgJ1wiPicgKyBpICsgJzwvb3B0aW9uPic7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSAnPC9zZWxlY3Q+J1xyXG4gICAgKyAnPGlucHV0IGlkPVwicHJvamVjdEFjdGlvbklucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj48L2lucHV0PidcclxuICAgICsgJzwvZGl2Pic7XHJcbiAgICByZXR1cm4gbWFya3VwOyBcclxuICB9XHJcbn07IiwidmFyIGZpZWxkTWVudVZpZXcgPSBcclxue1xyXG4gIHJlbmRlcjogZnVuY3Rpb24oZmllbGRNZW51LCB4LCB5KVxyXG4gIHtcclxuICAgIHZhciBtYXJrdXAgPSAnPGRpdiBpZD1cImZpZWxkTWVudVwiIHN0eWxlPVwibGVmdDonICsgKHgtMTApICsgJ3B4O3RvcDonICsgKHktMTApICsgJ3B4O1wiPic7XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSB0aGlzLnJlbmRlck1lbnUoZmllbGRNZW51KTtcclxuICAgIFxyXG4gICAgbWFya3VwICs9ICc8L2Rpdj4nO1xyXG4gICAgXHJcbiAgICAkKCdib2R5JykuYXBwZW5kKCQobWFya3VwKSk7XHJcbiAgICAkKCcjZmllbGRNZW51JykubW91c2VsZWF2ZShmdW5jdGlvbigpIHsgJCgnI2ZpZWxkTWVudScpLnJlbW92ZSgpOyB9KTsgIFxyXG4gIH0sXHJcbiAgcmVuZGVyTWVudTogZnVuY3Rpb24obWVudSlcclxuICB7XHJcbiAgICB2YXIgbWFya3VwID0gJzx1bD4nO1xyXG4gICAgXHJcbiAgICBtZW51Lml0ZW1zLmZvckVhY2goZnVuY3Rpb24obWVudUl0ZW0pXHJcbiAgICB7XHJcbiAgICAgIG1hcmt1cCArPSAnPGxpIG9uY2xpY2s9XCJmaWVsZE1lbnVDb250cm9sbGVyLmhhbmRsZUNsaWNrKCcgKyBtZW51SXRlbS5pZCArICcpO1wiPic7XHJcbiAgXHJcbiAgICAgIHZhciBjaGVja01hcmtDbGFzcyA9ICd1bmNoZWNrZWRGaWVsZE1lbnVJdGVtJztcclxuICAgICAgaWYobWVudUl0ZW0uZmllbGQgJiYgbWVudUl0ZW0uY2hlY2tlZClcclxuICAgICAge1xyXG4gICAgICAgIGNoZWNrTWFya0NsYXNzID0gJ2NoZWNrZWRGaWVsZE1lbnVJdGVtJztcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgbWFya3VwICs9ICc8aW1nIGlkPVwiRmllbGRNZW51SXRlbScgKyBtZW51SXRlbS5pZCArICdcIiBzcmM9XCInICsgQ0hFQ0tfTUFSS19JTUFHRV9QQVRIICsgJ1wiIGNsYXNzPVwiJyArIGNoZWNrTWFya0NsYXNzICsgJ1wiLz4nO1xyXG4gICAgICBtYXJrdXAgKz0gbWVudUl0ZW0uZGlzcGxheTtcclxuICAgICAgXHJcbiAgICAgIGlmKG1lbnVJdGVtLml0ZW1zICYmIG1lbnVJdGVtLml0ZW1zLmxlbmd0aCA+IDApXHJcbiAgICAgIHtcclxuICAgICAgICBtYXJrdXAgKz0gJzxkaXYgY2xhc3M9XCJhcnJvd1JpZ2h0XCI+PC9kaXY+JztcclxuICAgICAgICBtYXJrdXAgKz0gZmllbGRNZW51Vmlldy5yZW5kZXJNZW51KG1lbnVJdGVtKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgbWFya3VwICs9ICc8L2xpPic7ICAgICAgXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIG1hcmt1cCArICc8L3VsPic7ICAgIFxyXG4gIH0sXHJcbiAgc2V0Q2hlY2ttYXJrczogZnVuY3Rpb24obWVudUl0ZW1JRCwgc2libGluZ3MpXHJcbiAge1xyXG4gICAgc2libGluZ3MuZm9yRWFjaChmdW5jdGlvbihzaWJsaW5nKSB7ICQoJyNGaWVsZE1lbnVJdGVtJyArIHNpYmxpbmcuaWQpLnJlbW92ZUNsYXNzKCdjaGVja2VkRmllbGRNZW51SXRlbScpLmFkZENsYXNzKCd1bmNoZWNrZWRGaWVsZE1lbnVJdGVtJyk7IH0pOyAgLy9jbGVhciB0aGUgY2hlY2ttYXJrcyBmb3IgYWxsIGl0ZW0gb24gdGhlIHNhbWUgbWVudSBsZXZlbFxyXG4gIFxyXG4gICAgJCgnI0ZpZWxkTWVudUl0ZW0nICsgbWVudUl0ZW1JRCkucmVtb3ZlQ2xhc3MoJ3VuY2hlY2tlZEZpZWxkTWVudUl0ZW0nKS5hZGRDbGFzcygnY2hlY2tlZEZpZWxkTWVudUl0ZW0nKTsgICAgICBcclxuICB9XHJcbn07IiwidmFyIGhlYWRlclZpZXcgPSBcclxue1xyXG4gIHJlbmRlcjogZnVuY3Rpb24ocHJvamVjdHMpXHJcbiAge1xyXG4gICAgY29uc29sZS5sb2coJ3JlbmRlcicpO1xyXG4gICAgdmFyIG1hcmt1cCA9ICc8c2VsZWN0IGlkPVwicHJvamVjdFNlbGVjdG9yXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4nICtcclxuICAgICc8b3B0aW9uIGlkPVwic2VsZWN0UHJvamVjdE9wdGlvblwiIHZhbHVlPVwiMFwiPlNlbGVjdCBQcm9qZWN0Li4uPC9vcHRpb24+JztcclxuICBcclxuICAgIHByb2plY3RzLmZvckVhY2goZnVuY3Rpb24ocHJvamVjdClcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIHByb2plY3QuaWQgKyAnXCI+JyArIHByb2plY3QubmFtZSArICc8L29wdGlvbj4nO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBtYXJrdXAgKz0gJzxvcHRpb24gaWQ9XCJuZXdQcm9qZWN0T3B0aW9uXCIgdmFsdWU9XCItMVwiPkNyZWF0ZSBOZXcgUHJvamVjdC4uLjwvb3B0aW9uPjwvc2VsZWN0PidcclxuICAgICsgJzxpbnB1dCBpZD1cImVkaXROZXdQcm9qZWN0TmFtZUlucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj48L2lucHV0Pic7XHJcbiAgICAvL21hcmt1cCArPSAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGlkPVwic2F2ZS1maWxlLWJ1dHRvblwiIG9uY2xpY2s9XCJzYXZlTG9jYWxseSgpXCI+U2F2ZSBhcyBGaWxlPC9hPic7ICAgIFxyXG4gICAgXHJcbiAgICAgbWFya3VwICs9ICc8YSBocmVmPVwiI1wiIGlkPVwic2F2ZS1kYXRhYmFzZS1idXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiPlNhdmUgdG8gRGF0YWJhc2U8L2E+JztcclxuICAgIFxyXG4gICAgbWFya3VwICs9ICc8c2VsZWN0IGlkPVwidmlld1NlbGVjdG9yXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4nICtcclxuICAgICc8b3B0aW9uIHZhbHVlPVwiMFwiPlNwcmVhZCBTaGVldDwvb3B0aW9uPicgK1xyXG4gICAgJzxvcHRpb24gdmFsdWU9XCIxXCI+VHJlZTwvb3B0aW9uPicgK1xyXG4gICAgJzxvcHRpb24gdmFsdWU9XCIyXCI+V2VpZ2h0ZWQgVHJlZTwvb3B0aW9uPicgK1xyXG4gICAgJzxvcHRpb24gdmFsdWU9XCIzXCI+Q2lyY2xlIFBhY2tpbmc8L29wdGlvbj4nICtcclxuICAgICc8L3NlbGVjdD4nOyBcclxuICAgIFxyXG4gICAgJCgnI2hlYWRlcicpLmh0bWwobWFya3VwKTtcclxuICAgIFxyXG4gICAgJCgnI3ZpZXdTZWxlY3RvcicpLmhpZGUoKTtcclxuICAgICQoJyNzYXZlLWRhdGFiYXNlLWJ1dHRvbicpLmhpZGUoKTtcclxuICAgIFxyXG4gICAgLy9ldmVudCBoYW5kbGVyc1xyXG4gICAgJCgnI3Byb2plY3RTZWxlY3RvcicpLmNoYW5nZShmdW5jdGlvbigpIHsgaGVhZGVyVmlldy5zZWxlY3RQcm9qZWN0KCQodGhpcykpOyB9KTtcclxuICAgICQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLmtleXVwKGZ1bmN0aW9uKGUpIHsgaGVhZGVyVmlldy5jcmVhdGVOZXdQcm9qZWN0KGUpOyB9KTtcclxuICAgICQoJyNzYXZlLWRhdGFiYXNlLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkgeyBobXMub3BlblNhdmVEQkRpYWxvZygpOyB9KTtcclxuICAgICQoJyN2aWV3U2VsZWN0b3InKS5jaGFuZ2UoZnVuY3Rpb24oKSB7IGhtcy5zZWxlY3RWaWV3KCQodGhpcykudmFsKCkpOyB9KTtcclxuICB9LFxyXG4gIHJlZnJlc2g6IGZ1bmN0aW9uKHZlcnNpb25zKVxyXG4gIHtcclxuICAgIGNvbnNvbGUubG9nKCdyZWZyZXNoJyk7XHJcbiAgICAkKCcjdmVyc2lvblNlbGVjdG9yJykucmVtb3ZlKCk7XHJcbiAgICBcclxuICAgIHZhciB2ZXJzaW9uU2VsZWN0b3IgPSAnPHNlbGVjdCBpZD1cInZlcnNpb25TZWxlY3RvclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+JztcclxuICAgIHZlcnNpb25zLmZvckVhY2goZnVuY3Rpb24odmVyc2lvbikgXHJcbiAgICB7IFxyXG4gICAgICB2ZXJzaW9uU2VsZWN0b3IgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgdmVyc2lvbi52ZXJzaW9uICsgJ1wiPicgKyB2ZXJzaW9uLnZlcnNpb24gKyAnPC9vcHRpb24+JzsgICBcclxuICAgIH0pO1xyXG4gICAgdmVyc2lvblNlbGVjdG9yICs9ICc8L3NlbGVjdD4nO1xyXG4gICAgJCgnI2hlYWRlcicpLmFwcGVuZCh2ZXJzaW9uU2VsZWN0b3IpO1xyXG4gICAgXHJcbiAgICAkKCcjdmlld1NlbGVjdG9yJykuc2hvdygpO1xyXG4gICAgJCgnI3NhdmUtZGF0YWJhc2UtYnV0dG9uJykuc2hvdygpO1xyXG4gICAgXHJcbiAgICAkKCcjdmVyc2lvblNlbGVjdG9yJykuY2hhbmdlKGZ1bmN0aW9uKCkgeyBobXMuc2VsZWN0VmVyc2lvbigkKHRoaXMpLnZhbCgpKTsgfSk7ICAgICBcclxuICB9LFxyXG4gIHNlbGVjdGVkVmlldzogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHJldHVybiAkKCcjdmlld1NlbGVjdG9yJykudmFsKCk7XHJcbiAgfSxcclxuICBzZWxlY3RQcm9qZWN0OiBmdW5jdGlvbihwcm9qZWN0U2VsZWN0b3IpXHJcbiAge1xyXG4gICAgaWYocHJvamVjdFNlbGVjdG9yLmZpbmQoXCI6c2VsZWN0ZWRcIikuYXR0cignaWQnKSA9PT0gXCJuZXdQcm9qZWN0T3B0aW9uXCIpXHJcbiAgICB7XHJcbiAgICAgICQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLnZhbChcIlR5cGUgTmV3IFByb2plY3QgTmFtZSBhbmQgUHJlc3MgRW50ZXIgdG8gQ3JlYXRlXCIpO1xyXG4gICAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS5zaG93KCkuZm9jdXMoKS5zZWxlY3QoKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgJCgnI3NlbGVjdFByb2plY3RPcHRpb24nKS5yZW1vdmUoKTsgICAgIC8vcmVtb3ZlIHRoZSBzZWxlY3QgcHJvamVjdCBvcHRpb24sIG9uY2UgdGhlIHVzZXIgc2VsZWN0cyBhIHByb2plY3QgICAgICBcclxuICAgICAgaG1zLm9wZW5Qcm9qZWN0KHByb2plY3RTZWxlY3Rvci52YWwoKSk7XHJcbiAgICB9ICAgICAgIFxyXG4gIH0sXHJcbiAgY3JlYXRlTmV3UHJvamVjdDogZnVuY3Rpb24oZSlcclxuICB7XHJcbiAgICBpZihlLmtleUNvZGUgPT0gRU5URVJfS0VZKVxyXG4gICAge1xyXG4gICAgXHQkKCcjc2VsZWN0UHJvamVjdE9wdGlvbicpLnJlbW92ZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIHRoZSBzZWxlY3QgcHJvamVjdCBvcHRpb24sIG9uY2UgdGhlIHVzZXIgc2VsZWN0cyBhIHByb2plY3QgXHJcbiAgICBcdFxyXG4gICAgXHR2YXIgbmV3UHJvamVjdE5hbWUgPSAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS52YWwoKTtcclxuICAgIFx0JCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0JykuaGlkZSgpO1xyXG4gICAgXHRcclxuICAgIFx0Ly9hZGQgYW4gb3B0aW9uIGZvciB0aGUgbmV3IHByb2plY3QgdG8gdGhlIHByb2plY3RzIGxpc3QsIHNlbGVjdCB0aGF0IG9wdGlvblxyXG4gICAgXHR2YXIgbmV3UHJvamVjdElEID0gaG1zLm5leHRQcm9qZWN0SUQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IG5lZWQgdG8gZ2V0IHRoaXMgZnJvbSB0aGUgZGF0YWJhc2UgdG8gaW5zdXJlIHdlIGdldCB0aGUgY29ycmVjdCBpZFxyXG4gICAgXHR2YXIgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIFx0b3B0aW9uLnRleHQgPSBuZXdQcm9qZWN0TmFtZTtcclxuICAgIFx0b3B0aW9uLnZhbHVlID0gbmV3UHJvamVjdElELnRvU3RyaW5nKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgXHQkKG9wdGlvbikuaW5zZXJ0QmVmb3JlKCcjcHJvamVjdFNlbGVjdG9yIG9wdGlvbjpudGgtY2hpbGQoJyArICQoJyNwcm9qZWN0U2VsZWN0b3InKS5sZW5ndGggKyAnKScpO1xyXG4gICAgXHQkKCcjcHJvamVjdFNlbGVjdG9yJykudmFsKG5ld1Byb2plY3RJRCk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgIGhtcy5jcmVhdGVOZXdQcm9qZWN0KG5ld1Byb2plY3ROYW1lKTtcclxuICAgIH0gICAgXHJcbiAgfVxyXG59OyIsInZhciBwcm9qZWN0QWN0aW9uID1cclxue1xyXG4gIGluaXQ6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKCcjcHJvamVjdC1hY3Rpb24tY29udGFpbmVyJykuaHRtbChwcm9qZWN0QWN0aW9uLm1hcmt1cCgpKTtcclxuICAgIFxyXG4gICAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLmtleXVwKGZ1bmN0aW9uKGUpXHJcbiAgICB7XHJcbiAgICAgIGlmKGUua2V5Q29kZSA9PSBFTlRFUl9LRVkpXHJcbiAgICAgIHtcclxuICAgICAgICBwcm9qZWN0QWN0aW9uLmVudGVyUHJlc3NlZCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTsgXHJcbiAgICBcclxuICAgICQoXCIjcHJvamVjdEFjdGlvblNlbGVjdG9yXCIpLmNoYW5nZShwcm9qZWN0QWN0aW9uLmhhbmRsZSk7XHJcbiAgfSxcclxuICBoYW5kbGU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgXHRpZigkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCkgPT0gJ2FkZEZpZWxkJylcclxuICBcdHtcclxuICAgICAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnZhbChcIlR5cGUgTmV3IEZpZWxkIE5hbWUgYW5kIFByZXNzIEVudGVyIHRvIENyZWF0ZVwiKTtcclxuICBcdFx0JCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnNob3coKS5mb2N1cygpLnNlbGVjdCgpO1xyXG4gIFx0fVx0XHJcbiAgfSxcclxuICBlbnRlclByZXNzZWQ6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgXHRpZigkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCkgPT0gJ2FkZEZpZWxkJylcclxuICBcdHtcclxuICAgICAgc3ByZWFkU2hlZXQuYWRkRmllbGQoJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnZhbCgpKTtcdFxyXG4gICAgICAkKCcjcHJvamVjdEFjdGlvbklucHV0JykuaGlkZSgpO1xyXG4gICAgICAkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCdibGFuaycpO1xyXG4gIFx0fVxyXG4gIH0sXHJcbiAgbWFya3VwOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuICc8ZGl2IGlkPVwicHJvamVjdEFjdGlvblNlbGVjdG9yQ29udGFpbmVyXCI+J1xyXG4gICAgKyAnPHNlbGVjdCBpZD1cInByb2plY3RBY3Rpb25TZWxlY3RvclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+J1xyXG4gICAgKyAnPG9wdGlvbiB2YWx1ZT1cImJsYW5rXCI+PC9vcHRpb24+J1xyXG4gICAgKyAnPG9wdGlvbiB2YWx1ZT1cImFkZEZpZWxkXCI+QWRkIEZpZWxkPC9vcHRpb24+J1xyXG4gICAgKyAnPC9zZWxlY3Q+J1xyXG4gICAgKyAnPGlucHV0IGlkPVwicHJvamVjdEFjdGlvbklucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj48L2lucHV0PidcclxuICAgICsgJzwvZGl2Pic7IFxyXG4gIH1cclxufTsiLCJ2YXIgc2F2ZURCRGlhbG9nID1cclxue1xyXG4gIHJlbmRlcjogZnVuY3Rpb24oYmFzZVZlcnNpb25OdW1iZXIsIGJhc2VWZXJzaW9uTGFiZWwsIGJhc2VWZXJzaW9uRGF0ZSwgbmV3VmVyc2lvbilcclxuICB7XHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nJykucmVtb3ZlKCk7XHJcbiAgICBcclxuICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtb2RhbCBmYWRlXCIgaWQ9XCJzYXZlREJEaWFsb2dcIiByb2xlPVwiZGlhbG9nXCI+PC9kaXY+Jyk7XHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nJykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibW9kYWwtZGlhbG9nXCI+PGRpdiBpZD1cInNhdmVEQkRpYWxvZ0NvbnRlbnRcIiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICQoJyNzYXZlREJEaWFsb2dDb250ZW50JykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCIgc3R5bGU9XCJwYWRkaW5nOjE1cHggMzBweDtcIj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj4mdGltZXM7PC9idXR0b24+PGg0PlNhdmUgUHJvamVjdCBDaGFuZ2VzIHRvIERhdGFiYXNlPC9oND48L2Rpdj4nKTtcclxuICAgIFxyXG4gICAgJCgnI3NhdmVEQkRpYWxvZ0NvbnRlbnQnKS5hcHBlbmQoJzxkaXYgaWQ9XCJzYXZlREJEaWFsb2dCb2R5XCIgY2xhc3M9XCJtb2RhbC1ib2R5XCIgc3R5bGU9XCJwYWRkaW5nOjQwcHggNTBweDtcIj48L2Rpdj4nKTtcclxuICAgICQoJyNzYXZlREJEaWFsb2dCb2R5JykuYXBwZW5kKCc8ZGl2PjxsYWJlbD5CYXNlIFZlcnNpb246ICcgKyBiYXNlVmVyc2lvbk51bWJlciArICcgLSAnICsgYmFzZVZlcnNpb25EYXRlICsgJyAtICcgKyBiYXNlVmVyc2lvbkxhYmVsICsgJzwvbGFiZWw+PC9kaXY+Jyk7XHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nQm9keScpLmFwcGVuZCgnPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6MjBweFwiPjxsYWJlbD5OZXcgVmVyc2lvbjogICcgKyBuZXdWZXJzaW9uICsgJzwvbGFiZWw+PC9kaXY+PGRpdj48L2Rpdj4nKTtcclxuICAgICQoJyNzYXZlREJEaWFsb2dCb2R5JykuYXBwZW5kKCc8ZGl2ID48bGFiZWwgZm9yPVwidmVyc2lvbkxhYmVsXCI+TmV3IFZlcnNpb24gTGFiZWw8L2xhYmVsPicpO1xyXG4gICAgJCgnI3NhdmVEQkRpYWxvZ0JvZHknKS5hcHBlbmQoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJ2ZXJzaW9uTGFiZWxcIj48L2Rpdj4nKTtcclxuICAgICQoJyNzYXZlREJEaWFsb2dCb2R5JykuYXBwZW5kKCc8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDoyMHB4XCI+PGxhYmVsIGZvcj1cInJlYXNvbkZvckNoYW5nZVwiPlJlYXNvbiBmb3IgQ2hhbmdlczwvbGFiZWw+Jyk7XHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nQm9keScpLmFwcGVuZCgnPHRleHRhcmVhIHN0eWxlPVwicmVzaXplOm5vbmVcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHJvd3M9XCI1XCIgaWQ9XCJyZWFzb25Gb3JDaGFuZ2VcIj48L3RleHRhcmVhPjwvZGl2PicpO1xyXG4gICAgXHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nQ29udGVudCcpLmFwcGVuZCgnPGRpdiBpZD1cInNhdmVEQkRpYWxvZ0Zvb3RlclwiIGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+PC9kaXY+Jyk7XHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nRm9vdGVyJykuYXBwZW5kKCc8YnV0dG9uIHN0eWxlPVwibWFyZ2luLWxlZnQ6MTBweFwiIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXIgYnRuLWRlZmF1bHQgcHVsbC1yaWdodFwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCI+Q2FuY2VsPC9idXR0b24+Jyk7XHJcbiAgICAkKCcjc2F2ZURCRGlhbG9nRm9vdGVyJykuYXBwZW5kKCc8YnV0dG9uIGlkPVwic2F2ZURCRGlhbG9nU2F2ZUJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1pbmZvIGJ0bi1kZWZhdWx0IHB1bGwtcmlnaHRcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPlNhdmU8L2J1dHRvbj4nKTtcclxuICAgIFxyXG4gICAgJCgnI3NhdmVEQkRpYWxvZ1NhdmVCdXR0b24nKS5jbGljayhmdW5jdGlvbigpIHsgaG1zLnNhdmVUb0RhdGFiYXNlKCk7IH0pO1xyXG4gICAgJChcIiNzYXZlREJEaWFsb2dcIikubW9kYWwoKTtcclxuICB9XHJcbn07IiwidmFyIHNwcmVhZFNoZWV0S2V5SGFuZGxlciA9XHJcbntcclxuICBjaGVja0tleTogZnVuY3Rpb24oZSkgXHJcbiAge1xyXG4gICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xyXG4gIFxyXG4gICAgaWYgKGUua2V5Q29kZSA9PSBLRVlfVVBfQVJST1cpIFxyXG4gICAge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciBwcmV2Um93ID0gJChzcHJlYWRTaGVldEtleUhhbmRsZXIuZmluZEFuY2VzdG9yKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0cicpKS5wcmV2KClbMF07XHJcbiAgICAgIFxyXG4gICAgICBpZihwcmV2Um93KSB7ICQoJyMnICsgc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmdldE5leHRFbGVtZW50SUQocHJldlJvdykpLmZvY3VzKCk7IH0gICAgICBcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfRE9XTl9BUlJPVykgXHJcbiAgICB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdmFyIG5leHRSb3cgPSAkKHNwcmVhZFNoZWV0S2V5SGFuZGxlci5maW5kQW5jZXN0b3IoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RyJykpLm5leHQoKVswXTtcclxuICAgICAgXHJcbiAgICAgIGlmKG5leHRSb3cpIHsgJCgnIycgKyBzcHJlYWRTaGVldEtleUhhbmRsZXIuZ2V0TmV4dEVsZW1lbnRJRChuZXh0Um93KSkuZm9jdXMoKTsgfSAgICAgICBcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfUklHSFRfQVJST1cpIFxyXG4gICAge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICQoc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmZpbmRBbmNlc3Rvcihkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndGQnKSkubmV4dCgpLmZpbmQoJ2lucHV0JykuZm9jdXMoKTsgIFxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZS5rZXlDb2RlID09IEtFWV9MRUZUX0FSUk9XKSBcclxuICAgIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0S2V5SGFuZGxlci5maW5kQW5jZXN0b3IoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RkJykpLnByZXYoKS5maW5kKCdpbnB1dCcpLmZvY3VzKCk7ICBcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBnZXROZXh0RWxlbWVudElEOiBmdW5jdGlvbihuZXdSb3cpXHJcbiAge1xyXG4gICAgdmFyIGlkID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pZDsgIFxyXG4gICAgaWYoaWQuaW5kZXhPZignbm9kZUlucHV0JykgPiAtMSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuICdub2RlSW5wdXQnICsgbmV3Um93LmlkLnJlcGxhY2UoJ3Jvd2lkJywnJyk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHZhciBjbGFzc2VzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuICBcclxuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgYyA9IGNsYXNzZXNbaV07XHJcbiAgXHJcbiAgICAgICAgaWYoYy5pbmRleE9mKCdmaWVsZElucHV0JykgPiAtMSAmJiBjICE9ICdmaWVsZElucHV0JylcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2YXIgZmllbGROYW1lID0gYy5yZXBsYWNlKCdmaWVsZElucHV0JywgJycpO1xyXG4gICAgICAgICAgcmV0dXJuIGZpZWxkTmFtZSArIG5ld1Jvdy5pZC5yZXBsYWNlKCdkYXRhcm93aWQnLCcnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gICBcclxuICB9LFxyXG4gIGZpbmRBbmNlc3RvcjogZnVuY3Rpb24oZWwsIHRhZ05hbWUpIFxyXG4gIHtcclxuICAgIHRhZ05hbWUgPSB0YWdOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgXHJcbiAgICB3aGlsZSAoZWwgJiYgZWwucGFyZW50Tm9kZSkgXHJcbiAgICB7XHJcbiAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcclxuICAgICAgaWYgKGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSB0YWdOYW1lKSB7IHJldHVybiBlbDsgfVxyXG4gICAgfVxyXG4gIH1cclxufTsiLCIvL1RPRE86IGFkZCBjb21tZW50c1xyXG52YXIgc3ByZWFkU2hlZXRWaWV3ID0gXHJcbntcclxuICByZW5kZXI6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmNoZWNrS2V5KTtcclxuICAgIFxyXG4gICAgJCgnI3NwcmVhZFNoZWV0VmlldycpLnJlbW92ZSgpO1xyXG4gICAgJCgnYm9keScpLmFwcGVuZCh0aGlzLnNwcmVhZFNoZWV0TWFya3VwKCkpO1xyXG4gICAgXHJcbiAgICBwcm9qZWN0QWN0aW9uLmluaXQoKTtcclxuICAgIHRoaXMucmVuZGVyRXhwYW5kZXIoKTtcclxuICAgIHRoaXMucmVuZGVyRmllbGRzUm93KCk7XHJcbiAgICB0aGlzLnJlbmRlckRhdGFUYWJsZSgpO1xyXG4gICAgdGhpcy5yZW5kZXJOb2RlQ29sdW1uKCk7XHJcbiAgfSxcclxuICBkZXN0cm95OiBmdW5jdGlvbigpIFxyXG4gIHsgXHJcbiAgICAkKCcjc3ByZWFkU2hlZXRWaWV3JykucmVtb3ZlKCk7XHJcbiAgICAkKGRvY3VtZW50KS5vZmYoXCJrZXlkb3duXCIpOyBcclxuICB9LFxyXG4gIHNwcmVhZFNoZWV0TWFya3VwOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuICc8ZGl2IGlkPVwic3ByZWFkU2hlZXRWaWV3XCI+JyArXHJcbiAgICAgICc8ZGl2IGlkPVwic3ByZWFkU2hlZXRWaWV3QWN0aW9uc1wiPjxkaXYgaWQ9XCJwcm9qZWN0LWFjdGlvbi1jb250YWluZXJcIj48L2Rpdj48ZGl2IGlkPVwiZXhwYW5kZXJDb250YWluZXJcIj48L2Rpdj48L2Rpdj4nICtcclxuICAgICAgJzxkaXYgaWQ9XCJmaWVsZHMtaGVhZGVyLXJvd1wiPjwvZGl2PicgK1xyXG4gICAgICAnPGRpdiBpZD1cInJlZGlwcy1kcmFnXCI+PC9kaXY+JyArXHJcbiAgICAgICc8ZGl2IGlkPVwiZGF0YS1jb250YWluZXJcIj48L2Rpdj4nICtcclxuICAgICc8L2Rpdj4nO1xyXG4gIH0sXHJcbiAgcmVuZGVyRXhwYW5kZXI6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICBleHBhbmRlclNlbGVjdG9yLmluaXQoc3ByZWFkU2hlZXQudHJlZSgpLm1heERlcHRoKTtcclxuICB9LFxyXG4gIHJlbmRlckZpZWxkc1JvdzogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoJyNmaWVsZHMtaGVhZGVyLXJvdycpLmh0bWwoJzx0YWJsZSBpZD1cImZpZWxkSGVhZGVyVGFibGVcIj48dHIgaWQ9XCJmaWVsZEhlYWRlclJvd1wiPjwvdHI+PC90YWJsZT4nKTtcclxuICBcclxuICAgIHNwcmVhZFNoZWV0LmZpZWxkcygpLmZvckVhY2goZnVuY3Rpb24oZmllbGQpXHJcbiAgICB7IFxyXG4gICAgICAkKCcjZmllbGRIZWFkZXJSb3cnKS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmZpZWxkSGVhZGVyKGZpZWxkLm5hbWUpKTtcclxuICAgICAgJCgnI2ZpZWxkTWVudUJ1dHRvbicgKyBmaWVsZC5uYW1lKS5jbGljayhmdW5jdGlvbihlKSB7IHNwcmVhZFNoZWV0Vmlldy5zaG93RmllbGRNZW51KGUsIGZpZWxkLm5hbWUpOyB9KTtcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgJCgnI2ZpZWxkcy1oZWFkZXItcm93JykuY3NzKCdyaWdodCcsIHNjcm9sbEJhcldpZHRoICsgJ3B4Jyk7ICAgLy9zaG9ydGVuIHRoZSB3aWR0aCBvZiB0aGUgZmllbGRzUm93IGJ5IHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsIGJhciAgIFxyXG4gIH0sXHJcbiAgZmllbGRIZWFkZXI6IGZ1bmN0aW9uKGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICByZXR1cm4gJzx0ZCBjbGFzcz1cImZpZWxkSGVhZGVyQ2VsbFwiPjxkaXYgY2xhc3M9XCJmaWVsZEhlYWRlckNvbnRhaW5lclwiPidcclxuICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vdmVDb2xHcmlwXCI+PC9kaXY+J1xyXG4gICAgICArICc8ZGl2IGNsYXNzPVwiZmllbGROYW1lSW5wdXRDb250YWluZXJcIj48dGV4dGFyZWEgaWQ9XCJjb2xIZWFkZXJJbnB1dCcgKyBmaWVsZE5hbWUgKyAnXCIgY2xhc3M9XCJmaWVsZE5hbWVJbnB1dFwiPicgKyBmaWVsZE5hbWUgKyAnPC90ZXh0YXJlYT48L2Rpdj4nXHJcbiAgICAgICsgJzxkaXYgY2xhc3M9XCJmaWVsZEhlYWRlckJ1dHRvblwiPidcclxuICAgICAgKyAnPGltZyBpZD1cImZpZWxkTWVudUJ1dHRvbicgKyBmaWVsZE5hbWUgKyAnXCIgc3JjPVwiaW1hZ2VzL2Rvd24tYXJyb3cucG5nXCIvPidcclxuICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICArICc8ZGl2IGlkPVwiZ3JpcCcgKyBmaWVsZE5hbWUgKyAnXCIgY2xhc3M9XCJyZXNpemVDb2xHcmlwXCIgb25tb3VzZWRvd249XCJzdGFydFJlc2l6ZShldmVudCwgdGhpcylcIj48L2Rpdj4nXHJcbiAgICAgICsgJzwvZGl2PjwvdGQ+JztcclxuICB9LFxyXG4gIHNob3dGaWVsZE1lbnU6IGZ1bmN0aW9uKGUsIGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICBpZigkKCcjZmllbGRNZW51JykubGVuZ3RoID09PSAwKVxyXG4gICAge1xyXG4gICAgICBmaWVsZE1lbnVDb250cm9sbGVyLmRpc3BsYXlGaWVsZE1lbnUoZmllbGROYW1lLCBlLmNsaWVudFgsIGUuY2xpZW50WSk7XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgcmVuZGVyRGF0YVRhYmxlOiBmdW5jdGlvbigpXHJcbiAgeyAgICBcclxuICAgICQoJyNkYXRhLWNvbnRhaW5lcicpLmFwcGVuZCgnPHRhYmxlIGlkPVwiZGF0YVRhYmxlXCI+PC90YWJsZT4nKTtcclxuICAgIHNwcmVhZFNoZWV0LnRyZWUoKS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSBcclxuICAgIHsgXHJcbiAgICAgICQoJyNkYXRhVGFibGUnKS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmRhdGFSb3dzTWFya3VwKGNoaWxkKSk7IFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbChmdW5jdGlvbigpIFxyXG4gICAge1xyXG4gICAgICAkKCcjcmVkaXBzLWRyYWcnKS5zY3JvbGxUb3AoJCgnI2RhdGEtY29udGFpbmVyJykuc2Nyb2xsVG9wKCkpO1xyXG4gICAgICAkKCcjZmllbGRzLWhlYWRlci1yb3cnKS5zY3JvbGxMZWZ0KCQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbExlZnQoKSk7ICAgICAgXHJcbiAgICB9KTsgICAgIFxyXG4gIH0sXHJcbiAgZGF0YVJvd3NNYXJrdXA6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIG1hcmt1cCA9ICc8dHIgaWQ9XCJkYXRhcm93aWQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cImRhdGFSb3dcIj4nO1xyXG4gICAgXHJcbiAgICBzcHJlYWRTaGVldC5maWVsZHMoKS5mb3JFYWNoKGZ1bmN0aW9uKGZpZWxkKSBcclxuICAgIHsgIFxyXG4gICAgICBtYXJrdXAgKz0gJzx0ZCBjbGFzcz1cImNlbGxcIj4nXHJcbiAgICAgICAgICAgICArICc8aW5wdXQgY2xhc3M9XCJmaWVsZElucHV0IGZpZWxkSW5wdXQnICsgZmllbGQubmFtZSArICdcIiB0eXBlPVwidGV4dFwiIGlkPVwiJyArIGZpZWxkLm5hbWUgKyBub2RlLmlkICsgJ1wiIHZhbHVlPVwiJyArIHNwcmVhZFNoZWV0LmZvcm1hdHRlZFZhbHVlKGZpZWxkLCBub2RlKSArICdcIiAnXHJcbiAgICAgICAgICAgICArICdvbmlucHV0PVwic3ByZWFkU2hlZXQudXBkYXRlRmllbGRWYWx1ZShcXCcnICsgZmllbGQubmFtZSArICdcXCcsJyArIG5vZGUuaWQgKyAnKVwiIG9uZm9jdXM9XCIkKHRoaXMpLnZhbChzcHJlYWRTaGVldC5yYXdWYWx1ZShcXCcnICsgZmllbGQubmFtZSArICdcXCcsJyArIG5vZGUuaWQgKyAnKSlcIj4nXHJcbiAgICAgICAgICAgICArICc8L3RkPic7XHJcbiAgICB9KTtcclxuXHJcbiAgICBub2RlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHsgbWFya3VwICs9IHNwcmVhZFNoZWV0Vmlldy5kYXRhUm93c01hcmt1cChjaGlsZCk7IH0pOyAgIFxyXG5cclxuICAgIHJldHVybiBtYXJrdXAgKyAnPC90cj4nO1xyXG4gIH0sXHJcbiAgcmVuZGVyRGF0YUNlbGw6IGZ1bmN0aW9uKHJvdywgZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG4gIHtcclxuICAgICQocm93KS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmZpZWxkQ2VsbChmaWVsZE5hbWUsIG5vZGVJRCwgdmFsdWUpKTtcclxuICAgICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS5vbignaW5wdXQnLCBmdW5jdGlvbigpIHsgc3ByZWFkU2hlZXQudXBkYXRlRmllbGRWYWx1ZShmaWVsZE5hbWUsIG5vZGVJRCk7IH0pO1xyXG4gICAgJCgnIycgKyBmaWVsZE5hbWUgKyBub2RlSUQpLmZvY3VzKGZ1bmN0aW9uKCkgeyAkKHRoaXMpLnZhbChzcHJlYWRTaGVldC5yYXdWYWx1ZShmaWVsZE5hbWUsIG5vZGVJRCkpOyB9KTsgICAgIFxyXG4gIH0sXHJcbiAgZmllbGRDZWxsOiBmdW5jdGlvbihmaWVsZE5hbWUsIG5vZGVJRCwgdmFsdWUpXHJcbiAge1xyXG4gICAgcmV0dXJuICc8dGQgY2xhc3M9XCJjZWxsXCI+PGlucHV0IGNsYXNzPVwiZmllbGRJbnB1dCBmaWVsZElucHV0JyArIGZpZWxkTmFtZSArICdcIiB0eXBlPVwidGV4dFwiIGlkPVwiJyArIGZpZWxkTmFtZSArIG5vZGVJRCArICdcIiB2YWx1ZT1cIicgKyB2YWx1ZSArICdcIj48L3RkPic7XHJcbiAgfSxcclxuICBub2RlUm93TWFya3VwOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBtYXJrdXAgPSAnPHRyIGlkPVwicm93aWQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cIm5vZGVSb3dcIj48dGQgY2xhc3M9XCJyZWRpcHMtcm93aGFuZGxlciBjZWxsXCI+PGRpdiBpZD1cIm5vZGVDb250ZW50JyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJub2RlLWNvbnRhaW5lclwiPic7XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcuZGVsZXRlQnV0dG9uKG5vZGUuaWQpICsgc3ByZWFkU2hlZXRWaWV3LmNvcHlCdXR0b24obm9kZS5pZCkgKyBzcHJlYWRTaGVldFZpZXcuZHJhZ0hhbmRsZTtcclxuICAgIG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcubm9kZUNvbnRlbnQobm9kZSk7ICAgIFxyXG4gIFxyXG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7IG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcubm9kZVJvd01hcmt1cChjaGlsZCk7IH0pO1xyXG4gIFxyXG4gICAgcmV0dXJuIG1hcmt1cCArICc8L2Rpdj48L3RkPjwvdHI+JztcclxuICB9LFxyXG4gIG5vZGVDb250ZW50OiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBpY29uTWFya3VwO1xyXG4gICAgdmFyIGRlcHRoQWRqdXN0bWVudCA9IChub2RlLmRlcHRoLTEpICogMTA7XHJcbiAgICB2YXIgd2lkdGhBZGp1c3RtZW50ID0gZGVwdGhBZGp1c3RtZW50OyAgIFxyXG4gIFxyXG4gICAgaWYoc3ByZWFkU2hlZXQuaGFzQ2hpbGRyZW4obm9kZSkpXHJcbiAgICB7XHJcbiAgICAgIGlmKHNwcmVhZFNoZWV0LmNoaWxkcmVuSGlkZGVuKG5vZGUpKSB7IGljb25NYXJrdXAgPSAnPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L3NwYW4+JzsgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpY29uTWFya3VwID0gJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd25cIj48L3NwYW4+JzsgfVxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBpY29uTWFya3VwID0gJzxzcGFuPjwvc3Bhbj4nO1xyXG4gICAgICBkZXB0aEFkanVzdG1lbnQgKz0gMTI7XHJcbiAgICAgIHdpZHRoQWRqdXN0bWVudCAtPSAxMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHNwcmVhZFNoZWV0Vmlldy5leHBhbmRJY29uKG5vZGUuaWQsIGRlcHRoQWRqdXN0bWVudCwgaWNvbk1hcmt1cCkgKyBzcHJlYWRTaGVldFZpZXcubm9kZUlucHV0KG5vZGUsIERFRkFVTFRfTk9ERV9JTlBVVF9XSURUSC13aWR0aEFkanVzdG1lbnQpOyAgICAgXHJcbiAgfSxcclxuICByZW5kZXJOb2RlQ29sdW1uOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI3JlZGlwcy1kcmFnJykuaHRtbCgnPHRhYmxlIGlkPVwidHJlZVRhYmxlXCI+PC90YWJsZT4nKTtcclxuICAgIHNwcmVhZFNoZWV0LnRyZWUoKS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSBcclxuICAgIHsgXHJcbiAgICAgICAkKCcjdHJlZVRhYmxlJykuYXBwZW5kKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKGNoaWxkKSk7XHJcbiAgICB9KTtcclxuICAgICQoJyNyZWRpcHMtZHJhZycpLmNzcygnYm90dG9tJywgc2Nyb2xsQmFyV2lkdGggKyAncHgnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zaG9ydGVuIHRoZSBoZWlnaHQgb2YgdGhlIHRyZWUgc2VjdGlvbiBieSB0aGUgd2lkdGggb2YgdGhlIHNjcm9sbCBiYXJcclxuICBcdHJlZGlwcy5pbml0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pbml0aWFsaXplIHRyZWUgZHJhZy9kcm9wIGxpYnJhcnkgICAgXHJcbiAgfSxcclxuICBkcmFnSGFuZGxlOiAnPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHB1bGwtcmlnaHRcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tbW92ZVwiPjwvaT48L2Rpdj4nLFxyXG4gIGNvcHlCdXR0b246IGZ1bmN0aW9uKG5vZGVJRCkgeyByZXR1cm4gJzxhIGhyZWY9XCIjXCIgIGNsYXNzPVwicHVsbC1yaWdodCBidG4gYnRuLWluZm8gYnRuLXhzIGNvcHktYnV0dG9uXCIgb25jbGljaz1cInNwcmVhZFNoZWV0LmNvcHlOb2RlKCcgKyBub2RlSUQgKyAnKVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzXCI+PC9pPjwvYT4nIH0sXHJcbiAgZGVsZXRlQnV0dG9uOiBmdW5jdGlvbihub2RlSUQpIHsgcmV0dXJuICc8YSBocmVmPVwiI1wiIGNsYXNzPVwicHVsbC1yaWdodCBidG4gYnRuLWRhbmdlciBidG4teHMgZGVsZXRlLWJ1dHRvblwiIG9uY2xpY2s9XCJzcHJlYWRTaGVldC5kZWxldGVOb2RlKCcgKyBub2RlSUQgKyAnKVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L2k+PC9hPicgfSxcclxuICBleHBhbmRJY29uOiBmdW5jdGlvbihub2RlSUQsIGRlcHRoQWRqdXN0bWVudCwgaWNvbk1hcmt1cCkgXHJcbiAgeyBcclxuICAgIHJldHVybiAnPGEgaHJlZj1cIiNcIiBpZD1cImljb24nICsgbm9kZUlEICsgJ1wiIGNsYXNzPVwiYnRuIGJ0bi14c1wiIHN0eWxlPVwibWFyZ2luLWxlZnQ6JyArIGRlcHRoQWRqdXN0bWVudCArICdweFwiICdcclxuICAgICAgICAgKyAnb25jbGljaz1cInNwcmVhZFNoZWV0LnRvZ2dsZU5vZGUoJyArIG5vZGVJRCArICcpXCI+JyArIGljb25NYXJrdXAgKyAnPC9hPic7IFxyXG4gIH0sXHJcbiAgbm9kZUlucHV0OiBmdW5jdGlvbihub2RlLCB3aWR0aClcclxuICB7IFxyXG4gICAgcmV0dXJuICc8aW5wdXQgaWQ9XCJub2RlSW5wdXQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cIm5vZGVUZXh0SW5wdXRcIiBzdHlsZT1cIndpZHRoOicgKyB3aWR0aCArICdweFwiIHR5cGU9XCJ0ZXh0XCIgJ1xyXG4gICAgICAgICArICd2YWx1ZT1cIicgKyBub2RlLm5hbWUgKyAnXCIgb25pbnB1dD1cInNwcmVhZFNoZWV0Vmlldy51cGRhdGVOb2RlTmFtZSgnICsgbm9kZS5pZCArICcpXCIvPic7IFxyXG4gIH0sXHJcbiAgZXhwYW5kTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICB2YXIgY2hpbGQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIGRlc2NlbmRhbnQgbm9kZSByb3dzIHRvIHRoZSBET01cclxuICAgIGZvcih2YXIgaSA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcHJlc2VydmUgdGhlIG5vZGUgb3JkZXJpbmdcclxuICAgIHtcclxuICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0Vmlldy5kYXRhUm93c01hcmt1cChjaGlsZCkpLmluc2VydEFmdGVyKCQoJyNkYXRhcm93aWQnICsgbm9kZS5pZCkpO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKGNoaWxkKSkuaW5zZXJ0QWZ0ZXIoJCgnI3Jvd2lkJyArIG5vZGUuaWQpKTtcclxuICAgIH0gICAgIFxyXG5cclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgIFxyXG4gIH0sXHJcbiAgcmVkcmF3Tm9kZUNvbnRlbnQ6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgJCgnI2ljb24nICsgbm9kZS5pZCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjbm9kZUlucHV0JyArIG5vZGUuaWQpLnJlbW92ZSgpO1xyXG4gICAgJCgnI25vZGVDb250ZW50JyArIG5vZGUuaWQpLmFwcGVuZChzcHJlYWRTaGVldFZpZXcubm9kZUNvbnRlbnQobm9kZSkpOyAgICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgICQoJyNmaWVsZEhlYWRlclJvdycpLmFwcGVuZChzcHJlYWRTaGVldFZpZXcuZmllbGRIZWFkZXIoZmllbGROYW1lKSk7XHJcbiAgICAkKCcjZmllbGRNZW51QnV0dG9uJyArIGZpZWxkTmFtZSkuY2xpY2soZnVuY3Rpb24oZSkgeyBzcHJlYWRTaGVldFZpZXcuc2hvd0ZpZWxkTWVudShlLCBmaWVsZE5hbWUpOyB9KTtcclxuICAgICQoJy5kYXRhUm93JykuZWFjaChmdW5jdGlvbihpLCBpdGVtKSB7IHNwcmVhZFNoZWV0Vmlldy5yZW5kZXJEYXRhQ2VsbChpdGVtLCBmaWVsZE5hbWUsIHBhcnNlSW50KGl0ZW0uaWQucmVwbGFjZSgnZGF0YXJvd2lkJywgJycpKSwgJycpOyB9KTsgICAgICAgIFxyXG4gIH0sXHJcbiAgdXBkYXRlTm9kZU5hbWU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgdmFsdWUgPSAkKCcjbm9kZUlucHV0JyArIG5vZGVJRCkudmFsKCk7XHJcbiAgICBzcHJlYWRTaGVldC51cGRhdGVOb2RlTmFtZShub2RlSUQsIHZhbHVlKTtcclxuICAgICQoJyNub2RlSW5wdXQnICsgbm9kZUlEKS5hdHRyKCd2YWx1ZScsIHZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBpbiB0aGUgRE9NLCBzbyB0aGF0IHdoZW4gd2UgZHJhZy9tb3ZlIHRoZSByb3csIHRoZSB2YWx1ZSBpcyBjb3JyZWN0ICAgIFxyXG4gIH0sXHJcbiAgcmVtb3ZlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICAkKCcjcm93aWQnICsgbm9kZS5pZCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjZGF0YXJvd2lkJyArIG5vZGUuaWQpLnJlbW92ZSgpOyAgICAgXHJcbiAgfSxcclxuICBpbnNlcnROb2RlQmVmb3JlOiBmdW5jdGlvbihub2RlLCBpbnNlcnRCZWZvcmVOb2RlKVxyXG4gIHtcclxuICAgICQoc3ByZWFkU2hlZXRWaWV3Lm5vZGVSb3dNYXJrdXAobm9kZSkpLmluc2VydEJlZm9yZSgkKCcjcm93aWQnICsgaW5zZXJ0QmVmb3JlTm9kZS5pZCkpOyAgICAgIC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgICQoc3ByZWFkU2hlZXRWaWV3LmRhdGFSb3dzTWFya3VwKG5vZGUpKS5pbnNlcnRCZWZvcmUoJCgnI2RhdGFyb3dpZCcgKyBpbnNlcnRCZWZvcmVOb2RlLmlkKSk7IC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgXHJcbiAgfSxcclxuICBpbnNlcnROb2RlQWZ0ZXI6IGZ1bmN0aW9uKG5vZGUsIGluc2VydEFmdGVyTm9kZSlcclxuICB7XHJcbiAgICAkKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKG5vZGUpKS5pbnNlcnRBZnRlcigkKCcjcm93aWQnICsgaW5zZXJ0QWZ0ZXJOb2RlLmlkKSk7ICAgICAgLy9pbnNlcnQgdGhlIG5ldyByb3dzIGJlZm9yZSB0aGUgc291cmNlIHJvd1xyXG4gICAgJChzcHJlYWRTaGVldFZpZXcuZGF0YVJvd3NNYXJrdXAobm9kZSkpLmluc2VydEFmdGVyKCQoJyNkYXRhcm93aWQnICsgaW5zZXJ0QWZ0ZXJOb2RlLmlkKSk7IC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgXHJcbiAgfSxcclxuICBlbmFibGVEcmFnZ2luZzogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBSRURJUFMuZHJhZy5lbmFibGVEaXZzKCdpbml0JywgJCgnI3Jvd2lkJyArIG5vZGUuaWQpLmZpbmQoJ2RpdicpKTsgICAgICAgXHJcbiAgfSxcclxuICBnZXRGaWVsZFZhbHVlOiBmdW5jdGlvbihmaWVsZE5hbWUsIG5vZGVJRClcclxuICB7XHJcbiAgICByZXR1cm4gJCgnIycgKyBmaWVsZE5hbWUgKyBub2RlSUQpLnZhbCgpO1xyXG4gIH0sXHJcbiAgdXBkYXRlRmllbGRWYWx1ZTogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG4gIHtcclxuICAgICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS52YWwodmFsdWUpO1xyXG4gIH1cclxufTsiLCJ2YXIgTUlOX05PREVfU0laRSA9IDU7XHJcbnZhciBNQVhfTk9ERV9TSVpFID0gMTAwO1xyXG5cclxudmFyIFZFUlRJQ0FMX1ZJRVcgPSAwO1xyXG52YXIgSE9SSVpPTlRBTF9WSUVXID0gMTtcclxuXHJcbi8vVE9ETzogcmVmYWN0b3IsIHJlbW92ZSByZWZlcmVuY2VzIHRvIHByb2plY3QgYW5kIHB1dCB0aGVtIGluIHRoZSB0cmVlIGNvbnRyb2xsZXIgZmlsZVxyXG52YXIgdHJlZVZpZXcgPSBcclxue1xyXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKCcjdHJlZVZpZXcnKS5yZW1vdmUoKTtcclxuICB9LFxyXG4gIHJlZnJlc2g6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB0cmVlVmlldy51cGRhdGUodHJlZVZpZXcucm9vdCk7XHJcbiAgfSxcclxuICByb3RhdGU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICBpZih0cmVlVmlldy5kaXJlY3Rpb24gPT09IEhPUklaT05UQUxfVklFVylcclxuICAgIHtcclxuICAgICAgdHJlZVZpZXcuZGlyZWN0aW9uID0gVkVSVElDQUxfVklFVztcclxuICAgICAgdHJlZVZpZXcuaG9yaXpvbnRhbF9zcGFjaW5nID0gMTAwO1xyXG4gICAgICB0cmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nID0gNjA7XHJcbiAgICAgIHRyZWVWaWV3LmRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKCkucHJvamVjdGlvbihmdW5jdGlvbihkKSB7IHJldHVybiBbZC54LCBkLnldOyB9KTsgIC8vIGRlZmluZSBhIGQzIGRpYWdvbmFsIHByb2plY3Rpb24gZm9yIHVzZSBieSB0aGUgbm9kZSBwYXRocyBsYXRlciBvbi5cclxuICAgICAgXHJcbiAgICAgIHRyZWVWaWV3LnJvb3QueTAgPSB0cmVlVmlldy52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgICB0cmVlVmlldy5yb290LngwID0gMDsgICAgICBcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgdHJlZVZpZXcuZGlyZWN0aW9uID0gSE9SSVpPTlRBTF9WSUVXO1xyXG4gICAgICB0cmVlVmlldy5ob3Jpem9udGFsX3NwYWNpbmcgPSAxNTA7XHJcbiAgICAgIHRyZWVWaWV3LnZlcnRpY2FsX3NwYWNpbmcgPSAyNTtcclxuICAgICAgdHJlZVZpZXcuZGlhZ29uYWwgPSBkMy5zdmcuZGlhZ29uYWwoKS5wcm9qZWN0aW9uKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFtkLnksIGQueF07IH0pOyAgLy8gZGVmaW5lIGEgZDMgZGlhZ29uYWwgcHJvamVjdGlvbiBmb3IgdXNlIGJ5IHRoZSBub2RlIHBhdGhzIGxhdGVyIG9uLlxyXG4gICAgICBcclxuICAgICAgdHJlZVZpZXcucm9vdC54MCA9IHRyZWVWaWV3LnZpZXdlckhlaWdodCAvIDI7XHJcbiAgICAgIHRyZWVWaWV3LnJvb3QueTAgPSAwOyAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgdHJlZVZpZXcudXBkYXRlKHRyZWVWaWV3LnJvb3QpO1xyXG4gIH0sXHJcbiAgaW5pdDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHRyZWVWaWV3LmRpcmVjdGlvbiA9IEhPUklaT05UQUxfVklFVztcclxuICAgIHRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICB0cmVlVmlldy5kcmFnZ2luZ05vZGUgPSBudWxsO1xyXG4gICAgdHJlZVZpZXcuZHVyYXRpb24gPSA3NTA7XHJcbiAgICB0cmVlVmlldy5ob3Jpem9udGFsX3NwYWNpbmcgPSAxNTA7XHJcbiAgICB0cmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nID0gMjU7ICAgIFxyXG4gICAgXHJcbiAgICB0cmVlVmlldy5tYXhMYWJlbExlbmd0aCA9IDA7XHJcbiAgICBcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgZnVuY3Rpb24oZClcclxuICAgIHtcclxuICAgICAgdHJlZVZpZXcubWF4TGFiZWxMZW5ndGggPSBNYXRoLm1heChkLm5hbWUubGVuZ3RoLCB0cmVlVmlldy5tYXhMYWJlbExlbmd0aCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdHJlZVZpZXcudmlld2VyV2lkdGggPSAkKCcjdHJlZS1jb250YWluZXInKS53aWR0aCgpO1xyXG4gICAgdHJlZVZpZXcudmlld2VySGVpZ2h0ID0gJCgnI3RyZWUtY29udGFpbmVyJykuaGVpZ2h0KCk7XHJcbiAgICBcclxuICAgIHRyZWVWaWV3LnRyZWUgPSBkMy5sYXlvdXQudHJlZSgpLnNpemUoW3RyZWVWaWV3LnZpZXdlckhlaWdodCwgdHJlZVZpZXcudmlld2VyV2lkdGhdKTtcclxuICAgIHRyZWVWaWV3LnJvb3QgPSBwcm9qZWN0LnRyZWU7XHJcbiAgICBcclxuICAgIHRyZWVWaWV3LmRyYWdTdGFydGVkID0gbnVsbDtcclxuICAgIHRyZWVWaWV3LmRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKCkucHJvamVjdGlvbihmdW5jdGlvbihkKSB7IHJldHVybiBbZC55LCBkLnhdOyB9KTsgIC8vIGRlZmluZSBhIGQzIGRpYWdvbmFsIHByb2plY3Rpb24gZm9yIHVzZSBieSB0aGUgbm9kZSBwYXRocyBsYXRlciBvbi4gICAgICAgICAgICAgICAgXHJcbiAgfSwgIFxyXG4gIHJlbmRlcjogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHRyZWVWaWV3LmRlc3Ryb3koKTtcclxuICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJ0cmVlVmlld1wiPjxkaXYgaWQ9XCJ0cmVlVmlld09wdGlvbnNcIj48ZGl2IGlkPVwiZXhwYW5kZXJDb250YWluZXJcIj48L2Rpdj48L2Rpdj48ZGl2IGlkPVwidHJlZS1jb250YWluZXJcIj48L2Rpdj48L2Rpdj4nKTtcclxuIFxyXG4gICAgZXhwYW5kZXJTZWxlY3Rvci5pbml0KHByb2plY3QudHJlZS5tYXhEZXB0aCk7XHJcbiAgICAkKCcjdHJlZVZpZXdPcHRpb25zJykuYXBwZW5kKCc8YSBocmVmPVwiI1wiIGlkPVwidHJlZVZpZXdSb3RhdGVCdXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBwdWxsLXJpZ2h0XCI+Um90YXRlIFZpZXc8L2E+Jyk7XHJcbiAgICAkKCcjdHJlZVZpZXdSb3RhdGVCdXR0b24nKS5jbGljayhmdW5jdGlvbigpIHsgdHJlZVZpZXcucm90YXRlKCk7IH0pOyAgXHJcbiBcclxuICAgIHRyZWVWaWV3LmluaXQoKTtcclxuXHJcbiAgICBmdW5jdGlvbiB6b29tKCkgeyB0cmVlVmlldy5zdmdHcm91cC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpc2NhbGUoXCIgKyBkMy5ldmVudC5zY2FsZSArIFwiKVwiKTsgfSAgIC8vIERlZmluZSB0aGUgem9vbSBmdW5jdGlvbiBmb3IgdGhlIHpvb21hYmxlIHRyZWVcclxuICBcclxuICAgIHRyZWVWaWV3Lnpvb21MaXN0ZW5lciA9IGQzLmJlaGF2aW9yLnpvb20oKS5zY2FsZUV4dGVudChbMC4xLCAzXSkub24oXCJ6b29tXCIsIHpvb20pOyAgICAgLy8gZGVmaW5lIHRoZSB0cmVlVmlldy56b29tTGlzdGVuZXIgd2hpY2ggY2FsbHMgdGhlIHpvb20gZnVuY3Rpb24gb24gdGhlIFwiem9vbVwiIGV2ZW50IGNvbnN0cmFpbmVkIHdpdGhpbiB0aGUgc2NhbGVFeHRlbnRzXHJcbiAgXHJcbiAgICBmdW5jdGlvbiBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSkgXHJcbiAgICB7XHJcbiAgICAgIHRyZWVWaWV3LmRyYWdnaW5nTm9kZSA9IGQ7XHJcbiAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJy5naG9zdENpcmNsZScpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuICAgICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZSBzaG93Jyk7XHJcbiAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5hdHRyKCdjbGFzcycsICdub2RlIGFjdGl2ZURyYWcnKTtcclxuXHJcbiAgICAgIHRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKS5zb3J0KGZ1bmN0aW9uKGEsIGIpICAgIC8vIHNlbGVjdCB0aGUgcGFyZW50IGFuZCBzb3J0IHRoZSBwYXRoJ3NcclxuICAgICAgeyBcclxuICAgICAgICBpZiAoYS5pZCAhPSB0cmVlVmlldy5kcmFnZ2luZ05vZGUuaWQpIHJldHVybiAxOyAgICAgICAgICAvLyBhIGlzIG5vdCB0aGUgaG92ZXJlZCBlbGVtZW50LCBzZW5kIFwiYVwiIHRvIHRoZSBiYWNrXHJcbiAgICAgICAgZWxzZSByZXR1cm4gLTE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBpcyB0aGUgaG92ZXJlZCBlbGVtZW50LCBicmluZyBcImFcIiB0byB0aGUgZnJvbnRcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIGlmIG5vZGVzIGhhcyBjaGlsZHJlbiwgcmVtb3ZlIHRoZSBsaW5rcyBhbmQgbm9kZXNcclxuICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEpIFxyXG4gICAgICB7XHJcbiAgICAgICAgLy8gcmVtb3ZlIGxpbmsgcGF0aHNcclxuICAgICAgICBsaW5rcyA9IHRyZWVWaWV3LnRyZWUubGlua3Mobm9kZXMpO1xyXG4gICAgICAgIG5vZGVQYXRocyA9IHRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcInBhdGgubGlua1wiKS5kYXRhKGxpbmtzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC5pZDsgfSkucmVtb3ZlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVtb3ZlIGNoaWxkIG5vZGVzXHJcbiAgICAgICAgbm9kZXNFeGl0ID0gdHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpLmRhdGEobm9kZXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuaWQ7IH0pLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkLmlkICE9IHRyZWVWaWV3LmRyYWdnaW5nTm9kZS5pZDsgfSkucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgLy8gcmVtb3ZlIHBhcmVudCBsaW5rXHJcbiAgICAgIHBhcmVudExpbmsgPSB0cmVlVmlldy50cmVlLmxpbmtzKHRyZWVWaWV3LnRyZWUubm9kZXModHJlZVZpZXcuZHJhZ2dpbmdOb2RlLnBhcmVudCkpO1xyXG4gICAgICB0cmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoJ3BhdGgubGluaycpLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkLnRhcmdldC5pZCA9PSB0cmVlVmlldy5kcmFnZ2luZ05vZGUuaWQ7IH0pLnJlbW92ZSgpO1xyXG5cclxuICAgICAgdHJlZVZpZXcuZHJhZ1N0YXJ0ZWQgPSBudWxsO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gZGVmaW5lIHRoZSBiYXNlU3ZnLCBhdHRhY2hpbmcgYSBjbGFzcyBmb3Igc3R5bGluZyBhbmQgdGhlIHRyZWVWaWV3Lnpvb21MaXN0ZW5lclxyXG4gICAgdmFyIGJhc2VTdmcgPSBkMy5zZWxlY3QoXCIjdHJlZS1jb250YWluZXJcIikuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgdHJlZVZpZXcudmlld2VyV2lkdGgpXHJcbiAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHRyZWVWaWV3LnZpZXdlckhlaWdodClcclxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm92ZXJsYXlcIilcclxuICAgICAgLmNhbGwodHJlZVZpZXcuem9vbUxpc3RlbmVyKTtcclxuICBcclxuICAgIGRyYWdMaXN0ZW5lciA9IGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCB0cmVlVmlldy5kcmFnc3RhcnQpLm9uKFwiZHJhZ1wiLCBkcmFnKS5vbihcImRyYWdlbmRcIiwgdHJlZVZpZXcuZHJhZ2VuZCk7ICAvLyBEZWZpbmUgdGhlIGRyYWcgbGlzdGVuZXJzIGZvciBkcmFnL2Ryb3AgYmVoYXZpb3VyIG9mIG5vZGVzLlxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBkcmFnKGQpXHJcbiAgICB7XHJcbiAgICAgIGlmIChkID09IHRyZWVWaWV3LnJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAodHJlZVZpZXcuZHJhZ1N0YXJ0ZWQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgZG9tTm9kZSA9IHRoaXM7XHJcbiAgICAgICAgaW5pdGlhdGVEcmFnKGQsIGRvbU5vZGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkLngwICs9IGQzLmV2ZW50LmR5O1xyXG4gICAgICBkLnkwICs9IGQzLmV2ZW50LmR4O1xyXG4gICAgICBkMy5zZWxlY3QodGhpcykuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQueTAgKyBcIixcIiArIGQueDAgKyBcIilcIik7XHJcbiAgICAgIHRyZWVWaWV3LnVwZGF0ZVRlbXBDb25uZWN0b3IoKTsgICAgICBcclxuICAgIH1cclxuICBcclxuICAgIC8vIEFwcGVuZCBhIGdyb3VwIHdoaWNoIGhvbGRzIGFsbCBub2RlcyBhbmQgd2hpY2ggdGhlIHpvb20gTGlzdGVuZXIgY2FuIGFjdCB1cG9uLlxyXG4gICAgdHJlZVZpZXcuc3ZnR3JvdXAgPSBiYXNlU3ZnLmFwcGVuZChcImdcIik7XHJcbiAgXHJcbiAgICAvLyBEZWZpbmUgdGhlIHJvb3RcclxuICAgIHRyZWVWaWV3LnJvb3QueDAgPSB0cmVlVmlldy52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgdHJlZVZpZXcucm9vdC55MCA9IDA7XHJcbiAgICBcclxuICAgIC8vIExheW91dCB0aGUgdHJlZSBpbml0aWFsbHkgYW5kIGNlbnRlciBvbiB0aGUgcm9vdCBub2RlLlxyXG4gICAgdHJlZVZpZXcudXBkYXRlKHRyZWVWaWV3LnJvb3QpO1xyXG4gICAgdHJlZVZpZXcuY2VudGVyTm9kZSh0cmVlVmlldy5yb290KTsgICAgXHJcbiAgfSxcclxuICBjbGljazogZnVuY3Rpb24oZCkgICAvLyBUb2dnbGUgY2hpbGRyZW4gb24gY2xpY2suXHJcbiAge1xyXG4gICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHsgcmV0dXJuOyB9IC8vIGNsaWNrIHN1cHByZXNzZWRcclxuICAgIHByb2plY3QudG9nZ2xlRXhwYW5zaW9uKGQpO1xyXG4gICAgdHJlZVZpZXcudXBkYXRlKGQpO1xyXG4gIH0sICBcclxuICB1cGRhdGU6IGZ1bmN0aW9uKHNvdXJjZSkgXHJcbiAgeyBcclxuICAgIHZhciBpID0gMDtcclxuICAgICAgICBcclxuICAgIC8vIENvbXB1dGUgdGhlIG5ldyBoZWlnaHQsIGZ1bmN0aW9uIGNvdW50cyB0b3RhbCBjaGlsZHJlbiBvZiByb290IG5vZGUgYW5kIHNldHMgdHJlZSBoZWlnaHQgYWNjb3JkaW5nbHkuXHJcbiAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBsYXlvdXQgbG9va2luZyBzcXVhc2hlZCB3aGVuIG5ldyBub2RlcyBhcmUgbWFkZSB2aXNpYmxlIG9yIGxvb2tpbmcgc3BhcnNlIHdoZW4gbm9kZXMgYXJlIHJlbW92ZWRcclxuICAgIC8vIFRoaXMgbWFrZXMgdGhlIGxheW91dCBtb3JlIGNvbnNpc3RlbnQuXHJcbiAgICB2YXIgbGV2ZWxXaWR0aCA9IFsxXTtcclxuICAgIHZhciBjaGlsZENvdW50ID0gZnVuY3Rpb24obGV2ZWwsIG4pIFxyXG4gICAge1xyXG4gICAgICBpZiAobi5jaGlsZHJlbiAmJiBuLmNoaWxkcmVuLmxlbmd0aCA+IDApIFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGxldmVsV2lkdGgubGVuZ3RoIDw9IGxldmVsICsgMSkgeyBsZXZlbFdpZHRoLnB1c2goMCk7IH1cclxuXHJcbiAgICAgICAgbGV2ZWxXaWR0aFtsZXZlbCArIDFdICs9IG4uY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICAgIG4uY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihkKSB7IGNoaWxkQ291bnQobGV2ZWwgKyAxLCBkKTsgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNoaWxkQ291bnQoMCwgdHJlZVZpZXcucm9vdCk7XHJcbiAgICB2YXIgbmV3SGVpZ2h0ID0gZDMubWF4KGxldmVsV2lkdGgpICogdHJlZVZpZXcudmVydGljYWxfc3BhY2luZzsgLy8gMjUgcGl4ZWxzIHBlciBsaW5lXHJcbiAgICB0cmVlVmlldy50cmVlID0gdHJlZVZpZXcudHJlZS5zaXplKFtuZXdIZWlnaHQsIHRyZWVWaWV3LnZpZXdlcldpZHRoXSk7XHJcblxyXG4gICAgLy8gQ29tcHV0ZSB0aGUgbmV3IHRyZWUgbGF5b3V0LlxyXG4gICAgdmFyIG5vZGVzID0gdHJlZVZpZXcudHJlZS5ub2Rlcyh0cmVlVmlldy5yb290KS5yZXZlcnNlKCk7XHJcbiAgICB2YXIgbGlua3MgPSB0cmVlVmlldy50cmVlLmxpbmtzKG5vZGVzKTtcclxuXHJcbiAgICAvLyBTZXQgd2lkdGhzIGJldHdlZW4gbGV2ZWxzIGJhc2VkIG9uIG1heExhYmVsTGVuZ3RoLlxyXG4gICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgLy9kLnkgPSAoZC5kZXB0aCAqICh0cmVlVmlldy5tYXhMYWJlbExlbmd0aCAqIDEwKSk7IC8vbWF4TGFiZWxMZW5ndGggKiAxMHB4XHJcbiAgICAgICAgLy8gYWx0ZXJuYXRpdmVseSB0byBrZWVwIGEgZml4ZWQgc2NhbGUgb25lIGNhbiBzZXQgYSBmaXhlZCBkZXB0aCBwZXIgbGV2ZWxcclxuICAgICAgICAvLyBOb3JtYWxpemUgZm9yIGZpeGVkLWRlcHRoIGJ5IGNvbW1lbnRpbmcgb3V0IGJlbG93IGxpbmVcclxuICAgICAgICBkLnkgPSAoZC5kZXB0aCAqIHRyZWVWaWV3Lmhvcml6b250YWxfc3BhY2luZyk7IC8vMjAwcHggcGVyIGxldmVsLlxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBub2Rlc+KAplxyXG4gICAgbm9kZSA9IHRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKS5kYXRhKG5vZGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkIHx8IChkLmlkID0gKytpKTsgfSk7XHJcblxyXG4gICAgLy8gRW50ZXIgYW55IG5ldyBub2RlcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXHJcbiAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcImdcIilcclxuICAgICAgLmNhbGwoZHJhZ0xpc3RlbmVyKVxyXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZVwiKVxyXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS55MCArIFwiLFwiICsgc291cmNlLngwICsgXCIpXCI7IH0pXHJcbiAgICAgIC5vbignY2xpY2snLCB0cmVlVmlldy5jbGljayk7XHJcblxyXG4gICAgbm9kZUVudGVyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAuYXR0cignY2xhc3MnLCAnbm9kZUNpcmNsZScpXHJcbiAgICAgIC5hdHRyKFwiclwiLCAwKVxyXG4gICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKGQpID8gXCJsaWdodHN0ZWVsYmx1ZVwiIDogXCIjZmZmXCI7IH0pO1xyXG5cclxuICAgIG5vZGVFbnRlci5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0Lmhhc0NoaWxkcmVuKGQpID8gLTEwIDogMTA7IH0pXHJcbiAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxyXG4gICAgICAuYXR0cignY2xhc3MnLCAnbm9kZVRleHQnKVxyXG4gICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyBcImVuZFwiIDogXCJzdGFydFwiOyB9KVxyXG4gICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLm5hbWU7IH0pXHJcbiAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAvLyBwaGFudG9tIG5vZGUgdG8gZ2l2ZSB1cyBtb3VzZW92ZXIgaW4gYSByYWRpdXMgYXJvdW5kIGl0XHJcbiAgICBub2RlRW50ZXIuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgIC5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZScpXHJcbiAgICAgIC5hdHRyKFwiclwiLCAzMClcclxuICAgICAgLmF0dHIoXCJvcGFjaXR5XCIsIDAuMikgLy8gY2hhbmdlIHRoaXMgdG8gemVybyB0byBoaWRlIHRoZSB0YXJnZXQgYXJlYVxyXG4gICAgICAuc3R5bGUoXCJmaWxsXCIsIFwicmVkXCIpXHJcbiAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdtb3VzZW92ZXInKVxyXG4gICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24obm9kZSkgeyB0cmVlVmlldy5vdmVyQ2lyY2xlKG5vZGUpOyB9KVxyXG4gICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbihub2RlKSB7IHRyZWVWaWV3Lm91dENpcmNsZShub2RlKTsgfSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSB0ZXh0IHRvIHJlZmxlY3Qgd2hldGhlciBub2RlIGhhcyBjaGlsZHJlbiBvciBub3QuXHJcbiAgICBub2RlLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyAtMTAgOiAxMDsgfSlcclxuICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyBcImVuZFwiIDogXCJzdGFydFwiOyB9KVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubmFtZTsgfSk7XHJcblxyXG4gICAgLy8gQ2hhbmdlIHRoZSBjaXJjbGUgZmlsbCBkZXBlbmRpbmcgb24gd2hldGhlciBpdCBoYXMgY2hpbGRyZW4gYW5kIGlzIGNvbGxhcHNlZFxyXG4gICAgbm9kZS5zZWxlY3QoXCJjaXJjbGUubm9kZUNpcmNsZVwiKVxyXG4gICAgICAuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gdHJlZVZpZXcuY29tcHV0ZU5vZGVTaXplKGQpOyB9KVxyXG4gICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKGQpID8gXCJsaWdodHN0ZWVsYmx1ZVwiIDogXCIjZmZmXCI7IH0pO1xyXG5cclxuICAgIC8vIFRyYW5zaXRpb24gbm9kZXMgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxyXG4gICAgdmFyIG5vZGVVcGRhdGU7XHJcbiAgICBpZih0cmVlVmlldy5kaXJlY3Rpb24gPT09IFZFUlRJQ0FMX1ZJRVcpXHJcbiAgICB7XHJcbiAgICAgIG5vZGVVcGRhdGUgPSBub2RlLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiOyB9KTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgbm9kZVVwZGF0ZSA9IG5vZGUuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIGQueSArIFwiLFwiICsgZC54ICsgXCIpXCI7IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZhZGUgdGhlIHRleHQgaW5cclxuICAgIG5vZGVVcGRhdGUuc2VsZWN0KFwidGV4dFwiKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAxKTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgIHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueSArIFwiLFwiICsgc291cmNlLnggKyBcIilcIjsgfSlcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgbm9kZUV4aXQuc2VsZWN0KFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIDApO1xyXG4gICAgbm9kZUV4aXQuc2VsZWN0KFwidGV4dFwiKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGxpbmtz4oCmXHJcbiAgICB2YXIgbGluayA9IHRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcInBhdGgubGlua1wiKS5kYXRhKGxpbmtzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC5pZDsgfSk7XHJcblxyXG4gICAgLy8gRW50ZXIgYW55IG5ldyBsaW5rcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXHJcbiAgICBsaW5rLmVudGVyKCkuaW5zZXJ0KFwicGF0aFwiLCBcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGlua1wiKVxyXG4gICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHZhciBvID0geyB4OiBzb3VyY2UueDAsIHk6IHNvdXJjZS55MCB9O1xyXG4gICAgICAgICAgICByZXR1cm4gdHJlZVZpZXcuZGlhZ29uYWwoeyBzb3VyY2U6IG8sIHRhcmdldDogbyB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIGxpbmtzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cclxuICAgIGxpbmsuYXR0cihcImRcIiwgdHJlZVZpZXcuZGlhZ29uYWwpO1xyXG5cclxuICAgIC8vIFRyYW5zaXRpb24gZXhpdGluZyBub2RlcyB0byB0aGUgcGFyZW50J3MgbmV3IHBvc2l0aW9uLlxyXG4gICAgbGluay5leGl0KClcclxuICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB2YXIgbyA9IHsgeDogc291cmNlLngsIHk6IHNvdXJjZS55IH07XHJcbiAgICAgICAgICAgIHJldHVybiB0cmVlVmlldy5kaWFnb25hbCh7IHNvdXJjZTogbywgdGFyZ2V0OiBvIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgIC8vIFN0YXNoIHRoZSBvbGQgcG9zaXRpb25zIGZvciB0cmFuc2l0aW9uLlxyXG4gICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7IGQueDAgPSBkLng7IGQueTAgPSBkLnk7IH0pO1xyXG4gIH0sICBcclxuICBkcmFnc3RhcnQ6IGZ1bmN0aW9uKGQpXHJcbiAge1xyXG4gICAgaWYgKGQgPT0gdHJlZVZpZXcucm9vdCkgeyByZXR1cm47IH1cclxuICAgIHRyZWVWaWV3LmRyYWdTdGFydGVkID0gdHJ1ZTtcclxuICAgIG5vZGVzID0gdHJlZVZpZXcudHJlZS5ub2RlcyhkKTtcclxuICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgLy8gaXQncyBpbXBvcnRhbnQgdGhhdCB3ZSBzdXBwcmVzcyB0aGUgbW91c2VvdmVyIGV2ZW50IG9uIHRoZSBub2RlIGJlaW5nIGRyYWdnZWQuIE90aGVyd2lzZSBpdCB3aWxsIGFic29yYiB0aGUgbW91c2VvdmVyIGV2ZW50IGFuZCB0aGUgdW5kZXJseWluZyBub2RlIHdpbGwgbm90IGRldGVjdCBpdCBkMy5zZWxlY3QodGhpcykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpOyAgICAgIFxyXG4gIH0sXHJcbiAgZHJhZ2VuZDogZnVuY3Rpb24oZClcclxuICB7XHJcbiAgICBpZiAoZCA9PSB0cmVlVmlldy5yb290KSB7IHJldHVybjsgfVxyXG4gICAgZG9tTm9kZSA9IHRoaXM7XHJcbiAgICBcclxuICAgIGlmICh0cmVlVmlldy5zZWxlY3RlZE5vZGUpIFxyXG4gICAge1xyXG4gICAgICAvLyBub3cgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIHBhcmVudCwgYW5kIGluc2VydCBpdCBpbnRvIHRoZSBuZXcgZWxlbWVudHMgY2hpbGRyZW5cclxuICAgICAgcHJvamVjdC5yZW1vdmVOb2RlKHRyZWVWaWV3LmRyYWdnaW5nTm9kZSk7XHJcbiAgICAgIFxyXG4gICAgICBpZighdHJlZVZpZXcuc2VsZWN0ZWROb2RlLmNoaWxkcmVuKSB7IHRyZWVWaWV3LnNlbGVjdGVkTm9kZS5jaGlsZHJlbiA9IFtdOyB9XHJcbiAgICAgIHRyZWVWaWV3LnNlbGVjdGVkTm9kZS5jaGlsZHJlbi5wdXNoKHRyZWVWaWV3LmRyYWdnaW5nTm9kZSk7XHJcbiAgICAgIFxyXG4gICAgICBwcm9qZWN0LmV4cGFuZE5vZGUodHJlZVZpZXcuc2VsZWN0ZWROb2RlKTsgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBub2RlIGJlaW5nIGFkZGVkIHRvIGlzIGV4cGFuZGVkIHNvIHVzZXIgY2FuIHNlZSBhZGRlZCBub2RlIGlzIGNvcnJlY3RseSBtb3ZlZCAgICBcclxuICAgIH0gXHJcbiAgXHJcbiAgICB0cmVlVmlldy5zZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZScpO1xyXG4gICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUnKTtcclxuICAgIFxyXG4gICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdCgnLmdob3N0Q2lyY2xlJykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnJyk7ICAgLy8gbm93IHJlc3RvcmUgdGhlIG1vdXNlb3ZlciBldmVudCBvciB3ZSB3b24ndCBiZSBhYmxlIHRvIGRyYWcgYSAybmQgdGltZVxyXG4gICAgdHJlZVZpZXcudXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gICAgXHJcbiAgICBpZiAodHJlZVZpZXcuZHJhZ2dpbmdOb2RlICE9PSBudWxsKSBcclxuICAgIHtcclxuICAgICAgdHJlZVZpZXcudXBkYXRlKHRyZWVWaWV3LnJvb3QpO1xyXG4gICAgICAvL3RyZWVWaWV3LmNlbnRlck5vZGUodHJlZVZpZXcuZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgdHJlZVZpZXcuZHJhZ2dpbmdOb2RlID0gbnVsbDtcclxuICAgIH0gICAgICBcclxuICB9LFxyXG4gIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgdGVtcG9yYXJ5IGNvbm5lY3RvciBpbmRpY2F0aW5nIGRyYWdnaW5nIGFmZmlsaWF0aW9uXHJcbiAgdXBkYXRlVGVtcENvbm5lY3RvcjogZnVuY3Rpb24oKSBcclxuICB7XHJcbiAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgaWYgKHRyZWVWaWV3LmRyYWdnaW5nTm9kZSAhPT0gbnVsbCAmJiB0cmVlVmlldy5zZWxlY3RlZE5vZGUgIT09IG51bGwpICAgLy8gaGF2ZSB0byBmbGlwIHRoZSBzb3VyY2UgY29vcmRpbmF0ZXMgc2luY2Ugd2UgZGlkIHRoaXMgZm9yIHRoZSBleGlzdGluZyBjb25uZWN0b3JzIG9uIHRoZSBvcmlnaW5hbCB0cmVlXHJcbiAgICB7XHJcbiAgICAgIGRhdGEgPSBbeyBzb3VyY2U6IHsgeDogdHJlZVZpZXcuc2VsZWN0ZWROb2RlLnkwLCB5OiB0cmVlVmlldy5zZWxlY3RlZE5vZGUueDAgfSwgdGFyZ2V0OiB7IHg6IHRyZWVWaWV3LmRyYWdnaW5nTm9kZS55MCwgeTogdHJlZVZpZXcuZHJhZ2dpbmdOb2RlLngwIH0gfV07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZhciBsaW5rID0gdHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwiLnRlbXBsaW5rXCIpLmRhdGEoZGF0YSk7XHJcbiAgICBsaW5rLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJ0ZW1wbGlua1wiKS5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSkuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xyXG4gICAgbGluay5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSk7XHJcbiAgICBsaW5rLmV4aXQoKS5yZW1vdmUoKTtcclxuICB9LFxyXG4gIG92ZXJDaXJjbGU6IGZ1bmN0aW9uKGQpIFxyXG4gIHtcclxuICAgIHRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IGQ7XHJcbiAgICB0cmVlVmlldy51cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgfSxcclxuICBvdXRDaXJjbGU6IGZ1bmN0aW9uKGQpIFxyXG4gIHtcclxuICAgIHRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICB0cmVlVmlldy51cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgfSxcclxuICBjZW50ZXJOb2RlOiBmdW5jdGlvbihzb3VyY2UpICAgICAvLyBGdW5jdGlvbiB0byBjZW50ZXIgbm9kZSB3aGVuIGNsaWNrZWQvZHJvcHBlZCBzbyBub2RlIGRvZXNuJ3QgZ2V0IGxvc3Qgd2hlbiBjb2xsYXBzaW5nL21vdmluZyB3aXRoIGxhcmdlIGFtb3VudCBvZiBjaGlsZHJlbi5cclxuICB7XHJcbiAgICBzY2FsZSA9IHRyZWVWaWV3Lnpvb21MaXN0ZW5lci5zY2FsZSgpO1xyXG4gICAgeCA9IC1zb3VyY2UueTA7XHJcbiAgICB5ID0gLXNvdXJjZS54MDtcclxuICAgIHggPSB4ICogc2NhbGUgKyB0cmVlVmlldy52aWV3ZXJXaWR0aCAvIDQ7XHJcbiAgICB5ID0geSAqIHNjYWxlICsgdHJlZVZpZXcudmlld2VySGVpZ2h0IC8gMjtcclxuICAgIGQzLnNlbGVjdCgnZycpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB4ICsgXCIsXCIgKyB5ICsgXCIpc2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiKTtcclxuICAgIHRyZWVWaWV3Lnpvb21MaXN0ZW5lci5zY2FsZShzY2FsZSk7XHJcbiAgICB0cmVlVmlldy56b29tTGlzdGVuZXIudHJhbnNsYXRlKFt4LCB5XSk7XHJcbiAgfSwgICAgICAgICAgXHJcbiAgY29tcHV0ZU5vZGVTaXplOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBub2RlU2l6ZSA9IE1JTl9OT0RFX1NJWkU7XHJcbiAgICBcclxuICAgIC8qaWYodHJlZS5maWVsZClcclxuICAgIHtcclxuICAgICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbdHJlZS5maWVsZC5uYW1lXSlcclxuICAgICAge1xyXG4gICAgICAgIC8vbm9kZVNpemUgPSAyICogTWF0aC5QSSAqIE1hdGguc3FydChNQVhfTk9ERV9TSVpFICogbm9kZS52YWx1ZXNbdHJlZS5maWVsZC5uYW1lXSAvIHRyZWUubWF4RmllbGRWYWx1ZSAvIE1hdGguUEkpO1xyXG4gICAgICAgIG5vZGVTaXplID0gTUFYX05PREVfU0laRSAqIE1hdGguc3FydChub2RlLnZhbHVlc1t0cmVlLmZpZWxkLm5hbWVdIC8gdHJlZS5tYXhGaWVsZFZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYobm9kZVNpemUgPCBNSU5fTk9ERV9TSVpFKSB7IG5vZGVTaXplID0gTUlOX05PREVfU0laRTsgfVxyXG4gICAgfSovXHJcbiAgICBcclxuICAgIHJldHVybiBub2RlU2l6ZTsgICAgICAgXHJcbiAgfSAgIFxyXG59OyIsInZhciBNSU5fTk9ERV9TSVpFID0gNTtcclxudmFyIE1BWF9OT0RFX1NJWkUgPSAxMDA7XHJcblxyXG52YXIgVkVSVElDQUxfVklFVyA9IDA7XHJcbnZhciBIT1JJWk9OVEFMX1ZJRVcgPSAxO1xyXG5cclxudmFyIHdlaWdodGVkVHJlZVZpZXcgPSBcclxue1xyXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKCcjdHJlZVZpZXcnKS5yZW1vdmUoKTtcclxuICB9LFxyXG4gIHJlZnJlc2g6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZSh3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpO1xyXG4gIH0sXHJcbiAgcm90YXRlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgaWYod2VpZ2h0ZWRUcmVlVmlldy5kaXJlY3Rpb24gPT09IEhPUklaT05UQUxfVklFVylcclxuICAgIHtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5kaXJlY3Rpb24gPSBWRVJUSUNBTF9WSUVXO1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3Lmhvcml6b250YWxfc3BhY2luZyA9IDEwMDtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nID0gNjA7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcuZGlhZ29uYWwgPSBkMy5zdmcuZGlhZ29uYWwoKS5wcm9qZWN0aW9uKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFtkLngsIGQueV07IH0pOyAgLy8gZGVmaW5lIGEgZDMgZGlhZ29uYWwgcHJvamVjdGlvbiBmb3IgdXNlIGJ5IHRoZSBub2RlIHBhdGhzIGxhdGVyIG9uLlxyXG4gICAgICBcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5yb290LnkwID0gd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QueDAgPSAwOyAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LmRpcmVjdGlvbiA9IEhPUklaT05UQUxfVklFVztcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5ob3Jpem9udGFsX3NwYWNpbmcgPSAzMDA7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcudmVydGljYWxfc3BhY2luZyA9IDIwMDtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5kaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpLnByb2plY3Rpb24oZnVuY3Rpb24oZCkgeyByZXR1cm4gW2QueSwgZC54XTsgfSk7ICAvLyBkZWZpbmUgYSBkMyBkaWFnb25hbCBwcm9qZWN0aW9uIGZvciB1c2UgYnkgdGhlIG5vZGUgcGF0aHMgbGF0ZXIgb24uXHJcbiAgICAgIFxyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QueDAgPSB3ZWlnaHRlZFRyZWVWaWV3LnZpZXdlckhlaWdodCAvIDI7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcucm9vdC55MCA9IDA7ICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZSh3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpO1xyXG4gIH0sXHJcbiAgaW5pdDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuZGlyZWN0aW9uID0gSE9SSVpPTlRBTF9WSUVXO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUgPSBudWxsO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5kdXJhdGlvbiA9IDc1MDtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuaG9yaXpvbnRhbF9zcGFjaW5nID0gMzAwO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nID0gMjAwOyAgICBcclxuICAgIFxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5tYXhMYWJlbExlbmd0aCA9IDA7XHJcbiAgICBcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgZnVuY3Rpb24oZClcclxuICAgIHtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5tYXhMYWJlbExlbmd0aCA9IE1hdGgubWF4KGQubmFtZS5sZW5ndGgsIHdlaWdodGVkVHJlZVZpZXcubWF4TGFiZWxMZW5ndGgpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHdlaWdodGVkVHJlZVZpZXcudmlld2VyV2lkdGggPSAkKCcjdHJlZS1jb250YWluZXInKS53aWR0aCgpO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJIZWlnaHQgPSAkKCcjdHJlZS1jb250YWluZXInKS5oZWlnaHQoKTtcclxuICAgIFxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy50cmVlID0gZDMubGF5b3V0LnRyZWUoKS5zaXplKFt3ZWlnaHRlZFRyZWVWaWV3LnZpZXdlckhlaWdodCwgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJXaWR0aF0pO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5yb290ID0gcHJvamVjdC50cmVlO1xyXG4gICAgXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdTdGFydGVkID0gbnVsbDtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuZGlhZ29uYWwgPSBkMy5zdmcuZGlhZ29uYWwoKS5wcm9qZWN0aW9uKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFtkLnksIGQueF07IH0pOyAgLy8gZGVmaW5lIGEgZDMgZGlhZ29uYWwgcHJvamVjdGlvbiBmb3IgdXNlIGJ5IHRoZSBub2RlIHBhdGhzIGxhdGVyIG9uLiAgICAgICAgICAgICAgICBcclxuICB9LCAgXHJcbiAgcmVuZGVyOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5kZXN0cm95KCk7XHJcbiAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwidHJlZVZpZXdcIj48ZGl2IGlkPVwidHJlZVZpZXdPcHRpb25zXCI+PGRpdiBpZD1cImV4cGFuZGVyQ29udGFpbmVyXCI+PC9kaXY+PC9kaXY+PGRpdiBpZD1cInRyZWUtY29udGFpbmVyXCI+PC9kaXY+PC9kaXY+Jyk7XHJcbiBcclxuICAgIGV4cGFuZGVyU2VsZWN0b3IuaW5pdChwcm9qZWN0LnRyZWUubWF4RGVwdGgpO1xyXG4gICAgJCgnI3RyZWVWaWV3T3B0aW9ucycpLmFwcGVuZCgnPGEgaHJlZj1cIiNcIiBpZD1cInRyZWVWaWV3Um90YXRlQnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgcHVsbC1yaWdodFwiPlJvdGF0ZSBWaWV3PC9hPicpO1xyXG4gICAgJCgnI3RyZWVWaWV3Um90YXRlQnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7IHdlaWdodGVkVHJlZVZpZXcucm90YXRlKCk7IH0pOyAgXHJcbiBcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuaW5pdCgpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHpvb20oKSB7IHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQzLmV2ZW50LnRyYW5zbGF0ZSArIFwiKXNjYWxlKFwiICsgZDMuZXZlbnQuc2NhbGUgKyBcIilcIik7IH0gICAvLyBEZWZpbmUgdGhlIHpvb20gZnVuY3Rpb24gZm9yIHRoZSB6b29tYWJsZSB0cmVlXHJcbiAgXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3Lnpvb21MaXN0ZW5lciA9IGQzLmJlaGF2aW9yLnpvb20oKS5zY2FsZUV4dGVudChbMC4xLCAzXSkub24oXCJ6b29tXCIsIHpvb20pOyAgICAgLy8gZGVmaW5lIHRoZSB3ZWlnaHRlZFRyZWVWaWV3Lnpvb21MaXN0ZW5lciB3aGljaCBjYWxscyB0aGUgem9vbSBmdW5jdGlvbiBvbiB0aGUgXCJ6b29tXCIgZXZlbnQgY29uc3RyYWluZWQgd2l0aGluIHRoZSBzY2FsZUV4dGVudHNcclxuICBcclxuICAgIGZ1bmN0aW9uIGluaXRpYXRlRHJhZyhkLCBkb21Ob2RlKSBcclxuICAgIHtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUgPSBkO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcbiAgICAgIGQzLnNlbGVjdEFsbCgnLmdob3N0Q2lyY2xlJykuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUgc2hvdycpO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuYXR0cignY2xhc3MnLCAnbm9kZSBhY3RpdmVEcmFnJyk7XHJcblxyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKS5zb3J0KGZ1bmN0aW9uKGEsIGIpICAgIC8vIHNlbGVjdCB0aGUgcGFyZW50IGFuZCBzb3J0IHRoZSBwYXRoJ3NcclxuICAgICAgeyBcclxuICAgICAgICBpZiAoYS5pZCAhPSB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZS5pZCkgcmV0dXJuIDE7ICAgICAgICAgIC8vIGEgaXMgbm90IHRoZSBob3ZlcmVkIGVsZW1lbnQsIHNlbmQgXCJhXCIgdG8gdGhlIGJhY2tcclxuICAgICAgICBlbHNlIHJldHVybiAtMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhIGlzIHRoZSBob3ZlcmVkIGVsZW1lbnQsIGJyaW5nIFwiYVwiIHRvIHRoZSBmcm9udFxyXG4gICAgICB9KTtcclxuICAgICAgLy8gaWYgbm9kZXMgaGFzIGNoaWxkcmVuLCByZW1vdmUgdGhlIGxpbmtzIGFuZCBub2Rlc1xyXG4gICAgICBpZiAobm9kZXMubGVuZ3RoID4gMSkgXHJcbiAgICAgIHtcclxuICAgICAgICAvLyByZW1vdmUgbGluayBwYXRoc1xyXG4gICAgICAgIGxpbmtzID0gd2VpZ2h0ZWRUcmVlVmlldy50cmVlLmxpbmtzKG5vZGVzKTtcclxuICAgICAgICBub2RlUGF0aHMgPSB3ZWlnaHRlZFRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcInBhdGgubGlua1wiKS5kYXRhKGxpbmtzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC5pZDsgfSkucmVtb3ZlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVtb3ZlIGNoaWxkIG5vZGVzXHJcbiAgICAgICAgbm9kZXNFeGl0ID0gd2VpZ2h0ZWRUcmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoXCJnLm5vZGVcIikuZGF0YShub2RlcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5pZDsgfSkuZmlsdGVyKGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIGQuaWQgIT0gd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUuaWQ7IH0pLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vIHJlbW92ZSBwYXJlbnQgbGlua1xyXG4gICAgICBwYXJlbnRMaW5rID0gd2VpZ2h0ZWRUcmVlVmlldy50cmVlLmxpbmtzKHdlaWdodGVkVHJlZVZpZXcudHJlZS5ub2Rlcyh3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZS5wYXJlbnQpKTtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoJ3BhdGgubGluaycpLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkLnRhcmdldC5pZCA9PSB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZS5pZDsgfSkucmVtb3ZlKCk7XHJcblxyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdTdGFydGVkID0gbnVsbDtcclxuICAgIH1cclxuICBcclxuICAgIC8vIGRlZmluZSB0aGUgYmFzZVN2ZywgYXR0YWNoaW5nIGEgY2xhc3MgZm9yIHN0eWxpbmcgYW5kIHRoZSB3ZWlnaHRlZFRyZWVWaWV3Lnpvb21MaXN0ZW5lclxyXG4gICAgdmFyIGJhc2VTdmcgPSBkMy5zZWxlY3QoXCIjdHJlZS1jb250YWluZXJcIikuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJXaWR0aClcclxuICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJIZWlnaHQpXHJcbiAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJvdmVybGF5XCIpXHJcbiAgICAgIC5jYWxsKHdlaWdodGVkVHJlZVZpZXcuem9vbUxpc3RlbmVyKTtcclxuICBcclxuICAgIGRyYWdMaXN0ZW5lciA9IGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdzdGFydCkub24oXCJkcmFnXCIsIGRyYWcpLm9uKFwiZHJhZ2VuZFwiLCB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdlbmQpOyAgLy8gRGVmaW5lIHRoZSBkcmFnIGxpc3RlbmVycyBmb3IgZHJhZy9kcm9wIGJlaGF2aW91ciBvZiBub2Rlcy5cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gZHJhZyhkKVxyXG4gICAge1xyXG4gICAgICBpZiAoZCA9PSB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAod2VpZ2h0ZWRUcmVlVmlldy5kcmFnU3RhcnRlZCkgXHJcbiAgICAgIHtcclxuICAgICAgICBkb21Ob2RlID0gdGhpcztcclxuICAgICAgICBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGQueDAgKz0gZDMuZXZlbnQuZHk7XHJcbiAgICAgIGQueTAgKz0gZDMuZXZlbnQuZHg7XHJcbiAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZC55MCArIFwiLFwiICsgZC54MCArIFwiKVwiKTtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGVUZW1wQ29ubmVjdG9yKCk7ICAgICAgXHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBBcHBlbmQgYSBncm91cCB3aGljaCBob2xkcyBhbGwgbm9kZXMgYW5kIHdoaWNoIHRoZSB6b29tIExpc3RlbmVyIGNhbiBhY3QgdXBvbi5cclxuICAgIHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAgPSBiYXNlU3ZnLmFwcGVuZChcImdcIik7XHJcbiAgXHJcbiAgICAvLyBEZWZpbmUgdGhlIHJvb3RcclxuICAgIHdlaWdodGVkVHJlZVZpZXcucm9vdC54MCA9IHdlaWdodGVkVHJlZVZpZXcudmlld2VySGVpZ2h0IC8gMjtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcucm9vdC55MCA9IDA7XHJcbiAgICBcclxuICAgIC8vIExheW91dCB0aGUgdHJlZSBpbml0aWFsbHkgYW5kIGNlbnRlciBvbiB0aGUgcm9vdCBub2RlLlxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGUod2VpZ2h0ZWRUcmVlVmlldy5yb290KTtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuY2VudGVyTm9kZSh3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpOyAgICBcclxuICB9LFxyXG4gIGNsaWNrOiBmdW5jdGlvbihkKSAgIC8vIFRvZ2dsZSBjaGlsZHJlbiBvbiBjbGljay5cclxuICB7XHJcbiAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgeyByZXR1cm47IH0gLy8gY2xpY2sgc3VwcHJlc3NlZFxyXG4gICAgcHJvamVjdC50b2dnbGVFeHBhbnNpb24oZCk7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZShkKTtcclxuICB9LCAgXHJcbiAgdXBkYXRlOiBmdW5jdGlvbihzb3VyY2UpIFxyXG4gIHsgXHJcbiAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAvLyBDb21wdXRlIHRoZSBuZXcgaGVpZ2h0LCBmdW5jdGlvbiBjb3VudHMgdG90YWwgY2hpbGRyZW4gb2Ygcm9vdCBub2RlIGFuZCBzZXRzIHRyZWUgaGVpZ2h0IGFjY29yZGluZ2x5LlxyXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgbGF5b3V0IGxvb2tpbmcgc3F1YXNoZWQgd2hlbiBuZXcgbm9kZXMgYXJlIG1hZGUgdmlzaWJsZSBvciBsb29raW5nIHNwYXJzZSB3aGVuIG5vZGVzIGFyZSByZW1vdmVkXHJcbiAgICAvLyBUaGlzIG1ha2VzIHRoZSBsYXlvdXQgbW9yZSBjb25zaXN0ZW50LlxyXG4gICAgdmFyIGxldmVsV2lkdGggPSBbMV07XHJcbiAgICB2YXIgY2hpbGRDb3VudCA9IGZ1bmN0aW9uKGxldmVsLCBuKSBcclxuICAgIHtcclxuICAgICAgaWYgKG4uY2hpbGRyZW4gJiYgbi5jaGlsZHJlbi5sZW5ndGggPiAwKSBcclxuICAgICAge1xyXG4gICAgICAgIGlmIChsZXZlbFdpZHRoLmxlbmd0aCA8PSBsZXZlbCArIDEpIHsgbGV2ZWxXaWR0aC5wdXNoKDApOyB9XHJcblxyXG4gICAgICAgIGxldmVsV2lkdGhbbGV2ZWwgKyAxXSArPSBuLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICBuLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oZCkgeyBjaGlsZENvdW50KGxldmVsICsgMSwgZCk7IH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjaGlsZENvdW50KDAsIHdlaWdodGVkVHJlZVZpZXcucm9vdCk7XHJcbiAgICB2YXIgbmV3SGVpZ2h0ID0gZDMubWF4KGxldmVsV2lkdGgpICogd2VpZ2h0ZWRUcmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nOyAvLyAyNSBwaXhlbHMgcGVyIGxpbmVcclxuICAgIHdlaWdodGVkVHJlZVZpZXcudHJlZSA9IHdlaWdodGVkVHJlZVZpZXcudHJlZS5zaXplKFtuZXdIZWlnaHQsIHdlaWdodGVkVHJlZVZpZXcudmlld2VyV2lkdGhdKTtcclxuXHJcbiAgICAvLyBDb21wdXRlIHRoZSBuZXcgdHJlZSBsYXlvdXQuXHJcbiAgICB2YXIgbm9kZXMgPSB3ZWlnaHRlZFRyZWVWaWV3LnRyZWUubm9kZXMod2VpZ2h0ZWRUcmVlVmlldy5yb290KS5yZXZlcnNlKCk7XHJcbiAgICB2YXIgbGlua3MgPSB3ZWlnaHRlZFRyZWVWaWV3LnRyZWUubGlua3Mobm9kZXMpO1xyXG5cclxuICAgIC8vIFNldCB3aWR0aHMgYmV0d2VlbiBsZXZlbHMgYmFzZWQgb24gbWF4TGFiZWxMZW5ndGguXHJcbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAvL2QueSA9IChkLmRlcHRoICogKHdlaWdodGVkVHJlZVZpZXcubWF4TGFiZWxMZW5ndGggKiAxMCkpOyAvL21heExhYmVsTGVuZ3RoICogMTBweFxyXG4gICAgICAgIC8vIGFsdGVybmF0aXZlbHkgdG8ga2VlcCBhIGZpeGVkIHNjYWxlIG9uZSBjYW4gc2V0IGEgZml4ZWQgZGVwdGggcGVyIGxldmVsXHJcbiAgICAgICAgLy8gTm9ybWFsaXplIGZvciBmaXhlZC1kZXB0aCBieSBjb21tZW50aW5nIG91dCBiZWxvdyBsaW5lXHJcbiAgICAgICAgZC55ID0gKGQuZGVwdGggKiB3ZWlnaHRlZFRyZWVWaWV3Lmhvcml6b250YWxfc3BhY2luZyk7IC8vMjAwcHggcGVyIGxldmVsLlxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBub2Rlc+KAplxyXG4gICAgbm9kZSA9IHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpLmRhdGEobm9kZXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuaWQgfHwgKGQuaWQgPSArK2kpOyB9KTtcclxuXHJcbiAgICAvLyBFbnRlciBhbnkgbmV3IG5vZGVzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cclxuICAgIHZhciBub2RlRW50ZXIgPSBub2RlLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAuY2FsbChkcmFnTGlzdGVuZXIpXHJcbiAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlXCIpXHJcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgc291cmNlLnkwICsgXCIsXCIgKyBzb3VyY2UueDAgKyBcIilcIjsgfSlcclxuICAgICAgLm9uKCdjbGljaycsIHdlaWdodGVkVHJlZVZpZXcuY2xpY2spO1xyXG5cclxuICAgIG5vZGVFbnRlci5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ25vZGVDaXJjbGUnKVxyXG4gICAgICAuYXR0cihcInJcIiwgMClcclxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChkKSA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiOyB9KTtcclxuXHJcbiAgICBub2RlRW50ZXIuYXBwZW5kKFwidGV4dFwiKVxyXG4gICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5oYXNDaGlsZHJlbihkKSA/IC0xMCA6IDEwOyB9KVxyXG4gICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcclxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ25vZGVUZXh0JylcclxuICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0Lmhhc0NoaWxkcmVuKGQpID8gXCJlbmRcIiA6IFwic3RhcnRcIjsgfSlcclxuICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5uYW1lOyB9KVxyXG4gICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMCk7XHJcblxyXG4gICAgLy8gcGhhbnRvbSBub2RlIHRvIGdpdmUgdXMgbW91c2VvdmVyIGluIGEgcmFkaXVzIGFyb3VuZCBpdFxyXG4gICAgbm9kZUVudGVyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUnKVxyXG4gICAgICAuYXR0cihcInJcIiwgMzApXHJcbiAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCAwLjIpIC8vIGNoYW5nZSB0aGlzIHRvIHplcm8gdG8gaGlkZSB0aGUgdGFyZ2V0IGFyZWFcclxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcInJlZFwiKVxyXG4gICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbW91c2VvdmVyJylcclxuICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uKG5vZGUpIHsgd2VpZ2h0ZWRUcmVlVmlldy5vdmVyQ2lyY2xlKG5vZGUpOyB9KVxyXG4gICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbihub2RlKSB7IHdlaWdodGVkVHJlZVZpZXcub3V0Q2lyY2xlKG5vZGUpOyB9KTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIHRleHQgdG8gcmVmbGVjdCB3aGV0aGVyIG5vZGUgaGFzIGNoaWxkcmVuIG9yIG5vdC5cclxuICAgIG5vZGUuc2VsZWN0KCd0ZXh0JylcclxuICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5oYXNDaGlsZHJlbihkKSA/IC0xMCA6IDEwOyB9KVxyXG4gICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5oYXNDaGlsZHJlbihkKSA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7IH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5uYW1lOyB9KTtcclxuXHJcbiAgICAvLyBDaGFuZ2UgdGhlIGNpcmNsZSBmaWxsIGRlcGVuZGluZyBvbiB3aGV0aGVyIGl0IGhhcyBjaGlsZHJlbiBhbmQgaXMgY29sbGFwc2VkXHJcbiAgICBub2RlLnNlbGVjdChcImNpcmNsZS5ub2RlQ2lyY2xlXCIpXHJcbiAgICAgIC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB3ZWlnaHRlZFRyZWVWaWV3LmNvbXB1dGVOb2RlU2l6ZShkKTsgfSlcclxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChkKSA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiOyB9KTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIG5vZGVzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cclxuICAgIHZhciBub2RlVXBkYXRlO1xyXG4gICAgaWYod2VpZ2h0ZWRUcmVlVmlldy5kaXJlY3Rpb24gPT09IFZFUlRJQ0FMX1ZJRVcpXHJcbiAgICB7XHJcbiAgICAgIG5vZGVVcGRhdGUgPSBub2RlLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiOyB9KTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgbm9kZVVwZGF0ZSA9IG5vZGUuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIGQueSArIFwiLFwiICsgZC54ICsgXCIpXCI7IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZhZGUgdGhlIHRleHQgaW5cclxuICAgIG5vZGVVcGRhdGUuc2VsZWN0KFwidGV4dFwiKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAxKTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgIHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueSArIFwiLFwiICsgc291cmNlLnggKyBcIilcIjsgfSlcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgbm9kZUV4aXQuc2VsZWN0KFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIDApO1xyXG4gICAgbm9kZUV4aXQuc2VsZWN0KFwidGV4dFwiKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGxpbmtz4oCmXHJcbiAgICB2YXIgbGluayA9IHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwicGF0aC5saW5rXCIpLmRhdGEobGlua3MsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudGFyZ2V0LmlkOyB9KTtcclxuXHJcbiAgICAvLyBFbnRlciBhbnkgbmV3IGxpbmtzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cclxuICAgIGxpbmsuZW50ZXIoKS5pbnNlcnQoXCJwYXRoXCIsIFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5rXCIpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgdmFyIG8gPSB7IHg6IHNvdXJjZS54MCwgeTogc291cmNlLnkwIH07XHJcbiAgICAgICAgICAgIHJldHVybiB3ZWlnaHRlZFRyZWVWaWV3LmRpYWdvbmFsKHsgc291cmNlOiBvLCB0YXJnZXQ6IG8gfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gVHJhbnNpdGlvbiBsaW5rcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICBsaW5rLmF0dHIoXCJkXCIsIHdlaWdodGVkVHJlZVZpZXcuZGlhZ29uYWwpO1xyXG5cclxuICAgIC8vIFRyYW5zaXRpb24gZXhpdGluZyBub2RlcyB0byB0aGUgcGFyZW50J3MgbmV3IHBvc2l0aW9uLlxyXG4gICAgbGluay5leGl0KClcclxuICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB2YXIgbyA9IHsgeDogc291cmNlLngsIHk6IHNvdXJjZS55IH07XHJcbiAgICAgICAgICAgIHJldHVybiB3ZWlnaHRlZFRyZWVWaWV3LmRpYWdvbmFsKHsgc291cmNlOiBvLCB0YXJnZXQ6IG8gfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgLy8gU3Rhc2ggdGhlIG9sZCBwb3NpdGlvbnMgZm9yIHRyYW5zaXRpb24uXHJcbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsgZC54MCA9IGQueDsgZC55MCA9IGQueTsgfSk7XHJcbiAgfSwgIFxyXG4gIGRyYWdzdGFydDogZnVuY3Rpb24oZClcclxuICB7XHJcbiAgICBpZiAoZCA9PSB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdTdGFydGVkID0gdHJ1ZTtcclxuICAgIG5vZGVzID0gd2VpZ2h0ZWRUcmVlVmlldy50cmVlLm5vZGVzKGQpO1xyXG4gICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAvLyBpdCdzIGltcG9ydGFudCB0aGF0IHdlIHN1cHByZXNzIHRoZSBtb3VzZW92ZXIgZXZlbnQgb24gdGhlIG5vZGUgYmVpbmcgZHJhZ2dlZC4gT3RoZXJ3aXNlIGl0IHdpbGwgYWJzb3JiIHRoZSBtb3VzZW92ZXIgZXZlbnQgYW5kIHRoZSB1bmRlcmx5aW5nIG5vZGUgd2lsbCBub3QgZGV0ZWN0IGl0IGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7ICAgICAgXHJcbiAgfSxcclxuICBkcmFnZW5kOiBmdW5jdGlvbihkKVxyXG4gIHtcclxuICAgIGlmIChkID09IHdlaWdodGVkVHJlZVZpZXcucm9vdCkgeyByZXR1cm47IH1cclxuICAgIGRvbU5vZGUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICBpZiAod2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUpIFxyXG4gICAge1xyXG4gICAgICAvLyBub3cgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIHBhcmVudCwgYW5kIGluc2VydCBpdCBpbnRvIHRoZSBuZXcgZWxlbWVudHMgY2hpbGRyZW5cclxuICAgICAgcHJvamVjdC5yZW1vdmVOb2RlKHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgXHJcbiAgICAgIGlmKCF3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZS5jaGlsZHJlbikgeyB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZS5jaGlsZHJlbiA9IFtdOyB9XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcuc2VsZWN0ZWROb2RlLmNoaWxkcmVuLnB1c2god2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUpO1xyXG4gICAgICBcclxuICAgICAgcHJvamVjdC5leHBhbmROb2RlKHdlaWdodGVkVHJlZVZpZXcuc2VsZWN0ZWROb2RlKTsgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBub2RlIGJlaW5nIGFkZGVkIHRvIGlzIGV4cGFuZGVkIHNvIHVzZXIgY2FuIHNlZSBhZGRlZCBub2RlIGlzIGNvcnJlY3RseSBtb3ZlZCAgICBcclxuICAgIH0gXHJcbiAgXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICBkMy5zZWxlY3RBbGwoJy5naG9zdENpcmNsZScpLmF0dHIoJ2NsYXNzJywgJ2dob3N0Q2lyY2xlJyk7XHJcbiAgICBkMy5zZWxlY3QoZG9tTm9kZSkuYXR0cignY2xhc3MnLCAnbm9kZScpO1xyXG4gICAgXHJcbiAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICcnKTsgICAvLyBub3cgcmVzdG9yZSB0aGUgbW91c2VvdmVyIGV2ZW50IG9yIHdlIHdvbid0IGJlIGFibGUgdG8gZHJhZyBhIDJuZCB0aW1lXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICAgIFxyXG4gICAgaWYgKHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlICE9PSBudWxsKSBcclxuICAgIHtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGUod2VpZ2h0ZWRUcmVlVmlldy5yb290KTtcclxuICAgICAgLy93ZWlnaHRlZFRyZWVWaWV3LmNlbnRlck5vZGUod2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUpO1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZSA9IG51bGw7XHJcbiAgICB9ICAgICAgXHJcbiAgfSxcclxuICAvLyBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIHRlbXBvcmFyeSBjb25uZWN0b3IgaW5kaWNhdGluZyBkcmFnZ2luZyBhZmZpbGlhdGlvblxyXG4gIHVwZGF0ZVRlbXBDb25uZWN0b3I6IGZ1bmN0aW9uKCkgXHJcbiAge1xyXG4gICAgdmFyIGRhdGEgPSBbXTtcclxuICAgIGlmICh3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZSAhPT0gbnVsbCAmJiB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZSAhPT0gbnVsbCkgICAvLyBoYXZlIHRvIGZsaXAgdGhlIHNvdXJjZSBjb29yZGluYXRlcyBzaW5jZSB3ZSBkaWQgdGhpcyBmb3IgdGhlIGV4aXN0aW5nIGNvbm5lY3RvcnMgb24gdGhlIG9yaWdpbmFsIHRyZWVcclxuICAgIHtcclxuICAgICAgZGF0YSA9IFt7IHNvdXJjZTogeyB4OiB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZS55MCwgeTogd2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUueDAgfSwgdGFyZ2V0OiB7IHg6IHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlLnkwLCB5OiB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZS54MCB9IH1dO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgbGluayA9IHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwiLnRlbXBsaW5rXCIpLmRhdGEoZGF0YSk7XHJcbiAgICBsaW5rLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJ0ZW1wbGlua1wiKS5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSkuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xyXG4gICAgbGluay5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSk7XHJcbiAgICBsaW5rLmV4aXQoKS5yZW1vdmUoKTtcclxuICB9LFxyXG4gIG92ZXJDaXJjbGU6IGZ1bmN0aW9uKGQpIFxyXG4gIHtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuc2VsZWN0ZWROb2RlID0gZDtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcudXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gIH0sXHJcbiAgb3V0Q2lyY2xlOiBmdW5jdGlvbihkKSBcclxuICB7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICB9LFxyXG4gIGNlbnRlck5vZGU6IGZ1bmN0aW9uKHNvdXJjZSkgICAgIC8vIEZ1bmN0aW9uIHRvIGNlbnRlciBub2RlIHdoZW4gY2xpY2tlZC9kcm9wcGVkIHNvIG5vZGUgZG9lc24ndCBnZXQgbG9zdCB3aGVuIGNvbGxhcHNpbmcvbW92aW5nIHdpdGggbGFyZ2UgYW1vdW50IG9mIGNoaWxkcmVuLlxyXG4gIHtcclxuICAgIHNjYWxlID0gd2VpZ2h0ZWRUcmVlVmlldy56b29tTGlzdGVuZXIuc2NhbGUoKTtcclxuICAgIHggPSAtc291cmNlLnkwO1xyXG4gICAgeSA9IC1zb3VyY2UueDA7XHJcbiAgICB4ID0geCAqIHNjYWxlICsgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJXaWR0aCAvIDQ7XHJcbiAgICB5ID0geSAqIHNjYWxlICsgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgZDMuc2VsZWN0KCdnJykuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHggKyBcIixcIiArIHkgKyBcIilzY2FsZShcIiArIHNjYWxlICsgXCIpXCIpO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy56b29tTGlzdGVuZXIuc2NhbGUoc2NhbGUpO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy56b29tTGlzdGVuZXIudHJhbnNsYXRlKFt4LCB5XSk7XHJcbiAgfSwgICAgICAgICAgXHJcbiAgY29tcHV0ZU5vZGVTaXplOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBub2RlU2l6ZSA9IE1JTl9OT0RFX1NJWkU7XHJcbiAgICBcclxuICAgIGlmKHRyZWUuZmllbGQpXHJcbiAgICB7XHJcbiAgICAgIGlmKG5vZGUudmFsdWVzICYmIG5vZGUudmFsdWVzW3RyZWUuZmllbGQubmFtZV0pXHJcbiAgICAgIHtcclxuICAgICAgICAvL25vZGVTaXplID0gMiAqIE1hdGguUEkgKiBNYXRoLnNxcnQoTUFYX05PREVfU0laRSAqIG5vZGUudmFsdWVzW3RyZWUuZmllbGQubmFtZV0gLyB0cmVlLm1heEZpZWxkVmFsdWUgLyBNYXRoLlBJKTtcclxuICAgICAgICBub2RlU2l6ZSA9IE1BWF9OT0RFX1NJWkUgKiBNYXRoLnNxcnQobm9kZS52YWx1ZXNbdHJlZS5maWVsZC5uYW1lXSAvIHRyZWUubWF4RmllbGRWYWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmKG5vZGVTaXplIDwgTUlOX05PREVfU0laRSkgeyBub2RlU2l6ZSA9IE1JTl9OT0RFX1NJWkU7IH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIG5vZGVTaXplOyAgICAgICBcclxuICB9ICAgXHJcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9