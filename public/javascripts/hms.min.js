function aggregate_any(e,a){if(e.children&&0!==e.children.length){for(var l=0,n=0;n<e.children.length;n++)l+=aggregate_any(e.children[n],a);return e.values||(e.values={}),e.values[a]=l,document.getElementById(a+e.id).value=l,l}return e.values&&e.values[a]?parseFloat(e.values[a]):0}
"use strict";var REDIPS=REDIPS||{};REDIPS.drag=function(){var e,o,t,n,r,d,l,i,a,s,c,f,p,g,u,v,y,m,h,w,E,b,D,I,S,R,P,x,N,T,C,B,j,k=null,L={width:0,height:0},M={width:null,height:null,container:[],obj:null},O={page:{x:0,y:0},div:{x:0,y:0},flag:{x:0,y:0}},Y=[],H=[],W=null,_=null,X={x:0,y:0},A={x:0,y:0,value:7,flag:!1},V=!1,z=!1,F=null,q=null,K=null,$=null,G=null,J=null,Q=!1,U=!1,Z={colorTd:"#FFCFAE",colorTr:"#9BB3DA"},ee={enable:!0,bound:25,speed:20},oe={borderDisabled:"dotted",opacityDisabled:"",rowEmptyColor:"white"},te={},ne={keyDiv:!1,keyRow:!1,sendBack:!1,drop:!1},re={cloned:function(){},clonedDropped:function(){},clonedEnd1:function(){},clonedEnd2:function(){},dropped:function(){},droppedBefore:function(){},finish:function(){},notCloned:function(){},notMoved:function(){},rowChanged:function(){},rowClicked:function(){},rowCloned:function(){},rowDropped:function(){},rowDroppedBefore:function(){},rowDroppedSource:function(){},rowMoved:function(){},rowNotCloned:function(){},rowNotMoved:function(){}};return e=function(){if(W=document.getElementById("redips-drag"),j=m(),!document.getElementById("redips_clone")){var e=document.createElement("div");e.id="redips_clone",e.style.width=e.style.height="1px",W.appendChild(e)}o("init",".redips-drag"),T=document.getElementById("treeTable"),T.redips={},c(),REDIPS.event.add(window,"resize",c),REDIPS.event.add(window,"scroll",y)},n=function(e){var o,t,n,l,i=e||window.event;if(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),V=i.shiftKey,window.getSelection)window.getSelection().removeAllRanges();else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(a){}return n=X.x=i.clientX,l=X.y=i.clientY,A.x=n,A.y=l,A.flag=!1,REDIPS.drag.objOld=U=Q||this,REDIPS.drag.obj=Q=this,z=Q.className.indexOf("redips-clone")>-1,REDIPS.drag.obj=Q=R(Q),y(),F=$=null,f(),K=q=F,J=G=$,REDIPS.drag.event.rowClicked(te.current),null!==F&&null!==$||(f(),K=q=F,J=G=$,null!==F&&null!==$)?(C=B=!1,REDIPS.event.add(document,"mousemove",d),REDIPS.event.add(document,"mouseup",r),null!==F&&(N=u(F)),t=D(T,"position"),"fixed"!==t&&(t=D(T.parentNode,"position")),o=v(Q,t),k=[l-o[0],o[1]-n,o[2]-l,n-o[3]],!1):!0},R=function(e){var o,t,n;return"DIV"===e.nodeName?(n=e,e=I("TR",e),void 0===e.redips&&(e.redips={}),e.redips.div=n,e):(t=e,o=document.createElement("table"),o.innerHTML='<tr id="'+t.id+'" class="'+t.classList+'">'+t.innerHTML+"</tr>",o.redips={},o.redips.sourceRow=t,E(t,o.rows[0]),document.getElementById("redips_clone").appendChild(o),o)},P=function(e){var o,t,n;n=function(e){var o;void 0!==e.redips&&e.redips.emptyRow?S(e,"empty",REDIPS.drag.style.rowEmptyColor):(o=I("TABLE",e),o.deleteRow(e.rowIndex))};var r=Q;e>T.rows.length-1&&(e=T.rows.length-1);var d=T.rows[e];t=r.getElementsByTagName("tr")[0],r.parentNode.removeChild(r),o=REDIPS.drag.event.rowDroppedBefore(T,r.redips.sourceRow.rowIndex),o!==!1&&(e<T.rows.length?d.parentNode.insertBefore(t,d.nextSibling):(d.parentNode.appendChild(t),d=T.rows[0]),B||n(r.redips.sourceRow),delete t.redips.emptyRow,REDIPS.drag.event.rowDropped(d))},r=function(e){var o,t,n,a,s,c,f=e||window.event;if(n=f.clientX,a=f.clientY,O.flag.x=O.flag.y=0,REDIPS.event.remove(document,"mousemove",d),REDIPS.event.remove(document,"mouseup",r),W.onselectstart=null,i(Q),M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,O.flag.x=O.flag.y=0,null===F||null===$)REDIPS.drag.event.notMoved();else{if(REDIPS.drag.td.target=te.target=T.rows[F].cells[$],g(F,N),o=F,C)if(K===o){for(t=Q.getElementsByTagName("tr")[0],U.style.backgroundColor=t.style.backgroundColor,s=0;s<t.cells.length;s++)U.cells[s].style.backgroundColor=t.cells[s].style.backgroundColor;Q.parentNode.removeChild(Q),delete U.redips.emptyRow,B?REDIPS.drag.event.rowNotCloned():REDIPS.drag.event.rowDroppedSource(te.target)}else P(o);else REDIPS.drag.event.rowNotMoved();B||A.flag?B&&K===F&&J===$?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):B&&REDIPS.drag.clone.drop===!1&&(n<T.redips.offset[3]||n>T.redips.offset[1]||a<T.redips.offset[0]||a>T.redips.offset[2])?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):(c=REDIPS.drag.event.droppedBefore(te.target),l(c)):REDIPS.drag.event.notMoved(),y(),REDIPS.drag.event.finish()}q=G=null},l=function(e){var o,t=null;if(e!==!1){if(ne.sendBack===!0){o=te.target.getElementsByTagName("DIV");for(var n=0;n<o.length;n++)if(Q!==o[n]&&0===Q.id.indexOf(o[n].id)){t=o[n];break}if(t)return b(t,1),void Q.parentNode.removeChild(Q)}te.target.appendChild(Q),a(Q),REDIPS.drag.event.dropped(te.target),B&&(REDIPS.drag.event.clonedDropped(te.target),b(U,-1))}else B&&Q.parentNode&&Q.parentNode.removeChild(Q)},a=function(e,o){e.onmousedown=o===!1?null:n},i=function(e){e.style.top="",e.style.left="",e.style.position="",e.style.zIndex=""},d=function(e){var o,t,n,r,d,l,i,a=e||window.event,c=REDIPS.drag.scroll.bound;if(t=X.x=a.clientX,n=X.y=a.clientY,r=Math.abs(A.x-t),d=Math.abs(A.y-n),C||((z||REDIPS.drag.clone.keyRow===!0&&V)&&(B=!0),REDIPS.drag.objOld=U=Q,REDIPS.drag.obj=Q=R(Q),Q.style.zIndex=999,Q.style.position="fixed",y(),f(),B?REDIPS.drag.event.rowCloned():REDIPS.drag.event.rowMoved(),p(),t>L.width-k[1]&&(Q.style.left=L.width-(k[1]+k[3])+"px"),n>L.height-k[2]&&(Q.style.top=L.height-(k[0]+k[2])+"px")),C=!0,t>k[3]&&t<L.width-k[1]&&(Q.style.left=t-k[3]+"px"),n>k[0]&&n<L.height-k[2]&&(Q.style.top=n-k[0]+"px"),t<_[1]&&t>_[3]&&n<_[2]&&n>_[0]&&0===O.flag.x&&0===O.flag.y&&(H.containTable||t<H[3]||t>H[1]||n<H[0]||n>H[2])&&(f(),s()),REDIPS.drag.scroll.enable)for(O.page.x=c-(L.width/2>t?t-k[3]:L.width-t-k[1]),O.page.x>0?(O.page.x>c&&(O.page.x=c),i=0,O.page.x*=t<L.width/2?-1:1,O.page.x<0&&0>=i||O.page.x>0&&i>=M.width-L.width||0===O.flag.x++&&(REDIPS.event.remove(window,"scroll",y),h(window))):O.page.x=0,O.page.y=c-(L.height/2>n?n-k[0]:L.height-n-k[2]),O.page.y>0?(O.page.y>c&&(O.page.y=c),i=window.pageYOffset||document.documentElement.scrollTop,O.page.y*=n<L.height/2?-1:1,O.page.y<0&&0>=i||O.page.y>0&&i>=M.height-L.height||0===O.flag.y++&&(REDIPS.event.remove(window,"scroll",y),w(window))):O.page.y=0,l=0;l<M.container.length;l++){if(o=M.container[l],o.autoscroll&&t<o.offset[1]&&t>o.offset[3]&&n<o.offset[2]&&n>o.offset[0]){O.div.x=c-(o.midstX>t?t-k[3]-o.offset[3]:o.offset[1]-t-k[1]),O.div.x>0?(O.div.x>c&&(O.div.x=c),O.div.x*=t<o.midstX?-1:1,0===O.flag.x++&&(REDIPS.event.remove(o.div,"scroll",y),h(o.div))):O.div.x=0,O.div.y=c-(o.midstY>n?n-k[0]-o.offset[0]:o.offset[2]-n-k[2]),O.div.y>0?(O.div.y>c&&(O.div.y=c),O.div.y*=n<o.midstY?-1:1,0===O.flag.y++&&(REDIPS.event.remove(o.div,"scroll",y),w(o.div))):O.div.y=0;break}O.div.x=O.div.y=0}a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},s=function(){(F!==q||$!==G)&&(null!==q&&null!==G&&(g(q,N),REDIPS.drag.td.previous=te.previous=T.rows[q].cells[G],REDIPS.drag.td.current=te.current=T.rows[F].cells[$],F!==q&&REDIPS.drag.event.rowChanged(te.current)),p())},c=function(){L.width=window.innerWidth,L.height=window.innerHeight,M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,y()},f=function(){var e,o,t,n,r,d,l=[];if(e=function(){null!==q&&null!==G&&(F=q,$=G)},n=X.x,r=X.y,l[0]=T.redips.offset[0],l[1]=T.redips.offset[1],l[2]=T.redips.offset[2],l[3]=T.redips.offset[3],void 0!==T.sca&&(l[0]=l[0]>T.sca.offset[0]?l[0]:T.sca.offset[0],l[1]=l[1]<T.sca.offset[1]?l[1]:T.sca.offset[1],l[2]=l[2]<T.sca.offset[2]?l[2]:T.sca.offset[2],l[3]=l[3]>T.sca.offset[3]?l[3]:T.sca.offset[3]),l[3]<n&&n<l[1]&&l[0]<r&&r<l[2]){for(o=T.redips.row_offset,F=0;F<o.length-1;F++)if(void 0!==o[F]){if(H[0]=o[F][0],void 0!==o[F+1])H[2]=o[F+1][0];else for(d=F+2;d<o.length;d++)if(void 0!==o[d]){H[2]=o[d][0];break}if(r<=H[2])break}t=F,F===o.length-1&&(H[0]=o[F][0],H[2]=T.redips.offset[2]),$=0,0>F||0>$?e():F!==t&&(H[0]=o[F][0],H[2]=H[0]+T.rows[F].cells[$].offsetHeight,(r<H[0]||r>H[2])&&e())}},p=function(){null!==F&&null!==$&&(N=u(F),g(F),q=F,G=$)},g=function(e,o){var t,n;t=T.rows[e];for(var r=0;r<t.cells.length;r++)n=t.cells[r].style,n.backgroundColor=void 0===o?REDIPS.drag.hover.colorTr:o.color[r].toString(),void 0!==REDIPS.drag.hover.borderTr&&(void 0===o?K>F?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:(n.borderTopWidth=o.top[r][0],n.borderTopStyle=o.top[r][1],n.borderTopColor=o.top[r][2],n.borderBottomWidth=o.bottom[r][0],n.borderBottomStyle=o.bottom[r][1],n.borderBottomColor=o.bottom[r][2]))},u=function(e){var o,t,n={color:[],top:[],right:[],bottom:[],left:[]},r=function(e,o){var t="border"+o+"Width",n="border"+o+"Style",r="border"+o+"Color";return[D(e,t),D(e,n),D(e,r)]};o=T.rows[e];for(var d=0;d<o.cells.length;d++)t=o.cells[d],n.color[d]=t.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTr&&(n.top[d]=r(t,"Top"),n.bottom[d]=r(t,"Bottom"));return n},v=function(e,o,t){var n=0,r=0,d=e;if("fixed"!==o&&(n=0-j[0],r=0-j[1]),void 0===t||t===!0){do n+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName)}else do n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName);return[r,n+d.offsetWidth,r+d.offsetHeight,n]},y=function(){var e,o,t;j=m(),e=[],o=D(T,"position"),"fixed"!==o&&(o=D(T.parentNode,"position"));for(var n=T.rows.length-1;n>=0;n--)"none"!==T.rows[n].style.display&&(e[n]=v(T.rows[n],o));T.redips.offset=v(T,o),T.redips.row_offset=e,_=v(W);for(var n=0;n<M.container.length;n++)o=D(M.container[n].div,"position"),t=v(M.container[n].div,o,!1),M.container[n].offset=t,M.container[n].midstX=(t[1]+t[3])/2,M.container[n].midstY=(t[0]+t[2])/2},m=function(){var e=window.pageYOffset||document.documentElement.scrollTop,o=0;return[o,e]},h=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.x>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[0],r=M.width-L.width,d=O.page.x):(n=M.obj.scrollLeft,r=M.obj.scrollWidth-M.obj.clientWidth,d=O.div.x),O.flag.x>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(d,0),n=m()[0],o=parseInt(Q.style.left,10),isNaN(o)&&(o=0)):M.obj.scrollLeft+=d,setTimeout(h,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.x=0,H=[0,0,0,0])},w=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.y>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[1],r=M.height-L.height,d=O.page.y):(n=M.obj.scrollTop,r=M.obj.scrollHeight-M.obj.clientHeight,d=O.div.y),O.flag.y>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(0,d),n=m()[1],o=parseInt(Q.style.top,10),isNaN(o)&&(o=0)):M.obj.scrollTop+=d,setTimeout(w,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.y=0,H=[0,0,0,0])},E=function(e,o){var t,n=[];n[0]=function(e,o){e.redips&&(o.redips={},o.redips.enabled=e.redips.enabled,o.redips.container=e.redips.container,e.redips.enabled&&a(o))},n[1]=function(e,o){e.redips&&(o.redips={},o.redips.emptyRow=e.redips.emptyRow)},t=function(t){var r,d,l=["DIV","TR"];r=e.getElementsByTagName(l[t]),d=o.getElementsByTagName(l[t]);for(var i=0;i<d.length;i++)n[t](r[i],d[i])},"DIV"===e.nodeName?n[0](e,o):"TR"===e.nodeName&&n[1](e,o),t(0),t(1)},b=function(e,t){var n,r,d,l;l=e.className,n=l.match(/climit(\d)_(\d+)/),null!==n&&(r=parseInt(n[1],10),d=parseInt(n[2],10),0===d&&1===t&&(l+=" redips-clone",2===r&&o(!0,e)),d+=t,l=l.replace(/climit\d_\d+/g,"climit"+r+"_"+d),0>=d&&(l=l.replace("redips-clone",""),2===r?(o(!1,e),REDIPS.drag.event.clonedEnd2()):REDIPS.drag.event.clonedEnd1()),e.className=x(l))},o=function(e,o){var n=[];void 0===o?n=W.getElementsByTagName("div"):"string"==typeof o?n=document.querySelectorAll(o):"object"!=typeof o||"DIV"===o.nodeName&&-1!==o.className.indexOf("redips-drag")?n[0]=o:n=o.getElementsByTagName("div"),t(e,n)},t=function(e,o){var t,n,r,d,l,i,s,c,f,p,g,u=[],m=/\bredips-drag\b/i,h=/\bredips-noautoscroll\b/i;for(l=REDIPS.drag.style.opacityDisabled,e===!0||"init"===e?(d=REDIPS.drag.style.borderEnabled,i="move",f=!0):(d=REDIPS.drag.style.borderDisabled,i="auto",f=!1),t=0,n=0;t<o.length;t++)if(m.test(o[t].className))"init"===e||void 0===o[t].redips?(o[t].redips={},o[t].redips.container=W):e===!0&&"number"==typeof l?(o[t].style.opacity="",o[t].style.filter=""):e===!1&&"number"==typeof l&&(o[t].style.opacity=l/100,o[t].style.filter="alpha(opacity="+l+")"),a(o[t],f),o[t].style.borderStyle=d,o[t].style.cursor=i,o[t].redips.enabled=f;else if("init"===e&&(s=D(o[t],"overflow"),"visible"!==s)){for(REDIPS.event.add(o[t],"scroll",y),g=D(o[t],"position"),p=v(o[t],g,!1),c=!h.test(o[t].className),M.container[n]={div:o[t],offset:p,midstX:(p[1]+p[3])/2,midstY:(p[0]+p[2])/2,autoscroll:c},u=o[t].getElementsByTagName("table"),r=0;r<u.length;r++)u[r].sca=M.container[n];n++}},D=function(e,o){return e&&e.currentStyle?e.currentStyle[o]:e&&window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[o]:void 0},I=function(e,o){for(o=o.parentNode;o&&o.nodeName!==e;)o=o.parentNode;return o},x=function(e){return void 0!==e&&(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ")),e},S=function(e,o,t){var n,r,d;if("string"==typeof e&&(e=document.getElementById(e),e=I("TABLE",e)),"TR"===e.nodeName)for(n=e.getElementsByTagName("td"),r=0;r<n.length;r++)if(n[r].style.backgroundColor=t?t:"","empty"===o)n[r].innerHTML="";else for(d=0;d<n[r].childNodes.length;d++)1===n[r].childNodes[d].nodeType&&(n[r].childNodes[d].style.opacity=o/100,n[r].childNodes[d].style.filter="alpha(opacity="+o+")");else e.style.opacity=o/100,e.style.filter="alpha(opacity="+o+")",e.style.backgroundColor=t?t:""},{obj:Q,objOld:U,td:te,hover:Z,scroll:ee,style:oe,clone:ne,init:e,enableDrag:o,enableDivs:t,rowOpacity:S,getScrollPosition:m,getStyle:D,findParent:I,event:re}}(),REDIPS.event||(REDIPS.event=function(){var e,o;return e=function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},o=function(e,o,t){e.removeEventListener?e.removeEventListener(o,t,!1):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=null},{add:e,remove:o}}());
"use strict";var redips={};redips.init=function(){var e=REDIPS.drag;e.init(),e.event.rowDropped=function(o){var n=parseInt(e.objOld.id.replace("rowid","")),t=parseInt(o.id.replace("rowid",""));spreadSheet.moveNode(n,t)},e.event.rowDroppedSource=function(){e.rowOpacity(e.objOld,100)},e.event.rowMoved=function(){e.rowOpacity(e.obj,85),e.rowOpacity(e.objOld,20,"White")},e.event.rowClicked=function(){},e.event.rowNotMoved=function(){},e.event.rowCloned=function(){},e.event.rowNotCloned=function(){},e.event.rowDeleted=function(){},e.event.rowUndeleted=function(){e.rowOpacity(e.objOld,100)}};
var resizeColumnLeft=0,resizeField="0",MIN_COLUMN_WIDTH=70,GRIPS_WIDTH=16,startResize=function(e,i){$(document).bind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).bind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="visible",document.getElementById("resizeLine").style.left=e.pageX+"px",resizeColumnLeft=$(i.parentNode).position().left,resizeField=i.parentNode.id.replace("colHeader","")},resizeEnd=function(e){$(document).unbind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).unbind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="hidden";var i=e.pageX-resizeColumnLeft-GRIPS_WIDTH;MIN_COLUMN_WIDTH>i&&(i=MIN_COLUMN_WIDTH),document.getElementById("colHeaderInput"+resizeField).style.width=i+"px";for(var t=document.querySelectorAll(".fieldInput"+resizeField),r=0;r<t.length;r++)t[r].style.width=i+8+"px"},resizeDrag=function(e){e.pageX>resizeColumnLeft+MIN_COLUMN_WIDTH+GRIPS_WIDTH&&(document.getElementById("resizeLine").style.left=e.pageX+"px")};
var fieldMenuController={displayFieldMenu:function(e,i,t){var n=project.getField(e);this.menu=new FieldMenu(n,spreadSheet.fields),fieldMenuView.render(this.menu,i,t)},handleClick:function(e){var i=this.menu.getMenuItem(e,this.menu),t=this.menu.getMenuItemParent(e,this.menu);if(i.field){var n=project.getField(i.field.name);n[i.varName]=i.value,fieldMenuView.setCheckmarks(e,t.items),t===this.menu&&spreadSheet.updateNumberFieldFormatting(n)}}};
$(document).ready(function(){scrollBarWidth=getScrollBarWidth(),hms.init()});var hms={init:function(){projects.init(function(e){headerView.render(e)})},openProject:function(e){projects.openProject(e,function(e){project.tree=e,spreadSheet.display()}),this.view&&this.view.destroy(),this.view=spreadSheetView},saveToDatabase:function(){project.saveToDatabase()},switchView:function(){this.view===spreadSheetView?(this.view.destroy(),this.view=treeView,treeView.display()):this.view===treeView&&(this.view.destroy(),this.view=spreadSheetView,spreadSheet.display())},createNewProject:function(e){projects.createNewProject(e),this.view.destroy(),this.view=spreadSheetView,spreadSheet.display()},nextProjectID:function(){return projects.nextProjectID++}},scrollBarWidth,getScrollBarWidth=function(){var e,t;return e=document.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t};
var spreadSheet={display:function(){project.cleanseData(),spreadSheetView.render(project.tree)},fields:function(){return project.fields()},tree:function(){return project.tree},updateFieldValue:function(e,d){var r=project.findNode(d);r&&(r.values||(r.values={}),r.values[e]=spreadSheetView.getFieldValue(e,d)),project.tree.children.forEach(function(d){aggregate_any(d,e)})},rawValue:function(e,d){var r=project.findNode(parseInt(d));return r.values&&r.values[e]?r.values[e]:""},formattedValue:function(e,d){return d.values&&d.values[e.name]?Field.formatValue(e,d.values[e.name]):""},addField:function(e){project.addField(e),spreadSheetView.addField(e)},hasChildren:function(e){return!project.isNodeChildless(e)},childrenHidden:function(e){return project.isNodeCollapsed(e)},moveNode:function(e,d){var r=project.findNode(d),o=project.findNode(e);spreadSheet.removeNode(o),project.addNode(o,r),spreadSheet.addNode(o,r)},removeNode:function(e){var d=project.findParent(e.id);project.traverse(project.getChildren,spreadSheetView.removeNode,e),project.removeNode(e),spreadSheetView.redrawNodeContent(d)},deleteNode:function(e){var d=project.findNode(e);spreadSheet.removeNode(d)},addNode:function(e,d){project.isNodeCollapsed(d)&&spreadSheet.expandNode(d),spreadSheetView.redrawNodeContent(d),spreadSheetView.insertNodeAfter(e,d)},copyNode:function(e){var d=project.findNode(e),r=project.cloneNode(d);project.insertNode(r,d),spreadSheetView.insertNodeBefore(r,d)},expandNode:function(e){project.expandNode(e),spreadSheetView.expandNode(e),spreadSheetView.redrawNodeContent(e)},collapseNode:function(e){project.traverseDescendants(project.getChildren,spreadSheetView.removeNode,e),project.collapseNode(e),spreadSheetView.redrawNodeContent(e)},toggleNode:function(e){var d=project.findNode(e);project.isNodeExpanded(d)?spreadSheet.collapseNode(d):project.isNodeCollapsed(d)&&spreadSheet.expandNode(d)},updateNodeName:function(e,d){project.findNode(e).name=d},updateNumberFieldFormatting:function(e){project.traverse(project.getChildren,function(d){if(d.values){var r=Field.formatValue(e,Number(d.values[e.name]));spreadSheetView.updateFieldValue(e.name,d.id,r)}})},enableDragging:function(e){project.traverse(project.getChildren,spreadSheetView.enableDragging,e)}};
var Field=function(i){this.name=i,this.datatype=Field.NUMBER,this.format=Field.NUMBER_FORMAT,this.precision=2,this.agg_type=Field.NO_AGGREGATION,this.agg_qty_field=null};Field.NUMBER="0",Field.STRING="1",Field.CHOICE="2",Field.NO_AGGREGATION="0",Field.SUM_ANY_AGGREGATION="1",Field.NUMBER_FORMAT="0",Field.PERCENT_FORMAT="1",Field.SCIENTIFIC_FORMAT="2",Field.formatValue=function(i,e){if(i.datatype===Field.NUMBER){if(e=Number(e),i.format===Field.NUMBER_FORMAT)return e.toFixed(i.precision);if(i.format===Field.PERCENT_FORMAT)return(100*e).toFixed(i.precision)+"%";if(i.format===Field.SCIENTIFIC_FORMAT)return e.toExponential(i.precision)}else{if(i.datatype===Field.STRING)return e;i.datatype===Field.CHOICE}};
var FieldMenu=function(e,i){var t=new FieldMenuItem("Number",Field.NUMBER,"datatype",e),n=new FieldMenuItem("Format"),m=new FieldMenuItem("Number",Field.NUMBER_FORMAT,"format",e);m.items.push(new FieldMenuItem("0",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",m.items.push(new FieldMenuItem(s,u,"precision",e));n.items.push(m);var r=new FieldMenuItem("Percent",Field.PERCENT_FORMAT,"format",e);r.items.push(new FieldMenuItem("0%",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",r.items.push(new FieldMenuItem(s+"%",u,"precision",e));n.items.push(r);var a=new FieldMenuItem("Scientific",Field.SCIENTIFIC_FORMAT,"format",e);a.items.push(new FieldMenuItem("0e+0",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",a.items.push(new FieldMenuItem(s+"e+0",u,"precision",e));n.items.push(a),t.items.push(n);var d=new FieldMenuItem("Aggregation");d.items.push(new FieldMenuItem("No Aggregation",Field.NO_AGGREGATION,"agg_type",e));var l=new FieldMenuItem("Sum any defined children",Field.SUM_ANY_AGGREGATION,"agg_type",e);for(var F in i){var p=i[F];p.name!=e.name&&l.items.push(new FieldMenuItem(p.name,p.name,"agg_qty_field",e))}d.items.push(l),t.items.push(d),this.items=[],this.items.push(t),this.items.push(new FieldMenuItem("Text",Field.STRING,"datatype",e))};FieldMenu.prototype.getMenuItem=function(e,i){if(e===i.id)return i;if(i.items&&i.items.length>0)for(var t,n=0;n<i.items.length;n++)if(t=this.getMenuItem(e,i.items[n]))return t},FieldMenu.prototype.getMenuItemParent=function(e,i){if(i.items&&i.items.length>0)for(var t=0;t<i.items.length;t++){if(i.items[t].id===e)return i;var n=this.getMenuItemParent(e,i.items[t]);if(n)return n}};
var FieldMenuItem=function(i,e,t,s){this.display=i,this.value=e,this.varName=t,this.field=s,this.items=[],this.id=FieldMenuItem.id++,this.parent=-1,this.checked=s?s[t]===e:!1};FieldMenuItem.id=0;
var project={saveToDatabase:function(){$.ajax({type:"POST",url:"/api/tree",dataType:"json",data:{json:JSON.stringify(this.tree)}})},fields:function(){return this.tree.fields},cleanseData:function(){this.traverse(project.getChildren,function(e){e.children||(e.children=[]),delete e.parent})},addField:function(e){this.tree.fields.push(new Field(e))},getField:function(e){for(var n in this.tree.fields){var i=this.tree.fields[n];if(i.name===e)return i}},removeNode:function(e){var n=this.findParent(e.id);n?n.children.splice(n.children.indexOf(e),1):this.tree.children.splice(this.tree.children.indexOf(e),1)},addNode:function(e,n){n.children.push(e),project.setDepths(n)},setDepths:function(e){e.children.forEach(function(n,i){n.depth=e.depth+1,project.setDepths(n)})},insertNode:function(e,n){var i=this.findParent(n.id);i?i.children.splice(i.children.indexOf(n),0,e):this.tree.children.splice(this.tree.children.indexOf(n),0,e)},cloneNode:function(e){var n=$.extend(!0,{},e);return this.traverse(this.getChildren,function(e){e.id=project.tree.nextNodeID++},n),n},expandNode:function(e){e._children&&(e.children=e._children,e._children=[])},fullyExpandNode:function(e){e._children&&(e.children=e._children,e.children.forEach(project.fullyExpandNode),e._children=[])},collapseNode:function(e){e.children&&(e._children=e.children,e.children=[])},fullyCollapseNode:function(e){e.children&&(e._children=e.children,e._children.forEach(project.fullyCollapseNode),e.children=[])},toggleExpansion:function(e){e.children?(e._children=e.children,e.children=[]):e._children&&(e.children=e._children,e._children=[])},hasChildren:function(e){return e.children&&0===e.children.length||e._children&&0===e._children.length},isNodeChildless:function(e){return!(e.children&&0!==e.children.length||e._children&&0!==e._children.length)},isNodeCollapsed:function(e){return e._children&&e._children.length>0},isNodeExpanded:function(e){return e.children&&e.children.length>0},findNode:function(e,n){if(n||(n=this.tree),n.id===e)return n;for(var i in n.children){var r=this.findNode(e,n.children[i]);if(r)return r}},findParent:function(e,n,i){if(n||(n=this.tree),n.id===e)return i;for(var r in n.children){var t=this.findParent(e,n.children[r],n);if(t)return t}},traverse:function(e,n,i){i||(i=project.tree),n(i);var r=e(i);for(var t in r)project.traverse(e,n,r[t])},traverseDescendants:function(e,n,i){i||(i=project.tree),i.children.forEach(function(i){project.traverse(e,n,i)})},getChildren:function(e){return e.children&&e.children.length>0?e.children:null}};
var projects={init:function(e){$.ajax({type:"GET",url:"api/projects"}).done(function(t){this.data=t,e(t.projects)})},createNewProject:function(e){$.ajax({type:"POST",url:"/api/addProject?projectName="+e}),project.tree={projectID:project.nextProjectID,projectName:e,name:e,version:1,nextNodeID:2,depth:0,fields:[],children:[{id:1,name:e,depth:1,children:[]}]},project.saveToDatabase()},openProject:function(e,t){$.ajax({type:"GET",url:"api/tree?projectID="+e}).done(function(e){t(e)})}};
var DOWN_ARROW_IMAGE_PATH="images/down-arrow.png",CHECK_MARK_IMAGE_PATH="images/checkmark.png",BLANK_MARK_IMAGE_PATH="images/blankmark.png",ENTER_KEY=13,KEY_UP_ARROW=38,KEY_DOWN_ARROW=40,KEY_LEFT_ARROW=37,KEY_RIGHT_ARROW=39,DEFAULT_NODE_INPUT_WIDTH=390;
function debug(){}debug.print=function(n){console.log(JSON.stringify(n,null,"	"))},debug.printTree=function(){console.log(JSON.stringify(project.tree,null,"	"))};
var fieldMenuView={render:function(e,d,i){var n='<div id="fieldMenu" style="left:'+(d-10)+"px;top:"+(i-10)+'px;">';n+=this.renderMenu(e),n+="</div>",$("body").append($(n)),$("#fieldMenu").mouseleave(function(){$("#fieldMenu").remove()})},renderMenu:function(e){var d="<ul>";return e.items.forEach(function(e){d+='<li onclick="fieldMenuController.handleClick('+e.id+');">';var i="uncheckedFieldMenuItem";e.field&&e.checked&&(i="checkedFieldMenuItem"),d+='<img id="FieldMenuItem'+e.id+'" src="'+CHECK_MARK_IMAGE_PATH+'" class="'+i+'"/>',d+=e.display,e.items&&e.items.length>0&&(d+='<div class="arrowRight"></div>',d+=fieldMenuView.renderMenu(e)),d+="</li>"}),d+"</ul>"},setCheckmarks:function(e,d){d.forEach(function(e){$("#FieldMenuItem"+e.id).removeClass("checkedFieldMenuItem").addClass("uncheckedFieldMenuItem")}),$("#FieldMenuItem"+e).removeClass("uncheckedFieldMenuItem").addClass("checkedFieldMenuItem")}};
var headerView={render:function(e){var t='<select id="projectSelector" class="form-control"><option id="selectProjectOption" value="0">Select Project...</option>';e.forEach(function(e){t+='<option value="'+e.id+'">'+e.name+"</option>"}),t+='<option id="newProjectOption" value="-1">Create New Project...</option></select><input id="editNewProjectNameInput" class="form-control"></input><a href="#" id="save-database-button" class="btn btn-default">Save to Database</a><a href="#" id="switchViewButton" class="btn btn-default">Switch View</a>',$("#header").html(t),$("#projectSelector").change(function(){headerView.selectProject($(this))}),$("#save-database-button").click(function(){hms.saveToDatabase()}),$("#switchViewButton").click(function(){hms.switchView()}),$("#editNewProjectNameInput").keyup(function(e){headerView.createNewProject(e)})},selectProject:function(e){"newProjectOption"===e.find(":selected").attr("id")?($("#editNewProjectNameInput").val("Type New Project Name and Press Enter to Create"),$("#editNewProjectNameInput").show().focus().select()):($("#selectProjectOption").remove(),hms.openProject(e.val()))},createNewProject:function(e){if(e.keyCode==ENTER_KEY){$("#selectProjectOption").remove();var t=$("#editNewProjectNameInput").val();$("#editNewProjectNameInput").hide();var o=hms.nextProjectID(),c=document.createElement("option");c.text=t,c.value=o.toString(),$(c).insertBefore("#projectSelector option:nth-child("+$("#projectSelector").length+")"),$("#projectSelector").val(o),hms.createNewProject(t)}}};
var projectAction={init:function(){$("#project-action-container").html(projectAction.markup()),$("#projectActionInput").keyup(function(t){t.keyCode==ENTER_KEY&&projectAction.enterPressed()}),$("#projectActionSelector").change(projectAction.handle)},handle:function(){"addField"==$("#projectActionSelector").val()&&($("#projectActionInput").val("Type New Field Name and Press Enter to Create"),$("#projectActionInput").show().focus().select())},enterPressed:function(){"addField"==$("#projectActionSelector").val()&&(spreadSheet.addField($("#projectActionInput").val()),$("#projectActionInput").hide(),$("#projectActionSelector").val("blank"))},markup:function(){return'<table><tr id="headerRow"><tr><div id="project-select-container"><select id="projectActionSelector" class="form-control"><option value="blank"></option><option value="addField">Add Field</option></select><input id="projectActionInput" class="form-control"></input></div></tr><table>'}};
var spreadSheetKeyHandler={checkKey:function(e){if(e=e||window.event,e.keyCode==KEY_UP_ARROW){e.preventDefault();var t=$(spreadSheetKeyHandler.findAncestor(document.activeElement,"tr")).prev()[0];t&&$("#"+spreadSheetKeyHandler.getNextElementID(t)).focus()}else if(e.keyCode==KEY_DOWN_ARROW){e.preventDefault();var n=$(spreadSheetKeyHandler.findAncestor(document.activeElement,"tr")).next()[0];n&&$("#"+spreadSheetKeyHandler.getNextElementID(n)).focus()}else e.keyCode==KEY_RIGHT_ARROW?(e.preventDefault(),$(spreadSheetKeyHandler.findAncestor(document.activeElement,"td")).next().find("input").focus()):e.keyCode==KEY_LEFT_ARROW&&(e.preventDefault(),$(spreadSheetKeyHandler.findAncestor(document.activeElement,"td")).prev().find("input").focus())},getNextElementID:function(e){var t=document.activeElement.id;if(t.indexOf("nodeInput")>-1)return"nodeInput"+e.id.replace("rowid","");for(var n=document.activeElement.className.split(" "),r=0;r<n.length;r++){var d=n[r];if(d.indexOf("fieldInput")>-1&&"fieldInput"!=d){var a=d.replace("fieldInput","");return a+e.id.replace("datarowid","")}}},findAncestor:function(e,t){for(t=t.toLowerCase();e&&e.parentNode;)if(e=e.parentNode,e.tagName&&e.tagName.toLowerCase()===t)return e}};
var spreadSheetView={render:function(){$(document).on("keydown",spreadSheetKeyHandler.checkKey),$("body").append(this.spreadSheetMarkup()),projectAction.init(),this.renderFieldsRow(),this.renderDataTable(),this.renderNodeColumn()},destroy:function(){$("#spreadSheetView").remove(),$(document).off("keydown")},spreadSheetMarkup:function(){return'<div id="spreadSheetView"><div id="project-action-container"></div><div id="fields-header-row"></div><div id="redips-drag"></div><div id="data-container"></div></div>'},renderFieldsRow:function(){$("#fields-header-row").html('<table id="fieldHeaderTable"><tr id="fieldHeaderRow"></tr></table>'),spreadSheet.fields().forEach(function(e){$("#fieldHeaderRow").append(spreadSheetView.fieldHeader(e.name)),$("#fieldMenuButton"+e.name).click(function(d){spreadSheetView.showFieldMenu(d,e.name)})}),$("#fields-header-row").css("right",scrollBarWidth+"px")},fieldHeader:function(e){return'<td class="fieldHeaderCell"><div class="fieldHeaderContainer"><div class="moveColGrip"></div><div class="fieldNameInputContainer"><textarea id="colHeaderInput'+e+'" class="fieldNameInput">'+e+'</textarea></div><div class="fieldHeaderButton"><img id="fieldMenuButton'+e+'" src="images/down-arrow.png"/></div><div id="grip'+e+'" class="resizeColGrip" onmousedown="startResize(event, this)"></div></div></td>'},showFieldMenu:function(e,d){0===$("#fieldMenu").length&&fieldMenuController.displayFieldMenu(d,e.clientX,e.clientY)},renderDataTable:function(){$("#data-container").append('<table id="dataTable"></table>'),spreadSheet.tree().children.forEach(function(e){$("#dataTable").append(spreadSheetView.dataRowsMarkup(e))}),$("#data-container").scroll(function(){$("#redips-drag").scrollTop($("#data-container").scrollTop()),$("#fields-header-row").scrollLeft($("#data-container").scrollLeft())})},dataRowsMarkup:function(e){var d='<tr id="datarowid'+e.id+'" class="dataRow">';return spreadSheet.fields().forEach(function(t){d+='<td class="cell"><input class="fieldInput fieldInput'+t.name+'" type="text" id="'+t.name+e.id+'" value="'+spreadSheet.formattedValue(t,e)+'" oninput="spreadSheet.updateFieldValue(\''+t.name+"',"+e.id+')" onfocus="$(this).val(spreadSheet.rawValue(\''+t.name+"',"+e.id+'))"></td>'}),e.children.forEach(function(e){d+=spreadSheetView.dataRowsMarkup(e)}),d+"</tr>"},renderDataCell:function(e,d,t,n){$(e).append(spreadSheetView.fieldCell(d,t,n)),$("#"+d+t).on("input",function(){spreadSheet.updateFieldValue(d,t)}),$("#"+d+t).focus(function(){$(this).val(spreadSheet.rawValue(d,t))})},fieldCell:function(e,d,t){return'<td class="cell"><input class="fieldInput fieldInput'+e+'" type="text" id="'+e+d+'" value="'+t+'"></td>'},nodeRowMarkup:function(e){var d='<tr id="rowid'+e.id+'" class="nodeRow"><td class="redips-rowhandler cell"><div id="nodeContent'+e.id+'" class="node-container">';return d+=spreadSheetView.deleteButton(e.id)+spreadSheetView.copyButton(e.id)+spreadSheetView.dragHandle,d+=spreadSheetView.nodeContent(e),e.children.forEach(function(e){d+=spreadSheetView.nodeRowMarkup(e)}),d+"</div></td></tr>"},nodeContent:function(e){var d,t=10*(e.depth-1),n=t;return spreadSheet.hasChildren(e)?d=spreadSheet.childrenHidden(e)?'<span class="glyphicon glyphicon-chevron-right"></span>':'<span class="glyphicon glyphicon-chevron-down"></span>':(d="<span></span>",t+=12,n-=10),spreadSheetView.expandIcon(e.id,t,d)+spreadSheetView.nodeInput(e,DEFAULT_NODE_INPUT_WIDTH-n)},renderNodeColumn:function(){$("#redips-drag").html('<table id="treeTable"></table>'),spreadSheet.tree().children.forEach(function(e){$("#treeTable").append(spreadSheetView.nodeRowMarkup(e))}),$("#redips-drag").css("bottom",scrollBarWidth+"px"),redips.init()},dragHandle:'<div class="redips-drag pull-right"><i class="glyphicon glyphicon-move"></i></div>',copyButton:function(e){return'<a href="#"  class="pull-right btn btn-info btn-xs copy-button" onclick="spreadSheet.copyNode('+e+')"><i class="glyphicon glyphicon-plus"></i></a>'},deleteButton:function(e){return'<a href="#" class="pull-right btn btn-danger btn-xs delete-button" onclick="spreadSheet.deleteNode('+e+')"><i class="glyphicon glyphicon-remove"></i></a>'},expandIcon:function(e,d,t){return'<a href="#" id="icon'+e+'" class="btn btn-xs" style="margin-left:'+d+'px" onclick="spreadSheet.toggleNode('+e+')">'+t+"</a>"},nodeInput:function(e,d){return'<input id="nodeInput'+e.id+'" class="nodeTextInput" style="width:'+d+'px" type="text" value="'+e.name+'" oninput="spreadSheetView.updateNodeName('+e.id+')"/>'},expandNode:function(e){for(var d,t=e.children.length-1;t>=0;t--)d=e.children[t],$(spreadSheetView.dataRowsMarkup(d)).insertAfter($("#datarowid"+e.id)),$(spreadSheetView.nodeRowMarkup(d)).insertAfter($("#rowid"+e.id));spreadSheetView.enableDragging(e)},redrawNodeContent:function(e){$("#icon"+e.id).remove(),$("#nodeInput"+e.id).remove(),$("#nodeContent"+e.id).append(spreadSheetView.nodeContent(e))},addField:function(e){$("#fieldHeaderRow").append(this.fieldHeaderMarkup(e,spreadSheet.fields().length)),$("#fieldMenuButton"+e).click(function(d){spreadSheetView.showFieldMenu(d,e)}),$(".dataRow").each(function(d,t){spreadSheetView.renderDataCell(t,e,parseInt(t.id.replace("datarowid","")),"")})},updateNodeName:function(e){var d=$("#nodeInput"+e).val();spreadSheet.updateNodeName(e,d),$("#nodeInput"+e).attr("value",d)},removeNode:function(e){$("#rowid"+e.id).remove(),$("#datarowid"+e.id).remove()},insertNodeBefore:function(e,d){$(spreadSheetView.nodeRowMarkup(e)).insertBefore($("#rowid"+d.id)),$(spreadSheetView.dataRowsMarkup(e)).insertBefore($("#datarowid"+d.id)),spreadSheetView.enableDragging(e)},insertNodeAfter:function(e,d){$(spreadSheetView.nodeRowMarkup(e)).insertAfter($("#rowid"+d.id)),$(spreadSheetView.dataRowsMarkup(e)).insertAfter($("#datarowid"+d.id)),spreadSheetView.enableDragging(e)},enableDragging:function(e){REDIPS.drag.enableDivs("init",$("#rowid"+e.id).find("div"))},getFieldValue:function(e,d){return $("#"+e+d).val()},updateFieldValue:function(e,d,t){$("#"+e+d).val(t)}};
var treeView={destroy:function(){$("#tree-container").remove()},display:function(){function t(e,r){var n=p;panTimer&&(clearTimeout(panTimer),translateCoords=d3.transform(Y.attr("transform")),"left"==r||"right"==r?(translateX="left"==r?translateCoords.translate[0]+n:translateCoords.translate[0]-n,translateY=translateCoords.translate[1]):("up"==r||"down"==r)&&(translateX=translateCoords.translate[0],translateY="up"==r?translateCoords.translate[1]+n:translateCoords.translate[1]-n),scaleX=translateCoords.scale[0],scaleY=translateCoords.scale[1],scale=A.scale(),Y.transition().attr("transform","translate("+translateX+","+translateY+")scale("+scale+")"),d3.select(e).select("g.node").attr("transform","translate("+translateX+","+translateY+")"),A.scale(A.scale()),A.translate([translateX,translateY]),panTimer=setTimeout(function(){t(e,n,r)},50))}function e(){Y.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function r(t,e){h=t,d3.select(e).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(e).attr("class","node activeDrag"),Y.selectAll("g.node").sort(function(t,e){return t.id!=h.id?1:-1}),nodes.length>1&&(links=k.links(nodes),nodePaths=Y.selectAll("path.link").data(links,function(t){return t.target.id}).remove(),nodesExit=Y.selectAll("g.node").data(nodes,function(t){return t.id}).filter(function(t,e){return t.id!=h.id}).remove()),parentLink=k.links(k.nodes(h.parent)),Y.selectAll("path.link").filter(function(t,e){return t.target.id==h.id}).remove(),dragStarted=null}function n(t){t!=c&&(dragStarted=!0,nodes=k.nodes(t),d3.event.sourceEvent.stopPropagation())}function a(e){if(e!=c){if(dragStarted&&(domNode=this,r(e,domNode)),relCoords=d3.mouse($("svg").get(0)),relCoords[0]<g)panTimer=!0,t(this,"left");else if(relCoords[0]>$("svg").width()-g)panTimer=!0,t(this,"right");else if(relCoords[1]<g)panTimer=!0,t(this,"up");else if(relCoords[1]>$("svg").height()-g)panTimer=!0,t(this,"down");else try{clearTimeout(panTimer)}catch(n){}e.x0+=d3.event.dy,e.y0+=d3.event.dx,d3.select(this).attr("transform","translate("+e.y0+","+e.x0+")"),X()}}function l(t){t!=c&&(domNode=this,f&&(project.removeNode(h),f.children||(f.children=[]),f.children.push(h),project.expandNode(f)),f=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),X(),null!==h&&(i(c),o(h),h=null))}function o(t){scale=A.scale(),x=-t.y0,y=-t.x0,x=x*scale+C/2,y=y*scale+j/2,d3.select("g").transition().duration(m).attr("transform","translate("+x+","+y+")scale("+scale+")"),A.scale(scale),A.translate([x,y])}function s(t){d3.event.defaultPrevented||(project.toggleExpansion(t),i(t),o(t))}function i(t){var e=function(t,e){return t.values&&t.values[e]&&t.values[e]>5?t.values[e]:5},r=[1],n=function(t,e){e.children&&e.children.length>0&&(r.length<=t+1&&r.push(0),r[t+1]+=e.children.length,e.children.forEach(function(e){n(t+1,e)}))};n(0,c);var a=25*d3.max(r);k=k.size([a,C]);var l=k.nodes(c).reverse(),o=k.links(l);l.forEach(function(t){t.y=10*t.depth*u}),node=Y.selectAll("g.node").data(l,function(t){return t.id||(t.id=++v)});var i=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).on("click",s);i.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(t){return project.isNodeCollapsed(t)?"lightsteelblue":"#fff"}),i.append("text").attr("x",function(t){return project.hasChildren(t)?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(t){return project.hasChildren(t)?"end":"start"}).text(function(t){return t.name}).style("fill-opacity",0),i.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(t){w(t)}).on("mouseout",function(t){E(t)}),node.select("text").attr("x",function(t){return project.hasChildren(t)?-10:10}).attr("text-anchor",function(t){return project.hasChildren(t)?"end":"start"}).text(function(t){return t.name}),node.select("circle.nodeCircle").attr("r",function(t){return e(t)}).style("fill",function(t){return project.isNodeCollapsed(t)?"lightsteelblue":"#fff"});var d=node.transition().duration(m).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});d.select("text").style("fill-opacity",1);var f=node.exit().transition().duration(m).attr("transform",function(e){return"translate("+t.y+","+t.x+")"}).remove();f.select("circle").attr("r",0),f.select("text").style("fill-opacity",0);var h=Y.selectAll("path.link").data(o,function(t){return t.target.id});h.enter().insert("path","g").attr("class","link").attr("d",function(e){var r={x:t.x0,y:t.y0};return T({source:r,target:r})}),h.transition().duration(m).attr("d",T),h.exit().transition().duration(m).attr("d",function(e){var r={x:t.x,y:t.y};return T({source:r,target:r})}).remove(),l.forEach(function(t){t.x0=t.x,t.y0=t.y})}$("body").append('<div id="tree-container"></div>');var c,d=0,u=0,f=null,h=null,p=200,g=20,v=0,m=750,C=$("#tree-container").width(),j=$("#tree-container").height(),k=d3.layout.tree().size([j,C]),T=d3.svg.diagonal().projection(function(t){return[t.y,t.x]});project.traverse(project.getChildren,function(t){d++,u=Math.max(t.name.length,u)});var A=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",e),N=d3.select("#tree-container").append("svg").attr("width",C).attr("height",j).attr("class","overlay").call(A);dragListener=d3.behavior.drag().on("dragstart",n).on("drag",a).on("dragend",l);var w=function(t){f=t,X()},E=function(t){f=null,X()},X=function(){var t=[];null!==h&&null!==f&&(t=[{source:{x:f.y0,y:f.x0},target:{x:h.y0,y:h.x0}}]);var e=Y.selectAll(".templink").data(t);e.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),e.attr("d",d3.svg.diagonal()),e.exit().remove()},Y=N.append("g");c=project.tree,c.x0=j/2,c.y0=0,i(c),o(c)}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZy5qcyIsImRyYWctbGliLmpzIiwiZHJhZy5qcyIsInJlc2l6ZS1jb2x1bW4uanMiLCJjb250cm9sbGVyL2ZpZWxkTWVudUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVyL2htcy5qcyIsImNvbnRyb2xsZXIvc3ByZWFkU2hlZXQuanMiLCJtb2RlbC9GaWVsZC5qcyIsIm1vZGVsL0ZpZWxkTWVudS5qcyIsIm1vZGVsL0ZpZWxkTWVudUl0ZW0uanMiLCJtb2RlbC9wcm9qZWN0LmpzIiwibW9kZWwvcHJvamVjdHMuanMiLCJ1dGlsL2NvbnN0YW50cy5qcyIsInV0aWwvZGVidWcuanMiLCJ2aWV3L2ZpZWxkTWVudVZpZXcuanMiLCJ2aWV3L2hlYWRlclZpZXcuanMiLCJ2aWV3L3Byb2plY3RBY3Rpb24uanMiLCJ2aWV3L3NwcmVhZFNoZWV0S2V5SGFuZGxlci5qcyIsInZpZXcvc3ByZWFkU2hlZXRWaWV3LmpzIiwidmlldy90cmVlVmlldy5qcyJdLCJuYW1lcyI6WyJhZ2dyZWdhdGVfYW55Iiwibm9kZSIsImZpZWxkIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJjaGlsZHJlblN1bSIsImkiLCJ2YWx1ZXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJSRURJUFMiLCJkcmFnIiwiaW5pdCIsImVuYWJsZURyYWciLCJlbmFibGVEaXZzIiwiaGFuZGxlck9uTW91c2VEb3duIiwiaGFuZGxlck9uTW91c2VVcCIsImhhbmRsZXJPbk1vdXNlTW92ZSIsImVsZW1lbnREcm9wIiwicmVzZXRTdHlsZXMiLCJyZWdpc3RlckV2ZW50cyIsImNlbGxDaGFuZ2VkIiwiaGFuZGxlck9uUmVzaXplIiwic2V0VGFibGVSb3dDb2x1bW4iLCJzZXRQb3NpdGlvbiIsInNldFRkU3R5bGUiLCJnZXRUZFN0eWxlIiwiYm94T2Zmc2V0IiwiY2FsY3VsYXRlQ2VsbHMiLCJnZXRTY3JvbGxQb3NpdGlvbiIsImF1dG9TY3JvbGxYIiwiYXV0b1Njcm9sbFkiLCJjb3B5UHJvcGVydGllcyIsImNsb25lTGltaXQiLCJnZXRTdHlsZSIsImZpbmRQYXJlbnQiLCJyb3dPcGFjaXR5Iiwicm93Q2xvbmUiLCJyb3dEcm9wIiwibm9ybWFsaXplIiwiYmdTdHlsZU9sZCIsInRhYmxlIiwibW92ZWQiLCJjbG9uZWQiLCJ3aW5kb3dTY3JvbGxQb3NpdGlvbiIsIm9iak1hcmdpbiIsInNjcmVlbiIsIndpZHRoIiwiaGVpZ2h0Iiwic2Nyb2xsRGF0YSIsImNvbnRhaW5lciIsIm9iaiIsImVkZ2UiLCJwYWdlIiwieCIsInkiLCJkaXYiLCJmbGFnIiwiY2xvbmVkSWQiLCJjdXJyZW50Q2VsbCIsImRyYWdDb250YWluZXIiLCJkaXZCb3giLCJwb2ludGVyIiwidGhyZXNob2xkIiwic2hpZnRLZXkiLCJjbG9uZUNsYXNzIiwicm93Iiwicm93X29sZCIsInJvd19zb3VyY2UiLCJjZWxsIiwiY2VsbF9vbGQiLCJjZWxsX3NvdXJjZSIsIm9iak9sZCIsImhvdmVyIiwiY29sb3JUZCIsImNvbG9yVHIiLCJzY3JvbGwiLCJlbmFibGUiLCJib3VuZCIsInNwZWVkIiwic3R5bGUiLCJib3JkZXJEaXNhYmxlZCIsIm9wYWNpdHlEaXNhYmxlZCIsInJvd0VtcHR5Q29sb3IiLCJ0ZCIsImNsb25lIiwia2V5RGl2Iiwia2V5Um93Iiwic2VuZEJhY2siLCJkcm9wIiwiZXZlbnQiLCJjbG9uZWREcm9wcGVkIiwiY2xvbmVkRW5kMSIsImNsb25lZEVuZDIiLCJkcm9wcGVkIiwiZHJvcHBlZEJlZm9yZSIsImZpbmlzaCIsIm5vdENsb25lZCIsIm5vdE1vdmVkIiwicm93Q2hhbmdlZCIsInJvd0NsaWNrZWQiLCJyb3dDbG9uZWQiLCJyb3dEcm9wcGVkIiwicm93RHJvcHBlZEJlZm9yZSIsInJvd0Ryb3BwZWRTb3VyY2UiLCJyb3dNb3ZlZCIsInJvd05vdENsb25lZCIsInJvd05vdE1vdmVkIiwicmVkaXBzQ2xvbmUiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJyZWRpcHMiLCJhZGQiLCJ3aW5kb3ciLCJlIiwib2Zmc2V0IiwicG9zaXRpb24iLCJYIiwiWSIsImV2dCIsImNhbmNlbEJ1YmJsZSIsInN0b3BQcm9wYWdhdGlvbiIsImdldFNlbGVjdGlvbiIsInJlbW92ZUFsbFJhbmdlcyIsInNlbGVjdGlvbiIsInR5cGUiLCJlbXB0eSIsImVycm9yIiwiY2xpZW50WCIsImNsaWVudFkiLCJ0aGlzIiwiY2xhc3NOYW1lIiwiaW5kZXhPZiIsImN1cnJlbnQiLCJwYXJlbnROb2RlIiwiZWwiLCJ0YWJsZU1pbmkiLCJyb3dPYmoiLCJub2RlTmFtZSIsInVuZGVmaW5lZCIsImlubmVySFRNTCIsImNsYXNzTGlzdCIsInNvdXJjZVJvdyIsInJvd3MiLCJyb3dJZHgiLCJ0ck1pbmkiLCJkZWxldGVUYWJsZVJvdyIsInRibCIsImVtcHR5Um93IiwiZGVsZXRlUm93Iiwicm93SW5kZXgiLCJ0YWJsZVJvdyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicmVtb3ZlQ2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsInJfcm93IiwibXRfdHIiLCJyZW1vdmUiLCJvbnNlbGVjdHN0YXJ0IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsV2lkdGgiLCJzY3JvbGxIZWlnaHQiLCJ0YXJnZXQiLCJjZWxscyIsImJhY2tncm91bmRDb2xvciIsImNsb25lU291cmNlRGl2Iiwib25tb3VzZWRvd24iLCJ0b3AiLCJsZWZ0IiwiekluZGV4Iiwic2NhIiwiZGVsdGFYIiwiZGVsdGFZIiwic2Nyb2xsUG9zaXRpb24iLCJNYXRoIiwiYWJzIiwiY29udGFpblRhYmxlIiwicGFnZVlPZmZzZXQiLCJzY3JvbGxUb3AiLCJhdXRvc2Nyb2xsIiwibWlkc3RYIiwibWlkc3RZIiwicHJldmlvdXMiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJyb3dfb2Zmc2V0Iiwicm93X2ZvdW5kIiwidG9zIiwib2Zmc2V0SGVpZ2h0IiwicmkiLCJ0IiwidHIiLCJzIiwiY29sb3IiLCJ0b1N0cmluZyIsImJvcmRlclRyIiwiYm9yZGVyVG9wIiwiYm9yZGVyQm90dG9tIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJUb3BTdHlsZSIsImJvcmRlclRvcENvbG9yIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3R0b20iLCJib3JkZXJCb3R0b21TdHlsZSIsImJvcmRlckJvdHRvbUNvbG9yIiwiYyIsInJpZ2h0IiwiYm9yZGVyIiwibmFtZSIsImJveCIsImJveF9zY3JvbGwiLCJvTGVmdCIsIm9Ub3AiLCJib3hPbGQiLCJvZmZzZXRMZWZ0Iiwic2Nyb2xsTGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsIm9mZnNldFdpZHRoIiwiY2IiLCJkaXNwbGF5Iiwic2Nyb2xsWSIsInNjcm9sbFgiLCJzbyIsInBvcyIsIm9sZCIsIm1heHNwIiwiZWRnZUNyb3NzZWQiLCJjbGllbnRXaWR0aCIsInNjcm9sbEJ5IiwicGFyc2VJbnQiLCJpc05hTiIsInNldFRpbWVvdXQiLCJjbGllbnRIZWlnaHQiLCJzcmMiLCJjbG4iLCJjaGlsZHMiLCJjb3B5IiwiZTEiLCJlMiIsImVuYWJsZWQiLCJlbDEiLCJlbDIiLCJ0biIsIm1hdGNoQXJyYXkiLCJsaW1pdFR5cGUiLCJsaW1pdCIsImNsYXNzZXMiLCJtYXRjaCIsInJlcGxhY2UiLCJlbmFibGVfZmxhZyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJqIiwiayIsImJvcmRlclN0eWxlIiwib3BhY2l0eSIsImN1cnNvciIsIm92ZXJmbG93IiwidGJscyIsInJlZ2V4RHJhZyIsInJlZ2V4Tm9BdXRvc2Nyb2xsIiwiYm9yZGVyRW5hYmxlZCIsInRlc3QiLCJmaWx0ZXIiLCJzdHlsZV9uYW1lIiwiY3VycmVudFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRlZmF1bHRWaWV3IiwidGFnX25hbWUiLCJzdHIiLCJ0ZE5vZGVMaXN0IiwiY2hpbGROb2RlcyIsIm5vZGVUeXBlIiwiZXZlbnROYW1lIiwiaGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJhdHRhY2hFdmVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkZXRhY2hFdmVudCIsInJkIiwibmV3UGFyZW50Um93IiwibW92ZWRJRCIsIm5ld1BhcmVudElEIiwic3ByZWFkU2hlZXQiLCJtb3ZlTm9kZSIsInJvd0RlbGV0ZWQiLCJyb3dVbmRlbGV0ZWQiLCJyZXNpemVDb2x1bW5MZWZ0IiwicmVzaXplRmllbGQiLCJNSU5fQ09MVU1OX1dJRFRIIiwiR1JJUFNfV0lEVEgiLCJzdGFydFJlc2l6ZSIsImdyaXAiLCIkIiwiYmluZCIsInJlc2l6ZURyYWciLCJyZXNpemVFbmQiLCJ2aXNpYmlsaXR5IiwicGFnZVgiLCJ1bmJpbmQiLCJuZXdXaWR0aCIsImNvbHVtbkNlbGxzIiwiZmllbGRNZW51Q29udHJvbGxlciIsImRpc3BsYXlGaWVsZE1lbnUiLCJmaWVsZE5hbWUiLCJwcm9qZWN0IiwiZ2V0RmllbGQiLCJtZW51IiwiRmllbGRNZW51IiwiZmllbGRzIiwiZmllbGRNZW51VmlldyIsInJlbmRlciIsImhhbmRsZUNsaWNrIiwibWVudUl0ZW1JRCIsImNsaWNrZWQiLCJnZXRNZW51SXRlbSIsInBhcmVudCIsImdldE1lbnVJdGVtUGFyZW50IiwidmFyTmFtZSIsInNldENoZWNrbWFya3MiLCJpdGVtcyIsInVwZGF0ZU51bWJlckZpZWxkRm9ybWF0dGluZyIsInJlYWR5Iiwic2Nyb2xsQmFyV2lkdGgiLCJnZXRTY3JvbGxCYXJXaWR0aCIsImhtcyIsInByb2plY3RzIiwiaGVhZGVyVmlldyIsIm9wZW5Qcm9qZWN0IiwicHJvamVjdElEIiwidHJlZSIsInZpZXciLCJkZXN0cm95Iiwic3ByZWFkU2hlZXRWaWV3Iiwic2F2ZVRvRGF0YWJhc2UiLCJzd2l0Y2hWaWV3IiwidHJlZVZpZXciLCJjcmVhdGVOZXdQcm9qZWN0IiwibmV3UHJvamVjdE5hbWUiLCJuZXh0UHJvamVjdElEIiwiZmlyc3RDaGlsZCIsImJvZHkiLCJjbGVhbnNlRGF0YSIsInVwZGF0ZUZpZWxkVmFsdWUiLCJub2RlSUQiLCJmaW5kTm9kZSIsImdldEZpZWxkVmFsdWUiLCJmb3JFYWNoIiwiY2hpbGQiLCJyYXdWYWx1ZSIsImZvcm1hdHRlZFZhbHVlIiwiRmllbGQiLCJmb3JtYXRWYWx1ZSIsImFkZEZpZWxkIiwiaGFzQ2hpbGRyZW4iLCJpc05vZGVDaGlsZGxlc3MiLCJjaGlsZHJlbkhpZGRlbiIsImlzTm9kZUNvbGxhcHNlZCIsIm5ld1BhcmVudE5vZGUiLCJyZW1vdmVOb2RlIiwiYWRkTm9kZSIsInRyYXZlcnNlIiwiZ2V0Q2hpbGRyZW4iLCJyZWRyYXdOb2RlQ29udGVudCIsImRlbGV0ZU5vZGUiLCJleHBhbmROb2RlIiwiaW5zZXJ0Tm9kZUFmdGVyIiwiY29weU5vZGUiLCJzb3VyY2VOb2RlIiwibmV3Tm9kZSIsImNsb25lTm9kZSIsImluc2VydE5vZGUiLCJpbnNlcnROb2RlQmVmb3JlIiwiY29sbGFwc2VOb2RlIiwidHJhdmVyc2VEZXNjZW5kYW50cyIsInRvZ2dsZU5vZGUiLCJpc05vZGVFeHBhbmRlZCIsInVwZGF0ZU5vZGVOYW1lIiwibmV3TmFtZSIsIk51bWJlciIsImVuYWJsZURyYWdnaW5nIiwiZGF0YXR5cGUiLCJOVU1CRVIiLCJmb3JtYXQiLCJOVU1CRVJfRk9STUFUIiwicHJlY2lzaW9uIiwiYWdnX3R5cGUiLCJOT19BR0dSRUdBVElPTiIsImFnZ19xdHlfZmllbGQiLCJTVFJJTkciLCJDSE9JQ0UiLCJTVU1fQU5ZX0FHR1JFR0FUSU9OIiwiUEVSQ0VOVF9GT1JNQVQiLCJTQ0lFTlRJRklDX0ZPUk1BVCIsInRvRml4ZWQiLCJ0b0V4cG9uZW50aWFsIiwibnVtYmVySXRlbSIsIkZpZWxkTWVudUl0ZW0iLCJmb3JtYXRJdGVtIiwibnVtYmVyRm9ybWF0SXRlbSIsInB1c2giLCJkaXNwbGF5U3RyaW5nIiwicGVyY2VudEZvcm1hdEl0ZW0iLCJzY2llbnRpZmljRm9ybWF0SXRlbSIsImFnZ3JlZ2F0aW9uSXRlbSIsInN1bUFueUFnZ0l0ZW0iLCJpbmRleCIsImYiLCJwcm90b3R5cGUiLCJtZW51SXRlbSIsImZvdW5kIiwiY2hlY2tlZCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRhdGEiLCJqc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsInNwbGljZSIsInNldERlcHRocyIsImRlcHRoIiwiZXh0ZW5kIiwibmV4dE5vZGVJRCIsIl9jaGlsZHJlbiIsImZ1bGx5RXhwYW5kTm9kZSIsImZ1bGx5Q29sbGFwc2VOb2RlIiwidG9nZ2xlRXhwYW5zaW9uIiwic2VhcmNoTm9kZSIsImZvdW5kTm9kZSIsImZvdW5kUGFyZW50IiwiY2hpbGRyZW5GbiIsInZpc2l0Rm4iLCJmaW5pc2hGbiIsImRvbmUiLCJwcm9qZWN0TmFtZSIsInZlcnNpb24iLCJET1dOX0FSUk9XX0lNQUdFX1BBVEgiLCJDSEVDS19NQVJLX0lNQUdFX1BBVEgiLCJCTEFOS19NQVJLX0lNQUdFX1BBVEgiLCJFTlRFUl9LRVkiLCJLRVlfVVBfQVJST1ciLCJLRVlfRE9XTl9BUlJPVyIsIktFWV9MRUZUX0FSUk9XIiwiS0VZX1JJR0hUX0FSUk9XIiwiREVGQVVMVF9OT0RFX0lOUFVUX1dJRFRIIiwiZGVidWciLCJwcmludCIsIm8iLCJjb25zb2xlIiwibG9nIiwicHJpbnRUcmVlIiwiZmllbGRNZW51IiwibWFya3VwIiwicmVuZGVyTWVudSIsImFwcGVuZCIsIm1vdXNlbGVhdmUiLCJjaGVja01hcmtDbGFzcyIsInNpYmxpbmdzIiwic2libGluZyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJodG1sIiwiY2hhbmdlIiwic2VsZWN0UHJvamVjdCIsImNsaWNrIiwia2V5dXAiLCJwcm9qZWN0U2VsZWN0b3IiLCJmaW5kIiwiYXR0ciIsInZhbCIsInNob3ciLCJmb2N1cyIsInNlbGVjdCIsImtleUNvZGUiLCJoaWRlIiwibmV3UHJvamVjdElEIiwib3B0aW9uIiwidGV4dCIsInByb2plY3RBY3Rpb24iLCJlbnRlclByZXNzZWQiLCJoYW5kbGUiLCJzcHJlYWRTaGVldEtleUhhbmRsZXIiLCJjaGVja0tleSIsInByZXZlbnREZWZhdWx0IiwicHJldlJvdyIsImZpbmRBbmNlc3RvciIsImFjdGl2ZUVsZW1lbnQiLCJwcmV2IiwiZ2V0TmV4dEVsZW1lbnRJRCIsIm5leHRSb3ciLCJuZXh0IiwibmV3Um93Iiwic3BsaXQiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJvbiIsInNwcmVhZFNoZWV0TWFya3VwIiwicmVuZGVyRmllbGRzUm93IiwicmVuZGVyRGF0YVRhYmxlIiwicmVuZGVyTm9kZUNvbHVtbiIsIm9mZiIsImZpZWxkSGVhZGVyIiwic2hvd0ZpZWxkTWVudSIsImNzcyIsImRhdGFSb3dzTWFya3VwIiwicmVuZGVyRGF0YUNlbGwiLCJmaWVsZENlbGwiLCJub2RlUm93TWFya3VwIiwiZGVsZXRlQnV0dG9uIiwiY29weUJ1dHRvbiIsImRyYWdIYW5kbGUiLCJub2RlQ29udGVudCIsImljb25NYXJrdXAiLCJkZXB0aEFkanVzdG1lbnQiLCJ3aWR0aEFkanVzdG1lbnQiLCJleHBhbmRJY29uIiwibm9kZUlucHV0IiwiaW5zZXJ0QWZ0ZXIiLCJmaWVsZEhlYWRlck1hcmt1cCIsImVhY2giLCJpdGVtIiwiaW5zZXJ0QmVmb3JlTm9kZSIsImluc2VydEFmdGVyTm9kZSIsInBhbiIsImRvbU5vZGUiLCJkaXJlY3Rpb24iLCJwYW5TcGVlZCIsInBhblRpbWVyIiwiY2xlYXJUaW1lb3V0IiwidHJhbnNsYXRlQ29vcmRzIiwiZDMiLCJ0cmFuc2Zvcm0iLCJzdmdHcm91cCIsInRyYW5zbGF0ZVgiLCJ0cmFuc2xhdGUiLCJ0cmFuc2xhdGVZIiwic2NhbGVYIiwic2NhbGUiLCJzY2FsZVkiLCJ6b29tTGlzdGVuZXIiLCJ0cmFuc2l0aW9uIiwiem9vbSIsImluaXRpYXRlRHJhZyIsImQiLCJkcmFnZ2luZ05vZGUiLCJzZWxlY3RBbGwiLCJzb3J0IiwiYSIsImIiLCJub2RlcyIsImxpbmtzIiwibm9kZVBhdGhzIiwibm9kZXNFeGl0IiwicGFyZW50TGluayIsImRyYWdTdGFydGVkIiwiZHJhZ3N0YXJ0Iiwicm9vdCIsInNvdXJjZUV2ZW50IiwicmVsQ29vcmRzIiwibW91c2UiLCJnZXQiLCJwYW5Cb3VuZGFyeSIsIngwIiwiZHkiLCJ5MCIsImR4IiwidXBkYXRlVGVtcENvbm5lY3RvciIsImRyYWdlbmQiLCJzZWxlY3RlZE5vZGUiLCJ1cGRhdGUiLCJjZW50ZXJOb2RlIiwic291cmNlIiwidmlld2VyV2lkdGgiLCJ2aWV3ZXJIZWlnaHQiLCJkdXJhdGlvbiIsImRlZmF1bHRQcmV2ZW50ZWQiLCJjb21wdXRlTm9kZVNpemUiLCJsZXZlbFdpZHRoIiwiY2hpbGRDb3VudCIsImxldmVsIiwibiIsIm5ld0hlaWdodCIsIm1heCIsInNpemUiLCJyZXZlcnNlIiwibWF4TGFiZWxMZW5ndGgiLCJub2RlRW50ZXIiLCJlbnRlciIsImNhbGwiLCJkcmFnTGlzdGVuZXIiLCJvdmVyQ2lyY2xlIiwib3V0Q2lyY2xlIiwibm9kZVVwZGF0ZSIsIm5vZGVFeGl0IiwiZXhpdCIsImxpbmsiLCJpbnNlcnQiLCJkaWFnb25hbCIsInRvdGFsTm9kZXMiLCJsYXlvdXQiLCJzdmciLCJwcm9qZWN0aW9uIiwiYmVoYXZpb3IiLCJzY2FsZUV4dGVudCIsImJhc2VTdmciXSwibWFwcGluZ3MiOiJBQUFBLFFBQVNBLGVBQWNDLEVBQU1DLEdBRTNCLEdBQUlELEVBQUtFLFVBQXFDLElBQXpCRixFQUFLRSxTQUFTQyxPQVluQyxDQUdFLElBQUksR0FGQUMsR0FBYyxFQUVWQyxFQUFJLEVBQUdBLEVBQUlMLEVBQUtFLFNBQVNDLE9BQVFFLElBRXZDRCxHQUFlTCxjQUFjQyxFQUFLRSxTQUFTRyxHQUFJSixFQVdqRCxPQVJJRCxHQUFLTSxTQUVQTixFQUFLTSxXQUdQTixFQUFLTSxPQUFPTCxHQUFTRyxFQUNyQkcsU0FBU0MsZUFBZVAsRUFBUUQsRUFBS1MsSUFBSUMsTUFBUU4sRUFFMUNBLEVBMUJQLE1BQUlKLEdBQUtNLFFBQVdOLEVBQUtNLE9BQU9MLEdBTXZCVSxXQUFXWCxFQUFLTSxPQUFPTCxJQUp2QjtBQ0FiLFlBRUEsSUFBSVcsUUFBU0EsVUFHYkEsUUFBT0MsS0FBUSxXQUdiLEdBQUlDLEdBQ0ZDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FD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R0FBTy9ELEVBQVNhLFVBQVUsYUFBYW5JLEtBQUtBLEVBQ2hEcUwsR0FBS1IsUUFBUXJJLE9BQU8sUUFBUWMsS0FBSyxRQUFTLFlBQVlBLEtBQUssSUFBSzhELEdBQUdzRSxJQUFJSCxZQUFZakksS0FBSyxpQkFBa0IsUUFDMUcrSCxFQUFLL0gsS0FBSyxJQUFLOEQsR0FBR3NFLElBQUlILFlBQ3RCRixFQUFLRCxPQUFPdGIsVUFpS1Z3WCxFQUFXd0UsRUFBUXRKLE9BQU8sSUFHOUJzRyxHQUFPNVAsUUFBUXlCLEtBQ2ZtTyxFQUFLTSxHQUFLVyxFQUFlLEVBQ3pCakIsRUFBS1EsR0FBSyxFQUtWSyxFQUFPYixHQUNQYyxFQUFXZCIsImZpbGUiOiJobXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gYWdncmVnYXRlX2FueShub2RlLCBmaWVsZClcclxue1xyXG4gIGlmKCFub2RlLmNoaWxkcmVuIHx8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKVxyXG4gIHtcclxuICAgIGlmKCFub2RlLnZhbHVlcyB8fCAhbm9kZS52YWx1ZXNbZmllbGRdKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gMC4wO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChub2RlLnZhbHVlc1tmaWVsZF0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdmFyIGNoaWxkcmVuU3VtID0gMC4wO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBjaGlsZHJlblN1bSArPSBhZ2dyZWdhdGVfYW55KG5vZGUuY2hpbGRyZW5baV0sIGZpZWxkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZighbm9kZS52YWx1ZXMpXHJcbiAgICB7XHJcbiAgICAgIG5vZGUudmFsdWVzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgbm9kZS52YWx1ZXNbZmllbGRdID0gY2hpbGRyZW5TdW07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBtb2RlbFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGQgKyBub2RlLmlkKS52YWx1ZSA9IGNoaWxkcmVuU3VtOyAgICAgICAgIC8vdXBkYXRlIHRoZSB2aWV3XHJcblxyXG4gICAgcmV0dXJuIGNoaWxkcmVuU3VtO1xyXG4gIH1cclxufSIsIi8qXHJcbkNvcHlyaWdodCAoYykgMjAwOC0yMDExLCB3d3cucmVkaXBzLm5ldCBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5Db2RlIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgTGljZW5zZTogaHR0cDovL3d3dy5yZWRpcHMubmV0L2xpY2Vuc2UvXHJcbmh0dHA6Ly93d3cucmVkaXBzLm5ldC9qYXZhc2NyaXB0L2RyYWctYW5kLWRyb3AtdGFibGUtY29udGVudC9cclxuKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIFJFRElQUyA9IFJFRElQUyB8fCB7fTsgICAgICAvL2NyZWF0ZSBSRURJUFMgbmFtZXNwYWNlIChpZiBpcyBub3QgYWxyZWFkeSBkZWZpbmVkIGluIGFub3RoZXIgUkVESVBTIHBhY2thZ2UpXHJcblxyXG4vL1JFRElQUy5kcmFnIGlzIGEgSmF2YVNjcmlwdCBkcmFnIGFuZCBkcm9wIGxpYnJhcnkgZm9jdXNlZCBvbiBkcmFnZ2luZyB0YWJsZSBjb250ZW50IChESVYgZWxlbWVudHMpIGFuZCB0YWJsZSByb3dzLlxyXG5SRURJUFMuZHJhZyA9IChmdW5jdGlvbiAoKVxyXG57XHJcbiAgICAvLyBtZXRob2RzXHJcbiAgdmFyIGluaXQsICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvblxyXG4gICAgZW5hYmxlRHJhZywgICAgICAgICAvLyBtZXRob2QgYXR0YWNoZXMgLyBkZXRhY2hlcyBvbm1vdXNlZG93biBhbmQgb25zY3JvbGwgZXZlbnQgaGFuZGxlcnMgZm9yIERJViBlbGVtZW50c1xyXG4gICAgZW5hYmxlRGl2cyxcclxuICAgIGhhbmRsZXJPbk1vdXNlRG93biwgICAgIC8vIG9ubW91c2Vkb3duIGhhbmRsZXJcclxuICAgIGhhbmRsZXJPbk1vdXNlVXAsICAgICAvLyBvbm1vdXNldXAgaGFuZGxlclxyXG4gICAgaGFuZGxlck9uTW91c2VNb3ZlLCAgICAgLy8gb25tb3VzZW1vdmUgaGFuZGxlciBmb3IgdGhlIGRvY3VtZW50IGxldmVsXHJcbiAgICBlbGVtZW50RHJvcCwgICAgICAgIC8vIGRyb3AgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbFxyXG4gICAgcmVzZXRTdHlsZXMsICAgICAgICAvLyByZXNldCBvYmplY3Qgc3R5bGVzIGFmdGVyIGVsZW1lbnQgaXMgZHJvcHBlZFxyXG4gICAgcmVnaXN0ZXJFdmVudHMsICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3IgRElWIGVsZW1lbnRcclxuICAgIGNlbGxDaGFuZ2VkLCAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2QgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlKCksIGF1dG9TY3JvbGxYKCksIGF1dG9TY3JvbGxZKClcclxuICAgIGhhbmRsZXJPblJlc2l6ZSwgICAgICAvLyBvbnJlc2l6ZSB3aW5kb3cgZXZlbnQgaGFuZGxlclxyXG4gICAgc2V0VGFibGVSb3dDb2x1bW4sICAgICAgLy8gZnVuY3Rpb24gc2V0cyBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGxcclxuICAgIHNldFBvc2l0aW9uLCAgICAgICAgLy8gZnVuY3Rpb24gc2V0cyBjb2xvciBmb3IgdGhlIGN1cnJlbnQgdGFibGUgY2VsbCBhbmQgcmVtZW1iZXJzIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBjb2xvclxyXG4gICAgc2V0VGRTdHlsZSwgICAgICAgICAvLyBtZXRob2Qgc2V0cyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIGZvciBURFxyXG4gICAgZ2V0VGRTdHlsZSwgICAgICAgICAvLyBtZXRob2QgcmV0dXJucyBvYmplY3QgY29udGFpbmluZyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIGZvciBURFxyXG4gICAgYm94T2Zmc2V0LCAgICAgICAgICAvLyBjYWxjdWxhdGVzIG9iamVjdCAoYm94KSBvZmZzZXQgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdClcclxuICAgIGNhbGN1bGF0ZUNlbGxzLCAgICAgICAvLyBjYWxjdWxhdGVzIHRhYmxlIGNvbHVtbnMgYW5kIHJvdyBvZmZzZXRzIChjZWxscyBkaW1lbnNpb25zKVxyXG4gICAgZ2V0U2Nyb2xsUG9zaXRpb24sICAgICAgLy8gcmV0dXJucyBzY3JvbGwgcG9zaXRpb25zIGluIGFycmF5XHJcbiAgICBhdXRvU2Nyb2xsWCwgICAgICAgIC8vIGhvcml6b250YWwgYXV0byBzY3JvbGwgZnVuY3Rpb25cclxuICAgIGF1dG9TY3JvbGxZLCAgICAgICAgLy8gdmVydGljYWwgYXV0byBzY3JvbGwgZnVuY3Rpb25cclxuICAgIGNvcHlQcm9wZXJ0aWVzLCAgICAgICAvLyBtZXRob2QgY29waWVzIGN1c3RvbSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIGVsZW1lbnQgdG8gdGhlIGNsb25lZCBlbGVtZW50LlxyXG4gICAgY2xvbmVMaW1pdCwgICAgICAgICAvLyBjbG9uZSBsaW1pdCAoYWZ0ZXIgY2xvbmluZyBvYmplY3QsIHRha2UgY2FyZSBhYm91dCBjbGltaXQxX1ggb3IgY2xpbWl0Ml9YIGNsYXNzbmFtZXMpXHJcbiAgICBnZXRTdHlsZSwgICAgICAgICAvLyBtZXRob2QgcmV0dXJucyBzdHlsZSB2YWx1ZSBvZiByZXF1ZXN0ZWQgb2JqZWN0IGFuZCBzdHlsZSBuYW1lXHJcbiAgICBmaW5kUGFyZW50LCAgICAgICAgIC8vIG1ldGhvZCByZXR1cm5zIGEgcmVmZXJlbmNlIG9mIHRoZSByZXF1aXJlZCBwYXJlbnQgZWxlbWVudFxyXG4gICAgcm93T3BhY2l0eSwgICAgICAgICAvLyBtZXRob2Qgc2V0cyBvcGFjaXR5IHRvIHRhYmxlIHJvdyAoZWwsIG9wYWNpdHksIGNvbG9yKVxyXG4gICAgcm93Q2xvbmUsICAgICAgICAgLy8gY2xvbmUgdGFibGUgcm93IC0gaW5wdXQgcGFyYW1ldGVyIGlzIERJViB3aXRoIGNsYXNzIG5hbWUgXCJyZWRpcHMtcm93XCIgLT4gRElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiXHJcbiAgICByb3dEcm9wLCAgICAgICAgICAvLyBmdW5jdGlvbiBkcm9wcyAoZGVsZXRlIG9sZCAmIGluc2VydCBuZXcpIHRhYmxlIHJvdyAoaW5wdXQgcGFyYW1ldGVycyBhcmUgY3VycmVudCB0YWJsZSBhbmQgcm93KVxyXG4gICAgbm9ybWFsaXplLCAgICAgICAgICAvLyBwcml2YXRlIG1ldGhvZCByZXR1cm5zIG5vcm1hbGl6ZWQgc3BhY2VzIGZyb20gaW5wdXQgc3RyaW5nXHJcblxyXG4gICAgLy8gcHJpdmF0ZSBwYXJhbWV0ZXJzXHJcbiAgICBvYmpNYXJnaW4gPSBudWxsLCAgICAgLy8gc3BhY2UgZnJvbSBjbGlja2VkIHBvaW50IHRvIHRoZSBvYmplY3QgYm91bmRzICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpXHJcblxyXG4gICAgLy8gd2luZG93IHdpZHRoIGFuZCBoZWlnaHQgKHBhcmFtZXRlcnMgYXJlIHNldCBpbiBvbmxvYWQgYW5kIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIpLCBqdXN0IGZvciBhIG5vdGU6IHdpbmRvdyBhbmQgV2luZG93IGlzIHJlc2VydmVkIHdvcmQgaW4gSlMgc28gSSBuYW1lZCB2YXJpYWJsZSBcInNjcmVlblwiKVxyXG4gICAgc2NyZWVuID0ge3dpZHRoOiAwLCBoZWlnaHQ6IDB9LFxyXG5cclxuICAgIC8vIGRlZmluZSBzY3JvbGwgb2JqZWN0IHdpdGggY29udGFpbmVkIHByb3BlcnRpZXMgKHRoaXMgaXMgcHJpdmF0ZSBwcm9wZXJ0eSlcclxuICAgIHNjcm9sbERhdGEgPSB7d2lkdGggOiBudWxsLCAvLyBzY3JvbGwgd2lkdGggb2YgdGhlIHdpbmRvdyAoaXQgaXMgdXN1YWxseSBncmVhdGVyIHRoZW4gd2luZG93KVxyXG4gICAgICAgIGhlaWdodCA6IG51bGwsICAgIC8vIHNjcm9sbCBoZWlnaHQgb2YgdGhlIHdpbmRvdyAoaXQgaXMgdXN1YWxseSBncmVhdGVyIHRoZW4gd2luZG93KVxyXG4gICAgICAgIGNvbnRhaW5lciA6IFtdLCAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzIChjb250YWlucyBhdXRvc2Nyb2xsIGFyZWFzLCByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5lciBhbmQgc2Nyb2xsIGRpcmVjdGlvbilcclxuICAgICAgICBvYmogOiBudWxsfSwgICAgLy8gc2Nyb2xsIG9iamVjdCAobmVlZGVkIGluIGF1dG9zY3JvbGwgZm9yIHJlY3Vyc2l2ZSBjYWxscylcclxuXHJcbiAgICBlZGdlID0ge3BhZ2U6IHt4OiAwLCB5OiAwfSwgLy8gYXV0b3Njcm9sbCBib3VuZCB2YWx1ZXMgZm9yIHBhZ2UgYW5kIGRpdiBhcyBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgIGRpdjogIHt4OiAwLCB5OiAwfSwgLy8gY2xvc2VyIHRvIHRoZSBlZGdlLCBmYXN0ZXIgc2Nyb2xsaW5nXHJcbiAgICAgICAgZmxhZzoge3g6IDAsIHk6IDB9fSwvLyBmbGFncyBhcmUgbmVlZGVkIHRvIHByZXZlbnQgbXVsdGlwbGUgY2FsbHMgb2YgYXV0b1Njcm9sbFggYW5kIGF1dG9TY3JvbGxZIGZyb20gb25tb3VzZW1vdmUgZXZlbnQgaGFuZGxlclxyXG5cclxuICAgIGJnU3R5bGVPbGQsICAgICAgICAgLy8gKG9iamVjdCkgb2xkIHRkIHN0eWxlcyAoYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcylcclxuXHJcbiAgICB0YWJsZSwgICAgICAgIC8vIHRhYmxlIG9mZnNldHMgYW5kIHJvdyBvZmZzZXRzIChpbml0aWFsaXplZCBpbiBvbmxvYWQgZXZlbnQpXHJcbiAgICBtb3ZlZCwgICAgICAgICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBlbGVtZW50IGlzIG1vdmVkXHJcbiAgICBjbG9uZWQsICAgICAgICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBlbGVtZW50IGlzIGNsb25lZFxyXG4gICAgY2xvbmVkSWQgPSBbXSwgICAgICAgIC8vIG5lZWRlZCBmb3IgaW5jcmVtZW50IElEIG9mIGNsb25lZCBlbGVtZW50c1xyXG4gICAgY3VycmVudENlbGwgPSBbXSwgICAgIC8vIGN1cnJlbnQgY2VsbCBib3VuZHMgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCkgYW5kIFwiY29udGFpblRhYmxlXCIgZmxhZyBmb3IgbmVzdGVkIHRhYmxlc1xyXG4gICAgZHJhZ0NvbnRhaW5lciA9IG51bGwsICAgLy8gZHJhZyBjb250YWluZXIgcmVmZXJlbmNlXHJcbiAgICBkaXZCb3ggPSBudWxsLCAgICAgICAgLy8gZGl2IGRyYWcgYm94OiB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgbWFyZ2luIChkZWNyZWFzZSBudW1iZXIgY2FsbHMgb2Ygc2V0VGFibGVSb3dDb2x1bW4pXHJcbiAgICBwb2ludGVyID0ge3g6IDAsIHk6IDB9LCAgIC8vIG1vdXNlIHBvaW50ZXIgcG9zaXRpb24gKHRoaXMgcHJvcGVydGllcyBhcmUgc2V0IGluIGhhbmRsZXJPbk1vdXNlTW92ZSgpIC0gbmVlZGVkIGZvciBhdXRvc2Nyb2xsKVxyXG4gICAgdGhyZXNob2xkID0ge3g6IDAsICAgICAgLy8gaW5pdGlhbCB4LCB5IHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICB2YWx1ZTogNywgICAvLyB0aHJlc2hvbGQgZGlzdGFuY2UgdmFsdWVcclxuICAgICAgICAgIGZsYWc6IGZhbHNlfSwgLy8gdGhyZXNob2xkIGZsYWdcclxuICAgIHNoaWZ0S2V5ID0gZmFsc2UsICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBzaGlmdCBrZXkgaXMgcHJlc3NlZCAoc2V0IGluIGhhbmRsZXJfbW91c2Vkb3duKVxyXG4gICAgY2xvbmVDbGFzcyA9IGZhbHNlLCAgICAgLy8gKGJvb2xlYW4pIHRydWUgaWYgY2xpY2tlZCBlbGVtZW50IGNvbnRhaW5zIGNsb25lIGluIGNsYXNzIG5hbWUgKHNldCBpbiBoYW5kbGVyX21vdXNlZG93bilcclxuICAgIHdpbmRvd1Njcm9sbFBvc2l0aW9uLCAgIC8vIChhcnJheSkgdG9wIGFuZCBsZWZ0IHdpbmRvdyBvZmZzZXQgKHNldCBpbiBjYWxjdWxhdGVDZWxscyBhbmQgdXNlZCBpbiBib3hPZmZzZXQpXHJcblxyXG4gICAgLy8gc2VsZWN0ZWQsIHByZXZpb3VzIGFuZCBzb3VyY2Ugcm93IGFuZCBjZWxsIChwcml2YXRlIHBhcmFtZXRlcnMgdG9vKVxyXG4gICAgcm93ID0gbnVsbCxcclxuICAgIHJvd19vbGQgPSBudWxsLFxyXG4gICAgcm93X3NvdXJjZSA9IG51bGwsXHJcbiAgICBjZWxsID0gbnVsbCxcclxuICAgIGNlbGxfb2xkID0gbnVsbCxcclxuICAgIGNlbGxfc291cmNlID0gbnVsbCxcclxuXHJcbiAgICAvLyB2YXJpYWJsZXMgaW4gdGhlIHByaXZhdGUgc2NvcGUgcmV2ZWFsZWQgYXMgcHVibGljIChzZWUgaW5pdCgpIG1ldGhvZClcclxuICAgIG9iaiA9IGZhbHNlLCAgICAgICAgLy8gKG9iamVjdCkgbW92ZWQgb2JqZWN0XHJcbiAgICBvYmpPbGQgPSBmYWxzZSwgICAgICAgLy8gKG9iamVjdCkgcHJldmlvdXNseSBtb3ZlZCBvYmplY3QgKGJlZm9yZSBjbGlja2VkIG9yIGNsb25lZClcclxuICAgIGhvdmVyID0ge2NvbG9yVGQ6ICcjRkZDRkFFJywgY29sb3JUcjogJyM5QkIzREEnfSxcclxuICAgIHNjcm9sbCA9IHtlbmFibGUgOiB0cnVlLCAgLy8gKGJvb2xlYW4pIGVuYWJsZS9kaXNhYmxlIGF1dG9zY3JvbGwgZnVuY3Rpb24gKGRlZmF1bHQgaXMgdHJ1ZSlcclxuICAgICAgICBib3VuZCA6IDI1LCAgICAgLy8gKGludGVnZXIpIGJvdW5kIHdpZHRoIGZvciBhdXRvc2Nyb2xsXHJcbiAgICAgICAgc3BlZWQgOiAyMH0sICAgIC8vIChpbnRlZ2VyKSBzY3JvbGwgc3BlZWQgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICBzdHlsZSA9IHsvL2JvcmRlckVuYWJsZWQgOiAnc29saWQnLCAvLyAoc3RyaW5nKSBib3JkZXIgc3R5bGUgZm9yIGVuYWJsZWQgZWxlbWVudHNcclxuICAgICAgICBib3JkZXJEaXNhYmxlZCA6ICdkb3R0ZWQnLCAgLy8gKHN0cmluZykgYm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIG9wYWNpdHlEaXNhYmxlZCA6ICcnLCAgIC8vIChpbnRlZ2VyKSBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgICByb3dFbXB0eUNvbG9yIDogJ3doaXRlJ30sIC8vIChzdHJpbmcpIGNvbG9yIG9mIGVtcHR5IHJvd1xyXG4gICAgdGQgPSB7fSwgICAgICAgICAgICAvLyAob2JqZWN0KSBjb250YWlucyByZWZlcmVuY2UgdG8gc291cmNlIChzZXQgaW4gb25tb3VzZWRvd24pLCBjdXJyZW50IChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpLCBwcmV2aW91cyAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKSBhbmQgdGFyZ2V0IGNlbGwgKHNldCBpbiBvbm1vdXNldXApXHJcbiAgICBjbG9uZSA9IHtrZXlEaXYgOiBmYWxzZSwgICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIGVsZW1lbnRzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5XHJcbiAgICAgICAga2V5Um93IDogZmFsc2UsICAgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgcm93cyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleVxyXG4gICAgICAgIHNlbmRCYWNrIDogZmFsc2UsICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIHRoZW4gY2xvbmVkIGVsZW1lbnQgY2FuIGJlIHJldHVybmVkIHRvIGl0cyBzb3VyY2VcclxuICAgICAgICBkcm9wIDogZmFsc2V9LCAgICAgIC8vIChib29sZWFuKSBpZiB0cnVlLCB0aGVuIGNsb25lZCBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIGRyb3BwZWQgdG8gdGhlIHRhYmxlIG5vIG1hdHRlciBpZiBkcm9wcGVkIG91dHNpZGUgb2YgdGhlIHRhYmxlXHJcbiAgICBcclxuICAgIGV2ZW50ID0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAob2JqZWN0KSBldmVudCBoYW5kbGVyc1xyXG4gICAge1xyXG4gICAgICBjbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgY2xvbmVkRHJvcHBlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBjbG9uZWRFbmQxIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGNsb25lZEVuZDIgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgZHJvcHBlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBkcm9wcGVkQmVmb3JlIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGZpbmlzaCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBub3RDbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgbm90TW92ZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Q2hhbmdlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dDbGlja2VkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Nsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dEcm9wcGVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Ryb3BwZWRCZWZvcmUgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93RHJvcHBlZFNvdXJjZSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dNb3ZlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dOb3RDbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Tm90TW92ZWQgOiBmdW5jdGlvbiAoKSB7fVxyXG4gICAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIERyYWcgY29udGFpbmVyIGluaXRpYWxpemF0aW9uLiBJdCBzaG91bGQgYmUgY2FsbGVkIGF0IGxlYXN0IG9uY2UgYW5kIGl0J3MgcG9zc2libGUgdG8gY2FsbCBhIG1ldGhvZCBtYW55IHRpbWVzLiBFdmVyeSBwYWdlIHNob3VsZCBoYXZlIGF0IGxlYXN0IG9uZSBkcmFnIGNvbnRhaW5lci5cclxuICAgKiBJZiBSRURJUFMuZHJhZy5pbml0KCkgaXMgY2FsbGVkIHdpdGhvdXQgaW5wdXQgcGFyYW1ldGVyLCBsaWJyYXJ5IHdpbGwgc2VhcmNoIGZvciBkcmFnIGNvbnRhaW5lciB3aXRoIGlkPVwicmVkaXBzLWRyYWdcIi5cclxuICAgKiBPbmx5IHRhYmxlcyBpbnNpZGUgZHJhZyBjb250YWluZXIgd2lsbCBiZSBzY2FubmVkLiBJdCBpcyBwb3NzaWJsZSB0byBoYXZlIHNldmVyYWwgZHJhZyBjb250YWluZXJzIHRvdGFseSBzZXBhcmF0ZWQgKGVsZW1lbnRzIGZyb20gb25lIGNvbnRhaW5lciB3aWxsIG5vdCBiZSB2aXNpYmxlIHRvIG90aGVyIGRyYWcgY29udGFpbmVycykuXHJcbiAgICogXCJpbml0XCIgbWV0aG9kIGNhbGxzIGVuYWJsZURyYWcuIElmIHRhYmxlcyBhcmUgZ2VuZXJhdGVkIGR5bmFtaWNhbGx5IHRoZW4gUkVESVBTLmluaXQoKSBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCB0byBzZXQgY3VzdG9tIHByb3BlcnRpZXMgdG8gdGFibGVzICh0YWJsZSBpbml0aWFsaXphdGlvbikuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtkY10gRHJhZyBjb250YWluZXIgSWQgKGRlZmF1bHQgaXMgXCJyZWRpcHMtZHJhZ1wiKS5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGluaXQgZHJhZyBjb250YWluZXIgKHdpdGggZGVmYXVsdCBpZD1cInJlZGlwcy1kcmFnXCIpXHJcbiAgICogUkVESVBTLmRyYWcuaW5pdCgpO1xyXG4gICAqXHJcbiAgICogLy8gaW5pdCBkcmFnIGNvbnRhaW5lciB3aXRoIGlkPVwibXktZHJhZzFcIlxyXG4gICAqIFJFRElQUy5kcmFnLmluaXQoJ215LWRyYWcxJyk7XHJcbiAgICovXHJcbiAgaW5pdCA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgZHJhZ0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWRpcHMtZHJhZycpOyAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgZHJhZyBjb250YWluZXJcclxuXHJcbiAgICB3aW5kb3dTY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcblxyXG4gICAgLy8gYXBwZW5kIERJViBpZD1cInJlZGlwc19jbG9uZVwiIGlmIERJViBkb2Vzbid0IGV4aXN0IChuZWVkZWQgZm9yIGNsb25pbmcgRElWIGVsZW1lbnRzKVxyXG4gICAgLy8gaWYgYXV0b21hdGljIGNyZWF0aW9uIGlzbid0IHByZWNpc2UgZW5vdWdoLCB1c2VyIGNhbiBtYW51YWxseSBjcmVhdGUgYW5kIHBsYWNlIGVsZW1lbnQgd2l0aCBpZD1cInJlZGlwc19jbG9uZVwiIHRvIHByZXZlbnQgd2luZG93IGV4cGFuZGluZyAodGhlbiB0aGlzIGNvZGUgd2lsbCBiZSBza2lwcGVkKVxyXG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVkaXBzX2Nsb25lJykpXHJcbiAgICB7XHJcbiAgICAgIHZhciByZWRpcHNDbG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICByZWRpcHNDbG9uZS5pZCA9ICdyZWRpcHNfY2xvbmUnO1xyXG4gICAgICByZWRpcHNDbG9uZS5zdHlsZS53aWR0aCA9IHJlZGlwc0Nsb25lLnN0eWxlLmhlaWdodCA9ICcxcHgnO1xyXG4gICAgICBkcmFnQ29udGFpbmVyLmFwcGVuZENoaWxkKHJlZGlwc0Nsb25lKTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVEcmFnKCdpbml0JywgJy5yZWRpcHMtZHJhZycpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhdHRhY2ggb25tb3VzZWRvd24gZXZlbnQgaGFuZGxlciB0byB0aGUgRElWIGVsZW1lbnRzLCBhdHRhY2ggb25zY3JvbGw9J2NhbGN1bGF0ZUNlbGxzJyBmb3IgRElWIGVsZW1lbnRzIHdpdGggJ3Njcm9sbCcgaW4gY2xhc3MgbmFtZSAocHJlcGFyZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhcylcclxuICAgIHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyZWVUYWJsZScpO1xyXG4gICAgdGFibGUucmVkaXBzID0ge307XHJcblxyXG4gICAgaGFuZGxlck9uUmVzaXplKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGluaXRpYWwgd2luZG93IHdpZHRoL2hlaWdodCwgc2Nyb2xsIHdpZHRoL2hlaWdodCBhbmQgZGVmaW5lIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIsIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIgY2FsbHMgY2FsY3VsYXRlIGNvbHVtbnNcclxuICAgIFJFRElQUy5ldmVudC5hZGQod2luZG93LCAncmVzaXplJywgaGFuZGxlck9uUmVzaXplKTtcclxuICAgIFJFRElQUy5ldmVudC5hZGQod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgIC8vIGF0dGFjaCBvbnNjcm9sbCBldmVudCB0byB0aGUgd2luZG93IChuZWVkZWQgZm9yIHJlY2FsY3VsYXRpbmcgdGFibGUgY2VsbHMgcG9zaXRpb25zKVxyXG4gIH07XHJcblxyXG5cclxuICAvLyBvbm1vdXNlZG93biBldmVudCBoYW5kbGVyLiAgVGhpcyBldmVudCBoYW5kbGVyIGlzIGF0dGFjaGVkIHRvIGV2ZXJ5IERJViBlbGVtZW50IGluIGRyYWcgY29udGFpbmVyIChwbGVhc2Ugc2VlIFwiZW5hYmxlRHJhZ1wiKS5cclxuICBoYW5kbGVyT25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZSlcclxuICB7XHJcbiAgICB2YXIgZXZ0ID0gZSB8fCB3aW5kb3cuZXZlbnQ7ICAgICAgICAgIC8vIGRlZmluZSBldmVudCAoY3Jvc3MgYnJvd3NlcilcclxuICAgIHZhciBvZmZzZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2JqZWN0IG9mZnNldFxyXG4gICAgdmFyIHBvc2l0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGlvbiBvZiB0YWJsZSBvciBjb250YWluZXIgYm94IG9mIHRhYmxlIChpZiBoYXMgcG9zaXRpb246Zml4ZWQgdGhlbiBleGNsdWRlIHNjcm9sbCBvZmZzZXQpXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG5cclxuICAgIGV2dC5jYW5jZWxCdWJibGUgPSB0cnVlOyAgICAgICAgICAgICAgLy8gc3RvcCBldmVudCBwcm9wYWdhdGlvbiAob25seSBmaXJzdCBjbGlja2VkIGVsZW1lbnQgd2lsbCByZWdpc3RlciBvbm1vdXNlZG93biBldmVudCksIG5lZWRlZCBpbiBjYXNlIG9mIHBsYWNpbmcgdGFibGUgaW5zaWRlIG9mIDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiPiAoYWZ0ZXIgZWxlbWVudCB3YXMgZHJvcHBlZCB0byB0aGlzIHRhYmxlIGl0IGNvdWxkbid0IGJlIG1vdmVkIG91dCBhbnkgbW9yZSAtIHRhYmxlIGFuZCBlbGVtZW50IG1vdmVkIHRvZ2V0aGVyIGJlY2F1c2UgdGFibGUgY2FwdHVyZXMgbW91c2Vkb3duIGV2ZW50IGFsc28gaW4gYnViYmxpbmcgcHJvY2VzKVxyXG4gICAgaWYgKGV2dC5zdG9wUHJvcGFnYXRpb24pXHJcbiAgICB7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBzaGlmdEtleSA9IGV2dC5zaGlmdEtleTsgICAgICAgICAgICAgIC8vIHNldCB0cnVlIG9yIGZhbHNlIGlmIHNoaWZ0IGtleSBpcyBwcmVzc2VkXHJcblxyXG4gICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGV4dCBzZWxlY3Rpb24gKENocm9tZSwgRkYsIE9wZXJhLCBTYWZhcmkpXHJcbiAgICB7XHJcbiAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiBkb2N1bWVudC5zZWxlY3Rpb24udHlwZSA9PT0gXCJUZXh0XCIpICAvLyBJRThcclxuICAgIHtcclxuICAgICAgdHJ5IHsgZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KCk7IH0gY2F0Y2ggKGVycm9yKSB7IH0gICAgICAgICAgICAgLy8gaWdub3JlIGVycm9yIHRvIGFzIGEgd29ya2Fyb3VuZCBmb3IgYnVnIGluIElFOFxyXG4gICAgfVxyXG5cclxuICAgIFggPSBwb2ludGVyLnggPSBldnQuY2xpZW50WDtcclxuICAgIFkgPSBwb2ludGVyLnkgPSBldnQuY2xpZW50WTtcclxuXHJcbiAgICB0aHJlc2hvbGQueCA9IFg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHRocmVzaG9sZCBwb3NpdGlvbiAobmVlZGVkIGZvciBjYWxjdWxhdGluZyBkaXN0YW5jZSlcclxuICAgIHRocmVzaG9sZC55ID0gWTtcclxuICAgIHRocmVzaG9sZC5mbGFnID0gZmFsc2U7XHJcblxyXG4gICAgUkVESVBTLmRyYWcub2JqT2xkID0gb2JqT2xkID0gb2JqIHx8IHRoaXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBwcmV2aW91cyBvYmplY3QgaWYgZGVmaW5lZCBvciBzZXQgdG8gdGhlIGNsaWNrZWQgb2JqZWN0XHJcbiAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSB0aGlzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGNsaWNrZWQgb2JqZWN0XHJcblxyXG4gICAgY2xvbmVDbGFzcyA9IG9iai5jbGFzc05hbWUuaW5kZXhPZigncmVkaXBzLWNsb25lJykgPiAtMTsgICAgICAgICAgICAvLyBzZXQgdHJ1ZSBvciBmYWxzZSBpZiBjbGlja2VkIGVsZW1lbnQgY29udGFpbnMgXCJyZWRpcHMtY2xvbmVcIiBjbGFzcyBuYW1lIChuZWVkZWQgZm9yIGNsb25lIGVsZW1lbnQgYW5kIGNsb25lIHRhYmxlIHJvdylcclxuXHJcbiAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSByb3dDbG9uZShvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY3VycmVudCByb3cgKGRvIG5vdCBjbG9uZSlcclxuXHJcbiAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB1c2VyIGhhcyB1c2VkIGEgbW91c2UgZXZlbnQgdG8gaW5jcmVhc2UgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIHRhYmxlIC0gY2FsbCBjYWxjdWxhdGVDZWxscygpXHJcblxyXG4gICAgcm93ID0gY2VsbCA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCByb3cgYW5kIGNlbGwgaW5kZXhlcyAobmVlZGVkIGluIGNhc2Ugb2YgZW5hYmxlIC8gZGlzYWJsZSB0YWJsZXMpXHJcbiAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgYW5kIHJlbWVtYmVyIHNvdXJjZSBwb3NpdGlvbiAob2xkIHBvc2l0aW9uIGlzIGluaXRpYWxseSB0aGUgc2FtZSBhcyBzb3VyY2UgcG9zaXRpb24pXHJcbiAgICByb3dfc291cmNlID0gcm93X29sZCA9IHJvdztcclxuICAgIGNlbGxfc291cmNlID0gY2VsbF9vbGQgPSBjZWxsO1xyXG5cclxuICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0NsaWNrZWQodGQuY3VycmVudCk7XHJcblxyXG4gICAgLy8gaWYgc3RhcnQgcG9zaXRpb24gY2Fubm90IGJlIGRlZmluZWQgdGhlbiB1c2VyIHByb2JhYmx5IGNsaWNrZWQgb24gZWxlbWVudCB0aGF0IGJlbG9uZ3MgdG8gdGhlIGRpc2FibGVkIHRhYmxlIChvciBzb21ldGhpbmcgZWxzZSBoYXBwZW5lZCB0aGF0IHdhcyBub3Qgc3VwcG9zZWQgdG8gaGFwcGVuIC0gZXZlcnkgZWxlbWVudCBzaG91bGQgYmVsb25nIHRvIHRoZSB0YWJsZSkgdGhpcyBjb2RlIG11c3QgZ28gYWZ0ZXIgZXhlY3V0aW9uIG9mIGV2ZW50IGhhbmRsZXJzXHJcbiAgICBpZiAocm93ID09PSBudWxsIHx8IGNlbGwgPT09IG51bGwpXHJcbiAgICB7XHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcnVuIHNldFRhYmxlUm93Q29sdW1uKCkgYWdhaW4gYmVjYXVzZSBzb21lIG9mIHRhYmxlcyBtaWdodCBiZSBlbmFibGVkIGluIGhhbmRsZXIgZXZlbnRzIGFib3ZlXHJcbiAgICAgIHJvd19zb3VyY2UgPSByb3dfb2xkID0gcm93O1xyXG4gICAgICBjZWxsX3NvdXJjZSA9IGNlbGxfb2xkID0gY2VsbDtcclxuXHJcbiAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgY2VsbCA9PT0gbnVsbCkgIC8vIG5vLCBjbGlja2VkIGVsZW1lbnQgaXMgb24gdGhlIGRpc2FibGVkIHRhYmxlIC0gc29ycnlcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZWQgPSBjbG9uZWQgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBcIm1vdmVkXCIgZmxhZyAobmVlZGVkIGZvciBjbG9uZSBvYmplY3QgaW4gaGFuZGxlck9uTW91c2VNb3ZlKSBhbmQgXCJjbG9uZWRcIiBmbGFnXHJcblxyXG4gICAgUkVESVBTLmV2ZW50LmFkZChkb2N1bWVudCwgJ21vdXNlbW92ZScsIGhhbmRsZXJPbk1vdXNlTW92ZSk7ICAgICAgICAvLyBhY3RpdmF0ZSBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyIG9uIGRvY3VtZW50IG9iamVjdFxyXG4gICAgUkVESVBTLmV2ZW50LmFkZChkb2N1bWVudCwgJ21vdXNldXAnLCBoYW5kbGVyT25Nb3VzZVVwKTsgICAgICAgICAgICAvLyBhY3RpdmF0ZSBvbm1vdXNldXAgZXZlbnQgaGFuZGxlciBvbiBkb2N1bWVudCBvYmplY3RcclxuXHJcbiAgICBpZiAocm93ICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3IgaWYgaXMgcG9zc2libGVcclxuICAgIHtcclxuICAgICAgYmdTdHlsZU9sZCA9IGdldFRkU3R5bGUocm93KTtcclxuICAgIH1cclxuXHJcbiAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLCAncG9zaXRpb24nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0YWJsZSBDU1MgcG9zaXRpb24gKG5lZWRlZCBmb3IgZXhjbHVzaW9uIFwic2Nyb2xsIG9mZnNldFwiIGlmIHRhYmxlIGJveCBoYXMgcG9zaXRpb24gZml4ZWQpXHJcblxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZSBkb2Vzbid0IGhhdmUgc3R5bGUgcG9zaXRpb246Zml4ZWQgdGhlbiB0YWJsZSBjb250YWluZXIgc2hvdWxkIGJlIHRlc3RlZFxyXG4gICAge1xyXG4gICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLnBhcmVudE5vZGUsICdwb3NpdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIG9mZnNldCA9IGJveE9mZnNldChvYmosIHBvc2l0aW9uKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2JqZWN0IG9mZnNldFxyXG4gICAgb2JqTWFyZ2luID0gW1kgLSBvZmZzZXRbMF0sIG9mZnNldFsxXSAtIFgsIG9mZnNldFsyXSAtIFksIFggLSBvZmZzZXRbM11dOyAgIC8vIGNhbGN1bGF0ZSBvZmZzZXQgZnJvbSB0aGUgY2xpY2tlZCBwb2ludCBpbnNpZGUgZWxlbWVudCB0byB0aGUgdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0IHNpZGUgb2YgdGhlIGVsZW1lbnRcclxuXHJcbiAgICByZXR1cm4gZmFsc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZSB0ZXh0IHNlbGVjdGlvbiBmb3Igbm9uIElFIGJyb3dzZXJzXHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZHMgcmV0dXJucyByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIHJvdyBvciBjbG9uZXMgdGFibGUgcm93LlxyXG4gICAqIElmIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlRG93bjpcclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmlucHV0IHBhcmFtZXRlciBpcyBESVYgY2xhc3M9XCJyZWRpcHMtcm93XCI8L2xpPlxyXG4gICAqIDxsaT5tZXRob2Qgd2lsbCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjdXJyZW50IHJvdzwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBJZiBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmU6XHJcbiAgICogPHVsPlxyXG4gICAqIDxsaT5pbnB1dCBwYXJhbWV0ZXIgaXMgVFIgKGN1cnJlbnQgcm93KSAtIHByZXZpb3VzbHkgcmV0dXJuZWQgd2l0aCB0aGlzIGZ1bmN0aW9uPC9saT5cclxuICAgKiA8bGk+bWV0aG9kIHdpbGwgY2xvbmUgY3VycmVudCByb3cgYW5kIHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGNsb25lZCByb3c8L2xpPlxyXG4gICAqIDwvdWw+XHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgRElWIGNsYXNzPVwicmVkaXBzLXJvd1wiIG9yIFRSIChjdXJyZW50IHJvdylcclxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gUmV0dXJucyByZWZlcmVuY2Ugb2YgdGhlIGN1cnJlbnQgcm93IG9yIGNsb25lIGN1cnJlbnQgcm93IGFuZCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjbG9uZWQgcm93LlxyXG4gICAqL1xyXG4gIHJvd0Nsb25lID0gZnVuY3Rpb24gKGVsKVxyXG4gIHtcclxuICAgIHZhciB0YWJsZU1pbmk7ICAgICAgLy8gb3JpZ2luYWwgdGFibGUgaXMgY2xvbmVkIGFuZCBhbGwgcm93cyBleGNlcHQgcGlja2VkIHJvdyBhcmUgZGVsZXRlZFxyXG4gICAgdmFyIHJvd09iajsgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIHJvdyBvYmplY3RcclxuICAgIHZhciBkaXY7ICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSA8RElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiPiBlbGVtZW50XHJcblxyXG4gICAgaWYgKGVsLm5vZGVOYW1lID09PSAnRElWJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMSkgcm93Q2xvbmUgY2FsbCBpbiBvbm1vdXNlZG93biB3aWxsIHJldHVybiByZWZlcmVuY2Ugb2YgVFIgZWxlbWVudCAoaW5wdXQgcGFyYW1ldGVyIGlzIEhUTUxFbGVtZW50IDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCI+KVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgcmVmZXJlbmNlIHRvIHRoZSA8RElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiPlxyXG4gICAgICBlbCA9IGZpbmRQYXJlbnQoJ1RSJywgZWwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBwYXJlbnQgVFIgZWxlbWVudFxyXG4gICAgICBpZiAoZWwucmVkaXBzID09PSB1bmRlZmluZWQpIHsgZWwucmVkaXBzID0ge307IH0gICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZCAoaXQgaXMgb25seSBvbmUgcHJvcGVydHkgZm9yIG5vdylcclxuICAgICAgZWwucmVkaXBzLmRpdiA9IGRpdjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgcmVmZXJlbmNlIHRvIHRoZSBESVYgZWxlbWVudCBhcyByZWRpcHMuZGl2IHRoaXMgd2lsbCBtb3N0bHkgYmUgcmVmZXJlbmNlZCBhcyBvYmpPbGQucmVkaXBzLmRpdiAoYmVjYXVzZSBvYmpPbGQgaW4gcm93IGRyYWdnaW5nIGNvbnRleHQgaXMgcmVmZXJlbmNlIHRvIHRoZSBzb3VyY2Ugcm93KVxyXG4gICAgICByZXR1cm4gZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHJlZmVyZW5jZSB0byB0aGUgVFIgZWxlbWVudFxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMikgcm93Q2xvbmUgY2FsbCBpbiBvbm1vdXNlbW92ZSB3aWxsIGNsb25lIGN1cnJlbnQgcm93IChlbC5ub2RlTmFtZSA9PT0gJ1RSJylcclxuICAgIHtcclxuICAgICAgcm93T2JqID0gZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgc291cmNlIHJvd1xyXG5cclxuICAgICAgdGFibGVNaW5pID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgdGFibGVNaW5pLmlubmVySFRNTCA9ICc8dHIgaWQ9XCInICsgcm93T2JqLmlkICsgJ1wiIGNsYXNzPVwiJyArIHJvd09iai5jbGFzc0xpc3QgKyAnXCI+JyArIHJvd09iai5pbm5lckhUTUwgKyAnPC90cj4nO1xyXG4gICAgICAvL3RhYmxlTWluaS5pbm5lckhUTUwgPSBnZXRBc3NlbWJseU1hcmt1cChwYXJzZUludChyb3dPYmouaWQucmVwbGFjZSgncm93aWQnLCAnJykpKTsgICAvL2NhbiBiZSB1c2VkIHRvIHNob3cgdGhlIGVudGlyZSBhc3NlbWJseSB3aGVuIGRyYWdnaW5nLCB0ZW5kcyB0byBzbG93IHRoaW5ncyBkb3duIGFuZCBiZSBjdW1iZXJzb21lXHJcblxyXG4gICAgICB0YWJsZU1pbmkucmVkaXBzID0ge307ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIFwicHJvcGVydHkgb2JqZWN0XCIgaW4gd2hpY2ggYWxsIGN1c3RvbSBwcm9wZXJ0aWVzIHdpbGwgYmUgc2F2ZWRcclxuICAgICAgdGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cgPSByb3dPYmo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHNvdXJjZSByb3cgcmVmZXJlbmNlIChuZWVkZWQgZm9yIHNvdXJjZSByb3cgZGVsZXRpb24gaW4gcm93RHJvcCBtZXRob2QpXHJcblxyXG4gICAgICBjb3B5UHJvcGVydGllcyhyb3dPYmosIHRhYmxlTWluaS5yb3dzWzBdKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgdG8gYWxsIGNoaWxkIERJViBlbGVtZW50cyBhbmQgc2V0IG9ubW91c2Vkb3duL29uZGJsY2xpY2sgZXZlbnQgaGFuZGxlcnNcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZGlwc19jbG9uZScpLmFwcGVuZENoaWxkKHRhYmxlTWluaSk7ICAgICAvLyBhcHBlbmQgY2xvbmVkIG1pbmkgdGFibGUgdG8gdGhlIERJViBpZD1cInJlZGlwc19jbG9uZVwiXHJcblxyXG4gICAgICByZXR1cm4gdGFibGVNaW5pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgZHJvcHMgdGFibGUgcm93IHRvIHRoZSB0YXJnZXQgcm93IGFuZCBjYWxscyB1c2VyIGV2ZW50IGhhbmRsZXJzLiBTb3VyY2Ugcm93IGlzIGRlbGV0ZWQgYW5kIGNsb25lZCByb3cgaXMgaW5zZXJ0ZWQgYXQgdGhlIG5ldyBwb3NpdGlvbi5cclxuICAgKiBNZXRob2QgdGFrZXMgY2FyZSBhYm91dCB0aGUgbGFzdCByb3cgaW4gdGhlIHRhYmxlIG9ubHkgaWYgdXNlciBkcmFncyBlbGVtZW50LiBJbiBjYXNlIG9mIG1vdmluZyByb3dzIHdpdGggbW92ZU9iamVjdCgpLCBjb250cm9sXHJcbiAgICogYW5kIGxvZ2ljIGZvciBsYXN0IHJvdyBpcyB0dXJuZWQgb2ZmLiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZVVwKClcclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHRhYmxlSWR4IFRhYmxlIGluZGV4LlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gcm93SWR4IFJvdyBpbmRleC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBbdGFibGVNaW5pXSBSZWZlcmVuY2UgdG8gdGhlIG1pbmkgdGFibGUgKHRhYmxlIHRoYXQgY29udGFpbnMgb25seSBvbmUgcm93KS4gVGhpcyBpcyBhY3R1YWxseSBjbG9uZSBvZiBzb3VyY2Ugcm93LlxyXG4gICAqL1xyXG4gIHJvd0Ryb3AgPSBmdW5jdGlvbiAocm93SWR4KVxyXG4gIHtcclxuICAgIHZhciBkcm9wOyAgICAgICAgICAgICAgIC8vIChib29sZWFuKSBpZiBmYWxzZSB0aGVuIGRyb3BwaW5nIHJvdyB3aWxsIGJlIGNhbmNlbGVkXHJcbiAgICB2YXIgdHJNaW5pOyAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIFRSIGluIG1pbmkgdGFibGVcclxuICAgIHZhciBkZWxldGVUYWJsZVJvdzsgICAgIC8vIGRlbGV0ZSByb3cgKHByaXZhdGUgbWV0aG9kKVxyXG5cclxuICAgIGRlbGV0ZVRhYmxlUm93ID0gZnVuY3Rpb24gKGVsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIHRhYmxlIHJvdyAtIGlucHV0IHBhcmVtZXRlciBpcyByb3cgcmVmZXJlbmNlIChwcml2YXRlIG1ldGhvZClcclxuICAgIHtcclxuICAgICAgdmFyIHRibDtcclxuXHJcbiAgICAgIGlmIChlbC5yZWRpcHMgPT09IHVuZGVmaW5lZCB8fCAhZWwucmVkaXBzLmVtcHR5Um93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBkb2Vzbid0IGhhdmUgY3VzdG9tIFwicmVkaXBzXCIgcHJvcGVydHkgb3IgaXMgbm90IG1hcmtlZCBhcyBlbXB0eSwgdGhlbiBpdCBjYW4gYmUgZGVsZXRlZFxyXG4gICAgICB7XHJcbiAgICAgICAgdGJsID0gZmluZFBhcmVudCgnVEFCTEUnLCBlbCk7XHJcbiAgICAgICAgdGJsLmRlbGV0ZVJvdyhlbC5yb3dJbmRleCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSwgcm93IGlzIG1hcmtlZCBhcyBcImVtcHR5XCIgYW5kIGl0IHdpbGwgYmUgb25seSBjb2xvcmVkIChub3QgZGVsZXRlZCksIGNvbnRlbnQgb2YgdGFibGUgY2VsbHMgd2lsbCBiZSBkZWxldGVkIGFuZCBiYWNrZ3JvdW5kIGNvbG9yIHdpbGwgYmUgc2V0IHRvIGRlZmF1bHQgY29sb3JcclxuICAgICAge1xyXG4gICAgICAgIHJvd09wYWNpdHkoZWwsICdlbXB0eScsIFJFRElQUy5kcmFnLnN0eWxlLnJvd0VtcHR5Q29sb3IpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciB0YWJsZU1pbmkgPSBvYmo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY3VycmVudGx5IGRyYWdnZWQgcm93IC0gbWluaSB0YWJsZVxyXG5cclxuICAgIGlmIChyb3dJZHggPiB0YWJsZS5yb3dzLmxlbmd0aCAtIDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGluZGV4IGlzIG91dCBvZiBib3VuZHMsIHRoZW4gc2V0IG1heCByb3cgaW5kZXggKHJvdyB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSB0YWJsZSBib3R0b20pXHJcbiAgICB7XHJcbiAgICAgIHJvd0lkeCA9IHRhYmxlLnJvd3MubGVuZ3RoIC0gMTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdGFibGVSb3cgPSB0YWJsZS5yb3dzW3Jvd0lkeF07XHJcblxyXG4gICAgdHJNaW5pID0gdGFibGVNaW5pLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBUUiBpbiBtaW5pIHRhYmxlIChtaW5pIHRhYmxlIGhhcyBvbmx5IG9uZSByb3cgLSBmaXJzdCByb3cpXHJcblxyXG4gICAgdGFibGVNaW5pLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGFibGVNaW5pKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXN0cm95IG1pbmkgdGFibGUgKG5vZGUgc3RpbGwgZXhpc3RzIGluIG1lbW9yeSlcclxuXHJcbiAgICBkcm9wID0gUkVESVBTLmRyYWcuZXZlbnQucm93RHJvcHBlZEJlZm9yZSh0YWJsZSwgdGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cucm93SW5kZXgpOyAgICAgIC8vIGNhbGwgZXZlbnQucm93RHJvcHBlZEJlZm9yZSgpIC0gdGhpcyBoYW5kbGVyIGNhbiByZXR1cm4gXCJmYWxzZVwiIHZhbHVlXHJcblxyXG4gICAgaWYgKGRyb3AgIT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBoYW5kbGVyIHJldHVybmVkIGZhbHNlIHRoZW4gcm93IGRyb3BwaW5nIHdpbGwgYmUgY2FuY2VsZWRcclxuICAgIHtcclxuICAgICAgaWYgKHJvd0lkeCA8IHRhYmxlLnJvd3MubGVuZ3RoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGlzIG5vdCBkcm9wcGVkIHRvIHRoZSBsYXN0IHJvdyBwb3NpdGlvblxyXG4gICAgICB7XHJcbiAgICAgICAgdGFibGVSb3cucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodHJNaW5pLCB0YWJsZVJvdy5uZXh0U2libGluZyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IGlzIGRyb3BwZWQgdG8gdGhlIGxhc3Qgcm93IHBvc2l0aW9uLCBpdCdzIHBvc3NpYmxlIHRvIHNldCB0YXJnZXQgcm93IGluZGV4IGdyZWF0ZXIgdGhlbiBudW1iZXIgb2Ygcm93cyAtIGluIHRoaXMgY2FzZSByb3cgd2lsbCBiZSBhcHBlbmRlZCB0byB0aGUgdGFibGUgZW5kXHJcbiAgICAgIHtcclxuICAgICAgICB0YWJsZVJvdy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRyTWluaSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IHNob3VsZCBiZSBhcHBlbmRlZFxyXG4gICAgICAgIHRhYmxlUm93ID0gdGFibGUucm93c1swXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSB1cHBlciByb3csIGFmdGVyIHJvdyBpcyBhcHBlbmRlZCwgdXBwZXIgcm93IHNob3VsZCBiZSB0ZXN0ZWQgaWYgY29udGFpbnMgXCJlbXB0eVJvd1wiIHNldCB0byB0cnVlLCB0aGlzIGNvdWxkIGhhcHBlbiBpbiBjYXNlIHdoZW4gcm93IGlzIG1vdmVkIHRvIHRoZSB0YWJsZSB3aXRoIG9ubHkgb25lIGVtcHR5IHJvd1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgc291cmNlIHJvdyBpZiByb3cgaXMgbm90IGNsb25lZFxyXG4gICAgICB7XHJcbiAgICAgICAgZGVsZXRlVGFibGVSb3codGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkZWxldGUgdHJNaW5pLnJlZGlwcy5lbXB0eVJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgZW1wdHlSb3cgcHJvcGVydHkgZnJvbSBpbnNlcnRlZC9hcHBlbmRlZCByb3cgYmVjYXVzZSBlbXB0eVJvdyB3aWxsIGJlIHNldCBvbiBuZXh0IG1vdmUsIGNvcHlQcm9wZXJ0aWVzKCkgaW4gcm93Q2xvbmUoKSBjb3BpZWQgZW1wdHlSb3cgcHJvcGVydHkgdG8gdGhlIHJvdyBpbiB0YWJsZU1pbmksIG90aGVyd2lzZSByb3cgd2lsbCBiZSBvdmVyd3JpdHRlbiBhbmQgdGhhdCBpcyBub3QgZ29vZFxyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dEcm9wcGVkKHRhYmxlUm93KTsgICAgICAgICAvLyBjYWxsIHJvd0Ryb3BwZWQgZXZlbnQgaGFuZGxlclxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVudC5yb3dEcm9wcGVkQmVmb3JlKCkgcmV0dXJuZWQgXCJmYWxzZVwiIChpdCdzIHVwIHRvIHVzZXIgdG8gcmV0dXJuIHNvdXJjZSByb3cgb3BhY2l0eSB0byBpdHMgb3JpZ2luYWwgc3RhdGUpXHJcbiAgICB7XHJcbiAgICAgIC8vIHJvd09wYWNpdHkob2JqT2xkLCAxMDApO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBvbm1vdXNldXAgZXZlbnQgaGFuZGxlci5cclxuICAgKiBoYW5kbGVyT25Nb3VzZVVwIGlzIGF0dGFjaGVkIHRvIHRoZSBESVYgZWxlbWVudCBpbiBhIG1vbWVudCB3aGVuIERJViBlbGVtZW50IGlzIGNsaWNrZWQgKHRoaXMgaGFwcGVucyBpbiBoYW5kbGVyT25Nb3VzZURvd24pLlxyXG4gICAqIFRoaXMgZXZlbnQgaGFuZGxlciBkZXRhY2hlcyBvbm1vdXNlbW92ZSBhbmQgb25tb3VzZXVwIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGUgRXZlbnQgaW5mb3JtYXRpb24uXHJcbiAgICovXHJcbiAgaGFuZGxlck9uTW91c2VVcCA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgLy8gZGVmaW5lIGV2ZW50IChGRiAmIElFKVxyXG4gICAgdmFyIHJfcm93OyAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIG1vZGU9XCJyb3dcIlxyXG4gICAgdmFyIG10X3RyOyAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIHJldHVybmluZyBjb2xvciB0byB0aGUgdGFibGUgY2VsbCAobXRfdHIgLSBcIm1pbmkgdGFibGVcIiBcInRhYmxlX3Jvd1wiKVxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCBpbiBsb2NhbCBsb29wXHJcbiAgICB2YXIgZHJvcDsgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGZhbHNlIHRoZW4gZHJvcHBlZCBESVYgZWxlbWVudFxyXG5cclxuICAgIFggPSBldnQuY2xpZW50WDtcclxuICAgIFkgPSBldnQuY2xpZW50WTtcclxuXHJcbiAgICBlZGdlLmZsYWcueCA9IGVkZ2UuZmxhZy55ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHVybiBvZmYgYXV0b3Njcm9sbCBcImN1cnJlbnQgY2VsbFwiIGhhbmRsaW5nIChpZiB1c2VyIG1vdXNldXAgaW4gdGhlIG1pZGRsZSBvZiBhdXRvc2Nyb2xsaW5nKVxyXG5cclxuICAgIFJFRElQUy5ldmVudC5yZW1vdmUoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBoYW5kbGVyT25Nb3VzZU1vdmUpO1xyXG4gICAgUkVESVBTLmV2ZW50LnJlbW92ZShkb2N1bWVudCwgJ21vdXNldXAnLCBoYW5kbGVyT25Nb3VzZVVwKTtcclxuXHJcbiAgICBkcmFnQ29udGFpbmVyLm9uc2VsZWN0c3RhcnQgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWNoIGRyYWdDb250YWluZXIub25zZWxlY3RzdGFydCBoYW5kbGVyIHRvIGVuYWJsZSBzZWxlY3QgZm9yIElFNy9JRTggYnJvd3NlclxyXG5cclxuICAgIHJlc2V0U3R5bGVzKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvYmplY3Qgc3R5bGVzXHJcblxyXG4gICAgc2Nyb2xsRGF0YS53aWR0aCAgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg7XHJcbiAgICBzY3JvbGxEYXRhLmhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcblxyXG4gICAgZWRnZS5mbGFnLnggPSBlZGdlLmZsYWcueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGF1dG9zY3JvbGwgZmxhZ3NcclxuXHJcbiAgICBpZiAocm93ID09PSBudWxsIHx8IGNlbGwgPT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGVsZW1lbnQgd2FzIGNsaWNrZWQgYW5kIGxlZnQgYnV0dG9uIHdhcyByZWxlYXNlZCwgYnV0IGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSB1bm1vdmFibGUgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RNb3ZlZCgpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZHJhZy50ZC50YXJnZXQgPSB0ZC50YXJnZXQgPSB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF07XHJcblxyXG4gICAgICBzZXRUZFN0eWxlKHJvdywgYmdTdHlsZU9sZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIGZvciBkZXN0aW5hdGlvbiByb3dcclxuXHJcbiAgICAgIHJfcm93ID0gcm93O1xyXG5cclxuICAgICAgaWYgKCFtb3ZlZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgd2FzIGNsaWNrZWQgYW5kIG1vdXNlIGJ1dHRvbiB3YXMgcmVsZWFzZWQgcmlnaHQgYXdheSAocm93IHdhcyBub3QgbW92ZWQpXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dOb3RNb3ZlZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IHdhcyBtb3ZlZFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHJvd19zb3VyY2UgPT09IHJfcm93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGRyb3BwZWQgdG8gdGhlIHNvdXJjZSByb3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICBtdF90ciA9IG9iai5nZXRFbGVtZW50c0J5VGFnTmFtZSgndHInKVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBUUiBpbiBtaW5pIHRhYmxlIChtaW5pIHRhYmxlIGhhcyBvbmx5IG9uZSByb3cpXHJcblxyXG4gICAgICAgICAgb2JqT2xkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG10X3RyLnN0eWxlLmJhY2tncm91bmRDb2xvcjsgICAgICAgICAgIC8vIHJldHVybiBjb2xvciB0byB0aGUgc291cmNlIHJvdyBmcm9tIHRoZSByb3cgb2YgY2xvbmVkIG1pbmkgdGFibGUsIGNvbG9yIG9mIHRoZSBzb3VyY2Ugcm93IGNhbiBiZSBjaGFuZ2VkIGluIGV2ZW50LnJvd01vdmVkKCkgKHdoZW4gdXNlciB3YW50cyB0byBtYXJrIHNvdXJjZSByb3cpXHJcblxyXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IG10X3RyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBjb2xvciB0byB0aGUgZWFjaCB0YWJsZSBjZWxsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIG9iak9sZC5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBtdF90ci5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjbG9uZWQgbWluaSB0YWJsZVxyXG4gICAgICAgICAgZGVsZXRlIG9iak9sZC5yZWRpcHMuZW1wdHlSb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBlbXB0eVJvdyBwcm9wZXJ0eSBmcm9tIHNvdXJjZSByb3cgYmVjYXVzZSBlbXB0eVJvdyB3aWxsIGJlIHNldCBvbiBuZXh0IG1vdmUsIG90aGVyd2lzZSByb3cgd291bGQgYmUgb3ZlcndyaXR0ZW4gYW5kIHRoYXQncyBubyBnb29kXHJcblxyXG4gICAgICAgICAgaWYgKGNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyB3YXMgY2xvbmVkIGFuZCBkcm9wcGVkIHRvIHRoZSBzb3VyY2UgbG9jYXRpb24gdGhlbiBjYWxsIHJvd05vdENsb25lZCBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd05vdENsb25lZCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQucm93RHJvcHBlZFNvdXJjZSgpIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93RHJvcHBlZFNvdXJjZSh0ZC50YXJnZXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZHJvcHBlZCB0byB0aGUgbmV3IHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJvd0Ryb3Aocl9yb3cpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKCFjbG9uZWQgJiYgIXRocmVzaG9sZC5mbGFnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGlja2VkIGVsZW1lbnQgd2FzIG5vdCBtb3ZlZCAtIERJViBlbGVtZW50IGRpZG4ndCBjcm9zcyB0aHJlc2hvbGQgdmFsdWUsIGp1c3QgY2FsbCBldmVudC5ub3RNb3ZlZCBldmVudCBoYW5kbGVyXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RNb3ZlZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGNsb25lZCAmJiByb3dfc291cmNlID09PSByb3cgJiYgY2VsbF9zb3VyY2UgPT09IGNlbGwpICAgICAgICAgICAgLy8gZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3BwZWQgb24gdGhlIHN0YXJ0IHBvc2l0aW9uXHJcbiAgICAgIHtcclxuICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopO1xyXG4gICAgICAgIGNsb25lZElkW29iak9sZC5pZF0gLT0gMTtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RDbG9uZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChjbG9uZWQgJiYgUkVESVBTLmRyYWcuY2xvbmUuZHJvcCA9PT0gZmFsc2UgJiYgKFggPCB0YWJsZS5yZWRpcHMub2Zmc2V0WzNdIHx8IFggPiB0YWJsZS5yZWRpcHMub2Zmc2V0WzFdIHx8IFkgPCB0YWJsZS5yZWRpcHMub2Zmc2V0WzBdIHx8IFkgPiB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdKSkgICAgLy8gZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3BwZWQgb3V0c2lkZSBjdXJyZW50IHRhYmxlIGFuZCBjbG9uZS5kcm9wIGlzIHNldCB0byBmYWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTtcclxuICAgICAgICBjbG9uZWRJZFtvYmpPbGQuaWRdIC09IDE7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQubm90Q2xvbmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIGNhbGwgZXZlbnQuZHJvcHBlZEJlZm9yZSgpLCBhcHBlbmQgb2JqZWN0IHRvIHRoZSBjZWxsIGFuZCBjYWxsIGV2ZW50LmRyb3BwZWQoKVxyXG4gICAgICB7XHJcbiAgICAgICAgZHJvcCA9IFJFRElQUy5kcmFnLmV2ZW50LmRyb3BwZWRCZWZvcmUodGQudGFyZ2V0KTsgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5kcm9wcGVkQmVmb3JlIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICBlbGVtZW50RHJvcChkcm9wKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkcm9wIGVsZW1lbnQgdG8gdGhlIHRhYmxlIGNlbGwgKG9yIGRlbGV0ZSBjbG9uZWQgZWxlbWVudCBpZiBkcm9wPVwiZmFsc2VcIilcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWNhbGN1bGF0ZSB0YWJsZSBjZWxscyBhbmQgc2Nyb2xsZXJzIGJlY2F1c2UgY2VsbCBjb250ZW50IGNvdWxkIGNoYW5nZSByb3cgZGltZW5zaW9uc1xyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5maW5pc2goKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgbGFzdCBldmVudCBoYW5kbGVyXHJcbiAgICB9XHJcblxyXG4gICAgcm93X29sZCA9IGNlbGxfb2xkID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9sZCBwb3NpdGlvbnNcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRWxlbWVudCBkcm9wLiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZVVwIGFuZCBhcHBlbmRzIGVsZW1lbnQgdG8gdGhlIHRhcmdldCB0YWJsZSBjZWxsLlxyXG4gICAqIElmIGlucHV0IHBhcmFtZXRlciBcImRyb3BcIiBpcyBzZXQgdG8gXCJmYWxzZVwiICh0aGlzIGlzIGFjdHVhbGx5IHJldHVybiB2YWx1ZSBmcm9tIGV2ZW50LmRyb3BwZWRCZWZvcmUpIHRoZW4gRElWIGVsZW1lbnRzIHdpbGwgbm90IGJlIGRyb3BwZWQgKG9ubHkgY2xvbmVkIGVsZW1lbnQgd2lsbCBiZSBkZWxldGVkKS5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtkcm9wXSBJZiBub3QgXCJmYWxzZVwiIHRoZW4gRElWIGVsZW1lbnQgd2lsbCBiZSBkcm9wcGVkIHRvIHRoZSBjZWxsLlxyXG4gICAqL1xyXG4gIGVsZW1lbnREcm9wID0gZnVuY3Rpb24gKGRyb3ApIFxyXG4gIHtcclxuICAgIHZhciBjbG9uZVNvdXJjZURpdiA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lIHNvdXJjZSBlbGVtZW50IChuZWVkZWQgaWYgY2xvbmUuc2VuZEJhY2sgaXMgc2V0IHRvIHRydWUpXHJcbiAgICB2YXIgZGl2OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub2RlTGlzdCBvZiBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGwgKG5lZWRlZCBpZiBjbG9uZS5zZW5kQmFjayBpcyBzZXQgdG8gdHJ1ZSlcclxuICAgIFxyXG4gICAgaWYgKGRyb3AgIT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaW5wdXQgcGFyYW1ldGVyIGlzIG5vdCBcImZhbHNlXCIgdGhlbiBESVYgZWxlbWVudCB3aWxsIGJlIGRyb3BwZWQgdG8gdGhlIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgaWYgKGNsb25lLnNlbmRCYWNrID09PSB0cnVlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNsb25lLnNlbmRCYWNrIGlzIHNldCB0byB0cnVlIHRoZW4gdHJ5IHRvIGZpbmQgc291cmNlIGVsZW1lbnQgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAge1xyXG4gICAgICAgIGRpdiA9IHRkLnRhcmdldC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnRElWJyk7ICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGFsbCBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpdi5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCBhbGwgRElWIGVsZW1lbnRzIGluIHRhcmdldCBjZWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgLy8gaWYgRElWIGluIHRhcmdldCBjZWxsIGlzIHNvdXJjZSBvZiBkcm9wcGVkIERJViBlbGVtZW50IChkcm9wcGVkIERJViBpZCBhbmQgaWQgb2YgRElWIGluIHRhcmdldCBjZWxsIGhhcyB0aGUgc2FtZSBuYW1lIGJlZ2lubmluZyBsaWtlIFwiZDEyYzJcIiBhbmQgXCJkMTJcIilcclxuICAgICAgICAgIC8vIG9mIGNvdXJzZSwgdGhlIGNhc2Ugd2hlcmUgc291cmNlIERJViBlbGVtZW50IGlzIGRyb3BwZWQgdG8gdGhlIGNlbGwgd2l0aCBjbG9uZWQgRElWIGVsZW1lbnQgc2hvdWxkIGJlIGV4Y2x1ZGVkIChwb3NzaWJsZSBpbiBjbGltaXQxIHR5cGUpXHJcbiAgICAgICAgICBpZiAob2JqICE9PSBkaXZbaV0gJiYgb2JqLmlkLmluZGV4T2YoZGl2W2ldLmlkKSA9PT0gMCkgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGNsb25lU291cmNlRGl2ID0gZGl2W2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIGNsb25lU291cmNlRGl2IGVsZW1lbnRcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjbG9uZVNvdXJjZURpdikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2xvbmUgc291cmNlIERJViBlbGVtZW50IGV4aXN0cyBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNsb25lTGltaXQoY2xvbmVTb3VyY2VEaXYsIDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjbGltaXQgY2xhc3MgKGluY3JlbWVudCBieSAxKVxyXG4gICAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRyb3BwZWQgRElWIGVsZW1lbnRcclxuICAgICAgICAgIHJldHVybjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBmcm9tIHRoZSBtZXRob2QgKGV2ZXJ5dGhpbmcgaXMgZG9uZSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRkLnRhcmdldC5hcHBlbmRDaGlsZChvYmopO1xyXG4gICAgICBcclxuICAgICAgcmVnaXN0ZXJFdmVudHMob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgKEZJWCBmb3IgU2FmYXJpIE1vYmlsZSlcclxuICAgICAgUkVESVBTLmRyYWcuZXZlbnQuZHJvcHBlZCh0ZC50YXJnZXQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmRyb3BwZWQgYmVjYXVzZSBjbG9uZUxpbWl0IGNvdWxkIGNhbGwgZXZlbnQuY2xvbmVkRW5kMSBvciBldmVudC5jbG9uZWRFbmQyXHJcbiAgICAgIFxyXG4gICAgICBpZiAoY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9iamVjdCBpcyBjbG9uZWRcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmNsb25lZERyb3BwZWQodGQudGFyZ2V0KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgY2xvbmVkRHJvcHBlZCBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgY2xvbmVMaW1pdChvYmpPbGQsIC0xKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdDFfWCBvciBjbGltaXQyX1ggY2xhc3NuYW1lXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNsb25lZCAmJiBvYmoucGFyZW50Tm9kZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZWQgZWxlbWVudCBzaG91bGQgYmUgZGVsZXRlZCAoaWYgbm90IGFscmVhZHkgZGVsZXRlZClcclxuICAgIHtcclxuICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgZm9yIERJViBlbGVtZW50LlxyXG4gICAqIERJViBlbGVtZW50cyBzaG91bGQgaGF2ZSBvbmx5IG9ubW91c2Vkb3duICh1c2luZyB0cmFkaXRpb25hbCBldmVudCByZWdpc3RyYXRpb24gbW9kZWwpLlxyXG4gICAqIEkgaGFkIGEgcHJvYmxlbSB3aXRoIGFkdmFuY2VkIGV2ZW50IHJlZ2lzdHJhdGlvbiBtb2RlbC5cclxuICAgKiBJbiBjYXNlIG9mIHVzaW5nIGFkdmFuY2VkIG1vZGVsLCBzZWxlY3RlZCB0ZXh0IGFuZCBkcmFnZ2VkIERJViBlbGVtZW50IHdlcmUgaW4gY29sbGlzaW9uLlxyXG4gICAqIEl0IGxvb2tzIGxpa2Ugc2VsZWN0ZWQgdGV4dCB3YXMgYWJsZSB0byBkcmFnIGluc3RlYWQgb2YgRElWIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZGl2IFJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3Igb25tb3VzZWRvd24sIG9udG91Y2hzdGFydCBhbmQgb25kYmxjbGljayB0byB0aGUgRElWIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbZmxhZ10gSWYgc2V0IHRvIGZhbHNlIHRoZW4gZXZlbnQgbGlzdGVuZXJzIHdpbGwgYmUgZGVsZXRlZC5cclxuICAgKi9cclxuICByZWdpc3RlckV2ZW50cyA9IGZ1bmN0aW9uIChkaXYsIGZsYWcpXHJcbiAge1xyXG4gICAgaWYgKGZsYWcgPT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBmbGFnIGlzIHNlIHRvIGZhbHNlLCB0aGVuIHJlbW92ZSBldmVudCBsaXN0ZW5lcnMgb24gRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgZGl2Lm9ubW91c2Vkb3duID0gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgZGl2Lm9ubW91c2Vkb3duID0gaGFuZGxlck9uTW91c2VEb3duO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICByZXNldFN0eWxlcyA9IGZ1bmN0aW9uIChlbCkgICAgICAgICAvLyBBZnRlciBlbGVtZW50IGlzIGRyb3BwZWQsIHN0eWxlcyBuZWVkIHRvIGJlIHJlc2V0LlxyXG4gIHtcclxuICAgIGVsLnN0eWxlLnRvcCAgPSAnJztcclxuICAgIGVsLnN0eWxlLmxlZnQgPSAnJztcclxuICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJyc7XHJcbiAgICBlbC5zdHlsZS56SW5kZXggPSAnJztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlTW92ZSBpcyBhdHRhY2hlZCB0byBkb2N1bWVudCBsZXZlbCBpbiBhIG1vbWVudCB3aGVuIERJViBlbGVtZW50IGlzIGNsaWNrZWQgKHRoaXMgaGFwcGVucyBpbiBoYW5kbGVyT25Nb3VzZURvd24pLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlVXAgZGV0YWNoZXMgb25tb3VzZW1vdmUgYW5kIG9ubW91c2V1cCBldmVudCBoYW5kbGVycy5cclxuICAgKiBAcGFyYW0ge0V2ZW50fSBlIEV2ZW50IGluZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIGhhbmRsZXJPbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgICAgICAgICAvLyBkZWZpbmUgZXZlbnQgKEZGICYgSUUpXHJcbiAgICB2YXIgYm91bmQgPSBSRURJUFMuZHJhZy5zY3JvbGwuYm91bmQ7ICAgLy8gcmVhZCBcImJvdW5kXCIgcHVibGljIHByb3BlcnR5IChtYXliZSBjb2RlIHdpbGwgYmUgZmFzdGVyLCBhbmQgaXQgd2lsbCBiZSBlYXNpZXIgdG8gcmVmZXJlbmNlIGluIG9ubW91c2Vtb3ZlIGhhbmRsZXIpXHJcbiAgICB2YXIgc2NhOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICB2YXIgZGVsdGFYLCBkZWx0YVk7ICAgICAgICAgICAgICAgICAgICAgLy8gZGVsdGEgZnJvbSBpbml0aWFsIHBvc2l0aW9uXHJcbiAgICB2YXIgaTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciBsb2NhbCBsb29wXHJcbiAgICB2YXIgc2Nyb2xsUG9zaXRpb247ICAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHBvc2l0aW9uIHZhcmlhYmxlIG5lZWRlZCBmb3IgYXV0b3Njcm9sbCBjYWxsXHJcblxyXG4gICAgWCA9IHBvaW50ZXIueCA9IGV2dC5jbGllbnRYO1xyXG4gICAgWSA9IHBvaW50ZXIueSA9IGV2dC5jbGllbnRZO1xyXG5cclxuICAgIGRlbHRhWCA9IE1hdGguYWJzKHRocmVzaG9sZC54IC0gWCk7ICAgICAgICAgLy8gY2FsY3VsYXRlIGRlbHRhIGZyb20gaW5pdGlhbCBwb3NpdGlvblxyXG4gICAgZGVsdGFZID0gTWF0aC5hYnModGhyZXNob2xkLnkgLSBZKTtcclxuXHJcbiAgICBpZiAoIW1vdmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIFwibW92ZWRcIiBmbGFnIGlzbid0IHNldCAodGhpcyBpcyB0aGUgZmlyc3QgbW9tZW50IHdoZW4gb2JqZWN0IGlzIG1vdmVkKVxyXG4gICAge1xyXG4gICAgICAvL3JlbWVtYmVyIHJlZmVyZW5jZSBvZiB0aGUgc291cmNlIHJvdywgY2xvbmUgc291cmNlIHJvdyBhbmQgc2V0IG9iaiBhcyByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgcm93IHNldHRpbmdzIG9mIFwiY2xvbmVkXCIgZmxhZyBzaG91bGQgZ28gYmVmb3JlIGNhbGxpbmcgcm93Q2xvbmUoKSBiZWNhdXNlIFwiY2xvbmVkXCIgaXMgbmVlZGVkIGluIHJvd0Nsb25lKCkgdG8gY3V0IG91dCBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIG5hbWUgZnJvbSA8ZGl2IGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvdyByZWRpcHMtY2xvbmVcIj4gZWxlbWVudHNcclxuICAgICAgaWYgKGNsb25lQ2xhc3MgfHwgKFJFRElQUy5kcmFnLmNsb25lLmtleVJvdyA9PT0gdHJ1ZSAmJiBzaGlmdEtleSkpXHJcbiAgICAgIHtcclxuICAgICAgICBjbG9uZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBSRURJUFMuZHJhZy5vYmpPbGQgPSBvYmpPbGQgPSBvYmo7ICAgICAgICAvLyByZW1lbWJlciByZWZlcmVuY2UgdG8gdGhlIHNvdXJjZSByb3dcclxuICAgICAgUkVESVBTLmRyYWcub2JqID0gb2JqID0gcm93Q2xvbmUob2JqKTsgICAgLy8gY2xvbmUgc291cmNlIHJvdyBhbmQgc2V0IGFzIG9ialxyXG4gICAgICBvYmouc3R5bGUuekluZGV4ID0gOTk5OyAgICAgICAgICAgICAgICAgICAvLyBzZXQgaGlnaCB6LWluZGV4IGZvciBjbG9uZWQgbWluaSB0YWJsZVxyXG5cclxuICAgICAgb2JqLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsgICAgICAgICAgICAgLy8gc2V0IHN0eWxlIHRvIGZpeGVkIHRvIGFsbG93IGRyYWdnaW5nIERJViBvYmplY3RcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgY2FsY3VsYXRlIGNlbGxzIGZvciBjYXNlIHdoZXJlIG1vdmVkIGVsZW1lbnQgY2hhbmdlZCBjZWxsIGRpbWVuc2lvbiwgcGxhY2UgMyBlbGVtZW50cyBpbiB0aGUgc2FtZSBjZWxsIGluIGV4YW1wbGUwOCBhbmQgdHJ5IHRvIG1vdmUgb25lIG91dCBvZiB0aGUgdGFibGUgY2VsbFxyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjb2x1bW5cclxuXHJcbiAgICAgIGlmIChjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQgaGFuZGxlciAocm93IGNsb25lZC9tb3ZlZClcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0Nsb25lZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd01vdmVkKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNldFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29sb3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlIGNlbGwgYW5kIHJlbWVtYmVyIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBjb2xvciwgc2V0UG9zaXRpb24oKSBtdXN0IGdvIGFmdGVyIGNhbGxpbmcgZXZlbnQubW92ZWQoKSBhbmQgZXZlbnQucm93TW92ZWQoKSBpZiB1c2VyIHdhbnRzIHRvIGNoYW5nZSBjb2xvciBvZiBzb3VyY2Ugcm93XHJcblxyXG4gICAgICBpZiAoWCA+IHNjcmVlbi53aWR0aCAtIG9iak1hcmdpblsxXSkgICAgLy8gaWYgZWxlbWVudCBpcyBmYXIgYXdheSBvbiB0aGUgcmlnaHQgc2lkZSBvZiBwYWdlLCBzZXQgcG9zc2libGUgcmlnaHQgcG9zaXRpb24gKHNjcmVlbi53aWR0aCAtIG9iamVjdCB3aWR0aCksIG9iak1hcmdpblsxXSArIG9iak1hcmdpblszXSA9IG9iamVjdCB3aWR0aFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnN0eWxlLmxlZnQgPSAoc2NyZWVuLndpZHRoIC0gKG9iak1hcmdpblsxXSArICBvYmpNYXJnaW5bM10pKSArICdweCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChZID4gc2NyZWVuLmhlaWdodCAtIG9iak1hcmdpblsyXSkgICAvLyBpZiBlbGVtZW50IGlzIGJlbG93IHBhZ2UgYm90dG9tLCBzZXQgcG9zc2libGUgbG93ZXIgcG9zaXRpb24gKHNjcmVlbi53aWR0aCAtIG9iamVjdCBoZWlnaHQpLCBvYmpNYXJnaW5bMF0gKyBvYmpNYXJnaW5bMl0gPSBvYmplY3QgaGVpZ2h0XHJcbiAgICAgIHtcclxuICAgICAgICBvYmouc3R5bGUudG9wICA9IChzY3JlZW4uaGVpZ2h0IC0gKG9iak1hcmdpblswXSArIG9iak1hcmdpblsyXSkpICsgJ3B4JztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vdmVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBtb3ZlZF9mbGFnXHJcblxyXG4gICAgLy8gc2V0IGxlZnQgYW5kIHRvcCBzdHlsZXMgZm9yIHRoZSBtb3ZlZCBlbGVtZW50IGlmIGVsZW1lbnQgaXMgaW5zaWRlIHdpbmRvdywgdGhpcyBjb25kaXRpb25zIHdpbGwgc3RvcCBlbGVtZW50IG9uIHdpbmRvdyBib3VuZHNcclxuICAgIGlmIChYID4gb2JqTWFyZ2luWzNdICYmIFggPCBzY3JlZW4ud2lkdGggLSBvYmpNYXJnaW5bMV0pXHJcbiAgICB7XHJcbiAgICAgIG9iai5zdHlsZS5sZWZ0ID0gKFggLSBvYmpNYXJnaW5bM10pICsgJ3B4JztcclxuICAgIH1cclxuICAgIGlmIChZID4gb2JqTWFyZ2luWzBdICYmIFkgPCBzY3JlZW4uaGVpZ2h0IC0gb2JqTWFyZ2luWzJdKVxyXG4gICAge1xyXG4gICAgICBvYmouc3R5bGUudG9wICA9IChZIC0gb2JqTWFyZ2luWzBdKSArICdweCc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCAodGhpcyBjb25kaXRpb24gc2hvdWxkIHNwYXJlIENQVSk6IDEpIGlmIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIERJViBpZD1cInJlZGlwcy1kcmFnXCIgMikgYW5kIGF1dG9zY3JvbGwgaXMgbm90IHdvcmtpbmcgMykgYW5kIGN1cnJlbnQgdGFibGUgY29udGFpbnMgbmVzdGVkIHRhYmxlIG9yIGN1cnNvciBpcyBvdXRzaWRlIG9mIGN1cnJlbnQgY2VsbFxyXG4gICAgaWYgKFggPCBkaXZCb3hbMV0gJiYgWCA+IGRpdkJveFszXSAmJiBZIDwgZGl2Qm94WzJdICYmIFkgPiBkaXZCb3hbMF0gJiZcclxuICAgICAgZWRnZS5mbGFnLnggPT09IDAgJiYgZWRnZS5mbGFnLnkgPT09IDAgJiZcclxuICAgICAgKGN1cnJlbnRDZWxsLmNvbnRhaW5UYWJsZSB8fCAoWCA8IGN1cnJlbnRDZWxsWzNdIHx8IFggPiBjdXJyZW50Q2VsbFsxXSB8fCBZIDwgY3VycmVudENlbGxbMF0gfHwgWSA+IGN1cnJlbnRDZWxsWzJdKSkpXHJcbiAgICB7XHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSByb3cgYW5kIHRhYmxlIGNlbGxcclxuICAgICAgY2VsbENoYW5nZWQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG5ldyBsb2NhdGlvbiBpcyBpbnNpZGUgdGFibGUgYW5kIG5ldyBsb2NhdGlvbiBpcyBkaWZmZXJlbnQgdGhlbiBvbGQgbG9jYXRpb25cclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBhdXRvU2Nyb2xsIG9wdGlvbiBpcyBlbmFibGVkIChieSBkZWZhdWx0IGl0IGlzIGJ1dCBpdCBjYW4gYmUgdHVybmVkIG9mZilcclxuICAgIGlmIChSRURJUFMuZHJhZy5zY3JvbGwuZW5hYmxlKVxyXG4gICAge1xyXG4gICAgICBlZGdlLnBhZ2UueCA9IGJvdW5kIC0gKHNjcmVlbi53aWR0aCAvIDIgID4gWCA/IFggLSBvYmpNYXJnaW5bM10gOiBzY3JlZW4ud2lkdGggLSBYIC0gb2JqTWFyZ2luWzFdKTsgICAgICAgLy8gY2FsY3VsYXRlIGhvcml6b250YWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuXHJcbiAgICAgIGlmIChlZGdlLnBhZ2UueCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZWRnZS5wYWdlLnggPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2hlbiBvYmplY3QgaXMgb25seSBoYWxmIHZpc2libGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLnBhZ2UueCA9IGJvdW5kO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZ2V0IGhvcml6b250YWwgd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICAgIC8vc2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSAwOyAgIC8vZGlzYWJsaW5nIGJlY2F1c2Ugd2Ugc2hvdWxkbid0IGhhdmUgdGhlIHVzZXIgc2Nyb2xsaW5nIGhvcml6b250YWxseSBhbmQgdGhpcyBpbXByb3ZlcyBwZXJmb3JtYW5jZSBmb3IgbGFyZ2UgdHJlZXNcclxuXHJcbiAgICAgICAgZWRnZS5wYWdlLnggKj0gWCA8IHNjcmVlbi53aWR0aCAvIDIgPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvblxyXG5cclxuICAgICAgICAvLyBpZiBwYWdlIGJvdW5kIGlzIGNyb3NzZWQgYW5kIHRoaXMgdHdvIGNhc2VzIGFyZW4ndCBtZXQ6IDEpIHNjcm9sbGJhciBpcyBvbiB0aGUgbGVmdCBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgbGVmdCAyKSBzY3JvbGxiYXIgaXMgb24gdGhlIHJpZ2h0IGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCByaWdodFxyXG4gICAgICAgIGlmICghKChlZGdlLnBhZ2UueCA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPD0gMCkgfHwgKGVkZ2UucGFnZS54ID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA+PSAoc2Nyb2xsRGF0YS53aWR0aCAtIHNjcmVlbi53aWR0aCkpKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoZWRnZS5mbGFnLngrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlIGF1dG9zY3JvbGwgZnVuY3Rpb24gKHRoaXMgc2hvdWxkIGhhcHBlbiBvbmx5IG9uY2UpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAvLyByZXNldCBvbnNjcm9sbCBldmVudFxyXG4gICAgICAgICAgICBhdXRvU2Nyb2xsWCh3aW5kb3cpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB3aW5kb3cgYXV0b3Njcm9sbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBlZGdlLnBhZ2UueCA9IDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVkZ2UucGFnZS55ID0gYm91bmQgLSAoc2NyZWVuLmhlaWdodCAvIDIgPiBZID8gWSAtIG9iak1hcmdpblswXSA6IHNjcmVlbi5oZWlnaHQgLSBZIC0gb2JqTWFyZ2luWzJdKTsgICAgICAvLyBjYWxjdWxhdGUgdmVydGljYWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuICAgICAgXHJcbiAgICAgIGlmIChlZGdlLnBhZ2UueSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGVkZ2UucGFnZS55ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgbWF4IGNyb3NzZWQgYm91bmRcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLnBhZ2UueSA9IGJvdW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCB2ZXJ0aWNhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgICAgZWRnZS5wYWdlLnkgKj0gWSA8IHNjcmVlbi5oZWlnaHQgLyAyID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvblxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghKChlZGdlLnBhZ2UueSA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPD0gMCkgfHwgKGVkZ2UucGFnZS55ID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA+PSAoc2Nyb2xsRGF0YS5oZWlnaHQgLSBzY3JlZW4uaGVpZ2h0KSkpKSAgICAvLyBpZiBwYWdlIGJvdW5kIGlzIGNyb3NzZWQgYW5kIHRoaXMgdHdvIGNhc2VzIGFyZW4ndCBtZXQ6IDEpIHNjcm9sbGJhciBpcyBvbiB0aGUgcGFnZSB0b3AgYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIHVwIDIpIHNjcm9sbGJhciBpcyBvbiB0aGUgcGFnZSBib3R0b20gYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIGRvd25cclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoZWRnZS5mbGFnLnkrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlIGF1dG9zY3JvbGwgKHRoaXMgc2hvdWxkIGhhcHBlbiBvbmx5IG9uY2UpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvbnNjcm9sbCBldmVudFxyXG4gICAgICAgICAgICBhdXRvU2Nyb2xsWSh3aW5kb3cpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB3aW5kb3cgYXV0b3Njcm9sbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgZWRnZS5wYWdlLnkgPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgc2Nyb2xsRGF0YS5jb250YWluZXIubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVzdCBpZiBkcmFnZ2VkIG9iamVjdCBpcyBpbiBzY3JvbGxhYmxlIGNvbnRhaW5lciwgdGhpcyBjb2RlIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBpZiBzY3JvbGxhYmxlIGNvbnRhaW5lciAoRElWIHdpdGggb3ZlcmZsb3cgb3RoZXIgdGhhbiAndmlzaWJsZSkgZXhpc3RzIG9uIHBhZ2VcclxuICAgICAge1xyXG4gICAgICAgIHNjYSA9IHNjcm9sbERhdGEuY29udGFpbmVyW2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzY2EuYXV0b3Njcm9sbCAmJiBYIDwgc2NhLm9mZnNldFsxXSAmJiBYID4gc2NhLm9mZnNldFszXSAmJiBZIDwgc2NhLm9mZnNldFsyXSAmJiBZID4gc2NhLm9mZnNldFswXSkgLy8gaWYgZHJhZ2dlZCBvYmplY3QgaXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyIGFuZCBzY3JvbGxhYmxlIGNvbnRhaW5lciBoYXMgZW5hYmxlZCBhdXRvc2Nyb2xsIG9wdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UuZGl2LnggPSBib3VuZCAtIChzY2EubWlkc3RYICA+IFggPyBYIC0gb2JqTWFyZ2luWzNdIC0gc2NhLm9mZnNldFszXSA6IHNjYS5vZmZzZXRbMV0gLSBYIC0gb2JqTWFyZ2luWzFdKTsgICAvLyBjYWxjdWxhdGUgaG9yaXpvbnRhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZWRnZS5kaXYueCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlLmRpdi54ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdoZW4gb2JqZWN0IGlzIG9ubHkgaGFsZiB2aXNpYmxlIChwYWdlIGlzIHNjcm9sbGVkIG9uIHRoYXQgb2JqZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZWRnZS5kaXYueCA9IGJvdW5kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlZGdlLmRpdi54ICo9IFggPCBzY2EubWlkc3RYID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb246IG5lZ2F0aXZlIC0gbGVmdCwgcG9zaXRpdmUgLSByaWdodFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZmxhZy54KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvbnNjcm9sbCBldmVudCBoYW5kbGVyIGFuZCBjYWxsIGF1dG9TY3JvbGxZIGZ1bmN0aW9uIG9ubHkgb25jZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZShzY2EuZGl2LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAgICAgICAgIGF1dG9TY3JvbGxYKHNjYS5kaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlZGdlLmRpdi54ID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgZWRnZS5kaXYueSA9IGJvdW5kIC0gKHNjYS5taWRzdFkgID4gWSA/IFkgLSBvYmpNYXJnaW5bMF0gLSBzY2Eub2Zmc2V0WzBdIDogc2NhLm9mZnNldFsyXSAtIFkgLSBvYmpNYXJnaW5bMl0pOyAgIC8vIGNhbGN1bGF0ZSB2ZXJ0aWNhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZWRnZS5kaXYueSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlLmRpdi55ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdoZW4gb2JqZWN0IGlzIG9ubHkgaGFsZiB2aXNpYmxlIChwYWdlIGlzIHNjcm9sbGVkIG9uIHRoYXQgb2JqZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZWRnZS5kaXYueSA9IGJvdW5kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlZGdlLmRpdi55ICo9IFkgPCBzY2EubWlkc3RZID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb246IG5lZ2F0aXZlIC0gdXAsIHBvc2l0aXZlIC0gZG93blxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZmxhZy55KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvbnNjcm9sbCBldmVudCBoYW5kbGVyIGFuZCBjYWxsIGF1dG9TY3JvbGxZIGZ1bmN0aW9uIG9ubHkgb25jZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZShzY2EuZGl2LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAgICAgICAgIGF1dG9TY3JvbGxZKHNjYS5kaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlZGdlLmRpdi55ID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJyZWFrIHRoZSBsb29wIChjaGVja2luZyBmb3Igb3RoZXIgc2Nyb2xsYWJsZSBjb250YWluZXJzIGlzIG5vdCBuZWVkZWQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSAoSSBtZWFuIGRyYWdnZWQgb2JqZWN0IGlzbid0IGluc2lkZSBhbnkgb2Ygc2Nyb2xsYWJsZSBjb250YWluZXIpIHJlc2V0IGNyb3NzZWQgZWRnZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UuZGl2LnggPSBlZGdlLmRpdi55ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gc3RvcCBhbGwgcHJvcGFnYXRpb24gb2YgdGhlIGV2ZW50IGluIHRoZSBidWJibGluZyBwaGFzZS4gIChzYXZlIHN5c3RlbSByZXNvdXJjZXMgYnkgdHVybmluZyBvZmYgZXZlbnQgYnViYmxpbmcgLyBwcm9wYWdhdGlvbilcclxuICAgIGV2dC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgaWYgKGV2dC5zdG9wUHJvcGFnYXRpb24pIFxyXG4gICAge1xyXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gVGhpcyBtZXRob2QgaXMgY2FsbGVkIChmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSwgYXV0b1Njcm9sbFgsIGF1dG9TY3JvbGxZKSBpbiBjYXNlIG9mIGNoYW5nZSBvZiBjdXJyZW50IHRhYmxlIGNlbGwuXHJcbiAgLy8gV2hlbiBjaGFuZ2UgaGFwcGVucywgdGhlbiByZXR1cm4gYmFja2dyb3VuZCBjb2xvciB0byBvbGQgcG9zaXRpb24sIGhpZ2hsaWdodCBuZXcgcG9zaXRpb24sIGNhbGN1bGF0ZSBjZWxsIGJvdW5kYXJpZXMgYW5kIGNhbGwgZXZlbnQuY2hhbmdlZC5cclxuICBjZWxsQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIGlmICgocm93ICE9PSByb3dfb2xkIHx8IGNlbGwgIT09IGNlbGxfb2xkKSkgXHJcbiAgICB7XHJcbiAgICAgIGlmIChyb3dfb2xkICE9PSBudWxsICYmIGNlbGxfb2xkICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjZWxsIGJhY2tncm91bmQgY29sb3IgdG8gdGhlIHByZXZpb3VzIGNlbGxcclxuICAgICAge1xyXG4gICAgICAgIHNldFRkU3R5bGUocm93X29sZCwgYmdTdHlsZU9sZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciBmb3IgcHJldmlvdXMgdGFibGUgcm93XHJcbiAgICAgICAgUkVESVBTLmRyYWcudGQucHJldmlvdXMgPSB0ZC5wcmV2aW91cyA9IHRhYmxlLnJvd3Nbcm93X29sZF0uY2VsbHNbY2VsbF9vbGRdOyAgICAgIC8vIGRlZmluZSBwcmV2aW91cyB0YWJsZSBjZWxsXHJcbiAgICAgICAgUkVESVBTLmRyYWcudGQuY3VycmVudCA9IHRkLmN1cnJlbnQgPSB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF07ICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjdXJyZW50IHRhYmxlIGNlbGxcclxuXHJcbiAgICAgICAgaWYgKHJvdyAhPT0gcm93X29sZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciB0YWJsZSBvciByb3cgc2hvdWxkIGNoYW5nZSAoY2hhbmdpbmcgY2VsbCBpbiB0aGUgc2FtZSByb3cgd2lsbCBiZSBpZ25vcmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0NoYW5nZWQodGQuY3VycmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRQb3NpdGlvbigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIEluIGluaXRpYWxpemF0aW9uIHBoYXNlLCB0aGlzIG1ldGhvZCBpcyBhdHRhY2hlZCBhcyBvbnJlc2l6ZSBldmVudCBoYW5kbGVyIGZvciB3aW5kb3cuICBJdCBhbHNvIGNhbGN1bGF0ZXMgd2luZG93IHdpZHRoIGFuZCB3aW5kb3cgaGVpZ2h0LiBSZXN1bHQgaXMgc2F2ZWQgaW4gdmFyaWFibGVzIHNjcmVlbi53aWR0aCBhbmQgc2NyZWVuLmhlaWdodCB2aXNpYmxlIGluc2lkZSBSRURJUFMuZHJhZyBwcml2YXRlIHNjb3BlLlxyXG4gIGhhbmRsZXJPblJlc2l6ZSA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHNjcmVlbi53aWR0aCAgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIHNjcmVlbi5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICBcclxuICAgIHNjcm9sbERhdGEud2lkdGggID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoOyAgICAgLy8gc2V0IHNjcm9sbCBzaXplIChvbnJlc2l6ZSwgb25sb2FkIGFuZCBvbm1vdXNldXAgZXZlbnQpXHJcbiAgICBzY3JvbGxEYXRhLmhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcbiAgICBcclxuICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGNvbHVtcyBhbmQgcm93cyBvZmZzZXQgKGNlbGxzIGRpbWVuc2lvbnMpXHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIHNldHMgY3VycmVudCByb3cgYW5kIGNlbGwuICBDdXJyZW50IGNlbGwgcG9zaXRpb24gaXMgYmFzZWQgb24gcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlciBhbmQgY2FsY3VsYXRlZCBncmlkIG9mIHRhYmxlcyBpbnNpZGUgZHJhZyBjb250YWluZXIuXHJcbiAgLy8gUm93cyB3aXRoIGRpc3BsYXk9J25vbmUnIGFyZSBub3QgY29udGFpbmVkIGluIHJvd19vZmZzZXQgYXJyYXkgc28gcm93IGJvdW5kcyBjYWxjdWxhdGlvbiBzaG91bGQgdGFrZSBjYXJlIGFib3V0IHNwYXJzZSBhcnJheXMgKHNpbmNlIHZlcnNpb24gNC4zLjYpLlxyXG4gIHNldFRhYmxlUm93Q29sdW1uID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICB2YXIgcHJldmlvdXM7ICAgICAgIC8vIHNldCBwcmV2aW91cyBwb3NpdGlvbiAoY3VycmVudCBjZWxsIHdpbGwgbm90IGJlIGhpZ2hsaWdodGVkKVxyXG4gICAgdmFyIHJvd19vZmZzZXQ7ICAgICAvLyByb3cgb2Zmc2V0cyBmb3IgdGhlIHNlbGVjdGVkIHRhYmxlIChyb3cgYm94IGJvdW5kcylcclxuICAgIHZhciByb3dfZm91bmQ7ICAgICAgLy8gcmVtZW1iZXIgZm91bmQgcm93XHJcbiAgICB2YXIgdG9zID0gW107ICAgICAgIC8vIHRhYmxlIG9mZnNldFxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBpOyAgICAgICAgICAgICAgLy8gdXNlZCBpbiBsb2NhbCBsb29wXHJcblxyXG4gICAgcHJldmlvdXMgPSBmdW5jdGlvbiAoKSAgICAvLyBzZXQgcHJldmlvdXMgcG9zaXRpb24gKGN1cnJlbnQgY2VsbCB3aWxsIG5vdCBiZSBoaWdobGlnaHRlZClcclxuICAgIHtcclxuICAgICAgaWYgKHJvd19vbGQgIT09IG51bGwgJiYgY2VsbF9vbGQgIT09IG51bGwpXHJcbiAgICAgIHtcclxuICAgICAgICByb3cgPSByb3dfb2xkO1xyXG4gICAgICAgIGNlbGwgPSBjZWxsX29sZDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBYID0gcG9pbnRlci54OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgWSA9IHBvaW50ZXIueTtcclxuXHJcbiAgICB0b3NbMF0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzBdOyAvLyB0b3BcclxuICAgIHRvc1sxXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMV07IC8vIHJpZ2h0XHJcbiAgICB0b3NbMl0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdOyAvLyBib3R0b21cclxuICAgIHRvc1szXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbM107IC8vIGxlZnRcclxuXHJcbiAgICAvLyBpZiB0YWJsZSBiZWxvbmdzIHRvIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lciB0aGVuIHNldCBzY3JvbGxhYmxlIGNvbnRhaW5lciBvZmZzZXQgaWYgbmVlZGVkIGluIGNhc2Ugd2hlbiBzb21lIHBhcnRzIG9mIHRhYmxlIGFyZSBoaWRkZW4gKGZvciBleGFtcGxlIHdpdGggXCJvdmVyZmxvdzogYXV0b1wiKVxyXG4gICAgaWYgKHRhYmxlLnNjYSAhPT0gdW5kZWZpbmVkKVxyXG4gICAge1xyXG4gICAgICB0b3NbMF0gPSB0b3NbMF0gPiB0YWJsZS5zY2Eub2Zmc2V0WzBdID8gdG9zWzBdIDogdGFibGUuc2NhLm9mZnNldFswXTsgLy8gdG9wXHJcbiAgICAgIHRvc1sxXSA9IHRvc1sxXSA8IHRhYmxlLnNjYS5vZmZzZXRbMV0gPyB0b3NbMV0gOiB0YWJsZS5zY2Eub2Zmc2V0WzFdOyAvLyByaWdodFxyXG4gICAgICB0b3NbMl0gPSB0b3NbMl0gPCB0YWJsZS5zY2Eub2Zmc2V0WzJdID8gdG9zWzJdIDogdGFibGUuc2NhLm9mZnNldFsyXTsgLy8gYm90dG9tXHJcbiAgICAgIHRvc1szXSA9IHRvc1szXSA+IHRhYmxlLnNjYS5vZmZzZXRbM10gPyB0b3NbM10gOiB0YWJsZS5zY2Eub2Zmc2V0WzNdOyAvLyBsZWZ0XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRvc1szXSA8IFggJiYgWCA8IHRvc1sxXSAmJiB0b3NbMF0gPCBZICYmIFkgPCB0b3NbMl0pICAgICAgICAgICAgICAgICAvLyBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSB0YWJsZSAob3Igc2Nyb2xsYWJsZSBjb250YWluZXIpXHJcbiAgICB7XHJcbiAgICAgIHJvd19vZmZzZXQgPSB0YWJsZS5yZWRpcHMucm93X29mZnNldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSByb3cgb2Zmc2V0cyBmb3IgdGhlIHNlbGVjdGVkIHRhYmxlIChyb3cgYm94IGJvdW5kcylcclxuXHJcbiAgICAgIGZvciAocm93ID0gMDsgcm93IDwgcm93X29mZnNldC5sZW5ndGggLSAxOyByb3crKykgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGN1cnJlbnQgcm93IChsb29wIHNraXBzIGhpZGRlbiByb3dzKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHJvd19vZmZzZXRbcm93XSA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBkb2Vzbid0IGV4aXN0IChpbiBjYXNlIG9mIGhpZGRlbiByb3cpIC0gc2tpcCBpdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0b3AgYW5kIGJvdHRvbSBjZWxsIGJvdW5kc1xyXG5cclxuICAgICAgICBpZiAocm93X29mZnNldFtyb3cgKyAxXSAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJvdHRvbSBjZWxsIGJvdW5kIChpZiBpcyBwb3NzaWJsZSkgLSBoaWRkZW4gcm93IGRvZXNuJ3QgZXhpc3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IHJvd19vZmZzZXRbcm93ICsgMV1bMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoaWRkZW4gcm93IChsaWtlIHN0eWxlLmRpc3BsYXkgPT09ICdub25lJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmb3IgKGkgPSByb3cgKyAyOyBpIDwgcm93X29mZnNldC5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgbmV4dCB2aXNpYmxlIHJvd1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocm93X29mZnNldFtpXSAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2aXNpYmxlIHJvdyBmb3VuZFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY3VycmVudENlbGxbMl0gPSByb3dfb2Zmc2V0W2ldWzBdO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoWSA8PSBjdXJyZW50Q2VsbFsyXSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9wIGJvdW5kIG9mIHRoZSBuZXh0IHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcm93X2ZvdW5kID0gcm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgZm91bmQgcm93XHJcblxyXG4gICAgICBpZiAocm93ID09PSByb3dfb2Zmc2V0Lmxlbmd0aCAtIDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBsb29wIGV4Y2VlZHMsIHRoZW4gc2V0IGJvdW5kcyBmb3IgdGhlIGxhc3Qgcm93IChvZmZzZXQgZm9yIHRoZSBsYXN0IHJvdyBkb2Vzbid0IHdvcmsgaW4gSUU4LCBzbyB1c2UgdGFibGUgYm91bmRzKVxyXG4gICAgICB7XHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07XHJcbiAgICAgICAgY3VycmVudENlbGxbMl0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjZWxsID0gMDtcclxuXHJcbiAgICAgIGlmIChyb3cgPCAwIHx8IGNlbGwgPCAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjZWxsIDwgMCBvciByb3cgPCAwIHRoZW4gdXNlIGxhc3QgcG9zc2libGUgbG9jYXRpb25cclxuICAgICAge1xyXG4gICAgICAgIHByZXZpb3VzKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAocm93ICE9PSByb3dfZm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgY2VsbCBmb3VuZCBidXQgaWYgY3VycmVudCByb3cgZGlmZmVyIGZyb20gcHJldmlvdXNseSBmb3VuZCByb3cgKHRoYW5rcyB0b28gd2hpbGUgbG9vcCB3aXRoIHJvdy0tKSB0aGVuIHRlc3QgaWYgWSBpcyBpbnNpZGUgY3VycmVudCBjZWxsLCAodGhpcyBzaG91bGQgcHJldmVudCBjYXNlIHdoZXJlIFREIGJvcmRlciA+IDFweCBhbmQgdXBwZXIgY29sc3BhbmVkIHJvdyBsaWtlIGluIGV4YW1wbGUxNSkgbG9naWMgd2lsbCBlbmQgaW4gdXBwZXIgY29sc3BhbmVkIHJvdyB3aGlsZSBjdXJyZW50IHJvdyB3aWxsIG5vdCBtb3ZlIC0gYW5kIHRoYXQgd2FzIHdyb25nXHJcbiAgICAgIHtcclxuXHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWNhbGN1bGF0ZSB0b3AgYW5kIGJvdHRvbSByb3cgb2Zmc2V0IChhZ2FpbilcclxuICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IGN1cnJlbnRDZWxsWzBdICsgdGFibGUucm93c1tyb3ddLmNlbGxzW2NlbGxdLm9mZnNldEhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKFkgPCBjdXJyZW50Q2VsbFswXSB8fCBZID4gY3VycmVudENlbGxbMl0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBZIGlzIG91dHNpZGUgb2YgdGhlIGN1cnJlbnQgcm93LCByZXR1cm4gcHJldmlvdXMgbG9jYXRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcmV2aW91cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCBzZXRzIGJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlIGNlbGwgYW5kIHJlbWVtYmVycyBwcmV2aW91cyBwb3NpdGlvbiBhbmQgYmFja2dyb3VuZCBjb2xvci4gIEl0IGlzIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSBhbmQgY2VsbENoYW5nZWQuXHJcbiAgc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKVxyXG4gIHtcclxuICAgIGlmIChyb3cgIT09IG51bGwgJiYgY2VsbCAhPT0gbnVsbCkgICAgICAvLyBpbiBjYXNlIGlmIG9yZGluYXJ5IGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSAnZGVueScgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBiZ1N0eWxlT2xkID0gZ2V0VGRTdHlsZShyb3cpOyAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3IgYmVmb3JlIHNldHRpbmcgdGhlIG5ldyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgIHNldFRkU3R5bGUocm93KTsgICAgICAgICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0IGN1cnJlbnQgVEQgLyBUUiAoY29sb3JzIGFuZCBzdHlsZXMgYXJlIHJlYWQgZnJvbSBwdWJsaWMgcHJvcGVydHkgXCJob3ZlclwiXHJcbiAgICAgIHJvd19vbGQgPSByb3c7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgY3VycmVudCBwb3NpdGlvbiAoZm9yIHJvdyBhbmQgY2VsbClcclxuICAgICAgY2VsbF9vbGQgPSBjZWxsO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBzZXRzIHRhYmxlIGNlbGwocykgYmFja2dyb3VuZCBzdHlsZXMgKGJhY2tncm91bmQgY29sb3JzIGFuZCBib3JkZXIgc3R5bGVzKS5cclxuICAgKiBJZiB0ZFN0eWxlIGlzIHVuZGVmaW5lZCB0aGVuIGN1cnJlbnQgdGQvdHIgd2lsbCBiZSBoaWdobGlnaHRlZCBmcm9tIHB1YmxpYyBwcm9wZXJ0eSBob3Zlci5jb2xvcl90ZCwgaG92ZXIuY29sb3JfdHIgLi4uXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSByaSBSb3cgaW5kZXguXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHQgT2JqZWN0IGNvbnRhaW5zIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgKFwidFwiIGlzIFREIHN0eWxlIG9iamVjdCBpcyBwcmVwYXJlZCBpbiBnZXRUZFN0eWxlIG1ldGhvZCkuXHJcbiAgICovXHJcbiAgc2V0VGRTdHlsZSA9IGZ1bmN0aW9uIChyaSwgdCkgXHJcbiAge1xyXG4gICAgdmFyIHRyLCBzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IGFuZCB0ZC5zdHlsZVxyXG5cclxuICAgIHRyID0gdGFibGUucm93c1tyaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHRhYmxlIHJvd1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbG9ycyB0byB0YWJsZSBjZWxscyAocmVzcGVjdGl2ZWx5KSBvciBmaXJzdCBjb2xvciB0byBhbGwgY2VsbHMgKGluIGNhc2Ugb2Ygc2V0dGluZ3MgaG92ZXIgdG8gdGhlIHJvdylcclxuICAgIHtcclxuICAgICAgcyA9IHRyLmNlbGxzW2ldLnN0eWxlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIGN1cnJlbnQgVEQgc3R5bGVcclxuICAgICAgcy5iYWNrZ3JvdW5kQ29sb3IgPSAodCA9PT0gdW5kZWZpbmVkKSA/IFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVHIgOiB0LmNvbG9yW2ldLnRvU3RyaW5nKCk7ICAvLyBUUiBiYWNrZ3JvdW5kIGNvbG9yIC0gdGRTdHlsZSBpcyB1bmRlZmluZWQgdGhlbiBoaWdobGlnaHQgVEQgb3RoZXJ3aXNlIHJldHVybiBwcmV2aW91cyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgIFxyXG4gICAgICBpZiAoUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHIgIT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRSIGJvcmRlciAtIGlmIGhvdmVyLmJvcmRlclRkIGlzIHNldCB0aGVuIHRha2UgY2FyZSBvZiBib3JkZXIgc3R5bGVcclxuICAgICAge1xyXG4gICAgICAgIGlmICh0ID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBib3JkZXIgKGhpZ2hsaWdodCkgLSBzb3VyY2Ugcm93IHdpbGwgbm90IGhhdmUgYW55IGJvcmRlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChyb3cgPCByb3dfc291cmNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaXMgbW92ZWQgYWJvdmUgc291cmNlIHJvdyBpbiBjdXJyZW50IHRhYmxlXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHMuYm9yZGVyVG9wID0gUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGlzIG1vdmVkIGJlbG93IHNvdXJjZSByb3cgaW4gY3VycmVudCB0YWJsZVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBzLmJvcmRlckJvdHRvbSA9IFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gcHJldmlvdXMgc3RhdGUgYm9yZGVyVG9wIGFuZCBib3JkZXJCb3R0b20gKGV4aXQgZnJvbSBURClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBzLmJvcmRlclRvcFdpZHRoID0gdC50b3BbaV1bMF07XHJcbiAgICAgICAgICBzLmJvcmRlclRvcFN0eWxlID0gdC50b3BbaV1bMV07XHJcbiAgICAgICAgICBzLmJvcmRlclRvcENvbG9yID0gdC50b3BbaV1bMl07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbVdpZHRoID0gdC5ib3R0b21baV1bMF07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbVN0eWxlID0gdC5ib3R0b21baV1bMV07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbUNvbG9yID0gdC5ib3R0b21baV1bMl07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8vIE1ldGhvZCByZXR1cm5zIGJhY2tncm91bmQgYW5kIGJvcmRlciBzdHlsZXMgYXMgb2JqZWN0IGZvciB0aGUgaW5wdXQgcGFyYW1ldGVyIHJvdyBpbmRleCAocmkpLiAgQHJldHVybiB7T2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIChmb3IgdGhlIHJvdykuXHJcbiAgZ2V0VGRTdHlsZSA9IGZ1bmN0aW9uIChyaSkgXHJcbiAge1xyXG4gICAgdmFyIHRyLCBjOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IGFuZCB0ZCByZWZlcmVuY2UgICBcclxuICAgIHZhciB0ID0ge2NvbG9yOiBbXSwgdG9wOiBbXSwgcmlnaHQ6IFtdLCBib3R0b206IFtdLCBsZWZ0OiBbXX07ICAgICAgICAvLyBkZWZpbmUgVEQgc3R5bGUgb2JqZWN0IHdpdGggYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlczogdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0XHJcbiAgICAgIFxyXG4gICAgdmFyIGJvcmRlciA9IGZ1bmN0aW9uIChjLCBuYW1lKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByaXZhdGUgbWV0aG9kIGdldHMgYm9yZGVyIHN0eWxlczogdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0XHJcbiAgICB7XHJcbiAgICAgIHZhciB3aWR0aCA9ICdib3JkZXInICsgbmFtZSArICdXaWR0aCcsIHN0eWxlID0gJ2JvcmRlcicgKyBuYW1lICsgJ1N0eWxlJywgY29sb3IgPSAnYm9yZGVyJyArIG5hbWUgKyAnQ29sb3InO1xyXG4gICAgICByZXR1cm4gW2dldFN0eWxlKGMsIHdpZHRoKSwgZ2V0U3R5bGUoYywgc3R5bGUpLCBnZXRTdHlsZShjLCBjb2xvcildO1xyXG4gICAgfTtcclxuXHJcbiAgICB0ciA9IHRhYmxlLnJvd3NbcmldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCB0YWJsZSByb3dcclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ci5jZWxscy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHN0eWxlcyBmb3IgZWFjaCB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIGMgPSB0ci5jZWxsc1tpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IFREIHJlZmVyZW5jZVxyXG4gICAgICB0LmNvbG9yW2ldID0gYy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgXHJcbiAgICAgIGlmIChSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUciAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgdG9wIGFuZCBib3R0b20gVEQgYm9yZGVyIHN0eWxlcyBpZiBob3Zlci5ib3JkZXJUciBwcm9wZXJ0eSBpcyBzZXRcclxuICAgICAge1xyXG4gICAgICAgIHQudG9wW2ldID0gYm9yZGVyKGMsICdUb3AnKTtcclxuICAgICAgICB0LmJvdHRvbVtpXSA9IGJvcmRlcihjLCAnQm90dG9tJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgcmV0dXJucyBhcnJheSBvZiBlbGVtZW50IGJvdW5kcyAob2Zmc2V0KSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgKG5lZWRlZCBmb3IgdGFibGUgZ3JpZCBjYWxjdWxhdGlvbikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gYm94IEhUTUxFbGVtZW50IGZvciBib3ggbWV0cmljcy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3Bvc2l0aW9uXSBIVE1MRWxlbWVudCBcInBvc2l0aW9uXCIgc3R5bGUuIEVsZW1lbnRzIHdpdGggc3R5bGUgXCJmaXhlZFwiIHdpbGwgbm90IGhhdmUgaW5jbHVkZWQgcGFnZSBzY3JvbGwgb2Zmc2V0LlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2JveF9zY3JvbGxdIElmIHNldCB0byBcImZhbHNlXCIgdGhlbiBlbGVtZW50IHNjcm9sbCBvZmZzZXQgd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gY2FsY3VsYXRpb24gKGRlZmF1bHQgaXMgXCJ0cnVlXCIpLlxyXG4gICAqIEByZXR1cm4ge0FycmF5fSBCb3ggb2Zmc2V0IGFycmF5OiBbIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCBdXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBjYWxjdWxhdGUgYm94IG9mZnNldCBmb3IgdGhlIGRpdiBpZD1cInJlZGlwcy1kcmFnXCJcclxuICAgKiBkaXZib3ggPSBib3hPZmZzZXQoZHJhZ0NvbnRhaW5lcik7XHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBpbmNsdWRlIHNjcm9sbCBwb3NpdGlvbiBpbiBvZmZzZXRcclxuICAgKiBvZmZzZXQgPSBib3hPZmZzZXQocm93T2JqLCAnZml4ZWQnKTtcclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGdldCBESVYgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIGVsZW1lbnQgc2Nyb2xsIG9mZnNldFxyXG4gICAqIGNiID0gYm94T2Zmc2V0KGRpdiwgcG9zaXRpb24sIGZhbHNlKTtcclxuICAgKi9cclxuICBib3hPZmZzZXQgPSBmdW5jdGlvbiAoYm94LCBwb3NpdGlvbiwgYm94X3Njcm9sbClcclxuICB7XHJcbiAgICB2YXIgb0xlZnQgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgbGVmdCAodGFrZSBjYXJlIG9mIGhvcml6b250YWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgdmFyIG9Ub3AgID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IHRvcCAodGFrZSBjYXJlIG9kIHZlcnRpY2FsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHZhciBib3hPbGQgPSBib3g7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgYm94IG9iamVjdFxyXG5cclxuICAgIGlmIChwb3NpdGlvbiAhPT0gJ2ZpeGVkJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGFibGVfcG9zaXRpb24gaXMgdW5kZWZpbmVkLCAnJyBvciAncGFnZV9zY3JvbGwnIHRoZW4gaW5jbHVkZSBwYWdlIHNjcm9sbCBvZmZzZXQsIHdpbmRvd1Njcm9sbFBvc2l0aW9uIGlzIHNldCBpbiBjYWxjdWxhdGVDZWxscygpLCBjYWxjdWxhdGVDZWxscygpIGlzIGNhbGxlZCBvbiB3aW5kb3cgc2Nyb2xsIGV2ZW50XHJcbiAgICB7XHJcbiAgICAgIG9MZWZ0ID0gMCAtIHdpbmRvd1Njcm9sbFBvc2l0aW9uWzBdOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgbGVmdCAodGFrZSBjYXJlIG9mIGhvcml6b250YWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgICBvVG9wICA9IDAgLSB3aW5kb3dTY3JvbGxQb3NpdGlvblsxXTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IHRvcCAodGFrZSBjYXJlIG9kIHZlcnRpY2FsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYm94X3Njcm9sbCA9PT0gdW5kZWZpbmVkIHx8IGJveF9zY3JvbGwgPT09IHRydWUpICAgICAgICAgIC8vIGNsaW1iIHVwIHRocm91Z2ggRE9NIGhpZXJhcmNoeSAoZ2V0U2Nyb2xsUG9zaXRpb24oKSB0YWtlcyBjYXJlIGFib3V0IHBhZ2Ugc2Nyb2xsIHBvc2l0aW9ucylcclxuICAgIHtcclxuICAgICAgZG9cclxuICAgICAge1xyXG4gICAgICAgIG9MZWZ0ICs9IGJveC5vZmZzZXRMZWZ0IC0gYm94LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgb1RvcCArPSBib3gub2Zmc2V0VG9wIC0gYm94LnNjcm9sbFRvcDtcclxuICAgICAgICBib3ggPSBib3gub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcbiAgICAgIHdoaWxlIChib3ggJiYgYm94Lm5vZGVOYW1lICE9PSAnQk9EWScpO1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGltYiB1cCB0byB0aGUgQk9EWSBlbGVtZW50IGJ1dCB3aXRob3V0IHNjcm9sbCBwb3NpdGlvbnNcclxuICAgIHtcclxuICAgICAgZG9cclxuICAgICAge1xyXG4gICAgICAgIG9MZWZ0ICs9IGJveC5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIG9Ub3AgKz0gYm94Lm9mZnNldFRvcDtcclxuICAgICAgICBib3ggPSBib3gub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcbiAgICAgIHdoaWxlIChib3ggJiYgYm94Lm5vZGVOYW1lICE9PSAnQk9EWScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICAgICAgICB0b3AgICAgICAgICAgICAgICAgIHJpZ2h0LCAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSAgICAgICAgICAgbGVmdFxyXG4gICAgcmV0dXJuIFsgb1RvcCwgb0xlZnQgKyBib3hPbGQub2Zmc2V0V2lkdGgsIG9Ub3AgKyBib3hPbGQub2Zmc2V0SGVpZ2h0LCBvTGVmdCBdO1xyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCBpcyBjYWxsZWQgaW4gZXZlcnkgcG9zc2libGUgY2FzZSB3aGVuIHBvc2l0aW9uIG9yIHNpemUgb2YgdGFibGUgZ3JpZCBjb3VsZCBjaGFuZ2UgbGlrZTogcGFnZSBzY3JvbGxpbmcsIGVsZW1lbnQgZHJvcHBlZCB0byB0aGUgdGFibGUgY2VsbCwgZWxlbWVudCBzdGFydCBkcmFnZ2luZyBhbmQgc28gb24uXHJcbiAgLy8gSXQgY2FsY3VsYXRlcyB0YWJsZSByb3cgb2Zmc2V0cyAodGFibGUgZ3JpZCkgYW5kIHNhdmVzIHRvIHRoZSBcInRhYmxlc1wiIGFycmF5LlxyXG4gIC8vIFRhYmxlIHJvd3Mgd2l0aCBzdHlsZSBkaXNwbGF5PSdub25lJyBhcmUgc2tpcHBlZC5cclxuICBjYWxjdWxhdGVDZWxscyA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHZhciByb3dfb2Zmc2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IGJveFxyXG4gICAgdmFyIHBvc2l0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50ICh0YWJsZSBvciB0YWJsZSBjb250YWluZXIpIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIFwicGFnZSBzY3JvbGxcIiBvZmZzZXQgc2hvdWxkIG5vdCBiZSBhZGRlZFxyXG4gICAgdmFyIGNiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBib3ggb2Zmc2V0IGZvciBjb250YWluZXIgYm94IChjYilcclxuXHJcbiAgICB3aW5kb3dTY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZUNlbGxzKCkgaXMgY2FsbGVkIG9uIHdpbmRvdyBzY3JvbGwgZXZlbnQgc28gaGVyZSBpcyBwZXJmZWN0IHBsYWNlIHRvIHJlZnJlc2ggd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgcm93X29mZnNldCA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIHJvd19vZmZzZXQgYXJyYXlcclxuICAgIFxyXG4gICAgcG9zaXRpb24gPSBnZXRTdHlsZSh0YWJsZSwgJ3Bvc2l0aW9uJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGFibGUgc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgXCJwYWdlIHNjcm9sbFwiIG9mZnNldCBmcm9tIGNhbGN1bGF0aW9uIGlmIG5lZWRlZClcclxuICAgIFxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZSBkb2Vzbid0IGhhdmUgc3R5bGUgcG9zaXRpb246Zml4ZWQgdGhlbiB0YWJsZSBjb250YWluZXIgc2hvdWxkIGJlIHRlc3RlZFxyXG4gICAge1xyXG4gICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLnBhcmVudE5vZGUsICdwb3NpdGlvbicpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gdGFibGUucm93cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgICAgICAgICAgICAgICAgICAgIC8vIGJhY2t3YXJkIGxvb3AgaGFzIGJldHRlciBwZXJmb21hbmNlXHJcbiAgICB7XHJcbiAgICAgIGlmICh0YWJsZS5yb3dzW2ldLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJykgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCByb3dzIHRvIHRoZSBvZmZzZXQgYXJyYXkgaWYgcm93IGlzIG5vdCBoaWRkZW5cclxuICAgICAge1xyXG4gICAgICAgIHJvd19vZmZzZXRbaV0gPSBib3hPZmZzZXQodGFibGUucm93c1tpXSwgcG9zaXRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRhYmxlLnJlZGlwcy5vZmZzZXQgPSBib3hPZmZzZXQodGFibGUsIHBvc2l0aW9uKTsgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSB0YWJsZSBpbmZvcm1hdGlvbnMgKHRhYmxlIG9mZnNldCBhbmQgcm93IG9mZnNldHMpXHJcbiAgICB0YWJsZS5yZWRpcHMucm93X29mZnNldCA9IHJvd19vZmZzZXQ7XHJcblxyXG4gICAgZGl2Qm94ID0gYm94T2Zmc2V0KGRyYWdDb250YWluZXIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgYm94IG9mZnNldCBmb3IgdGhlIGRpdiBpZD1yZWRpcHMtZHJhZ1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjcm9sbERhdGEuY29udGFpbmVyLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXMgaWYgbmVlZGVkXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUoc2Nyb2xsRGF0YS5jb250YWluZXJbaV0uZGl2LCAncG9zaXRpb24nKTsgICAgIC8vIHNldCBjb250YWluZXIgYm94IHN0eWxlIHBvc2l0aW9uICh0byBleGNsdWRlIHBhZ2Ugc2Nyb2xsIG9mZnNldCBmcm9tIGNhbGN1bGF0aW9uIGlmIG5lZWRlZClcclxuICAgICAgY2IgPSBib3hPZmZzZXQoc2Nyb2xsRGF0YS5jb250YWluZXJbaV0uZGl2LCBwb3NpdGlvbiwgZmFsc2UpOyAgICAgLy8gZ2V0IERJViBjb250YWluZXIgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIHNjcm9sbCBwb3NpdGlvbiBvZiB0aGUgY29udGVudFxyXG4gICAgICBcclxuICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbaV0ub2Zmc2V0ID0gY2I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhc1xyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5taWRzdFggPSAoY2JbMV0gKyBjYlszXSkgLyAyO1xyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5taWRzdFkgPSAoY2JbMF0gKyBjYlsyXSkgLyAyO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCByZXR1cm5zIGN1cnJlbnQgcGFnZSBzY3JvbGwgdmFsdWVzIGFzIGFycmF5IChYIGFuZCBZIGF4aXMpLlxyXG4gIGdldFNjcm9sbFBvc2l0aW9uID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgdmFyIHNjcm9sbFkgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgIC8vdmFyIHNjcm9sbFggPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICB2YXIgc2Nyb2xsWCA9IDA7XHJcblxyXG4gICAgcmV0dXJuIFsgc2Nyb2xsWCwgc2Nyb2xsWSBdO1xyXG4gIH07XHJcblxyXG4gIC8vIEhvcml6b250YWwgYXV0byBzY3JvbGwgbWV0aG9kLiAgQHBhcmFtIHtIVE1MRWxlbWVudH0gc28gV2luZG93IG9yIERJViBlbGVtZW50IChzbyAtIHNjcm9sbCBvYmplY3QpLlxyXG4gIGF1dG9TY3JvbGxYID0gZnVuY3Rpb24gKHNvKSBcclxuICB7XHJcbiAgICB2YXIgcG9zLCAgICAgIC8vIGxlZnQgc3R5bGUgcG9zaXRpb25cclxuICAgICAgb2xkLCAgICAgIC8vIG9sZCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChuZWVkZWQgZm9yIHdpbmRvdyBzY3JvbGxpbmcpXHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uLCAvLyBkZWZpbmUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgbWF4c3AsICAgICAgLy8gbWF4aW11bSBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgZWRnZUNyb3NzZWQsICAvLyBjcm9zc2VkIGVkZ2UgZm9yIHdpbmRvdyBhbmQgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgWCA9IHBvaW50ZXIueCwgIC8vIGRlZmluZSBwb2ludGVyIFggcG9zaXRpb25cclxuICAgICAgWSA9IHBvaW50ZXIueTsgIC8vIGRlZmluZSBwb2ludGVyIFkgcG9zaXRpb25cclxuICAgIC8vIGlmIG1vdXNldXAgdGhlbiBzdG9wIGhhbmRsaW5nIFwiY3VycmVudCBjZWxsXCJcclxuICAgIGlmIChlZGdlLmZsYWcueCA+IDApIHtcclxuICAgICAgLy8gY2FsY3VsYXRlIGNlbGwgKGF1dG9zY3JvbGwgaXMgd29ya2luZylcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTtcclxuICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUgcm93IGFuZCB0YWJsZSBjZWxsXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7XHJcbiAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgaWYgbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgRElWIGlkPVwicmVkaXBzLWRyYWdcIlxyXG4gICAgICBpZiAoWCA8IGRpdkJveFsxXSAmJiBYID4gZGl2Qm94WzNdICYmIFkgPCBkaXZCb3hbMl0gJiYgWSA+IGRpdkJveFswXSkge1xyXG4gICAgICAgIGNlbGxDaGFuZ2VkKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHNhdmUgc2Nyb2xsIG9iamVjdCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlIGZvciB0aGUgZmlyc3QgY2FsbCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZVxyXG4gICAgLy8gcmVjdXJzaXZlIGNhbGxzIHdpbGwgbm90IGVudGVyIHRoaXMgY29kZSBhbmQgcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxEYXRhLm9iaiB3aWxsIGJlIHByZXNlcnZlZFxyXG4gICAgaWYgKHR5cGVvZihzbykgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHNjcm9sbERhdGEub2JqID0gc287XHJcbiAgICB9XHJcbiAgICAvLyB3aW5kb3cgYXV0b3Njcm9sbCAoZGVmaW5lIGN1cnJlbnQsIG9sZCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IG9sZCA9IGdldFNjcm9sbFBvc2l0aW9uKClbMF07XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS53aWR0aCAtIHNjcmVlbi53aWR0aDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLnBhZ2UueDtcclxuICAgIH1cclxuICAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIChkZWZpbmUgY3VycmVudCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICBlbHNlIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxMZWZ0O1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEub2JqLnNjcm9sbFdpZHRoIC0gc2Nyb2xsRGF0YS5vYmouY2xpZW50V2lkdGg7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5kaXYueDtcclxuICAgIH1cclxuICAgIC8vIGlmIHNjcm9sbGluZyBpcyBwb3NzaWJsZVxyXG4gICAgaWYgKGVkZ2UuZmxhZy54ID4gMCAmJiAoKGVkZ2VDcm9zc2VkIDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA+IDApIHx8IChlZGdlQ3Jvc3NlZCA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPCBtYXhzcCkpKSB7XHJcbiAgICAgIC8vIGlmIG9iamVjdCBpcyB3aW5kb3dcclxuICAgICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpIHtcclxuICAgICAgICAvLyBzY3JvbGwgd2luZG93XHJcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KGVkZ2VDcm9zc2VkLCAwKTtcclxuICAgICAgICAvLyBnZXQgbmV3IHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKGFmdGVyIHNjcm9sbGluZylcclxuICAgICAgICAvLyBiZWNhdXNlIGF0IHBhZ2UgdG9wIG9yIGJvdHRvbSBlZGdlWSBjYW4gYmUgYmlnZ2VyIHRoZW4gdGhlIHJlc3Qgb2Ygc2Nyb2xsaW5nIGFyZWFcclxuICAgICAgICAvLyBpdCB3aWxsIGJlIG5pY2UgdG8ga25vdyBob3cgbXVjaCB3YXMgd2luZG93IHNjcm9sbGVkIGFmdGVyIHNjcm9sbEJ5IGNvbW1hbmRcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKClbMF07XHJcbiAgICAgICAgLy8gZ2V0IGN1cnJlbnQgb2JqZWN0IHRvcCBzdHlsZVxyXG4gICAgICAgIHBvcyA9IHBhcnNlSW50KG9iai5zdHlsZS5sZWZ0LCAxMCk7XHJcbiAgICAgICAgaWYgKGlzTmFOKHBvcykpIHtcclxuICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIG9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNjcm9sbERhdGEub2JqLnNjcm9sbExlZnQgKz0gZWRnZUNyb3NzZWQ7XHJcbiAgICAgIH1cclxuICAgICAgLy8gcmVjdXJzaXZlIGF1dG9zY3JvbGwgY2FsbFxyXG4gICAgICBzZXRUaW1lb3V0KGF1dG9TY3JvbGxYLCBSRURJUFMuZHJhZy5zY3JvbGwuc3BlZWQpO1xyXG4gICAgfVxyXG4gICAgLy8gYXV0b3Njcm9sbCBpcyBlbmRlZDogZWxlbWVudCBpcyBvdXQgb2YgdGhlIHBhZ2UgZWRnZSBvciBtYXhpbXVtIHBvc2l0aW9uIGlzIHJlYWNoZWQgKGxlZnQgb3IgcmlnaHQpXHJcbiAgICBlbHNlIHtcclxuICAgICAgLy8gcmV0dXJuIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgKHRvIHdpbmRvdyBvciBkaXYgZWxlbWVudClcclxuICAgICAgUkVESVBTLmV2ZW50LmFkZChzY3JvbGxEYXRhLm9iaiwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTtcclxuICAgICAgLy8gcmVzZXQgYXV0byBzY3JvbGwgZmxhZyBYXHJcbiAgICAgIGVkZ2UuZmxhZy54ID0gMDtcclxuICAgICAgLy8gcmVzZXQgY3VycmVudCBjZWxsIHBvc2l0aW9uXHJcbiAgICAgIGN1cnJlbnRDZWxsID0gWzAsIDAsIDAsIDBdO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFZlcnRpY2FsIGF1dG8gc2Nyb2xsIG1ldGhvZC4gIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNvIFdpbmRvdyBvciBESVYgZWxlbWVudCAoc28gLSBzY3JvbGwgb2JqZWN0KS5cclxuICBhdXRvU2Nyb2xsWSA9IGZ1bmN0aW9uIChzbykgXHJcbiAge1xyXG4gICAgdmFyIHBvcywgICAgICAvLyB0b3Agc3R5bGUgcG9zaXRpb25cclxuICAgICAgb2xkLCAgICAgIC8vIG9sZCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChuZWVkZWQgZm9yIHdpbmRvdyBzY3JvbGxpbmcpXHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uLCAvLyBkZWZpbmUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgbWF4c3AsICAgICAgLy8gbWF4aW11bSBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgZWRnZUNyb3NzZWQsICAvLyBjcm9zc2VkIGVkZ2UgZm9yIHdpbmRvdyBhbmQgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgWCA9IHBvaW50ZXIueCwgIC8vIGRlZmluZSBwb2ludGVyIFggcG9zaXRpb25cclxuICAgICAgWSA9IHBvaW50ZXIueTsgIC8vIGRlZmluZSBwb2ludGVyIFkgcG9zaXRpb25cclxuICAgIFxyXG4gICAgaWYgKGVkZ2UuZmxhZy55ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBtb3VzZXVwIHRoZW4gc3RvcCBoYW5kbGluZyBcImN1cnJlbnQgY2VsbFwiXHJcbiAgICB7XHJcbiAgICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBjZWxsIChhdXRvc2Nyb2xsIGlzIHdvcmtpbmcpXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlIHJvdyBhbmQgdGFibGUgY2VsbFxyXG4gICAgICBcclxuICAgICAgaWYgKFggPCBkaXZCb3hbMV0gJiYgWCA+IGRpdkJveFszXSAmJiBZIDwgZGl2Qm94WzJdICYmIFkgPiBkaXZCb3hbMF0pICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCBpZiBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSBESVYgaWQ9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICAgIHtcclxuICAgICAgICBjZWxsQ2hhbmdlZCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIHNhdmUgc2Nyb2xsIG9iamVjdCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlIGZvciB0aGUgZmlyc3QgY2FsbCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSwgcmVjdXJzaXZlIGNhbGxzIHdpbGwgbm90IGVudGVyIHRoaXMgY29kZSBhbmQgcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxEYXRhLm9iaiB3aWxsIGJlIHByZXNlcnZlZFxyXG4gICAgaWYgKHR5cGVvZihzbykgPT09ICdvYmplY3QnKSBcclxuICAgIHtcclxuICAgICAgc2Nyb2xsRGF0YS5vYmogPSBzbztcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cgYXV0b3Njcm9sbCAoZGVmaW5lIGN1cnJlbnQsIG9sZCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gb2xkID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVsxXTtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLmhlaWdodCAtIHNjcmVlbi5oZWlnaHQ7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5wYWdlLnk7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIChkZWZpbmUgY3VycmVudCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsVG9wO1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEub2JqLnNjcm9sbEhlaWdodCAtIHNjcm9sbERhdGEub2JqLmNsaWVudEhlaWdodDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLmRpdi55O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBpZiBzY3JvbGxpbmcgaXMgcG9zc2libGVcclxuICAgIGlmIChlZGdlLmZsYWcueSA+IDAgJiYgKChlZGdlQ3Jvc3NlZCA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPiAwKSB8fCAoZWRnZUNyb3NzZWQgPiAwICYmIHNjcm9sbFBvc2l0aW9uIDwgbWF4c3ApKSkgXHJcbiAgICB7XHJcbiAgICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9iamVjdCBpcyB3aW5kb3dcclxuICAgICAge1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxCeSgwLCBlZGdlQ3Jvc3NlZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgd2luZG93XHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpWzFdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBuZXcgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAoYWZ0ZXIgc2Nyb2xsaW5nKSwgYmVjYXVzZSBhdCBwYWdlIHRvcCBvciBib3R0b20gZWRnZVkgY2FuIGJlIGJpZ2dlciB0aGVuIHRoZSByZXN0IG9mIHNjcm9sbGluZyBhcmVhLCBpdCB3aWxsIGJlIG5pY2UgdG8ga25vdyBob3cgbXVjaCB3YXMgd2luZG93IHNjcm9sbGVkIGFmdGVyIHNjcm9sbEJ5IGNvbW1hbmRcclxuICAgICAgICBwb3MgPSBwYXJzZUludChvYmouc3R5bGUudG9wLCAxMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgb2JqZWN0IHRvcCBzdHlsZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpc05hTihwb3MpKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwb3MgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvciBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICB7XHJcbiAgICAgICAgc2Nyb2xsRGF0YS5vYmouc2Nyb2xsVG9wICs9IGVkZ2VDcm9zc2VkO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBzZXRUaW1lb3V0KGF1dG9TY3JvbGxZLCBSRURJUFMuZHJhZy5zY3JvbGwuc3BlZWQpOyAgICAgICAgICAgICAgICAgICAgICAvLyByZWN1cnNpdmUgYXV0b3Njcm9sbCBjYWxsXHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF1dG9zY3JvbGwgaXMgZW5kZWQ6IGVsZW1lbnQgaXMgb3V0IG9mIHRoZSBwYWdlIGVkZ2Ugb3IgbWF4aW11bSBwb3NpdGlvbiBpcyByZWFjaGVkICh0b3Agb3IgYm90dG9tKVxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZXZlbnQuYWRkKHNjcm9sbERhdGEub2JqLCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAvLyByZXR1cm4gb25zY3JvbGwgZXZlbnQgaGFuZGxlciAodG8gd2luZG93IG9yIGRpdiBlbGVtZW50KVxyXG4gICAgICBlZGdlLmZsYWcueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBhdXRvIHNjcm9sbCBmbGFnIFlcclxuICAgICAgY3VycmVudENlbGwgPSBbMCwgMCwgMCwgMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgY3VycmVudCBjZWxsIHBvc2l0aW9uXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIGNvcGllcyBjdXN0b20gcHJvcGVydGllcyBmcm9tIHNvdXJjZSBlbGVtZW50IHRvIHRoZSBjbG9uZWQgZWxlbWVudCBhbmQgc2V0cyBldmVudCBoYW5kbGVycyAob25tb3VzZWRvd24gYW5kIG9uZGJsY2xpY2spLlxyXG4gICAqIFRoaXMgYWN0aW9uIHdpbGwgYmUgdGFrZW4gb24gRElWIGVsZW1lbnQgaXRzZWxmIGFuZCBhbGwgY2hpbGQgRElWIGVsZW1lbnRzLlxyXG4gICAqIE5lZWRlZCBpbiBjYXNlIHdoZW4gRElWIGVsZW1lbnQgaXMgY2xvbmVkIG9yIFJPVyBpcyBjbG9uZWQgKGZvciBkcmFnZ2luZyBtb2RlPVwicm93XCIpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNyYyBTb3VyY2UgZWxlbWVudCAoRElWIG9yIFRSIGVsZW1lbnQpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNsbiBDbG9uZWQgZWxlbWVudCAoRElWIG9yIFRSIGVsZW1lbnQpLlxyXG4gICAqL1xyXG4gIGNvcHlQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHNyYywgY2xuKSBcclxuICB7XHJcbiAgICB2YXIgY29weSA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBtZXRob2RcclxuICAgIHZhciBjaGlsZHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHByb3BlcnRpZXMgZm9yIGNoaWxkIGVsZW1lbnRzICh0aGlzIG1ldGhvZCBjYWxscyBcImNvcHlcIiBtZXRob2QpXHJcbiAgICBcclxuICAgIGNvcHlbMF0gPSBmdW5jdGlvbiAoZTEsIGUyKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY29weSBtZXRob2QgZm9yIERJViBlbGVtZW50cyAoZTEgc291cmNlIGVsZW1lbnQsIGUyIGNsb25lZCBlbGVtZW50KSwgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80MDk0ODExL2phdmFzY3JpcHQtY2xvbmVub2RlLWFuZC1wcm9wZXJ0aWVzXHJcbiAgICB7XHJcbiAgICAgIGlmIChlMS5yZWRpcHMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVkaXBzIHByb3BlcnR5IGV4aXN0cyBpbiBzb3VyY2UgZWxlbWVudCwgY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVuYWJsZWQsICByZWRpcHMuY29udGFpbmVyIC4uLilcclxuICAgICAge1xyXG4gICAgICAgIGUyLnJlZGlwcyA9IHt9O1xyXG4gICAgICAgIGUyLnJlZGlwcy5lbmFibGVkID0gZTEucmVkaXBzLmVuYWJsZWQ7XHJcbiAgICAgICAgZTIucmVkaXBzLmNvbnRhaW5lciA9IGUxLnJlZGlwcy5jb250YWluZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGUxLnJlZGlwcy5lbmFibGVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9ubW91c2Vkb3duIGV2ZW50IGhhbmRsZXIgaWYgc291cmNlIGVsZW1lbnQgaXMgZW5hYmxlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJlZ2lzdGVyRXZlbnRzKGUyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvcHlbMV0gPSBmdW5jdGlvbiAoZTEsIGUyKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY29weSBtZXRob2QgZm9yIFRSIGVsZW1lbnRzIFxyXG4gICAge1xyXG4gICAgICBpZiAoZTEucmVkaXBzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJlZGlwcyBwcm9wZXJ0eSBleGlzdHMgaW4gc291cmNlIGVsZW1lbnQsIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgKHJlZGlwcy5lbXB0eVJvdyAuLi4pXHJcbiAgICAgIHtcclxuICAgICAgICBlMi5yZWRpcHMgPSB7fTtcclxuICAgICAgICBlMi5yZWRpcHMuZW1wdHlSb3cgPSBlMS5yZWRpcHMuZW1wdHlSb3c7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNoaWxkcyA9IGZ1bmN0aW9uIChlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgbWV0aG9kIHRvIGNvcHkgcHJvcGVydGllcyBmb3IgY2hpbGQgZWxlbWVudHMgKGlucHV0IHBhcmFtZXRlciBpcyBlbGVtZW50IGluZGV4IDAgLSBESVYsIDEgLSBUUilcclxuICAgIHtcclxuICAgICAgdmFyIGVsMSwgZWwyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0aW9uIG9mIERJVi9UUiBlbGVtZW50cyBpbiBzb3VyY2UgYW5kIGNsb25lZCBlbGVtZW50XHJcbiAgICAgIHZhciB0biA9IFsnRElWJywgJ1RSJ107ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFnIG5hbWVcclxuICAgICAgXHJcbiAgICAgIGVsMSA9IHNyYy5nZXRFbGVtZW50c0J5VGFnTmFtZSh0bltlXSk7ICAgICAgICAgICAgLy8gY29sbGVjdCBjaGlsZCBESVYvVFIgZWxlbWVudHMgZnJvbSB0aGUgc291cmNlIGVsZW1lbnQgKHBvc3NpYmxlIGlmIGRpdiBlbGVtZW50IGNvbnRhaW5zIHRhYmxlKVxyXG4gICAgICBlbDIgPSBjbG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUodG5bZV0pOyAgICAgICAgICAgIC8vIGNvbGxlY3QgY2hpbGQgRElWL1RSIGVsZW1lbnRzIGZyb20gY2xvbmVkIGVsZW1lbnRcclxuICAgICAgXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWwyLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgLy8gY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVuYWJsZWQsICByZWRpcHMuY29udGFpbmVyIC4uLikgYW5kIHNldCBldmVudCBoYW5kbGVycyB0byBjaGlsZCBESVYgZWxlbWVudHNcclxuICAgICAge1xyXG4gICAgICAgIGNvcHlbZV0oZWwxW2ldLCBlbDJbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBpZiAoc3JjLm5vZGVOYW1lID09PSAnRElWJykgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgc291cmNlIGVsZW1lbnQgaXMgRElWIGVsZW1lbnQgdGhlbiBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIGZvciBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBjb3B5WzBdKHNyYywgY2xuKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHNyYy5ub2RlTmFtZSA9PT0gJ1RSJykgICAgICAgICAgICAgICAgICAgICAvLyBpZiBzb3VyY2UgZWxlbWVudCBpcyBUUiBlbGVtZW50IHRoZW4gY29weSBjdXN0b20gcHJvcGVydGllcyBmb3IgVFIgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBjb3B5WzFdKHNyYywgY2xuKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY2hpbGRzKDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcHJvcGVydGllcyBmb3IgRElWIGNoaWxkIGVsZW1lbnRzXHJcbiAgICBjaGlsZHMoMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIGZvciBUUiBjaGlsZCBlbGVtZW50c1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgdXBkYXRlcyBjbGltaXQxX1ggb3IgY2xpbWl0Ml9YIGNsYXNzIG5hbWUgKFggZGVmaW5lcyBjbG9uaW5nIGxpbWl0KS5cclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmNsaW1pdDFfWCAtIGFmdGVyIGNsb25pbmcgWCBlbGVtZW50cywgbGFzdCBlbGVtZW50IHdpbGwgYmUgbm9ybWFsIGRyYWctYWJsZSBlbGVtZW50PC9saT5cclxuICAgKiA8bGk+Y2xpbWl0Ml9YIC0gYWZ0ZXIgY2xvbmluZyBYIGVsZW1lbnRzLCBsYXN0IGVsZW1lbnQgd2lsbCBzdGF5IHVubW92YWJsZTwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBFbGVtZW50IG9uIHdoaWNoIGNuYW1lIGNsYXNzIHNob3VsZCBiZSB1cGRhdGVkLlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gdmFsdWUgSW5jcmVtZW50IG9yIGRlY3JlbWVudCBjbGltaXQgdmFsdWUuXHJcbiAgICovXHJcbiAgY2xvbmVMaW1pdCA9IGZ1bmN0aW9uIChlbCwgdmFsdWUpIFxyXG4gIHtcclxuICAgIHZhciBtYXRjaEFycmF5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoIGFycmF5XHJcbiAgICB2YXIgbGltaXRUeXBlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW1pdCB0eXBlICgxIC0gY2xvbmUgYmVjb21lcyBcIm5vcm1hbFwiIGRyYWcgZWxlbWVudCBhdCBsYXN0OyAyIC0gY2xvbmUgZWxlbWVudCBzdGF5cyBpbW1vdmFibGUpXHJcbiAgICB2YXIgbGltaXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW1pdCBudW1iZXJcclxuICAgIHZhciBjbGFzc2VzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsYXNzIG5hbWVzIG9mIGNsb25lIGVsZW1lbnRcclxuICAgIFxyXG4gICAgY2xhc3NlcyA9IGVsLmNsYXNzTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVhZCBjbGFzcyBuYW1lIGZyb20gZWxlbWVudFxyXG4gICAgbWF0Y2hBcnJheSA9IGNsYXNzZXMubWF0Y2goL2NsaW1pdChcXGQpXyhcXGQrKS8pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaCBjbGltaXQgY2xhc3MgbmFtZVxyXG4gICAgXHJcbiAgICBpZiAobWF0Y2hBcnJheSAhPT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgY2xhc3MgY29udGFpbnMgY2xpbWl0XHJcbiAgICB7XHJcbiAgICAgIGxpbWl0VHlwZSA9IHBhcnNlSW50KG1hdGNoQXJyYXlbMV0sIDEwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIGxpbWl0VHlwZSAoMSBvciAyKSBhbmQgbGltaXRcclxuICAgICAgbGltaXQgPSBwYXJzZUludChtYXRjaEFycmF5WzJdLCAxMCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAobGltaXQgPT09IDAgJiYgdmFsdWUgPT09IDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY3VycmVudCBsaW1pdCBpcyAwIGFuZCBzaG91bGQgYmUgc2V0IHRvIDEgdGhlbiByZXR1cm4gXCJjbG9uaW5nXCIgdG8gdGhlIERJViBlbGVtZW50XHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgcmVkaXBzLWNsb25lJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIHRvIGNsYXNzIGF0dHJpYnV0ZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsaW1pdFR5cGUgPT09IDIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5hYmxlIERJViBlbGVtZW50IGZvciBjbGltaXQyIHR5cGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbmFibGVEcmFnKHRydWUsIGVsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGxpbWl0ICs9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbGltaXQgdmFsdWVcclxuICAgICAgY2xhc3NlcyA9IGNsYXNzZXMucmVwbGFjZSgvY2xpbWl0XFxkX1xcZCsvZywgJ2NsaW1pdCcgKyBsaW1pdFR5cGUgKyAnXycgKyBsaW1pdCk7ICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdCBjbGFzcyBuYW1lIHdpdGggbmV3IGxpbWl0IHZhbHVlXHJcbiAgICAgIFxyXG4gICAgICBpZiAobGltaXQgPD0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVzdCBpZiBsaW1pdCBkcm9wcyB0byB6ZXJvXHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzc2VzID0gY2xhc3Nlcy5yZXBsYWNlKCdyZWRpcHMtY2xvbmUnLCAnJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG1vcmUgY2xvbmluZywgY3V0IG91dCBcInJlZGlwcy1jbG9uZVwiIGZyb20gY2xhc3MgbmFtZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsaW1pdFR5cGUgPT09IDIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbGltaXQgdHlwZSBpcyAyIHRoZW4gZGlzYWJsZSBjbG9uZSBlbGVtZW50IChpdCB3aWxsIHN0YXkgaW4gY2VsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbmFibGVEcmFnKGZhbHNlLCBlbCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHNvdXJjZSBESVYgZWxlbWVudFxyXG4gICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQuY2xvbmVkRW5kMigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5jbG9uZWRFbmQyIGhhbmRsZXJcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5jbG9uZWRFbmQxKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmNsb25lZEVuZDEgaGFuZGxlclxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZWwuY2xhc3NOYW1lID0gbm9ybWFsaXplKGNsYXNzZXMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSBzcGFjZXMgYW5kIHJldHVybiBjbGFzc2VzIHRvIHRoZSBjbG9uZSBvYmplY3RcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgYXR0YWNoZXMgLyBkZXRhY2hlcyBvbm1vdXNlZG93biwgb250b3VjaHN0YXJ0IGFuZCBvbmRibGNsaWNrIGV2ZW50cyB0byBESVYgZWxlbWVudHMgYW5kIGF0dGFjaGVzIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSBzY3JvbGwgY29udGFpbmVycyBpbiBpbml0aWFsaXphdGlvbiBwaGFzZS5cclxuICAgKiBJdCBhbHNvIGNhbiBiZSB1c2VkIGZvciBlbGVtZW50IGluaXRpYWxpemF0aW9uIGFmdGVyIERJViBlbGVtZW50IHdhcyBtYW51YWxseSBhZGRlZCB0byB0aGUgdGFibGUuXHJcbiAgICogSWYgY2xhc3MgYXR0cmlidXRlIG9mIERJViBjb250YWluZXIgY29udGFpbnMgXCJyZWRpcHMtbm9hdXRvc2Nyb2xsXCIgY2xhc3MgbmFtZSB0aGVuIGF1dG9TY3JvbGwgb3B0aW9uIHdpbGwgYmUgZGlzYWJsZWQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufFN0cmluZ30gZW5hYmxlX2ZsYWcgRW5hYmxlIC8gZGlzYWJsZSBlbGVtZW50IChvciBlbGVtZW50IHN1YnRyZWUgbGlrZSB0YWJsZSwgZHJhZ2dpbmcgY29udGFpbmVyIC4uLikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxTdHJpbmd9IFtlbF0gSFRNTCBub2RlIG9yIENTUyBzZWxlY3RvciB0byBlbmFibGUgLyBkaXNhYmxlLiBQYXJhbWV0ZXIgZGVmaW5lcyBlbGVtZW50IHJlZmVyZW5jZSBvciBDU1Mgc2VsZWN0b3Igb2YgRElWIGVsZW1lbnRzIHRvIGVuYWJsZSAvIGRpc2FibGUuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBlbmFibGUgZWxlbWVudCB3aXRoIGlkPVwiaWQxMjNcIiAoZWxlbWVudCBpZCBzaG91bGQgYmUgYSBzdHJpbmcgYWNjb3JkaW5nIHRvIERPTSBkb2NzKVxyXG4gICAqIHJkLmVuYWJsZURyYWcodHJ1ZSwgJyNpZDEyMycpO1xyXG4gICAqXHJcbiAgICogLy8gb3IgaW5pdCBtYW51YWxseSBhZGRlZCBlbGVtZW50IHdpdGgga25vd24gaWRcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKHRydWUsICcjaWQyMzQnKTtcclxuICAgKlxyXG4gICAqIC8vIGRpc2FibGUgYWxsIERJViBlbGVtZW50cyBpbiBkcmFnMSBzdWJ0cmVlXHJcbiAgICogcmQuZW5hYmxlRHJhZyhmYWxzZSwgJyNkcmFnMSBkaXYnKVxyXG4gICAqXHJcbiAgICogLy8gaW5pdCBESVYgZWxlbWVudHMgaW4gZHJhZ2dpbmcgYXJlYSAoaW5jbHVkaW5nIG5ld2x5IGFkZGVkIERJViBlbGVtZW50KVxyXG4gICAqIC8vIERJViBpbml0aWFsaXphdGlvbiB3aWxsIHdvcmsgaWYgdGFibGUgbm9kZSBzdGF5cyBpbnRhY3QgKHRhYmxlIGlzIG5vdCBnZW5lcmF0ZWQgZHluYW1pY2FsbHkpXHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZygnaW5pdCcpO1xyXG4gICAqXHJcbiAgICogLy8gaW5pdCBhZGRlZCBlbGVtZW50IHdpdGggcmVmZXJlbmNlIG15RWxlbWVudFxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcodHJ1ZSwgbXlFbGVtZW50KTtcclxuICAgKlxyXG4gICAqIC8vIGRpc2FibGUgYWxsIERJViBlbGVtZW50cyB3aXRoaW4gVEQgKHRkIGlzIHJlZmVyZW5jZSB0byBURCBub2RlKVxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcoZmFsc2UsIHRkKTtcclxuICAgKi9cclxuICBlbmFibGVEcmFnID0gZnVuY3Rpb24gKGVuYWJsZV9mbGFnLCBlbCkgXHJcbiAge1xyXG4gICAgdmFyIGRpdiA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gb2YgZGl2IGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0YWJsZXMgb3Igb25lIGRpdiBlbGVtZW50XHJcbiAgICBcclxuICAgIGlmIChlbCA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IERJViBlbGVtZW50cyBpbnNpZGUgY3VycmVudCBkcmFnIGFyZWEgKGRyYWcgZWxlbWVudHMgYW5kIHNjcm9sbCBjb250YWluZXJzKSBlLmcuIGVuYWJsZURyYWcodHJ1ZSlcclxuICAgIHtcclxuICAgICAgZGl2ID0gZHJhZ0NvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2Jyk7XHJcbiAgICB9ICAgIFxyXG4gICAgZWxzZSBpZiAodHlwZW9mKGVsKSA9PT0gJ3N0cmluZycpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiZWxcIiBpcyBzdHJpbmcgKENTUyBzZWxlY3RvcikgLSBpdCBjYW4gY29sbGVjdCBvbmUgRElWIGVsZW1lbnQgKGxpa2UgXCIjZDEyXCIpIG9yIG1hbnkgRElWIGVsZW1lbnRzIChsaWtlIFwiI2RyYWcxIGRpdlwiKVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZihlbCkgPT09ICdvYmplY3QnICYmIChlbC5ub2RlTmFtZSAhPT0gJ0RJVicgfHwgZWwuY2xhc3NOYW1lLmluZGV4T2YoJ3JlZGlwcy1kcmFnJykgPT09IC0xKSkgICAgICAvLyBcImVsXCIgaXMgbm9kZSByZWZlcmVuY2UgdG8gZWxlbWVudCB0aGF0IGlzIG5vdCBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub25lIG9mIGFib3ZlLCBlbCBpcyBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiLCBzbyBwcmVwYXJlIGFycmF5IHdpdGggb25lIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGRpdlswXSA9IGVsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBlbmFibGVEaXZzKGVuYWJsZV9mbGFnLCBkaXYpO1xyXG4gIH07XHJcbiAgXHJcbiAgXHJcbiAgZW5hYmxlRGl2cyA9IGZ1bmN0aW9uKGVuYWJsZV9mbGFnLCBkaXYpXHJcbiAge1xyXG4gICAgIHZhciBpLCBqLCBrLCAgICAvLyBsb2NhbCB2YXJpYWJsZXMgdXNlZCBpbiBsb29wXHJcbiAgICAgIHRibHMgPSBbXSwgICAgLy8gY29sbGVjdGlvbiBvZiB0YWJsZXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIGJvcmRlclN0eWxlLCAgLy8gYm9yZGVyIHN0eWxlIChzb2xpZCBvciBkb3R0ZWQpXHJcbiAgICAgIG9wYWNpdHksICAgIC8vIChpbnRlZ2VyKSBzZXQgb3BhY2l0eSBmb3IgZW5hYmxlZCAvIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgIGN1cnNvciwgICAgIC8vIGN1cnNvciBzdHlsZSAobW92ZSBvciBhdXRvKVxyXG4gICAgICBvdmVyZmxvdywgICAvLyBjc3MgdmFsdWUgb2Ygb3ZlcmZsb3cgcHJvcGVydHlcclxuICAgICAgYXV0b3Njcm9sbCwgICAvLyBib29sZWFuIC0gaWYgc2Nyb2xsYWJsZSBjb250YWluZXIgd2lsbCBoYXZlIGF1dG9zY3JvbGwgb3B0aW9uIChkZWZhdWx0IGlzIHRydWUpXHJcbiAgICAgIGVuYWJsZWQsICAgIC8vIGVuYWJsZWQgcHJvcGVydHkgKHRydWUgb3IgZmFsc2UpXHJcbiAgICAgIGNiLCAgICAgICAvLyBib3ggb2Zmc2V0IGZvciBjb250YWluZXIgYm94IChjYilcclxuICAgICAgcG9zaXRpb24sICAgLy8gaWYgdGFibGUgY29udGFpbmVyIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIFwicGFnZSBzY3JvbGxcIiBvZmZzZXQgc2hvdWxkIG5vdCBiZSBhZGRlZFxyXG4gICAgICByZWdleERyYWcgPSAvXFxicmVkaXBzLWRyYWdcXGIvaSwgLy8gcmVndWxhciBleHByZXNzaW9uIHRvIHNlYXJjaCBcInJlZGlwcy1kcmFnXCIgY2xhc3MgbmFtZVxyXG4gICAgICByZWdleE5vQXV0b3Njcm9sbCA9IC9cXGJyZWRpcHMtbm9hdXRvc2Nyb2xsXFxiL2k7IC8vIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggXCJyZWRpcHMtbm9hdXRvc2Nyb2xsXCIgY2xhc3MgbmFtZSAgIFxyXG5cclxuICAgIG9wYWNpdHkgPSBSRURJUFMuZHJhZy5zdHlsZS5vcGFjaXR5RGlzYWJsZWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHMgZnJvbSBwdWJsaWMgcHJvcGVydHkgXCJvcGFjaXR5RGlzYWJsZWRcIlxyXG4gICAgXHJcbiAgICBpZiAoZW5hYmxlX2ZsYWcgPT09IHRydWUgfHwgZW5hYmxlX2ZsYWcgPT09ICdpbml0JykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHN0eWxlcyBmb3IgZW5hYmxlZCBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBib3JkZXJTdHlsZSA9IFJFRElQUy5kcmFnLnN0eWxlLmJvcmRlckVuYWJsZWQ7XHJcbiAgICAgIGN1cnNvciA9ICdtb3ZlJztcclxuICAgICAgZW5hYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBzZXQgc3R5bGVzIGZvciBkaXNhYmxlZCBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBib3JkZXJTdHlsZSA9IFJFRElQUy5kcmFnLnN0eWxlLmJvcmRlckRpc2FibGVkO1xyXG4gICAgICBjdXJzb3IgPSAnYXV0byc7XHJcbiAgICAgIGVuYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gICAgXHJcbiAgICBcclxuICAgIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgZGl2Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWluIGxvb3AgdGhhdCBnb2VzIHRocm91Z2ggYWxsIERJViBlbGVtZW50c1xyXG4gICAgeyAgICBcclxuICAgICAgaWYgKHJlZ2V4RHJhZy50ZXN0KGRpdltpXS5jbGFzc05hbWUpKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgZWxlbWVudCBjb250YWlucyBcInJlZGlwcy1kcmFnXCIgY2xhc3MgbmFtZVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGVuYWJsZV9mbGFnID09PSAnaW5pdCcgfHwgZGl2W2ldLnJlZGlwcyA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHJlZmVyZW5jZSB0byB0aGUgRElWIGNvbnRhaW5lciAoaW5pdGlhbGl6YXRpb24gb3IgbmV3bHkgYWRkZWQgZWxlbWVudCB0byB0aGUgdGFibGUpIHRoaXMgcHJvcGVydHkgc2hvdWxkIG5vdCBiZSBjaGFuZ2VkIGluIGxhdGVyIGVsZW1lbnQgZW5hYmxlL2Rpc2FibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaXZbaV0ucmVkaXBzID0ge307ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZFxyXG4gICAgICAgICAgZGl2W2ldLnJlZGlwcy5jb250YWluZXIgPSBkcmFnQ29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbmFibGVfZmxhZyA9PT0gdHJ1ZSAmJiB0eXBlb2Yob3BhY2l0eSkgPT09ICdudW1iZXInKSAgICAgICAgICAgICAgICAvLyByZW1vdmUgb3BhY2l0eSBtYXNrXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLm9wYWNpdHkgPSAnJztcclxuICAgICAgICAgIGRpdltpXS5zdHlsZS5maWx0ZXIgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZW5hYmxlX2ZsYWcgPT09IGZhbHNlICYmIHR5cGVvZihvcGFjaXR5KSA9PT0gJ251bWJlcicpICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5IC8gMTAwO1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZWdpc3RlckV2ZW50cyhkaXZbaV0sIGVuYWJsZWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lciBmb3IgRElWIGVsZW1lbnRcclxuICAgICAgICBcclxuICAgICAgICBkaXZbaV0uc3R5bGUuYm9yZGVyU3R5bGUgPSBib3JkZXJTdHlsZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc3R5bGVzIGZvciBESVYgZWxlbWVudFxyXG4gICAgICAgIGRpdltpXS5zdHlsZS5jdXJzb3IgPSBjdXJzb3I7XHJcbiAgICAgICAgZGl2W2ldLnJlZGlwcy5lbmFibGVkID0gZW5hYmxlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGVuYWJsZWQgcHJvcGVydHkgdG8gdGhlIERJViBlbGVtZW50ICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGVuYWJsZV9mbGFnID09PSAnaW5pdCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXR0YWNoIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSBESVYgZWxlbWVudCBpbiBpbml0IHBoYXNlIG9ubHkgaWYgRElWIGVsZW1lbnQgaGFzIG92ZXJmbG93IG90aGVyIHRoYW4gZGVmYXVsdCB2YWx1ZSAndmlzaWJsZScgYW5kIHRoYXQgbWVhbnMgc2Nyb2xsYWJsZSBESVYgY29udGFpbmVyXHJcbiAgICAgIHtcclxuICAgICAgICBvdmVyZmxvdyA9IGdldFN0eWxlKGRpdltpXSwgJ292ZXJmbG93Jyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhc2sgZm9yIG92ZXJmbG93IHN0eWxlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG92ZXJmbG93ICE9PSAndmlzaWJsZScpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGlzIHNjcm9sbGFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBSRURJUFMuZXZlbnQuYWRkKGRpdltpXSwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgZm9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKGRpdltpXSwgJ3Bvc2l0aW9uJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbnRhaW5lciBib3ggc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgcGFnZSBzY3JvbGwgb2Zmc2V0IGZyb20gY2FsY3VsYXRpb24gaWYgbmVlZGVkKVxyXG4gICAgICAgICAgY2IgPSBib3hPZmZzZXQoZGl2W2ldLCBwb3NpdGlvbiwgZmFsc2UpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBESVYgY29udGFpbmVyIG9mZnNldCB3aXRoIG9yIHdpdGhvdXQgXCJwYWdlIHNjcm9sbFwiIGFuZCBleGNsdWRlZCBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGNvbnRlbnRcclxuICAgICAgICAgIGF1dG9zY3JvbGwgPSAhcmVnZXhOb0F1dG9zY3JvbGwudGVzdChkaXZbaV0uY2xhc3NOYW1lKTsgICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggZm9yIHJlZGlwcy1ub2F1dG9zY3JvbGwgb3B0aW9uXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2pdID0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRpdiA6IGRpdltpXSwgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgICAgb2Zmc2V0IDogY2IsICAgICAgICAgICAgICAgICAgLy8gYm94IG9mZnNldCBvZiB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgICAgbWlkc3RYIDogKGNiWzFdICsgY2JbM10pIC8gMiwgLy8gbWlkZGxlIFhcclxuICAgICAgICAgICAgbWlkc3RZIDogKGNiWzBdICsgY2JbMl0pIC8gMiwgLy8gbWlkZGxlIFlcclxuICAgICAgICAgICAgYXV0b3Njcm9sbCA6IGF1dG9zY3JvbGwgICAgICAgLy8gYXV0b3Njcm9sbCBlbmFibGVkIG9yIGRpc2FibGVkICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgdGJscyA9IGRpdltpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGFibGUnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgdGFibGVzIGluc2lkZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgdGJscy5sZW5ndGg7IGsrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCBnb2VzIHRocm91Z2ggZm91bmQgdGFibGVzIGluc2lkZSBzY3JvbGxhYmxlIGFyZWFcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGJsc1trXS5zY2EgPSBzY3JvbGxEYXRhLmNvbnRhaW5lcltqXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYSByZWZlcmVuY2UgdG8gdGhlIGNvcnJlc3BvbmRpbmcgc2Nyb2xsYWJsZSBhcmVhXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGorKzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNyZWFzZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBjb3VudGVyXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICAgXHJcbiAgfTtcclxuXHJcbiAgLy9NZXRob2QgcmV0dXJucyBzdHlsZSB2YWx1ZSBmb3IgcmVxdWVzdGVkIEhUTUwgZWxlbWVudCBhbmQgc3R5bGUgbmFtZS5cclxuICBnZXRTdHlsZSA9IGZ1bmN0aW9uIChlbCwgc3R5bGVfbmFtZSkgXHJcbiAge1xyXG4gICAgaWYgKGVsICYmIGVsLmN1cnJlbnRTdHlsZSkgXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBlbC5jdXJyZW50U3R5bGVbc3R5bGVfbmFtZV07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChlbCAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSkgXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsLCBudWxsKVtzdHlsZV9uYW1lXTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBmaW5kIHRoZSBmaXJzdCBwYXJlbnQgZWxlbWVudCBvZiBlbCB3aXRoIHRoZSB0YWcgbmFtZSB0YWdfbmFtZSBcclxuICBmaW5kUGFyZW50ID0gZnVuY3Rpb24gKHRhZ19uYW1lLCBlbCkgXHJcbiAge1xyXG4gICAgZWwgPSBlbC5wYXJlbnROb2RlOyAgICAgICAgICAgICAgICAgLy8gc2V0IFwiZWxcIiB0byB0aGUgbmV4dCBub2RlICh0byBwcmV2ZW50IGZpbmRpbmcgbm9kZSBpdHNlbGYpXHJcbiAgICBcclxuICAgIHdoaWxlIChlbCkgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGxvb3BcclxuICAgIHtcclxuICAgICAgaWYgKGVsLm5vZGVOYW1lID09PSB0YWdfbmFtZSkgICAgIC8vIG5vZGUgaXMgZm91bmRcclxuICAgICAge1xyXG4gICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9kZSBpcyBmb3VuZCBhbmQgbG9vcCBjYW4gYmUgZW5kZWRcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZWwgPSBlbC5wYXJlbnROb2RlOyAgICAgICAgICAgICAgIC8vIG1vdmUgb24gdG8gdGhlIHBhcmVudCBub2RlXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBlbDtcclxuICB9O1xyXG5cclxuICAvL0Z1bmN0aW9uIHJldHVybnMgYSBzdHJpbmcgaW4gd2hpY2ggYWxsIG9mIHRoZSBwcmVjZWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlIHNwYWNlIGhhcyBiZWVuIHJlbW92ZWQsIGFuZCBpbiB3aGljaCBhbGwgaW50ZXJuYWwgc2VxdWVuY2VzIG9mIHdoaXRlIGlzIHJlcGxhY2VkIHdpdGggb25lIHdoaXRlIHNwYWNlLlxyXG4gIG5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChzdHIpIFxyXG4gIHtcclxuICAgIGlmIChzdHIgIT09IHVuZGVmaW5lZCkgXHJcbiAgICB7XHJcbiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gc3RyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gbm9ybWFsaXplZCBzdHJpbmcgKHdpdGhvdXQgcHJlY2VkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXMpXHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHNldHMgb3BhY2l0eSB0byB0YWJsZSByb3cgb3IgZGVsZXRlcyByb3cgY29udGVudC5cclxuICAgKiBJbnB1dCBwYXJhbWV0ZXIgXCJlbFwiIGlzIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IG9yIHJlZmVyZW5jZSB0byB0aGUgY2xvbmVkIG1pbmkgdGFibGUgKHdoZW4gcm93IGlzIG1vdmVkKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ30gZWwgSWQgb2Ygcm93IGhhbmRsZXIgKGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIikgb3IgcmVmZXJlbmNlIHRvIGVsZW1lbnQgKHNvdXJjZSByb3cgb3IgbWluaSB0YWJsZSkuXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfFN0cmluZ30gb3BhY2l0eSBPcGFjaXR5IGxldmVsIChmcm9tIDAgdG8gMTAwKSBvciBcImVtcHR5XCIgKHRoZW4gY29udGVudCBvZiB0YWJsZSBjZWxscyBpbiByb3cgd2lsbCBiZSBkZWxldGVkIC0gaW4gdGhhdCBjYXNlIGZpcnN0IHBhcmFtZXRlciBzaG91bGQgYmUgVFIpLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbY29sb3JdIEJhY2tncm91bmQgY29sb3IuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZyBsaWJyYXJ5XHJcbiAgICogcmQgPSBSRURJUFMuZHJhZztcclxuICAgKlxyXG4gICAqIC8vIG1ha2Ugcm93IHNlbWktdHJhbnNwYXJlbnRcclxuICAgKiByZC5yb3dPcGFjaXR5KHJvd09iaiwgNTApO1xyXG4gICAqXHJcbiAgICogLy8gc2V0IHJvdyBhcyBlbXB0eSBhbmQgd2hpdGUgKGNvbnRlbnQgaW4gdGFibGUgY2VsbHMgd2lsbCBiZSBkZWxldGVkKVxyXG4gICAqIHJkLnJvd09wYWNpdHkocm93T2JqLCAnZW1wdHknLCAnV2hpdGUnKTtcclxuICAgKi9cclxuICByb3dPcGFjaXR5ID0gZnVuY3Rpb24gKGVsLCBvcGFjaXR5LCBjb2xvcikgXHJcbiAge1xyXG4gICAgdmFyIHRkTm9kZUxpc3Q7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWJsZSBjZWxsc1xyXG4gICAgdmFyIGksIGo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHZhcmlhYmxlc1xyXG4gICAgXHJcbiAgICBpZiAodHlwZW9mKGVsKSA9PT0gJ3N0cmluZycpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGlucHV0IHBhcmFtZXRlciBpcyBzdHJpbmcgKHRoaXMgc2hvdWxkIGJlIGVsZW1lbnQgaWQpLCB0aGVuIHNldCBlbGVtZW50IHJlZmVyZW5jZVxyXG4gICAge1xyXG4gICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKTtcclxuICAgICAgZWwgPSBmaW5kUGFyZW50KCdUQUJMRScsIGVsKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWwgY291bGQgYmUgcmVmZXJlbmNlIG9mIHRoZSBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCIgKHJvdyBoYW5kbGVyKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoZWwubm9kZU5hbWUgPT09ICdUUicpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsIGlzIFRSLCB0aGVuIHNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIGVhY2ggY2VsbCAoaWYgbmVlZGVkKSBhbmQgYXBwbHkgb3BhY2l0eVxyXG4gICAge1xyXG4gICAgICB0ZE5vZGVMaXN0ID0gZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RkJyk7ICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IHRhYmxlIGNlbGwgZnJvbSB0aGUgcm93XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGROb2RlTGlzdC5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgRElWIGVsZW1lbnRcclxuICAgICAge1xyXG4gICAgICAgIHRkTm9kZUxpc3RbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3IgPyBjb2xvciA6ICcnOyAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciB0byB0YWJsZSBjZWxsIGlmIG5lZWRlZFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChvcGFjaXR5ID09PSAnZW1wdHknKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBvcGFjaXR5IGlzIHNldCB0byBcImVtcHR5XCIgdGhlbiBkZWxldGUgY2VsbCBjb250ZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGROb2RlTGlzdFtpXS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBzZXQgb3BhY2l0eSB0byBldmVyeSBjaGlsZCBub2RlIGluIHRhYmxlIGNlbGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzLmxlbmd0aDsgaisrKSAgIC8vIGxvb3AgdGhyb3VnaCBjaGlsZCBub2RlcyBvZiBldmVyeSB0YWJsZSBjZWxsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIGFwcGx5IHN0eWxlcyBvbmx5IHRvIEVsZW1lbnQgbm9kZXMgKG5vdCB0ZXh0IG5vZGVzLCBhdHRyaWJ1dGVzIC4uLiksIGh0dHA6Ly9jb2RlLnN0ZXBoZW5tb3JsZXkub3JnL2phdmFzY3JpcHQvZG9tLW5vZGV0eXBlLWNvbnN0YW50cy9cclxuICAgICAgICAgICAgaWYgKHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlc1tqXS5ub2RlVHlwZSA9PT0gMSkgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXNbal0uc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7XHJcbiAgICAgICAgICAgICAgdGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzW2pdLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gcm93IGlzIG1vdmVkIHRoZW4gUkVESVBTLmRyYWcgd2lsbCBjcmVhdGUgbWluaSB0YWJsZSB3aXRoIG9uZSByb3csIGFsbCBicm93c2VycyAoSUU4LCBPcGVyYTExLCBGRjMuNiwgQ2hyb21lMTApIGNhbiBzZXQgb3BhY2l0eSB0byB0aGUgdGFibGVcclxuICAgIHtcclxuICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIEZGLCBDaHJvbWUsIE9wZXJhXHJcbiAgICAgIGVsLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknOyAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBJRVxyXG4gICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvciA/IGNvbG9yIDogJyc7ICAgICAgICAgICAgICAvLyBzZXQgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAvKiBwdWJsaWMgcHJvcGVydGllcyAqL1xyXG4gICAgb2JqIDogb2JqLCAgICAgICAgICAgICAgICAgIC8vVHlwZTogSFRNTEVsZW1lbnQgLSBDdXJyZW50bHkgbW92ZWQgRElWIGVsZW1lbnQuIFJlZmVyZW5jZSB0byB0aGUgUkVESVBTLmRyYWcub2JqIChkcmFnZ2VkIERJViBlbGVtZW50KSBpcyB2aXNpYmxlIGFuZCBjYW4gYmUgdXNlZCBpbiBhcHByb3ByaWF0ZSBldmVudCBoYW5kbGVycy5cclxuICAgIG9iak9sZCAgOiBvYmpPbGQsICAgICAgICAgICAvL1R5cGU6IEhUTUxFbGVtZW50IC0gUHJldmlvdXNseSBtb3ZlZCBESVYgZWxlbWVudCAoYmVmb3JlIGNsaWNrZWQgb3IgY2xvbmVkKS4gSW4gY2FzZSB3aGVuIERJViBlbGVtZW50IGlzIGNsb25lZCwgb2JqIGlzIHJlZmVyZW5jZSBvZiBjdXJyZW50IChjbG9uZWQpIERJViBlbGVtZW50IHdoaWxlIG9iak9sZCBpcyByZWZlcmVuY2Ugb2YgYm90dG9tIChvcmlnaW4pIERJViBlbGVtZW50LlxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgY29udGFpbnMgcmVmZXJlbmNlIHRvIHByZXZpb3VzLCBzb3VyY2UsIGN1cnJlbnQgYW5kIHRhcmdldCB0YWJsZSBjZWxsLiBUZCByZWZlcmVuY2VzIGNhbiBiZSB1c2VkIGluIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQuc291cmNlIC0gcmVmZXJlbmNlIHRvIHNvdXJjZSB0YWJsZSBjZWxsIChzZXQgaW4gb25tb3VzZWRvd24pPC9saT5cclxuICAgICAqIDxsaT57SFRNTEVsZW1lbnR9IHRkLnByZXZpb3VzIC0gcmVmZXJlbmNlIHRvIHByZXZpb3VzIHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCk8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQuY3VycmVudCAtIHJlZmVyZW5jZSB0byBjdXJyZW50IHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCk8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQudGFyZ2V0IC0gcmVmZXJlbmNlIHRvIHRhcmdldCB0YWJsZSBjZWxsICh0YXJnZXQgdGFibGUgY2VsbCBpcyBzZXQgaW4gYSBtb21lbnQgb2YgZHJvcHBpbmcgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbCk8L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICB0ZCA6IHRkLFxyXG4gICAgLyoqXHJcbiAgICAgKiBIb3ZlciBvYmplY3QgY29udGFpbnMgNCBwcm9wZXJ0aWVzOiBjb2xvclRkLCBjb2xvclRyLCBib3JkZXJUZCBhbmQgYm9yZGVyVHIuIGNvbG9yVGQgYW5kIGNvbG9yVHIgZGVmaW5lIGhvdmVyIGNvbG9yIGZvciBESVYgZWxlbWVudCBhbmQgdGFibGUgcm93LlxyXG4gICAgICogSWYgYm9yZGVyVGQgaXMgZGVmaW5lZCwgdGhlbiBoaWdobGlnaHRlZCBjZWxsIHdpbGwgaGF2ZSBib3JkZXIuIElmIGJvcmRlclRyIGlzIGRlZmluZWQgdGhlbiBoaWdobGlnaHRlZCByb3cgd2lsbCBoYXZlIG9ubHkgdG9wIG9yIGJvdHRvbSBib3JkZXIuXHJcbiAgICAgKiBUb3AgYm9yZGVyIHNob3dzIHRoYXQgcm93IHdpbGwgYmUgcGxhY2VkIGFib3ZlIGN1cnJlbnQgcm93LCB3aGlsZSBib3R0b20gYm9yZGVyIHNob3dzIHRoYXQgY3VycmVudCByb3cgd2lsbCBiZSBwbGFjZWQgYmVsb3cgY3VycmVudCByb3cuXHJcbiAgICAgKiBTb21lIGJyb3dzZXJzIG1heSBoYXZlIHByb2JsZW0gd2l0aCBcImJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZVwiIHRhYmxlIHN0eWxlIGFuZCBib3JkZXIgaGlnaGxpZ2h0aW5nLlxyXG4gICAgICogSW4gdGhhdCBjYXNlIHRyeSB3aXRob3V0IGNvbGxhcHNpbmcgVEQgYm9yZGVycyAoZS5nIHNldCBcImJvcmRlci1zcGFjaW5nOjBcIiBhbmQgc21hbGxlciBcInRkLmJvcmRlci13aWR0aFwiKS5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICogQG5hbWUgUkVESVBTLmRyYWcjaG92ZXJcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBzZXQgXCIjOUJCM0RBXCIgYXMgaG92ZXIgY29sb3IgZm9yIFREXHJcbiAgICAgKiBSRURJUFMuZHJhZy5ob3Zlci5jb2xvclRkID0gJyM5QkIzREEnO1xyXG4gICAgICpcclxuICAgICAqIC8vIG9yIHNldCBcIkxpbWVcIiBhcyBob3ZlciBjb2xvciBmb3IgVFJcclxuICAgICAqIFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVHIgPSAnTGltZSc7XHJcbiAgICAgKlxyXG4gICAgICogLy8gc2V0IHJlZCBib3JkZXIgZm9yIGhpZ2hsaWdodGVkIFREXHJcbiAgICAgKiBSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUZCA9ICcycHggc29saWQgcmVkJztcclxuICAgICAqL1xyXG4gICAgaG92ZXIgOiBob3ZlcixcclxuICAgIC8qKlxyXG4gICAgICogU2Nyb2xsIG9iamVjdCBjb250YWlucyBwcm9wZXJ0aWVzIG5lZWRlZCBmb3IgYXV0b3Njcm9sbCBvcHRpb24uXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IHNjcm9sbC5lbmFibGUgLSBFbmFibGUgLyBkaXNhYmxlIGF1dG9zY3JvbGwgb3B0aW9uLiBCeSBkZWZhdWx0IGF1dG9zY3JvbGwgaXMgZW5hYmxlZCBidXQgaXQgY2FuIGJlIHVzZWZ1bGwgaW4gc29tZSBjYXNlcyB0byBjb21wbGV0ZWx5IHR1cm4gb2ZmIGF1dG9zY3JvbGwgKGlmIGFwcGxpY2F0aW9uIGRvZXNuJ3QgbmVlZCBhdXRvc2Nyb2xsaW5nIHBhZ2Ugbm9yIGF1dG9zY3JvbGxpbmcgRElWIGNvbnRhaW5lcikuIFR1cm5pbmcgb2ZmIGF1dG9zY3JvbGwgd2lsbCBzcGVlZCB1cCBhcHBsaWNhdGlvbiBiZWNhdXNlIGV4dHJhIGNhbGN1bGF0aW9ucyB3aWxsIGJlIHNraXBwZWQuIERlZmF1bHQgaXMgdHJ1ZTwvbGk+XHJcbiAgICAgKiA8bGk+e0ludGVnZXJ9IHNjcm9sbC5ib3VuZCAtIEJvdW5kIHNpemUgZm9yIHRyaWdnZXJpbmcgcGFnZSBhdXRvU2Nyb2xsIG9yIGF1dG9TY3JvbGwgb2Ygc2Nyb2xsYWJsZSBESVYgY29udGFpbmVyLiBEZWZhdWx0IHZhbHVlIGlzIDI1IChweCkuPC9saT5cclxuICAgICAqIDxsaT57SW50ZWdlcn0gc2Nyb2xsLnNwZWVkIC0gQXV0b3Njcm9sbCBwYXVzZSBpbiBtaWxsaXNlY29uZHMuIERlZmF1bHQgdmFsdWUgaXMgMjAgKG1pbGxpc2Vjb25kcykuPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgc2Nyb2xsIDogc2Nyb2xsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgY29udGFpbnMgc3R5bGVzIChjb2xvcnMsIG9wYWNpdHkgbGV2ZWxzKSBmb3IgRElWIGVsZW1lbnRzIGFuZCB0YWJsZSByb3dzLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLmJvcmRlckVuYWJsZWQgLSBCb3JkZXIgc3R5bGUgZm9yIGVuYWJsZWQgRElWIGVsZW1lbnRzLiBEZWZhdWx0IGlzIFwic29saWRcIi48L2xpPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLmJvcmRlckRpc2FibGVkIC0gQm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBESVYgZWxlbWVudHMuIERlZmF1bHQgaXMgXCJkb3R0ZWRcIi48L2xpPlxyXG4gICAgICogPGxpPntJbnRlZ2VyfSBzdHlsZS5vcGFjaXR5RGlzYWJsZWQgLSBPcGFjaXR5IGxldmVsIGZvciBkaXNhYmxlZCBlbGVtZW50cy4gRGVmYXVsdCBpcyBlbXB0eSBzdHJpbmcuPC9saT5cclxuICAgICAqIDxsaT57U3RyaW5nfSBzdHlsZS5yb3dFbXB0eUNvbG9yIC0gXCJFbXB0eSByb3dcIiBjb2xvci4gV2hlbiBsYXN0IHJvdyBmcm9tIHRhYmxlIGlzIG1vdmVkIHRoZW4gdGhpcyBjb2xvciB3aWxsIGJlIHNldCB0byBcImVtcHR5IHJvd1wiLiBEZWZhdWx0IGlzIFwid2hpdGVcIi48L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBkZWZpbmUgYm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICogUkVESVBTLmRyYWcuc3R5bGUuYm9yZGVyRGlzYWJsZWQgPSAnZGFzaGVkJztcclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBzdHlsZSA6IHN0eWxlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgZGVmaW5lcyBzZXZlcmFsIHJ1bGVzIHJlbGF0ZWQgdG8gY2xvbmluZyBESVYgZWxlbWVudHMgbGlrZSBlbmFibGUgY2xvbmluZyB3aXRoIHNoaWZ0IGtleSwgZW5hYmxlIHJldHVybmluZyBjbG9uZWQgRElWIGVsZW1lbnQgdG8gaXRzIHNvdXJjZSBhbmQgc28gb24uXHJcbiAgICAgKiBJbnN0ZWFkIG9mIG1vdmluZywgRElWIGVsZW1lbnQgLyByb3cgd2lsbCBiZSBjbG9uZWQgYW5kIHJlYWR5IGZvciBkcmFnZ2luZy5cclxuICAgICAqIEp1c3QgcHJlc3MgU0hJRlQga2V5IGFuZCB0cnkgdG8gZHJhZyBESVYgZWxlbWVudCAvIHJvdy5cclxuICAgICAqIGlmIGNsb25lLnNlbmRCYWNrIHByb3BlcnR5IHNldCB0byB0cnVlLCBjbG9uZWQgRElWIGVsZW1lbnQgd2lsbCBiZSBkZWxldGVkIHdoZW4gZHJvcHBlZCB0byB0aGUgY2VsbCBjb250YWluaW5nIGl0cyBzb3VyY2UgY2xvbmUgZWxlbWVudC5cclxuICAgICAqIElmIGV4aXN0cywgXCJjbGltaXRcIiBjbGFzcyB3aWxsIGJlIHVwZGF0ZWQgKGluY3JlYXNlZCBieSAxKS5cclxuICAgICAqIGNsb25lLmRyb3AgcHJvcGVydHkgZGVmaW5lcyBwbGFjaW5nIGNsb25lZCBESVYgZWxlbWVudCAoZHJvcHBlZCBvdXRzaWRlIGFueSB0YWJsZSkgdG8gdGhlIGxhc3QgbWFya2VkIHBvc2l0aW9uLlxyXG4gICAgICogSWYgdGhpcyBwcm9wZXJ0eSBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGNsb25lZCBESVYgZWxlbWVudCB3aWxsIGJlIGFsd2F5cyBwbGFjZWQgdG8gdGhlIHRhYmxlIGNlbGwuXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLmtleURpdiAtIElmIHNldCB0byB0cnVlLCBhbGwgRElWIGVsZW1lbnRzIG9uIHRhYmxlcyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5rZXlSb3cgLSBJZiBzZXQgdG8gdHJ1ZSwgdGFibGUgcm93cyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5zZW5kQmFjayAtIElmIHNldCB0byB0cnVlLCBjbG9uZWQgZWxlbWVudCBjYW4gYmUgcmV0dXJuZWQgdG8gaXRzIHNvdXJjZS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5kcm9wIC0gSWYgc2V0IHRvIHRydWUsIGNsb25lZCBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIHBsYWNlZCB0byB0aGUgdGFibGUgKHRvIHRoZSBsYXN0IHBvc3NpYmxlIGNlbGwpIG5vIG1hdHRlciBpZiBpcyBkcm9wcGVkIG91dHNpZGUgdGhlIHRhYmxlLiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGNsb25lIDogY2xvbmUsXHJcbiAgICAvKiBwdWJsaWMgbWV0aG9kcyAoZG9jdW1lbnRlZCBpbiBtYWluIGNvZGUpICovXHJcbiAgICBpbml0IDogaW5pdCxcclxuICAgIGVuYWJsZURyYWcgOiBlbmFibGVEcmFnLFxyXG4gICAgZW5hYmxlRGl2cyA6IGVuYWJsZURpdnMsXHJcbiAgICByb3dPcGFjaXR5IDogcm93T3BhY2l0eSxcclxuICAgIGdldFNjcm9sbFBvc2l0aW9uIDogZ2V0U2Nyb2xsUG9zaXRpb24sXHJcbiAgICBnZXRTdHlsZSA6IGdldFN0eWxlLFxyXG4gICAgZmluZFBhcmVudCA6IGZpbmRQYXJlbnQsXHJcbiAgICBldmVudCA6IGV2ZW50XHJcbiAgfTtcclxufSgpKTtcclxuXHJcblxyXG5pZiAoIVJFRElQUy5ldmVudCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgUkVESVBTLmV2ZW50IGlzbid0IGFscmVhZHkgZGVmaW5lZCAoZnJvbSBvdGhlciBSRURJUFMgZmlsZSlcclxue1xyXG4gIFJFRElQUy5ldmVudCA9IChmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICB2YXIgYWRkO1xyXG4gICAgdmFyIHJlbW92ZTtcclxuXHJcbiAgICBhZGQgPSBmdW5jdGlvbiAob2JqLCBldmVudE5hbWUsIGhhbmRsZXIpICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXJcclxuICAgIHtcclxuICAgICAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgZmFsc2UpOyAgICAgICAgLy8gKGZhbHNlKSByZWdpc3RlciBldmVudCBpbiBidWJibGUgcGhhc2UgKGV2ZW50IHByb3BhZ2F0ZXMgZnJvbSBmcm9tIHRhcmdldCBlbGVtZW50IHVwIHRvIHRoZSBET00gcm9vdClcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmpbJ29uJyArIGV2ZW50TmFtZV0gPSBoYW5kbGVyO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIChvYmosIGV2ZW50TmFtZSwgaGFuZGxlcikgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBldmVudCBsaXN0ZW5lclxyXG4gICAge1xyXG4gICAgICBpZiAob2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAob2JqLmRldGFjaEV2ZW50KSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5kZXRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBoYW5kbGVyKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqWydvbicgKyBldmVudE5hbWVdID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4geyBhZGQ6IGFkZCwgcmVtb3ZlOiByZW1vdmUgfTtcclxuICB9KCkpO1xyXG59IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgcmVkaXBzID0ge307XHJcblxyXG5yZWRpcHMuaW5pdCA9IGZ1bmN0aW9uICgpIFxyXG57XHJcbiAgdmFyIHJkID0gUkVESVBTLmRyYWc7ICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZyBsaWJyYXJ5XHJcblxyXG4gIHJkLmluaXQoKTtcclxuXHJcbiAgLy9yZC5jbG9uZS5rZXlEaXYgPSByZC5jbG9uZS5rZXlSb3cgPSB0cnVlOyAgIC8vIGVuYWJsZSBjbG9uZSBlbGVtZW50IGFuZCBjbG9uZSByb3cgd2l0aCBzaGlmdCBrZXlcclxuXHJcbiAgcmQuZXZlbnQucm93RHJvcHBlZCA9IGZ1bmN0aW9uIChuZXdQYXJlbnRSb3cpXHJcbiAge1xyXG4gICAgdmFyIG1vdmVkSUQgICAgICAgPSBwYXJzZUludChyZC5vYmpPbGQuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gICAgdmFyIG5ld1BhcmVudElEICAgPSBwYXJzZUludChuZXdQYXJlbnRSb3cuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gICAgc3ByZWFkU2hlZXQubW92ZU5vZGUobW92ZWRJRCwgbmV3UGFyZW50SUQpO1xyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd0Ryb3BwZWRTb3VyY2UgPSBmdW5jdGlvbiAoKSAgICAgICAgIC8vIHJvdyB3YXMgZHJvcHBlZCB0byB0aGUgc291cmNlIC0gZXZlbnQgaGFuZGxlciwgbWluaSB0YWJsZSAoY2xvbmVkIHJvdykgd2lsbCBiZSBkZWxldGVkIGFuZCBzb3VyY2Ugcm93IHNob3VsZCByZXR1cm4gdG8gb3JpZ2luYWwgc3RhdGVcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iak9sZCwgMTAwKTsgICAgICAgICAgICAgICAgLy8gbWFrZSBzb3VyY2Ugcm93IGNvbXBsZXRlbHkgdmlzaWJsZSAobm8gb3BhY2l0eSlcclxuICB9O1xyXG5cclxuICByZC5ldmVudC5yb3dNb3ZlZCA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgcmQucm93T3BhY2l0eShyZC5vYmosIDg1KTsgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBtb3ZlZCByb3csIHJkLm9iaiBpcyByZWZlcmVuY2Ugb2YgY2xvbmVkIHJvdyAobWluaSB0YWJsZSlcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAyMCwgJ1doaXRlJyk7ICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3Igc291cmNlIHJvdyBhbmQgY2hhbmdlIHNvdXJjZSByb3cgYmFja2dyb3VuZCBjb2xvciwgb2JqLm9iak9sZCBpcyByZWZlcmVuY2Ugb2Ygc291cmNlIHJvd1xyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd0NsaWNrZWQgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd05vdE1vdmVkICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd0Nsb25lZCAgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd05vdENsb25lZCA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd0RlbGV0ZWQgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICByZC5ldmVudC5yb3dVbmRlbGV0ZWQgPSBmdW5jdGlvbiAoKSAgICAgICAgICAgICAvLyByb3cgaXMgdW5kZWxldGVkIChyZXR1cm4gc291cmNlIHJvdyB0byBvcmlnaW5hbCBzdGF0ZSlcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iak9sZCwgMTAwKTtcclxuICB9O1xyXG59O1xyXG4iLCJ2YXIgcmVzaXplQ29sdW1uTGVmdCA9IDA7XHJcbnZhciByZXNpemVGaWVsZCA9ICcwJztcclxudmFyIE1JTl9DT0xVTU5fV0lEVEggPSA3MDtcclxudmFyIEdSSVBTX1dJRFRIID0gMTY7XHJcblxyXG52YXIgc3RhcnRSZXNpemUgPSBmdW5jdGlvbihlLCBncmlwKVxyXG57XHJcbiAgJChkb2N1bWVudCkuYmluZCgndG91Y2htb3ZlLnJlc2l6ZUNvbEdyaXAgbW91c2Vtb3ZlLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVEcmFnKS5iaW5kKCd0b3VjaGVuZC5yZXNpemVDb2xHcmlwIG1vdXNldXAucmVzaXplQ29sR3JpcCcsIHJlc2l6ZUVuZCk7XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLmxlZnQgPSBlLnBhZ2VYICsgJ3B4JztcclxuXHJcbiAgcmVzaXplQ29sdW1uTGVmdCA9ICQoZ3JpcC5wYXJlbnROb2RlKS5wb3NpdGlvbigpLmxlZnQ7ICAgICAgICAgICAgICAgICAgICAvL3NhdmUgdGhlIGxlZnQgcG9zaXRpb24gb2YgdGhlIGNvbHVtbiBiZWluZyByZXNpemVkXHJcbiAgcmVzaXplRmllbGQgPSBncmlwLnBhcmVudE5vZGUuaWQucmVwbGFjZSgnY29sSGVhZGVyJywgJycpOyAgICAgICAgICAgICAgICAvL3NhdmUgdGhlIGZpZWxkIG9mIHRoZSBjb2x1bW4gYmVpbmcgcmVzaXplZFxyXG59O1xyXG5cclxudmFyIHJlc2l6ZUVuZCA9IGZ1bmN0aW9uKGUpXHJcbntcclxuICAkKGRvY3VtZW50KS51bmJpbmQoJ3RvdWNobW92ZS5yZXNpemVDb2xHcmlwIG1vdXNlbW92ZS5yZXNpemVDb2xHcmlwJywgcmVzaXplRHJhZykudW5iaW5kKCd0b3VjaGVuZC5yZXNpemVDb2xHcmlwIG1vdXNldXAucmVzaXplQ29sR3JpcCcsIHJlc2l6ZUVuZCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcblxyXG4gIHZhciBuZXdXaWR0aCA9IGUucGFnZVggLSByZXNpemVDb2x1bW5MZWZ0IC0gR1JJUFNfV0lEVEg7XHJcblxyXG4gIGlmKG5ld1dpZHRoIDwgTUlOX0NPTFVNTl9XSURUSClcclxuICB7XHJcbiAgICBuZXdXaWR0aCA9IE1JTl9DT0xVTU5fV0lEVEg7XHJcbiAgfVxyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sSGVhZGVySW5wdXQnICsgcmVzaXplRmllbGQpLnN0eWxlLndpZHRoID0gbmV3V2lkdGggKyAncHgnOyAgICAvL3Jlc2l6ZSB0aGUgd2lkdGggb2YgdGhlIGNvbHVtbiBoZWFkZXJcclxuXHJcbiAgLy9yZXNpemUgdGhlIHdpZHRoIG9mIGV2ZXJ5IGNlbGwgaW4gdGhlIGNvbHVtblxyXG4gIHZhciBjb2x1bW5DZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWVsZElucHV0JyArIHJlc2l6ZUZpZWxkKTtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNvbHVtbkNlbGxzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIGNvbHVtbkNlbGxzW2ldLnN0eWxlLndpZHRoID0gKG5ld1dpZHRoICsgOCkgKyAncHgnO1xyXG4gIH1cclxufTtcclxuXHJcbnZhciByZXNpemVEcmFnID0gZnVuY3Rpb24oZSlcclxue1xyXG4gIGlmKGUucGFnZVggPiByZXNpemVDb2x1bW5MZWZ0ICsgTUlOX0NPTFVNTl9XSURUSCArIEdSSVBTX1dJRFRIKVxyXG4gIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUubGVmdCA9IGUucGFnZVggKyAncHgnOyAgICAgIC8vbW92ZSB0aGUgcmVzaXplIGxpbmUgYXMgdGhlIHVzZXIgZHJhZ3MgaXRcclxuICB9XHJcbn07IiwidmFyIGZpZWxkTWVudUNvbnRyb2xsZXIgPVxyXG57XHJcbiAgZGlzcGxheUZpZWxkTWVudTogZnVuY3Rpb24oZmllbGROYW1lLCB4LCB5KSBcclxuICB7XHJcbiAgICB2YXIgZmllbGQgPSBwcm9qZWN0LmdldEZpZWxkKGZpZWxkTmFtZSk7XHJcbiAgICAgIFxyXG4gICAgdGhpcy5tZW51ID0gbmV3IEZpZWxkTWVudShmaWVsZCwgc3ByZWFkU2hlZXQuZmllbGRzKTtcclxuICAgIFxyXG4gICAgZmllbGRNZW51Vmlldy5yZW5kZXIodGhpcy5tZW51LCB4LCB5KTsgICAgXHJcbiAgfSxcclxuICBoYW5kbGVDbGljazogZnVuY3Rpb24obWVudUl0ZW1JRClcclxuICB7XHJcbiAgICB2YXIgY2xpY2tlZCA9IHRoaXMubWVudS5nZXRNZW51SXRlbShtZW51SXRlbUlELCB0aGlzLm1lbnUpO1xyXG4gICAgdmFyIHBhcmVudCA9IHRoaXMubWVudS5nZXRNZW51SXRlbVBhcmVudChtZW51SXRlbUlELCB0aGlzLm1lbnUpO1xyXG4gIFxyXG4gICAgaWYoY2xpY2tlZC5maWVsZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZSBtZW51IGl0ZW0gZG9lc24ndCBoYXZlIGEgZmllbGQgdGhlbiBpZ25vcmUgaXRcclxuICAgIHtcclxuICAgICAgdmFyIGZpZWxkID0gcHJvamVjdC5nZXRGaWVsZChjbGlja2VkLmZpZWxkLm5hbWUpO1xyXG4gICAgICBmaWVsZFtjbGlja2VkLnZhck5hbWVdID0gY2xpY2tlZC52YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NldCB2YWx1ZSBmb3IgdGhlIGZpZWxkIGluIHRoZSBtb2RlbCBiYXNlZCBvbiB0aGUgY2xpY2tlZCBtZW51IGl0ZW1cclxuICAgIFxyXG4gICAgICBmaWVsZE1lbnVWaWV3LnNldENoZWNrbWFya3MobWVudUl0ZW1JRCwgcGFyZW50Lml0ZW1zKTtcclxuXHJcbiAgICAgIGlmKHBhcmVudCA9PT0gdGhpcy5tZW51KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgdGhpcyBpcyBhIHRvcCBsZXZlbCBtZW51IGl0ZW0gdGhlbiB1cGRhdGUgdGhlIGZvcm1hdHRpbmcsIHNpbmNlIHdlIG9ubHkgd2FudCB0byBkbyB0aGlzIG9uY2UgcGVyIGNsaWNrXHJcbiAgICAgIHtcclxuICAgICAgICBzcHJlYWRTaGVldC51cGRhdGVOdW1iZXJGaWVsZEZvcm1hdHRpbmcoZmllbGQpO1xyXG4gICAgICB9XHJcbiAgICB9ICAgIFxyXG4gIH1cclxufTsiLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpXHJcbntcclxuICBzY3JvbGxCYXJXaWR0aCA9IGdldFNjcm9sbEJhcldpZHRoKCk7ICAvL2dldCB0aGUgc2Nyb2xsYmFyIHdpZHRoIGZvciB0aGUgYnJvd3NlciwgdG8gdXNlIGxhdGVyIGZvciBzaXppbmcgb3RoZXIgZWxlbWVudHMgXHJcbiAgaG1zLmluaXQoKTtcclxufSk7XHJcblxyXG52YXIgaG1zID0gXHJcbntcclxuICBpbml0OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcHJvamVjdHMuaW5pdChmdW5jdGlvbihwcm9qZWN0cykgeyBoZWFkZXJWaWV3LnJlbmRlcihwcm9qZWN0cyk7IH0pOyAgIFxyXG4gIH0sXHJcbiAgb3BlblByb2plY3Q6IGZ1bmN0aW9uKHByb2plY3RJRClcclxuICB7XHJcbiAgICBwcm9qZWN0cy5vcGVuUHJvamVjdChwcm9qZWN0SUQsIGZ1bmN0aW9uKHRyZWUpXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3QudHJlZSA9IHRyZWU7XHJcbiAgICAgIHNwcmVhZFNoZWV0LmRpc3BsYXkoKTsgICAgICBcclxuICAgIH0pO1xyXG4gICAgaWYodGhpcy52aWV3KSB7IHRoaXMudmlldy5kZXN0cm95KCk7IH1cclxuICAgIHRoaXMudmlldyA9IHNwcmVhZFNoZWV0VmlldzsgICAgICAgXHJcbiAgfSxcclxuICBzYXZlVG9EYXRhYmFzZTogZnVuY3Rpb24oKSB7IHByb2plY3Quc2F2ZVRvRGF0YWJhc2UoKTsgfSxcclxuICBzd2l0Y2hWaWV3OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgaWYodGhpcy52aWV3ID09PSBzcHJlYWRTaGVldFZpZXcpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMudmlldy5kZXN0cm95KCk7XHJcbiAgICAgIHRoaXMudmlldyA9IHRyZWVWaWV3O1xyXG4gICAgICB0cmVlVmlldy5kaXNwbGF5KCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHRoaXMudmlldyA9PT0gdHJlZVZpZXcpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMudmlldy5kZXN0cm95KCk7XHJcbiAgICAgIHRoaXMudmlldyA9IHNwcmVhZFNoZWV0VmlldztcclxuICAgICAgc3ByZWFkU2hlZXQuZGlzcGxheSgpOyAgICAgIFxyXG4gICAgfVxyXG4gIH0sXHJcbiAgY3JlYXRlTmV3UHJvamVjdDogZnVuY3Rpb24obmV3UHJvamVjdE5hbWUpXHJcbiAgeyAgXHRcclxuICAgIHByb2plY3RzLmNyZWF0ZU5ld1Byb2plY3QobmV3UHJvamVjdE5hbWUpO1xyXG4gIFx0XHJcbiAgICB0aGlzLnZpZXcuZGVzdHJveSgpO1xyXG4gICAgdGhpcy52aWV3ID0gc3ByZWFkU2hlZXRWaWV3O1xyXG4gICAgc3ByZWFkU2hlZXQuZGlzcGxheSgpOyAgICAgIFxyXG4gIH0sXHJcbiAgbmV4dFByb2plY3RJRDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHJldHVybiBwcm9qZWN0cy5uZXh0UHJvamVjdElEKys7XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHNjcm9sbEJhcldpZHRoO1xyXG52YXIgZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbigpIFxyXG57XHJcbiAgdmFyIGRpdiwgd2lkdGg7XHJcbiAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZGl2LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPVwid2lkdGg6NTBweDtoZWlnaHQ6NTBweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi01MHB4O3RvcDotNTBweDtvdmVyZmxvdzphdXRvO1wiPjxkaXYgc3R5bGU9XCJ3aWR0aDoxcHg7aGVpZ2h0OjEwMHB4O1wiPjwvZGl2PjwvZGl2Pic7XHJcbiAgZGl2ID0gZGl2LmZpcnN0Q2hpbGQ7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xyXG4gIHdpZHRoID0gZGl2Lm9mZnNldFdpZHRoIC0gZGl2LmNsaWVudFdpZHRoO1xyXG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KTtcclxuICByZXR1cm4gd2lkdGg7XHJcbn07IiwidmFyIHNwcmVhZFNoZWV0ID0gXHJcbntcclxuICBkaXNwbGF5OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcHJvamVjdC5jbGVhbnNlRGF0YSgpOyAgICAgICAgICAgICAgICAgIC8vcmVxdWlyZWQgdG8gcmVtb3ZlIGNpcmN1bGFyIHJlZmVyZW5jZXMgdGhhdCBvdGhlciB2aWV3cyBtYXkgYWRkXHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVuZGVyKHByb2plY3QudHJlZSk7XHJcbiAgfSxcclxuICBmaWVsZHM6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC5maWVsZHMoKTtcclxuICB9LFxyXG4gIHRyZWU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC50cmVlO1xyXG4gIH0sXHJcbiAgdXBkYXRlRmllbGRWYWx1ZTogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQpXHJcbiAge1xyXG4gICAgdmFyIG5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgXHJcbiAgICBpZihub2RlKVxyXG4gICAge1xyXG4gICAgICBpZighbm9kZS52YWx1ZXMpIHsgbm9kZS52YWx1ZXMgPSB7fTsgfVxyXG4gICAgICBub2RlLnZhbHVlc1tmaWVsZE5hbWVdID0gc3ByZWFkU2hlZXRWaWV3LmdldEZpZWxkVmFsdWUoZmllbGROYW1lLCBub2RlSUQpOyAgICAgXHJcbiAgICB9ICBcclxuICBcclxuICAgIC8vVE9ETzogc2hvdWxkIHBlcmZvcm0gdGhlIGFnZ3JlZ2F0aW9uIGJhc2VkIG9uIHRoZSBmaWVsZCBzZXR0aW5ncyBmb3IgYWdncmVnYXRpbmcgdGhpcyBmaWVsZFxyXG4gICAgcHJvamVjdC50cmVlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIFxyXG4gICAge1xyXG4gICAgICBhZ2dyZWdhdGVfYW55KGNoaWxkLCBmaWVsZE5hbWUpO1xyXG4gICAgfSk7ICAgIFxyXG4gIH0sXHJcbiAgcmF3VmFsdWU6IGZ1bmN0aW9uKGZpZWxkTmFtZSwgbm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShwYXJzZUludChub2RlSUQpKTtcclxuICAgIFxyXG4gICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbZmllbGROYW1lXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIG5vZGUudmFsdWVzW2ZpZWxkTmFtZV07XHJcbiAgICB9ICBcclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGZvcm1hdHRlZFZhbHVlOiBmdW5jdGlvbihmaWVsZCwgbm9kZSlcclxuICB7XHJcbiAgICBpZihub2RlLnZhbHVlcyAmJiBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIEZpZWxkLmZvcm1hdFZhbHVlKGZpZWxkLCBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgIHByb2plY3QuYWRkRmllbGQoZmllbGROYW1lKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5hZGRGaWVsZChmaWVsZE5hbWUpO1xyXG4gIH0sXHJcbiAgaGFzQ2hpbGRyZW46IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuICFwcm9qZWN0LmlzTm9kZUNoaWxkbGVzcyhub2RlKTtcclxuICB9LFxyXG4gIGNoaWxkcmVuSGlkZGVuOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChub2RlKTtcclxuICB9LFxyXG4gIG1vdmVOb2RlOiBmdW5jdGlvbihub2RlSUQsIG5ld1BhcmVudElEKVxyXG4gIHtcclxuICAgIHZhciBuZXdQYXJlbnROb2RlID0gcHJvamVjdC5maW5kTm9kZShuZXdQYXJlbnRJRCk7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICBcclxuICAgIHNwcmVhZFNoZWV0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgICBwcm9qZWN0LmFkZE5vZGUobm9kZSwgbmV3UGFyZW50Tm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldC5hZGROb2RlKG5vZGUsIG5ld1BhcmVudE5vZGUpOyAgICBcclxuICB9LFxyXG4gIHJlbW92ZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIHBhcmVudE5vZGUgPSBwcm9qZWN0LmZpbmRQYXJlbnQobm9kZS5pZCk7XHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5yZW1vdmVOb2RlLCBub2RlKTtcclxuICAgIHByb2plY3QucmVtb3ZlTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZWRyYXdOb2RlQ29udGVudChwYXJlbnROb2RlKTsgICAgICAgICAgLy9pZiB0aGUgcGFyZW50IGlzIGNoaWxkbGVzcyBub3csIHRoZW4gaGlkZSB0aGUgb2xkIHBhcmVudCdzIGV4cGFuZC9jb2xsYXBzZSBpY29uICAgICBcclxuICB9LFxyXG4gIGRlbGV0ZU5vZGU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICAgIHNwcmVhZFNoZWV0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgfSxcclxuICBhZGROb2RlOiBmdW5jdGlvbihub2RlLCBwYXJlbnROb2RlKVxyXG4gIHtcclxuICAgIGlmKHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKHBhcmVudE5vZGUpKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAge1xyXG4gICAgICBzcHJlYWRTaGVldC5leHBhbmROb2RlKHBhcmVudE5vZGUpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQocGFyZW50Tm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuaW5zZXJ0Tm9kZUFmdGVyKG5vZGUsIHBhcmVudE5vZGUpOyAgICAgIC8vYWRkIHRoZSBtb3ZlZCBub2RlIGFuZCBpdHMgZGVzY2VuZGFudHMgdG8gdGhlIG5ldyBwYXJlbnQgaW4gdGhlIHZpZXcgIFxyXG4gIH0sXHJcbiAgY29weU5vZGU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgc291cmNlTm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICAgIHZhciBuZXdOb2RlID0gcHJvamVjdC5jbG9uZU5vZGUoc291cmNlTm9kZSk7XHJcbiAgICBwcm9qZWN0Lmluc2VydE5vZGUobmV3Tm9kZSwgc291cmNlTm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuaW5zZXJ0Tm9kZUJlZm9yZShuZXdOb2RlLCBzb3VyY2VOb2RlKTsgICAgXHJcbiAgfSxcclxuICBleHBhbmROb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHByb2plY3QuZXhwYW5kTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5leHBhbmROb2RlKG5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXRWaWV3LnJlZHJhd05vZGVDb250ZW50KG5vZGUpOyAgICAgIFxyXG4gIH0sXHJcbiAgY29sbGFwc2VOb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHByb2plY3QudHJhdmVyc2VEZXNjZW5kYW50cyhwcm9qZWN0LmdldENoaWxkcmVuLCBzcHJlYWRTaGVldFZpZXcucmVtb3ZlTm9kZSwgbm9kZSk7ICAgIFxyXG4gICAgcHJvamVjdC5jb2xsYXBzZU5vZGUobm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQobm9kZSk7ICAgICBcclxuICB9LFxyXG4gIHRvZ2dsZU5vZGU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICAgIFxyXG4gICAgaWYocHJvamVjdC5pc05vZGVFeHBhbmRlZChub2RlKSlcclxuICAgIHtcclxuICAgICAgc3ByZWFkU2hlZXQuY29sbGFwc2VOb2RlKG5vZGUpOyAgICAgICAgICAgICAgICBcclxuICAgIH1cclxuICAgIGVsc2UgaWYocHJvamVjdC5pc05vZGVDb2xsYXBzZWQobm9kZSkpXHJcbiAgICB7XHJcbiAgICAgIHNwcmVhZFNoZWV0LmV4cGFuZE5vZGUobm9kZSk7IFxyXG4gICAgfSAgXHJcbiAgfSxcclxuICB1cGRhdGVOb2RlTmFtZTogZnVuY3Rpb24obm9kZUlELCBuZXdOYW1lKVxyXG4gIHtcclxuICAgIHByb2plY3QuZmluZE5vZGUobm9kZUlEKS5uYW1lID0gbmV3TmFtZTsgICAgXHJcbiAgfSxcclxuICB1cGRhdGVOdW1iZXJGaWVsZEZvcm1hdHRpbmc6IGZ1bmN0aW9uKGZpZWxkKVxyXG4gIHtcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgZnVuY3Rpb24obm9kZSlcclxuICAgIHsgICAgICBcclxuICAgICAgaWYobm9kZS52YWx1ZXMpXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSBGaWVsZC5mb3JtYXRWYWx1ZShmaWVsZCwgTnVtYmVyKG5vZGUudmFsdWVzW2ZpZWxkLm5hbWVdKSk7ICAgICAgICAgICAgICAgIC8vZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBtb2RlbFxyXG4gICAgICAgIHNwcmVhZFNoZWV0Vmlldy51cGRhdGVGaWVsZFZhbHVlKGZpZWxkLm5hbWUsIG5vZGUuaWQsIHZhbHVlKTtcclxuICAgICAgfSAgICAgIFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBlbmFibGVEcmFnZ2luZzogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZywgbm9kZSk7ICAgIFxyXG4gIH0gIFxyXG59OyIsInZhciBGaWVsZCA9IGZ1bmN0aW9uKG5hbWUpXHJcbntcclxuICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gIHRoaXMuZGF0YXR5cGUgPSBGaWVsZC5OVU1CRVI7XHJcbiAgdGhpcy5mb3JtYXQgPSBGaWVsZC5OVU1CRVJfRk9STUFUO1xyXG4gIHRoaXMucHJlY2lzaW9uID0gMjtcclxuICB0aGlzLmFnZ190eXBlID0gRmllbGQuTk9fQUdHUkVHQVRJT047XHJcbiAgdGhpcy5hZ2dfcXR5X2ZpZWxkID0gbnVsbDtcclxufTtcclxuXHJcbkZpZWxkLk5VTUJFUiA9ICcwJztcclxuRmllbGQuU1RSSU5HID0gJzEnO1xyXG5GaWVsZC5DSE9JQ0UgPSAnMic7XHJcblxyXG5GaWVsZC5OT19BR0dSRUdBVElPTiA9ICcwJztcclxuRmllbGQuU1VNX0FOWV9BR0dSRUdBVElPTiA9ICcxJztcclxuXHJcbkZpZWxkLk5VTUJFUl9GT1JNQVQgPSAnMCc7XHJcbkZpZWxkLlBFUkNFTlRfRk9STUFUID0gJzEnO1xyXG5GaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVCA9ICcyJztcclxuXHJcbkZpZWxkLmZvcm1hdFZhbHVlID0gZnVuY3Rpb24oZmllbGQsIHZhbHVlKVxyXG57XHJcbiAgaWYoZmllbGQuZGF0YXR5cGUgPT09IEZpZWxkLk5VTUJFUilcclxuICB7XHJcbiAgICB2YWx1ZSA9IE51bWJlcih2YWx1ZSk7ICAgICAgLy9UT0RPOiBoYW5kbGUgY2FzZSB3aGVyZSB2YWx1ZSBkb2Vzbid0IHBhcnNlIHRvIGEgbnVtYmVyXHJcbiAgICBcclxuICAgIGlmKGZpZWxkLmZvcm1hdCA9PT0gRmllbGQuTlVNQkVSX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLnRvRml4ZWQoZmllbGQucHJlY2lzaW9uKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5QRVJDRU5UX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuICgxMDAuMCAqIHZhbHVlKS50b0ZpeGVkKGZpZWxkLnByZWNpc2lvbikgKyAnJSc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKGZpZWxkLmZvcm1hdCA9PT0gRmllbGQuU0NJRU5USUZJQ19GT1JNQVQpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiB2YWx1ZS50b0V4cG9uZW50aWFsKGZpZWxkLnByZWNpc2lvbik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVsc2UgaWYoZmllbGQuZGF0YXR5cGUgPT09IEZpZWxkLlNUUklORylcclxuICB7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfSBcclxuICBlbHNlIGlmKGZpZWxkLmRhdGF0eXBlID09PSBGaWVsZC5DSE9JQ0UpXHJcbiAge1xyXG4gICAgLy9UT0RPOiBpbXBsZW1lbnRcclxuICB9ICAgICAgXHJcbn07ICAiLCJ2YXIgRmllbGRNZW51ID0gZnVuY3Rpb24oZmllbGQsIGZpZWxkcylcclxue1xyXG4gIHZhciBudW1iZXJJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ051bWJlcicsIEZpZWxkLk5VTUJFUiwgJ2RhdGF0eXBlJywgZmllbGQpO1xyXG4gIHZhciBmb3JtYXRJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ0Zvcm1hdCcpO1xyXG4gIFxyXG4gIHZhciBudW1iZXJGb3JtYXRJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ051bWJlcicsIEZpZWxkLk5VTUJFUl9GT1JNQVQsICdmb3JtYXQnLCBmaWVsZCk7XHJcbiAgbnVtYmVyRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCcwJywgMCwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgdmFyIGRpc3BsYXlTdHJpbmcgPSAnMC4nO1xyXG4gIGZvcih2YXIgaSA9IDE7IGkgPCAxMTsgaSsrKVxyXG4gIHtcclxuICAgIGRpc3BsYXlTdHJpbmcgKz0gJzAnO1xyXG4gICAgbnVtYmVyRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKGRpc3BsYXlTdHJpbmcsIGksICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIH1cclxuICBmb3JtYXRJdGVtLml0ZW1zLnB1c2gobnVtYmVyRm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIHBlcmNlbnRGb3JtYXRJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ1BlcmNlbnQnLCBGaWVsZC5QRVJDRU5UX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKTtcclxuICBwZXJjZW50Rm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCcwJScsIDAsICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIHZhciBkaXNwbGF5U3RyaW5nID0gJzAuJztcclxuICBmb3IodmFyIGkgPSAxOyBpIDwgMTE7IGkrKylcclxuICB7XHJcbiAgICBkaXNwbGF5U3RyaW5nICs9ICcwJztcclxuICAgIHBlcmNlbnRGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oZGlzcGxheVN0cmluZyArICclJywgaSwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgfVxyXG4gIGZvcm1hdEl0ZW0uaXRlbXMucHVzaChwZXJjZW50Rm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIHNjaWVudGlmaWNGb3JtYXRJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ1NjaWVudGlmaWMnLCBGaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKTtcclxuICBzY2llbnRpZmljRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCcwZSswJywgMCwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgdmFyIGRpc3BsYXlTdHJpbmcgPSAnMC4nO1xyXG4gIGZvcih2YXIgaSA9IDE7IGkgPCAxMTsgaSsrKVxyXG4gIHtcclxuICAgIGRpc3BsYXlTdHJpbmcgKz0gJzAnO1xyXG4gICAgc2NpZW50aWZpY0Zvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgRmllbGRNZW51SXRlbShkaXNwbGF5U3RyaW5nICsgJ2UrMCcsIGksICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIH1cclxuICBmb3JtYXRJdGVtLml0ZW1zLnB1c2goc2NpZW50aWZpY0Zvcm1hdEl0ZW0pOyAgXHJcbiAgXHJcbiAgbnVtYmVySXRlbS5pdGVtcy5wdXNoKGZvcm1hdEl0ZW0pO1xyXG4gIFxyXG4gIHZhciBhZ2dyZWdhdGlvbkl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnQWdncmVnYXRpb24nKTtcclxuICBhZ2dyZWdhdGlvbkl0ZW0uaXRlbXMucHVzaChuZXcgRmllbGRNZW51SXRlbSgnTm8gQWdncmVnYXRpb24nLCBGaWVsZC5OT19BR0dSRUdBVElPTiwgJ2FnZ190eXBlJywgZmllbGQpKTtcclxuICBcclxuICB2YXIgc3VtQW55QWdnSXRlbSA9IG5ldyBGaWVsZE1lbnVJdGVtKCdTdW0gYW55IGRlZmluZWQgY2hpbGRyZW4nLCBGaWVsZC5TVU1fQU5ZX0FHR1JFR0FUSU9OLCAnYWdnX3R5cGUnLCBmaWVsZCk7XHJcbiAgXHJcbiAgZm9yKHZhciBpbmRleCBpbiBmaWVsZHMpXHJcbiAge1xyXG4gICAgdmFyIGYgPSBmaWVsZHNbaW5kZXhdO1xyXG4gICAgXHJcbiAgICBpZihmLm5hbWUgIT0gZmllbGQubmFtZSlcclxuICAgIHtcclxuICAgICAgc3VtQW55QWdnSXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKGYubmFtZSwgZi5uYW1lLCAnYWdnX3F0eV9maWVsZCcsIGZpZWxkKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGFnZ3JlZ2F0aW9uSXRlbS5pdGVtcy5wdXNoKHN1bUFueUFnZ0l0ZW0pO1xyXG4gIG51bWJlckl0ZW0uaXRlbXMucHVzaChhZ2dyZWdhdGlvbkl0ZW0pO1xyXG4gIFxyXG4gIHRoaXMuaXRlbXMgPSBbXTtcclxuICB0aGlzLml0ZW1zLnB1c2gobnVtYmVySXRlbSk7XHJcbiAgdGhpcy5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCdUZXh0JywgRmllbGQuU1RSSU5HLCAnZGF0YXR5cGUnLCBmaWVsZCkpO1xyXG4gIC8vVE9ETzogdGhpcy5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCdDaG9pY2UnLCBGaWVsZC5DSE9JQ0UsICdkYXRhdHlwZScsIGZpZWxkKSk7ICBcclxufTtcclxuXHJcbkZpZWxkTWVudS5wcm90b3R5cGUuZ2V0TWVudUl0ZW0gPSBmdW5jdGlvbihpZCwgbWVudUl0ZW0pXHJcbntcclxuICBpZihpZCA9PT0gbWVudUl0ZW0uaWQpXHJcbiAge1xyXG4gICAgcmV0dXJuIG1lbnVJdGVtO1xyXG4gIH1cclxuICBlbHNlIGlmKG1lbnVJdGVtLml0ZW1zICYmIG1lbnVJdGVtLml0ZW1zLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgdmFyIGZvdW5kO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG1lbnVJdGVtLml0ZW1zLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBmb3VuZCA9IHRoaXMuZ2V0TWVudUl0ZW0oaWQsIG1lbnVJdGVtLml0ZW1zW2ldKTtcclxuICAgICAgaWYoZm91bmQpIHsgcmV0dXJuIGZvdW5kOyB9XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuRmllbGRNZW51LnByb3RvdHlwZS5nZXRNZW51SXRlbVBhcmVudCA9IGZ1bmN0aW9uKGlkLCBtZW51SXRlbSlcclxue1xyXG4gIGlmKG1lbnVJdGVtLml0ZW1zICYmIG1lbnVJdGVtLml0ZW1zLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG1lbnVJdGVtLml0ZW1zLmxlbmd0aDsgaSsrKVxyXG4gICAgeyBcclxuICAgICAgaWYobWVudUl0ZW0uaXRlbXNbaV0uaWQgPT09IGlkKVxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIG1lbnVJdGVtO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIHZhciBmb3VuZCA9IHRoaXMuZ2V0TWVudUl0ZW1QYXJlbnQoaWQsIG1lbnVJdGVtLml0ZW1zW2ldKTtcclxuICAgICAgICBpZihmb3VuZCkgeyByZXR1cm4gZm91bmQ7IH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufTsiLCJ2YXIgRmllbGRNZW51SXRlbSA9IGZ1bmN0aW9uKGRpc3BsYXksIHZhbHVlLCB2YXJOYW1lLCBmaWVsZClcclxue1xyXG4gIHRoaXMuZGlzcGxheSA9IGRpc3BsYXk7XHJcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gIHRoaXMudmFyTmFtZSA9IHZhck5hbWU7XHJcbiAgdGhpcy5maWVsZCA9IGZpZWxkO1xyXG4gIHRoaXMuaXRlbXMgPSBbXTtcclxuICB0aGlzLmlkID0gRmllbGRNZW51SXRlbS5pZCsrO1xyXG4gIHRoaXMucGFyZW50ID0gLTE7XHJcblxyXG4gIGlmKGZpZWxkKVxyXG4gIHtcclxuICAgIHRoaXMuY2hlY2tlZCA9IGZpZWxkW3Zhck5hbWVdID09PSB2YWx1ZTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHRoaXMuY2hlY2tlZCA9IGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbkZpZWxkTWVudUl0ZW0uaWQgPSAwOyIsInZhciBwcm9qZWN0ID1cclxue1xyXG4gIHNhdmVUb0RhdGFiYXNlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJC5hamF4KHsgdHlwZTogJ1BPU1QnLCB1cmw6ICcvYXBpL3RyZWUnLCBkYXRhVHlwZTogJ2pzb24nLCBkYXRhOiB7IGpzb246IEpTT04uc3RyaW5naWZ5KHRoaXMudHJlZSkgfSB9KTtcclxuICB9LFxyXG4gIGZpZWxkczogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLnRyZWUuZmllbGRzO1xyXG4gIH0sXHJcbiAgY2xlYW5zZURhdGE6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB0aGlzLnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIGZ1bmN0aW9uKG5vZGUpXHJcbiAgICB7XHJcbiAgICAgIGlmKCFub2RlLmNoaWxkcmVuKSB7IG5vZGUuY2hpbGRyZW4gPSBbXTsgfVxyXG4gICAgICBkZWxldGUgbm9kZS5wYXJlbnQ7XHJcbiAgICB9KTsgICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgIHRoaXMudHJlZS5maWVsZHMucHVzaChuZXcgRmllbGQoZmllbGROYW1lKSk7XHJcbiAgfSxcclxuICBnZXRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSBpbiB0aGlzLnRyZWUuZmllbGRzKVxyXG4gICAge1xyXG4gICAgICB2YXIgZmllbGQgPSB0aGlzLnRyZWUuZmllbGRzW2ldO1xyXG4gICAgICBpZihmaWVsZC5uYW1lID09PSBmaWVsZE5hbWUpXHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gZmllbGQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHJlbW92ZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIHBhcmVudE5vZGUgPSB0aGlzLmZpbmRQYXJlbnQobm9kZS5pZCk7XHJcbiAgXHJcbiAgICBpZihwYXJlbnROb2RlKVxyXG4gICAge1xyXG4gICAgICBwYXJlbnROb2RlLmNoaWxkcmVuLnNwbGljZShwYXJlbnROb2RlLmNoaWxkcmVuLmluZGV4T2Yobm9kZSksIDEpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICB0aGlzLnRyZWUuY2hpbGRyZW4uc3BsaWNlKHRoaXMudHJlZS5jaGlsZHJlbi5pbmRleE9mKG5vZGUpLCAxKTsgIFxyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGFkZE5vZGU6IGZ1bmN0aW9uKG5vZGUsIHBhcmVudE5vZGUpXHJcbiAge1xyXG4gICAgcGFyZW50Tm9kZS5jaGlsZHJlbi5wdXNoKG5vZGUpOyAgICAgICAgIC8vYWRkIHRoZSBtb3ZlZCBub2RlIHRvIGl0J3MgbmV3IHBhcmVudCBpbiB0aGUgbW9kZWxcclxuICAgIHByb2plY3Quc2V0RGVwdGhzKHBhcmVudE5vZGUpOyAgICAgICAgICAgICAvL3NldCB0aGUgbmV3IGRlcHRoIHZhbHVlcyBmb3IgdGhlIG1vdmVkIG5vZGVzICAgICAgIFxyXG4gIH0sXHJcbiAgc2V0RGVwdGhzOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIG5vZGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCwgaSlcclxuICAgIHtcclxuICAgICAgY2hpbGQuZGVwdGggPSBub2RlLmRlcHRoICsgMTtcclxuICAgICAgcHJvamVjdC5zZXREZXB0aHMoY2hpbGQpO1xyXG4gICAgfSk7XHJcbiAgfSxcclxuICBpbnNlcnROb2RlOiBmdW5jdGlvbihub2RlLCBzb3VyY2VOb2RlKVxyXG4gIHtcclxuICAgIHZhciBwYXJlbnROb2RlID0gdGhpcy5maW5kUGFyZW50KHNvdXJjZU5vZGUuaWQpO1xyXG4gICAgaWYocGFyZW50Tm9kZSlcclxuICAgIHtcclxuICAgICAgcGFyZW50Tm9kZS5jaGlsZHJlbi5zcGxpY2UocGFyZW50Tm9kZS5jaGlsZHJlbi5pbmRleE9mKHNvdXJjZU5vZGUpLCAwLCBub2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgdGhpcy50cmVlLmNoaWxkcmVuLnNwbGljZSh0aGlzLnRyZWUuY2hpbGRyZW4uaW5kZXhPZihzb3VyY2VOb2RlKSwgMCwgbm9kZSk7XHJcbiAgICB9ICAgICBcclxuICB9LFxyXG4gIGNsb25lTm9kZTogZnVuY3Rpb24oc291cmNlTm9kZSlcclxuICB7XHJcbiAgICB2YXIgbmV3Tm9kZSA9ICQuZXh0ZW5kKHRydWUsIHt9LCBzb3VyY2VOb2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jbG9uZSB0aGUgc291cmNlIG5vZGVcclxuICAgIHRoaXMudHJhdmVyc2UodGhpcy5nZXRDaGlsZHJlbiwgZnVuY3Rpb24obm9kZSkgeyBub2RlLmlkID0gcHJvamVjdC50cmVlLm5leHROb2RlSUQrKzsgfSwgbmV3Tm9kZSk7ICAvL2Fzc2lnbiB1bmlxdWUgaWRzIHRvIGVhY2ggbm9kZSBpbiB0aGUgY2xvbmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgcmV0dXJuIG5ld05vZGU7ICAgICBcclxuICB9LFxyXG4gIGV4cGFuZE5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgaWYobm9kZS5fY2hpbGRyZW4pXHJcbiAgICB7XHJcbiAgICAgIG5vZGUuY2hpbGRyZW4gPSBub2RlLl9jaGlsZHJlbjtcclxuICAgICAgbm9kZS5fY2hpbGRyZW4gPSBbXTsgXHJcbiAgICB9ICAgXHJcbiAgfSxcclxuICBmdWxseUV4cGFuZE5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgaWYobm9kZS5fY2hpbGRyZW4pXHJcbiAgICB7XHJcbiAgICAgIG5vZGUuY2hpbGRyZW4gPSBub2RlLl9jaGlsZHJlbjtcclxuICAgICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKHByb2plY3QuZnVsbHlFeHBhbmROb2RlKTtcclxuICAgICAgbm9kZS5fY2hpbGRyZW4gPSBbXTsgXHJcbiAgICB9ICAgXHJcbiAgfSwgIFxyXG4gIGNvbGxhcHNlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBpZihub2RlLmNoaWxkcmVuKVxyXG4gICAge1xyXG4gICAgICBub2RlLl9jaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XHJcbiAgICAgIG5vZGUuY2hpbGRyZW4gPSBbXTtcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBmdWxseUNvbGxhcHNlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBpZihub2RlLmNoaWxkcmVuKVxyXG4gICAge1xyXG4gICAgICBub2RlLl9jaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XHJcbiAgICAgIG5vZGUuX2NoaWxkcmVuLmZvckVhY2gocHJvamVjdC5mdWxseUNvbGxhcHNlTm9kZSk7XHJcbiAgICAgIG5vZGUuY2hpbGRyZW4gPSBbXTtcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICB0b2dnbGVFeHBhbnNpb246IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4pIFxyXG4gICAge1xyXG4gICAgICAgIG5vZGUuX2NoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjtcclxuICAgICAgICBub2RlLmNoaWxkcmVuID0gW107XHJcbiAgICB9IFxyXG4gICAgZWxzZSBpZiAobm9kZS5fY2hpbGRyZW4pIFxyXG4gICAge1xyXG4gICAgICAgIG5vZGUuY2hpbGRyZW4gPSBub2RlLl9jaGlsZHJlbjtcclxuICAgICAgICBub2RlLl9jaGlsZHJlbiA9IFtdO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGhhc0NoaWxkcmVuOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiAobm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgfHwgKG5vZGUuX2NoaWxkcmVuICYmIG5vZGUuX2NoaWxkcmVuLmxlbmd0aCA9PT0gMCk7XHJcbiAgfSwgIFxyXG4gIGlzTm9kZUNoaWxkbGVzczogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gKCFub2RlLmNoaWxkcmVuIHx8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSAmJiAoIW5vZGUuX2NoaWxkcmVuIHx8IG5vZGUuX2NoaWxkcmVuLmxlbmd0aCA9PT0gMCk7XHJcbiAgfSxcclxuICBpc05vZGVDb2xsYXBzZWQ6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuIG5vZGUuX2NoaWxkcmVuICYmIG5vZGUuX2NoaWxkcmVuLmxlbmd0aCA+IDA7XHJcbiAgfSxcclxuICBpc05vZGVFeHBhbmRlZDogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gbm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDA7XHJcbiAgfSxcclxuICBmaW5kTm9kZTogZnVuY3Rpb24obm9kZUlELCBzZWFyY2hOb2RlKVxyXG4gIHtcclxuICAgIGlmKCFzZWFyY2hOb2RlKSB7IHNlYXJjaE5vZGUgPSB0aGlzLnRyZWU7IH1cclxuICAgIFxyXG4gICAgaWYoc2VhcmNoTm9kZS5pZCA9PT0gbm9kZUlEKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gc2VhcmNoTm9kZTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgZm9yKHZhciBpIGluIHNlYXJjaE5vZGUuY2hpbGRyZW4pXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgZm91bmROb2RlID0gdGhpcy5maW5kTm9kZShub2RlSUQsIHNlYXJjaE5vZGUuY2hpbGRyZW5baV0pO1xyXG4gICAgICAgIGlmKGZvdW5kTm9kZSkgeyByZXR1cm4gZm91bmROb2RlOyB9XHJcbiAgICAgIH1cclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBmaW5kUGFyZW50OiBmdW5jdGlvbihub2RlSUQsIHNlYXJjaE5vZGUsIHBhcmVudClcclxuICB7XHJcbiAgICBpZighc2VhcmNoTm9kZSkgeyBzZWFyY2hOb2RlID0gdGhpcy50cmVlOyB9XHJcbiAgICBcclxuICAgIGlmKHNlYXJjaE5vZGUuaWQgPT09IG5vZGVJRClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHBhcmVudDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgZm9yKHZhciBpIGluIHNlYXJjaE5vZGUuY2hpbGRyZW4pXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgZm91bmRQYXJlbnQgPSB0aGlzLmZpbmRQYXJlbnQobm9kZUlELCBzZWFyY2hOb2RlLmNoaWxkcmVuW2ldLCBzZWFyY2hOb2RlKTtcclxuICAgICAgICBpZihmb3VuZFBhcmVudCkgeyByZXR1cm4gZm91bmRQYXJlbnQ7IH1cclxuICAgICAgfVxyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIHRyYXZlcnNlOiBmdW5jdGlvbihjaGlsZHJlbkZuLCB2aXNpdEZuLCBwYXJlbnQpXHJcbiAge1xyXG4gICAgaWYgKCFwYXJlbnQpIHsgcGFyZW50ID0gcHJvamVjdC50cmVlOyB9XHJcbiAgICB2aXNpdEZuKHBhcmVudCk7XHJcbiAgICBcclxuICAgIHZhciBjaGlsZHJlbiA9IGNoaWxkcmVuRm4ocGFyZW50KTtcclxuICAgIGZvciAodmFyIGkgaW4gY2hpbGRyZW4pIFxyXG4gICAge1xyXG4gICAgICBwcm9qZWN0LnRyYXZlcnNlKGNoaWxkcmVuRm4sIHZpc2l0Rm4sIGNoaWxkcmVuW2ldKTtcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICB0cmF2ZXJzZURlc2NlbmRhbnRzOiBmdW5jdGlvbihjaGlsZHJlbkZuLCB2aXNpdEZuLCBwYXJlbnQpXHJcbiAge1xyXG4gICAgaWYoIXBhcmVudCkgeyBwYXJlbnQgPSBwcm9qZWN0LnRyZWU7IH1cclxuICAgIHBhcmVudC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7IHByb2plY3QudHJhdmVyc2UoY2hpbGRyZW5GbiwgdmlzaXRGbiwgY2hpbGQpOyB9KTsgIFxyXG4gIH0sXHJcbiAgZ2V0Q2hpbGRyZW46IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuIG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwID8gbm9kZS5jaGlsZHJlbiA6IG51bGw7ICAgIFxyXG4gIH0gICBcclxufTsiLCJ2YXIgcHJvamVjdHMgPVxyXG57XHJcbiAgaW5pdDogZnVuY3Rpb24oZmluaXNoRm4pXHJcbiAgeyAgXHRcclxuICAgICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvcHJvamVjdHMnfSkuZG9uZShmdW5jdGlvbihkYXRhKSAgIC8vcmVhZCBwcm9qZWN0cyBmcm9tIHRoZSBzZXJ2ZXJcclxuICAgIHsgXHJcbiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgIGZpbmlzaEZuKGRhdGEucHJvamVjdHMpO1xyXG4gICAgfSk7ICAgICBcclxuICB9LFxyXG4gIGNyZWF0ZU5ld1Byb2plY3Q6IGZ1bmN0aW9uKG5ld1Byb2plY3ROYW1lKVxyXG4gIHtcclxuICBcdCQuYWpheCh7IHR5cGU6ICdQT1NUJywgdXJsOiAnL2FwaS9hZGRQcm9qZWN0P3Byb2plY3ROYW1lPScgKyBuZXdQcm9qZWN0TmFtZSB9KTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBuZXcgcHJvamVjdCB0byB0aGUgcHJvamVjdHMgZG9jdW1lbnQgaW4gdGhlIGRhdGFiYXNlXHJcbiAgXHRcclxuICAgIHByb2plY3QudHJlZSA9IHsgXCJwcm9qZWN0SURcIjogcHJvamVjdC5uZXh0UHJvamVjdElELCBcInByb2plY3ROYW1lXCI6IG5ld1Byb2plY3ROYW1lLCBcIm5hbWVcIjogbmV3UHJvamVjdE5hbWUsIFwidmVyc2lvblwiOiAxLCBcIm5leHROb2RlSURcIjogMiwgXCJkZXB0aFwiOiAwLCBcImZpZWxkc1wiOiBbXSwgXCJjaGlsZHJlblwiOiBbeyBcImlkXCI6IDEsIFwibmFtZVwiOiBuZXdQcm9qZWN0TmFtZSwgXCJkZXB0aFwiOiAxLCBcImNoaWxkcmVuXCI6IFtdIH1dIH07XHJcbiAgXHRwcm9qZWN0LnNhdmVUb0RhdGFiYXNlKCk7ICBcclxuICB9LFxyXG4gIG9wZW5Qcm9qZWN0OiBmdW5jdGlvbihwcm9qZWN0SUQsIGZpbmlzaEZuKVxyXG4gIHtcclxuICAgICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvdHJlZT9wcm9qZWN0SUQ9JyArIHByb2plY3RJRCB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpICAgICAgICAgICAgICAgLy9yZWFkIHRyZWUgZm9yIHRoZSBzZWxlY3RlZCBwcm9qZWN0IGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICB7XHJcbiAgICAgIGZpbmlzaEZuKGRhdGEpO1xyXG4gICAgfSk7ICAgICBcclxuICB9IFxyXG59OyIsInZhciBET1dOX0FSUk9XX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2Rvd24tYXJyb3cucG5nJztcclxudmFyIENIRUNLX01BUktfSU1BR0VfUEFUSCA9ICdpbWFnZXMvY2hlY2ttYXJrLnBuZyc7XHJcbnZhciBCTEFOS19NQVJLX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2JsYW5rbWFyay5wbmcnO1xyXG5cclxudmFyIEVOVEVSX0tFWSA9IDEzO1xyXG5cclxudmFyIEtFWV9VUF9BUlJPVyA9IDM4O1xyXG52YXIgS0VZX0RPV05fQVJST1cgPSA0MDtcclxudmFyIEtFWV9MRUZUX0FSUk9XID0gMzc7XHJcbnZhciBLRVlfUklHSFRfQVJST1cgPSAzOTtcclxuXHJcbnZhciBERUZBVUxUX05PREVfSU5QVVRfV0lEVEggPSAzOTA7IiwiZnVuY3Rpb24gZGVidWcoKSB7fVxyXG5cclxuZGVidWcucHJpbnQgPSBmdW5jdGlvbihvKVxyXG57XHJcbiAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkobywgbnVsbCwgJ1xcdCcpKTsgIFxyXG59O1xyXG5cclxuZGVidWcucHJpbnRUcmVlID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocHJvamVjdC50cmVlLCBudWxsLCAnXFx0JykpO1xyXG59OyIsInZhciBmaWVsZE1lbnVWaWV3ID0gXHJcbntcclxuICByZW5kZXI6IGZ1bmN0aW9uKGZpZWxkTWVudSwgeCwgeSlcclxuICB7XHJcbiAgICB2YXIgbWFya3VwID0gJzxkaXYgaWQ9XCJmaWVsZE1lbnVcIiBzdHlsZT1cImxlZnQ6JyArICh4LTEwKSArICdweDt0b3A6JyArICh5LTEwKSArICdweDtcIj4nO1xyXG4gICAgXHJcbiAgICBtYXJrdXAgKz0gdGhpcy5yZW5kZXJNZW51KGZpZWxkTWVudSk7XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSAnPC9kaXY+JztcclxuICAgIFxyXG4gICAgJCgnYm9keScpLmFwcGVuZCgkKG1hcmt1cCkpO1xyXG4gICAgJCgnI2ZpZWxkTWVudScpLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7ICQoJyNmaWVsZE1lbnUnKS5yZW1vdmUoKTsgfSk7ICBcclxuICB9LFxyXG4gIHJlbmRlck1lbnU6IGZ1bmN0aW9uKG1lbnUpXHJcbiAge1xyXG4gICAgdmFyIG1hcmt1cCA9ICc8dWw+JztcclxuICAgIFxyXG4gICAgbWVudS5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKG1lbnVJdGVtKVxyXG4gICAge1xyXG4gICAgICBtYXJrdXAgKz0gJzxsaSBvbmNsaWNrPVwiZmllbGRNZW51Q29udHJvbGxlci5oYW5kbGVDbGljaygnICsgbWVudUl0ZW0uaWQgKyAnKTtcIj4nO1xyXG4gIFxyXG4gICAgICB2YXIgY2hlY2tNYXJrQ2xhc3MgPSAndW5jaGVja2VkRmllbGRNZW51SXRlbSc7XHJcbiAgICAgIGlmKG1lbnVJdGVtLmZpZWxkICYmIG1lbnVJdGVtLmNoZWNrZWQpXHJcbiAgICAgIHtcclxuICAgICAgICBjaGVja01hcmtDbGFzcyA9ICdjaGVja2VkRmllbGRNZW51SXRlbSc7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIG1hcmt1cCArPSAnPGltZyBpZD1cIkZpZWxkTWVudUl0ZW0nICsgbWVudUl0ZW0uaWQgKyAnXCIgc3JjPVwiJyArIENIRUNLX01BUktfSU1BR0VfUEFUSCArICdcIiBjbGFzcz1cIicgKyBjaGVja01hcmtDbGFzcyArICdcIi8+JztcclxuICAgICAgbWFya3VwICs9IG1lbnVJdGVtLmRpc3BsYXk7XHJcbiAgICAgIFxyXG4gICAgICBpZihtZW51SXRlbS5pdGVtcyAmJiBtZW51SXRlbS5pdGVtcy5sZW5ndGggPiAwKVxyXG4gICAgICB7XHJcbiAgICAgICAgbWFya3VwICs9ICc8ZGl2IGNsYXNzPVwiYXJyb3dSaWdodFwiPjwvZGl2Pic7XHJcbiAgICAgICAgbWFya3VwICs9IGZpZWxkTWVudVZpZXcucmVuZGVyTWVudShtZW51SXRlbSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIG1hcmt1cCArPSAnPC9saT4nOyAgICAgIFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJldHVybiBtYXJrdXAgKyAnPC91bD4nOyAgICBcclxuICB9LFxyXG4gIHNldENoZWNrbWFya3M6IGZ1bmN0aW9uKG1lbnVJdGVtSUQsIHNpYmxpbmdzKVxyXG4gIHtcclxuICAgIHNpYmxpbmdzLmZvckVhY2goZnVuY3Rpb24oc2libGluZykgeyAkKCcjRmllbGRNZW51SXRlbScgKyBzaWJsaW5nLmlkKS5yZW1vdmVDbGFzcygnY2hlY2tlZEZpZWxkTWVudUl0ZW0nKS5hZGRDbGFzcygndW5jaGVja2VkRmllbGRNZW51SXRlbScpOyB9KTsgIC8vY2xlYXIgdGhlIGNoZWNrbWFya3MgZm9yIGFsbCBpdGVtIG9uIHRoZSBzYW1lIG1lbnUgbGV2ZWxcclxuICBcclxuICAgICQoJyNGaWVsZE1lbnVJdGVtJyArIG1lbnVJdGVtSUQpLnJlbW92ZUNsYXNzKCd1bmNoZWNrZWRGaWVsZE1lbnVJdGVtJykuYWRkQ2xhc3MoJ2NoZWNrZWRGaWVsZE1lbnVJdGVtJyk7ICAgICAgXHJcbiAgfVxyXG59OyIsInZhciBoZWFkZXJWaWV3ID0gXHJcbntcclxuICByZW5kZXI6IGZ1bmN0aW9uKHByb2plY3RzKVxyXG4gIHtcclxuICAgIHZhciBtYXJrdXAgPSAnPHNlbGVjdCBpZD1cInByb2plY3RTZWxlY3RvclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+JyArXHJcbiAgICAnPG9wdGlvbiBpZD1cInNlbGVjdFByb2plY3RPcHRpb25cIiB2YWx1ZT1cIjBcIj5TZWxlY3QgUHJvamVjdC4uLjwvb3B0aW9uPic7XHJcbiAgXHJcbiAgICBwcm9qZWN0cy5mb3JFYWNoKGZ1bmN0aW9uKHByb2plY3QpXHJcbiAgICB7XHJcbiAgICAgIG1hcmt1cCArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBwcm9qZWN0LmlkICsgJ1wiPicgKyBwcm9qZWN0Lm5hbWUgKyAnPC9vcHRpb24+JztcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgbWFya3VwICs9ICc8b3B0aW9uIGlkPVwibmV3UHJvamVjdE9wdGlvblwiIHZhbHVlPVwiLTFcIj5DcmVhdGUgTmV3IFByb2plY3QuLi48L29wdGlvbj48L3NlbGVjdD4nXHJcbiAgICArICc8aW5wdXQgaWQ9XCJlZGl0TmV3UHJvamVjdE5hbWVJbnB1dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+PC9pbnB1dD4nXHJcbiAgICArICc8YSBocmVmPVwiI1wiIGlkPVwic2F2ZS1kYXRhYmFzZS1idXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiPlNhdmUgdG8gRGF0YWJhc2U8L2E+J1xyXG4gICAgKyAnPGEgaHJlZj1cIiNcIiBpZD1cInN3aXRjaFZpZXdCdXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiPlN3aXRjaCBWaWV3PC9hPic7XHJcbiAgICAvL21hcmt1cCArPSAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGlkPVwic2F2ZS1maWxlLWJ1dHRvblwiIG9uY2xpY2s9XCJzYXZlTG9jYWxseSgpXCI+U2F2ZSBhcyBGaWxlPC9hPic7ICAgIFxyXG4gICAgXHJcbiAgICAkKCcjaGVhZGVyJykuaHRtbChtYXJrdXApO1xyXG4gICAgXHJcbiAgICAvL2V2ZW50IGhhbmRsZXJzXHJcbiAgICAkKCcjcHJvamVjdFNlbGVjdG9yJykuY2hhbmdlKGZ1bmN0aW9uKCkgeyBoZWFkZXJWaWV3LnNlbGVjdFByb2plY3QoJCh0aGlzKSk7IH0pO1xyXG4gICAgJCgnI3NhdmUtZGF0YWJhc2UtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7IGhtcy5zYXZlVG9EYXRhYmFzZSgpOyB9KTtcclxuICAgICQoJyNzd2l0Y2hWaWV3QnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7IGhtcy5zd2l0Y2hWaWV3KCk7IH0pO1xyXG4gICAgJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0Jykua2V5dXAoZnVuY3Rpb24oZSkgeyBoZWFkZXJWaWV3LmNyZWF0ZU5ld1Byb2plY3QoZSk7IH0pO1xyXG4gIH0sXHJcbiAgc2VsZWN0UHJvamVjdDogZnVuY3Rpb24ocHJvamVjdFNlbGVjdG9yKVxyXG4gIHtcclxuICAgIGlmKHByb2plY3RTZWxlY3Rvci5maW5kKFwiOnNlbGVjdGVkXCIpLmF0dHIoJ2lkJykgPT09IFwibmV3UHJvamVjdE9wdGlvblwiKVxyXG4gICAge1xyXG4gICAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS52YWwoXCJUeXBlIE5ldyBQcm9qZWN0IE5hbWUgYW5kIFByZXNzIEVudGVyIHRvIENyZWF0ZVwiKTtcclxuICAgICAgJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0Jykuc2hvdygpLmZvY3VzKCkuc2VsZWN0KCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICQoJyNzZWxlY3RQcm9qZWN0T3B0aW9uJykucmVtb3ZlKCk7ICAgICAvL3JlbW92ZSB0aGUgc2VsZWN0IHByb2plY3Qgb3B0aW9uLCBvbmNlIHRoZSB1c2VyIHNlbGVjdHMgYSBwcm9qZWN0ICAgICAgXHJcbiAgICAgIGhtcy5vcGVuUHJvamVjdChwcm9qZWN0U2VsZWN0b3IudmFsKCkpO1xyXG4gICAgfSAgICAgICBcclxuICB9LFxyXG4gIGNyZWF0ZU5ld1Byb2plY3Q6IGZ1bmN0aW9uKGUpXHJcbiAge1xyXG4gICAgaWYoZS5rZXlDb2RlID09IEVOVEVSX0tFWSlcclxuICAgIHtcclxuICAgIFx0JCgnI3NlbGVjdFByb2plY3RPcHRpb24nKS5yZW1vdmUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSB0aGUgc2VsZWN0IHByb2plY3Qgb3B0aW9uLCBvbmNlIHRoZSB1c2VyIHNlbGVjdHMgYSBwcm9qZWN0IFxyXG4gICAgXHRcclxuICAgIFx0dmFyIG5ld1Byb2plY3ROYW1lID0gJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0JykudmFsKCk7XHJcbiAgICBcdCQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLmhpZGUoKTtcclxuICAgIFx0XHJcbiAgICBcdC8vYWRkIGFuIG9wdGlvbiBmb3IgdGhlIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBsaXN0LCBzZWxlY3QgdGhhdCBvcHRpb25cclxuICAgIFx0dmFyIG5ld1Byb2plY3RJRCA9IGhtcy5uZXh0UHJvamVjdElEKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBuZWVkIHRvIGdldCB0aGlzIGZyb20gdGhlIGRhdGFiYXNlIHRvIGluc3VyZSB3ZSBnZXQgdGhlIGNvcnJlY3QgaWRcclxuICAgIFx0dmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICBcdG9wdGlvbi50ZXh0ID0gbmV3UHJvamVjdE5hbWU7XHJcbiAgICBcdG9wdGlvbi52YWx1ZSA9IG5ld1Byb2plY3RJRC50b1N0cmluZygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIFx0JChvcHRpb24pLmluc2VydEJlZm9yZSgnI3Byb2plY3RTZWxlY3RvciBvcHRpb246bnRoLWNoaWxkKCcgKyAkKCcjcHJvamVjdFNlbGVjdG9yJykubGVuZ3RoICsgJyknKTtcclxuICAgIFx0JCgnI3Byb2plY3RTZWxlY3RvcicpLnZhbChuZXdQcm9qZWN0SUQpO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICBobXMuY3JlYXRlTmV3UHJvamVjdChuZXdQcm9qZWN0TmFtZSk7XHJcbiAgICB9ICAgIFxyXG4gIH1cclxufTsiLCJ2YXIgcHJvamVjdEFjdGlvbiA9XHJcbntcclxuICBpbml0OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI3Byb2plY3QtYWN0aW9uLWNvbnRhaW5lcicpLmh0bWwocHJvamVjdEFjdGlvbi5tYXJrdXAoKSk7XHJcbiAgICBcclxuICAgICQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS5rZXl1cChmdW5jdGlvbihlKVxyXG4gICAge1xyXG4gICAgICBpZihlLmtleUNvZGUgPT0gRU5URVJfS0VZKVxyXG4gICAgICB7XHJcbiAgICAgICAgcHJvamVjdEFjdGlvbi5lbnRlclByZXNzZWQoKTtcclxuICAgICAgfVxyXG4gICAgfSk7IFxyXG4gICAgXHJcbiAgICAkKFwiI3Byb2plY3RBY3Rpb25TZWxlY3RvclwiKS5jaGFuZ2UocHJvamVjdEFjdGlvbi5oYW5kbGUpO1xyXG4gIH0sXHJcbiAgaGFuZGxlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gIFx0aWYoJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgpID09ICdhZGRGaWVsZCcpXHJcbiAgXHR7XHJcbiAgICAgICQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS52YWwoXCJUeXBlIE5ldyBGaWVsZCBOYW1lIGFuZCBQcmVzcyBFbnRlciB0byBDcmVhdGVcIik7XHJcbiAgXHRcdCQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS5zaG93KCkuZm9jdXMoKS5zZWxlY3QoKTtcclxuICBcdH1cdFxyXG4gIH0sXHJcbiAgZW50ZXJQcmVzc2VkOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gIFx0aWYoJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgpID09ICdhZGRGaWVsZCcpXHJcbiAgXHR7XHJcbiAgICAgIHNwcmVhZFNoZWV0LmFkZEZpZWxkKCQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS52YWwoKSk7XHRcclxuICAgICAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLmhpZGUoKTtcclxuICAgICAgJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgnYmxhbmsnKTtcclxuICBcdH1cclxuICB9LFxyXG4gIG1hcmt1cDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHJldHVybiAnPHRhYmxlPjx0ciBpZD1cImhlYWRlclJvd1wiPjx0cj48ZGl2IGlkPVwicHJvamVjdC1zZWxlY3QtY29udGFpbmVyXCI+J1xyXG4gICAgKyAnPHNlbGVjdCBpZD1cInByb2plY3RBY3Rpb25TZWxlY3RvclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+J1xyXG4gICAgKyAnPG9wdGlvbiB2YWx1ZT1cImJsYW5rXCI+PC9vcHRpb24+J1xyXG4gICAgKyAnPG9wdGlvbiB2YWx1ZT1cImFkZEZpZWxkXCI+QWRkIEZpZWxkPC9vcHRpb24+J1xyXG4gICAgKyAnPC9zZWxlY3Q+J1xyXG4gICAgKyAnPGlucHV0IGlkPVwicHJvamVjdEFjdGlvbklucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj48L2lucHV0PidcclxuICAgICsgJzwvZGl2PjwvdHI+PHRhYmxlPic7IFxyXG4gIH1cclxufTsiLCJ2YXIgc3ByZWFkU2hlZXRLZXlIYW5kbGVyID1cclxue1xyXG4gIGNoZWNrS2V5OiBmdW5jdGlvbihlKSBcclxuICB7XHJcbiAgICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XHJcbiAgXHJcbiAgICBpZiAoZS5rZXlDb2RlID09IEtFWV9VUF9BUlJPVykgXHJcbiAgICB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdmFyIHByZXZSb3cgPSAkKHNwcmVhZFNoZWV0S2V5SGFuZGxlci5maW5kQW5jZXN0b3IoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RyJykpLnByZXYoKVswXTtcclxuICAgICAgXHJcbiAgICAgIGlmKHByZXZSb3cpIHsgJCgnIycgKyBzcHJlYWRTaGVldEtleUhhbmRsZXIuZ2V0TmV4dEVsZW1lbnRJRChwcmV2Um93KSkuZm9jdXMoKTsgfSAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZS5rZXlDb2RlID09IEtFWV9ET1dOX0FSUk9XKSBcclxuICAgIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB2YXIgbmV4dFJvdyA9ICQoc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmZpbmRBbmNlc3Rvcihkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndHInKSkubmV4dCgpWzBdO1xyXG4gICAgICBcclxuICAgICAgaWYobmV4dFJvdykgeyAkKCcjJyArIHNwcmVhZFNoZWV0S2V5SGFuZGxlci5nZXROZXh0RWxlbWVudElEKG5leHRSb3cpKS5mb2N1cygpOyB9ICAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZS5rZXlDb2RlID09IEtFWV9SSUdIVF9BUlJPVykgXHJcbiAgICB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgJChzcHJlYWRTaGVldEtleUhhbmRsZXIuZmluZEFuY2VzdG9yKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0ZCcpKS5uZXh0KCkuZmluZCgnaW5wdXQnKS5mb2N1cygpOyAgXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChlLmtleUNvZGUgPT0gS0VZX0xFRlRfQVJST1cpIFxyXG4gICAge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICQoc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmZpbmRBbmNlc3Rvcihkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndGQnKSkucHJldigpLmZpbmQoJ2lucHV0JykuZm9jdXMoKTsgIFxyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGdldE5leHRFbGVtZW50SUQ6IGZ1bmN0aW9uKG5ld1JvdylcclxuICB7XHJcbiAgICB2YXIgaWQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlkOyAgXHJcbiAgICBpZihpZC5pbmRleE9mKCdub2RlSW5wdXQnKSA+IC0xKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gJ25vZGVJbnB1dCcgKyBuZXdSb3cuaWQucmVwbGFjZSgncm93aWQnLCcnKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgdmFyIGNsYXNzZXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG4gIFxyXG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKylcclxuICAgICAge1xyXG4gICAgICAgIHZhciBjID0gY2xhc3Nlc1tpXTtcclxuICBcclxuICAgICAgICBpZihjLmluZGV4T2YoJ2ZpZWxkSW5wdXQnKSA+IC0xICYmIGMgIT0gJ2ZpZWxkSW5wdXQnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHZhciBmaWVsZE5hbWUgPSBjLnJlcGxhY2UoJ2ZpZWxkSW5wdXQnLCAnJyk7XHJcbiAgICAgICAgICByZXR1cm4gZmllbGROYW1lICsgbmV3Um93LmlkLnJlcGxhY2UoJ2RhdGFyb3dpZCcsJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSAgIFxyXG4gIH0sXHJcbiAgZmluZEFuY2VzdG9yOiBmdW5jdGlvbihlbCwgdGFnTmFtZSkgXHJcbiAge1xyXG4gICAgdGFnTmFtZSA9IHRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuICBcclxuICAgIHdoaWxlIChlbCAmJiBlbC5wYXJlbnROb2RlKSBcclxuICAgIHtcclxuICAgICAgZWwgPSBlbC5wYXJlbnROb2RlO1xyXG4gICAgICBpZiAoZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRhZ05hbWUpIHsgcmV0dXJuIGVsOyB9XHJcbiAgICB9XHJcbiAgfVxyXG59OyIsIi8vVE9ETzogYWRkIGNvbW1lbnRzXHJcbnZhciBzcHJlYWRTaGVldFZpZXcgPSBcclxue1xyXG4gIHJlbmRlcjogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoZG9jdW1lbnQpLm9uKFwia2V5ZG93blwiLCBzcHJlYWRTaGVldEtleUhhbmRsZXIuY2hlY2tLZXkpO1xyXG4gICAgXHJcbiAgICAkKCdib2R5JykuYXBwZW5kKHRoaXMuc3ByZWFkU2hlZXRNYXJrdXAoKSk7XHJcbiAgXHJcbiAgICBwcm9qZWN0QWN0aW9uLmluaXQoKTtcclxuICAgIHRoaXMucmVuZGVyRmllbGRzUm93KCk7XHJcbiAgICB0aGlzLnJlbmRlckRhdGFUYWJsZSgpO1xyXG4gICAgdGhpcy5yZW5kZXJOb2RlQ29sdW1uKCk7XHJcbiAgfSxcclxuICBkZXN0cm95OiBmdW5jdGlvbigpIFxyXG4gIHsgXHJcbiAgICAkKCcjc3ByZWFkU2hlZXRWaWV3JykucmVtb3ZlKCk7XHJcbiAgICAkKGRvY3VtZW50KS5vZmYoXCJrZXlkb3duXCIpOyBcclxuICB9LFxyXG4gIHNwcmVhZFNoZWV0TWFya3VwOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuICc8ZGl2IGlkPVwic3ByZWFkU2hlZXRWaWV3XCI+JyArXHJcbiAgICAgICc8ZGl2IGlkPVwicHJvamVjdC1hY3Rpb24tY29udGFpbmVyXCI+PC9kaXY+JyArXHJcbiAgICAgICc8ZGl2IGlkPVwiZmllbGRzLWhlYWRlci1yb3dcIj48L2Rpdj4nICtcclxuICAgICAgJzxkaXYgaWQ9XCJyZWRpcHMtZHJhZ1wiPjwvZGl2PicgK1xyXG4gICAgICAnPGRpdiBpZD1cImRhdGEtY29udGFpbmVyXCI+PC9kaXY+JyArXHJcbiAgICAnPC9kaXY+JztcclxuICB9LFxyXG4gIHJlbmRlckZpZWxkc1JvdzogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoJyNmaWVsZHMtaGVhZGVyLXJvdycpLmh0bWwoJzx0YWJsZSBpZD1cImZpZWxkSGVhZGVyVGFibGVcIj48dHIgaWQ9XCJmaWVsZEhlYWRlclJvd1wiPjwvdHI+PC90YWJsZT4nKTtcclxuICBcclxuICAgIHNwcmVhZFNoZWV0LmZpZWxkcygpLmZvckVhY2goZnVuY3Rpb24oZmllbGQpXHJcbiAgICB7IFxyXG4gICAgICAkKCcjZmllbGRIZWFkZXJSb3cnKS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmZpZWxkSGVhZGVyKGZpZWxkLm5hbWUpKTtcclxuICAgICAgJCgnI2ZpZWxkTWVudUJ1dHRvbicgKyBmaWVsZC5uYW1lKS5jbGljayhmdW5jdGlvbihlKSB7IHNwcmVhZFNoZWV0Vmlldy5zaG93RmllbGRNZW51KGUsIGZpZWxkLm5hbWUpOyB9KTtcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgJCgnI2ZpZWxkcy1oZWFkZXItcm93JykuY3NzKCdyaWdodCcsIHNjcm9sbEJhcldpZHRoICsgJ3B4Jyk7ICAgLy9zaG9ydGVuIHRoZSB3aWR0aCBvZiB0aGUgZmllbGRzUm93IGJ5IHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsIGJhciAgIFxyXG4gIH0sXHJcbiAgZmllbGRIZWFkZXI6IGZ1bmN0aW9uKGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICByZXR1cm4gJzx0ZCBjbGFzcz1cImZpZWxkSGVhZGVyQ2VsbFwiPjxkaXYgY2xhc3M9XCJmaWVsZEhlYWRlckNvbnRhaW5lclwiPidcclxuICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vdmVDb2xHcmlwXCI+PC9kaXY+J1xyXG4gICAgICArICc8ZGl2IGNsYXNzPVwiZmllbGROYW1lSW5wdXRDb250YWluZXJcIj48dGV4dGFyZWEgaWQ9XCJjb2xIZWFkZXJJbnB1dCcgKyBmaWVsZE5hbWUgKyAnXCIgY2xhc3M9XCJmaWVsZE5hbWVJbnB1dFwiPicgKyBmaWVsZE5hbWUgKyAnPC90ZXh0YXJlYT48L2Rpdj4nXHJcbiAgICAgICsgJzxkaXYgY2xhc3M9XCJmaWVsZEhlYWRlckJ1dHRvblwiPidcclxuICAgICAgKyAnPGltZyBpZD1cImZpZWxkTWVudUJ1dHRvbicgKyBmaWVsZE5hbWUgKyAnXCIgc3JjPVwiaW1hZ2VzL2Rvd24tYXJyb3cucG5nXCIvPidcclxuICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICArICc8ZGl2IGlkPVwiZ3JpcCcgKyBmaWVsZE5hbWUgKyAnXCIgY2xhc3M9XCJyZXNpemVDb2xHcmlwXCIgb25tb3VzZWRvd249XCJzdGFydFJlc2l6ZShldmVudCwgdGhpcylcIj48L2Rpdj4nXHJcbiAgICAgICsgJzwvZGl2PjwvdGQ+JztcclxuICB9LFxyXG4gIHNob3dGaWVsZE1lbnU6IGZ1bmN0aW9uKGUsIGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICBpZigkKCcjZmllbGRNZW51JykubGVuZ3RoID09PSAwKVxyXG4gICAge1xyXG4gICAgICBmaWVsZE1lbnVDb250cm9sbGVyLmRpc3BsYXlGaWVsZE1lbnUoZmllbGROYW1lLCBlLmNsaWVudFgsIGUuY2xpZW50WSk7XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgcmVuZGVyRGF0YVRhYmxlOiBmdW5jdGlvbigpXHJcbiAgeyAgICBcclxuICAgICQoJyNkYXRhLWNvbnRhaW5lcicpLmFwcGVuZCgnPHRhYmxlIGlkPVwiZGF0YVRhYmxlXCI+PC90YWJsZT4nKTtcclxuICAgIHNwcmVhZFNoZWV0LnRyZWUoKS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSBcclxuICAgIHsgXHJcbiAgICAgICQoJyNkYXRhVGFibGUnKS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmRhdGFSb3dzTWFya3VwKGNoaWxkKSk7IFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbChmdW5jdGlvbigpIFxyXG4gICAge1xyXG4gICAgICAkKCcjcmVkaXBzLWRyYWcnKS5zY3JvbGxUb3AoJCgnI2RhdGEtY29udGFpbmVyJykuc2Nyb2xsVG9wKCkpO1xyXG4gICAgICAkKCcjZmllbGRzLWhlYWRlci1yb3cnKS5zY3JvbGxMZWZ0KCQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbExlZnQoKSk7ICAgICAgXHJcbiAgICB9KTsgICAgIFxyXG4gIH0sXHJcbiAgZGF0YVJvd3NNYXJrdXA6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIG1hcmt1cCA9ICc8dHIgaWQ9XCJkYXRhcm93aWQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cImRhdGFSb3dcIj4nO1xyXG4gICAgXHJcbiAgICBzcHJlYWRTaGVldC5maWVsZHMoKS5mb3JFYWNoKGZ1bmN0aW9uKGZpZWxkKSBcclxuICAgIHsgIFxyXG4gICAgICBtYXJrdXAgKz0gJzx0ZCBjbGFzcz1cImNlbGxcIj4nXHJcbiAgICAgICAgICAgICArICc8aW5wdXQgY2xhc3M9XCJmaWVsZElucHV0IGZpZWxkSW5wdXQnICsgZmllbGQubmFtZSArICdcIiB0eXBlPVwidGV4dFwiIGlkPVwiJyArIGZpZWxkLm5hbWUgKyBub2RlLmlkICsgJ1wiIHZhbHVlPVwiJyArIHNwcmVhZFNoZWV0LmZvcm1hdHRlZFZhbHVlKGZpZWxkLCBub2RlKSArICdcIiAnXHJcbiAgICAgICAgICAgICArICdvbmlucHV0PVwic3ByZWFkU2hlZXQudXBkYXRlRmllbGRWYWx1ZShcXCcnICsgZmllbGQubmFtZSArICdcXCcsJyArIG5vZGUuaWQgKyAnKVwiIG9uZm9jdXM9XCIkKHRoaXMpLnZhbChzcHJlYWRTaGVldC5yYXdWYWx1ZShcXCcnICsgZmllbGQubmFtZSArICdcXCcsJyArIG5vZGUuaWQgKyAnKSlcIj4nXHJcbiAgICAgICAgICAgICArICc8L3RkPic7XHJcbiAgICB9KTtcclxuXHJcbiAgICBub2RlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHsgbWFya3VwICs9IHNwcmVhZFNoZWV0Vmlldy5kYXRhUm93c01hcmt1cChjaGlsZCk7IH0pOyAgIFxyXG5cclxuICAgIHJldHVybiBtYXJrdXAgKyAnPC90cj4nO1xyXG4gIH0sXHJcbiAgcmVuZGVyRGF0YUNlbGw6IGZ1bmN0aW9uKHJvdywgZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG4gIHtcclxuICAgICQocm93KS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmZpZWxkQ2VsbChmaWVsZE5hbWUsIG5vZGVJRCwgdmFsdWUpKTtcclxuICAgICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS5vbignaW5wdXQnLCBmdW5jdGlvbigpIHsgc3ByZWFkU2hlZXQudXBkYXRlRmllbGRWYWx1ZShmaWVsZE5hbWUsIG5vZGVJRCk7IH0pO1xyXG4gICAgJCgnIycgKyBmaWVsZE5hbWUgKyBub2RlSUQpLmZvY3VzKGZ1bmN0aW9uKCkgeyAkKHRoaXMpLnZhbChzcHJlYWRTaGVldC5yYXdWYWx1ZShmaWVsZE5hbWUsIG5vZGVJRCkpOyB9KTsgICAgIFxyXG4gIH0sXHJcbiAgZmllbGRDZWxsOiBmdW5jdGlvbihmaWVsZE5hbWUsIG5vZGVJRCwgdmFsdWUpXHJcbiAge1xyXG4gICAgcmV0dXJuICc8dGQgY2xhc3M9XCJjZWxsXCI+PGlucHV0IGNsYXNzPVwiZmllbGRJbnB1dCBmaWVsZElucHV0JyArIGZpZWxkTmFtZSArICdcIiB0eXBlPVwidGV4dFwiIGlkPVwiJyArIGZpZWxkTmFtZSArIG5vZGVJRCArICdcIiB2YWx1ZT1cIicgKyB2YWx1ZSArICdcIj48L3RkPic7XHJcbiAgfSxcclxuICBub2RlUm93TWFya3VwOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBtYXJrdXAgPSAnPHRyIGlkPVwicm93aWQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cIm5vZGVSb3dcIj48dGQgY2xhc3M9XCJyZWRpcHMtcm93aGFuZGxlciBjZWxsXCI+PGRpdiBpZD1cIm5vZGVDb250ZW50JyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJub2RlLWNvbnRhaW5lclwiPic7XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcuZGVsZXRlQnV0dG9uKG5vZGUuaWQpICsgc3ByZWFkU2hlZXRWaWV3LmNvcHlCdXR0b24obm9kZS5pZCkgKyBzcHJlYWRTaGVldFZpZXcuZHJhZ0hhbmRsZTtcclxuICAgIG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcubm9kZUNvbnRlbnQobm9kZSk7ICAgIFxyXG4gIFxyXG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7IG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcubm9kZVJvd01hcmt1cChjaGlsZCk7IH0pO1xyXG4gIFxyXG4gICAgcmV0dXJuIG1hcmt1cCArICc8L2Rpdj48L3RkPjwvdHI+JztcclxuICB9LFxyXG4gIG5vZGVDb250ZW50OiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBpY29uTWFya3VwO1xyXG4gICAgdmFyIGRlcHRoQWRqdXN0bWVudCA9IChub2RlLmRlcHRoLTEpICogMTA7XHJcbiAgICB2YXIgd2lkdGhBZGp1c3RtZW50ID0gZGVwdGhBZGp1c3RtZW50OyAgIFxyXG4gIFxyXG4gICAgaWYoc3ByZWFkU2hlZXQuaGFzQ2hpbGRyZW4obm9kZSkpXHJcbiAgICB7XHJcbiAgICAgIGlmKHNwcmVhZFNoZWV0LmNoaWxkcmVuSGlkZGVuKG5vZGUpKSB7IGljb25NYXJrdXAgPSAnPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L3NwYW4+JzsgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpY29uTWFya3VwID0gJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd25cIj48L3NwYW4+JzsgfVxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBpY29uTWFya3VwID0gJzxzcGFuPjwvc3Bhbj4nO1xyXG4gICAgICBkZXB0aEFkanVzdG1lbnQgKz0gMTI7XHJcbiAgICAgIHdpZHRoQWRqdXN0bWVudCAtPSAxMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHNwcmVhZFNoZWV0Vmlldy5leHBhbmRJY29uKG5vZGUuaWQsIGRlcHRoQWRqdXN0bWVudCwgaWNvbk1hcmt1cCkgKyBzcHJlYWRTaGVldFZpZXcubm9kZUlucHV0KG5vZGUsIERFRkFVTFRfTk9ERV9JTlBVVF9XSURUSC13aWR0aEFkanVzdG1lbnQpOyAgICAgXHJcbiAgfSxcclxuICByZW5kZXJOb2RlQ29sdW1uOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI3JlZGlwcy1kcmFnJykuaHRtbCgnPHRhYmxlIGlkPVwidHJlZVRhYmxlXCI+PC90YWJsZT4nKTtcclxuICAgIHNwcmVhZFNoZWV0LnRyZWUoKS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSBcclxuICAgIHsgXHJcbiAgICAgICAkKCcjdHJlZVRhYmxlJykuYXBwZW5kKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKGNoaWxkKSk7XHJcbiAgICB9KTtcclxuICAgICQoJyNyZWRpcHMtZHJhZycpLmNzcygnYm90dG9tJywgc2Nyb2xsQmFyV2lkdGggKyAncHgnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zaG9ydGVuIHRoZSBoZWlnaHQgb2YgdGhlIHRyZWUgc2VjdGlvbiBieSB0aGUgd2lkdGggb2YgdGhlIHNjcm9sbCBiYXJcclxuICBcdHJlZGlwcy5pbml0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pbml0aWFsaXplIHRyZWUgZHJhZy9kcm9wIGxpYnJhcnkgICAgXHJcbiAgfSxcclxuICBkcmFnSGFuZGxlOiAnPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHB1bGwtcmlnaHRcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tbW92ZVwiPjwvaT48L2Rpdj4nLFxyXG4gIGNvcHlCdXR0b246IGZ1bmN0aW9uKG5vZGVJRCkgeyByZXR1cm4gJzxhIGhyZWY9XCIjXCIgIGNsYXNzPVwicHVsbC1yaWdodCBidG4gYnRuLWluZm8gYnRuLXhzIGNvcHktYnV0dG9uXCIgb25jbGljaz1cInNwcmVhZFNoZWV0LmNvcHlOb2RlKCcgKyBub2RlSUQgKyAnKVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzXCI+PC9pPjwvYT4nIH0sXHJcbiAgZGVsZXRlQnV0dG9uOiBmdW5jdGlvbihub2RlSUQpIHsgcmV0dXJuICc8YSBocmVmPVwiI1wiIGNsYXNzPVwicHVsbC1yaWdodCBidG4gYnRuLWRhbmdlciBidG4teHMgZGVsZXRlLWJ1dHRvblwiIG9uY2xpY2s9XCJzcHJlYWRTaGVldC5kZWxldGVOb2RlKCcgKyBub2RlSUQgKyAnKVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L2k+PC9hPicgfSxcclxuICBleHBhbmRJY29uOiBmdW5jdGlvbihub2RlSUQsIGRlcHRoQWRqdXN0bWVudCwgaWNvbk1hcmt1cCkgXHJcbiAgeyBcclxuICAgIHJldHVybiAnPGEgaHJlZj1cIiNcIiBpZD1cImljb24nICsgbm9kZUlEICsgJ1wiIGNsYXNzPVwiYnRuIGJ0bi14c1wiIHN0eWxlPVwibWFyZ2luLWxlZnQ6JyArIGRlcHRoQWRqdXN0bWVudCArICdweFwiICdcclxuICAgICAgICAgKyAnb25jbGljaz1cInNwcmVhZFNoZWV0LnRvZ2dsZU5vZGUoJyArIG5vZGVJRCArICcpXCI+JyArIGljb25NYXJrdXAgKyAnPC9hPic7IFxyXG4gIH0sXHJcbiAgbm9kZUlucHV0OiBmdW5jdGlvbihub2RlLCB3aWR0aClcclxuICB7IFxyXG4gICAgcmV0dXJuICc8aW5wdXQgaWQ9XCJub2RlSW5wdXQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cIm5vZGVUZXh0SW5wdXRcIiBzdHlsZT1cIndpZHRoOicgKyB3aWR0aCArICdweFwiIHR5cGU9XCJ0ZXh0XCIgJ1xyXG4gICAgICAgICArICd2YWx1ZT1cIicgKyBub2RlLm5hbWUgKyAnXCIgb25pbnB1dD1cInNwcmVhZFNoZWV0Vmlldy51cGRhdGVOb2RlTmFtZSgnICsgbm9kZS5pZCArICcpXCIvPic7IFxyXG4gIH0sXHJcbiAgZXhwYW5kTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICB2YXIgY2hpbGQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIGRlc2NlbmRhbnQgbm9kZSByb3dzIHRvIHRoZSBET01cclxuICAgIGZvcih2YXIgaSA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcHJlc2VydmUgdGhlIG5vZGUgb3JkZXJpbmdcclxuICAgIHtcclxuICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0Vmlldy5kYXRhUm93c01hcmt1cChjaGlsZCkpLmluc2VydEFmdGVyKCQoJyNkYXRhcm93aWQnICsgbm9kZS5pZCkpO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKGNoaWxkKSkuaW5zZXJ0QWZ0ZXIoJCgnI3Jvd2lkJyArIG5vZGUuaWQpKTtcclxuICAgIH0gICAgIFxyXG5cclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgIFxyXG4gIH0sXHJcbiAgcmVkcmF3Tm9kZUNvbnRlbnQ6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgJCgnI2ljb24nICsgbm9kZS5pZCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjbm9kZUlucHV0JyArIG5vZGUuaWQpLnJlbW92ZSgpO1xyXG4gICAgJCgnI25vZGVDb250ZW50JyArIG5vZGUuaWQpLmFwcGVuZChzcHJlYWRTaGVldFZpZXcubm9kZUNvbnRlbnQobm9kZSkpOyAgICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgICQoJyNmaWVsZEhlYWRlclJvdycpLmFwcGVuZCh0aGlzLmZpZWxkSGVhZGVyTWFya3VwKGZpZWxkTmFtZSwgc3ByZWFkU2hlZXQuZmllbGRzKCkubGVuZ3RoKSk7XHJcbiAgICAkKCcjZmllbGRNZW51QnV0dG9uJyArIGZpZWxkTmFtZSkuY2xpY2soZnVuY3Rpb24oZSkgeyBzcHJlYWRTaGVldFZpZXcuc2hvd0ZpZWxkTWVudShlLCBmaWVsZE5hbWUpOyB9KTtcclxuICAgICQoJy5kYXRhUm93JykuZWFjaChmdW5jdGlvbihpLCBpdGVtKSB7IHNwcmVhZFNoZWV0Vmlldy5yZW5kZXJEYXRhQ2VsbChpdGVtLCBmaWVsZE5hbWUsIHBhcnNlSW50KGl0ZW0uaWQucmVwbGFjZSgnZGF0YXJvd2lkJywgJycpKSwgJycpOyB9KTsgICAgICAgIFxyXG4gIH0sXHJcbiAgdXBkYXRlTm9kZU5hbWU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgdmFsdWUgPSAkKCcjbm9kZUlucHV0JyArIG5vZGVJRCkudmFsKCk7XHJcbiAgICBzcHJlYWRTaGVldC51cGRhdGVOb2RlTmFtZShub2RlSUQsIHZhbHVlKTtcclxuICAgICQoJyNub2RlSW5wdXQnICsgbm9kZUlEKS5hdHRyKCd2YWx1ZScsIHZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBpbiB0aGUgRE9NLCBzbyB0aGF0IHdoZW4gd2UgZHJhZy9tb3ZlIHRoZSByb3csIHRoZSB2YWx1ZSBpcyBjb3JyZWN0ICAgIFxyXG4gIH0sXHJcbiAgcmVtb3ZlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICAkKCcjcm93aWQnICsgbm9kZS5pZCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjZGF0YXJvd2lkJyArIG5vZGUuaWQpLnJlbW92ZSgpOyAgICAgXHJcbiAgfSxcclxuICBpbnNlcnROb2RlQmVmb3JlOiBmdW5jdGlvbihub2RlLCBpbnNlcnRCZWZvcmVOb2RlKVxyXG4gIHtcclxuICAgICQoc3ByZWFkU2hlZXRWaWV3Lm5vZGVSb3dNYXJrdXAobm9kZSkpLmluc2VydEJlZm9yZSgkKCcjcm93aWQnICsgaW5zZXJ0QmVmb3JlTm9kZS5pZCkpOyAgICAgIC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgICQoc3ByZWFkU2hlZXRWaWV3LmRhdGFSb3dzTWFya3VwKG5vZGUpKS5pbnNlcnRCZWZvcmUoJCgnI2RhdGFyb3dpZCcgKyBpbnNlcnRCZWZvcmVOb2RlLmlkKSk7IC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgXHJcbiAgfSxcclxuICBpbnNlcnROb2RlQWZ0ZXI6IGZ1bmN0aW9uKG5vZGUsIGluc2VydEFmdGVyTm9kZSlcclxuICB7XHJcbiAgICAkKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKG5vZGUpKS5pbnNlcnRBZnRlcigkKCcjcm93aWQnICsgaW5zZXJ0QWZ0ZXJOb2RlLmlkKSk7ICAgICAgLy9pbnNlcnQgdGhlIG5ldyByb3dzIGJlZm9yZSB0aGUgc291cmNlIHJvd1xyXG4gICAgJChzcHJlYWRTaGVldFZpZXcuZGF0YVJvd3NNYXJrdXAobm9kZSkpLmluc2VydEFmdGVyKCQoJyNkYXRhcm93aWQnICsgaW5zZXJ0QWZ0ZXJOb2RlLmlkKSk7IC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgXHJcbiAgfSxcclxuICBlbmFibGVEcmFnZ2luZzogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBSRURJUFMuZHJhZy5lbmFibGVEaXZzKCdpbml0JywgJCgnI3Jvd2lkJyArIG5vZGUuaWQpLmZpbmQoJ2RpdicpKTsgICAgICAgXHJcbiAgfSxcclxuICBnZXRGaWVsZFZhbHVlOiBmdW5jdGlvbihmaWVsZE5hbWUsIG5vZGVJRClcclxuICB7XHJcbiAgICByZXR1cm4gJCgnIycgKyBmaWVsZE5hbWUgKyBub2RlSUQpLnZhbCgpO1xyXG4gIH0sXHJcbiAgdXBkYXRlRmllbGRWYWx1ZTogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG4gIHtcclxuICAgICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS52YWwodmFsdWUpO1xyXG4gIH1cclxufTsiLCJ2YXIgdHJlZVZpZXcgPSBcclxue1xyXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKCcjdHJlZS1jb250YWluZXInKS5yZW1vdmUoKTtcclxuICB9LCAgXHJcbiAgZGlzcGxheTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJ0cmVlLWNvbnRhaW5lclwiPjwvZGl2PicpO1xyXG4gIFxyXG4gICAgdmFyIHRvdGFsTm9kZXMgPSAwO1xyXG4gICAgdmFyIG1heExhYmVsTGVuZ3RoID0gMDtcclxuICAgIHZhciBzZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgdmFyIGRyYWdnaW5nTm9kZSA9IG51bGw7XHJcbiAgICB2YXIgcGFuU3BlZWQgPSAyMDA7XHJcbiAgICB2YXIgcGFuQm91bmRhcnkgPSAyMDsgLy8gV2l0aGluIDIwcHggZnJvbSBlZGdlcyB3aWxsIHBhbiB3aGVuIGRyYWdnaW5nLlxyXG4gICAgdmFyIGkgPSAwO1xyXG4gICAgdmFyIGR1cmF0aW9uID0gNzUwO1xyXG4gICAgdmFyIHJvb3Q7XHJcbiAgXHJcbiAgICB2YXIgdmlld2VyV2lkdGggPSAkKCcjdHJlZS1jb250YWluZXInKS53aWR0aCgpO1xyXG4gICAgdmFyIHZpZXdlckhlaWdodCA9ICQoJyN0cmVlLWNvbnRhaW5lcicpLmhlaWdodCgpO1xyXG4gIFxyXG4gICAgdmFyIHRyZWUgPSBkMy5sYXlvdXQudHJlZSgpLnNpemUoW3ZpZXdlckhlaWdodCwgdmlld2VyV2lkdGhdKTtcclxuICBcclxuICAgIHZhciBkaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpLnByb2plY3Rpb24oZnVuY3Rpb24oZCkgeyByZXR1cm4gW2QueSwgZC54XTsgfSk7ICAvLyBkZWZpbmUgYSBkMyBkaWFnb25hbCBwcm9qZWN0aW9uIGZvciB1c2UgYnkgdGhlIG5vZGUgcGF0aHMgbGF0ZXIgb24uXHJcbiAgXHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIGZ1bmN0aW9uKGQpXHJcbiAgICB7XHJcbiAgICAgIHRvdGFsTm9kZXMrKztcclxuICAgICAgbWF4TGFiZWxMZW5ndGggPSBNYXRoLm1heChkLm5hbWUubGVuZ3RoLCBtYXhMYWJlbExlbmd0aCk7XHJcbiAgICB9KTtcclxuICBcclxuICAgIC8vIFRPRE86IFBhbiBmdW5jdGlvbiwgY2FuIGJlIGJldHRlciBpbXBsZW1lbnRlZC5cclxuICAgIGZ1bmN0aW9uIHBhbihkb21Ob2RlLCBkaXJlY3Rpb24pIFxyXG4gICAge1xyXG4gICAgICB2YXIgc3BlZWQgPSBwYW5TcGVlZDtcclxuICAgICAgaWYgKHBhblRpbWVyKSBcclxuICAgICAge1xyXG4gICAgICAgIGNsZWFyVGltZW91dChwYW5UaW1lcik7XHJcbiAgICAgICAgdHJhbnNsYXRlQ29vcmRzID0gZDMudHJhbnNmb3JtKHN2Z0dyb3VwLmF0dHIoXCJ0cmFuc2Zvcm1cIikpO1xyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PSAncmlnaHQnKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0cmFuc2xhdGVYID0gZGlyZWN0aW9uID09ICdsZWZ0JyA/IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF0gKyBzcGVlZCA6IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF0gLSBzcGVlZDtcclxuICAgICAgICAgIHRyYW5zbGF0ZVkgPSB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09ICd1cCcgfHwgZGlyZWN0aW9uID09ICdkb3duJykgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdHJhbnNsYXRlWCA9IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF07XHJcbiAgICAgICAgICB0cmFuc2xhdGVZID0gZGlyZWN0aW9uID09ICd1cCcgPyB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdICsgc3BlZWQgOiB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdIC0gc3BlZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNjYWxlWCA9IHRyYW5zbGF0ZUNvb3Jkcy5zY2FsZVswXTtcclxuICAgICAgICBzY2FsZVkgPSB0cmFuc2xhdGVDb29yZHMuc2NhbGVbMV07XHJcbiAgICAgICAgc2NhbGUgPSB6b29tTGlzdGVuZXIuc2NhbGUoKTtcclxuICAgICAgICBzdmdHcm91cC50cmFuc2l0aW9uKCkuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHRyYW5zbGF0ZVggKyBcIixcIiArIHRyYW5zbGF0ZVkgKyBcIilzY2FsZShcIiArIHNjYWxlICsgXCIpXCIpO1xyXG4gICAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJ2cubm9kZScpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB0cmFuc2xhdGVYICsgXCIsXCIgKyB0cmFuc2xhdGVZICsgXCIpXCIpO1xyXG4gICAgICAgIHpvb21MaXN0ZW5lci5zY2FsZSh6b29tTGlzdGVuZXIuc2NhbGUoKSk7XHJcbiAgICAgICAgem9vbUxpc3RlbmVyLnRyYW5zbGF0ZShbdHJhbnNsYXRlWCwgdHJhbnNsYXRlWV0pO1xyXG4gICAgICAgIHBhblRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsgcGFuKGRvbU5vZGUsIHNwZWVkLCBkaXJlY3Rpb24pOyB9LCA1MCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBcclxuICAgIGZ1bmN0aW9uIHpvb20oKSB7IHN2Z0dyb3VwLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkMy5ldmVudC50cmFuc2xhdGUgKyBcIilzY2FsZShcIiArIGQzLmV2ZW50LnNjYWxlICsgXCIpXCIpOyB9ICAgLy8gRGVmaW5lIHRoZSB6b29tIGZ1bmN0aW9uIGZvciB0aGUgem9vbWFibGUgdHJlZVxyXG4gIFxyXG4gICAgdmFyIHpvb21MaXN0ZW5lciA9IGQzLmJlaGF2aW9yLnpvb20oKS5zY2FsZUV4dGVudChbMC4xLCAzXSkub24oXCJ6b29tXCIsIHpvb20pOyAgICAgLy8gZGVmaW5lIHRoZSB6b29tTGlzdGVuZXIgd2hpY2ggY2FsbHMgdGhlIHpvb20gZnVuY3Rpb24gb24gdGhlIFwiem9vbVwiIGV2ZW50IGNvbnN0cmFpbmVkIHdpdGhpbiB0aGUgc2NhbGVFeHRlbnRzXHJcbiAgXHJcbiAgICBmdW5jdGlvbiBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSkgXHJcbiAgICB7XHJcbiAgICAgIGRyYWdnaW5nTm9kZSA9IGQ7XHJcbiAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJy5naG9zdENpcmNsZScpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuICAgICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZSBzaG93Jyk7XHJcbiAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5hdHRyKCdjbGFzcycsICdub2RlIGFjdGl2ZURyYWcnKTtcclxuXHJcbiAgICAgIHN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKS5zb3J0KGZ1bmN0aW9uKGEsIGIpICAgIC8vIHNlbGVjdCB0aGUgcGFyZW50IGFuZCBzb3J0IHRoZSBwYXRoJ3NcclxuICAgICAgeyBcclxuICAgICAgICBpZiAoYS5pZCAhPSBkcmFnZ2luZ05vZGUuaWQpIHJldHVybiAxOyAgICAgICAgICAvLyBhIGlzIG5vdCB0aGUgaG92ZXJlZCBlbGVtZW50LCBzZW5kIFwiYVwiIHRvIHRoZSBiYWNrXHJcbiAgICAgICAgZWxzZSByZXR1cm4gLTE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBpcyB0aGUgaG92ZXJlZCBlbGVtZW50LCBicmluZyBcImFcIiB0byB0aGUgZnJvbnRcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIGlmIG5vZGVzIGhhcyBjaGlsZHJlbiwgcmVtb3ZlIHRoZSBsaW5rcyBhbmQgbm9kZXNcclxuICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEpIFxyXG4gICAgICB7XHJcbiAgICAgICAgLy8gcmVtb3ZlIGxpbmsgcGF0aHNcclxuICAgICAgICBsaW5rcyA9IHRyZWUubGlua3Mobm9kZXMpO1xyXG4gICAgICAgIG5vZGVQYXRocyA9IHN2Z0dyb3VwLnNlbGVjdEFsbChcInBhdGgubGlua1wiKS5kYXRhKGxpbmtzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC5pZDsgfSkucmVtb3ZlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVtb3ZlIGNoaWxkIG5vZGVzXHJcbiAgICAgICAgbm9kZXNFeGl0ID0gc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpLmRhdGEobm9kZXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuaWQ7IH0pLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkLmlkICE9IGRyYWdnaW5nTm9kZS5pZDsgfSkucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgLy8gcmVtb3ZlIHBhcmVudCBsaW5rXHJcbiAgICAgIHBhcmVudExpbmsgPSB0cmVlLmxpbmtzKHRyZWUubm9kZXMoZHJhZ2dpbmdOb2RlLnBhcmVudCkpO1xyXG4gICAgICBzdmdHcm91cC5zZWxlY3RBbGwoJ3BhdGgubGluaycpLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkLnRhcmdldC5pZCA9PSBkcmFnZ2luZ05vZGUuaWQ7IH0pLnJlbW92ZSgpO1xyXG5cclxuICAgICAgZHJhZ1N0YXJ0ZWQgPSBudWxsO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gZGVmaW5lIHRoZSBiYXNlU3ZnLCBhdHRhY2hpbmcgYSBjbGFzcyBmb3Igc3R5bGluZyBhbmQgdGhlIHpvb21MaXN0ZW5lclxyXG4gICAgdmFyIGJhc2VTdmcgPSBkMy5zZWxlY3QoXCIjdHJlZS1jb250YWluZXJcIikuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgdmlld2VyV2lkdGgpXHJcbiAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHZpZXdlckhlaWdodClcclxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm92ZXJsYXlcIilcclxuICAgICAgLmNhbGwoem9vbUxpc3RlbmVyKTtcclxuICBcclxuICAgIGRyYWdMaXN0ZW5lciA9IGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCBkcmFnc3RhcnQpLm9uKFwiZHJhZ1wiLCBkcmFnKS5vbihcImRyYWdlbmRcIiwgZHJhZ2VuZCk7ICAvLyBEZWZpbmUgdGhlIGRyYWcgbGlzdGVuZXJzIGZvciBkcmFnL2Ryb3AgYmVoYXZpb3VyIG9mIG5vZGVzLlxyXG4gIFxyXG4gICAgZnVuY3Rpb24gZHJhZ3N0YXJ0KGQpXHJcbiAgICB7XHJcbiAgICAgIGlmIChkID09IHJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICAgIGRyYWdTdGFydGVkID0gdHJ1ZTtcclxuICAgICAgbm9kZXMgPSB0cmVlLm5vZGVzKGQpO1xyXG4gICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgLy8gaXQncyBpbXBvcnRhbnQgdGhhdCB3ZSBzdXBwcmVzcyB0aGUgbW91c2VvdmVyIGV2ZW50IG9uIHRoZSBub2RlIGJlaW5nIGRyYWdnZWQuIE90aGVyd2lzZSBpdCB3aWxsIGFic29yYiB0aGUgbW91c2VvdmVyIGV2ZW50IGFuZCB0aGUgdW5kZXJseWluZyBub2RlIHdpbGwgbm90IGRldGVjdCBpdCBkMy5zZWxlY3QodGhpcykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpOyAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBkcmFnKGQpXHJcbiAgICB7XHJcbiAgICAgIGlmIChkID09IHJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoZHJhZ1N0YXJ0ZWQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgZG9tTm9kZSA9IHRoaXM7XHJcbiAgICAgICAgaW5pdGlhdGVEcmFnKGQsIGRvbU5vZGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBnZXQgY29vcmRzIG9mIG1vdXNlRXZlbnQgcmVsYXRpdmUgdG8gc3ZnIGNvbnRhaW5lciB0byBhbGxvdyBmb3IgcGFubmluZ1xyXG4gICAgICByZWxDb29yZHMgPSBkMy5tb3VzZSgkKCdzdmcnKS5nZXQoMCkpO1xyXG4gICAgICBpZiAocmVsQ29vcmRzWzBdIDwgcGFuQm91bmRhcnkpIFxyXG4gICAgICB7XHJcbiAgICAgICAgcGFuVGltZXIgPSB0cnVlO1xyXG4gICAgICAgIHBhbih0aGlzLCAnbGVmdCcpO1xyXG4gICAgICB9IFxyXG4gICAgICBlbHNlIGlmIChyZWxDb29yZHNbMF0gPiAoJCgnc3ZnJykud2lkdGgoKSAtIHBhbkJvdW5kYXJ5KSkgXHJcbiAgICAgIHtcclxuICAgICAgICBwYW5UaW1lciA9IHRydWU7XHJcbiAgICAgICAgcGFuKHRoaXMsICdyaWdodCcpO1xyXG4gICAgICB9IFxyXG4gICAgICBlbHNlIGlmIChyZWxDb29yZHNbMV0gPCBwYW5Cb3VuZGFyeSkgXHJcbiAgICAgIHtcclxuICAgICAgICBwYW5UaW1lciA9IHRydWU7XHJcbiAgICAgICAgcGFuKHRoaXMsICd1cCcpO1xyXG4gICAgICB9IFxyXG4gICAgICBlbHNlIGlmIChyZWxDb29yZHNbMV0gPiAoJCgnc3ZnJykuaGVpZ2h0KCkgLSBwYW5Cb3VuZGFyeSkpIFxyXG4gICAgICB7XHJcbiAgICAgICAgcGFuVGltZXIgPSB0cnVlO1xyXG4gICAgICAgIHBhbih0aGlzLCAnZG93bicpO1xyXG4gICAgICB9IFxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgdHJ5IHsgY2xlYXJUaW1lb3V0KHBhblRpbWVyKTsgfSBjYXRjaCAoZSkgeyB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGQueDAgKz0gZDMuZXZlbnQuZHk7XHJcbiAgICAgIGQueTAgKz0gZDMuZXZlbnQuZHg7XHJcbiAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZC55MCArIFwiLFwiICsgZC54MCArIFwiKVwiKTtcclxuICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpOyAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBkcmFnZW5kKGQpXHJcbiAgICB7XHJcbiAgICAgIGlmIChkID09IHJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICAgIGRvbU5vZGUgPSB0aGlzO1xyXG4gICAgICBcclxuICAgICAgaWYgKHNlbGVjdGVkTm9kZSkgXHJcbiAgICAgIHtcclxuICAgICAgICAvLyBub3cgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIHBhcmVudCwgYW5kIGluc2VydCBpdCBpbnRvIHRoZSBuZXcgZWxlbWVudHMgY2hpbGRyZW5cclxuICAgICAgICBwcm9qZWN0LnJlbW92ZU5vZGUoZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgICBcclxuICAgICAgICBpZighc2VsZWN0ZWROb2RlLmNoaWxkcmVuKSB7IHNlbGVjdGVkTm9kZS5jaGlsZHJlbiA9IFtdOyB9XHJcbiAgICAgICAgc2VsZWN0ZWROb2RlLmNoaWxkcmVuLnB1c2goZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgICBcclxuICAgICAgICBwcm9qZWN0LmV4cGFuZE5vZGUoc2VsZWN0ZWROb2RlKTsgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBub2RlIGJlaW5nIGFkZGVkIHRvIGlzIGV4cGFuZGVkIHNvIHVzZXIgY2FuIHNlZSBhZGRlZCBub2RlIGlzIGNvcnJlY3RseSBtb3ZlZCAgICBcclxuICAgICAgfSBcclxuXHJcbiAgICAgIHNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICAgIGQzLnNlbGVjdEFsbCgnLmdob3N0Q2lyY2xlJykuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUnKTtcclxuICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUnKTtcclxuICAgICAgXHJcbiAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJy5naG9zdENpcmNsZScpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJycpOyAgIC8vIG5vdyByZXN0b3JlIHRoZSBtb3VzZW92ZXIgZXZlbnQgb3Igd2Ugd29uJ3QgYmUgYWJsZSB0byBkcmFnIGEgMm5kIHRpbWVcclxuICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gICAgICBcclxuICAgICAgaWYgKGRyYWdnaW5nTm9kZSAhPT0gbnVsbCkgXHJcbiAgICAgIHtcclxuICAgICAgICB1cGRhdGUocm9vdCk7XHJcbiAgICAgICAgY2VudGVyTm9kZShkcmFnZ2luZ05vZGUpO1xyXG4gICAgICAgIGRyYWdnaW5nTm9kZSA9IG51bGw7XHJcbiAgICAgIH0gICAgICBcclxuICAgIH1cclxuICBcclxuICAgIHZhciBvdmVyQ2lyY2xlID0gZnVuY3Rpb24oZCkgXHJcbiAgICB7XHJcbiAgICAgIHNlbGVjdGVkTm9kZSA9IGQ7XHJcbiAgICAgIHVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIHZhciBvdXRDaXJjbGUgPSBmdW5jdGlvbihkKSBcclxuICAgIHtcclxuICAgICAgc2VsZWN0ZWROb2RlID0gbnVsbDtcclxuICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gICAgfTtcclxuICBcclxuICAgIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgdGVtcG9yYXJ5IGNvbm5lY3RvciBpbmRpY2F0aW5nIGRyYWdnaW5nIGFmZmlsaWF0aW9uXHJcbiAgICB2YXIgdXBkYXRlVGVtcENvbm5lY3RvciA9IGZ1bmN0aW9uKCkgXHJcbiAgICB7XHJcbiAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICAgIGlmIChkcmFnZ2luZ05vZGUgIT09IG51bGwgJiYgc2VsZWN0ZWROb2RlICE9PSBudWxsKSAgIC8vIGhhdmUgdG8gZmxpcCB0aGUgc291cmNlIGNvb3JkaW5hdGVzIHNpbmNlIHdlIGRpZCB0aGlzIGZvciB0aGUgZXhpc3RpbmcgY29ubmVjdG9ycyBvbiB0aGUgb3JpZ2luYWwgdHJlZVxyXG4gICAgICB7XHJcbiAgICAgICAgZGF0YSA9IFt7IHNvdXJjZTogeyB4OiBzZWxlY3RlZE5vZGUueTAsIHk6IHNlbGVjdGVkTm9kZS54MCB9LCB0YXJnZXQ6IHsgeDogZHJhZ2dpbmdOb2RlLnkwLCB5OiBkcmFnZ2luZ05vZGUueDAgfSB9XTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdmFyIGxpbmsgPSBzdmdHcm91cC5zZWxlY3RBbGwoXCIudGVtcGxpbmtcIikuZGF0YShkYXRhKTtcclxuICAgICAgbGluay5lbnRlcigpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsIFwidGVtcGxpbmtcIikuYXR0cihcImRcIiwgZDMuc3ZnLmRpYWdvbmFsKCkpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuICAgICAgbGluay5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSk7XHJcbiAgICAgIGxpbmsuZXhpdCgpLnJlbW92ZSgpO1xyXG4gICAgfTtcclxuICBcclxuICAgIC8vIEZ1bmN0aW9uIHRvIGNlbnRlciBub2RlIHdoZW4gY2xpY2tlZC9kcm9wcGVkIHNvIG5vZGUgZG9lc24ndCBnZXQgbG9zdCB3aGVuIGNvbGxhcHNpbmcvbW92aW5nIHdpdGggbGFyZ2UgYW1vdW50IG9mIGNoaWxkcmVuLlxyXG4gICAgZnVuY3Rpb24gY2VudGVyTm9kZShzb3VyY2UpIFxyXG4gICAge1xyXG4gICAgICBzY2FsZSA9IHpvb21MaXN0ZW5lci5zY2FsZSgpO1xyXG4gICAgICB4ID0gLXNvdXJjZS55MDtcclxuICAgICAgeSA9IC1zb3VyY2UueDA7XHJcbiAgICAgIHggPSB4ICogc2NhbGUgKyB2aWV3ZXJXaWR0aCAvIDI7XHJcbiAgICAgIHkgPSB5ICogc2NhbGUgKyB2aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgICBkMy5zZWxlY3QoJ2cnKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oZHVyYXRpb24pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB4ICsgXCIsXCIgKyB5ICsgXCIpc2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiKTtcclxuICAgICAgem9vbUxpc3RlbmVyLnNjYWxlKHNjYWxlKTtcclxuICAgICAgem9vbUxpc3RlbmVyLnRyYW5zbGF0ZShbeCwgeV0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNsaWNrKGQpICAgLy8gVG9nZ2xlIGNoaWxkcmVuIG9uIGNsaWNrLlxyXG4gICAge1xyXG4gICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgeyByZXR1cm47IH0gLy8gY2xpY2sgc3VwcHJlc3NlZFxyXG4gICAgICBwcm9qZWN0LnRvZ2dsZUV4cGFuc2lvbihkKTtcclxuICAgICAgdXBkYXRlKGQpO1xyXG4gICAgICBjZW50ZXJOb2RlKGQpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZnVuY3Rpb24gdXBkYXRlKHNvdXJjZSkgXHJcbiAgICB7XHJcbiAgICAgIHZhciBjb21wdXRlTm9kZVNpemUgPSBmdW5jdGlvbihub2RlLCBmaWVsZClcclxuICAgICAge1xyXG4gICAgICAgIGlmKG5vZGUudmFsdWVzICYmIG5vZGUudmFsdWVzW2ZpZWxkXSAmJiBub2RlLnZhbHVlc1tmaWVsZF0gPiA1KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJldHVybiBub2RlLnZhbHVlc1tmaWVsZF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICByZXR1cm4gNTtcclxuICAgICAgICB9ICAgICAgICBcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIC8vIENvbXB1dGUgdGhlIG5ldyBoZWlnaHQsIGZ1bmN0aW9uIGNvdW50cyB0b3RhbCBjaGlsZHJlbiBvZiByb290IG5vZGUgYW5kIHNldHMgdHJlZSBoZWlnaHQgYWNjb3JkaW5nbHkuXHJcbiAgICAgIC8vIFRoaXMgcHJldmVudHMgdGhlIGxheW91dCBsb29raW5nIHNxdWFzaGVkIHdoZW4gbmV3IG5vZGVzIGFyZSBtYWRlIHZpc2libGUgb3IgbG9va2luZyBzcGFyc2Ugd2hlbiBub2RlcyBhcmUgcmVtb3ZlZFxyXG4gICAgICAvLyBUaGlzIG1ha2VzIHRoZSBsYXlvdXQgbW9yZSBjb25zaXN0ZW50LlxyXG4gICAgICB2YXIgbGV2ZWxXaWR0aCA9IFsxXTtcclxuICAgICAgdmFyIGNoaWxkQ291bnQgPSBmdW5jdGlvbihsZXZlbCwgbikgXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAobi5jaGlsZHJlbiAmJiBuLmNoaWxkcmVuLmxlbmd0aCA+IDApIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChsZXZlbFdpZHRoLmxlbmd0aCA8PSBsZXZlbCArIDEpIHsgbGV2ZWxXaWR0aC5wdXNoKDApOyB9XHJcblxyXG4gICAgICAgICAgbGV2ZWxXaWR0aFtsZXZlbCArIDFdICs9IG4uY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICAgICAgbi5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsgY2hpbGRDb3VudChsZXZlbCArIDEsIGQpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBjaGlsZENvdW50KDAsIHJvb3QpO1xyXG4gICAgICB2YXIgbmV3SGVpZ2h0ID0gZDMubWF4KGxldmVsV2lkdGgpICogMjU7IC8vIDI1IHBpeGVscyBwZXIgbGluZSAgXHJcbiAgICAgIHRyZWUgPSB0cmVlLnNpemUoW25ld0hlaWdodCwgdmlld2VyV2lkdGhdKTtcclxuICBcclxuICAgICAgLy8gQ29tcHV0ZSB0aGUgbmV3IHRyZWUgbGF5b3V0LlxyXG4gICAgICB2YXIgbm9kZXMgPSB0cmVlLm5vZGVzKHJvb3QpLnJldmVyc2UoKTtcclxuICAgICAgdmFyIGxpbmtzID0gdHJlZS5saW5rcyhub2Rlcyk7XHJcbiAgXHJcbiAgICAgIC8vIFNldCB3aWR0aHMgYmV0d2VlbiBsZXZlbHMgYmFzZWQgb24gbWF4TGFiZWxMZW5ndGguXHJcbiAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgZC55ID0gKGQuZGVwdGggKiAobWF4TGFiZWxMZW5ndGggKiAxMCkpOyAvL21heExhYmVsTGVuZ3RoICogMTBweFxyXG4gICAgICAgICAgLy8gYWx0ZXJuYXRpdmVseSB0byBrZWVwIGEgZml4ZWQgc2NhbGUgb25lIGNhbiBzZXQgYSBmaXhlZCBkZXB0aCBwZXIgbGV2ZWxcclxuICAgICAgICAgIC8vIE5vcm1hbGl6ZSBmb3IgZml4ZWQtZGVwdGggYnkgY29tbWVudGluZyBvdXQgYmVsb3cgbGluZVxyXG4gICAgICAgICAgLy8gZC55ID0gKGQuZGVwdGggKiA1MDApOyAvLzUwMHB4IHBlciBsZXZlbC5cclxuICAgICAgfSk7XHJcbiAgXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgbm9kZXPigKZcclxuICAgICAgbm9kZSA9IHN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKS5kYXRhKG5vZGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkIHx8IChkLmlkID0gKytpKTsgfSk7XHJcbiAgXHJcbiAgICAgIC8vIEVudGVyIGFueSBuZXcgbm9kZXMgYXQgdGhlIHBhcmVudCdzIHByZXZpb3VzIHBvc2l0aW9uLlxyXG4gICAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcImdcIilcclxuICAgICAgICAuY2FsbChkcmFnTGlzdGVuZXIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGVcIilcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS55MCArIFwiLFwiICsgc291cmNlLngwICsgXCIpXCI7IH0pXHJcbiAgICAgICAgLm9uKCdjbGljaycsIGNsaWNrKTtcclxuXHJcbiAgICAgIG5vZGVFbnRlci5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbm9kZUNpcmNsZScpXHJcbiAgICAgICAgLmF0dHIoXCJyXCIsIDApXHJcbiAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChkKSA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiOyB9KTtcclxuXHJcbiAgICAgIG5vZGVFbnRlci5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyAtMTAgOiAxMDsgfSlcclxuICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbm9kZVRleHQnKVxyXG4gICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5oYXNDaGlsZHJlbihkKSA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7IH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5uYW1lOyB9KVxyXG4gICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAgIC8vIHBoYW50b20gbm9kZSB0byBnaXZlIHVzIG1vdXNlb3ZlciBpbiBhIHJhZGl1cyBhcm91bmQgaXRcclxuICAgICAgbm9kZUVudGVyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZScpXHJcbiAgICAgICAgLmF0dHIoXCJyXCIsIDMwKVxyXG4gICAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCAwLjIpIC8vIGNoYW5nZSB0aGlzIHRvIHplcm8gdG8gaGlkZSB0aGUgdGFyZ2V0IGFyZWFcclxuICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIFwicmVkXCIpXHJcbiAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ21vdXNlb3ZlcicpXHJcbiAgICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uKG5vZGUpIHsgb3ZlckNpcmNsZShub2RlKTsgfSlcclxuICAgICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbihub2RlKSB7IG91dENpcmNsZShub2RlKTsgfSk7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgdGhlIHRleHQgdG8gcmVmbGVjdCB3aGV0aGVyIG5vZGUgaGFzIGNoaWxkcmVuIG9yIG5vdC5cclxuICAgICAgbm9kZS5zZWxlY3QoJ3RleHQnKVxyXG4gICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyAtMTAgOiAxMDsgfSlcclxuICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5oYXNDaGlsZHJlbihkKSA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7IH0pXHJcbiAgICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLm5hbWU7IH0pO1xyXG5cclxuICAgICAgLy8gQ2hhbmdlIHRoZSBjaXJjbGUgZmlsbCBkZXBlbmRpbmcgb24gd2hldGhlciBpdCBoYXMgY2hpbGRyZW4gYW5kIGlzIGNvbGxhcHNlZFxyXG4gICAgICBub2RlLnNlbGVjdChcImNpcmNsZS5ub2RlQ2lyY2xlXCIpXHJcbiAgICAgICAgLmF0dHIoXCJyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGNvbXB1dGVOb2RlU2l6ZShkKTsgfSlcclxuICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKGQpID8gXCJsaWdodHN0ZWVsYmx1ZVwiIDogXCIjZmZmXCI7IH0pO1xyXG5cclxuICAgICAgLy8gVHJhbnNpdGlvbiBub2RlcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICAgIHZhciBub2RlVXBkYXRlID0gbm9kZS50cmFuc2l0aW9uKClcclxuICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnkgKyBcIixcIiArIGQueCArIFwiKVwiOyB9KTtcclxuXHJcbiAgICAgIC8vIEZhZGUgdGhlIHRleHQgaW5cclxuICAgICAgbm9kZVVwZGF0ZS5zZWxlY3QoXCJ0ZXh0XCIpLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDEpO1xyXG5cclxuICAgICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5vZGVzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXHJcbiAgICAgIHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueSArIFwiLFwiICsgc291cmNlLnggKyBcIilcIjsgfSlcclxuICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgIG5vZGVFeGl0LnNlbGVjdChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCAwKTtcclxuICAgICAgbm9kZUV4aXQuc2VsZWN0KFwidGV4dFwiKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgbGlua3PigKZcclxuICAgICAgdmFyIGxpbmsgPSBzdmdHcm91cC5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIikuZGF0YShsaW5rcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50YXJnZXQuaWQ7IH0pO1xyXG5cclxuICAgICAgLy8gRW50ZXIgYW55IG5ldyBsaW5rcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXHJcbiAgICAgIGxpbmsuZW50ZXIoKS5pbnNlcnQoXCJwYXRoXCIsIFwiZ1wiKVxyXG4gICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtcIilcclxuICAgICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG8gPSB7IHg6IHNvdXJjZS54MCwgeTogc291cmNlLnkwIH07XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGRpYWdvbmFsKHsgc291cmNlOiBvLCB0YXJnZXQ6IG8gfSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFRyYW5zaXRpb24gbGlua3MgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxyXG4gICAgICBsaW5rLnRyYW5zaXRpb24oKS5kdXJhdGlvbihkdXJhdGlvbikuYXR0cihcImRcIiwgZGlhZ29uYWwpO1xyXG5cclxuICAgICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5vZGVzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXHJcbiAgICAgIGxpbmsuZXhpdCgpLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICB2YXIgbyA9IHsgeDogc291cmNlLngsIHk6IHNvdXJjZS55IH07XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGRpYWdvbmFsKHsgc291cmNlOiBvLCB0YXJnZXQ6IG8gfSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgLy8gU3Rhc2ggdGhlIG9sZCBwb3NpdGlvbnMgZm9yIHRyYW5zaXRpb24uXHJcbiAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgZC54MCA9IGQueDtcclxuICAgICAgICAgIGQueTAgPSBkLnk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gQXBwZW5kIGEgZ3JvdXAgd2hpY2ggaG9sZHMgYWxsIG5vZGVzIGFuZCB3aGljaCB0aGUgem9vbSBMaXN0ZW5lciBjYW4gYWN0IHVwb24uXHJcbiAgICB2YXIgc3ZnR3JvdXAgPSBiYXNlU3ZnLmFwcGVuZChcImdcIik7XHJcbiAgXHJcbiAgICAvLyBEZWZpbmUgdGhlIHJvb3RcclxuICAgIHJvb3QgPSBwcm9qZWN0LnRyZWU7XHJcbiAgICByb290LngwID0gdmlld2VySGVpZ2h0IC8gMjtcclxuICAgIHJvb3QueTAgPSAwO1xyXG4gIFxyXG4gICAgLy9yb290LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHsgcHJvamVjdC5mdWxseUNvbGxhcHNlTm9kZShjaGlsZCk7IH0pOyAgIC8vIENvbGxhcHNlIGFsbCBjaGlsZHJlbiBvZiByb290cyBjaGlsZHJlbiBiZWZvcmUgcmVuZGVyaW5nLlxyXG4gIFxyXG4gICAgLy8gTGF5b3V0IHRoZSB0cmVlIGluaXRpYWxseSBhbmQgY2VudGVyIG9uIHRoZSByb290IG5vZGUuXHJcbiAgICB1cGRhdGUocm9vdCk7XHJcbiAgICBjZW50ZXJOb2RlKHJvb3QpOyAgICBcclxuICB9XHJcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9