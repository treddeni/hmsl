function aggregate_any(e,a){if(e.children&&0!==e.children.length){for(var l=0,n=0;n<e.children.length;n++)l+=aggregate_any(e.children[n],a);return e.values||(e.values={}),e.values[a]=l,document.getElementById(a+e.id).value=l,l}return e.values&&e.values[a]?parseFloat(e.values[a]):0}
var DOWN_ARROW_IMAGE_PATH="images/down-arrow.png",CHECK_MARK_IMAGE_PATH="images/checkmark.png",BLANK_MARK_IMAGE_PATH="images/blankmark.png";
function displayTreeView(t){function e(t,n,r){if(t){n(t);var a=r(t);if(a)for(var l=a.length,i=0;l>i;i++)e(a[i],n,r)}}function n(){A.sort(function(t,e){return e.name.toLowerCase()<t.name.toLowerCase()?1:-1})}function r(t,e){var n=m;panTimer&&(clearTimeout(panTimer),translateCoords=d3.transform(z.attr("transform")),"left"==e||"right"==e?(translateX="left"==e?translateCoords.translate[0]+n:translateCoords.translate[0]-n,translateY=translateCoords.translate[1]):("up"==e||"down"==e)&&(translateX=translateCoords.translate[0],translateY="up"==e?translateCoords.translate[1]+n:translateCoords.translate[1]-n),scaleX=translateCoords.scale[0],scaleY=translateCoords.scale[1],scale=X.scale(),z.transition().attr("transform","translate("+translateX+","+translateY+")scale("+scale+")"),d3.select(t).select("g.node").attr("transform","translate("+translateX+","+translateY+")"),X.scale(X.scale()),X.translate([translateX,translateY]),panTimer=setTimeout(function(){r(t,n,e)},50))}function a(){z.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function l(t,e){p=t,d3.select(e).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(e).attr("class","node activeDrag"),z.selectAll("g.node").sort(function(t,e){return t.id!=p.id?1:-1}),nodes.length>1&&(links=A.links(nodes),nodePaths=z.selectAll("path.link").data(links,function(t){return t.target.id}).remove(),nodesExit=z.selectAll("g.node").data(nodes,function(t){return t.id}).filter(function(t,e){return t.id==p.id?!1:!0}).remove()),parentLink=A.links(A.nodes(p.parent)),z.selectAll("path.link").filter(function(t,e){return t.target.id==p.id?!0:!1}).remove(),dragStarted=null}function i(){v=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),N(),null!==p&&(u(h),o(p),p=null)}function s(t){t._children&&(t.children=t._children,t.children.forEach(s),t._children=[])}function o(t){scale=X.scale(),x=-t.y0,y=-t.x0,x=x*scale+T/2,y=y*scale+w/2,d3.select("g").transition().duration(k).attr("transform","translate("+x+","+y+")scale("+scale+")"),X.scale(scale),X.translate([x,y])}function c(t){return t.children?(t._children=t.children,t.children=[]):t._children&&(t.children=t._children,t._children=[]),t}function d(t){d3.event.defaultPrevented||(t=c(t),u(t),o(t))}function u(t){var e=function(t,e){return t.values&&t.values[e]&&t.values[e]>5?t.values[e]:5},n=[1],r=function(t,e){e.children&&e.children.length>0&&(n.length<=t+1&&n.push(0),n[t+1]+=e.children.length,e.children.forEach(function(e){r(t+1,e)}))};r(0,h);var a=25*d3.max(n);A=A.size([a,T]);var l=A.nodes(h).reverse(),i=A.links(l);l.forEach(function(t){t.y=10*t.depth*g}),node=z.selectAll("g.node").data(l,function(t){return t.id||(t.id=++_)});var s=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).on("click",d);s.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(t){return t._children?"lightsteelblue":"#fff"}),s.append("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}).style("fill-opacity",0),s.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(t){b(t)}).on("mouseout",function(t){L(t)}),node.select("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}),node.select("circle.nodeCircle").attr("r",function(t){return e(t)}).style("fill",function(t){return t._children?"lightsteelblue":"#fff"});var o=node.transition().duration(k).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});o.select("text").style("fill-opacity",1);var c=node.exit().transition().duration(k).attr("transform",function(e){return"translate("+t.y+","+t.x+")"}).remove();c.select("circle").attr("r",0),c.select("text").style("fill-opacity",0);var u=z.selectAll("path.link").data(i,function(t){return t.target.id});u.enter().insert("path","g").attr("class","link").attr("d",function(e){var n={x:t.x0,y:t.y0};return E({source:n,target:n})}),u.transition().duration(k).attr("d",E),u.exit().transition().duration(k).attr("d",function(e){var n={x:t.x,y:t.y};return E({source:n,target:n})}).remove(),l.forEach(function(t){t.x0=t.x,t.y0=t.y})}$("body").append('<div id="tree-container"></div>');var h,f=0,g=0,v=null,p=null,m=200,C=20,_=0,k=750,T=$("#tree-container").width(),w=$("#tree-container").height(),A=d3.layout.tree().size([w,T]),E=d3.svg.diagonal().projection(function(t){return[t.y,t.x]});e(t,function(t){f++,g=Math.max(t.name.length,g)},function(t){return t.children&&t.children.length>0?t.children:null}),n();var X=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",a),Y=d3.select("#tree-container").append("svg").attr("width",T).attr("height",w).attr("class","overlay").call(X);dragListener=d3.behavior.drag().on("dragstart",function(t){t!=h&&(dragStarted=!0,nodes=A.nodes(t),d3.event.sourceEvent.stopPropagation())}).on("drag",function(t){if(t!=h){if(dragStarted&&(domNode=this,l(t,domNode)),relCoords=d3.mouse($("svg").get(0)),relCoords[0]<C)panTimer=!0,r(this,"left");else if(relCoords[0]>$("svg").width()-C)panTimer=!0,r(this,"right");else if(relCoords[1]<C)panTimer=!0,r(this,"up");else if(relCoords[1]>$("svg").height()-C)panTimer=!0,r(this,"down");else try{clearTimeout(panTimer)}catch(e){}t.x0+=d3.event.dy,t.y0+=d3.event.dx;var n=d3.select(this);n.attr("transform","translate("+t.y0+","+t.x0+")"),N()}}).on("dragend",function(t){if(t!=h)if(domNode=this,v){var e=p.parent.children.indexOf(p);e>-1&&p.parent.children.splice(e,1),v.children||v._children?v.children?v.children.push(p):v._children.push(p):(v.children=[],v.children.push(p)),s(v),n(),i()}else i()});var b=function(t){v=t,N()},L=function(t){v=null,N()},N=function(){var t=[];null!==p&&null!==v&&(t=[{source:{x:v.y0,y:v.x0},target:{x:p.y0,y:p.x0}}]);var e=z.selectAll(".templink").data(t);e.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),e.attr("d",d3.svg.diagonal()),e.exit().remove()},z=Y.append("g");h=t,h.x0=w/2,h.y0=0,u(h),o(h)}
"use strict";var REDIPS=REDIPS||{};REDIPS.drag=function(){var e,o,t,n,r,d,l,i,a,s,c,f,p,g,u,v,y,m,h,w,E,b,D,I,S,R,P,x,N,T,C,B,j,k=null,L={width:0,height:0},M={width:null,height:null,container:[],obj:null},O={page:{x:0,y:0},div:{x:0,y:0},flag:{x:0,y:0}},Y=[],H=[],W=null,_=null,X={x:0,y:0},A={x:0,y:0,value:7,flag:!1},V=!1,z=!1,F=null,q=null,K=null,$=null,G=null,J=null,Q=!1,U=!1,Z={colorTd:"#FFCFAE",colorTr:"#9BB3DA"},ee={enable:!0,bound:25,speed:20},oe={borderDisabled:"dotted",opacityDisabled:"",rowEmptyColor:"white"},te={},ne={keyDiv:!1,keyRow:!1,sendBack:!1,drop:!1},re={cloned:function(){},clonedDropped:function(){},clonedEnd1:function(){},clonedEnd2:function(){},dropped:function(){},droppedBefore:function(){},finish:function(){},notCloned:function(){},notMoved:function(){},rowChanged:function(){},rowClicked:function(){},rowCloned:function(){},rowDropped:function(){},rowDroppedBefore:function(){},rowDroppedSource:function(){},rowMoved:function(){},rowNotCloned:function(){},rowNotMoved:function(){}};return e=function(){if(W=document.getElementById("redips-drag"),j=m(),!document.getElementById("redips_clone")){var e=document.createElement("div");e.id="redips_clone",e.style.width=e.style.height="1px",W.appendChild(e)}o("init",".redips-drag"),T=document.getElementById("treeTable"),T.redips={},c(),REDIPS.event.add(window,"resize",c),REDIPS.event.add(window,"scroll",y)},n=function(e){var o,t,n,l,i=e||window.event;if(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),V=i.shiftKey,window.getSelection)window.getSelection().removeAllRanges();else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(a){}return n=X.x=i.clientX,l=X.y=i.clientY,A.x=n,A.y=l,A.flag=!1,REDIPS.drag.objOld=U=Q||this,REDIPS.drag.obj=Q=this,z=Q.className.indexOf("redips-clone")>-1,REDIPS.drag.obj=Q=R(Q),y(),F=$=null,f(),K=q=F,J=G=$,REDIPS.drag.event.rowClicked(te.current),null!==F&&null!==$||(f(),K=q=F,J=G=$,null!==F&&null!==$)?(C=B=!1,REDIPS.event.add(document,"mousemove",d),REDIPS.event.add(document,"mouseup",r),null!==F&&(N=u(F)),t=D(T,"position"),"fixed"!==t&&(t=D(T.parentNode,"position")),o=v(Q,t),k=[l-o[0],o[1]-n,o[2]-l,n-o[3]],!1):!0},R=function(e){var o,t,n;return"DIV"===e.nodeName?(n=e,e=I("TR",e),void 0===e.redips&&(e.redips={}),e.redips.div=n,e):(t=e,o=document.createElement("table"),o.innerHTML='<tr id="'+t.id+'" class="'+t.classList+'">'+t.innerHTML+"</tr>",o.redips={},o.redips.sourceRow=t,E(t,o.rows[0]),document.getElementById("redips_clone").appendChild(o),o)},P=function(e){var o,t,n;n=function(e){var o;void 0!==e.redips&&e.redips.emptyRow?S(e,"empty",REDIPS.drag.style.rowEmptyColor):(o=I("TABLE",e),o.deleteRow(e.rowIndex))};var r=Q;e>T.rows.length-1&&(e=T.rows.length-1);var d=T.rows[e];t=r.getElementsByTagName("tr")[0],r.parentNode.removeChild(r),o=REDIPS.drag.event.rowDroppedBefore(T,r.redips.sourceRow.rowIndex),o!==!1&&(e<T.rows.length?d.parentNode.insertBefore(t,d.nextSibling):(d.parentNode.appendChild(t),d=T.rows[0]),B||n(r.redips.sourceRow),delete t.redips.emptyRow,REDIPS.drag.event.rowDropped(d))},r=function(e){var o,t,n,a,s,c,f=e||window.event;if(n=f.clientX,a=f.clientY,O.flag.x=O.flag.y=0,REDIPS.event.remove(document,"mousemove",d),REDIPS.event.remove(document,"mouseup",r),W.onselectstart=null,i(Q),M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,O.flag.x=O.flag.y=0,null===F||null===$)REDIPS.drag.event.notMoved();else{if(REDIPS.drag.td.target=te.target=T.rows[F].cells[$],g(F,N),o=F,C)if(K===o){for(t=Q.getElementsByTagName("tr")[0],U.style.backgroundColor=t.style.backgroundColor,s=0;s<t.cells.length;s++)U.cells[s].style.backgroundColor=t.cells[s].style.backgroundColor;Q.parentNode.removeChild(Q),delete U.redips.emptyRow,B?REDIPS.drag.event.rowNotCloned():REDIPS.drag.event.rowDroppedSource(te.target)}else P(o);else REDIPS.drag.event.rowNotMoved();B||A.flag?B&&K===F&&J===$?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):B&&REDIPS.drag.clone.drop===!1&&(n<T.redips.offset[3]||n>T.redips.offset[1]||a<T.redips.offset[0]||a>T.redips.offset[2])?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):(c=REDIPS.drag.event.droppedBefore(te.target),l(c)):REDIPS.drag.event.notMoved(),y(),REDIPS.drag.event.finish()}q=G=null},l=function(e){var o,t=null;if(e!==!1){if(ne.sendBack===!0){o=te.target.getElementsByTagName("DIV");for(var n=0;n<o.length;n++)if(Q!==o[n]&&0===Q.id.indexOf(o[n].id)){t=o[n];break}if(t)return b(t,1),void Q.parentNode.removeChild(Q)}te.target.appendChild(Q),a(Q),REDIPS.drag.event.dropped(te.target),B&&(REDIPS.drag.event.clonedDropped(te.target),b(U,-1))}else B&&Q.parentNode&&Q.parentNode.removeChild(Q)},a=function(e,o){e.onmousedown=o===!1?null:n},i=function(e){e.style.top="",e.style.left="",e.style.position="",e.style.zIndex=""},d=function(e){var o,t,n,r,d,l,i,a=e||window.event,c=REDIPS.drag.scroll.bound;if(t=X.x=a.clientX,n=X.y=a.clientY,r=Math.abs(A.x-t),d=Math.abs(A.y-n),C||((z||REDIPS.drag.clone.keyRow===!0&&V)&&(B=!0),REDIPS.drag.objOld=U=Q,REDIPS.drag.obj=Q=R(Q),Q.style.zIndex=999,Q.style.position="fixed",y(),f(),B?REDIPS.drag.event.rowCloned():REDIPS.drag.event.rowMoved(),p(),t>L.width-k[1]&&(Q.style.left=L.width-(k[1]+k[3])+"px"),n>L.height-k[2]&&(Q.style.top=L.height-(k[0]+k[2])+"px")),C=!0,t>k[3]&&t<L.width-k[1]&&(Q.style.left=t-k[3]+"px"),n>k[0]&&n<L.height-k[2]&&(Q.style.top=n-k[0]+"px"),t<_[1]&&t>_[3]&&n<_[2]&&n>_[0]&&0===O.flag.x&&0===O.flag.y&&(H.containTable||t<H[3]||t>H[1]||n<H[0]||n>H[2])&&(f(),s()),REDIPS.drag.scroll.enable)for(O.page.x=c-(L.width/2>t?t-k[3]:L.width-t-k[1]),O.page.x>0?(O.page.x>c&&(O.page.x=c),i=0,O.page.x*=t<L.width/2?-1:1,O.page.x<0&&0>=i||O.page.x>0&&i>=M.width-L.width||0===O.flag.x++&&(REDIPS.event.remove(window,"scroll",y),h(window))):O.page.x=0,O.page.y=c-(L.height/2>n?n-k[0]:L.height-n-k[2]),O.page.y>0?(O.page.y>c&&(O.page.y=c),i=window.pageYOffset||document.documentElement.scrollTop,O.page.y*=n<L.height/2?-1:1,O.page.y<0&&0>=i||O.page.y>0&&i>=M.height-L.height||0===O.flag.y++&&(REDIPS.event.remove(window,"scroll",y),w(window))):O.page.y=0,l=0;l<M.container.length;l++){if(o=M.container[l],o.autoscroll&&t<o.offset[1]&&t>o.offset[3]&&n<o.offset[2]&&n>o.offset[0]){O.div.x=c-(o.midstX>t?t-k[3]-o.offset[3]:o.offset[1]-t-k[1]),O.div.x>0?(O.div.x>c&&(O.div.x=c),O.div.x*=t<o.midstX?-1:1,0===O.flag.x++&&(REDIPS.event.remove(o.div,"scroll",y),h(o.div))):O.div.x=0,O.div.y=c-(o.midstY>n?n-k[0]-o.offset[0]:o.offset[2]-n-k[2]),O.div.y>0?(O.div.y>c&&(O.div.y=c),O.div.y*=n<o.midstY?-1:1,0===O.flag.y++&&(REDIPS.event.remove(o.div,"scroll",y),w(o.div))):O.div.y=0;break}O.div.x=O.div.y=0}a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},s=function(){(F!==q||$!==G)&&(null!==q&&null!==G&&(g(q,N),REDIPS.drag.td.previous=te.previous=T.rows[q].cells[G],REDIPS.drag.td.current=te.current=T.rows[F].cells[$],F!==q&&REDIPS.drag.event.rowChanged(te.current)),p())},c=function(){L.width=window.innerWidth,L.height=window.innerHeight,M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,y()},f=function(){var e,o,t,n,r,d,l=[];if(e=function(){null!==q&&null!==G&&(F=q,$=G)},n=X.x,r=X.y,l[0]=T.redips.offset[0],l[1]=T.redips.offset[1],l[2]=T.redips.offset[2],l[3]=T.redips.offset[3],void 0!==T.sca&&(l[0]=l[0]>T.sca.offset[0]?l[0]:T.sca.offset[0],l[1]=l[1]<T.sca.offset[1]?l[1]:T.sca.offset[1],l[2]=l[2]<T.sca.offset[2]?l[2]:T.sca.offset[2],l[3]=l[3]>T.sca.offset[3]?l[3]:T.sca.offset[3]),l[3]<n&&n<l[1]&&l[0]<r&&r<l[2]){for(o=T.redips.row_offset,F=0;F<o.length-1;F++)if(void 0!==o[F]){if(H[0]=o[F][0],void 0!==o[F+1])H[2]=o[F+1][0];else for(d=F+2;d<o.length;d++)if(void 0!==o[d]){H[2]=o[d][0];break}if(r<=H[2])break}t=F,F===o.length-1&&(H[0]=o[F][0],H[2]=T.redips.offset[2]),$=0,0>F||0>$?e():F!==t&&(H[0]=o[F][0],H[2]=H[0]+T.rows[F].cells[$].offsetHeight,(r<H[0]||r>H[2])&&e())}},p=function(){null!==F&&null!==$&&(N=u(F),g(F),q=F,G=$)},g=function(e,o){var t,n;t=T.rows[e];for(var r=0;r<t.cells.length;r++)n=t.cells[r].style,n.backgroundColor=void 0===o?REDIPS.drag.hover.colorTr:o.color[r].toString(),void 0!==REDIPS.drag.hover.borderTr&&(void 0===o?K>F?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:(n.borderTopWidth=o.top[r][0],n.borderTopStyle=o.top[r][1],n.borderTopColor=o.top[r][2],n.borderBottomWidth=o.bottom[r][0],n.borderBottomStyle=o.bottom[r][1],n.borderBottomColor=o.bottom[r][2]))},u=function(e){var o,t,n={color:[],top:[],right:[],bottom:[],left:[]},r=function(e,o){var t="border"+o+"Width",n="border"+o+"Style",r="border"+o+"Color";return[D(e,t),D(e,n),D(e,r)]};o=T.rows[e];for(var d=0;d<o.cells.length;d++)t=o.cells[d],n.color[d]=t.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTr&&(n.top[d]=r(t,"Top"),n.bottom[d]=r(t,"Bottom"));return n},v=function(e,o,t){var n=0,r=0,d=e;if("fixed"!==o&&(n=0-j[0],r=0-j[1]),void 0===t||t===!0){do n+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName)}else do n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName);return[r,n+d.offsetWidth,r+d.offsetHeight,n]},y=function(){var e,o,t;j=m(),e=[],o=D(T,"position"),"fixed"!==o&&(o=D(T.parentNode,"position"));for(var n=T.rows.length-1;n>=0;n--)"none"!==T.rows[n].style.display&&(e[n]=v(T.rows[n],o));T.redips.offset=v(T,o),T.redips.row_offset=e,_=v(W);for(var n=0;n<M.container.length;n++)o=D(M.container[n].div,"position"),t=v(M.container[n].div,o,!1),M.container[n].offset=t,M.container[n].midstX=(t[1]+t[3])/2,M.container[n].midstY=(t[0]+t[2])/2},m=function(){var e=window.pageYOffset||document.documentElement.scrollTop,o=0;return[o,e]},h=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.x>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[0],r=M.width-L.width,d=O.page.x):(n=M.obj.scrollLeft,r=M.obj.scrollWidth-M.obj.clientWidth,d=O.div.x),O.flag.x>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(d,0),n=m()[0],o=parseInt(Q.style.left,10),isNaN(o)&&(o=0)):M.obj.scrollLeft+=d,setTimeout(h,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.x=0,H=[0,0,0,0])},w=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.y>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[1],r=M.height-L.height,d=O.page.y):(n=M.obj.scrollTop,r=M.obj.scrollHeight-M.obj.clientHeight,d=O.div.y),O.flag.y>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(0,d),n=m()[1],o=parseInt(Q.style.top,10),isNaN(o)&&(o=0)):M.obj.scrollTop+=d,setTimeout(w,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.y=0,H=[0,0,0,0])},E=function(e,o){var t,n=[];n[0]=function(e,o){e.redips&&(o.redips={},o.redips.enabled=e.redips.enabled,o.redips.container=e.redips.container,e.redips.enabled&&a(o))},n[1]=function(e,o){e.redips&&(o.redips={},o.redips.emptyRow=e.redips.emptyRow)},t=function(t){var r,d,l=["DIV","TR"];r=e.getElementsByTagName(l[t]),d=o.getElementsByTagName(l[t]);for(var i=0;i<d.length;i++)n[t](r[i],d[i])},"DIV"===e.nodeName?n[0](e,o):"TR"===e.nodeName&&n[1](e,o),t(0),t(1)},b=function(e,t){var n,r,d,l;l=e.className,n=l.match(/climit(\d)_(\d+)/),null!==n&&(r=parseInt(n[1],10),d=parseInt(n[2],10),0===d&&1===t&&(l+=" redips-clone",2===r&&o(!0,e)),d+=t,l=l.replace(/climit\d_\d+/g,"climit"+r+"_"+d),0>=d&&(l=l.replace("redips-clone",""),2===r?(o(!1,e),REDIPS.drag.event.clonedEnd2()):REDIPS.drag.event.clonedEnd1()),e.className=x(l))},o=function(e,o){var n=[];void 0===o?n=W.getElementsByTagName("div"):"string"==typeof o?n=document.querySelectorAll(o):"object"!=typeof o||"DIV"===o.nodeName&&-1!==o.className.indexOf("redips-drag")?n[0]=o:n=o.getElementsByTagName("div"),t(e,n)},t=function(e,o){var t,n,r,d,l,i,s,c,f,p,g,u=[],m=/\bredips-drag\b/i,h=/\bredips-noautoscroll\b/i;for(l=REDIPS.drag.style.opacityDisabled,e===!0||"init"===e?(d=REDIPS.drag.style.borderEnabled,i="move",f=!0):(d=REDIPS.drag.style.borderDisabled,i="auto",f=!1),t=0,n=0;t<o.length;t++)if(m.test(o[t].className))"init"===e||void 0===o[t].redips?(o[t].redips={},o[t].redips.container=W):e===!0&&"number"==typeof l?(o[t].style.opacity="",o[t].style.filter=""):e===!1&&"number"==typeof l&&(o[t].style.opacity=l/100,o[t].style.filter="alpha(opacity="+l+")"),a(o[t],f),o[t].style.borderStyle=d,o[t].style.cursor=i,o[t].redips.enabled=f;else if("init"===e&&(s=D(o[t],"overflow"),"visible"!==s)){for(REDIPS.event.add(o[t],"scroll",y),g=D(o[t],"position"),p=v(o[t],g,!1),c=!h.test(o[t].className),M.container[n]={div:o[t],offset:p,midstX:(p[1]+p[3])/2,midstY:(p[0]+p[2])/2,autoscroll:c},u=o[t].getElementsByTagName("table"),r=0;r<u.length;r++)u[r].sca=M.container[n];n++}},D=function(e,o){return e&&e.currentStyle?e.currentStyle[o]:e&&window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[o]:void 0},I=function(e,o){for(o=o.parentNode;o&&o.nodeName!==e;)o=o.parentNode;return o},x=function(e){return void 0!==e&&(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ")),e},S=function(e,o,t){var n,r,d;if("string"==typeof e&&(e=document.getElementById(e),e=I("TABLE",e)),"TR"===e.nodeName)for(n=e.getElementsByTagName("td"),r=0;r<n.length;r++)if(n[r].style.backgroundColor=t?t:"","empty"===o)n[r].innerHTML="";else for(d=0;d<n[r].childNodes.length;d++)1===n[r].childNodes[d].nodeType&&(n[r].childNodes[d].style.opacity=o/100,n[r].childNodes[d].style.filter="alpha(opacity="+o+")");else e.style.opacity=o/100,e.style.filter="alpha(opacity="+o+")",e.style.backgroundColor=t?t:""},{obj:Q,objOld:U,td:te,hover:Z,scroll:ee,style:oe,clone:ne,init:e,enableDrag:o,enableDivs:t,rowOpacity:S,getScrollPosition:m,getStyle:D,findParent:I,event:re}}(),REDIPS.event||(REDIPS.event=function(){var e,o;return e=function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},o=function(e,o,t){e.removeEventListener?e.removeEventListener(o,t,!1):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=null},{add:e,remove:o}}());
"use strict";var redips={};redips.init=function(){var e=REDIPS.drag;e.init(),e.event.rowDropped=function(o){var n=parseInt(e.objOld.id.replace("rowid","")),t=parseInt(o.id.replace("rowid","")),r=findParentInTree(n).id;moveAssembly(n,t,r)},e.event.rowDroppedSource=function(){e.rowOpacity(e.objOld,100)},e.event.rowMoved=function(){e.rowOpacity(e.obj,85),e.rowOpacity(e.objOld,20,"White")},e.event.rowClicked=function(){},e.event.rowNotMoved=function(){},e.event.rowCloned=function(){},e.event.rowNotCloned=function(){},e.event.rowDeleted=function(){},e.event.rowUndeleted=function(){e.rowOpacity(e.objOld,100)}};
function initProjectActions(){$("#projectActionInput").keyup(function(e){e.keyCode==ENTER_KEY&&projectActionEnterPressed()})}var scrollBarWidth;$(document).ready(function(){scrollBarWidth=getScrollBarWidth(),document.onkeydown=checkKey,$.ajax({type:"GET",url:"api/projects"}).done(function(e){projects=e,$("#header").html(generateHeaderMarkup(projects.projects)),$("#editNewProjectNameInput").keyup(function(e){e.keyCode==ENTER_KEY&&createNewProject()})})});var getScrollBarWidth=function(){var e,t;return e=document.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t};
function checkKey(e){if(e=e||window.event,e.keyCode==KEY_UP_ARROW){e.preventDefault();var t=$(getAncestorTag(document.activeElement,"tr")).prev()[0];t&&$("#"+getNextElementID(t)).focus()}else if(e.keyCode==KEY_DOWN_ARROW){e.preventDefault();var n=$(getAncestorTag(document.activeElement,"tr")).next()[0];n&&$("#"+getNextElementID(n)).focus()}else e.keyCode==KEY_RIGHT_ARROW?(e.preventDefault(),$(getAncestorTag(document.activeElement,"td")).next().find("input").focus()):e.keyCode==KEY_LEFT_ARROW&&(e.preventDefault(),$(getAncestorTag(document.activeElement,"td")).prev().find("input").focus())}function getNextElementID(e){var t=document.activeElement.id;if(t.indexOf("nodeInput")>-1)return"nodeInput"+e.id.replace("rowid","");for(var n=document.activeElement.className.split(" "),r=0;r<n.length;r++){var a=n[r];if(a.indexOf("fieldInput")>-1&&"fieldInput"!=a){var c=a.replace("fieldInput","");return c+e.id.replace("datarowid","")}}}var KEY_UP_ARROW=38,KEY_DOWN_ARROW=40,KEY_LEFT_ARROW=37,KEY_RIGHT_ARROW=39;
function generateSpreadSheetMarkup(){return'<div id="spreadSheetView"><div id="project-action-container"></div><div id="fields-header-row"></div><div id="redips-drag"></div><div id="data-container" onscroll="handleDataScroll()"></div></div>'}function generateHeaderMarkup(e){for(var t='<select id="projectSelector" class="form-control" onchange="selectProject()"><option id="selectProjectOption" value="0">Select Project...</option>',i=0;i<e.length;i++)t+='<option value="'+e[i].id+'">'+e[i].name+"</option>";return t+='<option id="newProjectOption" value="-1">Create New Project...</option></select><input id="editNewProjectNameInput" class="form-control"></input><a href="#" id="save-database-button" class="btn btn-default" onclick="Project.saveToDatabase()">Save to Database</a><a href="#" id="switchViewButton" class="btn btn-default" onclick="Project.switchView()">Switch View</a>'}function generateProjectSelectorMarkup(){return'<table><tr id="headerRow"><tr><div id="project-select-container"><select id="projectActionSelector" class="form-control" onchange="handleProjectAction()"><option value="blank"></option><option value="addField">Add Field</option></select><input id="projectActionInput" class="form-control"></input></div></tr><table>'}function generateFieldsRowMarkup(){for(var e='<table id="fieldHeaderTable"><tr id="fieldHeaderRow">',t=0;t<tree.fields.length;t++)e+=getFieldHeaderMarkup(tree.fields[t].name,t);return e+="</tr></table>"}function generateTreeMarkup(){for(var e='<table id="treeTable">',t=0;t<tree.children.length;t++)e+=addRow(tree.children[t],0,"",0);return e+="</table>"}function addRow(e){var t="",i=10*(e.depth-1),n='<div class="redips-drag pull-right"><i class="glyphicon glyphicon-move"></i></div>',a='<a href="#" class="pull-right btn btn-danger btn-xs delete-button" onclick="deleteNode('+e.id+')"><i class="glyphicon glyphicon-remove"></i></a>',r='<a href="#"  class="pull-right btn btn-info btn-xs copy-button" onclick="copyNode('+e.id+')"><i class="glyphicon glyphicon-plus"></i></a>',d='<a id="expandID'+e.id+'" href="#" style="margin-left:'+i+'px" onclick="toggleExpandIcon('+e.id+')" class="btn btn-xs"><span id="icon'+e.id+'" class="glyphicon glyphicon-chevron-right"></span></a>',l='<a id="expandID'+e.id+'" href="#" style="margin-left:'+i+'px" onclick="toggleExpandIcon('+e.id+')" class="btn btn-xs"><span id="icon'+e.id+'" class="glyphicon glyphicon-chevron-down"></span></a>',o='<a id="expandID'+e.id+'" href="#" style="margin-left:'+i+'px" onclick="toggleExpandIcon('+e.id+')" class="btn btn-xs"><span id="icon'+e.id+'"></span></a>';if(t+='<tr id="rowid'+e.id+'" class="nodeRow"><td class="redips-rowhandler cell"><div class="node-container">',t+=a+r+n,e.children&&e.children.length>0?t+=l:e._children&&e._children.length>0?t+=d:(t+=o,i-=10),t+='<input id="nodeInput'+e.id+'" class="nodeTextInput" type="text" value="'+e.name+'" style="width:'+(DEFAULT_NODE_INPUT_WIDTH-i)+'px" oninput="updateNodeName(this)"/></div></td></tr>',e.children&&e.children.length>0)for(var s in e.children)t+=addRow(e.children[s]);return t}function generateDataMarkup(){for(var e='<table id="dataTable">',t=0;t<tree.children.length;t++)e+=addDataRow(tree.children[t]);return e+="</table>"}function addDataRow(e){for(var t='<tr id="datarowid'+e.id+'" class="dataRow">',i=0;i<tree.fields.length;i++){var n=tree.fields[i],a="";e.values&&e.values[n.name]&&(a=Field.formatValue(n,e.values[n.name])),t+=getFieldCellMarkup(n.name,e.id,a)}if(t+="</tr>",e.children&&e.children.length>0)for(var i=0;i<e.children.length;i++)t+=addDataRow(e.children[i]);return t}function addColumn(e){$("#fieldHeaderRow").append(getFieldHeaderMarkup(e,tree.fields.length)),$(".dataRow").each(function(t,i){$(i).append(getFieldCellMarkup(e,i.id.replace("datarowid","")))})}function getFieldHeaderMarkup(e,t){return'<td class="fieldHeaderCell"><div class="fieldHeaderContainer"><div class="moveColGrip"></div><div class="fieldNameInputContainer"><textarea id="colHeaderInput'+e+'" class="fieldNameInput">'+e+'</textarea></div><div class="fieldHeaderButton"><img src="images/down-arrow.png" onclick="showMenu(event, \''+e+'\');" style="cursor:pointer"/></div><div id="grip'+t+'" class="resizeColGrip" onmousedown="startResize(event, this)"></div></div></td>'}function getFieldCellMarkup(e,t,i){return'<td class="cell"><input class="fieldInput fieldInput'+e+'" type="text" id="'+e+t+'" value="'+i+'" oninput="updateFieldValue(\''+e+"', '"+t+"')\" onfocus=\"displayRawValue('"+e+"', '"+t+"')\"/></td>"}function getFieldMenuMarkup(e,t,i){var n=Project.getField(e),a=new Menu,r=new MenuItem("Number",Field.NUMBER,"datatype",n),d=new MenuItem("Format"),l=new MenuItem("Number",Field.NUMBER_FORMAT,"format",n);l.items.push(new MenuItem("0",0,"precision",n));for(var o="0.",s=1;11>s;s++)o+="0",l.items.push(new MenuItem(o,s,"precision",n));d.items.push(l);var c=new MenuItem("Percent",Field.PERCENT_FORMAT,"format",n);c.items.push(new MenuItem("0",0,"precision",n));for(var o="0.",s=1;11>s;s++)o+="0",c.items.push(new MenuItem(o+"%",s,"precision",n));d.items.push(c);var u=new MenuItem("Scientific",Field.SCIENTIFIC_FORMAT,"format",n);u.items.push(new MenuItem("0",0,"precision",n));for(var o="0.",s=1;11>s;s++)o+="0",u.items.push(new MenuItem(o+"e+0",s,"precision",n));d.items.push(u),r.items.push(d);var p=new MenuItem("Aggregation");p.items.push(new MenuItem("No Aggregation",Field.NO_AGGREGATION,"agg_type",n));for(var h=new MenuItem("Sum any defined children",Field.SUM_ANY_AGGREGATION,"agg_type",n),s=0;s<tree.fields.length;s++){var m=tree.fields[s];m.name!=n.name&&h.items.push(new MenuItem(m.name,m.name,"agg_qty_field",n))}p.items.push(h),r.items.push(p),a.items=[],a.items.push(r),a.items.push(new MenuItem("Text",Field.STRING,"datatype",n));var g='<div id="fieldMenu" style="left:'+t+"px;top:"+i+'px;">';return g+=generateMenuMarkup(a),g+="</div>"}function generateMenuMarkup(e){for(var t="<ul>",i=0;i<e.items.length;i++){var n=e.items[i];t+='<li onclick="Menu.handleClick('+n.id+');">';var a="uncheckedMenuItem";n.field&&n.checked&&(a="checkedMenuItem"),t+='<img id="menuItem'+n.id+'" src="'+CHECK_MARK_IMAGE_PATH+'" class="'+a+'"/>',t+=n.display,n.items&&n.items.length>0&&(t+='<div class="arrowRight"></div>'),n.items&&n.items.length>0&&(t+=generateMenuMarkup(n)),t+="</li>"}return t+"</ul>"}var DEFAULT_NODE_INPUT_WIDTH=390;
function displaySpreadSheet(){Project.cleanseTree(),$("body").append(generateSpreadSheetMarkup()),$("#project-action-container").html(generateProjectSelectorMarkup()),$("#fields-header-row").html(generateFieldsRowMarkup()),$("#fields-header-row").css("right",scrollBarWidth+"px"),$("#data-container").html(generateDataMarkup()),$("#redips-drag").html(generateTreeMarkup()),$("#redips-drag").css("bottom",scrollBarWidth+"px"),redips.init(),initProjectActions()}function projectActionEnterPressed(){if("addField"==$("#projectActionSelector").val()){var e=$("#projectActionInput").val();tree.fields.push(new Field(e)),addColumn(e),$("#projectActionInput").hide(),$("#projectActionSelector").val("blank")}}function createNewProject(){$("#selectProjectOption").remove();var e=$("#editNewProjectNameInput").val();$("#editNewProjectNameInput").hide();var t=projects.nextProjectID.toString(),r=document.createElement("option");r.text=e,r.value=t,$(r).insertBefore("#projectSelector option:nth-child("+$("#projectSelector").length+")"),$("#projectSelector").val(t),$.ajax({type:"POST",url:"/api/addProject?projectName="+e}),tree={projectID:t,projectName:e,name:e,version:1,nextNodeID:2,fields:[],children:[{id:1,name:e,children:[]}]},displaySpreadSheet(),Project.saveToDatabase()}function showMenu(e,t){0===$("#fieldMenu").length&&($(getFieldMenuMarkup(t,e.clientX,e.clientY)).appendTo("body"),$("#fieldMenu").mouseleave(function(){$("#fieldMenu").remove()}))}var handleProjectAction=function(){"addField"==$("#projectActionSelector").val()&&($("#projectActionInput").val("Type New Field Name and Press Enter to Create"),$("#projectActionInput").show().focus().select())};
var resizeColumnLeft=0,resizeField="0",startResize=function(e,i){$(document).bind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).bind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="visible",document.getElementById("resizeLine").style.left=e.pageX+"px",resizeColumnLeft=$(i.parentNode).position().left,resizeField=i.parentNode.id.replace("colHeader","")},resizeEnd=function(e){$(document).unbind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).unbind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="hidden";var i=e.pageX-resizeColumnLeft-GRIPS_WIDTH;i<MIN_COLUMN_WIDTH&&(i=MIN_COLUMN_WIDTH),document.getElementById("colHeaderInput"+resizeField).style.width=i+"px";for(var t=document.querySelectorAll(".fieldInput"+resizeField),r=0;r<t.length;r++)t[r].style.width=i+8+"px"},resizeDrag=function(e){e.pageX>resizeColumnLeft+MIN_COLUMN_WIDTH+GRIPS_WIDTH&&(document.getElementById("resizeLine").style.left=e.pageX+"px")};
function handleDataScroll(){$("#redips-drag").scrollTop($("#data-container").scrollTop()),$("#fields-header-row").scrollLeft($("#data-container").scrollLeft())}function printProject(){console.log(JSON.stringify(tree,null,"	"))}function displayRawValue(e,n){var i=Project.getField(e),r=findNodeInTree(parseInt(n));$("#"+e+n).val(r.values&&r.values[i.name]?r.values[i.name]:"")}function setDepths(e){for(var n in e.children)e.children[n].depth=e.depth+1,setDepths(e.children[n])}function isNodeChildless(e){return!(e.children&&0!==e.children.length||e._children&&0!==e._children.length)}function isNodeCollapsed(e){return e._children&&e._children.length>0}function isNodeExpanded(e){return e.children&&e.children.length>0}function visit(e,n,i,r){if(e){i(e,r);var d=n(e);for(var t in d)visit(d[t],n,i)}}function visitDescendants(e,n,i){if(e)for(var r in e.children)visit(e.children[r],n,i)}function toggleExpandIcon(e){var n=findNodeInTree(e);isNodeExpanded(n)?collapseNode(n):isNodeCollapsed(n)&&expandNode(n)}function collapseNode(e){visitDescendants(e,getChildren,function(e){$("#datarowid"+e.id).remove(),$("#rowid"+e.id).remove()}),e._children=e.children,e.children=[],$("#icon"+e.id).attr("class","glyphicon glyphicon-chevron-right")}function expandNode(e){e.children=e._children,e._children=[];for(var n,i=e.children.length-1;i>=0;i--)n=e.children[i],$(addDataRow(n)).insertAfter($("#datarowid"+e.id)),$(addRow(n,"","")).insertAfter($("#rowid"+e.id));$("#icon"+e.id).attr("class","glyphicon glyphicon-chevron-down")}function updateFieldValue(e,n){updateNodeValueInTree(n,e,$("#"+e+n).val());for(var i in tree.children)aggregate_any(tree.children[i],e)}function updateNodeValueInTree(e,n,i){var r=null;for(var d in tree.children)r=tree.children[d],r.id==e?(r.values||(r.values={}),r.values[n]=i):updateNodeValue(e,r,n,i)}function updateNodeValue(e,n,i,r){var d=null;if(n&&n.id==e)return n;if(n)for(var t in n.children)if(d=updateNodeValue(e,n.children[t],i,r))return d.values||(d.values={}),d.values[i]=r,d;return null}var projects=null,tree,ENTER_KEY=13,MIN_COLUMN_WIDTH=70,GRIPS_WIDTH=16,selectProject=function(){"newProjectOption"===$("#projectSelector").find(":selected").attr("id")?($("#editNewProjectNameInput").val("Type New Project Name and Press Enter to Create"),$("#editNewProjectNameInput").show().focus().select()):($("#projectSelector").val()>0&&$("#selectProjectOption").remove(),$.ajax({type:"GET",url:"api/tree?projectID="+$("#projectSelector").val()}).done(function(e){tree=e,displaySpreadSheet(),$("#tree-container").hide()}))},moveAssembly=function(e,n,i){var r=findNodeInTree(i),d=findNodeInTree(n),t=findNodeInTree(e);r?r.children.splice(r.children.indexOf(t),1):tree.children.splice(tree.children.indexOf(t),1),isNodeCollapsed(d)&&expandNode(d),$("#icon"+d.id).attr("class","glyphicon glyphicon-chevron-down"),isNodeChildless(r)&&$("#icon"+r.id).attr("class",""),d.children.push(t),setDepths(d),visit(t,getChildren,function(e){$("#rowid"+e.id).remove(),$("#datarowid"+e.id).remove()}),$(addRow(t)).insertAfter($("#rowid"+n)),$(addDataRow(t)).insertAfter($("#datarowid"+n)),visit(t,getChildren,function(e){REDIPS.drag.enableDivs("init",$("#rowid"+e.id).find("div"))})},findNodeInTree=function(e){for(var n in tree.children){var i=findNode(e,tree.children[n]);if(i)return i}},findNode=function(e,n){if(n.id===e)return n;for(var i in n.children){var r=findNode(e,n.children[i]);if(r)return r}},findParentInTree=function(e){for(var n in tree.children){var i=findParent(e,tree.children[n],null);if(i)return i}},findParent=function(e,n,i){if(n.id===e)return i;for(var r in n.children){var d=findParent(e,n.children[r],n);if(d)return d}},deleteNode=function(e){var n=findNodeInTree(e),i=findParentInTree(e);visit(n,getChildren,function(e){$("#rowid"+e.id).remove(),$("#datarowid"+e.id).remove()});for(var r in i.children)if(i.children[r].id==e){i.children.splice(r,1);break}isNodeChildless(i)&&$("#icon"+i.id).attr("class","")},copyNode=function(e){var n=findNodeInTree(e),i=findParentInTree(e),r=jQuery.extend(!0,{},n);assignNewNodeIDs(r),void 0===i?tree.children.splice(tree.children.indexOf(n),0,r):i.children.splice(i.children.indexOf(n),0,r),$(addRow(r)).insertBefore($("#rowid"+e)),$(addDataRow(r)).insertBefore($("#datarowid"+e)),visit(r,getChildren,function(e){REDIPS.drag.enableDivs("init",$("#rowid"+e.id).find("div"))})},assignNewNodeIDs=function(e){e.id=tree.nextNodeID++;for(var n in e.children)assignNewNodeIDs(e.children[n])},getAncestorTag=function(e,n){for(n=n.toLowerCase();e&&e.parentNode;)if(e=e.parentNode,e.tagName&&e.tagName.toLowerCase()==n)return e},getChildren=function(e){return e.children&&e.children.length>0?e.children:null},updateNodeName=function(e){var n=getAncestorTag(e,"tr"),i=parseInt(n.id.replace("rowid","")),r=findNodeInTree(i);r.name=e.value,$("#nodeInput"+i).attr("value",r.name)};
var Field=function(i){this.name=i,this.datatype=Field.NUMBER,this.format=Field.NUMBER_FORMAT,this.precision=2,this.agg_type=Field.NO_AGGREGATION,this.agg_qty_field=null};Field.NUMBER="0",Field.STRING="1",Field.CHOICE="2",Field.NO_AGGREGATION="0",Field.SUM_ANY_AGGREGATION="1",Field.NUMBER_FORMAT="0",Field.PERCENT_FORMAT="1",Field.SCIENTIFIC_FORMAT="2",Field.formatValue=function(i,e){if(i.datatype===Field.NUMBER){if(i.format===Field.NUMBER_FORMAT)return e.toFixed(i.precision);if(i.format===Field.PERCENT_FORMAT)return(100*e).toFixed(i.precision)+"%";if(i.format===Field.SCIENTIFIC_FORMAT)return Number(e).toExponential(i.precision)}else{if(i.datatype===Field.STRING)return e;i.datatype===Field.CHOICE}};
var Menu=function(){Menu.menu=this};Menu.menu,Menu.handleClick=function(e){var t=Menu.menu.getMenuItem(e,Menu.menu),n=Menu.menu.getMenuItemParent(e,Menu.menu);if(t.field){var u=Project.getField(t.field.name);u[t.varName]=t.value;for(var m=0;m<n.items.length;m++)$("#menuItem"+n.items[m].id).removeClass("checkedMenuItem").addClass("uncheckedMenuItem");$("#menuItem"+e).removeClass("uncheckedMenuItem").addClass("checkedMenuItem"),n===Menu.menu&&Project.updateFieldFormatting(u)}},Menu.prototype.getMenuItem=function(e,t){if(e===t.id)return t;if(t.items&&t.items.length>0)for(var n,u=0;u<t.items.length;u++)if(n=this.getMenuItem(e,t.items[u]))return n;return null},Menu.prototype.getMenuItemParent=function(e,t){if(t.items&&t.items.length>0)for(var n=0;n<t.items.length;n++){if(t.items[n].id===e)return t;var u=this.getMenuItemParent(e,t.items[n]);if(u)return u}return null};
var MenuItem=function(i,t,e,s){this.display=i,this.value=t,this.varName=e,this.field=s,this.items=[],this.id=MenuItem.id++,this.parent=-1,this.checked=s?s[e]===t:!1};MenuItem.id=0;
function Project(){}Project.getField=function(e){for(var t=0;t<tree.fields.length;t++){var r=tree.fields[t];if(r.name===e)return r}return null},Project.saveToDatabase=function(){$.ajax({type:"POST",url:"/api/tree",dataType:"json",data:{json:JSON.stringify(tree)}})},Project.updateFieldFormatting=function(e){$(".fieldInput"+e.name).each(function(t){var r=$(this).attr("id").replace(e.name,""),n=findNodeInTree(parseInt(r));if(n.values){var a=Number(n.values[e.name]);$(this).val(Field.formatValue(e,a))}})},Project.cleanseTree=function(){visit(tree,getChildren,function(e){e.children||(e.children=[]),delete e.parent})},Project.getTree=function(){return tree},Project.switchView=function(){$("#spreadSheetView").length?($("#spreadSheetView").remove(),displayTreeView(tree)):($("#tree-container").remove(),displaySpreadSheet())};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZy5qcyIsImNvbnN0YW50cy5qcyIsImRuZFRyZWUuanMiLCJkcmFnLWxpYi5qcyIsImRyYWcuanMiLCJpbml0LmpzIiwia2V5cy5qcyIsIm1hcmt1cC5qcyIsInByb2plY3QuanMiLCJyZXNpemUtY29sdW1uLmpzIiwidHJlZS5qcyIsIm1vZGVsL0ZpZWxkLmpzIiwibW9kZWwvTWVudS5qcyIsIm1vZGVsL01lbnVJdGVtLmpzIiwibW9kZWwvUHJvamVjdC5qcyJdLCJuYW1lcyI6WyJhZ2dyZWdhdGVfYW55Iiwibm9kZSIsImZpZWxkIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJjaGlsZHJlblN1bSIsImkiLCJ2YWx1ZXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJET1dOX0FSUk9XX0lNQUdFX1BBVEgiLCJDSEVDS19NQVJLX0lNQUdFX1BBVEgiLCJCTEFOS19NQVJLX0lNQUdFX1BBVEgiLCJkaXNwbGF5VHJlZVZpZXciLCJ0cmVlRGF0YSIsInZpc2l0IiwicGFyZW50IiwidmlzaXRGbiIsImNoaWxkcmVuRm4iLCJjb3VudCIsInNvcnRUcmVlIiwidHJlZSIsInNvcnQiLCJhIiwiYiIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsInBhbiIsImRvbU5vZGUiLCJkaXJlY3Rpb24iLCJzcGVlZCIsInBhblNwZWVkIiwicGFuVGltZXIiLCJjbGVhclRpbWVvdXQiLCJ0cmFuc2xhdGVDb29yZHMiLCJkMyIsInRyYW5zZm9ybSIsInN2Z0dyb3VwIiwiYXR0ciIsInRyYW5zbGF0ZVgiLCJ0cmFuc2xhdGUiLCJ0cmFuc2xhdGVZIiwic2NhbGVYIiwic2NhbGUiLCJzY2FsZVkiLCJ6b29tTGlzdGVuZXIiLCJ0cmFuc2l0aW9uIiwic2VsZWN0Iiwic2V0VGltZW91dCIsInpvb20iLCJldmVudCIsImluaXRpYXRlRHJhZyIsImQiLCJkcmFnZ2luZ05vZGUiLCJzZWxlY3RBbGwiLCJub2RlcyIsImxpbmtzIiwibm9kZVBhdGhzIiwiZGF0YSIsInRhcmdldCIsInJlbW92ZSIsIm5vZGVzRXhpdCIsImZpbHRlciIsInBhcmVudExpbmsiLCJkcmFnU3RhcnRlZCIsImVuZERyYWciLCJzZWxlY3RlZE5vZGUiLCJ1cGRhdGVUZW1wQ29ubmVjdG9yIiwidXBkYXRlIiwicm9vdCIsImNlbnRlck5vZGUiLCJleHBhbmQiLCJfY2hpbGRyZW4iLCJmb3JFYWNoIiwic291cmNlIiwieCIsInkwIiwieSIsIngwIiwidmlld2VyV2lkdGgiLCJ2aWV3ZXJIZWlnaHQiLCJkdXJhdGlvbiIsInRvZ2dsZUNoaWxkcmVuIiwiY2xpY2siLCJkZWZhdWx0UHJldmVudGVkIiwiY29tcHV0ZU5vZGVTaXplIiwibGV2ZWxXaWR0aCIsImNoaWxkQ291bnQiLCJsZXZlbCIsIm4iLCJwdXNoIiwibmV3SGVpZ2h0IiwibWF4Iiwic2l6ZSIsInJldmVyc2UiLCJkZXB0aCIsIm1heExhYmVsTGVuZ3RoIiwibm9kZUVudGVyIiwiZW50ZXIiLCJhcHBlbmQiLCJjYWxsIiwiZHJhZ0xpc3RlbmVyIiwib24iLCJzdHlsZSIsInRleHQiLCJvdmVyQ2lyY2xlIiwib3V0Q2lyY2xlIiwibm9kZVVwZGF0ZSIsIm5vZGVFeGl0IiwiZXhpdCIsImxpbmsiLCJpbnNlcnQiLCJvIiwiZGlhZ29uYWwiLCIkIiwidG90YWxOb2RlcyIsInBhbkJvdW5kYXJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJsYXlvdXQiLCJzdmciLCJwcm9qZWN0aW9uIiwiTWF0aCIsImJlaGF2aW9yIiwic2NhbGVFeHRlbnQiLCJiYXNlU3ZnIiwiZHJhZyIsInNvdXJjZUV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwidGhpcyIsInJlbENvb3JkcyIsIm1vdXNlIiwiZ2V0IiwiZSIsImR5IiwiZHgiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJSRURJUFMiLCJpbml0IiwiZW5hYmxlRHJhZyIsImVuYWJsZURpdnMiLCJoYW5kbGVyT25Nb3VzZURvd24iLCJoYW5kbGVyT25Nb3VzZVVwIiwiaGFuZGxlck9uTW91c2VNb3ZlIiwiZWxlbWVudERyb3AiLCJyZXNldFN0eWxlcyIsInJlZ2lzdGVyRXZlbnRzIiwiY2VsbENoYW5nZWQiLCJoYW5kbGVyT25SZXNpemUiLCJzZXRUYWJsZVJvd0NvbHVtbiIsInNldFBvc2l0aW9uIiwic2V0VGRTdHlsZSIsImdldFRkU3R5bGUiLCJib3hPZmZzZXQiLCJjYWxjdWxhdGVDZWxscyIsImdldFNjcm9sbFBvc2l0aW9uIiwiYXV0b1Njcm9sbFgiLCJhdXRvU2Nyb2xsWSIsImNvcHlQcm9wZXJ0aWVzIiwiY2xvbmVMaW1pdCIsImdldFN0eWxlIiwiZmluZFBhcmVudCIsInJvd09wYWNpdHkiLCJyb3dDbG9uZSIsInJvd0Ryb3AiLCJub3JtYWxpemUiLCJiZ1N0eWxlT2xkIiwidGFibGUiLCJtb3ZlZCIsImNsb25lZCIsIndpbmRvd1Njcm9sbFBvc2l0aW9uIiwib2JqTWFyZ2luIiwic2NyZWVuIiwic2Nyb2xsRGF0YSIsImNvbnRhaW5lciIsIm9iaiIsImVkZ2UiLCJwYWdlIiwiZGl2IiwiZmxhZyIsImNsb25lZElkIiwiY3VycmVudENlbGwiLCJkcmFnQ29udGFpbmVyIiwiZGl2Qm94IiwicG9pbnRlciIsInRocmVzaG9sZCIsInNoaWZ0S2V5IiwiY2xvbmVDbGFzcyIsInJvdyIsInJvd19vbGQiLCJyb3dfc291cmNlIiwiY2VsbCIsImNlbGxfb2xkIiwiY2VsbF9zb3VyY2UiLCJvYmpPbGQiLCJob3ZlciIsImNvbG9yVGQiLCJjb2xvclRyIiwic2Nyb2xsIiwiZW5hYmxlIiwiYm91bmQiLCJib3JkZXJEaXNhYmxlZCIsIm9wYWNpdHlEaXNhYmxlZCIsInJvd0VtcHR5Q29sb3IiLCJ0ZCIsImNsb25lIiwia2V5RGl2Iiwia2V5Um93Iiwic2VuZEJhY2siLCJkcm9wIiwiY2xvbmVkRHJvcHBlZCIsImNsb25lZEVuZDEiLCJjbG9uZWRFbmQyIiwiZHJvcHBlZCIsImRyb3BwZWRCZWZvcmUiLCJmaW5pc2giLCJub3RDbG9uZWQiLCJub3RNb3ZlZCIsInJvd0NoYW5nZWQiLCJyb3dDbGlja2VkIiwicm93Q2xvbmVkIiwicm93RHJvcHBlZCIsInJvd0Ryb3BwZWRCZWZvcmUiLCJyb3dEcm9wcGVkU291cmNlIiwicm93TW92ZWQiLCJyb3dOb3RDbG9uZWQiLCJyb3dOb3RNb3ZlZCIsInJlZGlwc0Nsb25lIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwicmVkaXBzIiwiYWRkIiwid2luZG93Iiwib2Zmc2V0IiwicG9zaXRpb24iLCJYIiwiWSIsImV2dCIsImNhbmNlbEJ1YmJsZSIsImdldFNlbGVjdGlvbiIsInJlbW92ZUFsbFJhbmdlcyIsInNlbGVjdGlvbiIsInR5cGUiLCJlbXB0eSIsImVycm9yIiwiY2xpZW50WCIsImNsaWVudFkiLCJjbGFzc05hbWUiLCJjdXJyZW50IiwicGFyZW50Tm9kZSIsImVsIiwidGFibGVNaW5pIiwicm93T2JqIiwibm9kZU5hbWUiLCJ1bmRlZmluZWQiLCJpbm5lckhUTUwiLCJjbGFzc0xpc3QiLCJzb3VyY2VSb3ciLCJyb3dzIiwicm93SWR4IiwidHJNaW5pIiwiZGVsZXRlVGFibGVSb3ciLCJ0YmwiLCJlbXB0eVJvdyIsImRlbGV0ZVJvdyIsInJvd0luZGV4IiwidGFibGVSb3ciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJyX3JvdyIsIm10X3RyIiwib25zZWxlY3RzdGFydCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFdpZHRoIiwic2Nyb2xsSGVpZ2h0IiwiY2VsbHMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjbG9uZVNvdXJjZURpdiIsIm9ubW91c2Vkb3duIiwidG9wIiwibGVmdCIsInpJbmRleCIsInNjYSIsImRlbHRhWCIsImRlbHRhWSIsInNjcm9sbFBvc2l0aW9uIiwiYWJzIiwiY29udGFpblRhYmxlIiwicGFnZVlPZmZzZXQiLCJzY3JvbGxUb3AiLCJhdXRvc2Nyb2xsIiwibWlkc3RYIiwibWlkc3RZIiwicHJldmlvdXMiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJyb3dfb2Zmc2V0Iiwicm93X2ZvdW5kIiwidG9zIiwib2Zmc2V0SGVpZ2h0IiwicmkiLCJ0IiwidHIiLCJzIiwiY29sb3IiLCJ0b1N0cmluZyIsImJvcmRlclRyIiwiYm9yZGVyVG9wIiwiYm9yZGVyQm90dG9tIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJUb3BTdHlsZSIsImJvcmRlclRvcENvbG9yIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3R0b20iLCJib3JkZXJCb3R0b21TdHlsZSIsImJvcmRlckJvdHRvbUNvbG9yIiwiYyIsInJpZ2h0IiwiYm9yZGVyIiwiYm94IiwiYm94X3Njcm9sbCIsIm9MZWZ0Iiwib1RvcCIsImJveE9sZCIsIm9mZnNldExlZnQiLCJzY3JvbGxMZWZ0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0UGFyZW50Iiwib2Zmc2V0V2lkdGgiLCJjYiIsImRpc3BsYXkiLCJzY3JvbGxZIiwic2Nyb2xsWCIsInNvIiwicG9zIiwib2xkIiwibWF4c3AiLCJlZGdlQ3Jvc3NlZCIsImNsaWVudFdpZHRoIiwic2Nyb2xsQnkiLCJwYXJzZUludCIsImlzTmFOIiwiY2xpZW50SGVpZ2h0Iiwic3JjIiwiY2xuIiwiY2hpbGRzIiwiY29weSIsImUxIiwiZTIiLCJlbmFibGVkIiwiZWwxIiwiZWwyIiwidG4iLCJtYXRjaEFycmF5IiwibGltaXRUeXBlIiwibGltaXQiLCJjbGFzc2VzIiwibWF0Y2giLCJyZXBsYWNlIiwiZW5hYmxlX2ZsYWciLCJxdWVyeVNlbGVjdG9yQWxsIiwiaiIsImsiLCJib3JkZXJTdHlsZSIsIm9wYWNpdHkiLCJjdXJzb3IiLCJvdmVyZmxvdyIsInRibHMiLCJyZWdleERyYWciLCJyZWdleE5vQXV0b3Njcm9sbCIsImJvcmRlckVuYWJsZWQiLCJ0ZXN0Iiwic3R5bGVfbmFtZSIsImN1cnJlbnRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJkZWZhdWx0VmlldyIsInRhZ19uYW1lIiwic3RyIiwidGROb2RlTGlzdCIsImNoaWxkTm9kZXMiLCJub2RlVHlwZSIsImV2ZW50TmFtZSIsImhhbmRsZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJyZCIsIm5ld1BhcmVudFJvdyIsIm1vdmVkSUQiLCJuZXdQYXJlbnRJRCIsIm9sZFBhcmVudElEIiwiZmluZFBhcmVudEluVHJlZSIsIm1vdmVBc3NlbWJseSIsInJvd0RlbGV0ZWQiLCJyb3dVbmRlbGV0ZWQiLCJpbml0UHJvamVjdEFjdGlvbnMiLCJrZXl1cCIsImtleUNvZGUiLCJFTlRFUl9LRVkiLCJwcm9qZWN0QWN0aW9uRW50ZXJQcmVzc2VkIiwic2Nyb2xsQmFyV2lkdGgiLCJyZWFkeSIsImdldFNjcm9sbEJhcldpZHRoIiwib25rZXlkb3duIiwiY2hlY2tLZXkiLCJhamF4IiwidXJsIiwiZG9uZSIsInByb2plY3RzIiwiaHRtbCIsImdlbmVyYXRlSGVhZGVyTWFya3VwIiwiY3JlYXRlTmV3UHJvamVjdCIsImZpcnN0Q2hpbGQiLCJib2R5IiwiS0VZX1VQX0FSUk9XIiwicHJldmVudERlZmF1bHQiLCJwcmV2Um93IiwiZ2V0QW5jZXN0b3JUYWciLCJhY3RpdmVFbGVtZW50IiwicHJldiIsImdldE5leHRFbGVtZW50SUQiLCJmb2N1cyIsIktFWV9ET1dOX0FSUk9XIiwibmV4dFJvdyIsIm5leHQiLCJLRVlfUklHSFRfQVJST1ciLCJmaW5kIiwiS0VZX0xFRlRfQVJST1ciLCJuZXdSb3ciLCJzcGxpdCIsImZpZWxkTmFtZSIsImdlbmVyYXRlU3ByZWFkU2hlZXRNYXJrdXAiLCJtYXJrdXAiLCJnZW5lcmF0ZVByb2plY3RTZWxlY3Rvck1hcmt1cCIsImdlbmVyYXRlRmllbGRzUm93TWFya3VwIiwiZmllbGRzIiwiZ2V0RmllbGRIZWFkZXJNYXJrdXAiLCJnZW5lcmF0ZVRyZWVNYXJrdXAiLCJhZGRSb3ciLCJkZXB0aEFkanVzdG1lbnQiLCJkcmFnSGFuZGxlIiwiZGVsZXRlQnV0dG9uIiwiY29weUJ1dHRvbiIsImV4cGFuZEJ1dHRvbiIsImNvbGxhcHNlQnV0dG9uIiwiYmxhbmtCdXR0b24iLCJERUZBVUxUX05PREVfSU5QVVRfV0lEVEgiLCJnZW5lcmF0ZURhdGFNYXJrdXAiLCJhZGREYXRhUm93IiwiRmllbGQiLCJmb3JtYXRWYWx1ZSIsImdldEZpZWxkQ2VsbE1hcmt1cCIsImFkZENvbHVtbiIsImVhY2giLCJpdGVtIiwibm9kZUlEIiwiZ2V0RmllbGRNZW51TWFya3VwIiwiUHJvamVjdCIsImdldEZpZWxkIiwibWVudSIsIk1lbnUiLCJudW1iZXJJdGVtIiwiTWVudUl0ZW0iLCJOVU1CRVIiLCJmb3JtYXRJdGVtIiwibnVtYmVyRm9ybWF0SXRlbSIsIk5VTUJFUl9GT1JNQVQiLCJpdGVtcyIsImRpc3BsYXlTdHJpbmciLCJwZXJjZW50Rm9ybWF0SXRlbSIsIlBFUkNFTlRfRk9STUFUIiwic2NpZW50aWZpY0Zvcm1hdEl0ZW0iLCJTQ0lFTlRJRklDX0ZPUk1BVCIsImFnZ3JlZ2F0aW9uSXRlbSIsIk5PX0FHR1JFR0FUSU9OIiwic3VtQW55QWdnSXRlbSIsIlNVTV9BTllfQUdHUkVHQVRJT04iLCJmIiwiU1RSSU5HIiwiZ2VuZXJhdGVNZW51TWFya3VwIiwiY2hlY2tNYXJrQ2xhc3MiLCJjaGVja2VkIiwiZGlzcGxheVNwcmVhZFNoZWV0IiwiY2xlYW5zZVRyZWUiLCJjc3MiLCJ2YWwiLCJoaWRlIiwibmV3UHJvamVjdE5hbWUiLCJuZXdQcm9qZWN0SUQiLCJuZXh0UHJvamVjdElEIiwib3B0aW9uIiwicHJvamVjdElEIiwicHJvamVjdE5hbWUiLCJ2ZXJzaW9uIiwibmV4dE5vZGVJRCIsInNhdmVUb0RhdGFiYXNlIiwic2hvd01lbnUiLCJhcHBlbmRUbyIsIm1vdXNlbGVhdmUiLCJoYW5kbGVQcm9qZWN0QWN0aW9uIiwic2hvdyIsInJlc2l6ZUNvbHVtbkxlZnQiLCJyZXNpemVGaWVsZCIsInN0YXJ0UmVzaXplIiwiZ3JpcCIsImJpbmQiLCJyZXNpemVEcmFnIiwicmVzaXplRW5kIiwidmlzaWJpbGl0eSIsInBhZ2VYIiwidW5iaW5kIiwibmV3V2lkdGgiLCJHUklQU19XSURUSCIsIk1JTl9DT0xVTU5fV0lEVEgiLCJjb2x1bW5DZWxscyIsImhhbmRsZURhdGFTY3JvbGwiLCJwcmludFByb2plY3QiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImRpc3BsYXlSYXdWYWx1ZSIsImZpbmROb2RlSW5UcmVlIiwic2V0RGVwdGhzIiwiaXNOb2RlQ2hpbGRsZXNzIiwiaXNOb2RlQ29sbGFwc2VkIiwiaXNOb2RlRXhwYW5kZWQiLCJ2aXNpdERlc2NlbmRhbnRzIiwidG9nZ2xlRXhwYW5kSWNvbiIsImNvbGxhcHNlTm9kZSIsImV4cGFuZE5vZGUiLCJnZXRDaGlsZHJlbiIsImNoaWxkIiwiaW5zZXJ0QWZ0ZXIiLCJ1cGRhdGVGaWVsZFZhbHVlIiwidXBkYXRlTm9kZVZhbHVlSW5UcmVlIiwidXBkYXRlTm9kZVZhbHVlIiwiZm91bmQiLCJzZWxlY3RQcm9qZWN0Iiwib2xkUGFyZW50Tm9kZSIsIm5ld1BhcmVudE5vZGUiLCJtb3ZlZE5vZGUiLCJmb3VuZE5vZGUiLCJmaW5kTm9kZSIsImZvdW5kUGFyZW50IiwiZGVsZXRlTm9kZSIsImNvcHlOb2RlIiwic291cmNlTm9kZSIsInNvdXJjZVBhcmVudE5vZGUiLCJuZXdOb2RlIiwialF1ZXJ5IiwiZXh0ZW5kIiwiYXNzaWduTmV3Tm9kZUlEcyIsInRhZ05hbWUiLCJ1cGRhdGVOb2RlTmFtZSIsImRhdGF0eXBlIiwiZm9ybWF0IiwicHJlY2lzaW9uIiwiYWdnX3R5cGUiLCJhZ2dfcXR5X2ZpZWxkIiwiQ0hPSUNFIiwidG9GaXhlZCIsIk51bWJlciIsInRvRXhwb25lbnRpYWwiLCJoYW5kbGVDbGljayIsImNsaWNrZWQiLCJnZXRNZW51SXRlbSIsImdldE1lbnVJdGVtUGFyZW50IiwidmFyTmFtZSIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ1cGRhdGVGaWVsZEZvcm1hdHRpbmciLCJwcm90b3R5cGUiLCJtZW51SXRlbSIsImRhdGFUeXBlIiwianNvbiIsImdl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VSxPQUFRemdCLE1BQVEwZ0IsS0FBS3hELEtBQUtDLFVBQVV4ZixVQUd6RnliLFFBQVFrSCxzQkFBd0IsU0FBU2prQixHQUV2Q21ILEVBQUUsY0FBZ0JuSCxFQUFNMEIsTUFBTWliLEtBQUssU0FBU2xVLEdBRTFDLEdBQUlvVSxHQUFTMVYsRUFBRWUsTUFBTTNGLEtBQUssTUFBTW9VLFFBQVEzVyxFQUFNMEIsS0FBTSxJQUNoRDNCLEVBQU9paEIsZUFBZXZMLFNBQVNvSCxHQUVuQyxJQUFHOWMsRUFBS00sT0FDUixDQUNFLEdBQUlJLEdBQVEraUIsT0FBT3pqQixFQUFLTSxPQUFPTCxFQUFNMEIsTUFDckN5RixHQUFFZSxNQUFNeVcsSUFBSXBDLE1BQU1DLFlBQVl4YyxFQUFPUyxRQUszQ3NjLFFBQVEwQixZQUFjLFdBRXBCemQsTUFBTU0sS0FBTW1nQixZQUFhLFNBQVMxaEIsR0FFNUJBLEVBQUtFLFdBRVBGLEVBQUtFLG1CQUVBRixHQUFLa0IsVUFJaEI4YixRQUFRdUgsUUFBVSxXQUVoQixNQUFPaGpCLE9BR1R5YixRQUFRd0gsV0FBYSxXQUVoQnBkLEVBQUUsb0JBQW9CakgsUUFFdkJpSCxFQUFFLG9CQUFvQnRELFNBQ3RCL0MsZ0JBQWdCUSxRQUloQjZGLEVBQUUsbUJBQW1CdEQsU0FDckIyYSIsImZpbGUiOiJobXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gYWdncmVnYXRlX2FueShub2RlLCBmaWVsZClcclxue1xyXG4gIGlmKCFub2RlLmNoaWxkcmVuIHx8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKVxyXG4gIHtcclxuICAgIGlmKCFub2RlLnZhbHVlcyB8fCAhbm9kZS52YWx1ZXNbZmllbGRdKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gMC4wO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChub2RlLnZhbHVlc1tmaWVsZF0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdmFyIGNoaWxkcmVuU3VtID0gMC4wO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBjaGlsZHJlblN1bSArPSBhZ2dyZWdhdGVfYW55KG5vZGUuY2hpbGRyZW5baV0sIGZpZWxkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZighbm9kZS52YWx1ZXMpXHJcbiAgICB7XHJcbiAgICAgIG5vZGUudmFsdWVzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgbm9kZS52YWx1ZXNbZmllbGRdID0gY2hpbGRyZW5TdW07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBtb2RlbFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGQgKyBub2RlLmlkKS52YWx1ZSA9IGNoaWxkcmVuU3VtOyAgICAgICAgIC8vdXBkYXRlIHRoZSB2aWV3XHJcblxyXG4gICAgcmV0dXJuIGNoaWxkcmVuU3VtO1xyXG4gIH1cclxufSIsInZhciBET1dOX0FSUk9XX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2Rvd24tYXJyb3cucG5nJztcclxudmFyIENIRUNLX01BUktfSU1BR0VfUEFUSCA9ICdpbWFnZXMvY2hlY2ttYXJrLnBuZyc7XHJcbnZhciBCTEFOS19NQVJLX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2JsYW5rbWFyay5wbmcnOyIsIi8vIEdldCBKU09OIGRhdGFcclxuZnVuY3Rpb24gZGlzcGxheVRyZWVWaWV3KHRyZWVEYXRhKVxyXG57XHJcbiAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cInRyZWUtY29udGFpbmVyXCI+PC9kaXY+Jyk7XHJcblxyXG4gIC8vIENhbGN1bGF0ZSB0b3RhbCBub2RlcywgbWF4IGxhYmVsIGxlbmd0aFxyXG4gIHZhciB0b3RhbE5vZGVzID0gMDtcclxuICB2YXIgbWF4TGFiZWxMZW5ndGggPSAwO1xyXG4gIC8vIHZhcmlhYmxlcyBmb3IgZHJhZy9kcm9wXHJcbiAgdmFyIHNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgdmFyIGRyYWdnaW5nTm9kZSA9IG51bGw7XHJcbiAgLy8gcGFubmluZyB2YXJpYWJsZXNcclxuICB2YXIgcGFuU3BlZWQgPSAyMDA7XHJcbiAgdmFyIHBhbkJvdW5kYXJ5ID0gMjA7IC8vIFdpdGhpbiAyMHB4IGZyb20gZWRnZXMgd2lsbCBwYW4gd2hlbiBkcmFnZ2luZy5cclxuICAvLyBNaXNjLiB2YXJpYWJsZXNcclxuICB2YXIgaSA9IDA7XHJcbiAgdmFyIGR1cmF0aW9uID0gNzUwO1xyXG4gIHZhciByb290O1xyXG5cclxuICAvLyBzaXplIG9mIHRoZSBkaWFncmFtXHJcbiAgdmFyIHZpZXdlcldpZHRoID0gJCgnI3RyZWUtY29udGFpbmVyJykud2lkdGgoKTtcclxuICB2YXIgdmlld2VySGVpZ2h0ID0gJCgnI3RyZWUtY29udGFpbmVyJykuaGVpZ2h0KCk7XHJcblxyXG4gIHZhciB0cmVlID0gZDMubGF5b3V0LnRyZWUoKVxyXG4gICAgICAuc2l6ZShbdmlld2VySGVpZ2h0LCB2aWV3ZXJXaWR0aF0pO1xyXG5cclxuICAvLyBkZWZpbmUgYSBkMyBkaWFnb25hbCBwcm9qZWN0aW9uIGZvciB1c2UgYnkgdGhlIG5vZGUgcGF0aHMgbGF0ZXIgb24uXHJcbiAgdmFyIGRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKClcclxuICAgICAgLnByb2plY3Rpb24oZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgcmV0dXJuIFtkLnksIGQueF07XHJcbiAgICAgIH0pO1xyXG5cclxuICAvLyBBIHJlY3Vyc2l2ZSBoZWxwZXIgZnVuY3Rpb24gZm9yIHBlcmZvcm1pbmcgc29tZSBzZXR1cCBieSB3YWxraW5nIHRocm91Z2ggYWxsIG5vZGVzXHJcblxyXG4gIGZ1bmN0aW9uIHZpc2l0KHBhcmVudCwgdmlzaXRGbiwgY2hpbGRyZW5Gbikge1xyXG4gICAgICBpZiAoIXBhcmVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgdmlzaXRGbihwYXJlbnQpO1xyXG5cclxuICAgICAgdmFyIGNoaWxkcmVuID0gY2hpbGRyZW5GbihwYXJlbnQpO1xyXG4gICAgICBpZiAoY2hpbGRyZW4pIHtcclxuICAgICAgICAgIHZhciBjb3VudCA9IGNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgIHZpc2l0KGNoaWxkcmVuW2ldLCB2aXNpdEZuLCBjaGlsZHJlbkZuKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQ2FsbCB2aXNpdCBmdW5jdGlvbiB0byBlc3RhYmxpc2ggbWF4TGFiZWxMZW5ndGhcclxuICB2aXNpdCh0cmVlRGF0YSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICB0b3RhbE5vZGVzKys7XHJcbiAgICAgIG1heExhYmVsTGVuZ3RoID0gTWF0aC5tYXgoZC5uYW1lLmxlbmd0aCwgbWF4TGFiZWxMZW5ndGgpO1xyXG5cclxuICB9LCBmdW5jdGlvbihkKSB7XHJcbiAgICAgIHJldHVybiBkLmNoaWxkcmVuICYmIGQuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IGQuY2hpbGRyZW4gOiBudWxsO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgLy8gc29ydCB0aGUgdHJlZSBhY2NvcmRpbmcgdG8gdGhlIG5vZGUgbmFtZXNcclxuXHJcbiAgZnVuY3Rpb24gc29ydFRyZWUoKSB7XHJcbiAgICAgIHRyZWUuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICByZXR1cm4gYi5uYW1lLnRvTG93ZXJDYXNlKCkgPCBhLm5hbWUudG9Mb3dlckNhc2UoKSA/IDEgOiAtMTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIC8vIFNvcnQgdGhlIHRyZWUgaW5pdGlhbGx5IGluY2FzZSB0aGUgSlNPTiBpc24ndCBpbiBhIHNvcnRlZCBvcmRlci5cclxuICBzb3J0VHJlZSgpO1xyXG5cclxuICAvLyBUT0RPOiBQYW4gZnVuY3Rpb24sIGNhbiBiZSBiZXR0ZXIgaW1wbGVtZW50ZWQuXHJcblxyXG4gIGZ1bmN0aW9uIHBhbihkb21Ob2RlLCBkaXJlY3Rpb24pIHtcclxuICAgICAgdmFyIHNwZWVkID0gcGFuU3BlZWQ7XHJcbiAgICAgIGlmIChwYW5UaW1lcikge1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHBhblRpbWVyKTtcclxuICAgICAgICAgIHRyYW5zbGF0ZUNvb3JkcyA9IGQzLnRyYW5zZm9ybShzdmdHcm91cC5hdHRyKFwidHJhbnNmb3JtXCIpKTtcclxuICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgdHJhbnNsYXRlWCA9IGRpcmVjdGlvbiA9PSAnbGVmdCcgPyB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzBdICsgc3BlZWQgOiB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzBdIC0gc3BlZWQ7XHJcbiAgICAgICAgICAgICAgdHJhbnNsYXRlWSA9IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMV07XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSAndXAnIHx8IGRpcmVjdGlvbiA9PSAnZG93bicpIHtcclxuICAgICAgICAgICAgICB0cmFuc2xhdGVYID0gdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVswXTtcclxuICAgICAgICAgICAgICB0cmFuc2xhdGVZID0gZGlyZWN0aW9uID09ICd1cCcgPyB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdICsgc3BlZWQgOiB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdIC0gc3BlZWQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzY2FsZVggPSB0cmFuc2xhdGVDb29yZHMuc2NhbGVbMF07XHJcbiAgICAgICAgICBzY2FsZVkgPSB0cmFuc2xhdGVDb29yZHMuc2NhbGVbMV07XHJcbiAgICAgICAgICBzY2FsZSA9IHpvb21MaXN0ZW5lci5zY2FsZSgpO1xyXG4gICAgICAgICAgc3ZnR3JvdXAudHJhbnNpdGlvbigpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB0cmFuc2xhdGVYICsgXCIsXCIgKyB0cmFuc2xhdGVZICsgXCIpc2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiKTtcclxuICAgICAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJ2cubm9kZScpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB0cmFuc2xhdGVYICsgXCIsXCIgKyB0cmFuc2xhdGVZICsgXCIpXCIpO1xyXG4gICAgICAgICAgem9vbUxpc3RlbmVyLnNjYWxlKHpvb21MaXN0ZW5lci5zY2FsZSgpKTtcclxuICAgICAgICAgIHpvb21MaXN0ZW5lci50cmFuc2xhdGUoW3RyYW5zbGF0ZVgsIHRyYW5zbGF0ZVldKTtcclxuICAgICAgICAgIHBhblRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBwYW4oZG9tTm9kZSwgc3BlZWQsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICB9LCA1MCk7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIC8vIERlZmluZSB0aGUgem9vbSBmdW5jdGlvbiBmb3IgdGhlIHpvb21hYmxlIHRyZWVcclxuXHJcbiAgZnVuY3Rpb24gem9vbSgpIHtcclxuICAgICAgc3ZnR3JvdXAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQzLmV2ZW50LnRyYW5zbGF0ZSArIFwiKXNjYWxlKFwiICsgZDMuZXZlbnQuc2NhbGUgKyBcIilcIik7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gZGVmaW5lIHRoZSB6b29tTGlzdGVuZXIgd2hpY2ggY2FsbHMgdGhlIHpvb20gZnVuY3Rpb24gb24gdGhlIFwiem9vbVwiIGV2ZW50IGNvbnN0cmFpbmVkIHdpdGhpbiB0aGUgc2NhbGVFeHRlbnRzXHJcbiAgdmFyIHpvb21MaXN0ZW5lciA9IGQzLmJlaGF2aW9yLnpvb20oKS5zY2FsZUV4dGVudChbMC4xLCAzXSkub24oXCJ6b29tXCIsIHpvb20pO1xyXG5cclxuICBmdW5jdGlvbiBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSkge1xyXG4gICAgICBkcmFnZ2luZ05vZGUgPSBkO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcbiAgICAgIGQzLnNlbGVjdEFsbCgnLmdob3N0Q2lyY2xlJykuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUgc2hvdycpO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuYXR0cignY2xhc3MnLCAnbm9kZSBhY3RpdmVEcmFnJyk7XHJcblxyXG4gICAgICBzdmdHcm91cC5zZWxlY3RBbGwoXCJnLm5vZGVcIikuc29ydChmdW5jdGlvbihhLCBiKSB7IC8vIHNlbGVjdCB0aGUgcGFyZW50IGFuZCBzb3J0IHRoZSBwYXRoJ3NcclxuICAgICAgICAgIGlmIChhLmlkICE9IGRyYWdnaW5nTm9kZS5pZCkgcmV0dXJuIDE7IC8vIGEgaXMgbm90IHRoZSBob3ZlcmVkIGVsZW1lbnQsIHNlbmQgXCJhXCIgdG8gdGhlIGJhY2tcclxuICAgICAgICAgIGVsc2UgcmV0dXJuIC0xOyAvLyBhIGlzIHRoZSBob3ZlcmVkIGVsZW1lbnQsIGJyaW5nIFwiYVwiIHRvIHRoZSBmcm9udFxyXG4gICAgICB9KTtcclxuICAgICAgLy8gaWYgbm9kZXMgaGFzIGNoaWxkcmVuLCByZW1vdmUgdGhlIGxpbmtzIGFuZCBub2Rlc1xyXG4gICAgICBpZiAobm9kZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgLy8gcmVtb3ZlIGxpbmsgcGF0aHNcclxuICAgICAgICAgIGxpbmtzID0gdHJlZS5saW5rcyhub2Rlcyk7XHJcbiAgICAgICAgICBub2RlUGF0aHMgPSBzdmdHcm91cC5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIilcclxuICAgICAgICAgICAgICAuZGF0YShsaW5rcywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQuaWQ7XHJcbiAgICAgICAgICAgICAgfSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAvLyByZW1vdmUgY2hpbGQgbm9kZXNcclxuICAgICAgICAgIG5vZGVzRXhpdCA9IHN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKVxyXG4gICAgICAgICAgICAgIC5kYXRhKG5vZGVzLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkLmlkO1xyXG4gICAgICAgICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChkLmlkID09IGRyYWdnaW5nTm9kZS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgIH0pLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZW1vdmUgcGFyZW50IGxpbmtcclxuICAgICAgcGFyZW50TGluayA9IHRyZWUubGlua3ModHJlZS5ub2RlcyhkcmFnZ2luZ05vZGUucGFyZW50KSk7XHJcbiAgICAgIHN2Z0dyb3VwLnNlbGVjdEFsbCgncGF0aC5saW5rJykuZmlsdGVyKGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgIGlmIChkLnRhcmdldC5pZCA9PSBkcmFnZ2luZ05vZGUuaWQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfSkucmVtb3ZlKCk7XHJcblxyXG4gICAgICBkcmFnU3RhcnRlZCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBkZWZpbmUgdGhlIGJhc2VTdmcsIGF0dGFjaGluZyBhIGNsYXNzIGZvciBzdHlsaW5nIGFuZCB0aGUgem9vbUxpc3RlbmVyXHJcbiAgdmFyIGJhc2VTdmcgPSBkMy5zZWxlY3QoXCIjdHJlZS1jb250YWluZXJcIikuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgdmlld2VyV2lkdGgpXHJcbiAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHZpZXdlckhlaWdodClcclxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm92ZXJsYXlcIilcclxuICAgICAgLmNhbGwoem9vbUxpc3RlbmVyKTtcclxuXHJcblxyXG4gIC8vIERlZmluZSB0aGUgZHJhZyBsaXN0ZW5lcnMgZm9yIGRyYWcvZHJvcCBiZWhhdmlvdXIgb2Ygbm9kZXMuXHJcbiAgZHJhZ0xpc3RlbmVyID0gZDMuYmVoYXZpb3IuZHJhZygpXHJcbiAgICAgIC5vbihcImRyYWdzdGFydFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICBpZiAoZCA9PSByb290KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZHJhZ1N0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgbm9kZXMgPSB0cmVlLm5vZGVzKGQpO1xyXG4gICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAvLyBpdCdzIGltcG9ydGFudCB0aGF0IHdlIHN1cHByZXNzIHRoZSBtb3VzZW92ZXIgZXZlbnQgb24gdGhlIG5vZGUgYmVpbmcgZHJhZ2dlZC4gT3RoZXJ3aXNlIGl0IHdpbGwgYWJzb3JiIHRoZSBtb3VzZW92ZXIgZXZlbnQgYW5kIHRoZSB1bmRlcmx5aW5nIG5vZGUgd2lsbCBub3QgZGV0ZWN0IGl0IGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5vbihcImRyYWdcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgaWYgKGQgPT0gcm9vdCkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChkcmFnU3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgIGRvbU5vZGUgPSB0aGlzO1xyXG4gICAgICAgICAgICAgIGluaXRpYXRlRHJhZyhkLCBkb21Ob2RlKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBnZXQgY29vcmRzIG9mIG1vdXNlRXZlbnQgcmVsYXRpdmUgdG8gc3ZnIGNvbnRhaW5lciB0byBhbGxvdyBmb3IgcGFubmluZ1xyXG4gICAgICAgICAgcmVsQ29vcmRzID0gZDMubW91c2UoJCgnc3ZnJykuZ2V0KDApKTtcclxuICAgICAgICAgIGlmIChyZWxDb29yZHNbMF0gPCBwYW5Cb3VuZGFyeSkge1xyXG4gICAgICAgICAgICAgIHBhblRpbWVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBwYW4odGhpcywgJ2xlZnQnKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzBdID4gKCQoJ3N2ZycpLndpZHRoKCkgLSBwYW5Cb3VuZGFyeSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgcGFuVGltZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIHBhbih0aGlzLCAncmlnaHQnKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzFdIDwgcGFuQm91bmRhcnkpIHtcclxuICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgcGFuKHRoaXMsICd1cCcpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChyZWxDb29yZHNbMV0gPiAoJCgnc3ZnJykuaGVpZ2h0KCkgLSBwYW5Cb3VuZGFyeSkpIHtcclxuICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgcGFuKHRoaXMsICdkb3duJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChwYW5UaW1lcik7XHJcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZC54MCArPSBkMy5ldmVudC5keTtcclxuICAgICAgICAgIGQueTAgKz0gZDMuZXZlbnQuZHg7XHJcbiAgICAgICAgICB2YXIgbm9kZSA9IGQzLnNlbGVjdCh0aGlzKTtcclxuICAgICAgICAgIG5vZGUuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQueTAgKyBcIixcIiArIGQueDAgKyBcIilcIik7XHJcbiAgICAgICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgICAgIH0pLm9uKFwiZHJhZ2VuZFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICBpZiAoZCA9PSByb290KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZG9tTm9kZSA9IHRoaXM7XHJcbiAgICAgICAgICBpZiAoc2VsZWN0ZWROb2RlKSB7XHJcbiAgICAgICAgICAgICAgLy8gbm93IHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBwYXJlbnQsIGFuZCBpbnNlcnQgaXQgaW50byB0aGUgbmV3IGVsZW1lbnRzIGNoaWxkcmVuXHJcbiAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZHJhZ2dpbmdOb2RlLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKGRyYWdnaW5nTm9kZSk7XHJcbiAgICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgZHJhZ2dpbmdOb2RlLnBhcmVudC5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWROb2RlLmNoaWxkcmVuIHx8IHNlbGVjdGVkTm9kZS5fY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZE5vZGUuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUuY2hpbGRyZW4ucHVzaChkcmFnZ2luZ05vZGUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUuX2NoaWxkcmVuLnB1c2goZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgICAgICAgICAgIH0gIFxyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZS5jaGlsZHJlbiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUuY2hpbGRyZW4ucHVzaChkcmFnZ2luZ05vZGUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgbm9kZSBiZWluZyBhZGRlZCB0byBpcyBleHBhbmRlZCBzbyB1c2VyIGNhbiBzZWUgYWRkZWQgbm9kZSBpcyBjb3JyZWN0bHkgbW92ZWRcclxuICAgICAgICAgICAgICBleHBhbmQoc2VsZWN0ZWROb2RlKTtcclxuICAgICAgICAgICAgICBzb3J0VHJlZSgpO1xyXG4gICAgICAgICAgICAgIGVuZERyYWcoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgZW5kRHJhZygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gZW5kRHJhZygpIHtcclxuICAgICAgc2VsZWN0ZWROb2RlID0gbnVsbDtcclxuICAgICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZScpO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuYXR0cignY2xhc3MnLCAnbm9kZScpO1xyXG4gICAgICAvLyBub3cgcmVzdG9yZSB0aGUgbW91c2VvdmVyIGV2ZW50IG9yIHdlIHdvbid0IGJlIGFibGUgdG8gZHJhZyBhIDJuZCB0aW1lXHJcbiAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJy5naG9zdENpcmNsZScpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJycpO1xyXG4gICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgICAgIGlmIChkcmFnZ2luZ05vZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgIHVwZGF0ZShyb290KTtcclxuICAgICAgICAgIGNlbnRlck5vZGUoZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgICAgIGRyYWdnaW5nTm9kZSA9IG51bGw7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGNvbGxhcHNpbmcgYW5kIGV4cGFuZGluZyBub2Rlcy5cclxuXHJcbiAgZnVuY3Rpb24gY29sbGFwc2UoZCkge1xyXG4gICAgICBpZiAoZC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xyXG4gICAgICAgICAgZC5fY2hpbGRyZW4uZm9yRWFjaChjb2xsYXBzZSk7XHJcbiAgICAgICAgICBkLmNoaWxkcmVuID0gW107XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGV4cGFuZChkKSB7XHJcbiAgICAgIGlmIChkLl9jaGlsZHJlbikge1xyXG4gICAgICAgICAgZC5jaGlsZHJlbiA9IGQuX2NoaWxkcmVuO1xyXG4gICAgICAgICAgZC5jaGlsZHJlbi5mb3JFYWNoKGV4cGFuZCk7XHJcbiAgICAgICAgICBkLl9jaGlsZHJlbiA9IFtdO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICB2YXIgb3ZlckNpcmNsZSA9IGZ1bmN0aW9uKGQpIHtcclxuICAgICAgc2VsZWN0ZWROb2RlID0gZDtcclxuICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gIH07XHJcbiAgdmFyIG91dENpcmNsZSA9IGZ1bmN0aW9uKGQpIHtcclxuICAgICAgc2VsZWN0ZWROb2RlID0gbnVsbDtcclxuICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gIH07XHJcblxyXG4gIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgdGVtcG9yYXJ5IGNvbm5lY3RvciBpbmRpY2F0aW5nIGRyYWdnaW5nIGFmZmlsaWF0aW9uXHJcbiAgdmFyIHVwZGF0ZVRlbXBDb25uZWN0b3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGRhdGEgPSBbXTtcclxuICAgICAgaWYgKGRyYWdnaW5nTm9kZSAhPT0gbnVsbCAmJiBzZWxlY3RlZE5vZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgIC8vIGhhdmUgdG8gZmxpcCB0aGUgc291cmNlIGNvb3JkaW5hdGVzIHNpbmNlIHdlIGRpZCB0aGlzIGZvciB0aGUgZXhpc3RpbmcgY29ubmVjdG9ycyBvbiB0aGUgb3JpZ2luYWwgdHJlZVxyXG4gICAgICAgICAgZGF0YSA9IFt7XHJcbiAgICAgICAgICAgICAgc291cmNlOiB7XHJcbiAgICAgICAgICAgICAgICAgIHg6IHNlbGVjdGVkTm9kZS55MCxcclxuICAgICAgICAgICAgICAgICAgeTogc2VsZWN0ZWROb2RlLngwXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB0YXJnZXQ6IHtcclxuICAgICAgICAgICAgICAgICAgeDogZHJhZ2dpbmdOb2RlLnkwLFxyXG4gICAgICAgICAgICAgICAgICB5OiBkcmFnZ2luZ05vZGUueDBcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgbGluayA9IHN2Z0dyb3VwLnNlbGVjdEFsbChcIi50ZW1wbGlua1wiKS5kYXRhKGRhdGEpO1xyXG5cclxuICAgICAgbGluay5lbnRlcigpLmFwcGVuZChcInBhdGhcIilcclxuICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ0ZW1wbGlua1wiKVxyXG4gICAgICAgICAgLmF0dHIoXCJkXCIsIGQzLnN2Zy5kaWFnb25hbCgpKVxyXG4gICAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuXHJcbiAgICAgIGxpbmsuYXR0cihcImRcIiwgZDMuc3ZnLmRpYWdvbmFsKCkpO1xyXG5cclxuICAgICAgbGluay5leGl0KCkucmVtb3ZlKCk7XHJcbiAgfTtcclxuXHJcbiAgLy8gRnVuY3Rpb24gdG8gY2VudGVyIG5vZGUgd2hlbiBjbGlja2VkL2Ryb3BwZWQgc28gbm9kZSBkb2Vzbid0IGdldCBsb3N0IHdoZW4gY29sbGFwc2luZy9tb3Zpbmcgd2l0aCBsYXJnZSBhbW91bnQgb2YgY2hpbGRyZW4uXHJcblxyXG4gIGZ1bmN0aW9uIGNlbnRlck5vZGUoc291cmNlKSB7XHJcbiAgICAgIHNjYWxlID0gem9vbUxpc3RlbmVyLnNjYWxlKCk7XHJcbiAgICAgIHggPSAtc291cmNlLnkwO1xyXG4gICAgICB5ID0gLXNvdXJjZS54MDtcclxuICAgICAgeCA9IHggKiBzY2FsZSArIHZpZXdlcldpZHRoIC8gMjtcclxuICAgICAgeSA9IHkgKiBzY2FsZSArIHZpZXdlckhlaWdodCAvIDI7XHJcbiAgICAgIGQzLnNlbGVjdCgnZycpLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB4ICsgXCIsXCIgKyB5ICsgXCIpc2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiKTtcclxuICAgICAgem9vbUxpc3RlbmVyLnNjYWxlKHNjYWxlKTtcclxuICAgICAgem9vbUxpc3RlbmVyLnRyYW5zbGF0ZShbeCwgeV0pO1xyXG4gIH1cclxuXHJcbiAgLy8gVG9nZ2xlIGNoaWxkcmVuIGZ1bmN0aW9uXHJcblxyXG4gIGZ1bmN0aW9uIHRvZ2dsZUNoaWxkcmVuKGQpIHtcclxuICAgICAgaWYgKGQuY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcclxuICAgICAgICAgIGQuY2hpbGRyZW4gPSBbXTtcclxuICAgICAgfSBlbHNlIGlmIChkLl9jaGlsZHJlbikge1xyXG4gICAgICAgICAgZC5jaGlsZHJlbiA9IGQuX2NoaWxkcmVuO1xyXG4gICAgICAgICAgZC5fY2hpbGRyZW4gPSBbXTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZDtcclxuICB9XHJcblxyXG4gIC8vIFRvZ2dsZSBjaGlsZHJlbiBvbiBjbGljay5cclxuXHJcbiAgZnVuY3Rpb24gY2xpY2soZCkge1xyXG4gICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuOyAvLyBjbGljayBzdXBwcmVzc2VkXHJcbiAgICAgIGQgPSB0b2dnbGVDaGlsZHJlbihkKTtcclxuICAgICAgdXBkYXRlKGQpO1xyXG4gICAgICBjZW50ZXJOb2RlKGQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlKHNvdXJjZSkge1xyXG4gICAgdmFyIGNvbXB1dGVOb2RlU2l6ZSA9IGZ1bmN0aW9uKG5vZGUsIGZpZWxkKVxyXG4gICAge1xyXG4gICAgICBpZihub2RlLnZhbHVlcyAmJiBub2RlLnZhbHVlc1tmaWVsZF0gJiYgbm9kZS52YWx1ZXNbZmllbGRdID4gNSlcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiBub2RlLnZhbHVlc1tmaWVsZF07XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIDU7XHJcbiAgICAgIH0gICAgICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgICAvLyBDb21wdXRlIHRoZSBuZXcgaGVpZ2h0LCBmdW5jdGlvbiBjb3VudHMgdG90YWwgY2hpbGRyZW4gb2Ygcm9vdCBub2RlIGFuZCBzZXRzIHRyZWUgaGVpZ2h0IGFjY29yZGluZ2x5LlxyXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBsYXlvdXQgbG9va2luZyBzcXVhc2hlZCB3aGVuIG5ldyBub2RlcyBhcmUgbWFkZSB2aXNpYmxlIG9yIGxvb2tpbmcgc3BhcnNlIHdoZW4gbm9kZXMgYXJlIHJlbW92ZWRcclxuICAgICAgLy8gVGhpcyBtYWtlcyB0aGUgbGF5b3V0IG1vcmUgY29uc2lzdGVudC5cclxuICAgICAgdmFyIGxldmVsV2lkdGggPSBbMV07XHJcbiAgICAgIHZhciBjaGlsZENvdW50ID0gZnVuY3Rpb24obGV2ZWwsIG4pIHtcclxuXHJcbiAgICAgICAgICBpZiAobi5jaGlsZHJlbiAmJiBuLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICBpZiAobGV2ZWxXaWR0aC5sZW5ndGggPD0gbGV2ZWwgKyAxKSBsZXZlbFdpZHRoLnB1c2goMCk7XHJcblxyXG4gICAgICAgICAgICAgIGxldmVsV2lkdGhbbGV2ZWwgKyAxXSArPSBuLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICAgICAgICBuLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICBjaGlsZENvdW50KGxldmVsICsgMSwgZCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIGNoaWxkQ291bnQoMCwgcm9vdCk7XHJcbiAgICAgIHZhciBuZXdIZWlnaHQgPSBkMy5tYXgobGV2ZWxXaWR0aCkgKiAyNTsgLy8gMjUgcGl4ZWxzIHBlciBsaW5lICBcclxuICAgICAgdHJlZSA9IHRyZWUuc2l6ZShbbmV3SGVpZ2h0LCB2aWV3ZXJXaWR0aF0pO1xyXG5cclxuICAgICAgLy8gQ29tcHV0ZSB0aGUgbmV3IHRyZWUgbGF5b3V0LlxyXG4gICAgICB2YXIgbm9kZXMgPSB0cmVlLm5vZGVzKHJvb3QpLnJldmVyc2UoKSxcclxuICAgICAgICAgIGxpbmtzID0gdHJlZS5saW5rcyhub2Rlcyk7XHJcblxyXG4gICAgICAvLyBTZXQgd2lkdGhzIGJldHdlZW4gbGV2ZWxzIGJhc2VkIG9uIG1heExhYmVsTGVuZ3RoLlxyXG4gICAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgIGQueSA9IChkLmRlcHRoICogKG1heExhYmVsTGVuZ3RoICogMTApKTsgLy9tYXhMYWJlbExlbmd0aCAqIDEwcHhcclxuICAgICAgICAgIC8vIGFsdGVybmF0aXZlbHkgdG8ga2VlcCBhIGZpeGVkIHNjYWxlIG9uZSBjYW4gc2V0IGEgZml4ZWQgZGVwdGggcGVyIGxldmVsXHJcbiAgICAgICAgICAvLyBOb3JtYWxpemUgZm9yIGZpeGVkLWRlcHRoIGJ5IGNvbW1lbnRpbmcgb3V0IGJlbG93IGxpbmVcclxuICAgICAgICAgIC8vIGQueSA9IChkLmRlcHRoICogNTAwKTsgLy81MDBweCBwZXIgbGV2ZWwuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHRoZSBub2Rlc+KAplxyXG4gICAgICBub2RlID0gc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpXHJcbiAgICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBkLmlkIHx8IChkLmlkID0gKytpKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gRW50ZXIgYW55IG5ldyBub2RlcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXHJcbiAgICAgIHZhciBub2RlRW50ZXIgPSBub2RlLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgICAgLmNhbGwoZHJhZ0xpc3RlbmVyKVxyXG4gICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGVcIilcclxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueTAgKyBcIixcIiArIHNvdXJjZS54MCArIFwiKVwiO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5vbignY2xpY2snLCBjbGljayk7XHJcblxyXG4gICAgICBub2RlRW50ZXIuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbm9kZUNpcmNsZScpXHJcbiAgICAgICAgICAuYXR0cihcInJcIiwgMClcclxuICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBkLl9jaGlsZHJlbiA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICBub2RlRW50ZXIuYXBwZW5kKFwidGV4dFwiKVxyXG4gICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IC0xMCA6IDEwO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ25vZGVUZXh0JylcclxuICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gXCJlbmRcIiA6IFwic3RhcnRcIjtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQubmFtZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMCk7XHJcblxyXG4gICAgICAvLyBwaGFudG9tIG5vZGUgdG8gZ2l2ZSB1cyBtb3VzZW92ZXIgaW4gYSByYWRpdXMgYXJvdW5kIGl0XHJcbiAgICAgIG5vZGVFbnRlci5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZScpXHJcbiAgICAgICAgICAuYXR0cihcInJcIiwgMzApXHJcbiAgICAgICAgICAuYXR0cihcIm9wYWNpdHlcIiwgMC4yKSAvLyBjaGFuZ2UgdGhpcyB0byB6ZXJvIHRvIGhpZGUgdGhlIHRhcmdldCBhcmVhXHJcbiAgICAgIC5zdHlsZShcImZpbGxcIiwgXCJyZWRcIilcclxuICAgICAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdtb3VzZW92ZXInKVxyXG4gICAgICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgICBvdmVyQ2lyY2xlKG5vZGUpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgICBvdXRDaXJjbGUobm9kZSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgdGV4dCB0byByZWZsZWN0IHdoZXRoZXIgbm9kZSBoYXMgY2hpbGRyZW4gb3Igbm90LlxyXG4gICAgICBub2RlLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gLTEwIDogMTA7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyBcImVuZFwiIDogXCJzdGFydFwiO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBDaGFuZ2UgdGhlIGNpcmNsZSBmaWxsIGRlcGVuZGluZyBvbiB3aGV0aGVyIGl0IGhhcyBjaGlsZHJlbiBhbmQgaXMgY29sbGFwc2VkXHJcbiAgICAgIG5vZGUuc2VsZWN0KFwiY2lyY2xlLm5vZGVDaXJjbGVcIilcclxuICAgICAgICAgIC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBjb21wdXRlTm9kZVNpemUoZCk7IH0pXHJcbiAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZC5fY2hpbGRyZW4gPyBcImxpZ2h0c3RlZWxibHVlXCIgOiBcIiNmZmZcIjtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVHJhbnNpdGlvbiBub2RlcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICAgIHZhciBub2RlVXBkYXRlID0gbm9kZS50cmFuc2l0aW9uKClcclxuICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcclxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnkgKyBcIixcIiArIGQueCArIFwiKVwiO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBGYWRlIHRoZSB0ZXh0IGluXHJcbiAgICAgIG5vZGVVcGRhdGUuc2VsZWN0KFwidGV4dFwiKVxyXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDEpO1xyXG5cclxuICAgICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5vZGVzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXHJcbiAgICAgIHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS55ICsgXCIsXCIgKyBzb3VyY2UueCArIFwiKVwiO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgIG5vZGVFeGl0LnNlbGVjdChcImNpcmNsZVwiKVxyXG4gICAgICAgICAgLmF0dHIoXCJyXCIsIDApO1xyXG5cclxuICAgICAgbm9kZUV4aXQuc2VsZWN0KFwidGV4dFwiKVxyXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDApO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHRoZSBsaW5rc+KAplxyXG4gICAgICB2YXIgbGluayA9IHN2Z0dyb3VwLnNlbGVjdEFsbChcInBhdGgubGlua1wiKVxyXG4gICAgICAgICAgLmRhdGEobGlua3MsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQuaWQ7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEVudGVyIGFueSBuZXcgbGlua3MgYXQgdGhlIHBhcmVudCdzIHByZXZpb3VzIHBvc2l0aW9uLlxyXG4gICAgICBsaW5rLmVudGVyKCkuaW5zZXJ0KFwicGF0aFwiLCBcImdcIilcclxuICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5rXCIpXHJcbiAgICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHZhciBvID0ge1xyXG4gICAgICAgICAgICAgICAgICB4OiBzb3VyY2UueDAsXHJcbiAgICAgICAgICAgICAgICAgIHk6IHNvdXJjZS55MFxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGRpYWdvbmFsKHtcclxuICAgICAgICAgICAgICAgICAgc291cmNlOiBvLFxyXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ6IG9cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVHJhbnNpdGlvbiBsaW5rcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICAgIGxpbmsudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXHJcbiAgICAgICAgICAuYXR0cihcImRcIiwgZGlhZ29uYWwpO1xyXG5cclxuICAgICAgLy8gVHJhbnNpdGlvbiBleGl0aW5nIG5vZGVzIHRvIHRoZSBwYXJlbnQncyBuZXcgcG9zaXRpb24uXHJcbiAgICAgIGxpbmsuZXhpdCgpLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICB2YXIgbyA9IHtcclxuICAgICAgICAgICAgICAgICAgeDogc291cmNlLngsXHJcbiAgICAgICAgICAgICAgICAgIHk6IHNvdXJjZS55XHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICByZXR1cm4gZGlhZ29uYWwoe1xyXG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IG8sXHJcbiAgICAgICAgICAgICAgICAgIHRhcmdldDogb1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5yZW1vdmUoKTtcclxuXHJcbiAgICAgIC8vIFN0YXNoIHRoZSBvbGQgcG9zaXRpb25zIGZvciB0cmFuc2l0aW9uLlxyXG4gICAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgIGQueDAgPSBkLng7XHJcbiAgICAgICAgICBkLnkwID0gZC55O1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIEFwcGVuZCBhIGdyb3VwIHdoaWNoIGhvbGRzIGFsbCBub2RlcyBhbmQgd2hpY2ggdGhlIHpvb20gTGlzdGVuZXIgY2FuIGFjdCB1cG9uLlxyXG4gIHZhciBzdmdHcm91cCA9IGJhc2VTdmcuYXBwZW5kKFwiZ1wiKTtcclxuXHJcbiAgLy8gRGVmaW5lIHRoZSByb290XHJcbiAgcm9vdCA9IHRyZWVEYXRhO1xyXG4gIHJvb3QueDAgPSB2aWV3ZXJIZWlnaHQgLyAyO1xyXG4gIHJvb3QueTAgPSAwO1xyXG5cclxuICAvLyBDb2xsYXBzZSBhbGwgY2hpbGRyZW4gb2Ygcm9vdHMgY2hpbGRyZW4gYmVmb3JlIHJlbmRlcmluZy5cclxuICAvL3Jvb3QuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCl7XHJcbiAgLy9cdGNvbGxhcHNlKGNoaWxkKTtcclxuICAvL30pO1xyXG5cclxuICAvLyBMYXlvdXQgdGhlIHRyZWUgaW5pdGlhbGx5IGFuZCBjZW50ZXIgb24gdGhlIHJvb3Qgbm9kZS5cclxuICB1cGRhdGUocm9vdCk7XHJcbiAgY2VudGVyTm9kZShyb290KTtcclxufSIsIi8qXHJcbkNvcHlyaWdodCAoYykgMjAwOC0yMDExLCB3d3cucmVkaXBzLm5ldCBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5Db2RlIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgTGljZW5zZTogaHR0cDovL3d3dy5yZWRpcHMubmV0L2xpY2Vuc2UvXHJcbmh0dHA6Ly93d3cucmVkaXBzLm5ldC9qYXZhc2NyaXB0L2RyYWctYW5kLWRyb3AtdGFibGUtY29udGVudC9cclxuKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIFJFRElQUyA9IFJFRElQUyB8fCB7fTsgICAgICAvL2NyZWF0ZSBSRURJUFMgbmFtZXNwYWNlIChpZiBpcyBub3QgYWxyZWFkeSBkZWZpbmVkIGluIGFub3RoZXIgUkVESVBTIHBhY2thZ2UpXHJcblxyXG4vL1JFRElQUy5kcmFnIGlzIGEgSmF2YVNjcmlwdCBkcmFnIGFuZCBkcm9wIGxpYnJhcnkgZm9jdXNlZCBvbiBkcmFnZ2luZyB0YWJsZSBjb250ZW50IChESVYgZWxlbWVudHMpIGFuZCB0YWJsZSByb3dzLlxyXG5SRURJUFMuZHJhZyA9IChmdW5jdGlvbiAoKVxyXG57XHJcbiAgICAvLyBtZXRob2RzXHJcbiAgdmFyIGluaXQsICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvblxyXG4gICAgZW5hYmxlRHJhZywgICAgICAgICAvLyBtZXRob2QgYXR0YWNoZXMgLyBkZXRhY2hlcyBvbm1vdXNlZG93biBhbmQgb25zY3JvbGwgZXZlbnQgaGFuZGxlcnMgZm9yIERJViBlbGVtZW50c1xyXG4gICAgZW5hYmxlRGl2cyxcclxuICAgIGhhbmRsZXJPbk1vdXNlRG93biwgICAgIC8vIG9ubW91c2Vkb3duIGhhbmRsZXJcclxuICAgIGhhbmRsZXJPbk1vdXNlVXAsICAgICAvLyBvbm1vdXNldXAgaGFuZGxlclxyXG4gICAgaGFuZGxlck9uTW91c2VNb3ZlLCAgICAgLy8gb25tb3VzZW1vdmUgaGFuZGxlciBmb3IgdGhlIGRvY3VtZW50IGxldmVsXHJcbiAgICBlbGVtZW50RHJvcCwgICAgICAgIC8vIGRyb3AgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbFxyXG4gICAgcmVzZXRTdHlsZXMsICAgICAgICAvLyByZXNldCBvYmplY3Qgc3R5bGVzIGFmdGVyIGVsZW1lbnQgaXMgZHJvcHBlZFxyXG4gICAgcmVnaXN0ZXJFdmVudHMsICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3IgRElWIGVsZW1lbnRcclxuICAgIGNlbGxDaGFuZ2VkLCAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2QgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlKCksIGF1dG9TY3JvbGxYKCksIGF1dG9TY3JvbGxZKClcclxuICAgIGhhbmRsZXJPblJlc2l6ZSwgICAgICAvLyBvbnJlc2l6ZSB3aW5kb3cgZXZlbnQgaGFuZGxlclxyXG4gICAgc2V0VGFibGVSb3dDb2x1bW4sICAgICAgLy8gZnVuY3Rpb24gc2V0cyBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGxcclxuICAgIHNldFBvc2l0aW9uLCAgICAgICAgLy8gZnVuY3Rpb24gc2V0cyBjb2xvciBmb3IgdGhlIGN1cnJlbnQgdGFibGUgY2VsbCBhbmQgcmVtZW1iZXJzIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBjb2xvclxyXG4gICAgc2V0VGRTdHlsZSwgICAgICAgICAvLyBtZXRob2Qgc2V0cyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIGZvciBURFxyXG4gICAgZ2V0VGRTdHlsZSwgICAgICAgICAvLyBtZXRob2QgcmV0dXJucyBvYmplY3QgY29udGFpbmluZyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIGZvciBURFxyXG4gICAgYm94T2Zmc2V0LCAgICAgICAgICAvLyBjYWxjdWxhdGVzIG9iamVjdCAoYm94KSBvZmZzZXQgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdClcclxuICAgIGNhbGN1bGF0ZUNlbGxzLCAgICAgICAvLyBjYWxjdWxhdGVzIHRhYmxlIGNvbHVtbnMgYW5kIHJvdyBvZmZzZXRzIChjZWxscyBkaW1lbnNpb25zKVxyXG4gICAgZ2V0U2Nyb2xsUG9zaXRpb24sICAgICAgLy8gcmV0dXJucyBzY3JvbGwgcG9zaXRpb25zIGluIGFycmF5XHJcbiAgICBhdXRvU2Nyb2xsWCwgICAgICAgIC8vIGhvcml6b250YWwgYXV0byBzY3JvbGwgZnVuY3Rpb25cclxuICAgIGF1dG9TY3JvbGxZLCAgICAgICAgLy8gdmVydGljYWwgYXV0byBzY3JvbGwgZnVuY3Rpb25cclxuICAgIGNvcHlQcm9wZXJ0aWVzLCAgICAgICAvLyBtZXRob2QgY29waWVzIGN1c3RvbSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIGVsZW1lbnQgdG8gdGhlIGNsb25lZCBlbGVtZW50LlxyXG4gICAgY2xvbmVMaW1pdCwgICAgICAgICAvLyBjbG9uZSBsaW1pdCAoYWZ0ZXIgY2xvbmluZyBvYmplY3QsIHRha2UgY2FyZSBhYm91dCBjbGltaXQxX1ggb3IgY2xpbWl0Ml9YIGNsYXNzbmFtZXMpXHJcbiAgICBnZXRTdHlsZSwgICAgICAgICAvLyBtZXRob2QgcmV0dXJucyBzdHlsZSB2YWx1ZSBvZiByZXF1ZXN0ZWQgb2JqZWN0IGFuZCBzdHlsZSBuYW1lXHJcbiAgICBmaW5kUGFyZW50LCAgICAgICAgIC8vIG1ldGhvZCByZXR1cm5zIGEgcmVmZXJlbmNlIG9mIHRoZSByZXF1aXJlZCBwYXJlbnQgZWxlbWVudFxyXG4gICAgcm93T3BhY2l0eSwgICAgICAgICAvLyBtZXRob2Qgc2V0cyBvcGFjaXR5IHRvIHRhYmxlIHJvdyAoZWwsIG9wYWNpdHksIGNvbG9yKVxyXG4gICAgcm93Q2xvbmUsICAgICAgICAgLy8gY2xvbmUgdGFibGUgcm93IC0gaW5wdXQgcGFyYW1ldGVyIGlzIERJViB3aXRoIGNsYXNzIG5hbWUgXCJyZWRpcHMtcm93XCIgLT4gRElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiXHJcbiAgICByb3dEcm9wLCAgICAgICAgICAvLyBmdW5jdGlvbiBkcm9wcyAoZGVsZXRlIG9sZCAmIGluc2VydCBuZXcpIHRhYmxlIHJvdyAoaW5wdXQgcGFyYW1ldGVycyBhcmUgY3VycmVudCB0YWJsZSBhbmQgcm93KVxyXG4gICAgbm9ybWFsaXplLCAgICAgICAgICAvLyBwcml2YXRlIG1ldGhvZCByZXR1cm5zIG5vcm1hbGl6ZWQgc3BhY2VzIGZyb20gaW5wdXQgc3RyaW5nXHJcblxyXG4gICAgLy8gcHJpdmF0ZSBwYXJhbWV0ZXJzXHJcbiAgICBvYmpNYXJnaW4gPSBudWxsLCAgICAgLy8gc3BhY2UgZnJvbSBjbGlja2VkIHBvaW50IHRvIHRoZSBvYmplY3QgYm91bmRzICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpXHJcblxyXG4gICAgLy8gd2luZG93IHdpZHRoIGFuZCBoZWlnaHQgKHBhcmFtZXRlcnMgYXJlIHNldCBpbiBvbmxvYWQgYW5kIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIpLCBqdXN0IGZvciBhIG5vdGU6IHdpbmRvdyBhbmQgV2luZG93IGlzIHJlc2VydmVkIHdvcmQgaW4gSlMgc28gSSBuYW1lZCB2YXJpYWJsZSBcInNjcmVlblwiKVxyXG4gICAgc2NyZWVuID0ge3dpZHRoOiAwLCBoZWlnaHQ6IDB9LFxyXG5cclxuICAgIC8vIGRlZmluZSBzY3JvbGwgb2JqZWN0IHdpdGggY29udGFpbmVkIHByb3BlcnRpZXMgKHRoaXMgaXMgcHJpdmF0ZSBwcm9wZXJ0eSlcclxuICAgIHNjcm9sbERhdGEgPSB7d2lkdGggOiBudWxsLCAvLyBzY3JvbGwgd2lkdGggb2YgdGhlIHdpbmRvdyAoaXQgaXMgdXN1YWxseSBncmVhdGVyIHRoZW4gd2luZG93KVxyXG4gICAgICAgIGhlaWdodCA6IG51bGwsICAgIC8vIHNjcm9sbCBoZWlnaHQgb2YgdGhlIHdpbmRvdyAoaXQgaXMgdXN1YWxseSBncmVhdGVyIHRoZW4gd2luZG93KVxyXG4gICAgICAgIGNvbnRhaW5lciA6IFtdLCAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzIChjb250YWlucyBhdXRvc2Nyb2xsIGFyZWFzLCByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5lciBhbmQgc2Nyb2xsIGRpcmVjdGlvbilcclxuICAgICAgICBvYmogOiBudWxsfSwgICAgLy8gc2Nyb2xsIG9iamVjdCAobmVlZGVkIGluIGF1dG9zY3JvbGwgZm9yIHJlY3Vyc2l2ZSBjYWxscylcclxuXHJcbiAgICBlZGdlID0ge3BhZ2U6IHt4OiAwLCB5OiAwfSwgLy8gYXV0b3Njcm9sbCBib3VuZCB2YWx1ZXMgZm9yIHBhZ2UgYW5kIGRpdiBhcyBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgIGRpdjogIHt4OiAwLCB5OiAwfSwgLy8gY2xvc2VyIHRvIHRoZSBlZGdlLCBmYXN0ZXIgc2Nyb2xsaW5nXHJcbiAgICAgICAgZmxhZzoge3g6IDAsIHk6IDB9fSwvLyBmbGFncyBhcmUgbmVlZGVkIHRvIHByZXZlbnQgbXVsdGlwbGUgY2FsbHMgb2YgYXV0b1Njcm9sbFggYW5kIGF1dG9TY3JvbGxZIGZyb20gb25tb3VzZW1vdmUgZXZlbnQgaGFuZGxlclxyXG5cclxuICAgIGJnU3R5bGVPbGQsICAgICAgICAgLy8gKG9iamVjdCkgb2xkIHRkIHN0eWxlcyAoYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcylcclxuXHJcbiAgICB0YWJsZSwgICAgICAgIC8vIHRhYmxlIG9mZnNldHMgYW5kIHJvdyBvZmZzZXRzIChpbml0aWFsaXplZCBpbiBvbmxvYWQgZXZlbnQpXHJcbiAgICBtb3ZlZCwgICAgICAgICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBlbGVtZW50IGlzIG1vdmVkXHJcbiAgICBjbG9uZWQsICAgICAgICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBlbGVtZW50IGlzIGNsb25lZFxyXG4gICAgY2xvbmVkSWQgPSBbXSwgICAgICAgIC8vIG5lZWRlZCBmb3IgaW5jcmVtZW50IElEIG9mIGNsb25lZCBlbGVtZW50c1xyXG4gICAgY3VycmVudENlbGwgPSBbXSwgICAgIC8vIGN1cnJlbnQgY2VsbCBib3VuZHMgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCkgYW5kIFwiY29udGFpblRhYmxlXCIgZmxhZyBmb3IgbmVzdGVkIHRhYmxlc1xyXG4gICAgZHJhZ0NvbnRhaW5lciA9IG51bGwsICAgLy8gZHJhZyBjb250YWluZXIgcmVmZXJlbmNlXHJcbiAgICBkaXZCb3ggPSBudWxsLCAgICAgICAgLy8gZGl2IGRyYWcgYm94OiB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgbWFyZ2luIChkZWNyZWFzZSBudW1iZXIgY2FsbHMgb2Ygc2V0VGFibGVSb3dDb2x1bW4pXHJcbiAgICBwb2ludGVyID0ge3g6IDAsIHk6IDB9LCAgIC8vIG1vdXNlIHBvaW50ZXIgcG9zaXRpb24gKHRoaXMgcHJvcGVydGllcyBhcmUgc2V0IGluIGhhbmRsZXJPbk1vdXNlTW92ZSgpIC0gbmVlZGVkIGZvciBhdXRvc2Nyb2xsKVxyXG4gICAgdGhyZXNob2xkID0ge3g6IDAsICAgICAgLy8gaW5pdGlhbCB4LCB5IHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICB2YWx1ZTogNywgICAvLyB0aHJlc2hvbGQgZGlzdGFuY2UgdmFsdWVcclxuICAgICAgICAgIGZsYWc6IGZhbHNlfSwgLy8gdGhyZXNob2xkIGZsYWdcclxuICAgIHNoaWZ0S2V5ID0gZmFsc2UsICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBzaGlmdCBrZXkgaXMgcHJlc3NlZCAoc2V0IGluIGhhbmRsZXJfbW91c2Vkb3duKVxyXG4gICAgY2xvbmVDbGFzcyA9IGZhbHNlLCAgICAgLy8gKGJvb2xlYW4pIHRydWUgaWYgY2xpY2tlZCBlbGVtZW50IGNvbnRhaW5zIGNsb25lIGluIGNsYXNzIG5hbWUgKHNldCBpbiBoYW5kbGVyX21vdXNlZG93bilcclxuICAgIHdpbmRvd1Njcm9sbFBvc2l0aW9uLCAgIC8vIChhcnJheSkgdG9wIGFuZCBsZWZ0IHdpbmRvdyBvZmZzZXQgKHNldCBpbiBjYWxjdWxhdGVDZWxscyBhbmQgdXNlZCBpbiBib3hPZmZzZXQpXHJcblxyXG4gICAgLy8gc2VsZWN0ZWQsIHByZXZpb3VzIGFuZCBzb3VyY2Ugcm93IGFuZCBjZWxsIChwcml2YXRlIHBhcmFtZXRlcnMgdG9vKVxyXG4gICAgcm93ID0gbnVsbCxcclxuICAgIHJvd19vbGQgPSBudWxsLFxyXG4gICAgcm93X3NvdXJjZSA9IG51bGwsXHJcbiAgICBjZWxsID0gbnVsbCxcclxuICAgIGNlbGxfb2xkID0gbnVsbCxcclxuICAgIGNlbGxfc291cmNlID0gbnVsbCxcclxuXHJcbiAgICAvLyB2YXJpYWJsZXMgaW4gdGhlIHByaXZhdGUgc2NvcGUgcmV2ZWFsZWQgYXMgcHVibGljIChzZWUgaW5pdCgpIG1ldGhvZClcclxuICAgIG9iaiA9IGZhbHNlLCAgICAgICAgLy8gKG9iamVjdCkgbW92ZWQgb2JqZWN0XHJcbiAgICBvYmpPbGQgPSBmYWxzZSwgICAgICAgLy8gKG9iamVjdCkgcHJldmlvdXNseSBtb3ZlZCBvYmplY3QgKGJlZm9yZSBjbGlja2VkIG9yIGNsb25lZClcclxuICAgIGhvdmVyID0ge2NvbG9yVGQ6ICcjRkZDRkFFJywgY29sb3JUcjogJyM5QkIzREEnfSxcclxuICAgIHNjcm9sbCA9IHtlbmFibGUgOiB0cnVlLCAgLy8gKGJvb2xlYW4pIGVuYWJsZS9kaXNhYmxlIGF1dG9zY3JvbGwgZnVuY3Rpb24gKGRlZmF1bHQgaXMgdHJ1ZSlcclxuICAgICAgICBib3VuZCA6IDI1LCAgICAgLy8gKGludGVnZXIpIGJvdW5kIHdpZHRoIGZvciBhdXRvc2Nyb2xsXHJcbiAgICAgICAgc3BlZWQgOiAyMH0sICAgIC8vIChpbnRlZ2VyKSBzY3JvbGwgc3BlZWQgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICBzdHlsZSA9IHsvL2JvcmRlckVuYWJsZWQgOiAnc29saWQnLCAvLyAoc3RyaW5nKSBib3JkZXIgc3R5bGUgZm9yIGVuYWJsZWQgZWxlbWVudHNcclxuICAgICAgICBib3JkZXJEaXNhYmxlZCA6ICdkb3R0ZWQnLCAgLy8gKHN0cmluZykgYm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIG9wYWNpdHlEaXNhYmxlZCA6ICcnLCAgIC8vIChpbnRlZ2VyKSBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgICByb3dFbXB0eUNvbG9yIDogJ3doaXRlJ30sIC8vIChzdHJpbmcpIGNvbG9yIG9mIGVtcHR5IHJvd1xyXG4gICAgdGQgPSB7fSwgICAgICAgICAgICAvLyAob2JqZWN0KSBjb250YWlucyByZWZlcmVuY2UgdG8gc291cmNlIChzZXQgaW4gb25tb3VzZWRvd24pLCBjdXJyZW50IChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpLCBwcmV2aW91cyAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKSBhbmQgdGFyZ2V0IGNlbGwgKHNldCBpbiBvbm1vdXNldXApXHJcbiAgICBjbG9uZSA9IHtrZXlEaXYgOiBmYWxzZSwgICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIGVsZW1lbnRzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5XHJcbiAgICAgICAga2V5Um93IDogZmFsc2UsICAgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgcm93cyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleVxyXG4gICAgICAgIHNlbmRCYWNrIDogZmFsc2UsICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIHRoZW4gY2xvbmVkIGVsZW1lbnQgY2FuIGJlIHJldHVybmVkIHRvIGl0cyBzb3VyY2VcclxuICAgICAgICBkcm9wIDogZmFsc2V9LCAgICAgIC8vIChib29sZWFuKSBpZiB0cnVlLCB0aGVuIGNsb25lZCBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIGRyb3BwZWQgdG8gdGhlIHRhYmxlIG5vIG1hdHRlciBpZiBkcm9wcGVkIG91dHNpZGUgb2YgdGhlIHRhYmxlXHJcbiAgICBcclxuICAgIGV2ZW50ID0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAob2JqZWN0KSBldmVudCBoYW5kbGVyc1xyXG4gICAge1xyXG4gICAgICBjbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgY2xvbmVkRHJvcHBlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBjbG9uZWRFbmQxIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGNsb25lZEVuZDIgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgZHJvcHBlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBkcm9wcGVkQmVmb3JlIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGZpbmlzaCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBub3RDbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgbm90TW92ZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Q2hhbmdlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dDbGlja2VkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Nsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dEcm9wcGVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Ryb3BwZWRCZWZvcmUgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93RHJvcHBlZFNvdXJjZSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dNb3ZlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dOb3RDbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Tm90TW92ZWQgOiBmdW5jdGlvbiAoKSB7fVxyXG4gICAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIERyYWcgY29udGFpbmVyIGluaXRpYWxpemF0aW9uLiBJdCBzaG91bGQgYmUgY2FsbGVkIGF0IGxlYXN0IG9uY2UgYW5kIGl0J3MgcG9zc2libGUgdG8gY2FsbCBhIG1ldGhvZCBtYW55IHRpbWVzLiBFdmVyeSBwYWdlIHNob3VsZCBoYXZlIGF0IGxlYXN0IG9uZSBkcmFnIGNvbnRhaW5lci5cclxuICAgKiBJZiBSRURJUFMuZHJhZy5pbml0KCkgaXMgY2FsbGVkIHdpdGhvdXQgaW5wdXQgcGFyYW1ldGVyLCBsaWJyYXJ5IHdpbGwgc2VhcmNoIGZvciBkcmFnIGNvbnRhaW5lciB3aXRoIGlkPVwicmVkaXBzLWRyYWdcIi5cclxuICAgKiBPbmx5IHRhYmxlcyBpbnNpZGUgZHJhZyBjb250YWluZXIgd2lsbCBiZSBzY2FubmVkLiBJdCBpcyBwb3NzaWJsZSB0byBoYXZlIHNldmVyYWwgZHJhZyBjb250YWluZXJzIHRvdGFseSBzZXBhcmF0ZWQgKGVsZW1lbnRzIGZyb20gb25lIGNvbnRhaW5lciB3aWxsIG5vdCBiZSB2aXNpYmxlIHRvIG90aGVyIGRyYWcgY29udGFpbmVycykuXHJcbiAgICogXCJpbml0XCIgbWV0aG9kIGNhbGxzIGVuYWJsZURyYWcuIElmIHRhYmxlcyBhcmUgZ2VuZXJhdGVkIGR5bmFtaWNhbGx5IHRoZW4gUkVESVBTLmluaXQoKSBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCB0byBzZXQgY3VzdG9tIHByb3BlcnRpZXMgdG8gdGFibGVzICh0YWJsZSBpbml0aWFsaXphdGlvbikuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtkY10gRHJhZyBjb250YWluZXIgSWQgKGRlZmF1bHQgaXMgXCJyZWRpcHMtZHJhZ1wiKS5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGluaXQgZHJhZyBjb250YWluZXIgKHdpdGggZGVmYXVsdCBpZD1cInJlZGlwcy1kcmFnXCIpXHJcbiAgICogUkVESVBTLmRyYWcuaW5pdCgpO1xyXG4gICAqXHJcbiAgICogLy8gaW5pdCBkcmFnIGNvbnRhaW5lciB3aXRoIGlkPVwibXktZHJhZzFcIlxyXG4gICAqIFJFRElQUy5kcmFnLmluaXQoJ215LWRyYWcxJyk7XHJcbiAgICovXHJcbiAgaW5pdCA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgZHJhZ0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWRpcHMtZHJhZycpOyAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgZHJhZyBjb250YWluZXJcclxuXHJcbiAgICB3aW5kb3dTY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcblxyXG4gICAgLy8gYXBwZW5kIERJViBpZD1cInJlZGlwc19jbG9uZVwiIGlmIERJViBkb2Vzbid0IGV4aXN0IChuZWVkZWQgZm9yIGNsb25pbmcgRElWIGVsZW1lbnRzKVxyXG4gICAgLy8gaWYgYXV0b21hdGljIGNyZWF0aW9uIGlzbid0IHByZWNpc2UgZW5vdWdoLCB1c2VyIGNhbiBtYW51YWxseSBjcmVhdGUgYW5kIHBsYWNlIGVsZW1lbnQgd2l0aCBpZD1cInJlZGlwc19jbG9uZVwiIHRvIHByZXZlbnQgd2luZG93IGV4cGFuZGluZyAodGhlbiB0aGlzIGNvZGUgd2lsbCBiZSBza2lwcGVkKVxyXG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVkaXBzX2Nsb25lJykpXHJcbiAgICB7XHJcbiAgICAgIHZhciByZWRpcHNDbG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICByZWRpcHNDbG9uZS5pZCA9ICdyZWRpcHNfY2xvbmUnO1xyXG4gICAgICByZWRpcHNDbG9uZS5zdHlsZS53aWR0aCA9IHJlZGlwc0Nsb25lLnN0eWxlLmhlaWdodCA9ICcxcHgnO1xyXG4gICAgICBkcmFnQ29udGFpbmVyLmFwcGVuZENoaWxkKHJlZGlwc0Nsb25lKTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVEcmFnKCdpbml0JywgJy5yZWRpcHMtZHJhZycpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhdHRhY2ggb25tb3VzZWRvd24gZXZlbnQgaGFuZGxlciB0byB0aGUgRElWIGVsZW1lbnRzLCBhdHRhY2ggb25zY3JvbGw9J2NhbGN1bGF0ZUNlbGxzJyBmb3IgRElWIGVsZW1lbnRzIHdpdGggJ3Njcm9sbCcgaW4gY2xhc3MgbmFtZSAocHJlcGFyZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhcylcclxuICAgIHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyZWVUYWJsZScpO1xyXG4gICAgdGFibGUucmVkaXBzID0ge307XHJcblxyXG4gICAgaGFuZGxlck9uUmVzaXplKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGluaXRpYWwgd2luZG93IHdpZHRoL2hlaWdodCwgc2Nyb2xsIHdpZHRoL2hlaWdodCBhbmQgZGVmaW5lIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIsIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIgY2FsbHMgY2FsY3VsYXRlIGNvbHVtbnNcclxuICAgIFJFRElQUy5ldmVudC5hZGQod2luZG93LCAncmVzaXplJywgaGFuZGxlck9uUmVzaXplKTtcclxuICAgIFJFRElQUy5ldmVudC5hZGQod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgIC8vIGF0dGFjaCBvbnNjcm9sbCBldmVudCB0byB0aGUgd2luZG93IChuZWVkZWQgZm9yIHJlY2FsY3VsYXRpbmcgdGFibGUgY2VsbHMgcG9zaXRpb25zKVxyXG4gIH07XHJcblxyXG5cclxuICAvLyBvbm1vdXNlZG93biBldmVudCBoYW5kbGVyLiAgVGhpcyBldmVudCBoYW5kbGVyIGlzIGF0dGFjaGVkIHRvIGV2ZXJ5IERJViBlbGVtZW50IGluIGRyYWcgY29udGFpbmVyIChwbGVhc2Ugc2VlIFwiZW5hYmxlRHJhZ1wiKS5cclxuICBoYW5kbGVyT25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZSlcclxuICB7XHJcbiAgICB2YXIgZXZ0ID0gZSB8fCB3aW5kb3cuZXZlbnQ7ICAgICAgICAgIC8vIGRlZmluZSBldmVudCAoY3Jvc3MgYnJvd3NlcilcclxuICAgIHZhciBvZmZzZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2JqZWN0IG9mZnNldFxyXG4gICAgdmFyIHBvc2l0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGlvbiBvZiB0YWJsZSBvciBjb250YWluZXIgYm94IG9mIHRhYmxlIChpZiBoYXMgcG9zaXRpb246Zml4ZWQgdGhlbiBleGNsdWRlIHNjcm9sbCBvZmZzZXQpXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG5cclxuICAgIGV2dC5jYW5jZWxCdWJibGUgPSB0cnVlOyAgICAgICAgICAgICAgLy8gc3RvcCBldmVudCBwcm9wYWdhdGlvbiAob25seSBmaXJzdCBjbGlja2VkIGVsZW1lbnQgd2lsbCByZWdpc3RlciBvbm1vdXNlZG93biBldmVudCksIG5lZWRlZCBpbiBjYXNlIG9mIHBsYWNpbmcgdGFibGUgaW5zaWRlIG9mIDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiPiAoYWZ0ZXIgZWxlbWVudCB3YXMgZHJvcHBlZCB0byB0aGlzIHRhYmxlIGl0IGNvdWxkbid0IGJlIG1vdmVkIG91dCBhbnkgbW9yZSAtIHRhYmxlIGFuZCBlbGVtZW50IG1vdmVkIHRvZ2V0aGVyIGJlY2F1c2UgdGFibGUgY2FwdHVyZXMgbW91c2Vkb3duIGV2ZW50IGFsc28gaW4gYnViYmxpbmcgcHJvY2VzKVxyXG4gICAgaWYgKGV2dC5zdG9wUHJvcGFnYXRpb24pXHJcbiAgICB7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBzaGlmdEtleSA9IGV2dC5zaGlmdEtleTsgICAgICAgICAgICAgIC8vIHNldCB0cnVlIG9yIGZhbHNlIGlmIHNoaWZ0IGtleSBpcyBwcmVzc2VkXHJcblxyXG4gICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGV4dCBzZWxlY3Rpb24gKENocm9tZSwgRkYsIE9wZXJhLCBTYWZhcmkpXHJcbiAgICB7XHJcbiAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiBkb2N1bWVudC5zZWxlY3Rpb24udHlwZSA9PT0gXCJUZXh0XCIpICAvLyBJRThcclxuICAgIHtcclxuICAgICAgdHJ5IHsgZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KCk7IH0gY2F0Y2ggKGVycm9yKSB7IH0gICAgICAgICAgICAgLy8gaWdub3JlIGVycm9yIHRvIGFzIGEgd29ya2Fyb3VuZCBmb3IgYnVnIGluIElFOFxyXG4gICAgfVxyXG5cclxuICAgIFggPSBwb2ludGVyLnggPSBldnQuY2xpZW50WDtcclxuICAgIFkgPSBwb2ludGVyLnkgPSBldnQuY2xpZW50WTtcclxuXHJcbiAgICB0aHJlc2hvbGQueCA9IFg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHRocmVzaG9sZCBwb3NpdGlvbiAobmVlZGVkIGZvciBjYWxjdWxhdGluZyBkaXN0YW5jZSlcclxuICAgIHRocmVzaG9sZC55ID0gWTtcclxuICAgIHRocmVzaG9sZC5mbGFnID0gZmFsc2U7XHJcblxyXG4gICAgUkVESVBTLmRyYWcub2JqT2xkID0gb2JqT2xkID0gb2JqIHx8IHRoaXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBwcmV2aW91cyBvYmplY3QgaWYgZGVmaW5lZCBvciBzZXQgdG8gdGhlIGNsaWNrZWQgb2JqZWN0XHJcbiAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSB0aGlzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGNsaWNrZWQgb2JqZWN0XHJcblxyXG4gICAgY2xvbmVDbGFzcyA9IG9iai5jbGFzc05hbWUuaW5kZXhPZigncmVkaXBzLWNsb25lJykgPiAtMTsgICAgICAgICAgICAvLyBzZXQgdHJ1ZSBvciBmYWxzZSBpZiBjbGlja2VkIGVsZW1lbnQgY29udGFpbnMgXCJyZWRpcHMtY2xvbmVcIiBjbGFzcyBuYW1lIChuZWVkZWQgZm9yIGNsb25lIGVsZW1lbnQgYW5kIGNsb25lIHRhYmxlIHJvdylcclxuXHJcbiAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSByb3dDbG9uZShvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY3VycmVudCByb3cgKGRvIG5vdCBjbG9uZSlcclxuXHJcbiAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB1c2VyIGhhcyB1c2VkIGEgbW91c2UgZXZlbnQgdG8gaW5jcmVhc2UgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIHRhYmxlIC0gY2FsbCBjYWxjdWxhdGVDZWxscygpXHJcblxyXG4gICAgcm93ID0gY2VsbCA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCByb3cgYW5kIGNlbGwgaW5kZXhlcyAobmVlZGVkIGluIGNhc2Ugb2YgZW5hYmxlIC8gZGlzYWJsZSB0YWJsZXMpXHJcbiAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgYW5kIHJlbWVtYmVyIHNvdXJjZSBwb3NpdGlvbiAob2xkIHBvc2l0aW9uIGlzIGluaXRpYWxseSB0aGUgc2FtZSBhcyBzb3VyY2UgcG9zaXRpb24pXHJcbiAgICByb3dfc291cmNlID0gcm93X29sZCA9IHJvdztcclxuICAgIGNlbGxfc291cmNlID0gY2VsbF9vbGQgPSBjZWxsO1xyXG5cclxuICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0NsaWNrZWQodGQuY3VycmVudCk7XHJcblxyXG4gICAgLy8gaWYgc3RhcnQgcG9zaXRpb24gY2Fubm90IGJlIGRlZmluZWQgdGhlbiB1c2VyIHByb2JhYmx5IGNsaWNrZWQgb24gZWxlbWVudCB0aGF0IGJlbG9uZ3MgdG8gdGhlIGRpc2FibGVkIHRhYmxlIChvciBzb21ldGhpbmcgZWxzZSBoYXBwZW5lZCB0aGF0IHdhcyBub3Qgc3VwcG9zZWQgdG8gaGFwcGVuIC0gZXZlcnkgZWxlbWVudCBzaG91bGQgYmVsb25nIHRvIHRoZSB0YWJsZSkgdGhpcyBjb2RlIG11c3QgZ28gYWZ0ZXIgZXhlY3V0aW9uIG9mIGV2ZW50IGhhbmRsZXJzXHJcbiAgICBpZiAocm93ID09PSBudWxsIHx8IGNlbGwgPT09IG51bGwpXHJcbiAgICB7XHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcnVuIHNldFRhYmxlUm93Q29sdW1uKCkgYWdhaW4gYmVjYXVzZSBzb21lIG9mIHRhYmxlcyBtaWdodCBiZSBlbmFibGVkIGluIGhhbmRsZXIgZXZlbnRzIGFib3ZlXHJcbiAgICAgIHJvd19zb3VyY2UgPSByb3dfb2xkID0gcm93O1xyXG4gICAgICBjZWxsX3NvdXJjZSA9IGNlbGxfb2xkID0gY2VsbDtcclxuXHJcbiAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgY2VsbCA9PT0gbnVsbCkgIC8vIG5vLCBjbGlja2VkIGVsZW1lbnQgaXMgb24gdGhlIGRpc2FibGVkIHRhYmxlIC0gc29ycnlcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZWQgPSBjbG9uZWQgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBcIm1vdmVkXCIgZmxhZyAobmVlZGVkIGZvciBjbG9uZSBvYmplY3QgaW4gaGFuZGxlck9uTW91c2VNb3ZlKSBhbmQgXCJjbG9uZWRcIiBmbGFnXHJcblxyXG4gICAgUkVESVBTLmV2ZW50LmFkZChkb2N1bWVudCwgJ21vdXNlbW92ZScsIGhhbmRsZXJPbk1vdXNlTW92ZSk7ICAgICAgICAvLyBhY3RpdmF0ZSBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyIG9uIGRvY3VtZW50IG9iamVjdFxyXG4gICAgUkVESVBTLmV2ZW50LmFkZChkb2N1bWVudCwgJ21vdXNldXAnLCBoYW5kbGVyT25Nb3VzZVVwKTsgICAgICAgICAgICAvLyBhY3RpdmF0ZSBvbm1vdXNldXAgZXZlbnQgaGFuZGxlciBvbiBkb2N1bWVudCBvYmplY3RcclxuXHJcbiAgICBpZiAocm93ICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3IgaWYgaXMgcG9zc2libGVcclxuICAgIHtcclxuICAgICAgYmdTdHlsZU9sZCA9IGdldFRkU3R5bGUocm93KTtcclxuICAgIH1cclxuXHJcbiAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLCAncG9zaXRpb24nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0YWJsZSBDU1MgcG9zaXRpb24gKG5lZWRlZCBmb3IgZXhjbHVzaW9uIFwic2Nyb2xsIG9mZnNldFwiIGlmIHRhYmxlIGJveCBoYXMgcG9zaXRpb24gZml4ZWQpXHJcblxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZSBkb2Vzbid0IGhhdmUgc3R5bGUgcG9zaXRpb246Zml4ZWQgdGhlbiB0YWJsZSBjb250YWluZXIgc2hvdWxkIGJlIHRlc3RlZFxyXG4gICAge1xyXG4gICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLnBhcmVudE5vZGUsICdwb3NpdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIG9mZnNldCA9IGJveE9mZnNldChvYmosIHBvc2l0aW9uKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2JqZWN0IG9mZnNldFxyXG4gICAgb2JqTWFyZ2luID0gW1kgLSBvZmZzZXRbMF0sIG9mZnNldFsxXSAtIFgsIG9mZnNldFsyXSAtIFksIFggLSBvZmZzZXRbM11dOyAgIC8vIGNhbGN1bGF0ZSBvZmZzZXQgZnJvbSB0aGUgY2xpY2tlZCBwb2ludCBpbnNpZGUgZWxlbWVudCB0byB0aGUgdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0IHNpZGUgb2YgdGhlIGVsZW1lbnRcclxuXHJcbiAgICByZXR1cm4gZmFsc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZSB0ZXh0IHNlbGVjdGlvbiBmb3Igbm9uIElFIGJyb3dzZXJzXHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZHMgcmV0dXJucyByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIHJvdyBvciBjbG9uZXMgdGFibGUgcm93LlxyXG4gICAqIElmIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlRG93bjpcclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmlucHV0IHBhcmFtZXRlciBpcyBESVYgY2xhc3M9XCJyZWRpcHMtcm93XCI8L2xpPlxyXG4gICAqIDxsaT5tZXRob2Qgd2lsbCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjdXJyZW50IHJvdzwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBJZiBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmU6XHJcbiAgICogPHVsPlxyXG4gICAqIDxsaT5pbnB1dCBwYXJhbWV0ZXIgaXMgVFIgKGN1cnJlbnQgcm93KSAtIHByZXZpb3VzbHkgcmV0dXJuZWQgd2l0aCB0aGlzIGZ1bmN0aW9uPC9saT5cclxuICAgKiA8bGk+bWV0aG9kIHdpbGwgY2xvbmUgY3VycmVudCByb3cgYW5kIHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGNsb25lZCByb3c8L2xpPlxyXG4gICAqIDwvdWw+XHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgRElWIGNsYXNzPVwicmVkaXBzLXJvd1wiIG9yIFRSIChjdXJyZW50IHJvdylcclxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gUmV0dXJucyByZWZlcmVuY2Ugb2YgdGhlIGN1cnJlbnQgcm93IG9yIGNsb25lIGN1cnJlbnQgcm93IGFuZCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjbG9uZWQgcm93LlxyXG4gICAqL1xyXG4gIHJvd0Nsb25lID0gZnVuY3Rpb24gKGVsKVxyXG4gIHtcclxuICAgIHZhciB0YWJsZU1pbmk7ICAgICAgLy8gb3JpZ2luYWwgdGFibGUgaXMgY2xvbmVkIGFuZCBhbGwgcm93cyBleGNlcHQgcGlja2VkIHJvdyBhcmUgZGVsZXRlZFxyXG4gICAgdmFyIHJvd09iajsgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIHJvdyBvYmplY3RcclxuICAgIHZhciBkaXY7ICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSA8RElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiPiBlbGVtZW50XHJcblxyXG4gICAgaWYgKGVsLm5vZGVOYW1lID09PSAnRElWJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMSkgcm93Q2xvbmUgY2FsbCBpbiBvbm1vdXNlZG93biB3aWxsIHJldHVybiByZWZlcmVuY2Ugb2YgVFIgZWxlbWVudCAoaW5wdXQgcGFyYW1ldGVyIGlzIEhUTUxFbGVtZW50IDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCI+KVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgcmVmZXJlbmNlIHRvIHRoZSA8RElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiPlxyXG4gICAgICBlbCA9IGZpbmRQYXJlbnQoJ1RSJywgZWwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBwYXJlbnQgVFIgZWxlbWVudFxyXG4gICAgICBpZiAoZWwucmVkaXBzID09PSB1bmRlZmluZWQpIHsgZWwucmVkaXBzID0ge307IH0gICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZCAoaXQgaXMgb25seSBvbmUgcHJvcGVydHkgZm9yIG5vdylcclxuICAgICAgZWwucmVkaXBzLmRpdiA9IGRpdjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgcmVmZXJlbmNlIHRvIHRoZSBESVYgZWxlbWVudCBhcyByZWRpcHMuZGl2IHRoaXMgd2lsbCBtb3N0bHkgYmUgcmVmZXJlbmNlZCBhcyBvYmpPbGQucmVkaXBzLmRpdiAoYmVjYXVzZSBvYmpPbGQgaW4gcm93IGRyYWdnaW5nIGNvbnRleHQgaXMgcmVmZXJlbmNlIHRvIHRoZSBzb3VyY2Ugcm93KVxyXG4gICAgICByZXR1cm4gZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHJlZmVyZW5jZSB0byB0aGUgVFIgZWxlbWVudFxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMikgcm93Q2xvbmUgY2FsbCBpbiBvbm1vdXNlbW92ZSB3aWxsIGNsb25lIGN1cnJlbnQgcm93IChlbC5ub2RlTmFtZSA9PT0gJ1RSJylcclxuICAgIHtcclxuICAgICAgcm93T2JqID0gZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgc291cmNlIHJvd1xyXG5cclxuICAgICAgdGFibGVNaW5pID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgdGFibGVNaW5pLmlubmVySFRNTCA9ICc8dHIgaWQ9XCInICsgcm93T2JqLmlkICsgJ1wiIGNsYXNzPVwiJyArIHJvd09iai5jbGFzc0xpc3QgKyAnXCI+JyArIHJvd09iai5pbm5lckhUTUwgKyAnPC90cj4nO1xyXG4gICAgICAvL3RhYmxlTWluaS5pbm5lckhUTUwgPSBnZXRBc3NlbWJseU1hcmt1cChwYXJzZUludChyb3dPYmouaWQucmVwbGFjZSgncm93aWQnLCAnJykpKTsgICAvL2NhbiBiZSB1c2VkIHRvIHNob3cgdGhlIGVudGlyZSBhc3NlbWJseSB3aGVuIGRyYWdnaW5nLCB0ZW5kcyB0byBzbG93IHRoaW5ncyBkb3duIGFuZCBiZSBjdW1iZXJzb21lXHJcblxyXG4gICAgICB0YWJsZU1pbmkucmVkaXBzID0ge307ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIFwicHJvcGVydHkgb2JqZWN0XCIgaW4gd2hpY2ggYWxsIGN1c3RvbSBwcm9wZXJ0aWVzIHdpbGwgYmUgc2F2ZWRcclxuICAgICAgdGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cgPSByb3dPYmo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHNvdXJjZSByb3cgcmVmZXJlbmNlIChuZWVkZWQgZm9yIHNvdXJjZSByb3cgZGVsZXRpb24gaW4gcm93RHJvcCBtZXRob2QpXHJcblxyXG4gICAgICBjb3B5UHJvcGVydGllcyhyb3dPYmosIHRhYmxlTWluaS5yb3dzWzBdKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgdG8gYWxsIGNoaWxkIERJViBlbGVtZW50cyBhbmQgc2V0IG9ubW91c2Vkb3duL29uZGJsY2xpY2sgZXZlbnQgaGFuZGxlcnNcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZGlwc19jbG9uZScpLmFwcGVuZENoaWxkKHRhYmxlTWluaSk7ICAgICAvLyBhcHBlbmQgY2xvbmVkIG1pbmkgdGFibGUgdG8gdGhlIERJViBpZD1cInJlZGlwc19jbG9uZVwiXHJcblxyXG4gICAgICByZXR1cm4gdGFibGVNaW5pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgZHJvcHMgdGFibGUgcm93IHRvIHRoZSB0YXJnZXQgcm93IGFuZCBjYWxscyB1c2VyIGV2ZW50IGhhbmRsZXJzLiBTb3VyY2Ugcm93IGlzIGRlbGV0ZWQgYW5kIGNsb25lZCByb3cgaXMgaW5zZXJ0ZWQgYXQgdGhlIG5ldyBwb3NpdGlvbi5cclxuICAgKiBNZXRob2QgdGFrZXMgY2FyZSBhYm91dCB0aGUgbGFzdCByb3cgaW4gdGhlIHRhYmxlIG9ubHkgaWYgdXNlciBkcmFncyBlbGVtZW50LiBJbiBjYXNlIG9mIG1vdmluZyByb3dzIHdpdGggbW92ZU9iamVjdCgpLCBjb250cm9sXHJcbiAgICogYW5kIGxvZ2ljIGZvciBsYXN0IHJvdyBpcyB0dXJuZWQgb2ZmLiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZVVwKClcclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHRhYmxlSWR4IFRhYmxlIGluZGV4LlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gcm93SWR4IFJvdyBpbmRleC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBbdGFibGVNaW5pXSBSZWZlcmVuY2UgdG8gdGhlIG1pbmkgdGFibGUgKHRhYmxlIHRoYXQgY29udGFpbnMgb25seSBvbmUgcm93KS4gVGhpcyBpcyBhY3R1YWxseSBjbG9uZSBvZiBzb3VyY2Ugcm93LlxyXG4gICAqL1xyXG4gIHJvd0Ryb3AgPSBmdW5jdGlvbiAocm93SWR4KVxyXG4gIHtcclxuICAgIHZhciBkcm9wOyAgICAgICAgICAgICAgIC8vIChib29sZWFuKSBpZiBmYWxzZSB0aGVuIGRyb3BwaW5nIHJvdyB3aWxsIGJlIGNhbmNlbGVkXHJcbiAgICB2YXIgdHJNaW5pOyAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIFRSIGluIG1pbmkgdGFibGVcclxuICAgIHZhciBkZWxldGVUYWJsZVJvdzsgICAgIC8vIGRlbGV0ZSByb3cgKHByaXZhdGUgbWV0aG9kKVxyXG5cclxuICAgIGRlbGV0ZVRhYmxlUm93ID0gZnVuY3Rpb24gKGVsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIHRhYmxlIHJvdyAtIGlucHV0IHBhcmVtZXRlciBpcyByb3cgcmVmZXJlbmNlIChwcml2YXRlIG1ldGhvZClcclxuICAgIHtcclxuICAgICAgdmFyIHRibDtcclxuXHJcbiAgICAgIGlmIChlbC5yZWRpcHMgPT09IHVuZGVmaW5lZCB8fCAhZWwucmVkaXBzLmVtcHR5Um93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBkb2Vzbid0IGhhdmUgY3VzdG9tIFwicmVkaXBzXCIgcHJvcGVydHkgb3IgaXMgbm90IG1hcmtlZCBhcyBlbXB0eSwgdGhlbiBpdCBjYW4gYmUgZGVsZXRlZFxyXG4gICAgICB7XHJcbiAgICAgICAgdGJsID0gZmluZFBhcmVudCgnVEFCTEUnLCBlbCk7XHJcbiAgICAgICAgdGJsLmRlbGV0ZVJvdyhlbC5yb3dJbmRleCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSwgcm93IGlzIG1hcmtlZCBhcyBcImVtcHR5XCIgYW5kIGl0IHdpbGwgYmUgb25seSBjb2xvcmVkIChub3QgZGVsZXRlZCksIGNvbnRlbnQgb2YgdGFibGUgY2VsbHMgd2lsbCBiZSBkZWxldGVkIGFuZCBiYWNrZ3JvdW5kIGNvbG9yIHdpbGwgYmUgc2V0IHRvIGRlZmF1bHQgY29sb3JcclxuICAgICAge1xyXG4gICAgICAgIHJvd09wYWNpdHkoZWwsICdlbXB0eScsIFJFRElQUy5kcmFnLnN0eWxlLnJvd0VtcHR5Q29sb3IpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciB0YWJsZU1pbmkgPSBvYmo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY3VycmVudGx5IGRyYWdnZWQgcm93IC0gbWluaSB0YWJsZVxyXG5cclxuICAgIGlmIChyb3dJZHggPiB0YWJsZS5yb3dzLmxlbmd0aCAtIDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGluZGV4IGlzIG91dCBvZiBib3VuZHMsIHRoZW4gc2V0IG1heCByb3cgaW5kZXggKHJvdyB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSB0YWJsZSBib3R0b20pXHJcbiAgICB7XHJcbiAgICAgIHJvd0lkeCA9IHRhYmxlLnJvd3MubGVuZ3RoIC0gMTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdGFibGVSb3cgPSB0YWJsZS5yb3dzW3Jvd0lkeF07XHJcblxyXG4gICAgdHJNaW5pID0gdGFibGVNaW5pLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBUUiBpbiBtaW5pIHRhYmxlIChtaW5pIHRhYmxlIGhhcyBvbmx5IG9uZSByb3cgLSBmaXJzdCByb3cpXHJcblxyXG4gICAgdGFibGVNaW5pLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGFibGVNaW5pKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXN0cm95IG1pbmkgdGFibGUgKG5vZGUgc3RpbGwgZXhpc3RzIGluIG1lbW9yeSlcclxuXHJcbiAgICBkcm9wID0gUkVESVBTLmRyYWcuZXZlbnQucm93RHJvcHBlZEJlZm9yZSh0YWJsZSwgdGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cucm93SW5kZXgpOyAgICAgIC8vIGNhbGwgZXZlbnQucm93RHJvcHBlZEJlZm9yZSgpIC0gdGhpcyBoYW5kbGVyIGNhbiByZXR1cm4gXCJmYWxzZVwiIHZhbHVlXHJcblxyXG4gICAgaWYgKGRyb3AgIT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBoYW5kbGVyIHJldHVybmVkIGZhbHNlIHRoZW4gcm93IGRyb3BwaW5nIHdpbGwgYmUgY2FuY2VsZWRcclxuICAgIHtcclxuICAgICAgaWYgKHJvd0lkeCA8IHRhYmxlLnJvd3MubGVuZ3RoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGlzIG5vdCBkcm9wcGVkIHRvIHRoZSBsYXN0IHJvdyBwb3NpdGlvblxyXG4gICAgICB7XHJcbiAgICAgICAgdGFibGVSb3cucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodHJNaW5pLCB0YWJsZVJvdy5uZXh0U2libGluZyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IGlzIGRyb3BwZWQgdG8gdGhlIGxhc3Qgcm93IHBvc2l0aW9uLCBpdCdzIHBvc3NpYmxlIHRvIHNldCB0YXJnZXQgcm93IGluZGV4IGdyZWF0ZXIgdGhlbiBudW1iZXIgb2Ygcm93cyAtIGluIHRoaXMgY2FzZSByb3cgd2lsbCBiZSBhcHBlbmRlZCB0byB0aGUgdGFibGUgZW5kXHJcbiAgICAgIHtcclxuICAgICAgICB0YWJsZVJvdy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRyTWluaSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IHNob3VsZCBiZSBhcHBlbmRlZFxyXG4gICAgICAgIHRhYmxlUm93ID0gdGFibGUucm93c1swXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSB1cHBlciByb3csIGFmdGVyIHJvdyBpcyBhcHBlbmRlZCwgdXBwZXIgcm93IHNob3VsZCBiZSB0ZXN0ZWQgaWYgY29udGFpbnMgXCJlbXB0eVJvd1wiIHNldCB0byB0cnVlLCB0aGlzIGNvdWxkIGhhcHBlbiBpbiBjYXNlIHdoZW4gcm93IGlzIG1vdmVkIHRvIHRoZSB0YWJsZSB3aXRoIG9ubHkgb25lIGVtcHR5IHJvd1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgc291cmNlIHJvdyBpZiByb3cgaXMgbm90IGNsb25lZFxyXG4gICAgICB7XHJcbiAgICAgICAgZGVsZXRlVGFibGVSb3codGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkZWxldGUgdHJNaW5pLnJlZGlwcy5lbXB0eVJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgZW1wdHlSb3cgcHJvcGVydHkgZnJvbSBpbnNlcnRlZC9hcHBlbmRlZCByb3cgYmVjYXVzZSBlbXB0eVJvdyB3aWxsIGJlIHNldCBvbiBuZXh0IG1vdmUsIGNvcHlQcm9wZXJ0aWVzKCkgaW4gcm93Q2xvbmUoKSBjb3BpZWQgZW1wdHlSb3cgcHJvcGVydHkgdG8gdGhlIHJvdyBpbiB0YWJsZU1pbmksIG90aGVyd2lzZSByb3cgd2lsbCBiZSBvdmVyd3JpdHRlbiBhbmQgdGhhdCBpcyBub3QgZ29vZFxyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dEcm9wcGVkKHRhYmxlUm93KTsgICAgICAgICAvLyBjYWxsIHJvd0Ryb3BwZWQgZXZlbnQgaGFuZGxlclxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVudC5yb3dEcm9wcGVkQmVmb3JlKCkgcmV0dXJuZWQgXCJmYWxzZVwiIChpdCdzIHVwIHRvIHVzZXIgdG8gcmV0dXJuIHNvdXJjZSByb3cgb3BhY2l0eSB0byBpdHMgb3JpZ2luYWwgc3RhdGUpXHJcbiAgICB7XHJcbiAgICAgIC8vIHJvd09wYWNpdHkob2JqT2xkLCAxMDApO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBvbm1vdXNldXAgZXZlbnQgaGFuZGxlci5cclxuICAgKiBoYW5kbGVyT25Nb3VzZVVwIGlzIGF0dGFjaGVkIHRvIHRoZSBESVYgZWxlbWVudCBpbiBhIG1vbWVudCB3aGVuIERJViBlbGVtZW50IGlzIGNsaWNrZWQgKHRoaXMgaGFwcGVucyBpbiBoYW5kbGVyT25Nb3VzZURvd24pLlxyXG4gICAqIFRoaXMgZXZlbnQgaGFuZGxlciBkZXRhY2hlcyBvbm1vdXNlbW92ZSBhbmQgb25tb3VzZXVwIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGUgRXZlbnQgaW5mb3JtYXRpb24uXHJcbiAgICovXHJcbiAgaGFuZGxlck9uTW91c2VVcCA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgLy8gZGVmaW5lIGV2ZW50IChGRiAmIElFKVxyXG4gICAgdmFyIHJfcm93OyAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIG1vZGU9XCJyb3dcIlxyXG4gICAgdmFyIG10X3RyOyAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIHJldHVybmluZyBjb2xvciB0byB0aGUgdGFibGUgY2VsbCAobXRfdHIgLSBcIm1pbmkgdGFibGVcIiBcInRhYmxlX3Jvd1wiKVxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCBpbiBsb2NhbCBsb29wXHJcbiAgICB2YXIgZHJvcDsgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGZhbHNlIHRoZW4gZHJvcHBlZCBESVYgZWxlbWVudFxyXG5cclxuICAgIFggPSBldnQuY2xpZW50WDtcclxuICAgIFkgPSBldnQuY2xpZW50WTtcclxuXHJcbiAgICBlZGdlLmZsYWcueCA9IGVkZ2UuZmxhZy55ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHVybiBvZmYgYXV0b3Njcm9sbCBcImN1cnJlbnQgY2VsbFwiIGhhbmRsaW5nIChpZiB1c2VyIG1vdXNldXAgaW4gdGhlIG1pZGRsZSBvZiBhdXRvc2Nyb2xsaW5nKVxyXG5cclxuICAgIFJFRElQUy5ldmVudC5yZW1vdmUoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBoYW5kbGVyT25Nb3VzZU1vdmUpO1xyXG4gICAgUkVESVBTLmV2ZW50LnJlbW92ZShkb2N1bWVudCwgJ21vdXNldXAnLCBoYW5kbGVyT25Nb3VzZVVwKTtcclxuXHJcbiAgICBkcmFnQ29udGFpbmVyLm9uc2VsZWN0c3RhcnQgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWNoIGRyYWdDb250YWluZXIub25zZWxlY3RzdGFydCBoYW5kbGVyIHRvIGVuYWJsZSBzZWxlY3QgZm9yIElFNy9JRTggYnJvd3NlclxyXG5cclxuICAgIHJlc2V0U3R5bGVzKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvYmplY3Qgc3R5bGVzXHJcblxyXG4gICAgc2Nyb2xsRGF0YS53aWR0aCAgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg7XHJcbiAgICBzY3JvbGxEYXRhLmhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcblxyXG4gICAgZWRnZS5mbGFnLnggPSBlZGdlLmZsYWcueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGF1dG9zY3JvbGwgZmxhZ3NcclxuXHJcbiAgICBpZiAocm93ID09PSBudWxsIHx8IGNlbGwgPT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGVsZW1lbnQgd2FzIGNsaWNrZWQgYW5kIGxlZnQgYnV0dG9uIHdhcyByZWxlYXNlZCwgYnV0IGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSB1bm1vdmFibGUgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RNb3ZlZCgpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZHJhZy50ZC50YXJnZXQgPSB0ZC50YXJnZXQgPSB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF07XHJcblxyXG4gICAgICBzZXRUZFN0eWxlKHJvdywgYmdTdHlsZU9sZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIGZvciBkZXN0aW5hdGlvbiByb3dcclxuXHJcbiAgICAgIHJfcm93ID0gcm93O1xyXG5cclxuICAgICAgaWYgKCFtb3ZlZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgd2FzIGNsaWNrZWQgYW5kIG1vdXNlIGJ1dHRvbiB3YXMgcmVsZWFzZWQgcmlnaHQgYXdheSAocm93IHdhcyBub3QgbW92ZWQpXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dOb3RNb3ZlZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IHdhcyBtb3ZlZFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHJvd19zb3VyY2UgPT09IHJfcm93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGRyb3BwZWQgdG8gdGhlIHNvdXJjZSByb3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICBtdF90ciA9IG9iai5nZXRFbGVtZW50c0J5VGFnTmFtZSgndHInKVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBUUiBpbiBtaW5pIHRhYmxlIChtaW5pIHRhYmxlIGhhcyBvbmx5IG9uZSByb3cpXHJcblxyXG4gICAgICAgICAgb2JqT2xkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG10X3RyLnN0eWxlLmJhY2tncm91bmRDb2xvcjsgICAgICAgICAgIC8vIHJldHVybiBjb2xvciB0byB0aGUgc291cmNlIHJvdyBmcm9tIHRoZSByb3cgb2YgY2xvbmVkIG1pbmkgdGFibGUsIGNvbG9yIG9mIHRoZSBzb3VyY2Ugcm93IGNhbiBiZSBjaGFuZ2VkIGluIGV2ZW50LnJvd01vdmVkKCkgKHdoZW4gdXNlciB3YW50cyB0byBtYXJrIHNvdXJjZSByb3cpXHJcblxyXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IG10X3RyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBjb2xvciB0byB0aGUgZWFjaCB0YWJsZSBjZWxsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIG9iak9sZC5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBtdF90ci5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjbG9uZWQgbWluaSB0YWJsZVxyXG4gICAgICAgICAgZGVsZXRlIG9iak9sZC5yZWRpcHMuZW1wdHlSb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBlbXB0eVJvdyBwcm9wZXJ0eSBmcm9tIHNvdXJjZSByb3cgYmVjYXVzZSBlbXB0eVJvdyB3aWxsIGJlIHNldCBvbiBuZXh0IG1vdmUsIG90aGVyd2lzZSByb3cgd291bGQgYmUgb3ZlcndyaXR0ZW4gYW5kIHRoYXQncyBubyBnb29kXHJcblxyXG4gICAgICAgICAgaWYgKGNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyB3YXMgY2xvbmVkIGFuZCBkcm9wcGVkIHRvIHRoZSBzb3VyY2UgbG9jYXRpb24gdGhlbiBjYWxsIHJvd05vdENsb25lZCBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd05vdENsb25lZCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQucm93RHJvcHBlZFNvdXJjZSgpIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93RHJvcHBlZFNvdXJjZSh0ZC50YXJnZXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZHJvcHBlZCB0byB0aGUgbmV3IHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJvd0Ryb3Aocl9yb3cpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKCFjbG9uZWQgJiYgIXRocmVzaG9sZC5mbGFnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGlja2VkIGVsZW1lbnQgd2FzIG5vdCBtb3ZlZCAtIERJViBlbGVtZW50IGRpZG4ndCBjcm9zcyB0aHJlc2hvbGQgdmFsdWUsIGp1c3QgY2FsbCBldmVudC5ub3RNb3ZlZCBldmVudCBoYW5kbGVyXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RNb3ZlZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGNsb25lZCAmJiByb3dfc291cmNlID09PSByb3cgJiYgY2VsbF9zb3VyY2UgPT09IGNlbGwpICAgICAgICAgICAgLy8gZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3BwZWQgb24gdGhlIHN0YXJ0IHBvc2l0aW9uXHJcbiAgICAgIHtcclxuICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopO1xyXG4gICAgICAgIGNsb25lZElkW29iak9sZC5pZF0gLT0gMTtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RDbG9uZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChjbG9uZWQgJiYgUkVESVBTLmRyYWcuY2xvbmUuZHJvcCA9PT0gZmFsc2UgJiYgKFggPCB0YWJsZS5yZWRpcHMub2Zmc2V0WzNdIHx8IFggPiB0YWJsZS5yZWRpcHMub2Zmc2V0WzFdIHx8IFkgPCB0YWJsZS5yZWRpcHMub2Zmc2V0WzBdIHx8IFkgPiB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdKSkgICAgLy8gZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3BwZWQgb3V0c2lkZSBjdXJyZW50IHRhYmxlIGFuZCBjbG9uZS5kcm9wIGlzIHNldCB0byBmYWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTtcclxuICAgICAgICBjbG9uZWRJZFtvYmpPbGQuaWRdIC09IDE7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQubm90Q2xvbmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIGNhbGwgZXZlbnQuZHJvcHBlZEJlZm9yZSgpLCBhcHBlbmQgb2JqZWN0IHRvIHRoZSBjZWxsIGFuZCBjYWxsIGV2ZW50LmRyb3BwZWQoKVxyXG4gICAgICB7XHJcbiAgICAgICAgZHJvcCA9IFJFRElQUy5kcmFnLmV2ZW50LmRyb3BwZWRCZWZvcmUodGQudGFyZ2V0KTsgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5kcm9wcGVkQmVmb3JlIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICBlbGVtZW50RHJvcChkcm9wKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkcm9wIGVsZW1lbnQgdG8gdGhlIHRhYmxlIGNlbGwgKG9yIGRlbGV0ZSBjbG9uZWQgZWxlbWVudCBpZiBkcm9wPVwiZmFsc2VcIilcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWNhbGN1bGF0ZSB0YWJsZSBjZWxscyBhbmQgc2Nyb2xsZXJzIGJlY2F1c2UgY2VsbCBjb250ZW50IGNvdWxkIGNoYW5nZSByb3cgZGltZW5zaW9uc1xyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5maW5pc2goKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgbGFzdCBldmVudCBoYW5kbGVyXHJcbiAgICB9XHJcblxyXG4gICAgcm93X29sZCA9IGNlbGxfb2xkID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9sZCBwb3NpdGlvbnNcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRWxlbWVudCBkcm9wLiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZVVwIGFuZCBhcHBlbmRzIGVsZW1lbnQgdG8gdGhlIHRhcmdldCB0YWJsZSBjZWxsLlxyXG4gICAqIElmIGlucHV0IHBhcmFtZXRlciBcImRyb3BcIiBpcyBzZXQgdG8gXCJmYWxzZVwiICh0aGlzIGlzIGFjdHVhbGx5IHJldHVybiB2YWx1ZSBmcm9tIGV2ZW50LmRyb3BwZWRCZWZvcmUpIHRoZW4gRElWIGVsZW1lbnRzIHdpbGwgbm90IGJlIGRyb3BwZWQgKG9ubHkgY2xvbmVkIGVsZW1lbnQgd2lsbCBiZSBkZWxldGVkKS5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtkcm9wXSBJZiBub3QgXCJmYWxzZVwiIHRoZW4gRElWIGVsZW1lbnQgd2lsbCBiZSBkcm9wcGVkIHRvIHRoZSBjZWxsLlxyXG4gICAqL1xyXG4gIGVsZW1lbnREcm9wID0gZnVuY3Rpb24gKGRyb3ApIFxyXG4gIHtcclxuICAgIHZhciBjbG9uZVNvdXJjZURpdiA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lIHNvdXJjZSBlbGVtZW50IChuZWVkZWQgaWYgY2xvbmUuc2VuZEJhY2sgaXMgc2V0IHRvIHRydWUpXHJcbiAgICB2YXIgZGl2OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub2RlTGlzdCBvZiBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGwgKG5lZWRlZCBpZiBjbG9uZS5zZW5kQmFjayBpcyBzZXQgdG8gdHJ1ZSlcclxuICAgIFxyXG4gICAgaWYgKGRyb3AgIT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaW5wdXQgcGFyYW1ldGVyIGlzIG5vdCBcImZhbHNlXCIgdGhlbiBESVYgZWxlbWVudCB3aWxsIGJlIGRyb3BwZWQgdG8gdGhlIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgaWYgKGNsb25lLnNlbmRCYWNrID09PSB0cnVlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNsb25lLnNlbmRCYWNrIGlzIHNldCB0byB0cnVlIHRoZW4gdHJ5IHRvIGZpbmQgc291cmNlIGVsZW1lbnQgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAge1xyXG4gICAgICAgIGRpdiA9IHRkLnRhcmdldC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnRElWJyk7ICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGFsbCBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpdi5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCBhbGwgRElWIGVsZW1lbnRzIGluIHRhcmdldCBjZWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgLy8gaWYgRElWIGluIHRhcmdldCBjZWxsIGlzIHNvdXJjZSBvZiBkcm9wcGVkIERJViBlbGVtZW50IChkcm9wcGVkIERJViBpZCBhbmQgaWQgb2YgRElWIGluIHRhcmdldCBjZWxsIGhhcyB0aGUgc2FtZSBuYW1lIGJlZ2lubmluZyBsaWtlIFwiZDEyYzJcIiBhbmQgXCJkMTJcIilcclxuICAgICAgICAgIC8vIG9mIGNvdXJzZSwgdGhlIGNhc2Ugd2hlcmUgc291cmNlIERJViBlbGVtZW50IGlzIGRyb3BwZWQgdG8gdGhlIGNlbGwgd2l0aCBjbG9uZWQgRElWIGVsZW1lbnQgc2hvdWxkIGJlIGV4Y2x1ZGVkIChwb3NzaWJsZSBpbiBjbGltaXQxIHR5cGUpXHJcbiAgICAgICAgICBpZiAob2JqICE9PSBkaXZbaV0gJiYgb2JqLmlkLmluZGV4T2YoZGl2W2ldLmlkKSA9PT0gMCkgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGNsb25lU291cmNlRGl2ID0gZGl2W2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIGNsb25lU291cmNlRGl2IGVsZW1lbnRcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjbG9uZVNvdXJjZURpdikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2xvbmUgc291cmNlIERJViBlbGVtZW50IGV4aXN0cyBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNsb25lTGltaXQoY2xvbmVTb3VyY2VEaXYsIDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjbGltaXQgY2xhc3MgKGluY3JlbWVudCBieSAxKVxyXG4gICAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRyb3BwZWQgRElWIGVsZW1lbnRcclxuICAgICAgICAgIHJldHVybjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBmcm9tIHRoZSBtZXRob2QgKGV2ZXJ5dGhpbmcgaXMgZG9uZSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRkLnRhcmdldC5hcHBlbmRDaGlsZChvYmopO1xyXG4gICAgICBcclxuICAgICAgcmVnaXN0ZXJFdmVudHMob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgKEZJWCBmb3IgU2FmYXJpIE1vYmlsZSlcclxuICAgICAgUkVESVBTLmRyYWcuZXZlbnQuZHJvcHBlZCh0ZC50YXJnZXQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmRyb3BwZWQgYmVjYXVzZSBjbG9uZUxpbWl0IGNvdWxkIGNhbGwgZXZlbnQuY2xvbmVkRW5kMSBvciBldmVudC5jbG9uZWRFbmQyXHJcbiAgICAgIFxyXG4gICAgICBpZiAoY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9iamVjdCBpcyBjbG9uZWRcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmNsb25lZERyb3BwZWQodGQudGFyZ2V0KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgY2xvbmVkRHJvcHBlZCBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgY2xvbmVMaW1pdChvYmpPbGQsIC0xKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdDFfWCBvciBjbGltaXQyX1ggY2xhc3NuYW1lXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNsb25lZCAmJiBvYmoucGFyZW50Tm9kZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZWQgZWxlbWVudCBzaG91bGQgYmUgZGVsZXRlZCAoaWYgbm90IGFscmVhZHkgZGVsZXRlZClcclxuICAgIHtcclxuICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgZm9yIERJViBlbGVtZW50LlxyXG4gICAqIERJViBlbGVtZW50cyBzaG91bGQgaGF2ZSBvbmx5IG9ubW91c2Vkb3duICh1c2luZyB0cmFkaXRpb25hbCBldmVudCByZWdpc3RyYXRpb24gbW9kZWwpLlxyXG4gICAqIEkgaGFkIGEgcHJvYmxlbSB3aXRoIGFkdmFuY2VkIGV2ZW50IHJlZ2lzdHJhdGlvbiBtb2RlbC5cclxuICAgKiBJbiBjYXNlIG9mIHVzaW5nIGFkdmFuY2VkIG1vZGVsLCBzZWxlY3RlZCB0ZXh0IGFuZCBkcmFnZ2VkIERJViBlbGVtZW50IHdlcmUgaW4gY29sbGlzaW9uLlxyXG4gICAqIEl0IGxvb2tzIGxpa2Ugc2VsZWN0ZWQgdGV4dCB3YXMgYWJsZSB0byBkcmFnIGluc3RlYWQgb2YgRElWIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZGl2IFJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3Igb25tb3VzZWRvd24sIG9udG91Y2hzdGFydCBhbmQgb25kYmxjbGljayB0byB0aGUgRElWIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbZmxhZ10gSWYgc2V0IHRvIGZhbHNlIHRoZW4gZXZlbnQgbGlzdGVuZXJzIHdpbGwgYmUgZGVsZXRlZC5cclxuICAgKi9cclxuICByZWdpc3RlckV2ZW50cyA9IGZ1bmN0aW9uIChkaXYsIGZsYWcpXHJcbiAge1xyXG4gICAgaWYgKGZsYWcgPT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBmbGFnIGlzIHNlIHRvIGZhbHNlLCB0aGVuIHJlbW92ZSBldmVudCBsaXN0ZW5lcnMgb24gRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgZGl2Lm9ubW91c2Vkb3duID0gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgZGl2Lm9ubW91c2Vkb3duID0gaGFuZGxlck9uTW91c2VEb3duO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICByZXNldFN0eWxlcyA9IGZ1bmN0aW9uIChlbCkgICAgICAgICAvLyBBZnRlciBlbGVtZW50IGlzIGRyb3BwZWQsIHN0eWxlcyBuZWVkIHRvIGJlIHJlc2V0LlxyXG4gIHtcclxuICAgIGVsLnN0eWxlLnRvcCAgPSAnJztcclxuICAgIGVsLnN0eWxlLmxlZnQgPSAnJztcclxuICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJyc7XHJcbiAgICBlbC5zdHlsZS56SW5kZXggPSAnJztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlTW92ZSBpcyBhdHRhY2hlZCB0byBkb2N1bWVudCBsZXZlbCBpbiBhIG1vbWVudCB3aGVuIERJViBlbGVtZW50IGlzIGNsaWNrZWQgKHRoaXMgaGFwcGVucyBpbiBoYW5kbGVyT25Nb3VzZURvd24pLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlVXAgZGV0YWNoZXMgb25tb3VzZW1vdmUgYW5kIG9ubW91c2V1cCBldmVudCBoYW5kbGVycy5cclxuICAgKiBAcGFyYW0ge0V2ZW50fSBlIEV2ZW50IGluZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIGhhbmRsZXJPbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgICAgICAgICAvLyBkZWZpbmUgZXZlbnQgKEZGICYgSUUpXHJcbiAgICB2YXIgYm91bmQgPSBSRURJUFMuZHJhZy5zY3JvbGwuYm91bmQ7ICAgLy8gcmVhZCBcImJvdW5kXCIgcHVibGljIHByb3BlcnR5IChtYXliZSBjb2RlIHdpbGwgYmUgZmFzdGVyLCBhbmQgaXQgd2lsbCBiZSBlYXNpZXIgdG8gcmVmZXJlbmNlIGluIG9ubW91c2Vtb3ZlIGhhbmRsZXIpXHJcbiAgICB2YXIgc2NhOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICB2YXIgZGVsdGFYLCBkZWx0YVk7ICAgICAgICAgICAgICAgICAgICAgLy8gZGVsdGEgZnJvbSBpbml0aWFsIHBvc2l0aW9uXHJcbiAgICB2YXIgaTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciBsb2NhbCBsb29wXHJcbiAgICB2YXIgc2Nyb2xsUG9zaXRpb247ICAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHBvc2l0aW9uIHZhcmlhYmxlIG5lZWRlZCBmb3IgYXV0b3Njcm9sbCBjYWxsXHJcblxyXG4gICAgWCA9IHBvaW50ZXIueCA9IGV2dC5jbGllbnRYO1xyXG4gICAgWSA9IHBvaW50ZXIueSA9IGV2dC5jbGllbnRZO1xyXG5cclxuICAgIGRlbHRhWCA9IE1hdGguYWJzKHRocmVzaG9sZC54IC0gWCk7ICAgICAgICAgLy8gY2FsY3VsYXRlIGRlbHRhIGZyb20gaW5pdGlhbCBwb3NpdGlvblxyXG4gICAgZGVsdGFZID0gTWF0aC5hYnModGhyZXNob2xkLnkgLSBZKTtcclxuXHJcbiAgICBpZiAoIW1vdmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIFwibW92ZWRcIiBmbGFnIGlzbid0IHNldCAodGhpcyBpcyB0aGUgZmlyc3QgbW9tZW50IHdoZW4gb2JqZWN0IGlzIG1vdmVkKVxyXG4gICAge1xyXG4gICAgICAvL3JlbWVtYmVyIHJlZmVyZW5jZSBvZiB0aGUgc291cmNlIHJvdywgY2xvbmUgc291cmNlIHJvdyBhbmQgc2V0IG9iaiBhcyByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgcm93IHNldHRpbmdzIG9mIFwiY2xvbmVkXCIgZmxhZyBzaG91bGQgZ28gYmVmb3JlIGNhbGxpbmcgcm93Q2xvbmUoKSBiZWNhdXNlIFwiY2xvbmVkXCIgaXMgbmVlZGVkIGluIHJvd0Nsb25lKCkgdG8gY3V0IG91dCBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIG5hbWUgZnJvbSA8ZGl2IGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvdyByZWRpcHMtY2xvbmVcIj4gZWxlbWVudHNcclxuICAgICAgaWYgKGNsb25lQ2xhc3MgfHwgKFJFRElQUy5kcmFnLmNsb25lLmtleVJvdyA9PT0gdHJ1ZSAmJiBzaGlmdEtleSkpXHJcbiAgICAgIHtcclxuICAgICAgICBjbG9uZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBSRURJUFMuZHJhZy5vYmpPbGQgPSBvYmpPbGQgPSBvYmo7ICAgICAgICAvLyByZW1lbWJlciByZWZlcmVuY2UgdG8gdGhlIHNvdXJjZSByb3dcclxuICAgICAgUkVESVBTLmRyYWcub2JqID0gb2JqID0gcm93Q2xvbmUob2JqKTsgICAgLy8gY2xvbmUgc291cmNlIHJvdyBhbmQgc2V0IGFzIG9ialxyXG4gICAgICBvYmouc3R5bGUuekluZGV4ID0gOTk5OyAgICAgICAgICAgICAgICAgICAvLyBzZXQgaGlnaCB6LWluZGV4IGZvciBjbG9uZWQgbWluaSB0YWJsZVxyXG5cclxuICAgICAgb2JqLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsgICAgICAgICAgICAgLy8gc2V0IHN0eWxlIHRvIGZpeGVkIHRvIGFsbG93IGRyYWdnaW5nIERJViBvYmplY3RcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgY2FsY3VsYXRlIGNlbGxzIGZvciBjYXNlIHdoZXJlIG1vdmVkIGVsZW1lbnQgY2hhbmdlZCBjZWxsIGRpbWVuc2lvbiwgcGxhY2UgMyBlbGVtZW50cyBpbiB0aGUgc2FtZSBjZWxsIGluIGV4YW1wbGUwOCBhbmQgdHJ5IHRvIG1vdmUgb25lIG91dCBvZiB0aGUgdGFibGUgY2VsbFxyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjb2x1bW5cclxuXHJcbiAgICAgIGlmIChjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQgaGFuZGxlciAocm93IGNsb25lZC9tb3ZlZClcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0Nsb25lZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd01vdmVkKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNldFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29sb3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlIGNlbGwgYW5kIHJlbWVtYmVyIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBjb2xvciwgc2V0UG9zaXRpb24oKSBtdXN0IGdvIGFmdGVyIGNhbGxpbmcgZXZlbnQubW92ZWQoKSBhbmQgZXZlbnQucm93TW92ZWQoKSBpZiB1c2VyIHdhbnRzIHRvIGNoYW5nZSBjb2xvciBvZiBzb3VyY2Ugcm93XHJcblxyXG4gICAgICBpZiAoWCA+IHNjcmVlbi53aWR0aCAtIG9iak1hcmdpblsxXSkgICAgLy8gaWYgZWxlbWVudCBpcyBmYXIgYXdheSBvbiB0aGUgcmlnaHQgc2lkZSBvZiBwYWdlLCBzZXQgcG9zc2libGUgcmlnaHQgcG9zaXRpb24gKHNjcmVlbi53aWR0aCAtIG9iamVjdCB3aWR0aCksIG9iak1hcmdpblsxXSArIG9iak1hcmdpblszXSA9IG9iamVjdCB3aWR0aFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnN0eWxlLmxlZnQgPSAoc2NyZWVuLndpZHRoIC0gKG9iak1hcmdpblsxXSArICBvYmpNYXJnaW5bM10pKSArICdweCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChZID4gc2NyZWVuLmhlaWdodCAtIG9iak1hcmdpblsyXSkgICAvLyBpZiBlbGVtZW50IGlzIGJlbG93IHBhZ2UgYm90dG9tLCBzZXQgcG9zc2libGUgbG93ZXIgcG9zaXRpb24gKHNjcmVlbi53aWR0aCAtIG9iamVjdCBoZWlnaHQpLCBvYmpNYXJnaW5bMF0gKyBvYmpNYXJnaW5bMl0gPSBvYmplY3QgaGVpZ2h0XHJcbiAgICAgIHtcclxuICAgICAgICBvYmouc3R5bGUudG9wICA9IChzY3JlZW4uaGVpZ2h0IC0gKG9iak1hcmdpblswXSArIG9iak1hcmdpblsyXSkpICsgJ3B4JztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vdmVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBtb3ZlZF9mbGFnXHJcblxyXG4gICAgLy8gc2V0IGxlZnQgYW5kIHRvcCBzdHlsZXMgZm9yIHRoZSBtb3ZlZCBlbGVtZW50IGlmIGVsZW1lbnQgaXMgaW5zaWRlIHdpbmRvdywgdGhpcyBjb25kaXRpb25zIHdpbGwgc3RvcCBlbGVtZW50IG9uIHdpbmRvdyBib3VuZHNcclxuICAgIGlmIChYID4gb2JqTWFyZ2luWzNdICYmIFggPCBzY3JlZW4ud2lkdGggLSBvYmpNYXJnaW5bMV0pXHJcbiAgICB7XHJcbiAgICAgIG9iai5zdHlsZS5sZWZ0ID0gKFggLSBvYmpNYXJnaW5bM10pICsgJ3B4JztcclxuICAgIH1cclxuICAgIGlmIChZID4gb2JqTWFyZ2luWzBdICYmIFkgPCBzY3JlZW4uaGVpZ2h0IC0gb2JqTWFyZ2luWzJdKVxyXG4gICAge1xyXG4gICAgICBvYmouc3R5bGUudG9wICA9IChZIC0gb2JqTWFyZ2luWzBdKSArICdweCc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCAodGhpcyBjb25kaXRpb24gc2hvdWxkIHNwYXJlIENQVSk6IDEpIGlmIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIERJViBpZD1cInJlZGlwcy1kcmFnXCIgMikgYW5kIGF1dG9zY3JvbGwgaXMgbm90IHdvcmtpbmcgMykgYW5kIGN1cnJlbnQgdGFibGUgY29udGFpbnMgbmVzdGVkIHRhYmxlIG9yIGN1cnNvciBpcyBvdXRzaWRlIG9mIGN1cnJlbnQgY2VsbFxyXG4gICAgaWYgKFggPCBkaXZCb3hbMV0gJiYgWCA+IGRpdkJveFszXSAmJiBZIDwgZGl2Qm94WzJdICYmIFkgPiBkaXZCb3hbMF0gJiZcclxuICAgICAgZWRnZS5mbGFnLnggPT09IDAgJiYgZWRnZS5mbGFnLnkgPT09IDAgJiZcclxuICAgICAgKGN1cnJlbnRDZWxsLmNvbnRhaW5UYWJsZSB8fCAoWCA8IGN1cnJlbnRDZWxsWzNdIHx8IFggPiBjdXJyZW50Q2VsbFsxXSB8fCBZIDwgY3VycmVudENlbGxbMF0gfHwgWSA+IGN1cnJlbnRDZWxsWzJdKSkpXHJcbiAgICB7XHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSByb3cgYW5kIHRhYmxlIGNlbGxcclxuICAgICAgY2VsbENoYW5nZWQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG5ldyBsb2NhdGlvbiBpcyBpbnNpZGUgdGFibGUgYW5kIG5ldyBsb2NhdGlvbiBpcyBkaWZmZXJlbnQgdGhlbiBvbGQgbG9jYXRpb25cclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBhdXRvU2Nyb2xsIG9wdGlvbiBpcyBlbmFibGVkIChieSBkZWZhdWx0IGl0IGlzIGJ1dCBpdCBjYW4gYmUgdHVybmVkIG9mZilcclxuICAgIGlmIChSRURJUFMuZHJhZy5zY3JvbGwuZW5hYmxlKVxyXG4gICAge1xyXG4gICAgICBlZGdlLnBhZ2UueCA9IGJvdW5kIC0gKHNjcmVlbi53aWR0aCAvIDIgID4gWCA/IFggLSBvYmpNYXJnaW5bM10gOiBzY3JlZW4ud2lkdGggLSBYIC0gb2JqTWFyZ2luWzFdKTsgICAgICAgLy8gY2FsY3VsYXRlIGhvcml6b250YWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuXHJcbiAgICAgIGlmIChlZGdlLnBhZ2UueCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZWRnZS5wYWdlLnggPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2hlbiBvYmplY3QgaXMgb25seSBoYWxmIHZpc2libGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLnBhZ2UueCA9IGJvdW5kO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZ2V0IGhvcml6b250YWwgd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICAgIC8vc2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSAwOyAgIC8vZGlzYWJsaW5nIGJlY2F1c2Ugd2Ugc2hvdWxkbid0IGhhdmUgdGhlIHVzZXIgc2Nyb2xsaW5nIGhvcml6b250YWxseSBhbmQgdGhpcyBpbXByb3ZlcyBwZXJmb3JtYW5jZSBmb3IgbGFyZ2UgdHJlZXNcclxuXHJcbiAgICAgICAgZWRnZS5wYWdlLnggKj0gWCA8IHNjcmVlbi53aWR0aCAvIDIgPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvblxyXG5cclxuICAgICAgICAvLyBpZiBwYWdlIGJvdW5kIGlzIGNyb3NzZWQgYW5kIHRoaXMgdHdvIGNhc2VzIGFyZW4ndCBtZXQ6IDEpIHNjcm9sbGJhciBpcyBvbiB0aGUgbGVmdCBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgbGVmdCAyKSBzY3JvbGxiYXIgaXMgb24gdGhlIHJpZ2h0IGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCByaWdodFxyXG4gICAgICAgIGlmICghKChlZGdlLnBhZ2UueCA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPD0gMCkgfHwgKGVkZ2UucGFnZS54ID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA+PSAoc2Nyb2xsRGF0YS53aWR0aCAtIHNjcmVlbi53aWR0aCkpKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoZWRnZS5mbGFnLngrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlIGF1dG9zY3JvbGwgZnVuY3Rpb24gKHRoaXMgc2hvdWxkIGhhcHBlbiBvbmx5IG9uY2UpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAvLyByZXNldCBvbnNjcm9sbCBldmVudFxyXG4gICAgICAgICAgICBhdXRvU2Nyb2xsWCh3aW5kb3cpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB3aW5kb3cgYXV0b3Njcm9sbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBlZGdlLnBhZ2UueCA9IDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVkZ2UucGFnZS55ID0gYm91bmQgLSAoc2NyZWVuLmhlaWdodCAvIDIgPiBZID8gWSAtIG9iak1hcmdpblswXSA6IHNjcmVlbi5oZWlnaHQgLSBZIC0gb2JqTWFyZ2luWzJdKTsgICAgICAvLyBjYWxjdWxhdGUgdmVydGljYWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuICAgICAgXHJcbiAgICAgIGlmIChlZGdlLnBhZ2UueSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGVkZ2UucGFnZS55ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgbWF4IGNyb3NzZWQgYm91bmRcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLnBhZ2UueSA9IGJvdW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCB2ZXJ0aWNhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgICAgZWRnZS5wYWdlLnkgKj0gWSA8IHNjcmVlbi5oZWlnaHQgLyAyID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvblxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghKChlZGdlLnBhZ2UueSA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPD0gMCkgfHwgKGVkZ2UucGFnZS55ID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA+PSAoc2Nyb2xsRGF0YS5oZWlnaHQgLSBzY3JlZW4uaGVpZ2h0KSkpKSAgICAvLyBpZiBwYWdlIGJvdW5kIGlzIGNyb3NzZWQgYW5kIHRoaXMgdHdvIGNhc2VzIGFyZW4ndCBtZXQ6IDEpIHNjcm9sbGJhciBpcyBvbiB0aGUgcGFnZSB0b3AgYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIHVwIDIpIHNjcm9sbGJhciBpcyBvbiB0aGUgcGFnZSBib3R0b20gYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIGRvd25cclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoZWRnZS5mbGFnLnkrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlIGF1dG9zY3JvbGwgKHRoaXMgc2hvdWxkIGhhcHBlbiBvbmx5IG9uY2UpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvbnNjcm9sbCBldmVudFxyXG4gICAgICAgICAgICBhdXRvU2Nyb2xsWSh3aW5kb3cpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB3aW5kb3cgYXV0b3Njcm9sbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgZWRnZS5wYWdlLnkgPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgc2Nyb2xsRGF0YS5jb250YWluZXIubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVzdCBpZiBkcmFnZ2VkIG9iamVjdCBpcyBpbiBzY3JvbGxhYmxlIGNvbnRhaW5lciwgdGhpcyBjb2RlIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBpZiBzY3JvbGxhYmxlIGNvbnRhaW5lciAoRElWIHdpdGggb3ZlcmZsb3cgb3RoZXIgdGhhbiAndmlzaWJsZSkgZXhpc3RzIG9uIHBhZ2VcclxuICAgICAge1xyXG4gICAgICAgIHNjYSA9IHNjcm9sbERhdGEuY29udGFpbmVyW2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzY2EuYXV0b3Njcm9sbCAmJiBYIDwgc2NhLm9mZnNldFsxXSAmJiBYID4gc2NhLm9mZnNldFszXSAmJiBZIDwgc2NhLm9mZnNldFsyXSAmJiBZID4gc2NhLm9mZnNldFswXSkgLy8gaWYgZHJhZ2dlZCBvYmplY3QgaXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyIGFuZCBzY3JvbGxhYmxlIGNvbnRhaW5lciBoYXMgZW5hYmxlZCBhdXRvc2Nyb2xsIG9wdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UuZGl2LnggPSBib3VuZCAtIChzY2EubWlkc3RYICA+IFggPyBYIC0gb2JqTWFyZ2luWzNdIC0gc2NhLm9mZnNldFszXSA6IHNjYS5vZmZzZXRbMV0gLSBYIC0gb2JqTWFyZ2luWzFdKTsgICAvLyBjYWxjdWxhdGUgaG9yaXpvbnRhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZWRnZS5kaXYueCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlLmRpdi54ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdoZW4gb2JqZWN0IGlzIG9ubHkgaGFsZiB2aXNpYmxlIChwYWdlIGlzIHNjcm9sbGVkIG9uIHRoYXQgb2JqZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZWRnZS5kaXYueCA9IGJvdW5kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlZGdlLmRpdi54ICo9IFggPCBzY2EubWlkc3RYID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb246IG5lZ2F0aXZlIC0gbGVmdCwgcG9zaXRpdmUgLSByaWdodFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZmxhZy54KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvbnNjcm9sbCBldmVudCBoYW5kbGVyIGFuZCBjYWxsIGF1dG9TY3JvbGxZIGZ1bmN0aW9uIG9ubHkgb25jZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZShzY2EuZGl2LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAgICAgICAgIGF1dG9TY3JvbGxYKHNjYS5kaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlZGdlLmRpdi54ID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgZWRnZS5kaXYueSA9IGJvdW5kIC0gKHNjYS5taWRzdFkgID4gWSA/IFkgLSBvYmpNYXJnaW5bMF0gLSBzY2Eub2Zmc2V0WzBdIDogc2NhLm9mZnNldFsyXSAtIFkgLSBvYmpNYXJnaW5bMl0pOyAgIC8vIGNhbGN1bGF0ZSB2ZXJ0aWNhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZWRnZS5kaXYueSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlLmRpdi55ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdoZW4gb2JqZWN0IGlzIG9ubHkgaGFsZiB2aXNpYmxlIChwYWdlIGlzIHNjcm9sbGVkIG9uIHRoYXQgb2JqZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZWRnZS5kaXYueSA9IGJvdW5kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlZGdlLmRpdi55ICo9IFkgPCBzY2EubWlkc3RZID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb246IG5lZ2F0aXZlIC0gdXAsIHBvc2l0aXZlIC0gZG93blxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZmxhZy55KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvbnNjcm9sbCBldmVudCBoYW5kbGVyIGFuZCBjYWxsIGF1dG9TY3JvbGxZIGZ1bmN0aW9uIG9ubHkgb25jZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZShzY2EuZGl2LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAgICAgICAgIGF1dG9TY3JvbGxZKHNjYS5kaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlZGdlLmRpdi55ID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJyZWFrIHRoZSBsb29wIChjaGVja2luZyBmb3Igb3RoZXIgc2Nyb2xsYWJsZSBjb250YWluZXJzIGlzIG5vdCBuZWVkZWQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSAoSSBtZWFuIGRyYWdnZWQgb2JqZWN0IGlzbid0IGluc2lkZSBhbnkgb2Ygc2Nyb2xsYWJsZSBjb250YWluZXIpIHJlc2V0IGNyb3NzZWQgZWRnZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UuZGl2LnggPSBlZGdlLmRpdi55ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gc3RvcCBhbGwgcHJvcGFnYXRpb24gb2YgdGhlIGV2ZW50IGluIHRoZSBidWJibGluZyBwaGFzZS4gIChzYXZlIHN5c3RlbSByZXNvdXJjZXMgYnkgdHVybmluZyBvZmYgZXZlbnQgYnViYmxpbmcgLyBwcm9wYWdhdGlvbilcclxuICAgIGV2dC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgaWYgKGV2dC5zdG9wUHJvcGFnYXRpb24pIFxyXG4gICAge1xyXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gVGhpcyBtZXRob2QgaXMgY2FsbGVkIChmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSwgYXV0b1Njcm9sbFgsIGF1dG9TY3JvbGxZKSBpbiBjYXNlIG9mIGNoYW5nZSBvZiBjdXJyZW50IHRhYmxlIGNlbGwuXHJcbiAgLy8gV2hlbiBjaGFuZ2UgaGFwcGVucywgdGhlbiByZXR1cm4gYmFja2dyb3VuZCBjb2xvciB0byBvbGQgcG9zaXRpb24sIGhpZ2hsaWdodCBuZXcgcG9zaXRpb24sIGNhbGN1bGF0ZSBjZWxsIGJvdW5kYXJpZXMgYW5kIGNhbGwgZXZlbnQuY2hhbmdlZC5cclxuICBjZWxsQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIGlmICgocm93ICE9PSByb3dfb2xkIHx8IGNlbGwgIT09IGNlbGxfb2xkKSkgXHJcbiAgICB7XHJcbiAgICAgIGlmIChyb3dfb2xkICE9PSBudWxsICYmIGNlbGxfb2xkICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjZWxsIGJhY2tncm91bmQgY29sb3IgdG8gdGhlIHByZXZpb3VzIGNlbGxcclxuICAgICAge1xyXG4gICAgICAgIHNldFRkU3R5bGUocm93X29sZCwgYmdTdHlsZU9sZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciBmb3IgcHJldmlvdXMgdGFibGUgcm93XHJcbiAgICAgICAgUkVESVBTLmRyYWcudGQucHJldmlvdXMgPSB0ZC5wcmV2aW91cyA9IHRhYmxlLnJvd3Nbcm93X29sZF0uY2VsbHNbY2VsbF9vbGRdOyAgICAgIC8vIGRlZmluZSBwcmV2aW91cyB0YWJsZSBjZWxsXHJcbiAgICAgICAgUkVESVBTLmRyYWcudGQuY3VycmVudCA9IHRkLmN1cnJlbnQgPSB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF07ICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjdXJyZW50IHRhYmxlIGNlbGxcclxuXHJcbiAgICAgICAgaWYgKHJvdyAhPT0gcm93X29sZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciB0YWJsZSBvciByb3cgc2hvdWxkIGNoYW5nZSAoY2hhbmdpbmcgY2VsbCBpbiB0aGUgc2FtZSByb3cgd2lsbCBiZSBpZ25vcmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0NoYW5nZWQodGQuY3VycmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRQb3NpdGlvbigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIEluIGluaXRpYWxpemF0aW9uIHBoYXNlLCB0aGlzIG1ldGhvZCBpcyBhdHRhY2hlZCBhcyBvbnJlc2l6ZSBldmVudCBoYW5kbGVyIGZvciB3aW5kb3cuICBJdCBhbHNvIGNhbGN1bGF0ZXMgd2luZG93IHdpZHRoIGFuZCB3aW5kb3cgaGVpZ2h0LiBSZXN1bHQgaXMgc2F2ZWQgaW4gdmFyaWFibGVzIHNjcmVlbi53aWR0aCBhbmQgc2NyZWVuLmhlaWdodCB2aXNpYmxlIGluc2lkZSBSRURJUFMuZHJhZyBwcml2YXRlIHNjb3BlLlxyXG4gIGhhbmRsZXJPblJlc2l6ZSA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHNjcmVlbi53aWR0aCAgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIHNjcmVlbi5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICBcclxuICAgIHNjcm9sbERhdGEud2lkdGggID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoOyAgICAgLy8gc2V0IHNjcm9sbCBzaXplIChvbnJlc2l6ZSwgb25sb2FkIGFuZCBvbm1vdXNldXAgZXZlbnQpXHJcbiAgICBzY3JvbGxEYXRhLmhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcbiAgICBcclxuICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGNvbHVtcyBhbmQgcm93cyBvZmZzZXQgKGNlbGxzIGRpbWVuc2lvbnMpXHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIHNldHMgY3VycmVudCByb3cgYW5kIGNlbGwuICBDdXJyZW50IGNlbGwgcG9zaXRpb24gaXMgYmFzZWQgb24gcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlciBhbmQgY2FsY3VsYXRlZCBncmlkIG9mIHRhYmxlcyBpbnNpZGUgZHJhZyBjb250YWluZXIuXHJcbiAgLy8gUm93cyB3aXRoIGRpc3BsYXk9J25vbmUnIGFyZSBub3QgY29udGFpbmVkIGluIHJvd19vZmZzZXQgYXJyYXkgc28gcm93IGJvdW5kcyBjYWxjdWxhdGlvbiBzaG91bGQgdGFrZSBjYXJlIGFib3V0IHNwYXJzZSBhcnJheXMgKHNpbmNlIHZlcnNpb24gNC4zLjYpLlxyXG4gIHNldFRhYmxlUm93Q29sdW1uID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICB2YXIgcHJldmlvdXM7ICAgICAgIC8vIHNldCBwcmV2aW91cyBwb3NpdGlvbiAoY3VycmVudCBjZWxsIHdpbGwgbm90IGJlIGhpZ2hsaWdodGVkKVxyXG4gICAgdmFyIHJvd19vZmZzZXQ7ICAgICAvLyByb3cgb2Zmc2V0cyBmb3IgdGhlIHNlbGVjdGVkIHRhYmxlIChyb3cgYm94IGJvdW5kcylcclxuICAgIHZhciByb3dfZm91bmQ7ICAgICAgLy8gcmVtZW1iZXIgZm91bmQgcm93XHJcbiAgICB2YXIgdG9zID0gW107ICAgICAgIC8vIHRhYmxlIG9mZnNldFxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBpOyAgICAgICAgICAgICAgLy8gdXNlZCBpbiBsb2NhbCBsb29wXHJcblxyXG4gICAgcHJldmlvdXMgPSBmdW5jdGlvbiAoKSAgICAvLyBzZXQgcHJldmlvdXMgcG9zaXRpb24gKGN1cnJlbnQgY2VsbCB3aWxsIG5vdCBiZSBoaWdobGlnaHRlZClcclxuICAgIHtcclxuICAgICAgaWYgKHJvd19vbGQgIT09IG51bGwgJiYgY2VsbF9vbGQgIT09IG51bGwpXHJcbiAgICAgIHtcclxuICAgICAgICByb3cgPSByb3dfb2xkO1xyXG4gICAgICAgIGNlbGwgPSBjZWxsX29sZDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBYID0gcG9pbnRlci54OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgWSA9IHBvaW50ZXIueTtcclxuXHJcbiAgICB0b3NbMF0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzBdOyAvLyB0b3BcclxuICAgIHRvc1sxXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMV07IC8vIHJpZ2h0XHJcbiAgICB0b3NbMl0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdOyAvLyBib3R0b21cclxuICAgIHRvc1szXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbM107IC8vIGxlZnRcclxuXHJcbiAgICAvLyBpZiB0YWJsZSBiZWxvbmdzIHRvIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lciB0aGVuIHNldCBzY3JvbGxhYmxlIGNvbnRhaW5lciBvZmZzZXQgaWYgbmVlZGVkIGluIGNhc2Ugd2hlbiBzb21lIHBhcnRzIG9mIHRhYmxlIGFyZSBoaWRkZW4gKGZvciBleGFtcGxlIHdpdGggXCJvdmVyZmxvdzogYXV0b1wiKVxyXG4gICAgaWYgKHRhYmxlLnNjYSAhPT0gdW5kZWZpbmVkKVxyXG4gICAge1xyXG4gICAgICB0b3NbMF0gPSB0b3NbMF0gPiB0YWJsZS5zY2Eub2Zmc2V0WzBdID8gdG9zWzBdIDogdGFibGUuc2NhLm9mZnNldFswXTsgLy8gdG9wXHJcbiAgICAgIHRvc1sxXSA9IHRvc1sxXSA8IHRhYmxlLnNjYS5vZmZzZXRbMV0gPyB0b3NbMV0gOiB0YWJsZS5zY2Eub2Zmc2V0WzFdOyAvLyByaWdodFxyXG4gICAgICB0b3NbMl0gPSB0b3NbMl0gPCB0YWJsZS5zY2Eub2Zmc2V0WzJdID8gdG9zWzJdIDogdGFibGUuc2NhLm9mZnNldFsyXTsgLy8gYm90dG9tXHJcbiAgICAgIHRvc1szXSA9IHRvc1szXSA+IHRhYmxlLnNjYS5vZmZzZXRbM10gPyB0b3NbM10gOiB0YWJsZS5zY2Eub2Zmc2V0WzNdOyAvLyBsZWZ0XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRvc1szXSA8IFggJiYgWCA8IHRvc1sxXSAmJiB0b3NbMF0gPCBZICYmIFkgPCB0b3NbMl0pICAgICAgICAgICAgICAgICAvLyBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSB0YWJsZSAob3Igc2Nyb2xsYWJsZSBjb250YWluZXIpXHJcbiAgICB7XHJcbiAgICAgIHJvd19vZmZzZXQgPSB0YWJsZS5yZWRpcHMucm93X29mZnNldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSByb3cgb2Zmc2V0cyBmb3IgdGhlIHNlbGVjdGVkIHRhYmxlIChyb3cgYm94IGJvdW5kcylcclxuXHJcbiAgICAgIGZvciAocm93ID0gMDsgcm93IDwgcm93X29mZnNldC5sZW5ndGggLSAxOyByb3crKykgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGN1cnJlbnQgcm93IChsb29wIHNraXBzIGhpZGRlbiByb3dzKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHJvd19vZmZzZXRbcm93XSA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBkb2Vzbid0IGV4aXN0IChpbiBjYXNlIG9mIGhpZGRlbiByb3cpIC0gc2tpcCBpdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0b3AgYW5kIGJvdHRvbSBjZWxsIGJvdW5kc1xyXG5cclxuICAgICAgICBpZiAocm93X29mZnNldFtyb3cgKyAxXSAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJvdHRvbSBjZWxsIGJvdW5kIChpZiBpcyBwb3NzaWJsZSkgLSBoaWRkZW4gcm93IGRvZXNuJ3QgZXhpc3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IHJvd19vZmZzZXRbcm93ICsgMV1bMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoaWRkZW4gcm93IChsaWtlIHN0eWxlLmRpc3BsYXkgPT09ICdub25lJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmb3IgKGkgPSByb3cgKyAyOyBpIDwgcm93X29mZnNldC5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgbmV4dCB2aXNpYmxlIHJvd1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocm93X29mZnNldFtpXSAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2aXNpYmxlIHJvdyBmb3VuZFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY3VycmVudENlbGxbMl0gPSByb3dfb2Zmc2V0W2ldWzBdO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoWSA8PSBjdXJyZW50Q2VsbFsyXSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9wIGJvdW5kIG9mIHRoZSBuZXh0IHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcm93X2ZvdW5kID0gcm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgZm91bmQgcm93XHJcblxyXG4gICAgICBpZiAocm93ID09PSByb3dfb2Zmc2V0Lmxlbmd0aCAtIDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBsb29wIGV4Y2VlZHMsIHRoZW4gc2V0IGJvdW5kcyBmb3IgdGhlIGxhc3Qgcm93IChvZmZzZXQgZm9yIHRoZSBsYXN0IHJvdyBkb2Vzbid0IHdvcmsgaW4gSUU4LCBzbyB1c2UgdGFibGUgYm91bmRzKVxyXG4gICAgICB7XHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07XHJcbiAgICAgICAgY3VycmVudENlbGxbMl0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjZWxsID0gMDtcclxuXHJcbiAgICAgIGlmIChyb3cgPCAwIHx8IGNlbGwgPCAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjZWxsIDwgMCBvciByb3cgPCAwIHRoZW4gdXNlIGxhc3QgcG9zc2libGUgbG9jYXRpb25cclxuICAgICAge1xyXG4gICAgICAgIHByZXZpb3VzKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAocm93ICE9PSByb3dfZm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgY2VsbCBmb3VuZCBidXQgaWYgY3VycmVudCByb3cgZGlmZmVyIGZyb20gcHJldmlvdXNseSBmb3VuZCByb3cgKHRoYW5rcyB0b28gd2hpbGUgbG9vcCB3aXRoIHJvdy0tKSB0aGVuIHRlc3QgaWYgWSBpcyBpbnNpZGUgY3VycmVudCBjZWxsLCAodGhpcyBzaG91bGQgcHJldmVudCBjYXNlIHdoZXJlIFREIGJvcmRlciA+IDFweCBhbmQgdXBwZXIgY29sc3BhbmVkIHJvdyBsaWtlIGluIGV4YW1wbGUxNSkgbG9naWMgd2lsbCBlbmQgaW4gdXBwZXIgY29sc3BhbmVkIHJvdyB3aGlsZSBjdXJyZW50IHJvdyB3aWxsIG5vdCBtb3ZlIC0gYW5kIHRoYXQgd2FzIHdyb25nXHJcbiAgICAgIHtcclxuXHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWNhbGN1bGF0ZSB0b3AgYW5kIGJvdHRvbSByb3cgb2Zmc2V0IChhZ2FpbilcclxuICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IGN1cnJlbnRDZWxsWzBdICsgdGFibGUucm93c1tyb3ddLmNlbGxzW2NlbGxdLm9mZnNldEhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKFkgPCBjdXJyZW50Q2VsbFswXSB8fCBZID4gY3VycmVudENlbGxbMl0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBZIGlzIG91dHNpZGUgb2YgdGhlIGN1cnJlbnQgcm93LCByZXR1cm4gcHJldmlvdXMgbG9jYXRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcmV2aW91cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCBzZXRzIGJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlIGNlbGwgYW5kIHJlbWVtYmVycyBwcmV2aW91cyBwb3NpdGlvbiBhbmQgYmFja2dyb3VuZCBjb2xvci4gIEl0IGlzIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSBhbmQgY2VsbENoYW5nZWQuXHJcbiAgc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKVxyXG4gIHtcclxuICAgIGlmIChyb3cgIT09IG51bGwgJiYgY2VsbCAhPT0gbnVsbCkgICAgICAvLyBpbiBjYXNlIGlmIG9yZGluYXJ5IGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSAnZGVueScgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBiZ1N0eWxlT2xkID0gZ2V0VGRTdHlsZShyb3cpOyAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3IgYmVmb3JlIHNldHRpbmcgdGhlIG5ldyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgIHNldFRkU3R5bGUocm93KTsgICAgICAgICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0IGN1cnJlbnQgVEQgLyBUUiAoY29sb3JzIGFuZCBzdHlsZXMgYXJlIHJlYWQgZnJvbSBwdWJsaWMgcHJvcGVydHkgXCJob3ZlclwiXHJcbiAgICAgIHJvd19vbGQgPSByb3c7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgY3VycmVudCBwb3NpdGlvbiAoZm9yIHJvdyBhbmQgY2VsbClcclxuICAgICAgY2VsbF9vbGQgPSBjZWxsO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBzZXRzIHRhYmxlIGNlbGwocykgYmFja2dyb3VuZCBzdHlsZXMgKGJhY2tncm91bmQgY29sb3JzIGFuZCBib3JkZXIgc3R5bGVzKS5cclxuICAgKiBJZiB0ZFN0eWxlIGlzIHVuZGVmaW5lZCB0aGVuIGN1cnJlbnQgdGQvdHIgd2lsbCBiZSBoaWdobGlnaHRlZCBmcm9tIHB1YmxpYyBwcm9wZXJ0eSBob3Zlci5jb2xvcl90ZCwgaG92ZXIuY29sb3JfdHIgLi4uXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSByaSBSb3cgaW5kZXguXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHQgT2JqZWN0IGNvbnRhaW5zIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgKFwidFwiIGlzIFREIHN0eWxlIG9iamVjdCBpcyBwcmVwYXJlZCBpbiBnZXRUZFN0eWxlIG1ldGhvZCkuXHJcbiAgICovXHJcbiAgc2V0VGRTdHlsZSA9IGZ1bmN0aW9uIChyaSwgdCkgXHJcbiAge1xyXG4gICAgdmFyIHRyLCBzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IGFuZCB0ZC5zdHlsZVxyXG5cclxuICAgIHRyID0gdGFibGUucm93c1tyaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHRhYmxlIHJvd1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbG9ycyB0byB0YWJsZSBjZWxscyAocmVzcGVjdGl2ZWx5KSBvciBmaXJzdCBjb2xvciB0byBhbGwgY2VsbHMgKGluIGNhc2Ugb2Ygc2V0dGluZ3MgaG92ZXIgdG8gdGhlIHJvdylcclxuICAgIHtcclxuICAgICAgcyA9IHRyLmNlbGxzW2ldLnN0eWxlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIGN1cnJlbnQgVEQgc3R5bGVcclxuICAgICAgcy5iYWNrZ3JvdW5kQ29sb3IgPSAodCA9PT0gdW5kZWZpbmVkKSA/IFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVHIgOiB0LmNvbG9yW2ldLnRvU3RyaW5nKCk7ICAvLyBUUiBiYWNrZ3JvdW5kIGNvbG9yIC0gdGRTdHlsZSBpcyB1bmRlZmluZWQgdGhlbiBoaWdobGlnaHQgVEQgb3RoZXJ3aXNlIHJldHVybiBwcmV2aW91cyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgIFxyXG4gICAgICBpZiAoUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHIgIT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRSIGJvcmRlciAtIGlmIGhvdmVyLmJvcmRlclRkIGlzIHNldCB0aGVuIHRha2UgY2FyZSBvZiBib3JkZXIgc3R5bGVcclxuICAgICAge1xyXG4gICAgICAgIGlmICh0ID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBib3JkZXIgKGhpZ2hsaWdodCkgLSBzb3VyY2Ugcm93IHdpbGwgbm90IGhhdmUgYW55IGJvcmRlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChyb3cgPCByb3dfc291cmNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaXMgbW92ZWQgYWJvdmUgc291cmNlIHJvdyBpbiBjdXJyZW50IHRhYmxlXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHMuYm9yZGVyVG9wID0gUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGlzIG1vdmVkIGJlbG93IHNvdXJjZSByb3cgaW4gY3VycmVudCB0YWJsZVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBzLmJvcmRlckJvdHRvbSA9IFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gcHJldmlvdXMgc3RhdGUgYm9yZGVyVG9wIGFuZCBib3JkZXJCb3R0b20gKGV4aXQgZnJvbSBURClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBzLmJvcmRlclRvcFdpZHRoID0gdC50b3BbaV1bMF07XHJcbiAgICAgICAgICBzLmJvcmRlclRvcFN0eWxlID0gdC50b3BbaV1bMV07XHJcbiAgICAgICAgICBzLmJvcmRlclRvcENvbG9yID0gdC50b3BbaV1bMl07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbVdpZHRoID0gdC5ib3R0b21baV1bMF07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbVN0eWxlID0gdC5ib3R0b21baV1bMV07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbUNvbG9yID0gdC5ib3R0b21baV1bMl07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8vIE1ldGhvZCByZXR1cm5zIGJhY2tncm91bmQgYW5kIGJvcmRlciBzdHlsZXMgYXMgb2JqZWN0IGZvciB0aGUgaW5wdXQgcGFyYW1ldGVyIHJvdyBpbmRleCAocmkpLiAgQHJldHVybiB7T2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIChmb3IgdGhlIHJvdykuXHJcbiAgZ2V0VGRTdHlsZSA9IGZ1bmN0aW9uIChyaSkgXHJcbiAge1xyXG4gICAgdmFyIHRyLCBjOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IGFuZCB0ZCByZWZlcmVuY2UgICBcclxuICAgIHZhciB0ID0ge2NvbG9yOiBbXSwgdG9wOiBbXSwgcmlnaHQ6IFtdLCBib3R0b206IFtdLCBsZWZ0OiBbXX07ICAgICAgICAvLyBkZWZpbmUgVEQgc3R5bGUgb2JqZWN0IHdpdGggYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlczogdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0XHJcbiAgICAgIFxyXG4gICAgdmFyIGJvcmRlciA9IGZ1bmN0aW9uIChjLCBuYW1lKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByaXZhdGUgbWV0aG9kIGdldHMgYm9yZGVyIHN0eWxlczogdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0XHJcbiAgICB7XHJcbiAgICAgIHZhciB3aWR0aCA9ICdib3JkZXInICsgbmFtZSArICdXaWR0aCcsIHN0eWxlID0gJ2JvcmRlcicgKyBuYW1lICsgJ1N0eWxlJywgY29sb3IgPSAnYm9yZGVyJyArIG5hbWUgKyAnQ29sb3InO1xyXG4gICAgICByZXR1cm4gW2dldFN0eWxlKGMsIHdpZHRoKSwgZ2V0U3R5bGUoYywgc3R5bGUpLCBnZXRTdHlsZShjLCBjb2xvcildO1xyXG4gICAgfTtcclxuXHJcbiAgICB0ciA9IHRhYmxlLnJvd3NbcmldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCB0YWJsZSByb3dcclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ci5jZWxscy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHN0eWxlcyBmb3IgZWFjaCB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIGMgPSB0ci5jZWxsc1tpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IFREIHJlZmVyZW5jZVxyXG4gICAgICB0LmNvbG9yW2ldID0gYy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgXHJcbiAgICAgIGlmIChSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUciAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgdG9wIGFuZCBib3R0b20gVEQgYm9yZGVyIHN0eWxlcyBpZiBob3Zlci5ib3JkZXJUciBwcm9wZXJ0eSBpcyBzZXRcclxuICAgICAge1xyXG4gICAgICAgIHQudG9wW2ldID0gYm9yZGVyKGMsICdUb3AnKTtcclxuICAgICAgICB0LmJvdHRvbVtpXSA9IGJvcmRlcihjLCAnQm90dG9tJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgcmV0dXJucyBhcnJheSBvZiBlbGVtZW50IGJvdW5kcyAob2Zmc2V0KSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgKG5lZWRlZCBmb3IgdGFibGUgZ3JpZCBjYWxjdWxhdGlvbikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gYm94IEhUTUxFbGVtZW50IGZvciBib3ggbWV0cmljcy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3Bvc2l0aW9uXSBIVE1MRWxlbWVudCBcInBvc2l0aW9uXCIgc3R5bGUuIEVsZW1lbnRzIHdpdGggc3R5bGUgXCJmaXhlZFwiIHdpbGwgbm90IGhhdmUgaW5jbHVkZWQgcGFnZSBzY3JvbGwgb2Zmc2V0LlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2JveF9zY3JvbGxdIElmIHNldCB0byBcImZhbHNlXCIgdGhlbiBlbGVtZW50IHNjcm9sbCBvZmZzZXQgd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gY2FsY3VsYXRpb24gKGRlZmF1bHQgaXMgXCJ0cnVlXCIpLlxyXG4gICAqIEByZXR1cm4ge0FycmF5fSBCb3ggb2Zmc2V0IGFycmF5OiBbIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCBdXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBjYWxjdWxhdGUgYm94IG9mZnNldCBmb3IgdGhlIGRpdiBpZD1cInJlZGlwcy1kcmFnXCJcclxuICAgKiBkaXZib3ggPSBib3hPZmZzZXQoZHJhZ0NvbnRhaW5lcik7XHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBpbmNsdWRlIHNjcm9sbCBwb3NpdGlvbiBpbiBvZmZzZXRcclxuICAgKiBvZmZzZXQgPSBib3hPZmZzZXQocm93T2JqLCAnZml4ZWQnKTtcclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGdldCBESVYgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIGVsZW1lbnQgc2Nyb2xsIG9mZnNldFxyXG4gICAqIGNiID0gYm94T2Zmc2V0KGRpdiwgcG9zaXRpb24sIGZhbHNlKTtcclxuICAgKi9cclxuICBib3hPZmZzZXQgPSBmdW5jdGlvbiAoYm94LCBwb3NpdGlvbiwgYm94X3Njcm9sbClcclxuICB7XHJcbiAgICB2YXIgb0xlZnQgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgbGVmdCAodGFrZSBjYXJlIG9mIGhvcml6b250YWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgdmFyIG9Ub3AgID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IHRvcCAodGFrZSBjYXJlIG9kIHZlcnRpY2FsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHZhciBib3hPbGQgPSBib3g7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgYm94IG9iamVjdFxyXG5cclxuICAgIGlmIChwb3NpdGlvbiAhPT0gJ2ZpeGVkJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGFibGVfcG9zaXRpb24gaXMgdW5kZWZpbmVkLCAnJyBvciAncGFnZV9zY3JvbGwnIHRoZW4gaW5jbHVkZSBwYWdlIHNjcm9sbCBvZmZzZXQsIHdpbmRvd1Njcm9sbFBvc2l0aW9uIGlzIHNldCBpbiBjYWxjdWxhdGVDZWxscygpLCBjYWxjdWxhdGVDZWxscygpIGlzIGNhbGxlZCBvbiB3aW5kb3cgc2Nyb2xsIGV2ZW50XHJcbiAgICB7XHJcbiAgICAgIG9MZWZ0ID0gMCAtIHdpbmRvd1Njcm9sbFBvc2l0aW9uWzBdOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgbGVmdCAodGFrZSBjYXJlIG9mIGhvcml6b250YWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgICBvVG9wICA9IDAgLSB3aW5kb3dTY3JvbGxQb3NpdGlvblsxXTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IHRvcCAodGFrZSBjYXJlIG9kIHZlcnRpY2FsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYm94X3Njcm9sbCA9PT0gdW5kZWZpbmVkIHx8IGJveF9zY3JvbGwgPT09IHRydWUpICAgICAgICAgIC8vIGNsaW1iIHVwIHRocm91Z2ggRE9NIGhpZXJhcmNoeSAoZ2V0U2Nyb2xsUG9zaXRpb24oKSB0YWtlcyBjYXJlIGFib3V0IHBhZ2Ugc2Nyb2xsIHBvc2l0aW9ucylcclxuICAgIHtcclxuICAgICAgZG9cclxuICAgICAge1xyXG4gICAgICAgIG9MZWZ0ICs9IGJveC5vZmZzZXRMZWZ0IC0gYm94LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgb1RvcCArPSBib3gub2Zmc2V0VG9wIC0gYm94LnNjcm9sbFRvcDtcclxuICAgICAgICBib3ggPSBib3gub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcbiAgICAgIHdoaWxlIChib3ggJiYgYm94Lm5vZGVOYW1lICE9PSAnQk9EWScpO1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGltYiB1cCB0byB0aGUgQk9EWSBlbGVtZW50IGJ1dCB3aXRob3V0IHNjcm9sbCBwb3NpdGlvbnNcclxuICAgIHtcclxuICAgICAgZG9cclxuICAgICAge1xyXG4gICAgICAgIG9MZWZ0ICs9IGJveC5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIG9Ub3AgKz0gYm94Lm9mZnNldFRvcDtcclxuICAgICAgICBib3ggPSBib3gub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcbiAgICAgIHdoaWxlIChib3ggJiYgYm94Lm5vZGVOYW1lICE9PSAnQk9EWScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICAgICAgICB0b3AgICAgICAgICAgICAgICAgIHJpZ2h0LCAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSAgICAgICAgICAgbGVmdFxyXG4gICAgcmV0dXJuIFsgb1RvcCwgb0xlZnQgKyBib3hPbGQub2Zmc2V0V2lkdGgsIG9Ub3AgKyBib3hPbGQub2Zmc2V0SGVpZ2h0LCBvTGVmdCBdO1xyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCBpcyBjYWxsZWQgaW4gZXZlcnkgcG9zc2libGUgY2FzZSB3aGVuIHBvc2l0aW9uIG9yIHNpemUgb2YgdGFibGUgZ3JpZCBjb3VsZCBjaGFuZ2UgbGlrZTogcGFnZSBzY3JvbGxpbmcsIGVsZW1lbnQgZHJvcHBlZCB0byB0aGUgdGFibGUgY2VsbCwgZWxlbWVudCBzdGFydCBkcmFnZ2luZyBhbmQgc28gb24uXHJcbiAgLy8gSXQgY2FsY3VsYXRlcyB0YWJsZSByb3cgb2Zmc2V0cyAodGFibGUgZ3JpZCkgYW5kIHNhdmVzIHRvIHRoZSBcInRhYmxlc1wiIGFycmF5LlxyXG4gIC8vIFRhYmxlIHJvd3Mgd2l0aCBzdHlsZSBkaXNwbGF5PSdub25lJyBhcmUgc2tpcHBlZC5cclxuICBjYWxjdWxhdGVDZWxscyA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHZhciByb3dfb2Zmc2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IGJveFxyXG4gICAgdmFyIHBvc2l0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50ICh0YWJsZSBvciB0YWJsZSBjb250YWluZXIpIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIFwicGFnZSBzY3JvbGxcIiBvZmZzZXQgc2hvdWxkIG5vdCBiZSBhZGRlZFxyXG4gICAgdmFyIGNiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBib3ggb2Zmc2V0IGZvciBjb250YWluZXIgYm94IChjYilcclxuXHJcbiAgICB3aW5kb3dTY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZUNlbGxzKCkgaXMgY2FsbGVkIG9uIHdpbmRvdyBzY3JvbGwgZXZlbnQgc28gaGVyZSBpcyBwZXJmZWN0IHBsYWNlIHRvIHJlZnJlc2ggd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgcm93X29mZnNldCA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIHJvd19vZmZzZXQgYXJyYXlcclxuICAgIFxyXG4gICAgcG9zaXRpb24gPSBnZXRTdHlsZSh0YWJsZSwgJ3Bvc2l0aW9uJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGFibGUgc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgXCJwYWdlIHNjcm9sbFwiIG9mZnNldCBmcm9tIGNhbGN1bGF0aW9uIGlmIG5lZWRlZClcclxuICAgIFxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZSBkb2Vzbid0IGhhdmUgc3R5bGUgcG9zaXRpb246Zml4ZWQgdGhlbiB0YWJsZSBjb250YWluZXIgc2hvdWxkIGJlIHRlc3RlZFxyXG4gICAge1xyXG4gICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLnBhcmVudE5vZGUsICdwb3NpdGlvbicpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gdGFibGUucm93cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgICAgICAgICAgICAgICAgICAgIC8vIGJhY2t3YXJkIGxvb3AgaGFzIGJldHRlciBwZXJmb21hbmNlXHJcbiAgICB7XHJcbiAgICAgIGlmICh0YWJsZS5yb3dzW2ldLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJykgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCByb3dzIHRvIHRoZSBvZmZzZXQgYXJyYXkgaWYgcm93IGlzIG5vdCBoaWRkZW5cclxuICAgICAge1xyXG4gICAgICAgIHJvd19vZmZzZXRbaV0gPSBib3hPZmZzZXQodGFibGUucm93c1tpXSwgcG9zaXRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRhYmxlLnJlZGlwcy5vZmZzZXQgPSBib3hPZmZzZXQodGFibGUsIHBvc2l0aW9uKTsgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSB0YWJsZSBpbmZvcm1hdGlvbnMgKHRhYmxlIG9mZnNldCBhbmQgcm93IG9mZnNldHMpXHJcbiAgICB0YWJsZS5yZWRpcHMucm93X29mZnNldCA9IHJvd19vZmZzZXQ7XHJcblxyXG4gICAgZGl2Qm94ID0gYm94T2Zmc2V0KGRyYWdDb250YWluZXIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgYm94IG9mZnNldCBmb3IgdGhlIGRpdiBpZD1yZWRpcHMtZHJhZ1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjcm9sbERhdGEuY29udGFpbmVyLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXMgaWYgbmVlZGVkXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUoc2Nyb2xsRGF0YS5jb250YWluZXJbaV0uZGl2LCAncG9zaXRpb24nKTsgICAgIC8vIHNldCBjb250YWluZXIgYm94IHN0eWxlIHBvc2l0aW9uICh0byBleGNsdWRlIHBhZ2Ugc2Nyb2xsIG9mZnNldCBmcm9tIGNhbGN1bGF0aW9uIGlmIG5lZWRlZClcclxuICAgICAgY2IgPSBib3hPZmZzZXQoc2Nyb2xsRGF0YS5jb250YWluZXJbaV0uZGl2LCBwb3NpdGlvbiwgZmFsc2UpOyAgICAgLy8gZ2V0IERJViBjb250YWluZXIgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIHNjcm9sbCBwb3NpdGlvbiBvZiB0aGUgY29udGVudFxyXG4gICAgICBcclxuICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbaV0ub2Zmc2V0ID0gY2I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhc1xyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5taWRzdFggPSAoY2JbMV0gKyBjYlszXSkgLyAyO1xyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5taWRzdFkgPSAoY2JbMF0gKyBjYlsyXSkgLyAyO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCByZXR1cm5zIGN1cnJlbnQgcGFnZSBzY3JvbGwgdmFsdWVzIGFzIGFycmF5IChYIGFuZCBZIGF4aXMpLlxyXG4gIGdldFNjcm9sbFBvc2l0aW9uID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgdmFyIHNjcm9sbFkgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgIC8vdmFyIHNjcm9sbFggPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICB2YXIgc2Nyb2xsWCA9IDA7XHJcblxyXG4gICAgcmV0dXJuIFsgc2Nyb2xsWCwgc2Nyb2xsWSBdO1xyXG4gIH07XHJcblxyXG4gIC8vIEhvcml6b250YWwgYXV0byBzY3JvbGwgbWV0aG9kLiAgQHBhcmFtIHtIVE1MRWxlbWVudH0gc28gV2luZG93IG9yIERJViBlbGVtZW50IChzbyAtIHNjcm9sbCBvYmplY3QpLlxyXG4gIGF1dG9TY3JvbGxYID0gZnVuY3Rpb24gKHNvKSBcclxuICB7XHJcbiAgICB2YXIgcG9zLCAgICAgIC8vIGxlZnQgc3R5bGUgcG9zaXRpb25cclxuICAgICAgb2xkLCAgICAgIC8vIG9sZCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChuZWVkZWQgZm9yIHdpbmRvdyBzY3JvbGxpbmcpXHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uLCAvLyBkZWZpbmUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgbWF4c3AsICAgICAgLy8gbWF4aW11bSBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgZWRnZUNyb3NzZWQsICAvLyBjcm9zc2VkIGVkZ2UgZm9yIHdpbmRvdyBhbmQgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgWCA9IHBvaW50ZXIueCwgIC8vIGRlZmluZSBwb2ludGVyIFggcG9zaXRpb25cclxuICAgICAgWSA9IHBvaW50ZXIueTsgIC8vIGRlZmluZSBwb2ludGVyIFkgcG9zaXRpb25cclxuICAgIC8vIGlmIG1vdXNldXAgdGhlbiBzdG9wIGhhbmRsaW5nIFwiY3VycmVudCBjZWxsXCJcclxuICAgIGlmIChlZGdlLmZsYWcueCA+IDApIHtcclxuICAgICAgLy8gY2FsY3VsYXRlIGNlbGwgKGF1dG9zY3JvbGwgaXMgd29ya2luZylcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTtcclxuICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUgcm93IGFuZCB0YWJsZSBjZWxsXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7XHJcbiAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgaWYgbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgRElWIGlkPVwicmVkaXBzLWRyYWdcIlxyXG4gICAgICBpZiAoWCA8IGRpdkJveFsxXSAmJiBYID4gZGl2Qm94WzNdICYmIFkgPCBkaXZCb3hbMl0gJiYgWSA+IGRpdkJveFswXSkge1xyXG4gICAgICAgIGNlbGxDaGFuZ2VkKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHNhdmUgc2Nyb2xsIG9iamVjdCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlIGZvciB0aGUgZmlyc3QgY2FsbCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZVxyXG4gICAgLy8gcmVjdXJzaXZlIGNhbGxzIHdpbGwgbm90IGVudGVyIHRoaXMgY29kZSBhbmQgcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxEYXRhLm9iaiB3aWxsIGJlIHByZXNlcnZlZFxyXG4gICAgaWYgKHR5cGVvZihzbykgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHNjcm9sbERhdGEub2JqID0gc287XHJcbiAgICB9XHJcbiAgICAvLyB3aW5kb3cgYXV0b3Njcm9sbCAoZGVmaW5lIGN1cnJlbnQsIG9sZCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IG9sZCA9IGdldFNjcm9sbFBvc2l0aW9uKClbMF07XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS53aWR0aCAtIHNjcmVlbi53aWR0aDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLnBhZ2UueDtcclxuICAgIH1cclxuICAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIChkZWZpbmUgY3VycmVudCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICBlbHNlIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxMZWZ0O1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEub2JqLnNjcm9sbFdpZHRoIC0gc2Nyb2xsRGF0YS5vYmouY2xpZW50V2lkdGg7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5kaXYueDtcclxuICAgIH1cclxuICAgIC8vIGlmIHNjcm9sbGluZyBpcyBwb3NzaWJsZVxyXG4gICAgaWYgKGVkZ2UuZmxhZy54ID4gMCAmJiAoKGVkZ2VDcm9zc2VkIDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA+IDApIHx8IChlZGdlQ3Jvc3NlZCA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPCBtYXhzcCkpKSB7XHJcbiAgICAgIC8vIGlmIG9iamVjdCBpcyB3aW5kb3dcclxuICAgICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpIHtcclxuICAgICAgICAvLyBzY3JvbGwgd2luZG93XHJcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KGVkZ2VDcm9zc2VkLCAwKTtcclxuICAgICAgICAvLyBnZXQgbmV3IHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKGFmdGVyIHNjcm9sbGluZylcclxuICAgICAgICAvLyBiZWNhdXNlIGF0IHBhZ2UgdG9wIG9yIGJvdHRvbSBlZGdlWSBjYW4gYmUgYmlnZ2VyIHRoZW4gdGhlIHJlc3Qgb2Ygc2Nyb2xsaW5nIGFyZWFcclxuICAgICAgICAvLyBpdCB3aWxsIGJlIG5pY2UgdG8ga25vdyBob3cgbXVjaCB3YXMgd2luZG93IHNjcm9sbGVkIGFmdGVyIHNjcm9sbEJ5IGNvbW1hbmRcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKClbMF07XHJcbiAgICAgICAgLy8gZ2V0IGN1cnJlbnQgb2JqZWN0IHRvcCBzdHlsZVxyXG4gICAgICAgIHBvcyA9IHBhcnNlSW50KG9iai5zdHlsZS5sZWZ0LCAxMCk7XHJcbiAgICAgICAgaWYgKGlzTmFOKHBvcykpIHtcclxuICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIG9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNjcm9sbERhdGEub2JqLnNjcm9sbExlZnQgKz0gZWRnZUNyb3NzZWQ7XHJcbiAgICAgIH1cclxuICAgICAgLy8gcmVjdXJzaXZlIGF1dG9zY3JvbGwgY2FsbFxyXG4gICAgICBzZXRUaW1lb3V0KGF1dG9TY3JvbGxYLCBSRURJUFMuZHJhZy5zY3JvbGwuc3BlZWQpO1xyXG4gICAgfVxyXG4gICAgLy8gYXV0b3Njcm9sbCBpcyBlbmRlZDogZWxlbWVudCBpcyBvdXQgb2YgdGhlIHBhZ2UgZWRnZSBvciBtYXhpbXVtIHBvc2l0aW9uIGlzIHJlYWNoZWQgKGxlZnQgb3IgcmlnaHQpXHJcbiAgICBlbHNlIHtcclxuICAgICAgLy8gcmV0dXJuIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgKHRvIHdpbmRvdyBvciBkaXYgZWxlbWVudClcclxuICAgICAgUkVESVBTLmV2ZW50LmFkZChzY3JvbGxEYXRhLm9iaiwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTtcclxuICAgICAgLy8gcmVzZXQgYXV0byBzY3JvbGwgZmxhZyBYXHJcbiAgICAgIGVkZ2UuZmxhZy54ID0gMDtcclxuICAgICAgLy8gcmVzZXQgY3VycmVudCBjZWxsIHBvc2l0aW9uXHJcbiAgICAgIGN1cnJlbnRDZWxsID0gWzAsIDAsIDAsIDBdO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFZlcnRpY2FsIGF1dG8gc2Nyb2xsIG1ldGhvZC4gIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNvIFdpbmRvdyBvciBESVYgZWxlbWVudCAoc28gLSBzY3JvbGwgb2JqZWN0KS5cclxuICBhdXRvU2Nyb2xsWSA9IGZ1bmN0aW9uIChzbykgXHJcbiAge1xyXG4gICAgdmFyIHBvcywgICAgICAvLyB0b3Agc3R5bGUgcG9zaXRpb25cclxuICAgICAgb2xkLCAgICAgIC8vIG9sZCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChuZWVkZWQgZm9yIHdpbmRvdyBzY3JvbGxpbmcpXHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uLCAvLyBkZWZpbmUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgbWF4c3AsICAgICAgLy8gbWF4aW11bSBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgZWRnZUNyb3NzZWQsICAvLyBjcm9zc2VkIGVkZ2UgZm9yIHdpbmRvdyBhbmQgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgWCA9IHBvaW50ZXIueCwgIC8vIGRlZmluZSBwb2ludGVyIFggcG9zaXRpb25cclxuICAgICAgWSA9IHBvaW50ZXIueTsgIC8vIGRlZmluZSBwb2ludGVyIFkgcG9zaXRpb25cclxuICAgIFxyXG4gICAgaWYgKGVkZ2UuZmxhZy55ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBtb3VzZXVwIHRoZW4gc3RvcCBoYW5kbGluZyBcImN1cnJlbnQgY2VsbFwiXHJcbiAgICB7XHJcbiAgICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBjZWxsIChhdXRvc2Nyb2xsIGlzIHdvcmtpbmcpXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlIHJvdyBhbmQgdGFibGUgY2VsbFxyXG4gICAgICBcclxuICAgICAgaWYgKFggPCBkaXZCb3hbMV0gJiYgWCA+IGRpdkJveFszXSAmJiBZIDwgZGl2Qm94WzJdICYmIFkgPiBkaXZCb3hbMF0pICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCBpZiBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSBESVYgaWQ9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICAgIHtcclxuICAgICAgICBjZWxsQ2hhbmdlZCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIHNhdmUgc2Nyb2xsIG9iamVjdCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlIGZvciB0aGUgZmlyc3QgY2FsbCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSwgcmVjdXJzaXZlIGNhbGxzIHdpbGwgbm90IGVudGVyIHRoaXMgY29kZSBhbmQgcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxEYXRhLm9iaiB3aWxsIGJlIHByZXNlcnZlZFxyXG4gICAgaWYgKHR5cGVvZihzbykgPT09ICdvYmplY3QnKSBcclxuICAgIHtcclxuICAgICAgc2Nyb2xsRGF0YS5vYmogPSBzbztcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cgYXV0b3Njcm9sbCAoZGVmaW5lIGN1cnJlbnQsIG9sZCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gb2xkID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVsxXTtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLmhlaWdodCAtIHNjcmVlbi5oZWlnaHQ7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5wYWdlLnk7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIChkZWZpbmUgY3VycmVudCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsVG9wO1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEub2JqLnNjcm9sbEhlaWdodCAtIHNjcm9sbERhdGEub2JqLmNsaWVudEhlaWdodDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLmRpdi55O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBpZiBzY3JvbGxpbmcgaXMgcG9zc2libGVcclxuICAgIGlmIChlZGdlLmZsYWcueSA+IDAgJiYgKChlZGdlQ3Jvc3NlZCA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPiAwKSB8fCAoZWRnZUNyb3NzZWQgPiAwICYmIHNjcm9sbFBvc2l0aW9uIDwgbWF4c3ApKSkgXHJcbiAgICB7XHJcbiAgICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9iamVjdCBpcyB3aW5kb3dcclxuICAgICAge1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxCeSgwLCBlZGdlQ3Jvc3NlZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgd2luZG93XHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpWzFdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBuZXcgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAoYWZ0ZXIgc2Nyb2xsaW5nKSwgYmVjYXVzZSBhdCBwYWdlIHRvcCBvciBib3R0b20gZWRnZVkgY2FuIGJlIGJpZ2dlciB0aGVuIHRoZSByZXN0IG9mIHNjcm9sbGluZyBhcmVhLCBpdCB3aWxsIGJlIG5pY2UgdG8ga25vdyBob3cgbXVjaCB3YXMgd2luZG93IHNjcm9sbGVkIGFmdGVyIHNjcm9sbEJ5IGNvbW1hbmRcclxuICAgICAgICBwb3MgPSBwYXJzZUludChvYmouc3R5bGUudG9wLCAxMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgb2JqZWN0IHRvcCBzdHlsZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpc05hTihwb3MpKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwb3MgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvciBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICB7XHJcbiAgICAgICAgc2Nyb2xsRGF0YS5vYmouc2Nyb2xsVG9wICs9IGVkZ2VDcm9zc2VkO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBzZXRUaW1lb3V0KGF1dG9TY3JvbGxZLCBSRURJUFMuZHJhZy5zY3JvbGwuc3BlZWQpOyAgICAgICAgICAgICAgICAgICAgICAvLyByZWN1cnNpdmUgYXV0b3Njcm9sbCBjYWxsXHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF1dG9zY3JvbGwgaXMgZW5kZWQ6IGVsZW1lbnQgaXMgb3V0IG9mIHRoZSBwYWdlIGVkZ2Ugb3IgbWF4aW11bSBwb3NpdGlvbiBpcyByZWFjaGVkICh0b3Agb3IgYm90dG9tKVxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZXZlbnQuYWRkKHNjcm9sbERhdGEub2JqLCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAvLyByZXR1cm4gb25zY3JvbGwgZXZlbnQgaGFuZGxlciAodG8gd2luZG93IG9yIGRpdiBlbGVtZW50KVxyXG4gICAgICBlZGdlLmZsYWcueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBhdXRvIHNjcm9sbCBmbGFnIFlcclxuICAgICAgY3VycmVudENlbGwgPSBbMCwgMCwgMCwgMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgY3VycmVudCBjZWxsIHBvc2l0aW9uXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIGNvcGllcyBjdXN0b20gcHJvcGVydGllcyBmcm9tIHNvdXJjZSBlbGVtZW50IHRvIHRoZSBjbG9uZWQgZWxlbWVudCBhbmQgc2V0cyBldmVudCBoYW5kbGVycyAob25tb3VzZWRvd24gYW5kIG9uZGJsY2xpY2spLlxyXG4gICAqIFRoaXMgYWN0aW9uIHdpbGwgYmUgdGFrZW4gb24gRElWIGVsZW1lbnQgaXRzZWxmIGFuZCBhbGwgY2hpbGQgRElWIGVsZW1lbnRzLlxyXG4gICAqIE5lZWRlZCBpbiBjYXNlIHdoZW4gRElWIGVsZW1lbnQgaXMgY2xvbmVkIG9yIFJPVyBpcyBjbG9uZWQgKGZvciBkcmFnZ2luZyBtb2RlPVwicm93XCIpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNyYyBTb3VyY2UgZWxlbWVudCAoRElWIG9yIFRSIGVsZW1lbnQpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNsbiBDbG9uZWQgZWxlbWVudCAoRElWIG9yIFRSIGVsZW1lbnQpLlxyXG4gICAqL1xyXG4gIGNvcHlQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHNyYywgY2xuKSBcclxuICB7XHJcbiAgICB2YXIgY29weSA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBtZXRob2RcclxuICAgIHZhciBjaGlsZHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHByb3BlcnRpZXMgZm9yIGNoaWxkIGVsZW1lbnRzICh0aGlzIG1ldGhvZCBjYWxscyBcImNvcHlcIiBtZXRob2QpXHJcbiAgICBcclxuICAgIGNvcHlbMF0gPSBmdW5jdGlvbiAoZTEsIGUyKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY29weSBtZXRob2QgZm9yIERJViBlbGVtZW50cyAoZTEgc291cmNlIGVsZW1lbnQsIGUyIGNsb25lZCBlbGVtZW50KSwgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80MDk0ODExL2phdmFzY3JpcHQtY2xvbmVub2RlLWFuZC1wcm9wZXJ0aWVzXHJcbiAgICB7XHJcbiAgICAgIGlmIChlMS5yZWRpcHMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVkaXBzIHByb3BlcnR5IGV4aXN0cyBpbiBzb3VyY2UgZWxlbWVudCwgY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVuYWJsZWQsICByZWRpcHMuY29udGFpbmVyIC4uLilcclxuICAgICAge1xyXG4gICAgICAgIGUyLnJlZGlwcyA9IHt9O1xyXG4gICAgICAgIGUyLnJlZGlwcy5lbmFibGVkID0gZTEucmVkaXBzLmVuYWJsZWQ7XHJcbiAgICAgICAgZTIucmVkaXBzLmNvbnRhaW5lciA9IGUxLnJlZGlwcy5jb250YWluZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGUxLnJlZGlwcy5lbmFibGVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9ubW91c2Vkb3duIGV2ZW50IGhhbmRsZXIgaWYgc291cmNlIGVsZW1lbnQgaXMgZW5hYmxlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJlZ2lzdGVyRXZlbnRzKGUyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvcHlbMV0gPSBmdW5jdGlvbiAoZTEsIGUyKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY29weSBtZXRob2QgZm9yIFRSIGVsZW1lbnRzIFxyXG4gICAge1xyXG4gICAgICBpZiAoZTEucmVkaXBzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJlZGlwcyBwcm9wZXJ0eSBleGlzdHMgaW4gc291cmNlIGVsZW1lbnQsIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgKHJlZGlwcy5lbXB0eVJvdyAuLi4pXHJcbiAgICAgIHtcclxuICAgICAgICBlMi5yZWRpcHMgPSB7fTtcclxuICAgICAgICBlMi5yZWRpcHMuZW1wdHlSb3cgPSBlMS5yZWRpcHMuZW1wdHlSb3c7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNoaWxkcyA9IGZ1bmN0aW9uIChlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgbWV0aG9kIHRvIGNvcHkgcHJvcGVydGllcyBmb3IgY2hpbGQgZWxlbWVudHMgKGlucHV0IHBhcmFtZXRlciBpcyBlbGVtZW50IGluZGV4IDAgLSBESVYsIDEgLSBUUilcclxuICAgIHtcclxuICAgICAgdmFyIGVsMSwgZWwyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0aW9uIG9mIERJVi9UUiBlbGVtZW50cyBpbiBzb3VyY2UgYW5kIGNsb25lZCBlbGVtZW50XHJcbiAgICAgIHZhciB0biA9IFsnRElWJywgJ1RSJ107ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFnIG5hbWVcclxuICAgICAgXHJcbiAgICAgIGVsMSA9IHNyYy5nZXRFbGVtZW50c0J5VGFnTmFtZSh0bltlXSk7ICAgICAgICAgICAgLy8gY29sbGVjdCBjaGlsZCBESVYvVFIgZWxlbWVudHMgZnJvbSB0aGUgc291cmNlIGVsZW1lbnQgKHBvc3NpYmxlIGlmIGRpdiBlbGVtZW50IGNvbnRhaW5zIHRhYmxlKVxyXG4gICAgICBlbDIgPSBjbG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUodG5bZV0pOyAgICAgICAgICAgIC8vIGNvbGxlY3QgY2hpbGQgRElWL1RSIGVsZW1lbnRzIGZyb20gY2xvbmVkIGVsZW1lbnRcclxuICAgICAgXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWwyLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgLy8gY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVuYWJsZWQsICByZWRpcHMuY29udGFpbmVyIC4uLikgYW5kIHNldCBldmVudCBoYW5kbGVycyB0byBjaGlsZCBESVYgZWxlbWVudHNcclxuICAgICAge1xyXG4gICAgICAgIGNvcHlbZV0oZWwxW2ldLCBlbDJbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBpZiAoc3JjLm5vZGVOYW1lID09PSAnRElWJykgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgc291cmNlIGVsZW1lbnQgaXMgRElWIGVsZW1lbnQgdGhlbiBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIGZvciBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBjb3B5WzBdKHNyYywgY2xuKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHNyYy5ub2RlTmFtZSA9PT0gJ1RSJykgICAgICAgICAgICAgICAgICAgICAvLyBpZiBzb3VyY2UgZWxlbWVudCBpcyBUUiBlbGVtZW50IHRoZW4gY29weSBjdXN0b20gcHJvcGVydGllcyBmb3IgVFIgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBjb3B5WzFdKHNyYywgY2xuKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY2hpbGRzKDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcHJvcGVydGllcyBmb3IgRElWIGNoaWxkIGVsZW1lbnRzXHJcbiAgICBjaGlsZHMoMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIGZvciBUUiBjaGlsZCBlbGVtZW50c1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgdXBkYXRlcyBjbGltaXQxX1ggb3IgY2xpbWl0Ml9YIGNsYXNzIG5hbWUgKFggZGVmaW5lcyBjbG9uaW5nIGxpbWl0KS5cclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmNsaW1pdDFfWCAtIGFmdGVyIGNsb25pbmcgWCBlbGVtZW50cywgbGFzdCBlbGVtZW50IHdpbGwgYmUgbm9ybWFsIGRyYWctYWJsZSBlbGVtZW50PC9saT5cclxuICAgKiA8bGk+Y2xpbWl0Ml9YIC0gYWZ0ZXIgY2xvbmluZyBYIGVsZW1lbnRzLCBsYXN0IGVsZW1lbnQgd2lsbCBzdGF5IHVubW92YWJsZTwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBFbGVtZW50IG9uIHdoaWNoIGNuYW1lIGNsYXNzIHNob3VsZCBiZSB1cGRhdGVkLlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gdmFsdWUgSW5jcmVtZW50IG9yIGRlY3JlbWVudCBjbGltaXQgdmFsdWUuXHJcbiAgICovXHJcbiAgY2xvbmVMaW1pdCA9IGZ1bmN0aW9uIChlbCwgdmFsdWUpIFxyXG4gIHtcclxuICAgIHZhciBtYXRjaEFycmF5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoIGFycmF5XHJcbiAgICB2YXIgbGltaXRUeXBlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW1pdCB0eXBlICgxIC0gY2xvbmUgYmVjb21lcyBcIm5vcm1hbFwiIGRyYWcgZWxlbWVudCBhdCBsYXN0OyAyIC0gY2xvbmUgZWxlbWVudCBzdGF5cyBpbW1vdmFibGUpXHJcbiAgICB2YXIgbGltaXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW1pdCBudW1iZXJcclxuICAgIHZhciBjbGFzc2VzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsYXNzIG5hbWVzIG9mIGNsb25lIGVsZW1lbnRcclxuICAgIFxyXG4gICAgY2xhc3NlcyA9IGVsLmNsYXNzTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVhZCBjbGFzcyBuYW1lIGZyb20gZWxlbWVudFxyXG4gICAgbWF0Y2hBcnJheSA9IGNsYXNzZXMubWF0Y2goL2NsaW1pdChcXGQpXyhcXGQrKS8pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaCBjbGltaXQgY2xhc3MgbmFtZVxyXG4gICAgXHJcbiAgICBpZiAobWF0Y2hBcnJheSAhPT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgY2xhc3MgY29udGFpbnMgY2xpbWl0XHJcbiAgICB7XHJcbiAgICAgIGxpbWl0VHlwZSA9IHBhcnNlSW50KG1hdGNoQXJyYXlbMV0sIDEwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIGxpbWl0VHlwZSAoMSBvciAyKSBhbmQgbGltaXRcclxuICAgICAgbGltaXQgPSBwYXJzZUludChtYXRjaEFycmF5WzJdLCAxMCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAobGltaXQgPT09IDAgJiYgdmFsdWUgPT09IDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY3VycmVudCBsaW1pdCBpcyAwIGFuZCBzaG91bGQgYmUgc2V0IHRvIDEgdGhlbiByZXR1cm4gXCJjbG9uaW5nXCIgdG8gdGhlIERJViBlbGVtZW50XHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgcmVkaXBzLWNsb25lJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIHRvIGNsYXNzIGF0dHJpYnV0ZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsaW1pdFR5cGUgPT09IDIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5hYmxlIERJViBlbGVtZW50IGZvciBjbGltaXQyIHR5cGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbmFibGVEcmFnKHRydWUsIGVsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGxpbWl0ICs9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbGltaXQgdmFsdWVcclxuICAgICAgY2xhc3NlcyA9IGNsYXNzZXMucmVwbGFjZSgvY2xpbWl0XFxkX1xcZCsvZywgJ2NsaW1pdCcgKyBsaW1pdFR5cGUgKyAnXycgKyBsaW1pdCk7ICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdCBjbGFzcyBuYW1lIHdpdGggbmV3IGxpbWl0IHZhbHVlXHJcbiAgICAgIFxyXG4gICAgICBpZiAobGltaXQgPD0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVzdCBpZiBsaW1pdCBkcm9wcyB0byB6ZXJvXHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzc2VzID0gY2xhc3Nlcy5yZXBsYWNlKCdyZWRpcHMtY2xvbmUnLCAnJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG1vcmUgY2xvbmluZywgY3V0IG91dCBcInJlZGlwcy1jbG9uZVwiIGZyb20gY2xhc3MgbmFtZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsaW1pdFR5cGUgPT09IDIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbGltaXQgdHlwZSBpcyAyIHRoZW4gZGlzYWJsZSBjbG9uZSBlbGVtZW50IChpdCB3aWxsIHN0YXkgaW4gY2VsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbmFibGVEcmFnKGZhbHNlLCBlbCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHNvdXJjZSBESVYgZWxlbWVudFxyXG4gICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQuY2xvbmVkRW5kMigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5jbG9uZWRFbmQyIGhhbmRsZXJcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5jbG9uZWRFbmQxKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmNsb25lZEVuZDEgaGFuZGxlclxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZWwuY2xhc3NOYW1lID0gbm9ybWFsaXplKGNsYXNzZXMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSBzcGFjZXMgYW5kIHJldHVybiBjbGFzc2VzIHRvIHRoZSBjbG9uZSBvYmplY3RcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgYXR0YWNoZXMgLyBkZXRhY2hlcyBvbm1vdXNlZG93biwgb250b3VjaHN0YXJ0IGFuZCBvbmRibGNsaWNrIGV2ZW50cyB0byBESVYgZWxlbWVudHMgYW5kIGF0dGFjaGVzIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSBzY3JvbGwgY29udGFpbmVycyBpbiBpbml0aWFsaXphdGlvbiBwaGFzZS5cclxuICAgKiBJdCBhbHNvIGNhbiBiZSB1c2VkIGZvciBlbGVtZW50IGluaXRpYWxpemF0aW9uIGFmdGVyIERJViBlbGVtZW50IHdhcyBtYW51YWxseSBhZGRlZCB0byB0aGUgdGFibGUuXHJcbiAgICogSWYgY2xhc3MgYXR0cmlidXRlIG9mIERJViBjb250YWluZXIgY29udGFpbnMgXCJyZWRpcHMtbm9hdXRvc2Nyb2xsXCIgY2xhc3MgbmFtZSB0aGVuIGF1dG9TY3JvbGwgb3B0aW9uIHdpbGwgYmUgZGlzYWJsZWQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufFN0cmluZ30gZW5hYmxlX2ZsYWcgRW5hYmxlIC8gZGlzYWJsZSBlbGVtZW50IChvciBlbGVtZW50IHN1YnRyZWUgbGlrZSB0YWJsZSwgZHJhZ2dpbmcgY29udGFpbmVyIC4uLikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxTdHJpbmd9IFtlbF0gSFRNTCBub2RlIG9yIENTUyBzZWxlY3RvciB0byBlbmFibGUgLyBkaXNhYmxlLiBQYXJhbWV0ZXIgZGVmaW5lcyBlbGVtZW50IHJlZmVyZW5jZSBvciBDU1Mgc2VsZWN0b3Igb2YgRElWIGVsZW1lbnRzIHRvIGVuYWJsZSAvIGRpc2FibGUuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBlbmFibGUgZWxlbWVudCB3aXRoIGlkPVwiaWQxMjNcIiAoZWxlbWVudCBpZCBzaG91bGQgYmUgYSBzdHJpbmcgYWNjb3JkaW5nIHRvIERPTSBkb2NzKVxyXG4gICAqIHJkLmVuYWJsZURyYWcodHJ1ZSwgJyNpZDEyMycpO1xyXG4gICAqXHJcbiAgICogLy8gb3IgaW5pdCBtYW51YWxseSBhZGRlZCBlbGVtZW50IHdpdGgga25vd24gaWRcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKHRydWUsICcjaWQyMzQnKTtcclxuICAgKlxyXG4gICAqIC8vIGRpc2FibGUgYWxsIERJViBlbGVtZW50cyBpbiBkcmFnMSBzdWJ0cmVlXHJcbiAgICogcmQuZW5hYmxlRHJhZyhmYWxzZSwgJyNkcmFnMSBkaXYnKVxyXG4gICAqXHJcbiAgICogLy8gaW5pdCBESVYgZWxlbWVudHMgaW4gZHJhZ2dpbmcgYXJlYSAoaW5jbHVkaW5nIG5ld2x5IGFkZGVkIERJViBlbGVtZW50KVxyXG4gICAqIC8vIERJViBpbml0aWFsaXphdGlvbiB3aWxsIHdvcmsgaWYgdGFibGUgbm9kZSBzdGF5cyBpbnRhY3QgKHRhYmxlIGlzIG5vdCBnZW5lcmF0ZWQgZHluYW1pY2FsbHkpXHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZygnaW5pdCcpO1xyXG4gICAqXHJcbiAgICogLy8gaW5pdCBhZGRlZCBlbGVtZW50IHdpdGggcmVmZXJlbmNlIG15RWxlbWVudFxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcodHJ1ZSwgbXlFbGVtZW50KTtcclxuICAgKlxyXG4gICAqIC8vIGRpc2FibGUgYWxsIERJViBlbGVtZW50cyB3aXRoaW4gVEQgKHRkIGlzIHJlZmVyZW5jZSB0byBURCBub2RlKVxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcoZmFsc2UsIHRkKTtcclxuICAgKi9cclxuICBlbmFibGVEcmFnID0gZnVuY3Rpb24gKGVuYWJsZV9mbGFnLCBlbCkgXHJcbiAge1xyXG4gICAgdmFyIGRpdiA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gb2YgZGl2IGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0YWJsZXMgb3Igb25lIGRpdiBlbGVtZW50XHJcbiAgICBcclxuICAgIGlmIChlbCA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IERJViBlbGVtZW50cyBpbnNpZGUgY3VycmVudCBkcmFnIGFyZWEgKGRyYWcgZWxlbWVudHMgYW5kIHNjcm9sbCBjb250YWluZXJzKSBlLmcuIGVuYWJsZURyYWcodHJ1ZSlcclxuICAgIHtcclxuICAgICAgZGl2ID0gZHJhZ0NvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2Jyk7XHJcbiAgICB9ICAgIFxyXG4gICAgZWxzZSBpZiAodHlwZW9mKGVsKSA9PT0gJ3N0cmluZycpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiZWxcIiBpcyBzdHJpbmcgKENTUyBzZWxlY3RvcikgLSBpdCBjYW4gY29sbGVjdCBvbmUgRElWIGVsZW1lbnQgKGxpa2UgXCIjZDEyXCIpIG9yIG1hbnkgRElWIGVsZW1lbnRzIChsaWtlIFwiI2RyYWcxIGRpdlwiKVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZihlbCkgPT09ICdvYmplY3QnICYmIChlbC5ub2RlTmFtZSAhPT0gJ0RJVicgfHwgZWwuY2xhc3NOYW1lLmluZGV4T2YoJ3JlZGlwcy1kcmFnJykgPT09IC0xKSkgICAgICAvLyBcImVsXCIgaXMgbm9kZSByZWZlcmVuY2UgdG8gZWxlbWVudCB0aGF0IGlzIG5vdCBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub25lIG9mIGFib3ZlLCBlbCBpcyBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiLCBzbyBwcmVwYXJlIGFycmF5IHdpdGggb25lIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGRpdlswXSA9IGVsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBlbmFibGVEaXZzKGVuYWJsZV9mbGFnLCBkaXYpO1xyXG4gIH07XHJcbiAgXHJcbiAgXHJcbiAgZW5hYmxlRGl2cyA9IGZ1bmN0aW9uKGVuYWJsZV9mbGFnLCBkaXYpXHJcbiAge1xyXG4gICAgIHZhciBpLCBqLCBrLCAgICAvLyBsb2NhbCB2YXJpYWJsZXMgdXNlZCBpbiBsb29wXHJcbiAgICAgIHRibHMgPSBbXSwgICAgLy8gY29sbGVjdGlvbiBvZiB0YWJsZXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIGJvcmRlclN0eWxlLCAgLy8gYm9yZGVyIHN0eWxlIChzb2xpZCBvciBkb3R0ZWQpXHJcbiAgICAgIG9wYWNpdHksICAgIC8vIChpbnRlZ2VyKSBzZXQgb3BhY2l0eSBmb3IgZW5hYmxlZCAvIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgIGN1cnNvciwgICAgIC8vIGN1cnNvciBzdHlsZSAobW92ZSBvciBhdXRvKVxyXG4gICAgICBvdmVyZmxvdywgICAvLyBjc3MgdmFsdWUgb2Ygb3ZlcmZsb3cgcHJvcGVydHlcclxuICAgICAgYXV0b3Njcm9sbCwgICAvLyBib29sZWFuIC0gaWYgc2Nyb2xsYWJsZSBjb250YWluZXIgd2lsbCBoYXZlIGF1dG9zY3JvbGwgb3B0aW9uIChkZWZhdWx0IGlzIHRydWUpXHJcbiAgICAgIGVuYWJsZWQsICAgIC8vIGVuYWJsZWQgcHJvcGVydHkgKHRydWUgb3IgZmFsc2UpXHJcbiAgICAgIGNiLCAgICAgICAvLyBib3ggb2Zmc2V0IGZvciBjb250YWluZXIgYm94IChjYilcclxuICAgICAgcG9zaXRpb24sICAgLy8gaWYgdGFibGUgY29udGFpbmVyIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIFwicGFnZSBzY3JvbGxcIiBvZmZzZXQgc2hvdWxkIG5vdCBiZSBhZGRlZFxyXG4gICAgICByZWdleERyYWcgPSAvXFxicmVkaXBzLWRyYWdcXGIvaSwgLy8gcmVndWxhciBleHByZXNzaW9uIHRvIHNlYXJjaCBcInJlZGlwcy1kcmFnXCIgY2xhc3MgbmFtZVxyXG4gICAgICByZWdleE5vQXV0b3Njcm9sbCA9IC9cXGJyZWRpcHMtbm9hdXRvc2Nyb2xsXFxiL2k7IC8vIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggXCJyZWRpcHMtbm9hdXRvc2Nyb2xsXCIgY2xhc3MgbmFtZSAgIFxyXG5cclxuICAgIG9wYWNpdHkgPSBSRURJUFMuZHJhZy5zdHlsZS5vcGFjaXR5RGlzYWJsZWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHMgZnJvbSBwdWJsaWMgcHJvcGVydHkgXCJvcGFjaXR5RGlzYWJsZWRcIlxyXG4gICAgXHJcbiAgICBpZiAoZW5hYmxlX2ZsYWcgPT09IHRydWUgfHwgZW5hYmxlX2ZsYWcgPT09ICdpbml0JykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHN0eWxlcyBmb3IgZW5hYmxlZCBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBib3JkZXJTdHlsZSA9IFJFRElQUy5kcmFnLnN0eWxlLmJvcmRlckVuYWJsZWQ7XHJcbiAgICAgIGN1cnNvciA9ICdtb3ZlJztcclxuICAgICAgZW5hYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBzZXQgc3R5bGVzIGZvciBkaXNhYmxlZCBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBib3JkZXJTdHlsZSA9IFJFRElQUy5kcmFnLnN0eWxlLmJvcmRlckRpc2FibGVkO1xyXG4gICAgICBjdXJzb3IgPSAnYXV0byc7XHJcbiAgICAgIGVuYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gICAgXHJcbiAgICBcclxuICAgIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgZGl2Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWluIGxvb3AgdGhhdCBnb2VzIHRocm91Z2ggYWxsIERJViBlbGVtZW50c1xyXG4gICAgeyAgICBcclxuICAgICAgaWYgKHJlZ2V4RHJhZy50ZXN0KGRpdltpXS5jbGFzc05hbWUpKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgZWxlbWVudCBjb250YWlucyBcInJlZGlwcy1kcmFnXCIgY2xhc3MgbmFtZVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGVuYWJsZV9mbGFnID09PSAnaW5pdCcgfHwgZGl2W2ldLnJlZGlwcyA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHJlZmVyZW5jZSB0byB0aGUgRElWIGNvbnRhaW5lciAoaW5pdGlhbGl6YXRpb24gb3IgbmV3bHkgYWRkZWQgZWxlbWVudCB0byB0aGUgdGFibGUpIHRoaXMgcHJvcGVydHkgc2hvdWxkIG5vdCBiZSBjaGFuZ2VkIGluIGxhdGVyIGVsZW1lbnQgZW5hYmxlL2Rpc2FibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaXZbaV0ucmVkaXBzID0ge307ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZFxyXG4gICAgICAgICAgZGl2W2ldLnJlZGlwcy5jb250YWluZXIgPSBkcmFnQ29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbmFibGVfZmxhZyA9PT0gdHJ1ZSAmJiB0eXBlb2Yob3BhY2l0eSkgPT09ICdudW1iZXInKSAgICAgICAgICAgICAgICAvLyByZW1vdmUgb3BhY2l0eSBtYXNrXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLm9wYWNpdHkgPSAnJztcclxuICAgICAgICAgIGRpdltpXS5zdHlsZS5maWx0ZXIgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZW5hYmxlX2ZsYWcgPT09IGZhbHNlICYmIHR5cGVvZihvcGFjaXR5KSA9PT0gJ251bWJlcicpICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5IC8gMTAwO1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZWdpc3RlckV2ZW50cyhkaXZbaV0sIGVuYWJsZWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lciBmb3IgRElWIGVsZW1lbnRcclxuICAgICAgICBcclxuICAgICAgICBkaXZbaV0uc3R5bGUuYm9yZGVyU3R5bGUgPSBib3JkZXJTdHlsZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc3R5bGVzIGZvciBESVYgZWxlbWVudFxyXG4gICAgICAgIGRpdltpXS5zdHlsZS5jdXJzb3IgPSBjdXJzb3I7XHJcbiAgICAgICAgZGl2W2ldLnJlZGlwcy5lbmFibGVkID0gZW5hYmxlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGVuYWJsZWQgcHJvcGVydHkgdG8gdGhlIERJViBlbGVtZW50ICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGVuYWJsZV9mbGFnID09PSAnaW5pdCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXR0YWNoIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSBESVYgZWxlbWVudCBpbiBpbml0IHBoYXNlIG9ubHkgaWYgRElWIGVsZW1lbnQgaGFzIG92ZXJmbG93IG90aGVyIHRoYW4gZGVmYXVsdCB2YWx1ZSAndmlzaWJsZScgYW5kIHRoYXQgbWVhbnMgc2Nyb2xsYWJsZSBESVYgY29udGFpbmVyXHJcbiAgICAgIHtcclxuICAgICAgICBvdmVyZmxvdyA9IGdldFN0eWxlKGRpdltpXSwgJ292ZXJmbG93Jyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhc2sgZm9yIG92ZXJmbG93IHN0eWxlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG92ZXJmbG93ICE9PSAndmlzaWJsZScpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGlzIHNjcm9sbGFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBSRURJUFMuZXZlbnQuYWRkKGRpdltpXSwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgZm9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKGRpdltpXSwgJ3Bvc2l0aW9uJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbnRhaW5lciBib3ggc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgcGFnZSBzY3JvbGwgb2Zmc2V0IGZyb20gY2FsY3VsYXRpb24gaWYgbmVlZGVkKVxyXG4gICAgICAgICAgY2IgPSBib3hPZmZzZXQoZGl2W2ldLCBwb3NpdGlvbiwgZmFsc2UpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBESVYgY29udGFpbmVyIG9mZnNldCB3aXRoIG9yIHdpdGhvdXQgXCJwYWdlIHNjcm9sbFwiIGFuZCBleGNsdWRlZCBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGNvbnRlbnRcclxuICAgICAgICAgIGF1dG9zY3JvbGwgPSAhcmVnZXhOb0F1dG9zY3JvbGwudGVzdChkaXZbaV0uY2xhc3NOYW1lKTsgICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggZm9yIHJlZGlwcy1ub2F1dG9zY3JvbGwgb3B0aW9uXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2pdID0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRpdiA6IGRpdltpXSwgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgICAgb2Zmc2V0IDogY2IsICAgICAgICAgICAgICAgICAgLy8gYm94IG9mZnNldCBvZiB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgICAgbWlkc3RYIDogKGNiWzFdICsgY2JbM10pIC8gMiwgLy8gbWlkZGxlIFhcclxuICAgICAgICAgICAgbWlkc3RZIDogKGNiWzBdICsgY2JbMl0pIC8gMiwgLy8gbWlkZGxlIFlcclxuICAgICAgICAgICAgYXV0b3Njcm9sbCA6IGF1dG9zY3JvbGwgICAgICAgLy8gYXV0b3Njcm9sbCBlbmFibGVkIG9yIGRpc2FibGVkICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgdGJscyA9IGRpdltpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGFibGUnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgdGFibGVzIGluc2lkZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgdGJscy5sZW5ndGg7IGsrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCBnb2VzIHRocm91Z2ggZm91bmQgdGFibGVzIGluc2lkZSBzY3JvbGxhYmxlIGFyZWFcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGJsc1trXS5zY2EgPSBzY3JvbGxEYXRhLmNvbnRhaW5lcltqXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYSByZWZlcmVuY2UgdG8gdGhlIGNvcnJlc3BvbmRpbmcgc2Nyb2xsYWJsZSBhcmVhXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGorKzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNyZWFzZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBjb3VudGVyXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICAgXHJcbiAgfTtcclxuXHJcbiAgLy9NZXRob2QgcmV0dXJucyBzdHlsZSB2YWx1ZSBmb3IgcmVxdWVzdGVkIEhUTUwgZWxlbWVudCBhbmQgc3R5bGUgbmFtZS5cclxuICBnZXRTdHlsZSA9IGZ1bmN0aW9uIChlbCwgc3R5bGVfbmFtZSkgXHJcbiAge1xyXG4gICAgaWYgKGVsICYmIGVsLmN1cnJlbnRTdHlsZSkgXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBlbC5jdXJyZW50U3R5bGVbc3R5bGVfbmFtZV07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChlbCAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSkgXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsLCBudWxsKVtzdHlsZV9uYW1lXTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBmaW5kIHRoZSBmaXJzdCBwYXJlbnQgZWxlbWVudCBvZiBlbCB3aXRoIHRoZSB0YWcgbmFtZSB0YWdfbmFtZSBcclxuICBmaW5kUGFyZW50ID0gZnVuY3Rpb24gKHRhZ19uYW1lLCBlbCkgXHJcbiAge1xyXG4gICAgZWwgPSBlbC5wYXJlbnROb2RlOyAgICAgICAgICAgICAgICAgLy8gc2V0IFwiZWxcIiB0byB0aGUgbmV4dCBub2RlICh0byBwcmV2ZW50IGZpbmRpbmcgbm9kZSBpdHNlbGYpXHJcbiAgICBcclxuICAgIHdoaWxlIChlbCkgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGxvb3BcclxuICAgIHtcclxuICAgICAgaWYgKGVsLm5vZGVOYW1lID09PSB0YWdfbmFtZSkgICAgIC8vIG5vZGUgaXMgZm91bmRcclxuICAgICAge1xyXG4gICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9kZSBpcyBmb3VuZCBhbmQgbG9vcCBjYW4gYmUgZW5kZWRcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZWwgPSBlbC5wYXJlbnROb2RlOyAgICAgICAgICAgICAgIC8vIG1vdmUgb24gdG8gdGhlIHBhcmVudCBub2RlXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBlbDtcclxuICB9O1xyXG5cclxuICAvL0Z1bmN0aW9uIHJldHVybnMgYSBzdHJpbmcgaW4gd2hpY2ggYWxsIG9mIHRoZSBwcmVjZWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlIHNwYWNlIGhhcyBiZWVuIHJlbW92ZWQsIGFuZCBpbiB3aGljaCBhbGwgaW50ZXJuYWwgc2VxdWVuY2VzIG9mIHdoaXRlIGlzIHJlcGxhY2VkIHdpdGggb25lIHdoaXRlIHNwYWNlLlxyXG4gIG5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChzdHIpIFxyXG4gIHtcclxuICAgIGlmIChzdHIgIT09IHVuZGVmaW5lZCkgXHJcbiAgICB7XHJcbiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gc3RyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gbm9ybWFsaXplZCBzdHJpbmcgKHdpdGhvdXQgcHJlY2VkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXMpXHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHNldHMgb3BhY2l0eSB0byB0YWJsZSByb3cgb3IgZGVsZXRlcyByb3cgY29udGVudC5cclxuICAgKiBJbnB1dCBwYXJhbWV0ZXIgXCJlbFwiIGlzIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IG9yIHJlZmVyZW5jZSB0byB0aGUgY2xvbmVkIG1pbmkgdGFibGUgKHdoZW4gcm93IGlzIG1vdmVkKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ30gZWwgSWQgb2Ygcm93IGhhbmRsZXIgKGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIikgb3IgcmVmZXJlbmNlIHRvIGVsZW1lbnQgKHNvdXJjZSByb3cgb3IgbWluaSB0YWJsZSkuXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfFN0cmluZ30gb3BhY2l0eSBPcGFjaXR5IGxldmVsIChmcm9tIDAgdG8gMTAwKSBvciBcImVtcHR5XCIgKHRoZW4gY29udGVudCBvZiB0YWJsZSBjZWxscyBpbiByb3cgd2lsbCBiZSBkZWxldGVkIC0gaW4gdGhhdCBjYXNlIGZpcnN0IHBhcmFtZXRlciBzaG91bGQgYmUgVFIpLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbY29sb3JdIEJhY2tncm91bmQgY29sb3IuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZyBsaWJyYXJ5XHJcbiAgICogcmQgPSBSRURJUFMuZHJhZztcclxuICAgKlxyXG4gICAqIC8vIG1ha2Ugcm93IHNlbWktdHJhbnNwYXJlbnRcclxuICAgKiByZC5yb3dPcGFjaXR5KHJvd09iaiwgNTApO1xyXG4gICAqXHJcbiAgICogLy8gc2V0IHJvdyBhcyBlbXB0eSBhbmQgd2hpdGUgKGNvbnRlbnQgaW4gdGFibGUgY2VsbHMgd2lsbCBiZSBkZWxldGVkKVxyXG4gICAqIHJkLnJvd09wYWNpdHkocm93T2JqLCAnZW1wdHknLCAnV2hpdGUnKTtcclxuICAgKi9cclxuICByb3dPcGFjaXR5ID0gZnVuY3Rpb24gKGVsLCBvcGFjaXR5LCBjb2xvcikgXHJcbiAge1xyXG4gICAgdmFyIHRkTm9kZUxpc3Q7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWJsZSBjZWxsc1xyXG4gICAgdmFyIGksIGo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHZhcmlhYmxlc1xyXG4gICAgXHJcbiAgICBpZiAodHlwZW9mKGVsKSA9PT0gJ3N0cmluZycpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGlucHV0IHBhcmFtZXRlciBpcyBzdHJpbmcgKHRoaXMgc2hvdWxkIGJlIGVsZW1lbnQgaWQpLCB0aGVuIHNldCBlbGVtZW50IHJlZmVyZW5jZVxyXG4gICAge1xyXG4gICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKTtcclxuICAgICAgZWwgPSBmaW5kUGFyZW50KCdUQUJMRScsIGVsKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWwgY291bGQgYmUgcmVmZXJlbmNlIG9mIHRoZSBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCIgKHJvdyBoYW5kbGVyKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoZWwubm9kZU5hbWUgPT09ICdUUicpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsIGlzIFRSLCB0aGVuIHNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIGVhY2ggY2VsbCAoaWYgbmVlZGVkKSBhbmQgYXBwbHkgb3BhY2l0eVxyXG4gICAge1xyXG4gICAgICB0ZE5vZGVMaXN0ID0gZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RkJyk7ICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IHRhYmxlIGNlbGwgZnJvbSB0aGUgcm93XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGROb2RlTGlzdC5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgRElWIGVsZW1lbnRcclxuICAgICAge1xyXG4gICAgICAgIHRkTm9kZUxpc3RbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3IgPyBjb2xvciA6ICcnOyAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciB0byB0YWJsZSBjZWxsIGlmIG5lZWRlZFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChvcGFjaXR5ID09PSAnZW1wdHknKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBvcGFjaXR5IGlzIHNldCB0byBcImVtcHR5XCIgdGhlbiBkZWxldGUgY2VsbCBjb250ZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGROb2RlTGlzdFtpXS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBzZXQgb3BhY2l0eSB0byBldmVyeSBjaGlsZCBub2RlIGluIHRhYmxlIGNlbGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzLmxlbmd0aDsgaisrKSAgIC8vIGxvb3AgdGhyb3VnaCBjaGlsZCBub2RlcyBvZiBldmVyeSB0YWJsZSBjZWxsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIGFwcGx5IHN0eWxlcyBvbmx5IHRvIEVsZW1lbnQgbm9kZXMgKG5vdCB0ZXh0IG5vZGVzLCBhdHRyaWJ1dGVzIC4uLiksIGh0dHA6Ly9jb2RlLnN0ZXBoZW5tb3JsZXkub3JnL2phdmFzY3JpcHQvZG9tLW5vZGV0eXBlLWNvbnN0YW50cy9cclxuICAgICAgICAgICAgaWYgKHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlc1tqXS5ub2RlVHlwZSA9PT0gMSkgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXNbal0uc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7XHJcbiAgICAgICAgICAgICAgdGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzW2pdLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gcm93IGlzIG1vdmVkIHRoZW4gUkVESVBTLmRyYWcgd2lsbCBjcmVhdGUgbWluaSB0YWJsZSB3aXRoIG9uZSByb3csIGFsbCBicm93c2VycyAoSUU4LCBPcGVyYTExLCBGRjMuNiwgQ2hyb21lMTApIGNhbiBzZXQgb3BhY2l0eSB0byB0aGUgdGFibGVcclxuICAgIHtcclxuICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIEZGLCBDaHJvbWUsIE9wZXJhXHJcbiAgICAgIGVsLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknOyAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBJRVxyXG4gICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvciA/IGNvbG9yIDogJyc7ICAgICAgICAgICAgICAvLyBzZXQgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAvKiBwdWJsaWMgcHJvcGVydGllcyAqL1xyXG4gICAgb2JqIDogb2JqLCAgICAgICAgICAgICAgICAgIC8vVHlwZTogSFRNTEVsZW1lbnQgLSBDdXJyZW50bHkgbW92ZWQgRElWIGVsZW1lbnQuIFJlZmVyZW5jZSB0byB0aGUgUkVESVBTLmRyYWcub2JqIChkcmFnZ2VkIERJViBlbGVtZW50KSBpcyB2aXNpYmxlIGFuZCBjYW4gYmUgdXNlZCBpbiBhcHByb3ByaWF0ZSBldmVudCBoYW5kbGVycy5cclxuICAgIG9iak9sZCAgOiBvYmpPbGQsICAgICAgICAgICAvL1R5cGU6IEhUTUxFbGVtZW50IC0gUHJldmlvdXNseSBtb3ZlZCBESVYgZWxlbWVudCAoYmVmb3JlIGNsaWNrZWQgb3IgY2xvbmVkKS4gSW4gY2FzZSB3aGVuIERJViBlbGVtZW50IGlzIGNsb25lZCwgb2JqIGlzIHJlZmVyZW5jZSBvZiBjdXJyZW50IChjbG9uZWQpIERJViBlbGVtZW50IHdoaWxlIG9iak9sZCBpcyByZWZlcmVuY2Ugb2YgYm90dG9tIChvcmlnaW4pIERJViBlbGVtZW50LlxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgY29udGFpbnMgcmVmZXJlbmNlIHRvIHByZXZpb3VzLCBzb3VyY2UsIGN1cnJlbnQgYW5kIHRhcmdldCB0YWJsZSBjZWxsLiBUZCByZWZlcmVuY2VzIGNhbiBiZSB1c2VkIGluIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQuc291cmNlIC0gcmVmZXJlbmNlIHRvIHNvdXJjZSB0YWJsZSBjZWxsIChzZXQgaW4gb25tb3VzZWRvd24pPC9saT5cclxuICAgICAqIDxsaT57SFRNTEVsZW1lbnR9IHRkLnByZXZpb3VzIC0gcmVmZXJlbmNlIHRvIHByZXZpb3VzIHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCk8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQuY3VycmVudCAtIHJlZmVyZW5jZSB0byBjdXJyZW50IHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCk8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQudGFyZ2V0IC0gcmVmZXJlbmNlIHRvIHRhcmdldCB0YWJsZSBjZWxsICh0YXJnZXQgdGFibGUgY2VsbCBpcyBzZXQgaW4gYSBtb21lbnQgb2YgZHJvcHBpbmcgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbCk8L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICB0ZCA6IHRkLFxyXG4gICAgLyoqXHJcbiAgICAgKiBIb3ZlciBvYmplY3QgY29udGFpbnMgNCBwcm9wZXJ0aWVzOiBjb2xvclRkLCBjb2xvclRyLCBib3JkZXJUZCBhbmQgYm9yZGVyVHIuIGNvbG9yVGQgYW5kIGNvbG9yVHIgZGVmaW5lIGhvdmVyIGNvbG9yIGZvciBESVYgZWxlbWVudCBhbmQgdGFibGUgcm93LlxyXG4gICAgICogSWYgYm9yZGVyVGQgaXMgZGVmaW5lZCwgdGhlbiBoaWdobGlnaHRlZCBjZWxsIHdpbGwgaGF2ZSBib3JkZXIuIElmIGJvcmRlclRyIGlzIGRlZmluZWQgdGhlbiBoaWdobGlnaHRlZCByb3cgd2lsbCBoYXZlIG9ubHkgdG9wIG9yIGJvdHRvbSBib3JkZXIuXHJcbiAgICAgKiBUb3AgYm9yZGVyIHNob3dzIHRoYXQgcm93IHdpbGwgYmUgcGxhY2VkIGFib3ZlIGN1cnJlbnQgcm93LCB3aGlsZSBib3R0b20gYm9yZGVyIHNob3dzIHRoYXQgY3VycmVudCByb3cgd2lsbCBiZSBwbGFjZWQgYmVsb3cgY3VycmVudCByb3cuXHJcbiAgICAgKiBTb21lIGJyb3dzZXJzIG1heSBoYXZlIHByb2JsZW0gd2l0aCBcImJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZVwiIHRhYmxlIHN0eWxlIGFuZCBib3JkZXIgaGlnaGxpZ2h0aW5nLlxyXG4gICAgICogSW4gdGhhdCBjYXNlIHRyeSB3aXRob3V0IGNvbGxhcHNpbmcgVEQgYm9yZGVycyAoZS5nIHNldCBcImJvcmRlci1zcGFjaW5nOjBcIiBhbmQgc21hbGxlciBcInRkLmJvcmRlci13aWR0aFwiKS5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICogQG5hbWUgUkVESVBTLmRyYWcjaG92ZXJcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBzZXQgXCIjOUJCM0RBXCIgYXMgaG92ZXIgY29sb3IgZm9yIFREXHJcbiAgICAgKiBSRURJUFMuZHJhZy5ob3Zlci5jb2xvclRkID0gJyM5QkIzREEnO1xyXG4gICAgICpcclxuICAgICAqIC8vIG9yIHNldCBcIkxpbWVcIiBhcyBob3ZlciBjb2xvciBmb3IgVFJcclxuICAgICAqIFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVHIgPSAnTGltZSc7XHJcbiAgICAgKlxyXG4gICAgICogLy8gc2V0IHJlZCBib3JkZXIgZm9yIGhpZ2hsaWdodGVkIFREXHJcbiAgICAgKiBSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUZCA9ICcycHggc29saWQgcmVkJztcclxuICAgICAqL1xyXG4gICAgaG92ZXIgOiBob3ZlcixcclxuICAgIC8qKlxyXG4gICAgICogU2Nyb2xsIG9iamVjdCBjb250YWlucyBwcm9wZXJ0aWVzIG5lZWRlZCBmb3IgYXV0b3Njcm9sbCBvcHRpb24uXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IHNjcm9sbC5lbmFibGUgLSBFbmFibGUgLyBkaXNhYmxlIGF1dG9zY3JvbGwgb3B0aW9uLiBCeSBkZWZhdWx0IGF1dG9zY3JvbGwgaXMgZW5hYmxlZCBidXQgaXQgY2FuIGJlIHVzZWZ1bGwgaW4gc29tZSBjYXNlcyB0byBjb21wbGV0ZWx5IHR1cm4gb2ZmIGF1dG9zY3JvbGwgKGlmIGFwcGxpY2F0aW9uIGRvZXNuJ3QgbmVlZCBhdXRvc2Nyb2xsaW5nIHBhZ2Ugbm9yIGF1dG9zY3JvbGxpbmcgRElWIGNvbnRhaW5lcikuIFR1cm5pbmcgb2ZmIGF1dG9zY3JvbGwgd2lsbCBzcGVlZCB1cCBhcHBsaWNhdGlvbiBiZWNhdXNlIGV4dHJhIGNhbGN1bGF0aW9ucyB3aWxsIGJlIHNraXBwZWQuIERlZmF1bHQgaXMgdHJ1ZTwvbGk+XHJcbiAgICAgKiA8bGk+e0ludGVnZXJ9IHNjcm9sbC5ib3VuZCAtIEJvdW5kIHNpemUgZm9yIHRyaWdnZXJpbmcgcGFnZSBhdXRvU2Nyb2xsIG9yIGF1dG9TY3JvbGwgb2Ygc2Nyb2xsYWJsZSBESVYgY29udGFpbmVyLiBEZWZhdWx0IHZhbHVlIGlzIDI1IChweCkuPC9saT5cclxuICAgICAqIDxsaT57SW50ZWdlcn0gc2Nyb2xsLnNwZWVkIC0gQXV0b3Njcm9sbCBwYXVzZSBpbiBtaWxsaXNlY29uZHMuIERlZmF1bHQgdmFsdWUgaXMgMjAgKG1pbGxpc2Vjb25kcykuPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgc2Nyb2xsIDogc2Nyb2xsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgY29udGFpbnMgc3R5bGVzIChjb2xvcnMsIG9wYWNpdHkgbGV2ZWxzKSBmb3IgRElWIGVsZW1lbnRzIGFuZCB0YWJsZSByb3dzLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLmJvcmRlckVuYWJsZWQgLSBCb3JkZXIgc3R5bGUgZm9yIGVuYWJsZWQgRElWIGVsZW1lbnRzLiBEZWZhdWx0IGlzIFwic29saWRcIi48L2xpPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLmJvcmRlckRpc2FibGVkIC0gQm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBESVYgZWxlbWVudHMuIERlZmF1bHQgaXMgXCJkb3R0ZWRcIi48L2xpPlxyXG4gICAgICogPGxpPntJbnRlZ2VyfSBzdHlsZS5vcGFjaXR5RGlzYWJsZWQgLSBPcGFjaXR5IGxldmVsIGZvciBkaXNhYmxlZCBlbGVtZW50cy4gRGVmYXVsdCBpcyBlbXB0eSBzdHJpbmcuPC9saT5cclxuICAgICAqIDxsaT57U3RyaW5nfSBzdHlsZS5yb3dFbXB0eUNvbG9yIC0gXCJFbXB0eSByb3dcIiBjb2xvci4gV2hlbiBsYXN0IHJvdyBmcm9tIHRhYmxlIGlzIG1vdmVkIHRoZW4gdGhpcyBjb2xvciB3aWxsIGJlIHNldCB0byBcImVtcHR5IHJvd1wiLiBEZWZhdWx0IGlzIFwid2hpdGVcIi48L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBkZWZpbmUgYm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICogUkVESVBTLmRyYWcuc3R5bGUuYm9yZGVyRGlzYWJsZWQgPSAnZGFzaGVkJztcclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBzdHlsZSA6IHN0eWxlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgZGVmaW5lcyBzZXZlcmFsIHJ1bGVzIHJlbGF0ZWQgdG8gY2xvbmluZyBESVYgZWxlbWVudHMgbGlrZSBlbmFibGUgY2xvbmluZyB3aXRoIHNoaWZ0IGtleSwgZW5hYmxlIHJldHVybmluZyBjbG9uZWQgRElWIGVsZW1lbnQgdG8gaXRzIHNvdXJjZSBhbmQgc28gb24uXHJcbiAgICAgKiBJbnN0ZWFkIG9mIG1vdmluZywgRElWIGVsZW1lbnQgLyByb3cgd2lsbCBiZSBjbG9uZWQgYW5kIHJlYWR5IGZvciBkcmFnZ2luZy5cclxuICAgICAqIEp1c3QgcHJlc3MgU0hJRlQga2V5IGFuZCB0cnkgdG8gZHJhZyBESVYgZWxlbWVudCAvIHJvdy5cclxuICAgICAqIGlmIGNsb25lLnNlbmRCYWNrIHByb3BlcnR5IHNldCB0byB0cnVlLCBjbG9uZWQgRElWIGVsZW1lbnQgd2lsbCBiZSBkZWxldGVkIHdoZW4gZHJvcHBlZCB0byB0aGUgY2VsbCBjb250YWluaW5nIGl0cyBzb3VyY2UgY2xvbmUgZWxlbWVudC5cclxuICAgICAqIElmIGV4aXN0cywgXCJjbGltaXRcIiBjbGFzcyB3aWxsIGJlIHVwZGF0ZWQgKGluY3JlYXNlZCBieSAxKS5cclxuICAgICAqIGNsb25lLmRyb3AgcHJvcGVydHkgZGVmaW5lcyBwbGFjaW5nIGNsb25lZCBESVYgZWxlbWVudCAoZHJvcHBlZCBvdXRzaWRlIGFueSB0YWJsZSkgdG8gdGhlIGxhc3QgbWFya2VkIHBvc2l0aW9uLlxyXG4gICAgICogSWYgdGhpcyBwcm9wZXJ0eSBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGNsb25lZCBESVYgZWxlbWVudCB3aWxsIGJlIGFsd2F5cyBwbGFjZWQgdG8gdGhlIHRhYmxlIGNlbGwuXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLmtleURpdiAtIElmIHNldCB0byB0cnVlLCBhbGwgRElWIGVsZW1lbnRzIG9uIHRhYmxlcyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5rZXlSb3cgLSBJZiBzZXQgdG8gdHJ1ZSwgdGFibGUgcm93cyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5zZW5kQmFjayAtIElmIHNldCB0byB0cnVlLCBjbG9uZWQgZWxlbWVudCBjYW4gYmUgcmV0dXJuZWQgdG8gaXRzIHNvdXJjZS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5kcm9wIC0gSWYgc2V0IHRvIHRydWUsIGNsb25lZCBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIHBsYWNlZCB0byB0aGUgdGFibGUgKHRvIHRoZSBsYXN0IHBvc3NpYmxlIGNlbGwpIG5vIG1hdHRlciBpZiBpcyBkcm9wcGVkIG91dHNpZGUgdGhlIHRhYmxlLiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGNsb25lIDogY2xvbmUsXHJcbiAgICAvKiBwdWJsaWMgbWV0aG9kcyAoZG9jdW1lbnRlZCBpbiBtYWluIGNvZGUpICovXHJcbiAgICBpbml0IDogaW5pdCxcclxuICAgIGVuYWJsZURyYWcgOiBlbmFibGVEcmFnLFxyXG4gICAgZW5hYmxlRGl2cyA6IGVuYWJsZURpdnMsXHJcbiAgICByb3dPcGFjaXR5IDogcm93T3BhY2l0eSxcclxuICAgIGdldFNjcm9sbFBvc2l0aW9uIDogZ2V0U2Nyb2xsUG9zaXRpb24sXHJcbiAgICBnZXRTdHlsZSA6IGdldFN0eWxlLFxyXG4gICAgZmluZFBhcmVudCA6IGZpbmRQYXJlbnQsXHJcbiAgICBldmVudCA6IGV2ZW50XHJcbiAgfTtcclxufSgpKTtcclxuXHJcblxyXG5pZiAoIVJFRElQUy5ldmVudCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgUkVESVBTLmV2ZW50IGlzbid0IGFscmVhZHkgZGVmaW5lZCAoZnJvbSBvdGhlciBSRURJUFMgZmlsZSlcclxue1xyXG4gIFJFRElQUy5ldmVudCA9IChmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICB2YXIgYWRkO1xyXG4gICAgdmFyIHJlbW92ZTtcclxuXHJcbiAgICBhZGQgPSBmdW5jdGlvbiAob2JqLCBldmVudE5hbWUsIGhhbmRsZXIpICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXJcclxuICAgIHtcclxuICAgICAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgZmFsc2UpOyAgICAgICAgLy8gKGZhbHNlKSByZWdpc3RlciBldmVudCBpbiBidWJibGUgcGhhc2UgKGV2ZW50IHByb3BhZ2F0ZXMgZnJvbSBmcm9tIHRhcmdldCBlbGVtZW50IHVwIHRvIHRoZSBET00gcm9vdClcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmpbJ29uJyArIGV2ZW50TmFtZV0gPSBoYW5kbGVyO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIChvYmosIGV2ZW50TmFtZSwgaGFuZGxlcikgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBldmVudCBsaXN0ZW5lclxyXG4gICAge1xyXG4gICAgICBpZiAob2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAob2JqLmRldGFjaEV2ZW50KSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5kZXRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBoYW5kbGVyKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqWydvbicgKyBldmVudE5hbWVdID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4geyBhZGQ6IGFkZCwgcmVtb3ZlOiByZW1vdmUgfTtcclxuICB9KCkpO1xyXG59IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgcmVkaXBzID0ge307XHJcblxyXG5yZWRpcHMuaW5pdCA9IGZ1bmN0aW9uICgpIFxyXG57XHJcbiAgdmFyIHJkID0gUkVESVBTLmRyYWc7ICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZyBsaWJyYXJ5XHJcblxyXG4gIHJkLmluaXQoKTtcclxuXHJcbiAgLy9yZC5jbG9uZS5rZXlEaXYgPSByZC5jbG9uZS5rZXlSb3cgPSB0cnVlOyAgIC8vIGVuYWJsZSBjbG9uZSBlbGVtZW50IGFuZCBjbG9uZSByb3cgd2l0aCBzaGlmdCBrZXlcclxuXHJcbiAgcmQuZXZlbnQucm93RHJvcHBlZCA9IGZ1bmN0aW9uIChuZXdQYXJlbnRSb3cpXHJcbiAge1xyXG4gICAgdmFyIG1vdmVkSUQgICAgICAgPSBwYXJzZUludChyZC5vYmpPbGQuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gICAgdmFyIG5ld1BhcmVudElEICAgPSBwYXJzZUludChuZXdQYXJlbnRSb3cuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gICAgdmFyIG9sZFBhcmVudElEICAgPSBmaW5kUGFyZW50SW5UcmVlKG1vdmVkSUQpLmlkO1xyXG5cclxuICAgIG1vdmVBc3NlbWJseShtb3ZlZElELCBuZXdQYXJlbnRJRCwgb2xkUGFyZW50SUQpOyAgICAgICAgICAgICAvL21vdmUgdGhlIG5vZGUgaW4gdGhlIGRhdGEsIGluY2x1ZGluZyBhbGwgZGVzY2VuZGFudCBub2Rlc1xyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd0Ryb3BwZWRTb3VyY2UgPSBmdW5jdGlvbiAoKSAgICAgICAgIC8vIHJvdyB3YXMgZHJvcHBlZCB0byB0aGUgc291cmNlIC0gZXZlbnQgaGFuZGxlciwgbWluaSB0YWJsZSAoY2xvbmVkIHJvdykgd2lsbCBiZSBkZWxldGVkIGFuZCBzb3VyY2Ugcm93IHNob3VsZCByZXR1cm4gdG8gb3JpZ2luYWwgc3RhdGVcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iak9sZCwgMTAwKTsgICAgICAgICAgICAgICAgLy8gbWFrZSBzb3VyY2Ugcm93IGNvbXBsZXRlbHkgdmlzaWJsZSAobm8gb3BhY2l0eSlcclxuICB9O1xyXG5cclxuICByZC5ldmVudC5yb3dNb3ZlZCA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgcmQucm93T3BhY2l0eShyZC5vYmosIDg1KTsgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBtb3ZlZCByb3csIHJkLm9iaiBpcyByZWZlcmVuY2Ugb2YgY2xvbmVkIHJvdyAobWluaSB0YWJsZSlcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAyMCwgJ1doaXRlJyk7ICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3Igc291cmNlIHJvdyBhbmQgY2hhbmdlIHNvdXJjZSByb3cgYmFja2dyb3VuZCBjb2xvciwgb2JqLm9iak9sZCBpcyByZWZlcmVuY2Ugb2Ygc291cmNlIHJvd1xyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd0NsaWNrZWQgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd05vdE1vdmVkICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd0Nsb25lZCAgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd05vdENsb25lZCA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd0RlbGV0ZWQgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICByZC5ldmVudC5yb3dVbmRlbGV0ZWQgPSBmdW5jdGlvbiAoKSAgICAgICAgICAgICAvLyByb3cgaXMgdW5kZWxldGVkIChyZXR1cm4gc291cmNlIHJvdyB0byBvcmlnaW5hbCBzdGF0ZSlcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iak9sZCwgMTAwKTtcclxuICB9O1xyXG59O1xyXG4iLCJ2YXIgc2Nyb2xsQmFyV2lkdGg7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpXHJcbntcclxuICBzY3JvbGxCYXJXaWR0aCA9IGdldFNjcm9sbEJhcldpZHRoKCk7XHJcbiAgXHJcbiAgZG9jdW1lbnQub25rZXlkb3duID0gY2hlY2tLZXk7IFxyXG4gIFxyXG4gICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvcHJvamVjdHMnfSkuZG9uZShmdW5jdGlvbihkYXRhKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZWFkIHByb2plY3RzIGZyb20gdGhlIHNlcnZlclxyXG4gIHsgXHJcbiAgICBwcm9qZWN0cyA9IGRhdGE7IFxyXG4gICAgXHJcbiAgICAvL1RPRE86IHJlYWQgZmllbGRzIGZyb20gdGhlIGRhdGFiYXNlIChwdXQgdGhlbSBpbiB0aGUgdHJlZT8pXHJcbiAgXHJcbiAgICAkKCcjaGVhZGVyJykuaHRtbChnZW5lcmF0ZUhlYWRlck1hcmt1cChwcm9qZWN0cy5wcm9qZWN0cykpO1xyXG4gICAgXHJcbiAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS5rZXl1cChmdW5jdGlvbihlKVxyXG4gICAge1xyXG4gICAgICBpZihlLmtleUNvZGUgPT0gRU5URVJfS0VZKVxyXG4gICAgICB7XHJcbiAgICAgICAgY3JlYXRlTmV3UHJvamVjdCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBpbml0UHJvamVjdEFjdGlvbnMoKVxyXG57XHJcbiAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLmtleXVwKGZ1bmN0aW9uKGUpXHJcbiAge1xyXG4gICAgaWYoZS5rZXlDb2RlID09IEVOVEVSX0tFWSlcclxuICAgIHtcclxuICAgICAgcHJvamVjdEFjdGlvbkVudGVyUHJlc3NlZCgpO1xyXG4gICAgfVxyXG4gIH0pOyBcclxufVxyXG5cclxudmFyIGdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24oKSBcclxue1xyXG4gIHZhciBkaXYsIHdpZHRoO1xyXG4gIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGRpdi5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT1cIndpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDotNTBweDt0b3A6LTUwcHg7b3ZlcmZsb3c6YXV0bztcIj48ZGl2IHN0eWxlPVwid2lkdGg6MXB4O2hlaWdodDoxMDBweDtcIj48L2Rpdj48L2Rpdj4nO1xyXG4gIGRpdiA9IGRpdi5maXJzdENoaWxkO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICB3aWR0aCA9IGRpdi5vZmZzZXRXaWR0aCAtIGRpdi5jbGllbnRXaWR0aDtcclxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XHJcbiAgcmV0dXJuIHdpZHRoO1xyXG59OyIsInZhciBLRVlfVVBfQVJST1cgPSAzODtcclxudmFyIEtFWV9ET1dOX0FSUk9XID0gNDA7XHJcbnZhciBLRVlfTEVGVF9BUlJPVyA9IDM3O1xyXG52YXIgS0VZX1JJR0hUX0FSUk9XID0gMzk7XHJcblxyXG5mdW5jdGlvbiBjaGVja0tleShlKSBcclxue1xyXG4gIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuXHJcbiAgaWYgKGUua2V5Q29kZSA9PSBLRVlfVVBfQVJST1cpIFxyXG4gIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBwcmV2Um93ID0gJChnZXRBbmNlc3RvclRhZyhkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndHInKSkucHJldigpWzBdO1xyXG4gICAgXHJcbiAgICBpZihwcmV2Um93KVxyXG4gICAge1xyXG4gICAgICAkKCcjJyArIGdldE5leHRFbGVtZW50SUQocHJldlJvdykpLmZvY3VzKCk7XHJcbiAgICB9ICAgICAgXHJcbiAgfVxyXG4gIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfRE9XTl9BUlJPVykgXHJcbiAge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIG5leHRSb3cgPSAkKGdldEFuY2VzdG9yVGFnKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0cicpKS5uZXh0KClbMF07XHJcbiAgICBcclxuICAgIGlmKG5leHRSb3cpXHJcbiAgICB7XHJcbiAgICAgICQoJyMnICsgZ2V0TmV4dEVsZW1lbnRJRChuZXh0Um93KSkuZm9jdXMoKTtcclxuICAgIH0gICAgICAgXHJcbiAgfVxyXG4gIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfUklHSFRfQVJST1cpIFxyXG4gIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoZ2V0QW5jZXN0b3JUYWcoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RkJykpLm5leHQoKS5maW5kKCdpbnB1dCcpLmZvY3VzKCk7ICBcclxuICB9XHJcbiAgZWxzZSBpZiAoZS5rZXlDb2RlID09IEtFWV9MRUZUX0FSUk9XKSBcclxuICB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKGdldEFuY2VzdG9yVGFnKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0ZCcpKS5wcmV2KCkuZmluZCgnaW5wdXQnKS5mb2N1cygpOyAgXHJcbiAgfSAgICBcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TmV4dEVsZW1lbnRJRChuZXdSb3cpXHJcbntcclxuICB2YXIgaWQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlkOyAgXHJcbiAgaWYoaWQuaW5kZXhPZignbm9kZUlucHV0JykgPiAtMSlcclxuICB7XHJcbiAgICByZXR1cm4gJ25vZGVJbnB1dCcgKyBuZXdSb3cuaWQucmVwbGFjZSgncm93aWQnLCcnKTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHZhciBjbGFzc2VzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgdmFyIGMgPSBjbGFzc2VzW2ldO1xyXG5cclxuICAgICAgaWYoYy5pbmRleE9mKCdmaWVsZElucHV0JykgPiAtMSAmJiBjICE9ICdmaWVsZElucHV0JylcclxuICAgICAge1xyXG4gICAgICAgIHZhciBmaWVsZE5hbWUgPSBjLnJlcGxhY2UoJ2ZpZWxkSW5wdXQnLCAnJyk7XHJcbiAgICAgICAgcmV0dXJuIGZpZWxkTmFtZSArIG5ld1Jvdy5pZC5yZXBsYWNlKCdkYXRhcm93aWQnLCcnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gICBcclxufSIsInZhciBERUZBVUxUX05PREVfSU5QVVRfV0lEVEggPSAzOTA7XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVNwcmVhZFNoZWV0TWFya3VwKClcclxue1xyXG4gIHJldHVybiAnPGRpdiBpZD1cInNwcmVhZFNoZWV0Vmlld1wiPicgK1xyXG4gICAgICAgICAgJzxkaXYgaWQ9XCJwcm9qZWN0LWFjdGlvbi1jb250YWluZXJcIj48L2Rpdj4nICtcclxuICAgICAgICAgICc8ZGl2IGlkPVwiZmllbGRzLWhlYWRlci1yb3dcIj48L2Rpdj4nICtcclxuICAgICAgICAgICc8ZGl2IGlkPVwicmVkaXBzLWRyYWdcIj48L2Rpdj4nICtcclxuICAgICAgICAgICc8ZGl2IGlkPVwiZGF0YS1jb250YWluZXJcIiBvbnNjcm9sbD1cImhhbmRsZURhdGFTY3JvbGwoKVwiPjwvZGl2PicgK1xyXG4gICAgICAgICAnPC9kaXY+JztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVIZWFkZXJNYXJrdXAocHJvamVjdHMpXHJcbntcclxuICB2YXIgbWFya3VwID0gJzxzZWxlY3QgaWQ9XCJwcm9qZWN0U2VsZWN0b3JcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIG9uY2hhbmdlPVwic2VsZWN0UHJvamVjdCgpXCI+J1xyXG4gICsgJzxvcHRpb24gaWQ9XCJzZWxlY3RQcm9qZWN0T3B0aW9uXCIgdmFsdWU9XCIwXCI+U2VsZWN0IFByb2plY3QuLi48L29wdGlvbj4nO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgcHJvamVjdHMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgbWFya3VwICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIHByb2plY3RzW2ldLmlkICsgJ1wiPicgKyBwcm9qZWN0c1tpXS5uYW1lICsgJzwvb3B0aW9uPic7XHJcbiAgfVxyXG5cclxuICBtYXJrdXAgKz0gJzxvcHRpb24gaWQ9XCJuZXdQcm9qZWN0T3B0aW9uXCIgdmFsdWU9XCItMVwiPkNyZWF0ZSBOZXcgUHJvamVjdC4uLjwvb3B0aW9uPjwvc2VsZWN0PidcclxuICArICc8aW5wdXQgaWQ9XCJlZGl0TmV3UHJvamVjdE5hbWVJbnB1dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+PC9pbnB1dD4nXHJcbiAgKyAnPGEgaHJlZj1cIiNcIiBpZD1cInNhdmUtZGF0YWJhc2UtYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBvbmNsaWNrPVwiUHJvamVjdC5zYXZlVG9EYXRhYmFzZSgpXCI+U2F2ZSB0byBEYXRhYmFzZTwvYT4nXHJcbiAgKyAnPGEgaHJlZj1cIiNcIiBpZD1cInN3aXRjaFZpZXdCdXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIG9uY2xpY2s9XCJQcm9qZWN0LnN3aXRjaFZpZXcoKVwiPlN3aXRjaCBWaWV3PC9hPic7XHJcbiAgLy9tYXJrdXAgKz0gJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBpZD1cInNhdmUtZmlsZS1idXR0b25cIiBvbmNsaWNrPVwic2F2ZUxvY2FsbHkoKVwiPlNhdmUgYXMgRmlsZTwvYT4nO1xyXG4gIFxyXG4gIHJldHVybiBtYXJrdXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUHJvamVjdFNlbGVjdG9yTWFya3VwKClcclxue1xyXG4gIHJldHVybiAnPHRhYmxlPjx0ciBpZD1cImhlYWRlclJvd1wiPjx0cj48ZGl2IGlkPVwicHJvamVjdC1zZWxlY3QtY29udGFpbmVyXCI+J1xyXG4gICsgJzxzZWxlY3QgaWQ9XCJwcm9qZWN0QWN0aW9uU2VsZWN0b3JcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIG9uY2hhbmdlPVwiaGFuZGxlUHJvamVjdEFjdGlvbigpXCI+PG9wdGlvbiB2YWx1ZT1cImJsYW5rXCI+PC9vcHRpb24+J1xyXG4gICsgJzxvcHRpb24gdmFsdWU9XCJhZGRGaWVsZFwiPkFkZCBGaWVsZDwvb3B0aW9uPidcclxuICArICc8L3NlbGVjdD4nXHJcbiAgKyAnPGlucHV0IGlkPVwicHJvamVjdEFjdGlvbklucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj48L2lucHV0PidcclxuICArICc8L2Rpdj48L3RyPjx0YWJsZT4nOyBcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVGaWVsZHNSb3dNYXJrdXAoKVxyXG57ICBcclxuICB2YXIgbWFya3VwID0gJzx0YWJsZSBpZD1cImZpZWxkSGVhZGVyVGFibGVcIj48dHIgaWQ9XCJmaWVsZEhlYWRlclJvd1wiPic7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLmZpZWxkcy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgIC8vYWRkIHRhYmxlIGhlYWRlcnMgd2l0aCB0aGUgZmllbGQgbmFtZXNcclxuICB7XHJcbiAgICBtYXJrdXAgKz0gZ2V0RmllbGRIZWFkZXJNYXJrdXAodHJlZS5maWVsZHNbaV0ubmFtZSwgaSk7XHJcbiAgfVxyXG5cclxuICBtYXJrdXAgKz0gJzwvdHI+PC90YWJsZT4nO1xyXG4gIHJldHVybiBtYXJrdXA7ICBcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVUcmVlTWFya3VwKClcclxue1xyXG4gIHZhciBtYXJrdXAgPSAnPHRhYmxlIGlkPVwidHJlZVRhYmxlXCI+JztcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspICAgICAgICAvL2FkZCByb3cgZm9yIGVhY2ggbm9kZVxyXG4gIHtcclxuICAgIG1hcmt1cCArPSBhZGRSb3codHJlZS5jaGlsZHJlbltpXSwgMCwgJycsIDApO1xyXG4gIH1cclxuXHJcbiAgbWFya3VwICs9ICc8L3RhYmxlPic7XHJcbiAgcmV0dXJuIG1hcmt1cDtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkUm93KG5vZGUpICAgICAgIC8vYWRkIG5vZGUgYW5kIGRhdGEgaW5wdXQgZm9yIGVhY2ggZmllbGRcclxue1xyXG4gIHZhciBtYXJrdXAgPSAnJztcclxuICB2YXIgZGVwdGhBZGp1c3RtZW50ID0gKG5vZGUuZGVwdGgtMSkgKiAxMDtcclxuXHJcbiAgdmFyIGRyYWdIYW5kbGUgPSAnPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHB1bGwtcmlnaHRcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tbW92ZVwiPjwvaT48L2Rpdj4nO1xyXG4gIHZhciBkZWxldGVCdXR0b24gPSAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cInB1bGwtcmlnaHQgYnRuIGJ0bi1kYW5nZXIgYnRuLXhzIGRlbGV0ZS1idXR0b25cIiBvbmNsaWNrPVwiZGVsZXRlTm9kZSgnICsgbm9kZS5pZCArICcpXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZVwiPjwvaT48L2E+JztcclxuICB2YXIgY29weUJ1dHRvbiA9ICc8YSBocmVmPVwiI1wiICBjbGFzcz1cInB1bGwtcmlnaHQgYnRuIGJ0bi1pbmZvIGJ0bi14cyBjb3B5LWJ1dHRvblwiIG9uY2xpY2s9XCJjb3B5Tm9kZSgnICsgbm9kZS5pZCArICcpXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXBsdXNcIj48L2k+PC9hPic7XHJcbiAgdmFyIGV4cGFuZEJ1dHRvbiA9ICc8YSBpZD1cImV4cGFuZElEJyArIG5vZGUuaWQgKyAnXCIgaHJlZj1cIiNcIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OicgKyBkZXB0aEFkanVzdG1lbnQgKyAncHhcIiBvbmNsaWNrPVwidG9nZ2xlRXhwYW5kSWNvbignICsgbm9kZS5pZCArICcpXCIgY2xhc3M9XCJidG4gYnRuLXhzXCI+PHNwYW4gaWQ9XCJpY29uJyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L3NwYW4+PC9hPic7XHJcbiAgdmFyIGNvbGxhcHNlQnV0dG9uID0gJzxhIGlkPVwiZXhwYW5kSUQnICsgbm9kZS5pZCArICdcIiBocmVmPVwiI1wiIHN0eWxlPVwibWFyZ2luLWxlZnQ6JyArIGRlcHRoQWRqdXN0bWVudCArICdweFwiIG9uY2xpY2s9XCJ0b2dnbGVFeHBhbmRJY29uKCcgKyBub2RlLmlkICsgJylcIiBjbGFzcz1cImJ0biBidG4teHNcIj48c3BhbiBpZD1cImljb24nICsgbm9kZS5pZCArICdcIiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duXCI+PC9zcGFuPjwvYT4nO1xyXG4gIHZhciBibGFua0J1dHRvbiA9ICc8YSBpZD1cImV4cGFuZElEJyArIG5vZGUuaWQgKyAnXCIgaHJlZj1cIiNcIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OicgKyBkZXB0aEFkanVzdG1lbnQgKyAncHhcIiBvbmNsaWNrPVwidG9nZ2xlRXhwYW5kSWNvbignICsgbm9kZS5pZCArICcpXCIgY2xhc3M9XCJidG4gYnRuLXhzXCI+PHNwYW4gaWQ9XCJpY29uJyArIG5vZGUuaWQgKyAnXCI+PC9zcGFuPjwvYT4nO1xyXG5cclxuICBtYXJrdXAgKz0gJzx0ciBpZD1cInJvd2lkJyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJub2RlUm93XCI+PHRkIGNsYXNzPVwicmVkaXBzLXJvd2hhbmRsZXIgY2VsbFwiPjxkaXYgY2xhc3M9XCJub2RlLWNvbnRhaW5lclwiPic7XHJcbiAgbWFya3VwICs9IGRlbGV0ZUJ1dHRvbiArIGNvcHlCdXR0b24gKyBkcmFnSGFuZGxlO1xyXG5cclxuICBpZihub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIGNoaWxkcmVuIGFyZSB2aXNpYmxlXHJcbiAge1xyXG4gICAgbWFya3VwICs9IGNvbGxhcHNlQnV0dG9uOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaGlkZSBjaGlsZHJlbiBidXR0b25cclxuICB9XHJcbiAgZWxzZSBpZihub2RlLl9jaGlsZHJlbiAmJiBub2RlLl9jaGlsZHJlbi5sZW5ndGggPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiBjaGlsZHJlbiBhcmUgaGlkZGVuXHJcbiAge1xyXG4gICAgbWFya3VwICs9IGV4cGFuZEJ1dHRvbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2hvdyBjaGlsZHJlbiBidXR0b25cclxuICB9XHJcbiAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiBub2RlIGhhcyBubyBjaGlsZHJlbiAoaXMgYSBsZWFmKVxyXG4gIHtcclxuICAgIG1hcmt1cCArPSBibGFua0J1dHRvbjtcclxuICAgIGRlcHRoQWRqdXN0bWVudCAtPSAxMDtcclxuICB9XHJcblxyXG4gIG1hcmt1cCArPSAnPGlucHV0IGlkPVwibm9kZUlucHV0JyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJub2RlVGV4dElucHV0XCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIicgKyBub2RlLm5hbWUgKyAnXCIgc3R5bGU9XCJ3aWR0aDonICsgKERFRkFVTFRfTk9ERV9JTlBVVF9XSURUSC1kZXB0aEFkanVzdG1lbnQpICsgJ3B4XCIgb25pbnB1dD1cInVwZGF0ZU5vZGVOYW1lKHRoaXMpXCIvPjwvZGl2PjwvdGQ+PC90cj4nO1xyXG5cclxuICBpZihub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCB0aGUgY2hpbGRyZW4gb2YgdGhpcyBub2RlIGJlbG93IHRoaXMgbm9kZSdzIHJvd1xyXG4gIHtcclxuICAgIGZvcih2YXIgaSBpbiBub2RlLmNoaWxkcmVuKVxyXG4gICAge1xyXG4gICAgICBtYXJrdXAgKz0gYWRkUm93KG5vZGUuY2hpbGRyZW5baV0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1hcmt1cDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVEYXRhTWFya3VwKClcclxue1xyXG4gIHZhciBtYXJrdXAgPSAnPHRhYmxlIGlkPVwiZGF0YVRhYmxlXCI+JztcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspICAgICAgICAvL2FkZCByb3cgZm9yIGVhY2ggbm9kZVxyXG4gIHtcclxuICAgIG1hcmt1cCArPSBhZGREYXRhUm93KHRyZWUuY2hpbGRyZW5baV0pO1xyXG4gIH1cclxuXHJcbiAgbWFya3VwICs9ICc8L3RhYmxlPic7XHJcbiAgcmV0dXJuIG1hcmt1cDsgIFxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGREYXRhUm93KG5vZGUpXHJcbntcclxuICB2YXIgbWFya3VwID0gJzx0ciBpZD1cImRhdGFyb3dpZCcgKyBub2RlLmlkICsgJ1wiIGNsYXNzPVwiZGF0YVJvd1wiPic7XHJcbiAgXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUuZmllbGRzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCB0aGUgZGF0YSBpbnB1dHMgZm9yIGVhY2ggZmllbGRzXHJcbiAge1xyXG4gICAgdmFyIGZpZWxkID0gdHJlZS5maWVsZHNbaV07XHJcblxyXG4gICAgdmFyIHZhbHVlID0gJyc7XHJcbiAgICBpZihub2RlLnZhbHVlcyAmJiBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSlcclxuICAgIHtcclxuICAgICAgdmFsdWUgPSBGaWVsZC5mb3JtYXRWYWx1ZShmaWVsZCwgbm9kZS52YWx1ZXNbZmllbGQubmFtZV0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBtYXJrdXAgKz0gZ2V0RmllbGRDZWxsTWFya3VwKGZpZWxkLm5hbWUsIG5vZGUuaWQsIHZhbHVlKTtcclxuICB9XHJcbiAgXHJcbiAgbWFya3VwICs9ICc8L3RyPic7XHJcbiAgXHJcbiAgaWYobm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgdGhlIGNoaWxkcmVuIG9mIHRoaXMgbm9kZSBiZWxvdyB0aGlzIG5vZGUncyByb3dcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9IGFkZERhdGFSb3cobm9kZS5jaGlsZHJlbltpXSk7XHJcbiAgICB9XHJcbiAgfSAgXHJcbiAgXHJcbiAgcmV0dXJuIG1hcmt1cDsgIFxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRDb2x1bW4oZmllbGROYW1lKVxyXG57XHJcbiAgJCgnI2ZpZWxkSGVhZGVyUm93JykuYXBwZW5kKGdldEZpZWxkSGVhZGVyTWFya3VwKGZpZWxkTmFtZSwgdHJlZS5maWVsZHMubGVuZ3RoKSk7ICAgIC8vYWRkIGZpZWxkIGhlYWRlclxyXG4gIFxyXG4gICQoJy5kYXRhUm93JykuZWFjaChmdW5jdGlvbihpLCBpdGVtKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCBjZWxsIGZvciBlYWNoIG5vZGVcclxuICB7XHJcbiAgICAkKGl0ZW0pLmFwcGVuZChnZXRGaWVsZENlbGxNYXJrdXAoZmllbGROYW1lLCBpdGVtLmlkLnJlcGxhY2UoJ2RhdGFyb3dpZCcsICcnKSkpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGaWVsZEhlYWRlck1hcmt1cChmaWVsZE5hbWUsIGluZGV4KVxyXG57XHJcbiAgcmV0dXJuICc8dGQgY2xhc3M9XCJmaWVsZEhlYWRlckNlbGxcIj48ZGl2IGNsYXNzPVwiZmllbGRIZWFkZXJDb250YWluZXJcIj4nXHJcbiAgKyAnPGRpdiBjbGFzcz1cIm1vdmVDb2xHcmlwXCI+PC9kaXY+J1xyXG4gICsgJzxkaXYgY2xhc3M9XCJmaWVsZE5hbWVJbnB1dENvbnRhaW5lclwiPjx0ZXh0YXJlYSBpZD1cImNvbEhlYWRlcklucHV0JyArIGZpZWxkTmFtZSArICdcIiBjbGFzcz1cImZpZWxkTmFtZUlucHV0XCI+JyArIGZpZWxkTmFtZSArICc8L3RleHRhcmVhPjwvZGl2PidcclxuICArICc8ZGl2IGNsYXNzPVwiZmllbGRIZWFkZXJCdXR0b25cIj4nXHJcbiAgKyAnPGltZyBzcmM9XCJpbWFnZXMvZG93bi1hcnJvdy5wbmdcIiBvbmNsaWNrPVwic2hvd01lbnUoZXZlbnQsIFxcJycgKyBmaWVsZE5hbWUgKyAnXFwnKTtcIiBzdHlsZT1cImN1cnNvcjpwb2ludGVyXCIvPidcclxuICArICc8L2Rpdj4nXHJcbiAgKyAnPGRpdiBpZD1cImdyaXAnICsgaW5kZXggKyAnXCIgY2xhc3M9XCJyZXNpemVDb2xHcmlwXCIgb25tb3VzZWRvd249XCJzdGFydFJlc2l6ZShldmVudCwgdGhpcylcIj48L2Rpdj4nXHJcbiAgKyAnPC9kaXY+PC90ZD4nO1xyXG4gIC8vcmV0dXJuICc8dGggaWQ9XCJjb2xIZWFkZXInICsgZmllbGROYW1lICsgJ1wiIGNsYXNzPVwiaGVhZGVyXCI+PGRpdiBjbGFzcz1cIm1vdmVDb2xHcmlwXCI+PC9kaXY+PGlucHV0IGlkPVwiY29sSGVhZGVySW5wdXQnICsgZmllbGROYW1lICsgJ1wiIGNsYXNzPVwiZmllbGROYW1lSW5wdXRcIiB0eXBlPVwidGV4dFwiIHZhbHVlPVwiJyArIGZpZWxkTmFtZSArICdcIi8+PGRpdiBpZD1cImdyaXAnICsgaW5kZXggKyAnXCIgY2xhc3M9XCJyZXNpemVDb2xHcmlwXCIgb25tb3VzZWRvd249XCJzdGFydFJlc2l6ZShldmVudCwgdGhpcylcIj48L2Rpdj48L3RoPic7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEZpZWxkQ2VsbE1hcmt1cChmaWVsZE5hbWUsIG5vZGVJRCwgdmFsdWUpXHJcbnsgIFxyXG4gIHJldHVybiAnPHRkIGNsYXNzPVwiY2VsbFwiPjxpbnB1dCBjbGFzcz1cImZpZWxkSW5wdXQgZmllbGRJbnB1dCcgKyBmaWVsZE5hbWUgKyAnXCIgdHlwZT1cInRleHRcIiBpZD1cIicgKyBmaWVsZE5hbWUgKyBub2RlSUQgKyAnXCIgdmFsdWU9XCInICsgdmFsdWUgKyAnXCIgb25pbnB1dD1cInVwZGF0ZUZpZWxkVmFsdWUoXFwnJyArIGZpZWxkTmFtZSArICdcXCcsIFxcJycgKyBub2RlSUQgKyAnXFwnKVwiIG9uZm9jdXM9XCJkaXNwbGF5UmF3VmFsdWUoXFwnJyArIGZpZWxkTmFtZSArICdcXCcsIFxcJycgKyBub2RlSUQgKyAnXFwnKVwiLz48L3RkPic7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEZpZWxkTWVudU1hcmt1cChmaWVsZE5hbWUsIHgsIHkpXHJcbntcclxuICB2YXIgZmllbGQgPSBQcm9qZWN0LmdldEZpZWxkKGZpZWxkTmFtZSk7XHJcbiAgXHJcbiAgdmFyIG1lbnUgPSBuZXcgTWVudSgpO1xyXG5cclxuICB2YXIgbnVtYmVySXRlbSA9IG5ldyBNZW51SXRlbSgnTnVtYmVyJywgRmllbGQuTlVNQkVSLCAnZGF0YXR5cGUnLCBmaWVsZCk7XHJcbiAgdmFyIGZvcm1hdEl0ZW0gPSBuZXcgTWVudUl0ZW0oJ0Zvcm1hdCcpO1xyXG4gIFxyXG4gIHZhciBudW1iZXJGb3JtYXRJdGVtID0gbmV3IE1lbnVJdGVtKCdOdW1iZXInLCBGaWVsZC5OVU1CRVJfRk9STUFULCAnZm9ybWF0JywgZmllbGQpO1xyXG4gIG51bWJlckZvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJzAnLCAwLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB2YXIgZGlzcGxheVN0cmluZyA9ICcwLic7XHJcbiAgZm9yKHZhciBpID0gMTsgaSA8IDExOyBpKyspXHJcbiAge1xyXG4gICAgZGlzcGxheVN0cmluZyArPSAnMCc7XHJcbiAgICBudW1iZXJGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKGRpc3BsYXlTdHJpbmcsIGksICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIH1cclxuICBmb3JtYXRJdGVtLml0ZW1zLnB1c2gobnVtYmVyRm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIHBlcmNlbnRGb3JtYXRJdGVtID0gbmV3IE1lbnVJdGVtKCdQZXJjZW50JywgRmllbGQuUEVSQ0VOVF9GT1JNQVQsICdmb3JtYXQnLCBmaWVsZCk7XHJcbiAgcGVyY2VudEZvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJzAnLCAwLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB2YXIgZGlzcGxheVN0cmluZyA9ICcwLic7XHJcbiAgZm9yKHZhciBpID0gMTsgaSA8IDExOyBpKyspXHJcbiAge1xyXG4gICAgZGlzcGxheVN0cmluZyArPSAnMCc7XHJcbiAgICBwZXJjZW50Rm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbShkaXNwbGF5U3RyaW5nICsgJyUnLCBpLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB9XHJcbiAgZm9ybWF0SXRlbS5pdGVtcy5wdXNoKHBlcmNlbnRGb3JtYXRJdGVtKTtcclxuICBcclxuICB2YXIgc2NpZW50aWZpY0Zvcm1hdEl0ZW0gPSBuZXcgTWVudUl0ZW0oJ1NjaWVudGlmaWMnLCBGaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKTtcclxuICBzY2llbnRpZmljRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbSgnMCcsIDAsICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIHZhciBkaXNwbGF5U3RyaW5nID0gJzAuJztcclxuICBmb3IodmFyIGkgPSAxOyBpIDwgMTE7IGkrKylcclxuICB7XHJcbiAgICBkaXNwbGF5U3RyaW5nICs9ICcwJztcclxuICAgIHNjaWVudGlmaWNGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKGRpc3BsYXlTdHJpbmcgKyAnZSswJywgaSwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgfVxyXG4gIGZvcm1hdEl0ZW0uaXRlbXMucHVzaChzY2llbnRpZmljRm9ybWF0SXRlbSk7ICBcclxuICBcclxuICBudW1iZXJJdGVtLml0ZW1zLnB1c2goZm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIGFnZ3JlZ2F0aW9uSXRlbSA9IG5ldyBNZW51SXRlbSgnQWdncmVnYXRpb24nKTtcclxuICBhZ2dyZWdhdGlvbkl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJ05vIEFnZ3JlZ2F0aW9uJywgRmllbGQuTk9fQUdHUkVHQVRJT04sICdhZ2dfdHlwZScsIGZpZWxkKSk7XHJcbiAgXHJcbiAgdmFyIHN1bUFueUFnZ0l0ZW0gPSBuZXcgTWVudUl0ZW0oJ1N1bSBhbnkgZGVmaW5lZCBjaGlsZHJlbicsIEZpZWxkLlNVTV9BTllfQUdHUkVHQVRJT04sICdhZ2dfdHlwZScsIGZpZWxkKTtcclxuICBcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgdHJlZS5maWVsZHMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGYgPSB0cmVlLmZpZWxkc1tpXTtcclxuICAgIFxyXG4gICAgaWYoZi5uYW1lICE9IGZpZWxkLm5hbWUpXHJcbiAgICB7XHJcbiAgICAgIHN1bUFueUFnZ0l0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oZi5uYW1lLCBmLm5hbWUsICdhZ2dfcXR5X2ZpZWxkJywgZmllbGQpKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgYWdncmVnYXRpb25JdGVtLml0ZW1zLnB1c2goc3VtQW55QWdnSXRlbSk7XHJcbiAgbnVtYmVySXRlbS5pdGVtcy5wdXNoKGFnZ3JlZ2F0aW9uSXRlbSk7XHJcbiAgXHJcbiAgbWVudS5pdGVtcyA9IFtdO1xyXG4gIG1lbnUuaXRlbXMucHVzaChudW1iZXJJdGVtKTtcclxuICBtZW51Lml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKCdUZXh0JywgRmllbGQuU1RSSU5HLCAnZGF0YXR5cGUnLCBmaWVsZCkpO1xyXG4gIC8vVE9ETzogbWVudS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbSgnQ2hvaWNlJywgRmllbGQuQ0hPSUNFLCAnZGF0YXR5cGUnLCBmaWVsZCkpO1xyXG4gIFxyXG4gIHZhciBtYXJrdXAgPSAnPGRpdiBpZD1cImZpZWxkTWVudVwiIHN0eWxlPVwibGVmdDonICsgeCArICdweDt0b3A6JyArIHkgKyAncHg7XCI+JztcclxuICBcclxuICBtYXJrdXAgKz0gZ2VuZXJhdGVNZW51TWFya3VwKG1lbnUpO1xyXG4gIFxyXG4gIG1hcmt1cCArPSAnPC9kaXY+JztcclxuICByZXR1cm4gbWFya3VwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZU1lbnVNYXJrdXAobWVudSlcclxue1xyXG4gIHZhciBtYXJrdXAgPSAnPHVsPic7XHJcbiAgXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IG1lbnUuaXRlbXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGl0ZW0gPSBtZW51Lml0ZW1zW2ldO1xyXG4gICAgXHJcbiAgICBtYXJrdXAgKz0gJzxsaSBvbmNsaWNrPVwiTWVudS5oYW5kbGVDbGljaygnICsgaXRlbS5pZCArICcpO1wiPic7XHJcblxyXG4gICAgdmFyIGNoZWNrTWFya0NsYXNzID0gJ3VuY2hlY2tlZE1lbnVJdGVtJztcclxuICAgIGlmKGl0ZW0uZmllbGQgJiYgaXRlbS5jaGVja2VkKVxyXG4gICAge1xyXG4gICAgICBjaGVja01hcmtDbGFzcyA9ICdjaGVja2VkTWVudUl0ZW0nO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBtYXJrdXAgKz0gJzxpbWcgaWQ9XCJtZW51SXRlbScgKyBpdGVtLmlkICsgJ1wiIHNyYz1cIicgKyBDSEVDS19NQVJLX0lNQUdFX1BBVEggKyAnXCIgY2xhc3M9XCInICsgY2hlY2tNYXJrQ2xhc3MgKyAnXCIvPic7XHJcbiAgICBtYXJrdXAgKz0gaXRlbS5kaXNwbGF5O1xyXG4gICAgXHJcbiAgICBpZihpdGVtLml0ZW1zICYmIGl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9ICc8ZGl2IGNsYXNzPVwiYXJyb3dSaWdodFwiPjwvZGl2Pic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoaXRlbS5pdGVtcyAmJiBpdGVtLml0ZW1zLmxlbmd0aCA+IDApXHJcbiAgICB7XHJcbiAgICAgIG1hcmt1cCArPSBnZW5lcmF0ZU1lbnVNYXJrdXAoaXRlbSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSAnPC9saT4nO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gbWFya3VwICsgJzwvdWw+JztcclxufSIsImZ1bmN0aW9uIGRpc3BsYXlTcHJlYWRTaGVldCgpXHJcbntcclxuICBQcm9qZWN0LmNsZWFuc2VUcmVlKCk7XHJcbiAgXHJcbiAgJCgnYm9keScpLmFwcGVuZChnZW5lcmF0ZVNwcmVhZFNoZWV0TWFya3VwKCkpO1xyXG4gIFxyXG4gICQoJyNwcm9qZWN0LWFjdGlvbi1jb250YWluZXInKS5odG1sKGdlbmVyYXRlUHJvamVjdFNlbGVjdG9yTWFya3VwKCkpO1xyXG4gICQoJyNmaWVsZHMtaGVhZGVyLXJvdycpLmh0bWwoZ2VuZXJhdGVGaWVsZHNSb3dNYXJrdXAoKSk7XHJcbiAgJCgnI2ZpZWxkcy1oZWFkZXItcm93JykuY3NzKCdyaWdodCcsIHNjcm9sbEJhcldpZHRoICsgJ3B4Jyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Nob3J0ZW4gdGhlIHdpZHRoIG9mIHRoZSBmaWVsZHNSb3cgYnkgdGhlIHdpZHRoIG9mIHRoZSBzY3JvbGwgYmFyXHJcbiAgJChcIiNkYXRhLWNvbnRhaW5lclwiKS5odG1sKGdlbmVyYXRlRGF0YU1hcmt1cCgpKTsgXHJcblx0JChcIiNyZWRpcHMtZHJhZ1wiKS5odG1sKGdlbmVyYXRlVHJlZU1hcmt1cCgpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYXBwZW5kIHRoZSBtYXJrdXAgdG8gdGhlIERPTVxyXG4gICQoJyNyZWRpcHMtZHJhZycpLmNzcygnYm90dG9tJywgc2Nyb2xsQmFyV2lkdGggKyAncHgnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zaG9ydGVuIHRoZSBoZWlnaHQgb2YgdGhlIHRyZWUgc2VjdGlvbiBieSB0aGUgd2lkdGggb2YgdGhlIHNjcm9sbCBiYXJcclxuXHRyZWRpcHMuaW5pdCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaW5pdGlhbGl6ZSB0cmVlIGRyYWcvZHJvcCBsaWJyYXJ5XHJcblx0aW5pdFByb2plY3RBY3Rpb25zKCk7XHRcclxufVxyXG5cclxudmFyIGhhbmRsZVByb2plY3RBY3Rpb24gPSBmdW5jdGlvbigpXHJcbntcclxuXHRpZigkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCkgPT0gJ2FkZEZpZWxkJylcclxuXHR7XHJcbiAgICAkKCcjcHJvamVjdEFjdGlvbklucHV0JykudmFsKFwiVHlwZSBOZXcgRmllbGQgTmFtZSBhbmQgUHJlc3MgRW50ZXIgdG8gQ3JlYXRlXCIpO1xyXG5cdFx0JCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnNob3coKS5mb2N1cygpLnNlbGVjdCgpO1xyXG5cdH1cdFxyXG59O1xyXG5cclxuZnVuY3Rpb24gcHJvamVjdEFjdGlvbkVudGVyUHJlc3NlZCgpXHJcbntcclxuXHRpZigkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCkgPT0gJ2FkZEZpZWxkJylcclxuXHR7XHJcblx0XHR2YXIgZmllbGROYW1lID0gJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnZhbCgpO1xyXG5cdFx0dHJlZS5maWVsZHMucHVzaChuZXcgRmllbGQoZmllbGROYW1lKSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgbmV3IGZpZWxkIHRvIHRoZSBtb2RlbFxyXG4gICAgYWRkQ29sdW1uKGZpZWxkTmFtZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgY29sdW1uIGZvciBuZXcgZmllbGQgdG8gdGhlIHZpZXdcclxuXHRcdFxyXG4gICAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLmhpZGUoKTtcclxuICAgICQoJyNwcm9qZWN0QWN0aW9uU2VsZWN0b3InKS52YWwoJ2JsYW5rJyk7XHJcblx0fVx0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU5ld1Byb2plY3QoKVxyXG57XHJcblx0JCgnI3NlbGVjdFByb2plY3RPcHRpb24nKS5yZW1vdmUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSB0aGUgc2VsZWN0IHByb2plY3Qgb3B0aW9uLCBvbmNlIHRoZSB1c2VyIHNlbGVjdHMgYSBwcm9qZWN0IFxyXG5cdFxyXG5cdHZhciBuZXdQcm9qZWN0TmFtZSA9ICQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLnZhbCgpO1xyXG5cdCQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLmhpZGUoKTtcclxuXHRcclxuXHQvL2FkZCBhbiBvcHRpb24gZm9yIHRoZSBuZXcgcHJvamVjdCB0byB0aGUgcHJvamVjdHMgbGlzdCwgc2VsZWN0IHRoYXQgb3B0aW9uXHJcblx0dmFyIG5ld1Byb2plY3RJRCA9IHByb2plY3RzLm5leHRQcm9qZWN0SUQudG9TdHJpbmcoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IG5lZWQgdG8gZ2V0IHRoaXMgZnJvbSB0aGUgZGF0YWJhc2UgdG8gaW5zdXJlIHdlIGdldCB0aGUgY29ycmVjdCBpZFxyXG5cdHZhciBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG5cdG9wdGlvbi50ZXh0ID0gbmV3UHJvamVjdE5hbWU7XHJcblx0b3B0aW9uLnZhbHVlID0gbmV3UHJvamVjdElEOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXHQkKG9wdGlvbikuaW5zZXJ0QmVmb3JlKCcjcHJvamVjdFNlbGVjdG9yIG9wdGlvbjpudGgtY2hpbGQoJyArICQoJyNwcm9qZWN0U2VsZWN0b3InKS5sZW5ndGggKyAnKScpO1xyXG5cdCQoJyNwcm9qZWN0U2VsZWN0b3InKS52YWwobmV3UHJvamVjdElEKTtcclxuXHRcclxuXHQkLmFqYXgoeyB0eXBlOiAnUE9TVCcsIHVybDogJy9hcGkvYWRkUHJvamVjdD9wcm9qZWN0TmFtZT0nICsgbmV3UHJvamVjdE5hbWUgfSk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgbmV3IHByb2plY3QgdG8gdGhlIHByb2plY3RzIGRvY3VtZW50IGluIHRoZSBkYXRhYmFzZVxyXG5cdFxyXG5cdC8vY3JlYXRlIGEgdG9wIG5vZGUgYW5kIHRyZWUgZm9yIHRoZSBwcm9qZWN0XHJcblx0dHJlZSA9IHsgXCJwcm9qZWN0SURcIjogbmV3UHJvamVjdElELCBcInByb2plY3ROYW1lXCI6IG5ld1Byb2plY3ROYW1lLCBcIm5hbWVcIjogbmV3UHJvamVjdE5hbWUsIFwidmVyc2lvblwiOiAxLCBcIm5leHROb2RlSURcIjogMiwgXCJmaWVsZHNcIjogW10sIFwiY2hpbGRyZW5cIjogW3sgXCJpZFwiOiAxLCBcIm5hbWVcIjogbmV3UHJvamVjdE5hbWUsIFwiY2hpbGRyZW5cIjogW10gfV0gfTtcclxuICBkaXNwbGF5U3ByZWFkU2hlZXQoKTtcclxuXHRcclxuXHRQcm9qZWN0LnNhdmVUb0RhdGFiYXNlKCk7XHRcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd01lbnUoZSwgZmllbGROYW1lKVxyXG57XHJcbiAgaWYoJCgnI2ZpZWxkTWVudScpLmxlbmd0aCA9PT0gMClcclxuICB7XHJcbiAgICAkKGdldEZpZWxkTWVudU1hcmt1cChmaWVsZE5hbWUsIGUuY2xpZW50WCwgZS5jbGllbnRZKSkuYXBwZW5kVG8oJ2JvZHknKTtcclxuICAgICQoJyNmaWVsZE1lbnUnKS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkgeyAkKCcjZmllbGRNZW51JykucmVtb3ZlKCk7IH0pO1xyXG4gIH1cclxufSIsInZhciByZXNpemVDb2x1bW5MZWZ0ID0gMDtcclxudmFyIHJlc2l6ZUZpZWxkID0gJzAnO1xyXG5cclxudmFyIHN0YXJ0UmVzaXplID0gZnVuY3Rpb24oZSwgZ3JpcClcclxue1xyXG4gICQoZG9jdW1lbnQpLmJpbmQoJ3RvdWNobW92ZS5yZXNpemVDb2xHcmlwIG1vdXNlbW92ZS5yZXNpemVDb2xHcmlwJywgcmVzaXplRHJhZykuYmluZCgndG91Y2hlbmQucmVzaXplQ29sR3JpcCBtb3VzZXVwLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVFbmQpO1xyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS5sZWZ0ID0gZS5wYWdlWCArICdweCc7XHJcblxyXG4gIHJlc2l6ZUNvbHVtbkxlZnQgPSAkKGdyaXAucGFyZW50Tm9kZSkucG9zaXRpb24oKS5sZWZ0OyAgICAgICAgICAgICAgICAgICAgLy9zYXZlIHRoZSBsZWZ0IHBvc2l0aW9uIG9mIHRoZSBjb2x1bW4gYmVpbmcgcmVzaXplZFxyXG4gIHJlc2l6ZUZpZWxkID0gZ3JpcC5wYXJlbnROb2RlLmlkLnJlcGxhY2UoJ2NvbEhlYWRlcicsICcnKTsgICAgICAgICAgICAgICAgLy9zYXZlIHRoZSBmaWVsZCBvZiB0aGUgY29sdW1uIGJlaW5nIHJlc2l6ZWRcclxufTtcclxuXHJcbnZhciByZXNpemVFbmQgPSBmdW5jdGlvbihlKVxyXG57XHJcbiAgJChkb2N1bWVudCkudW5iaW5kKCd0b3VjaG1vdmUucmVzaXplQ29sR3JpcCBtb3VzZW1vdmUucmVzaXplQ29sR3JpcCcsIHJlc2l6ZURyYWcpLnVuYmluZCgndG91Y2hlbmQucmVzaXplQ29sR3JpcCBtb3VzZXVwLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVFbmQpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG5cclxuICB2YXIgbmV3V2lkdGggPSBlLnBhZ2VYIC0gcmVzaXplQ29sdW1uTGVmdCAtIEdSSVBTX1dJRFRIO1xyXG5cclxuICBpZihuZXdXaWR0aCA8IE1JTl9DT0xVTU5fV0lEVEgpXHJcbiAge1xyXG4gICAgbmV3V2lkdGggPSBNSU5fQ09MVU1OX1dJRFRIO1xyXG4gIH1cclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbEhlYWRlcklucHV0JyArIHJlc2l6ZUZpZWxkKS5zdHlsZS53aWR0aCA9IG5ld1dpZHRoICsgJ3B4JzsgICAgLy9yZXNpemUgdGhlIHdpZHRoIG9mIHRoZSBjb2x1bW4gaGVhZGVyXHJcblxyXG4gIC8vcmVzaXplIHRoZSB3aWR0aCBvZiBldmVyeSBjZWxsIGluIHRoZSBjb2x1bW5cclxuICB2YXIgY29sdW1uQ2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmllbGRJbnB1dCcgKyByZXNpemVGaWVsZCk7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBjb2x1bW5DZWxscy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICBjb2x1bW5DZWxsc1tpXS5zdHlsZS53aWR0aCA9IChuZXdXaWR0aCArIDgpICsgJ3B4JztcclxuICB9XHJcbn07XHJcblxyXG52YXIgcmVzaXplRHJhZyA9IGZ1bmN0aW9uKGUpXHJcbntcclxuICBpZihlLnBhZ2VYID4gcmVzaXplQ29sdW1uTGVmdCArIE1JTl9DT0xVTU5fV0lEVEggKyBHUklQU19XSURUSClcclxuICB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLmxlZnQgPSBlLnBhZ2VYICsgJ3B4JzsgICAgICAvL21vdmUgdGhlIHJlc2l6ZSBsaW5lIGFzIHRoZSB1c2VyIGRyYWdzIGl0XHJcbiAgfVxyXG59OyIsInZhciBwcm9qZWN0cyA9IG51bGw7XHJcbnZhciB0cmVlO1xyXG5cclxudmFyIEVOVEVSX0tFWSA9IDEzO1xyXG52YXIgTUlOX0NPTFVNTl9XSURUSCA9IDcwO1xyXG52YXIgR1JJUFNfV0lEVEggPSAxNjtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZURhdGFTY3JvbGwoKVxyXG57XHJcbiAgJCgnI3JlZGlwcy1kcmFnJykuc2Nyb2xsVG9wKCQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbFRvcCgpKTtcclxuICAkKCcjZmllbGRzLWhlYWRlci1yb3cnKS5zY3JvbGxMZWZ0KCQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbExlZnQoKSk7XHJcbn1cclxuXHJcbnZhciBzZWxlY3RQcm9qZWN0ID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgaWYoJCgnI3Byb2plY3RTZWxlY3RvcicpLmZpbmQoXCI6c2VsZWN0ZWRcIikuYXR0cignaWQnKSA9PT0gXCJuZXdQcm9qZWN0T3B0aW9uXCIpXHJcbiAge1xyXG4gICAgJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0JykudmFsKFwiVHlwZSBOZXcgUHJvamVjdCBOYW1lIGFuZCBQcmVzcyBFbnRlciB0byBDcmVhdGVcIik7XHJcbiAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS5zaG93KCkuZm9jdXMoKS5zZWxlY3QoKTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIC8vcmVtb3ZlIHRoZSBzZWxlY3QgcHJvamVjdCBvcHRpb24sIG9uY2UgdGhlIHVzZXIgc2VsZWN0cyBhIHByb2plY3RcclxuICAgIGlmKCQoJyNwcm9qZWN0U2VsZWN0b3InKS52YWwoKSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAge1xyXG4gICAgICAkKCcjc2VsZWN0UHJvamVjdE9wdGlvbicpLnJlbW92ZSgpOyBcclxuICAgIH1cclxuXHJcbiAgICAkLmFqYXgoeyB0eXBlOiAnR0VUJywgdXJsOiAnYXBpL3RyZWU/cHJvamVjdElEPScgKyAkKCcjcHJvamVjdFNlbGVjdG9yJykudmFsKCkgfSkuZG9uZShmdW5jdGlvbihkYXRhKSAgICAgICAgICAgICAgIC8vcmVhZCB0cmVlIGZvciB0aGUgc2VsZWN0ZWQgcHJvamVjdCBmcm9tIHRoZSBkYXRhYmFzZVxyXG4gICAge1xyXG4gICAgICB0cmVlID0gZGF0YTtcclxuICAgICAgZGlzcGxheVNwcmVhZFNoZWV0KCk7XHJcbiAgICAgICQoJyN0cmVlLWNvbnRhaW5lcicpLmhpZGUoKTtcclxuICAgICAgLy9kaXNwbGF5VHJlZVZpZXcodHJlZSk7XHJcbiAgICAgIC8vJCgnI3NwcmVhZFNoZWV0VmlldycpLmhpZGUoKTtcclxuICAgIH0pOyAgXHJcbiAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxufTtcclxuXHJcbmZ1bmN0aW9uIHByaW50UHJvamVjdCgpXHJcbntcclxuICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0cmVlLCBudWxsLCAnXFx0JykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5UmF3VmFsdWUoZmllbGROYW1lLCBub2RlSUQpXHJcbntcclxuICB2YXIgZmllbGQgPSBQcm9qZWN0LmdldEZpZWxkKGZpZWxkTmFtZSk7XHJcbiAgdmFyIG5vZGUgPSBmaW5kTm9kZUluVHJlZShwYXJzZUludChub2RlSUQpKTtcclxuICBcclxuICBpZihub2RlLnZhbHVlcyAmJiBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSlcclxuICB7XHJcbiAgICAkKCcjJyArIGZpZWxkTmFtZSArIG5vZGVJRCkudmFsKG5vZGUudmFsdWVzW2ZpZWxkLm5hbWVdKTtcclxuICB9ICBcclxuICBlbHNlXHJcbiAge1xyXG4gICAgJCgnIycgKyBmaWVsZE5hbWUgKyBub2RlSUQpLnZhbCgnJyk7XHJcbiAgfVxyXG59XHJcblxyXG4vL21vdmUgdGhlIG5vZGUvYXNzZW1ibHkgaW4gdGhlIHZpZXcgYW5kIHRoZSBtb2RlbCwgaW5jbHVkaW5nIGFsbCBkZXNjZW5kYW50IG5vZGVzXHJcbnZhciBtb3ZlQXNzZW1ibHkgPSBmdW5jdGlvbihtb3ZlZElELCBuZXdQYXJlbnRJRCwgb2xkUGFyZW50SUQpICAgICAgICAgICAgICAgICAgXHJcbntcclxuICB2YXIgb2xkUGFyZW50Tm9kZSA9IGZpbmROb2RlSW5UcmVlKG9sZFBhcmVudElEKTtcclxuICB2YXIgbmV3UGFyZW50Tm9kZSA9IGZpbmROb2RlSW5UcmVlKG5ld1BhcmVudElEKTtcclxuICB2YXIgbW92ZWROb2RlICAgICA9IGZpbmROb2RlSW5UcmVlKG1vdmVkSUQpO1xyXG5cclxuICAvL3JlbW92ZSB0aGUgbW92ZWQgbm9kZSBmcm9tIGl0J3Mgb2xkIHBhcmVudCBpbiB0aGUgbW9kZWxcclxuICBpZihvbGRQYXJlbnROb2RlKVxyXG4gIHtcclxuICAgIG9sZFBhcmVudE5vZGUuY2hpbGRyZW4uc3BsaWNlKG9sZFBhcmVudE5vZGUuY2hpbGRyZW4uaW5kZXhPZihtb3ZlZE5vZGUpLCAxKTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHRyZWUuY2hpbGRyZW4uc3BsaWNlKHRyZWUuY2hpbGRyZW4uaW5kZXhPZihtb3ZlZE5vZGUpLCAxKTsgIFxyXG4gIH1cclxuICBcclxuICAvL2V4cGFuZCB0aGUgbmV3IHBhcmVudCBub2RlLCBpZiBpdCdzIGNvbGxhcHNlZFxyXG4gIGlmKGlzTm9kZUNvbGxhcHNlZChuZXdQYXJlbnROb2RlKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICB7XHJcbiAgICBleHBhbmROb2RlKG5ld1BhcmVudE5vZGUpO1xyXG4gIH1cclxuICAkKCcjaWNvbicgKyBuZXdQYXJlbnROb2RlLmlkKS5hdHRyKCdjbGFzcycsICdnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93bicpOyAgICAgICAgICAgICAgICAgIC8vc2V0IHRoZSBleHBhbmQvY29sbGFwc2UgaWNvbiB0byBleHBhbmQgZm9yIHRoZSBwYXJlbnQsIGp1c3QgaW4gY2FzZSBpdCB3YXMgcHJldmlvdXNseSBjaGlsZGxlc3NcclxuICBcclxuICAvL2lmIHRoZSBvbGQgcGFyZW50IGlzIGNoaWxkbGVzcyBub3csIHRoZW4gaGlkZSB0aGUgb2xkIHBhcmVudCdzIGV4cGFuZC9jb2xsYXBzZSBpY29uXHJcbiAgaWYoaXNOb2RlQ2hpbGRsZXNzKG9sZFBhcmVudE5vZGUpKVxyXG4gIHtcclxuICAgICQoJyNpY29uJyArIG9sZFBhcmVudE5vZGUuaWQpLmF0dHIoJ2NsYXNzJywgJycpOyBcclxuICB9ICBcclxuXHJcbiAgbmV3UGFyZW50Tm9kZS5jaGlsZHJlbi5wdXNoKG1vdmVkTm9kZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgdGhlIG1vdmVkIG5vZGUgdG8gaXQncyBuZXcgcGFyZW50IGluIHRoZSBtb2RlbFxyXG4gIHNldERlcHRocyhuZXdQYXJlbnROb2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2V0IHRoZSBuZXcgZGVwdGggdmFsdWVzIGZvciB0aGUgbW92ZWQgbm9kZXNcclxuXHJcbiAgLy9yZW1vdmUgdGhlIG5vZGUgYW5kIGl0cyBkZXNjZW5kYW50cyBmcm9tIHRoZSB2aWV3IFxyXG4gIHZpc2l0KG1vdmVkTm9kZSwgZ2V0Q2hpbGRyZW4sIGZ1bmN0aW9uKG5vZGUpIFxyXG4gIHsgXHJcbiAgICAkKCcjcm93aWQnICsgbm9kZS5pZCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjZGF0YXJvd2lkJyArIG5vZGUuaWQpLnJlbW92ZSgpOyBcclxuICB9KTtcclxuXHJcbiAgLy9hZGQgdGhlIG1vdmVkIG5vZGUgYW5kIGl0cyBkZXNjZW5kYW50cyB0byB0aGUgbmV3IHBhcmVudCBpbiB0aGUgdmlld1xyXG4gICQoYWRkUm93KG1vdmVkTm9kZSkpLmluc2VydEFmdGVyKCQoJyNyb3dpZCcgKyBuZXdQYXJlbnRJRCkpOyBcclxuICAkKGFkZERhdGFSb3cobW92ZWROb2RlKSkuaW5zZXJ0QWZ0ZXIoJCgnI2RhdGFyb3dpZCcgKyBuZXdQYXJlbnRJRCkpO1xyXG4gIFxyXG4gIC8vZW5hYmxlIGRyYWdnaW5nIGZvciBhbGwgb2YgdGhlIG1vdmVkIG5vZGVzXHJcbiAgdmlzaXQobW92ZWROb2RlLCBnZXRDaGlsZHJlbiwgZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBSRURJUFMuZHJhZy5lbmFibGVEaXZzKCdpbml0JywgJCgnI3Jvd2lkJyArIG5vZGUuaWQpLmZpbmQoJ2RpdicpKTsgICAgXHJcbiAgfSk7ICAgIFxyXG59O1xyXG5cclxuZnVuY3Rpb24gc2V0RGVwdGhzKG5vZGUpXHJcbntcclxuICBmb3IodmFyIGkgaW4gbm9kZS5jaGlsZHJlbilcclxuICB7XHJcbiAgICBub2RlLmNoaWxkcmVuW2ldLmRlcHRoID0gbm9kZS5kZXB0aCArIDE7XHJcbiAgICBzZXREZXB0aHMobm9kZS5jaGlsZHJlbltpXSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpc05vZGVDaGlsZGxlc3Mobm9kZSlcclxue1xyXG4gIHJldHVybiAoIW5vZGUuY2hpbGRyZW4gfHwgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApICYmICghbm9kZS5fY2hpbGRyZW4gfHwgbm9kZS5fY2hpbGRyZW4ubGVuZ3RoID09PSAwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNOb2RlQ29sbGFwc2VkKG5vZGUpXHJcbntcclxuICByZXR1cm4gbm9kZS5fY2hpbGRyZW4gJiYgbm9kZS5fY2hpbGRyZW4ubGVuZ3RoID4gMDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNOb2RlRXhwYW5kZWQobm9kZSlcclxue1xyXG4gIHJldHVybiBub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMDsgIFxyXG59XHJcblxyXG52YXIgZmluZE5vZGVJblRyZWUgPSBmdW5jdGlvbihub2RlSUQpXHJcbntcclxuICBmb3IodmFyIGkgaW4gdHJlZS5jaGlsZHJlbilcclxuICB7XHJcbiAgICB2YXIgZm91bmROb2RlID0gZmluZE5vZGUobm9kZUlELCB0cmVlLmNoaWxkcmVuW2ldKTtcclxuXHJcbiAgICBpZihmb3VuZE5vZGUpIHsgcmV0dXJuIGZvdW5kTm9kZTsgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciBmaW5kTm9kZSA9IGZ1bmN0aW9uKG5vZGVJRCwgbm9kZSlcclxue1xyXG4gIGlmKG5vZGUuaWQgPT09IG5vZGVJRClcclxuICB7XHJcbiAgICByZXR1cm4gbm9kZTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSBpbiBub2RlLmNoaWxkcmVuKVxyXG4gICAge1xyXG4gICAgICB2YXIgZm91bmROb2RlID0gZmluZE5vZGUobm9kZUlELCBub2RlLmNoaWxkcmVuW2ldKTtcclxuXHJcbiAgICAgIGlmKGZvdW5kTm9kZSkgeyByZXR1cm4gZm91bmROb2RlOyB9XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIGZpbmRQYXJlbnRJblRyZWUgPSBmdW5jdGlvbihub2RlSUQpXHJcbntcclxuICBmb3IodmFyIGkgaW4gdHJlZS5jaGlsZHJlbilcclxuICB7XHJcbiAgICAgIHZhciBmb3VuZFBhcmVudCA9IGZpbmRQYXJlbnQobm9kZUlELCB0cmVlLmNoaWxkcmVuW2ldLCBudWxsKTtcclxuXHJcbiAgICAgIGlmKGZvdW5kUGFyZW50KSB7IHJldHVybiBmb3VuZFBhcmVudDsgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciBmaW5kUGFyZW50ID0gZnVuY3Rpb24obm9kZUlELCBub2RlLCBwYXJlbnQpXHJcbntcclxuICBpZihub2RlLmlkID09PSBub2RlSUQpXHJcbiAge1xyXG4gICAgcmV0dXJuIHBhcmVudDtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSBpbiBub2RlLmNoaWxkcmVuKVxyXG4gICAge1xyXG4gICAgICB2YXIgZm91bmRQYXJlbnQgPSBmaW5kUGFyZW50KG5vZGVJRCwgbm9kZS5jaGlsZHJlbltpXSwgbm9kZSk7XHJcblxyXG4gICAgICBpZihmb3VuZFBhcmVudCkgeyByZXR1cm4gZm91bmRQYXJlbnQ7IH1cclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZGVsZXRlTm9kZSA9IGZ1bmN0aW9uKG5vZGVJRClcclxue1xyXG4gIHZhciBub2RlID0gZmluZE5vZGVJblRyZWUobm9kZUlEKTtcclxuICB2YXIgcGFyZW50Tm9kZSA9IGZpbmRQYXJlbnRJblRyZWUobm9kZUlEKTtcclxuICBcclxuICAvL3JlbW92ZSB0aGUgbm9kZSBhbmQgaXRzIGRlc2NlbmRhbnRzIGZyb20gdGhlIHZpZXcgXHJcbiAgdmlzaXQobm9kZSwgZ2V0Q2hpbGRyZW4sIGZ1bmN0aW9uKG5vZGUpIFxyXG4gIHsgXHJcbiAgICAkKCcjcm93aWQnICsgbm9kZS5pZCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjZGF0YXJvd2lkJyArIG5vZGUuaWQpLnJlbW92ZSgpOyBcclxuICB9KTtcclxuICBcclxuICAvL3JlbW92ZSB0aGUgbm9kZSBmcm9tIHRoZSBtb2RlbFxyXG4gIGZvcih2YXIgaSBpbiBwYXJlbnROb2RlLmNoaWxkcmVuKVxyXG4gIHtcclxuICAgIGlmKHBhcmVudE5vZGUuY2hpbGRyZW5baV0uaWQgPT0gbm9kZUlEKVxyXG4gICAge1xyXG4gICAgICBwYXJlbnROb2RlLmNoaWxkcmVuLnNwbGljZShpLCAxKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGlmKGlzTm9kZUNoaWxkbGVzcyhwYXJlbnROb2RlKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZSBwYXJlbnQgbm9kZSBoYXMgbm8gY2hpbGRyZW5cclxuICB7XHJcbiAgICAkKCcjaWNvbicgKyBwYXJlbnROb2RlLmlkKS5hdHRyKCdjbGFzcycsICcnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaGlkZSB0aGUgcGFyZW50J3MgZXhwYW5kL2NvbGxhcHNlIGljb24gIFxyXG4gIH0gIFxyXG59O1xyXG5cclxudmFyIGNvcHlOb2RlID0gZnVuY3Rpb24obm9kZUlEKVxyXG57XHJcbiAgdmFyIHNvdXJjZU5vZGUgPSBmaW5kTm9kZUluVHJlZShub2RlSUQpO1xyXG4gIHZhciBzb3VyY2VQYXJlbnROb2RlID0gZmluZFBhcmVudEluVHJlZShub2RlSUQpO1xyXG4gIFxyXG4gIHZhciBuZXdOb2RlID0galF1ZXJ5LmV4dGVuZCh0cnVlLCB7fSwgc291cmNlTm9kZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2Nsb25lIHRoZSBzb3VyY2Ugbm9kZVxyXG4gIGFzc2lnbk5ld05vZGVJRHMobmV3Tm9kZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2Fzc2lnbiB1bmlxdWUgaWRzIHRvIGVhY2ggbm9kZSBpbiB0aGUgY2xvbmVcclxuICBcclxuICBpZihzb3VyY2VQYXJlbnROb2RlID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9oYW5kbGUgY2FzZSB3aGVyZSB0aGUgdXNlciB0cmllcyB0byBjb3B5IGEgdG9wIGxldmVsIG5vZGVcclxuICB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICB0cmVlLmNoaWxkcmVuLnNwbGljZSh0cmVlLmNoaWxkcmVuLmluZGV4T2Yoc291cmNlTm9kZSksIDAsIG5ld05vZGUpOyAgXHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBzb3VyY2VQYXJlbnROb2RlLmNoaWxkcmVuLnNwbGljZShzb3VyY2VQYXJlbnROb2RlLmNoaWxkcmVuLmluZGV4T2Yoc291cmNlTm9kZSksIDAsIG5ld05vZGUpO1xyXG4gIH1cclxuICBcclxuICAkKGFkZFJvdyhuZXdOb2RlKSkuaW5zZXJ0QmVmb3JlKCQoJyNyb3dpZCcgKyBub2RlSUQpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pbnNlcnQgdGhlIG5ldyByb3dzIGJlZm9yZSB0aGUgc291cmNlIHJvd1xyXG4gICQoYWRkRGF0YVJvdyhuZXdOb2RlKSkuaW5zZXJ0QmVmb3JlKCQoJyNkYXRhcm93aWQnICsgbm9kZUlEKSk7ICAgICAgICAgICAgICAgICAgICAgICAvL2luc2VydCB0aGUgbmV3IHJvd3MgYmVmb3JlIHRoZSBzb3VyY2Ugcm93XHJcbiAgXHJcbiAgLy9lbmFibGUgZHJhZ2dpbmcgZm9yIGFsbCBvZiB0aGUgbm9kZSBjb3BpZXNcclxuICB2aXNpdChuZXdOb2RlLCBnZXRDaGlsZHJlbiwgZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBSRURJUFMuZHJhZy5lbmFibGVEaXZzKCdpbml0JywgJCgnI3Jvd2lkJyArIG5vZGUuaWQpLmZpbmQoJ2RpdicpKTsgICAgXHJcbiAgfSk7XHJcbn07XHJcblxyXG52YXIgYXNzaWduTmV3Tm9kZUlEcyA9IGZ1bmN0aW9uKG5vZGUpXHJcbntcclxuICBub2RlLmlkID0gdHJlZS5uZXh0Tm9kZUlEKys7XHJcbiAgXHJcbiAgZm9yKHZhciBpIGluIG5vZGUuY2hpbGRyZW4pXHJcbiAge1xyXG4gICAgYXNzaWduTmV3Tm9kZUlEcyhub2RlLmNoaWxkcmVuW2ldKTtcclxuICB9XHJcbn07XHJcblxyXG52YXIgZ2V0QW5jZXN0b3JUYWcgPSBmdW5jdGlvbiB1cFRvKGVsLCB0YWdOYW1lKSBcclxue1xyXG4gIHRhZ05hbWUgPSB0YWdOYW1lLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gIHdoaWxlIChlbCAmJiBlbC5wYXJlbnROb2RlKSBcclxuICB7XHJcbiAgICBlbCA9IGVsLnBhcmVudE5vZGU7XHJcbiAgICBpZiAoZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT0gdGFnTmFtZSkgXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBlbDtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG4vLyBBIHJlY3Vyc2l2ZSBmdW5jdGlvbiBmb3IgdHJhdmVyc2luZyB0aGUgdHJlZSBcclxuZnVuY3Rpb24gdmlzaXQocGFyZW50LCBjaGlsZHJlbkZuLCB2aXNpdEZuLCBkYXRhKSBcclxue1xyXG4gIGlmICghcGFyZW50KSB7IHJldHVybjsgfVxyXG5cclxuICB2aXNpdEZuKHBhcmVudCwgZGF0YSk7XHJcbiAgXHJcbiAgdmFyIGNoaWxkcmVuID0gY2hpbGRyZW5GbihwYXJlbnQpO1xyXG4gIGZvciAodmFyIGkgaW4gY2hpbGRyZW4pIFxyXG4gIHtcclxuICAgIHZpc2l0KGNoaWxkcmVuW2ldLCBjaGlsZHJlbkZuLCB2aXNpdEZuKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZpc2l0RGVzY2VuZGFudHMocGFyZW50LCBjaGlsZHJlbkZuLCB2aXNpdEZuKVxyXG57XHJcbiAgaWYoIXBhcmVudCkgeyByZXR1cm47IH1cclxuICBcclxuICBmb3IodmFyIGkgaW4gcGFyZW50LmNoaWxkcmVuKVxyXG4gIHtcclxuICAgIHZpc2l0KHBhcmVudC5jaGlsZHJlbltpXSwgY2hpbGRyZW5GbiwgdmlzaXRGbik7XHJcbiAgfVxyXG59XHJcblxyXG52YXIgZ2V0Q2hpbGRyZW4gPSBmdW5jdGlvbihub2RlKVxyXG57XHJcbiAgcmV0dXJuIG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwID8gbm9kZS5jaGlsZHJlbiA6IG51bGw7XHJcbn07XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVFeHBhbmRJY29uKG5vZGVJRClcclxue1xyXG4gIHZhciBub2RlID0gZmluZE5vZGVJblRyZWUobm9kZUlEKTtcclxuICBcclxuICBpZihpc05vZGVFeHBhbmRlZChub2RlKSlcclxuICB7XHJcbiAgICBjb2xsYXBzZU5vZGUobm9kZSk7ICAgICBcclxuICB9XHJcbiAgZWxzZSBpZihpc05vZGVDb2xsYXBzZWQobm9kZSkpXHJcbiAge1xyXG4gICAgZXhwYW5kTm9kZShub2RlKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbGxhcHNlTm9kZShub2RlKVxyXG57XHJcbiAgdmlzaXREZXNjZW5kYW50cyhub2RlLCBnZXRDaGlsZHJlbiwgZnVuY3Rpb24obikgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSBkZXNjZW5kYW50IG5vZGUgcm93cyBmcm9tIHRoZSBET01cclxuICB7XHJcbiAgICAkKCcjZGF0YXJvd2lkJyArIG4uaWQpLnJlbW92ZSgpO1xyXG4gICAgJCgnI3Jvd2lkJyArIG4uaWQpLnJlbW92ZSgpO1xyXG4gIH0pO1xyXG4gIFxyXG4gIG5vZGUuX2NoaWxkcmVuID0gbm9kZS5jaGlsZHJlbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9oaWRlIHRoZSBkZXNjZW5kYW50cyBpbiB0aGUgbW9kZWxcclxuICBub2RlLmNoaWxkcmVuID0gW107XHJcbiAgXHJcbiAgJCgnI2ljb24nICsgbm9kZS5pZCkuYXR0cignY2xhc3MnLCAnZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Jyk7ICAvL3VwZGF0ZSB0aGUgZXhwYW5kL2NvbGxwYXNlIGljb24gZm9yIHRoaXMgcm93ICAgIFxyXG59XHJcblxyXG5mdW5jdGlvbiBleHBhbmROb2RlKG5vZGUpXHJcbntcclxuICBub2RlLmNoaWxkcmVuID0gbm9kZS5fY2hpbGRyZW47ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdW5oaWRlIHRoZSBkZXNjZW5kYW50cyBpbiB0aGUgbW9kZWxcclxuICBub2RlLl9jaGlsZHJlbiA9IFtdO1xyXG4gIFxyXG4gIHZhciBjaGlsZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgZGVzY2VuZGFudCBub2RlIHJvd3MgdG8gdGhlIERPTVxyXG4gIGZvcih2YXIgaSA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcHJlc2VydmUgdGhlIG5vZGUgb3JkZXJpbmdcclxuICB7XHJcbiAgICBjaGlsZCA9IG5vZGUuY2hpbGRyZW5baV07XHJcbiAgICAkKGFkZERhdGFSb3coY2hpbGQpKS5pbnNlcnRBZnRlcigkKCcjZGF0YXJvd2lkJyArIG5vZGUuaWQpKTtcclxuICAgICQoYWRkUm93KGNoaWxkLCAnJywgJycpKS5pbnNlcnRBZnRlcigkKCcjcm93aWQnICsgbm9kZS5pZCkpOyBcclxuICB9XHJcblxyXG4gICQoJyNpY29uJyArIG5vZGUuaWQpLmF0dHIoJ2NsYXNzJywgJ2dseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duJyk7ICAgLy91cGRhdGUgdGhlIGV4cGFuZC9jb2xscGFzZSBpY29uIGZvciB0aGlzIHJvdyAgICAgXHJcbn1cclxuXHJcbnZhciB1cGRhdGVOb2RlTmFtZSA9IGZ1bmN0aW9uKGVsKVxyXG57XHJcbiAgdmFyIHJvdyA9IGdldEFuY2VzdG9yVGFnKGVsLCAndHInKTtcclxuICB2YXIgbm9kZUlEID0gcGFyc2VJbnQocm93LmlkLnJlcGxhY2UoJ3Jvd2lkJywnJykpO1xyXG4gIHZhciBub2RlID0gZmluZE5vZGVJblRyZWUobm9kZUlEKTtcclxuICBcclxuICBub2RlLm5hbWUgPSBlbC52YWx1ZTtcclxuICAkKCcjbm9kZUlucHV0JyArIG5vZGVJRCkuYXR0cigndmFsdWUnLCBub2RlLm5hbWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy91cGRhdGUgdGhlIGlucHV0IHZhbHVlIGluIHRoZSBET00sIHNvIHRoYXQgd2hlbiB3ZSBkcmFnL21vdmUgdGhlIHJvdywgdGhlIHZhbHVlIGlzIGNvcnJlY3RcclxufTtcclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUZpZWxkVmFsdWUoZmllbGQsIGlkKVxyXG57XHJcbiAgdXBkYXRlTm9kZVZhbHVlSW5UcmVlKGlkLCBmaWVsZCwgJCgnIycgKyBmaWVsZCArIGlkKS52YWwoKSk7XHJcblxyXG4gIGZvcih2YXIgaSBpbiB0cmVlLmNoaWxkcmVuKVxyXG4gIHtcclxuICAgIGFnZ3JlZ2F0ZV9hbnkodHJlZS5jaGlsZHJlbltpXSwgZmllbGQpO1xyXG4gIH0gXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZU5vZGVWYWx1ZUluVHJlZShpZCwgZmllbGQsIHZhbHVlKVxyXG57XHJcbiAgdmFyIG5vZGUgPSBudWxsO1xyXG5cclxuICBmb3IodmFyIGkgaW4gdHJlZS5jaGlsZHJlbilcclxuICB7XHJcbiAgICBub2RlID0gdHJlZS5jaGlsZHJlbltpXTtcclxuICAgIFxyXG4gICAgaWYobm9kZS5pZCA9PSBpZClcclxuICAgIHtcclxuICAgICAgaWYoIW5vZGUudmFsdWVzKSB7IG5vZGUudmFsdWVzID0ge307IH1cclxuICAgICAgbm9kZS52YWx1ZXNbZmllbGRdID0gdmFsdWU7ICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAgeyAgICBcclxuICAgICAgdXBkYXRlTm9kZVZhbHVlKGlkLCBub2RlLCBmaWVsZCwgdmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlTm9kZVZhbHVlKGlkLCBub2RlLCBmaWVsZCwgdmFsdWUpXHJcbntcclxuICB2YXIgZm91bmQgPSBudWxsO1xyXG5cclxuICBpZihub2RlICYmIG5vZGUuaWQgPT0gaWQpXHJcbiAge1xyXG4gICAgcmV0dXJuIG5vZGU7XHJcbiAgfVxyXG5cclxuICBpZihub2RlKVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSBpbiBub2RlLmNoaWxkcmVuKVxyXG4gICAge1xyXG4gICAgICBmb3VuZCA9IHVwZGF0ZU5vZGVWYWx1ZShpZCwgbm9kZS5jaGlsZHJlbltpXSwgZmllbGQsIHZhbHVlKTtcclxuXHJcbiAgICAgIGlmKGZvdW5kKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYoIWZvdW5kLnZhbHVlcykgeyBmb3VuZC52YWx1ZXMgPSB7fTsgfVxyXG4gICAgICAgIGZvdW5kLnZhbHVlc1tmaWVsZF0gPSB2YWx1ZTtcclxuICAgICAgICByZXR1cm4gZm91bmQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBudWxsO1xyXG59IiwidmFyIEZpZWxkID0gZnVuY3Rpb24obmFtZSlcclxue1xyXG4gIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgdGhpcy5kYXRhdHlwZSA9IEZpZWxkLk5VTUJFUjtcclxuICB0aGlzLmZvcm1hdCA9IEZpZWxkLk5VTUJFUl9GT1JNQVQ7XHJcbiAgdGhpcy5wcmVjaXNpb24gPSAyO1xyXG4gIHRoaXMuYWdnX3R5cGUgPSBGaWVsZC5OT19BR0dSRUdBVElPTjtcclxuICB0aGlzLmFnZ19xdHlfZmllbGQgPSBudWxsO1xyXG59O1xyXG5cclxuRmllbGQuTlVNQkVSID0gJzAnO1xyXG5GaWVsZC5TVFJJTkcgPSAnMSc7XHJcbkZpZWxkLkNIT0lDRSA9ICcyJztcclxuXHJcbkZpZWxkLk5PX0FHR1JFR0FUSU9OID0gJzAnO1xyXG5GaWVsZC5TVU1fQU5ZX0FHR1JFR0FUSU9OID0gJzEnO1xyXG5cclxuRmllbGQuTlVNQkVSX0ZPUk1BVCA9ICcwJztcclxuRmllbGQuUEVSQ0VOVF9GT1JNQVQgPSAnMSc7XHJcbkZpZWxkLlNDSUVOVElGSUNfRk9STUFUID0gJzInO1xyXG5cclxuRmllbGQuZm9ybWF0VmFsdWUgPSBmdW5jdGlvbihmaWVsZCwgdmFsdWUpXHJcbntcclxuICBpZihmaWVsZC5kYXRhdHlwZSA9PT0gRmllbGQuTlVNQkVSKVxyXG4gIHtcclxuICAgIGlmKGZpZWxkLmZvcm1hdCA9PT0gRmllbGQuTlVNQkVSX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLnRvRml4ZWQoZmllbGQucHJlY2lzaW9uKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5QRVJDRU5UX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuICgxMDAuMCAqIHZhbHVlKS50b0ZpeGVkKGZpZWxkLnByZWNpc2lvbikgKyAnJSc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKGZpZWxkLmZvcm1hdCA9PT0gRmllbGQuU0NJRU5USUZJQ19GT1JNQVQpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpLnRvRXhwb25lbnRpYWwoZmllbGQucHJlY2lzaW9uKTtcclxuICAgIH1cclxuICB9XHJcbiAgZWxzZSBpZihmaWVsZC5kYXRhdHlwZSA9PT0gRmllbGQuU1RSSU5HKVxyXG4gIHtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9IFxyXG4gIGVsc2UgaWYoZmllbGQuZGF0YXR5cGUgPT09IEZpZWxkLkNIT0lDRSlcclxuICB7XHJcbiAgICAvL1RPRE86IGltcGxlbWVudFxyXG4gIH0gICAgICBcclxufTsgICIsInZhciBNZW51ID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgdmFyIGl0ZW1zID0gW107XHJcbiAgTWVudS5tZW51ID0gdGhpcztcclxufTtcclxuXHJcbk1lbnUubWVudTtcclxuXHJcbk1lbnUuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbihpZClcclxue1xyXG4gIHZhciBjbGlja2VkID0gTWVudS5tZW51LmdldE1lbnVJdGVtKGlkLCBNZW51Lm1lbnUpO1xyXG4gIHZhciBwYXJlbnQgPSBNZW51Lm1lbnUuZ2V0TWVudUl0ZW1QYXJlbnQoaWQsIE1lbnUubWVudSk7XHJcblxyXG4gIGlmKGNsaWNrZWQuZmllbGQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGUgbWVudSBpdGVtIGRvZXNuJ3QgaGF2ZSBhIGZpZWxkIHRoZW4gaWdub3JlIGl0XHJcbiAge1xyXG4gICAgdmFyIGZpZWxkID0gUHJvamVjdC5nZXRGaWVsZChjbGlja2VkLmZpZWxkLm5hbWUpO1xyXG4gICAgZmllbGRbY2xpY2tlZC52YXJOYW1lXSA9IGNsaWNrZWQudmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NldCB2YWx1ZSBmb3IgdGhlIGZpZWxkIGluIHRoZSBtb2RlbCBiYXNlZCBvbiB0aGUgY2xpY2tlZCBtZW51IGl0ZW1cclxuICBcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBwYXJlbnQuaXRlbXMubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2xlYXIgdGhlIGNoZWNrbWFya3MgZm9yIGFsbCBpdGVtIG9uIHRoZSBzYW1lIG1lbnUgbGV2ZWxcclxuICAgIHtcclxuICAgICAgJCgnI21lbnVJdGVtJyArIHBhcmVudC5pdGVtc1tpXS5pZCkucmVtb3ZlQ2xhc3MoJ2NoZWNrZWRNZW51SXRlbScpLmFkZENsYXNzKCd1bmNoZWNrZWRNZW51SXRlbScpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgJCgnI21lbnVJdGVtJyArIGlkKS5yZW1vdmVDbGFzcygndW5jaGVja2VkTWVudUl0ZW0nKS5hZGRDbGFzcygnY2hlY2tlZE1lbnVJdGVtJyk7ICAgICAgICAgICAgICAgICAgICAgLy9jaGVjayB0aGUgaXRlbSB0aGF0IHdhcyBjbGlja2VkXHJcbiAgICBcclxuICAgIGlmKHBhcmVudCA9PT0gTWVudS5tZW51KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgdGhpcyBpcyBhIHRvcCBsZXZlbCBtZW51IGl0ZW0gdGhlbiB1cGRhdGUgdGhlIGZvcm1hdHRpbmcsIHNpbmNlIHdlIG9ubHkgd2FudCB0byBkbyB0aGlzIG9uY2UgcGVyIGNsaWNrXHJcbiAgICB7XHJcbiAgICAgIFByb2plY3QudXBkYXRlRmllbGRGb3JtYXR0aW5nKGZpZWxkKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5NZW51LnByb3RvdHlwZS5nZXRNZW51SXRlbSA9IGZ1bmN0aW9uKGlkLCBtZW51SXRlbSlcclxue1xyXG4gIGlmKGlkID09PSBtZW51SXRlbS5pZClcclxuICB7XHJcbiAgICByZXR1cm4gbWVudUl0ZW07XHJcbiAgfVxyXG4gIGVsc2UgaWYobWVudUl0ZW0uaXRlbXMgJiYgbWVudUl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICB2YXIgZm91bmQ7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbWVudUl0ZW0uaXRlbXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGZvdW5kID0gdGhpcy5nZXRNZW51SXRlbShpZCwgbWVudUl0ZW0uaXRlbXNbaV0pO1xyXG4gICAgICBcclxuICAgICAgaWYoZm91bmQpXHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gZm91bmQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5NZW51LnByb3RvdHlwZS5nZXRNZW51SXRlbVBhcmVudCA9IGZ1bmN0aW9uKGlkLCBtZW51SXRlbSlcclxue1xyXG4gIGlmKG1lbnVJdGVtLml0ZW1zICYmIG1lbnVJdGVtLml0ZW1zLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG1lbnVJdGVtLml0ZW1zLmxlbmd0aDsgaSsrKVxyXG4gICAgeyBcclxuICAgICAgaWYobWVudUl0ZW0uaXRlbXNbaV0uaWQgPT09IGlkKVxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIG1lbnVJdGVtO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIHZhciBmb3VuZCA9IHRoaXMuZ2V0TWVudUl0ZW1QYXJlbnQoaWQsIG1lbnVJdGVtLml0ZW1zW2ldKTtcclxuICAgICAgICBpZihmb3VuZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICByZXR1cm4gZm91bmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59OyIsInZhciBNZW51SXRlbSA9IGZ1bmN0aW9uKGRpc3BsYXksIHZhbHVlLCB2YXJOYW1lLCBmaWVsZClcclxue1xyXG4gIHRoaXMuZGlzcGxheSA9IGRpc3BsYXk7XHJcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gIHRoaXMudmFyTmFtZSA9IHZhck5hbWU7XHJcbiAgdGhpcy5maWVsZCA9IGZpZWxkO1xyXG4gIHRoaXMuaXRlbXMgPSBbXTtcclxuICB0aGlzLmlkID0gTWVudUl0ZW0uaWQrKztcclxuICB0aGlzLnBhcmVudCA9IC0xO1xyXG5cclxuICBpZihmaWVsZClcclxuICB7XHJcbiAgICB0aGlzLmNoZWNrZWQgPSBmaWVsZFt2YXJOYW1lXSA9PT0gdmFsdWU7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICB0aGlzLmNoZWNrZWQgPSBmYWxzZTtcclxuICB9XHJcbn07XHJcblxyXG5NZW51SXRlbS5pZCA9IDA7IiwiZnVuY3Rpb24gUHJvamVjdCgpXHJcbntcclxuICBcclxufVxyXG5cclxuUHJvamVjdC5nZXRGaWVsZCA9IGZ1bmN0aW9uKG5hbWUpXHJcbntcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgdHJlZS5maWVsZHMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGZpZWxkID0gdHJlZS5maWVsZHNbaV07XHJcbiAgICBpZihmaWVsZC5uYW1lID09PSBuYW1lKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gZmllbGQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5Qcm9qZWN0LnNhdmVUb0RhdGFiYXNlID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgJC5hamF4KHsgdHlwZTogJ1BPU1QnLCB1cmw6ICcvYXBpL3RyZWUnLCBkYXRhVHlwZTogJ2pzb24nLCBkYXRhOiB7IGpzb246SlNPTi5zdHJpbmdpZnkodHJlZSkgfSB9KTtcclxufTtcclxuXHJcblByb2plY3QudXBkYXRlRmllbGRGb3JtYXR0aW5nID0gZnVuY3Rpb24oZmllbGQpICAgICAgICAgICAgICAgICAvL2Zvcm1hdHMgYWxsIHRoZSB2YWx1ZXMgZm9yIHRoZSBmaWVsZCAodGhlIGVudGlyZSBjb2x1bW4pXHJcbntcclxuICAkKCcuZmllbGRJbnB1dCcgKyBmaWVsZC5uYW1lKS5lYWNoKGZ1bmN0aW9uKGluZGV4KSBcclxuICB7XHJcbiAgICB2YXIgbm9kZUlEID0gJCh0aGlzKS5hdHRyKCdpZCcpLnJlcGxhY2UoZmllbGQubmFtZSwgJycpO1xyXG4gICAgdmFyIG5vZGUgPSBmaW5kTm9kZUluVHJlZShwYXJzZUludChub2RlSUQpKTtcclxuICAgIFxyXG4gICAgaWYobm9kZS52YWx1ZXMpXHJcbiAgICB7XHJcbiAgICAgIHZhciB2YWx1ZSA9IE51bWJlcihub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSk7ICAgICAgICAgICAgICAvL2dldCB0aGUgdmFsdWUgZnJvbSB0aGUgbW9kZWxcclxuICAgICAgJCh0aGlzKS52YWwoRmllbGQuZm9ybWF0VmFsdWUoZmllbGQsIHZhbHVlKSk7ICAgICAgICAgICAgIC8vZm9ybWF0IHRoZSB2YWx1ZSBhbmQgZGlzcGxheSBpdFxyXG4gICAgfVxyXG59KTtcclxufTtcclxuXHJcblByb2plY3QuY2xlYW5zZVRyZWUgPSBmdW5jdGlvbigpXHJcbntcclxuICB2aXNpdCh0cmVlLCBnZXRDaGlsZHJlbiwgZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBpZighbm9kZS5jaGlsZHJlbilcclxuICAgIHtcclxuICAgICAgbm9kZS5jaGlsZHJlbiA9IFtdO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlIG5vZGUucGFyZW50O1xyXG4gIH0pO1xyXG59O1xyXG5cclxuUHJvamVjdC5nZXRUcmVlID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgcmV0dXJuIHRyZWU7XHJcbn1cclxuXHJcblByb2plY3Quc3dpdGNoVmlldyA9IGZ1bmN0aW9uKClcclxue1xyXG4gIGlmKCQoJyNzcHJlYWRTaGVldFZpZXcnKS5sZW5ndGgpXHJcbiAge1xyXG4gICAgJCgnI3NwcmVhZFNoZWV0VmlldycpLnJlbW92ZSgpO1xyXG4gICAgZGlzcGxheVRyZWVWaWV3KHRyZWUpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgJCgnI3RyZWUtY29udGFpbmVyJykucmVtb3ZlKCk7XHJcbiAgICBkaXNwbGF5U3ByZWFkU2hlZXQoKTtcclxuICB9XHJcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9