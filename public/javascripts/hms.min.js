function aggregate_any(e,a){if(e.children&&0!==e.children.length){for(var l=0,n=0;n<e.children.length;n++)l+=aggregate_any(e.children[n],a);return e.values||(e.values={}),e.values[a]=l,document.getElementById(a+e.id).value=l,l}return e.values&&e.values[a]?parseFloat(e.values[a]):0}
"use strict";var REDIPS=REDIPS||{};REDIPS.drag=function(){var e,o,t,n,r,d,l,i,a,s,c,f,p,g,u,v,y,m,h,w,E,b,D,I,S,R,P,x,N,T,C,B,j,k=null,L={width:0,height:0},M={width:null,height:null,container:[],obj:null},O={page:{x:0,y:0},div:{x:0,y:0},flag:{x:0,y:0}},Y=[],H=[],W=null,_=null,X={x:0,y:0},A={x:0,y:0,value:7,flag:!1},V=!1,z=!1,F=null,q=null,K=null,$=null,G=null,J=null,Q=!1,U=!1,Z={colorTd:"#FFCFAE",colorTr:"#9BB3DA"},ee={enable:!0,bound:25,speed:20},oe={borderDisabled:"dotted",opacityDisabled:"",rowEmptyColor:"white"},te={},ne={keyDiv:!1,keyRow:!1,sendBack:!1,drop:!1},re={cloned:function(){},clonedDropped:function(){},clonedEnd1:function(){},clonedEnd2:function(){},dropped:function(){},droppedBefore:function(){},finish:function(){},notCloned:function(){},notMoved:function(){},rowChanged:function(){},rowClicked:function(){},rowCloned:function(){},rowDropped:function(){},rowDroppedBefore:function(){},rowDroppedSource:function(){},rowMoved:function(){},rowNotCloned:function(){},rowNotMoved:function(){}};return e=function(){if(W=document.getElementById("redips-drag"),j=m(),!document.getElementById("redips_clone")){var e=document.createElement("div");e.id="redips_clone",e.style.width=e.style.height="1px",W.appendChild(e)}o("init",".redips-drag"),T=document.getElementById("treeTable"),T.redips={},c(),REDIPS.event.add(window,"resize",c),REDIPS.event.add(window,"scroll",y)},n=function(e){var o,t,n,l,i=e||window.event;if(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),V=i.shiftKey,window.getSelection)window.getSelection().removeAllRanges();else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(a){}return n=X.x=i.clientX,l=X.y=i.clientY,A.x=n,A.y=l,A.flag=!1,REDIPS.drag.objOld=U=Q||this,REDIPS.drag.obj=Q=this,z=Q.className.indexOf("redips-clone")>-1,REDIPS.drag.obj=Q=R(Q),y(),F=$=null,f(),K=q=F,J=G=$,REDIPS.drag.event.rowClicked(te.current),null!==F&&null!==$||(f(),K=q=F,J=G=$,null!==F&&null!==$)?(C=B=!1,REDIPS.event.add(document,"mousemove",d),REDIPS.event.add(document,"mouseup",r),null!==F&&(N=u(F)),t=D(T,"position"),"fixed"!==t&&(t=D(T.parentNode,"position")),o=v(Q,t),k=[l-o[0],o[1]-n,o[2]-l,n-o[3]],!1):!0},R=function(e){var o,t,n;return"DIV"===e.nodeName?(n=e,e=I("TR",e),void 0===e.redips&&(e.redips={}),e.redips.div=n,e):(t=e,o=document.createElement("table"),o.innerHTML='<tr id="'+t.id+'" class="'+t.classList+'">'+t.innerHTML+"</tr>",o.redips={},o.redips.sourceRow=t,E(t,o.rows[0]),document.getElementById("redips_clone").appendChild(o),o)},P=function(e){var o,t,n;n=function(e){var o;void 0!==e.redips&&e.redips.emptyRow?S(e,"empty",REDIPS.drag.style.rowEmptyColor):(o=I("TABLE",e),o.deleteRow(e.rowIndex))};var r=Q;e>T.rows.length-1&&(e=T.rows.length-1);var d=T.rows[e];t=r.getElementsByTagName("tr")[0],r.parentNode.removeChild(r),o=REDIPS.drag.event.rowDroppedBefore(T,r.redips.sourceRow.rowIndex),o!==!1&&(e<T.rows.length?d.parentNode.insertBefore(t,d.nextSibling):(d.parentNode.appendChild(t),d=T.rows[0]),B||n(r.redips.sourceRow),delete t.redips.emptyRow,REDIPS.drag.event.rowDropped(d))},r=function(e){var o,t,n,a,s,c,f=e||window.event;if(n=f.clientX,a=f.clientY,O.flag.x=O.flag.y=0,REDIPS.event.remove(document,"mousemove",d),REDIPS.event.remove(document,"mouseup",r),W.onselectstart=null,i(Q),M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,O.flag.x=O.flag.y=0,null===F||null===$)REDIPS.drag.event.notMoved();else{if(REDIPS.drag.td.target=te.target=T.rows[F].cells[$],g(F,N),o=F,C)if(K===o){for(t=Q.getElementsByTagName("tr")[0],U.style.backgroundColor=t.style.backgroundColor,s=0;s<t.cells.length;s++)U.cells[s].style.backgroundColor=t.cells[s].style.backgroundColor;Q.parentNode.removeChild(Q),delete U.redips.emptyRow,B?REDIPS.drag.event.rowNotCloned():REDIPS.drag.event.rowDroppedSource(te.target)}else P(o);else REDIPS.drag.event.rowNotMoved();B||A.flag?B&&K===F&&J===$?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):B&&REDIPS.drag.clone.drop===!1&&(n<T.redips.offset[3]||n>T.redips.offset[1]||a<T.redips.offset[0]||a>T.redips.offset[2])?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):(c=REDIPS.drag.event.droppedBefore(te.target),l(c)):REDIPS.drag.event.notMoved(),y(),REDIPS.drag.event.finish()}q=G=null},l=function(e){var o,t=null;if(e!==!1){if(ne.sendBack===!0){o=te.target.getElementsByTagName("DIV");for(var n=0;n<o.length;n++)if(Q!==o[n]&&0===Q.id.indexOf(o[n].id)){t=o[n];break}if(t)return b(t,1),void Q.parentNode.removeChild(Q)}te.target.appendChild(Q),a(Q),REDIPS.drag.event.dropped(te.target),B&&(REDIPS.drag.event.clonedDropped(te.target),b(U,-1))}else B&&Q.parentNode&&Q.parentNode.removeChild(Q)},a=function(e,o){e.onmousedown=o===!1?null:n},i=function(e){e.style.top="",e.style.left="",e.style.position="",e.style.zIndex=""},d=function(e){var o,t,n,r,d,l,i,a=e||window.event,c=REDIPS.drag.scroll.bound;if(t=X.x=a.clientX,n=X.y=a.clientY,r=Math.abs(A.x-t),d=Math.abs(A.y-n),C||((z||REDIPS.drag.clone.keyRow===!0&&V)&&(B=!0),REDIPS.drag.objOld=U=Q,REDIPS.drag.obj=Q=R(Q),Q.style.zIndex=999,Q.style.position="fixed",y(),f(),B?REDIPS.drag.event.rowCloned():REDIPS.drag.event.rowMoved(),p(),t>L.width-k[1]&&(Q.style.left=L.width-(k[1]+k[3])+"px"),n>L.height-k[2]&&(Q.style.top=L.height-(k[0]+k[2])+"px")),C=!0,t>k[3]&&t<L.width-k[1]&&(Q.style.left=t-k[3]+"px"),n>k[0]&&n<L.height-k[2]&&(Q.style.top=n-k[0]+"px"),t<_[1]&&t>_[3]&&n<_[2]&&n>_[0]&&0===O.flag.x&&0===O.flag.y&&(H.containTable||t<H[3]||t>H[1]||n<H[0]||n>H[2])&&(f(),s()),REDIPS.drag.scroll.enable)for(O.page.x=c-(L.width/2>t?t-k[3]:L.width-t-k[1]),O.page.x>0?(O.page.x>c&&(O.page.x=c),i=0,O.page.x*=t<L.width/2?-1:1,O.page.x<0&&0>=i||O.page.x>0&&i>=M.width-L.width||0===O.flag.x++&&(REDIPS.event.remove(window,"scroll",y),h(window))):O.page.x=0,O.page.y=c-(L.height/2>n?n-k[0]:L.height-n-k[2]),O.page.y>0?(O.page.y>c&&(O.page.y=c),i=window.pageYOffset||document.documentElement.scrollTop,O.page.y*=n<L.height/2?-1:1,O.page.y<0&&0>=i||O.page.y>0&&i>=M.height-L.height||0===O.flag.y++&&(REDIPS.event.remove(window,"scroll",y),w(window))):O.page.y=0,l=0;l<M.container.length;l++){if(o=M.container[l],o.autoscroll&&t<o.offset[1]&&t>o.offset[3]&&n<o.offset[2]&&n>o.offset[0]){O.div.x=c-(o.midstX>t?t-k[3]-o.offset[3]:o.offset[1]-t-k[1]),O.div.x>0?(O.div.x>c&&(O.div.x=c),O.div.x*=t<o.midstX?-1:1,0===O.flag.x++&&(REDIPS.event.remove(o.div,"scroll",y),h(o.div))):O.div.x=0,O.div.y=c-(o.midstY>n?n-k[0]-o.offset[0]:o.offset[2]-n-k[2]),O.div.y>0?(O.div.y>c&&(O.div.y=c),O.div.y*=n<o.midstY?-1:1,0===O.flag.y++&&(REDIPS.event.remove(o.div,"scroll",y),w(o.div))):O.div.y=0;break}O.div.x=O.div.y=0}a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},s=function(){(F!==q||$!==G)&&(null!==q&&null!==G&&(g(q,N),REDIPS.drag.td.previous=te.previous=T.rows[q].cells[G],REDIPS.drag.td.current=te.current=T.rows[F].cells[$],F!==q&&REDIPS.drag.event.rowChanged(te.current)),p())},c=function(){L.width=window.innerWidth,L.height=window.innerHeight,M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,y()},f=function(){var e,o,t,n,r,d,l=[];if(e=function(){null!==q&&null!==G&&(F=q,$=G)},n=X.x,r=X.y,l[0]=T.redips.offset[0],l[1]=T.redips.offset[1],l[2]=T.redips.offset[2],l[3]=T.redips.offset[3],void 0!==T.sca&&(l[0]=l[0]>T.sca.offset[0]?l[0]:T.sca.offset[0],l[1]=l[1]<T.sca.offset[1]?l[1]:T.sca.offset[1],l[2]=l[2]<T.sca.offset[2]?l[2]:T.sca.offset[2],l[3]=l[3]>T.sca.offset[3]?l[3]:T.sca.offset[3]),l[3]<n&&n<l[1]&&l[0]<r&&r<l[2]){for(o=T.redips.row_offset,F=0;F<o.length-1;F++)if(void 0!==o[F]){if(H[0]=o[F][0],void 0!==o[F+1])H[2]=o[F+1][0];else for(d=F+2;d<o.length;d++)if(void 0!==o[d]){H[2]=o[d][0];break}if(r<=H[2])break}t=F,F===o.length-1&&(H[0]=o[F][0],H[2]=T.redips.offset[2]),$=0,0>F||0>$?e():F!==t&&(H[0]=o[F][0],H[2]=H[0]+T.rows[F].cells[$].offsetHeight,(r<H[0]||r>H[2])&&e())}},p=function(){null!==F&&null!==$&&(N=u(F),g(F),q=F,G=$)},g=function(e,o){var t,n;t=T.rows[e];for(var r=0;r<t.cells.length;r++)n=t.cells[r].style,n.backgroundColor=void 0===o?REDIPS.drag.hover.colorTr:o.color[r].toString(),void 0!==REDIPS.drag.hover.borderTr&&(void 0===o?K>F?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:(n.borderTopWidth=o.top[r][0],n.borderTopStyle=o.top[r][1],n.borderTopColor=o.top[r][2],n.borderBottomWidth=o.bottom[r][0],n.borderBottomStyle=o.bottom[r][1],n.borderBottomColor=o.bottom[r][2]))},u=function(e){var o,t,n={color:[],top:[],right:[],bottom:[],left:[]},r=function(e,o){var t="border"+o+"Width",n="border"+o+"Style",r="border"+o+"Color";return[D(e,t),D(e,n),D(e,r)]};o=T.rows[e];for(var d=0;d<o.cells.length;d++)t=o.cells[d],n.color[d]=t.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTr&&(n.top[d]=r(t,"Top"),n.bottom[d]=r(t,"Bottom"));return n},v=function(e,o,t){var n=0,r=0,d=e;if("fixed"!==o&&(n=0-j[0],r=0-j[1]),void 0===t||t===!0){do n+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName)}else do n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName);return[r,n+d.offsetWidth,r+d.offsetHeight,n]},y=function(){var e,o,t;j=m(),e=[],o=D(T,"position"),"fixed"!==o&&(o=D(T.parentNode,"position"));for(var n=T.rows.length-1;n>=0;n--)"none"!==T.rows[n].style.display&&(e[n]=v(T.rows[n],o));T.redips.offset=v(T,o),T.redips.row_offset=e,_=v(W);for(var n=0;n<M.container.length;n++)o=D(M.container[n].div,"position"),t=v(M.container[n].div,o,!1),M.container[n].offset=t,M.container[n].midstX=(t[1]+t[3])/2,M.container[n].midstY=(t[0]+t[2])/2},m=function(){var e=window.pageYOffset||document.documentElement.scrollTop,o=0;return[o,e]},h=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.x>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[0],r=M.width-L.width,d=O.page.x):(n=M.obj.scrollLeft,r=M.obj.scrollWidth-M.obj.clientWidth,d=O.div.x),O.flag.x>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(d,0),n=m()[0],o=parseInt(Q.style.left,10),isNaN(o)&&(o=0)):M.obj.scrollLeft+=d,setTimeout(h,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.x=0,H=[0,0,0,0])},w=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.y>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[1],r=M.height-L.height,d=O.page.y):(n=M.obj.scrollTop,r=M.obj.scrollHeight-M.obj.clientHeight,d=O.div.y),O.flag.y>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(0,d),n=m()[1],o=parseInt(Q.style.top,10),isNaN(o)&&(o=0)):M.obj.scrollTop+=d,setTimeout(w,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.y=0,H=[0,0,0,0])},E=function(e,o){var t,n=[];n[0]=function(e,o){e.redips&&(o.redips={},o.redips.enabled=e.redips.enabled,o.redips.container=e.redips.container,e.redips.enabled&&a(o))},n[1]=function(e,o){e.redips&&(o.redips={},o.redips.emptyRow=e.redips.emptyRow)},t=function(t){var r,d,l=["DIV","TR"];r=e.getElementsByTagName(l[t]),d=o.getElementsByTagName(l[t]);for(var i=0;i<d.length;i++)n[t](r[i],d[i])},"DIV"===e.nodeName?n[0](e,o):"TR"===e.nodeName&&n[1](e,o),t(0),t(1)},b=function(e,t){var n,r,d,l;l=e.className,n=l.match(/climit(\d)_(\d+)/),null!==n&&(r=parseInt(n[1],10),d=parseInt(n[2],10),0===d&&1===t&&(l+=" redips-clone",2===r&&o(!0,e)),d+=t,l=l.replace(/climit\d_\d+/g,"climit"+r+"_"+d),0>=d&&(l=l.replace("redips-clone",""),2===r?(o(!1,e),REDIPS.drag.event.clonedEnd2()):REDIPS.drag.event.clonedEnd1()),e.className=x(l))},o=function(e,o){var n=[];void 0===o?n=W.getElementsByTagName("div"):"string"==typeof o?n=document.querySelectorAll(o):"object"!=typeof o||"DIV"===o.nodeName&&-1!==o.className.indexOf("redips-drag")?n[0]=o:n=o.getElementsByTagName("div"),t(e,n)},t=function(e,o){var t,n,r,d,l,i,s,c,f,p,g,u=[],m=/\bredips-drag\b/i,h=/\bredips-noautoscroll\b/i;for(l=REDIPS.drag.style.opacityDisabled,e===!0||"init"===e?(d=REDIPS.drag.style.borderEnabled,i="move",f=!0):(d=REDIPS.drag.style.borderDisabled,i="auto",f=!1),t=0,n=0;t<o.length;t++)if(m.test(o[t].className))"init"===e||void 0===o[t].redips?(o[t].redips={},o[t].redips.container=W):e===!0&&"number"==typeof l?(o[t].style.opacity="",o[t].style.filter=""):e===!1&&"number"==typeof l&&(o[t].style.opacity=l/100,o[t].style.filter="alpha(opacity="+l+")"),a(o[t],f),o[t].style.borderStyle=d,o[t].style.cursor=i,o[t].redips.enabled=f;else if("init"===e&&(s=D(o[t],"overflow"),"visible"!==s)){for(REDIPS.event.add(o[t],"scroll",y),g=D(o[t],"position"),p=v(o[t],g,!1),c=!h.test(o[t].className),M.container[n]={div:o[t],offset:p,midstX:(p[1]+p[3])/2,midstY:(p[0]+p[2])/2,autoscroll:c},u=o[t].getElementsByTagName("table"),r=0;r<u.length;r++)u[r].sca=M.container[n];n++}},D=function(e,o){return e&&e.currentStyle?e.currentStyle[o]:e&&window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[o]:void 0},I=function(e,o){for(o=o.parentNode;o&&o.nodeName!==e;)o=o.parentNode;return o},x=function(e){return void 0!==e&&(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ")),e},S=function(e,o,t){var n,r,d;if("string"==typeof e&&(e=document.getElementById(e),e=I("TABLE",e)),"TR"===e.nodeName)for(n=e.getElementsByTagName("td"),r=0;r<n.length;r++)if(n[r].style.backgroundColor=t?t:"","empty"===o)n[r].innerHTML="";else for(d=0;d<n[r].childNodes.length;d++)1===n[r].childNodes[d].nodeType&&(n[r].childNodes[d].style.opacity=o/100,n[r].childNodes[d].style.filter="alpha(opacity="+o+")");else e.style.opacity=o/100,e.style.filter="alpha(opacity="+o+")",e.style.backgroundColor=t?t:""},{obj:Q,objOld:U,td:te,hover:Z,scroll:ee,style:oe,clone:ne,init:e,enableDrag:o,enableDivs:t,rowOpacity:S,getScrollPosition:m,getStyle:D,findParent:I,event:re}}(),REDIPS.event||(REDIPS.event=function(){var e,o;return e=function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},o=function(e,o,t){e.removeEventListener?e.removeEventListener(o,t,!1):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=null},{add:e,remove:o}}());
"use strict";var redips={};redips.init=function(){var e=REDIPS.drag;e.init(),e.event.rowDropped=function(o){var n=parseInt(e.objOld.id.replace("rowid","")),t=parseInt(o.id.replace("rowid",""));spreadSheet.moveNode(n,t)},e.event.rowDroppedSource=function(){e.rowOpacity(e.objOld,100)},e.event.rowMoved=function(){e.rowOpacity(e.obj,85),e.rowOpacity(e.objOld,20,"White")},e.event.rowClicked=function(){},e.event.rowNotMoved=function(){},e.event.rowCloned=function(){},e.event.rowNotCloned=function(){},e.event.rowDeleted=function(){},e.event.rowUndeleted=function(){e.rowOpacity(e.objOld,100)}};
var resizeColumnLeft=0,resizeField="0",MIN_COLUMN_WIDTH=70,GRIPS_WIDTH=16,startResize=function(e,i){$(document).bind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).bind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="visible",document.getElementById("resizeLine").style.left=e.pageX+"px",resizeColumnLeft=$(i.parentNode).position().left,resizeField=i.parentNode.id.replace("colHeader","")},resizeEnd=function(e){$(document).unbind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).unbind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="hidden";var i=e.pageX-resizeColumnLeft-GRIPS_WIDTH;MIN_COLUMN_WIDTH>i&&(i=MIN_COLUMN_WIDTH),document.getElementById("colHeaderInput"+resizeField).style.width=i+"px";for(var t=document.querySelectorAll(".fieldInput"+resizeField),r=0;r<t.length;r++)t[r].style.width=i+8+"px"},resizeDrag=function(e){e.pageX>resizeColumnLeft+MIN_COLUMN_WIDTH+GRIPS_WIDTH&&(document.getElementById("resizeLine").style.left=e.pageX+"px")};

var fieldMenuController={displayFieldMenu:function(e,i,t){var n=project.getField(e);this.menu=new FieldMenu(n,spreadSheet.fields),fieldMenuView.render(this.menu,i,t)},handleClick:function(e){var i=this.menu.getMenuItem(e,this.menu),t=this.menu.getMenuItemParent(e,this.menu);if(i.field){var n=project.getField(i.field.name);n[i.varName]=i.value,fieldMenuView.setCheckmarks(e,t.items),t===this.menu&&spreadSheet.updateNumberFieldFormatting(n)}}};
$(document).ready(function(){scrollBarWidth=getScrollBarWidth(),hms.init()});var hms={init:function(){projects.init(function(e){headerView.render(e)})},openProject:function(e){projects.openProject(e,function(e){project.tree=e,$.ajax({type:"GET",url:"api/versions?projectID=1"}).done(function(e){headerView.refresh(JSON.parse(e).versions),hms.selectView(headerView.selectedView())})})},saveToDatabase:function(){project.saveToDatabase(),$.ajax({type:"GET",url:"api/versions?projectID=1"}).done(function(e){headerView.refresh(JSON.parse(e).versions)})},selectView:function(e){project.tree&&(this.view&&this.view.destroy(),this.showView(e))},selectVersion:function(e){projects.openProjectVersion(project.tree.projectID,e,function(e){project.tree=e,hms.selectView(headerView.selectedView())})},showView:function(e){switch(e){case SPREADSHEET_VIEW:this.view=spreadSheetView,spreadSheet.display();break;case TREE_VIEW:this.view=treeView,tree.displayTree();break;case WEIGHTED_TREE_VIEW:this.view=weightedTreeView,tree.displayWeightedTree();break;case CIRCLE_VIEW:this.view=circleView,circleView.display()}},createNewProject:function(e){projects.createNewProject(e),hms.selectView(headerView.selectedView())},nextProjectID:function(){return projects.nextProjectID++},expandToLevel:function(e){project.expandToLevel(project.tree,e),this.view===spreadSheetView?spreadSheet.display():this.view===treeView?treeView.refresh():this.view===weightedTreeView&&weightedTreeView.refresh()}},scrollBarWidth,getScrollBarWidth=function(){var e,t;return e=document.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t};
var spreadSheet={display:function(){project.cleanseData(),spreadSheetView.render(project.tree)},fields:function(){return project.fields()},tree:function(){return project.tree},updateFieldValue:function(e,d){var r=project.findNode(d);r&&(r.values||(r.values={}),r.values[e]=spreadSheetView.getFieldValue(e,d)),project.tree.children.forEach(function(d){aggregate_any(d,e)})},rawValue:function(e,d){var r=project.findNode(parseInt(d));return r.values&&r.values[e]?r.values[e]:""},formattedValue:function(e,d){return d.values&&d.values[e.name]?Field.formatValue(e,d.values[e.name]):""},addField:function(e){project.addField(e),spreadSheetView.addField(e)},hasChildren:function(e){return!project.isNodeChildless(e)},childrenHidden:function(e){return project.isNodeCollapsed(e)},moveNode:function(e,d){var r=project.findNode(d),t=project.findNode(e);spreadSheet.removeNode(t),project.addNode(t,r),spreadSheet.addNode(t,r)},removeNode:function(e){var d=project.findParent(e.id);project.traverse(project.getChildren,spreadSheetView.removeNode,e),project.removeNode(e),spreadSheetView.redrawNodeContent(d)},deleteNode:function(e){var d=project.findNode(e);spreadSheet.removeNode(d)},addNode:function(e,d){project.isNodeCollapsed(d)&&spreadSheet.expandNode(d),spreadSheetView.redrawNodeContent(d),spreadSheetView.insertNodeAfter(e,d),spreadSheetView.renderExpander()},copyNode:function(e){var d=project.findNode(e),r=project.cloneNode(d);project.insertNode(r,d),spreadSheetView.insertNodeBefore(r,d)},expandNode:function(e){project.expandNode(e),spreadSheetView.expandNode(e),spreadSheetView.redrawNodeContent(e)},collapseNode:function(e){project.traverseDescendants(project.getChildren,spreadSheetView.removeNode,e),project.collapseNode(e),spreadSheetView.redrawNodeContent(e)},toggleNode:function(e){var d=project.findNode(e);project.isNodeExpanded(d)?spreadSheet.collapseNode(d):project.isNodeCollapsed(d)&&spreadSheet.expandNode(d)},updateNodeName:function(e,d){project.findNode(e).name=d},updateNumberFieldFormatting:function(e){project.traverse(project.getChildren,function(d){if(d.values){var r=Field.formatValue(e,Number(d.values[e.name]));spreadSheetView.updateFieldValue(e.name,d.id,r)}})},enableDragging:function(e){project.traverse(project.getChildren,spreadSheetView.enableDragging,e)}};
var tree={displayTree:function(){this.data=project.tree,this.field=project.fields()[0],treeView.render()},displayWeightedTree:function(){this.data=project.tree,this.field=project.fields()[0],this.maxFieldValue=this.calcMaxFieldValue(),weightedTreeView.render()},calcMaxFieldValue:function(){var e=Number.NEGATIVE_INFINITY;return project.traverse(project.getChildren,function(t){if(t.values){var r=t.values[tree.field.name];r>e&&(e=r)}}),e}};
var Field=function(i){this.name=i,this.datatype=Field.NUMBER,this.format=Field.NUMBER_FORMAT,this.precision=2,this.agg_type=Field.NO_AGGREGATION,this.agg_qty_field=null};Field.NUMBER="0",Field.STRING="1",Field.CHOICE="2",Field.NO_AGGREGATION="0",Field.SUM_ANY_AGGREGATION="1",Field.NUMBER_FORMAT="0",Field.PERCENT_FORMAT="1",Field.SCIENTIFIC_FORMAT="2",Field.formatValue=function(i,e){if(i.datatype===Field.NUMBER){if(e=Number(e),i.format===Field.NUMBER_FORMAT)return e.toFixed(i.precision);if(i.format===Field.PERCENT_FORMAT)return(100*e).toFixed(i.precision)+"%";if(i.format===Field.SCIENTIFIC_FORMAT)return e.toExponential(i.precision)}else{if(i.datatype===Field.STRING)return e;i.datatype===Field.CHOICE}};
var FieldMenu=function(e,i){var t=new FieldMenuItem("Number",Field.NUMBER,"datatype",e),n=new FieldMenuItem("Format"),m=new FieldMenuItem("Number",Field.NUMBER_FORMAT,"format",e);m.items.push(new FieldMenuItem("0",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",m.items.push(new FieldMenuItem(s,u,"precision",e));n.items.push(m);var r=new FieldMenuItem("Percent",Field.PERCENT_FORMAT,"format",e);r.items.push(new FieldMenuItem("0%",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",r.items.push(new FieldMenuItem(s+"%",u,"precision",e));n.items.push(r);var a=new FieldMenuItem("Scientific",Field.SCIENTIFIC_FORMAT,"format",e);a.items.push(new FieldMenuItem("0e+0",0,"precision",e));for(var s="0.",u=1;11>u;u++)s+="0",a.items.push(new FieldMenuItem(s+"e+0",u,"precision",e));n.items.push(a),t.items.push(n);var d=new FieldMenuItem("Aggregation");d.items.push(new FieldMenuItem("No Aggregation",Field.NO_AGGREGATION,"agg_type",e));var l=new FieldMenuItem("Sum any defined children",Field.SUM_ANY_AGGREGATION,"agg_type",e);for(var F in i){var p=i[F];p.name!=e.name&&l.items.push(new FieldMenuItem(p.name,p.name,"agg_qty_field",e))}d.items.push(l),t.items.push(d),this.items=[],this.items.push(t),this.items.push(new FieldMenuItem("Text",Field.STRING,"datatype",e))};FieldMenu.prototype.getMenuItem=function(e,i){if(e===i.id)return i;if(i.items&&i.items.length>0)for(var t,n=0;n<i.items.length;n++)if(t=this.getMenuItem(e,i.items[n]))return t},FieldMenu.prototype.getMenuItemParent=function(e,i){if(i.items&&i.items.length>0)for(var t=0;t<i.items.length;t++){if(i.items[t].id===e)return i;var n=this.getMenuItemParent(e,i.items[t]);if(n)return n}};
var FieldMenuItem=function(i,e,t,s){this.display=i,this.value=e,this.varName=t,this.field=s,this.items=[],this.id=FieldMenuItem.id++,this.parent=-1,this.checked=s?s[t]===e:!1};FieldMenuItem.id=0;
var project={saveToDatabase:function(){this.cleanseData(),$.ajax({type:"POST",url:"/api/tree",dataType:"json",data:{json:JSON.stringify(this.tree)}})},fields:function(){return this.tree.fields},cleanseData:function(){this.traverse(project.getChildren,function(e){e.children||(e.children=[]),delete e.parent,delete e.x,delete e.x0,delete e.y,delete e.y0})},addField:function(e){this.tree.fields.push(new Field(e))},getField:function(e){for(var n in this.tree.fields){var r=this.tree.fields[n];if(r.name===e)return r}},removeNode:function(e){var n=this.findParent(e.id);n?n.children.splice(n.children.indexOf(e),1):this.tree.children.splice(this.tree.children.indexOf(e),1)},addNode:function(e,n){n.children.push(e),project.setDepths(n)},setDepths:function(e){e.children.forEach(function(n,r){n.depth=e.depth+1,n.depth>project.tree.maxDepth&&(project.tree.maxDepth=n.depth),project.setDepths(n)})},insertNode:function(e,n){var r=this.findParent(n.id);r?r.children.splice(r.children.indexOf(n),0,e):this.tree.children.splice(this.tree.children.indexOf(n),0,e)},cloneNode:function(e){var n=$.extend(!0,{},e);return this.traverse(this.getChildren,function(e){e.id=project.tree.nextNodeID++},n),n},expandNode:function(e){project.isNodeCollapsed(e)&&(e.children=e._children,e._children=[])},fullyExpandNode:function(e){project.expandNode(e),e.children.forEach(function(e){project.fullyExpandNode(e)})},expandToLevel:function(e,n){if(e.depth<n){project.expandNode(e);for(var r in e.children)project.expandToLevel(e.children[r],n)}else{project.collapseNode(e);for(var r in e._children)project.expandToLevel(e._children[r],n)}},collapseNode:function(e){project.isNodeExpanded(e)&&(e._children=e.children,e.children=[])},fullyCollapseNode:function(e){e.children&&(e._children=e.children,e._children.forEach(project.fullyCollapseNode),e.children=[])},toggleExpansion:function(e){e.children?(e._children=e.children,e.children=[]):e._children&&(e.children=e._children,e._children=[])},hasChildren:function(e){return e.children&&0===e.children.length||e._children&&0===e._children.length},isNodeChildless:function(e){return!(e.children&&0!==e.children.length||e._children&&0!==e._children.length)},isNodeCollapsed:function(e){return e._children&&e._children.length>0},isNodeExpanded:function(e){return e.children&&e.children.length>0},findNode:function(e,n){if(n||(n=this.tree),n.id===e)return n;for(var r in n.children){var i=this.findNode(e,n.children[r]);if(i)return i}},findParent:function(e,n,r){if(n||(n=this.tree),n.id===e)return r;for(var i in n.children){var t=this.findParent(e,n.children[i],n);if(t)return t}},traverse:function(e,n,r){r||(r=project.tree),n(r);var i=e(r);for(var t in i)project.traverse(e,n,i[t])},traverseDescendants:function(e,n,r){r||(r=project.tree),r.children.forEach(function(r){project.traverse(e,n,r)})},getChildren:function(e){return e.children&&e.children.length>0?e.children:null}};
var projects={init:function(e){$.ajax({type:"GET",url:"api/projects"}).done(function(t){this.data=t,e(t.projects)})},createNewProject:function(e){$.ajax({type:"POST",url:"/api/addProject?projectName="+e}),project.tree={projectID:project.nextProjectID,projectName:e,name:e,version:1,nextNodeID:3,depth:0,id:1,fields:[],children:[{id:2,name:e,depth:1,children:[]}]},project.saveToDatabase()},openProject:function(e,t){$.ajax({type:"GET",url:"api/tree?projectID="+e}).done(function(e){t(e)})},openProjectVersion:function(e,t,o){$.ajax({type:"GET",url:"api/version?projectID="+e+"&version="+t}).done(function(e){o(e)})}};
var DOWN_ARROW_IMAGE_PATH="images/down-arrow.png",CHECK_MARK_IMAGE_PATH="images/checkmark.png",BLANK_MARK_IMAGE_PATH="images/blankmark.png",ENTER_KEY=13,KEY_UP_ARROW=38,KEY_DOWN_ARROW=40,KEY_LEFT_ARROW=37,KEY_RIGHT_ARROW=39,DEFAULT_NODE_INPUT_WIDTH=390,SPREADSHEET_VIEW="0",TREE_VIEW="1",WEIGHTED_TREE_VIEW="2",CIRCLE_VIEW="3";
function debug(){}debug.print=function(n){console.log(JSON.stringify(n,null,"	"))},debug.printTree=function(){console.log(JSON.stringify(project.tree,null,"	"))};
var circleView={destroy:function(){$("#circleView").remove()},display:function(){function t(t){s=t;var l=d3.transition().duration(d3.event.altKey?7500:750).tween("zoom",function(t){var l=d3.interpolateZoom(n,[s.x,s.y,2*s.r+r]);return function(t){e(l(t))}});l.selectAll("text").filter(function(t){return t.parent===s||"inline"===this.style.display}).style("fill-opacity",function(t){return t.parent===s?1:0}).each("start",function(t){t.parent===s&&(this.style.display="inline")}).each("end",function(t){t.parent!==s&&(this.style.display="none")})}function e(t){var e=l/t[2];n=t,p.attr("transform",function(n){return"translate("+(n.x-t[0])*e+","+(n.y-t[1])*e+")"}),u.attr("r",function(t){return t.r*e})}$("body").append('<div id="circleView"></div>');var n,r=20,l=960,a=d3.scale.linear().domain([-1,5]).range(["hsl(152,80%,80%)","hsl(228,30%,40%)"]).interpolate(d3.interpolateHcl),i=d3.layout.pack().padding(2).size([l-r,l-r]).value(function(t){return Math.PI*t.values.A*t.values.A/4}),c=d3.select("#circleView").append("svg").attr("width",l).attr("height",l).append("g").attr("transform","translate("+l/2+","+l/2+")"),o=project.tree,s=o,d=i.nodes(o),u=c.selectAll("circle").data(d).enter().append("circle").attr("class",function(t){return t.parent?t.children?"node":"node node--leaf":"node node--root"}).style("fill",function(t){return t.children?a(t.depth):null}).on("click",function(e){s!==e&&(t(e),d3.event.stopPropagation())}),p=(c.selectAll("text").data(d).enter().append("text").attr("class","label").style("fill-opacity",function(t){return t.parent===o?1:0}).style("display",function(t){return t.parent===o?null:"none"}).text(function(t){return t.name}),c.selectAll("circle,text"));d3.select("body").style("background",a(-1)).on("click",function(){t(o)}),e([o.x,o.y,2*o.r+r]),d3.select(self.frameElement).style("height",l+"px")}};
var expanderSelector={init:function(e){$("#expanderContainer").html(expanderSelector.getMarkup(e)),$("#expanderSelector").change(expanderSelector.handle)},handle:function(){var e=parseInt($("#expanderSelector").val());e>0&&hms.expandToLevel(e)},getMarkup:function(e){for(var n='<div id="expanderSelectContainer"><select id="expanderSelector" class="form-control"><option value="0">Expand/Collapse to Level</option>',t=1;e+1>t;t++)n+='<option value="'+t+'">'+t+"</option>";return n+='</select><input id="projectActionInput" class="form-control"></input></div>'}};
var fieldMenuView={render:function(e,d,i){var n='<div id="fieldMenu" style="left:'+(d-10)+"px;top:"+(i-10)+'px;">';n+=this.renderMenu(e),n+="</div>",$("body").append($(n)),$("#fieldMenu").mouseleave(function(){$("#fieldMenu").remove()})},renderMenu:function(e){var d="<ul>";return e.items.forEach(function(e){d+='<li onclick="fieldMenuController.handleClick('+e.id+');">';var i="uncheckedFieldMenuItem";e.field&&e.checked&&(i="checkedFieldMenuItem"),d+='<img id="FieldMenuItem'+e.id+'" src="'+CHECK_MARK_IMAGE_PATH+'" class="'+i+'"/>',d+=e.display,e.items&&e.items.length>0&&(d+='<div class="arrowRight"></div>',d+=fieldMenuView.renderMenu(e)),d+="</li>"}),d+"</ul>"},setCheckmarks:function(e,d){d.forEach(function(e){$("#FieldMenuItem"+e.id).removeClass("checkedFieldMenuItem").addClass("uncheckedFieldMenuItem")}),$("#FieldMenuItem"+e).removeClass("uncheckedFieldMenuItem").addClass("checkedFieldMenuItem")}};
var headerView={render:function(e){var t='<select id="projectSelector" class="form-control"><option id="selectProjectOption" value="0">Select Project...</option>';e.forEach(function(e){t+='<option value="'+e.id+'">'+e.name+"</option>"}),t+='<option id="newProjectOption" value="-1">Create New Project...</option></select><input id="editNewProjectNameInput" class="form-control"></input>',$("#header").html(t),$("#projectSelector").change(function(){headerView.selectProject($(this))}),$("#editNewProjectNameInput").keyup(function(e){headerView.createNewProject(e)})},refresh:function(e){$("#versionSelector").remove(),$("#viewSelector").remove(),$("#save-database-button").remove();var t='<select id="versionSelector" class="form-control">';e.forEach(function(e){t+='<option value="'+e.version+'">'+e.version+"</option>"}),t+="</select>",$("#header").append(t),$("#header").append('<a href="#" id="save-database-button" class="btn btn-default">Save to Database</a>');var o='<select id="viewSelector" class="form-control"><option value="0">Spread Sheet</option><option value="1">Tree</option><option value="2">Weighted Tree</option><option value="3">Circle Packing</option></select>';$("#header").append(o),$("#save-database-button").click(function(){hms.saveToDatabase()}),$("#viewSelector").change(function(){hms.selectView($(this).val())}),$("#versionSelector").change(function(){hms.selectVersion($(this).val())})},selectedView:function(){return $("#viewSelector").val()},selectProject:function(e){"newProjectOption"===e.find(":selected").attr("id")?($("#editNewProjectNameInput").val("Type New Project Name and Press Enter to Create"),$("#editNewProjectNameInput").show().focus().select()):($("#selectProjectOption").remove(),hms.openProject(e.val()))},createNewProject:function(e){if(e.keyCode==ENTER_KEY){$("#selectProjectOption").remove();var t=$("#editNewProjectNameInput").val();$("#editNewProjectNameInput").hide();var o=hms.nextProjectID(),r=document.createElement("option");r.text=t,r.value=o.toString(),$(r).insertBefore("#projectSelector option:nth-child("+$("#projectSelector").length+")"),$("#projectSelector").val(o),hms.createNewProject(t)}}};
var projectAction={init:function(){$("#project-action-container").html(projectAction.markup()),$("#projectActionInput").keyup(function(t){t.keyCode==ENTER_KEY&&projectAction.enterPressed()}),$("#projectActionSelector").change(projectAction.handle)},handle:function(){"addField"==$("#projectActionSelector").val()&&($("#projectActionInput").val("Type New Field Name and Press Enter to Create"),$("#projectActionInput").show().focus().select())},enterPressed:function(){"addField"==$("#projectActionSelector").val()&&(spreadSheet.addField($("#projectActionInput").val()),$("#projectActionInput").hide(),$("#projectActionSelector").val("blank"))},markup:function(){return'<div id="projectActionSelectorContainer"><select id="projectActionSelector" class="form-control"><option value="blank"></option><option value="addField">Add Field</option></select><input id="projectActionInput" class="form-control"></input></div>'}};
var spreadSheetKeyHandler={checkKey:function(e){if(e=e||window.event,e.keyCode==KEY_UP_ARROW){e.preventDefault();var t=$(spreadSheetKeyHandler.findAncestor(document.activeElement,"tr")).prev()[0];t&&$("#"+spreadSheetKeyHandler.getNextElementID(t)).focus()}else if(e.keyCode==KEY_DOWN_ARROW){e.preventDefault();var n=$(spreadSheetKeyHandler.findAncestor(document.activeElement,"tr")).next()[0];n&&$("#"+spreadSheetKeyHandler.getNextElementID(n)).focus()}else e.keyCode==KEY_RIGHT_ARROW?(e.preventDefault(),$(spreadSheetKeyHandler.findAncestor(document.activeElement,"td")).next().find("input").focus()):e.keyCode==KEY_LEFT_ARROW&&(e.preventDefault(),$(spreadSheetKeyHandler.findAncestor(document.activeElement,"td")).prev().find("input").focus())},getNextElementID:function(e){var t=document.activeElement.id;if(t.indexOf("nodeInput")>-1)return"nodeInput"+e.id.replace("rowid","");for(var n=document.activeElement.className.split(" "),r=0;r<n.length;r++){var d=n[r];if(d.indexOf("fieldInput")>-1&&"fieldInput"!=d){var a=d.replace("fieldInput","");return a+e.id.replace("datarowid","")}}},findAncestor:function(e,t){for(t=t.toLowerCase();e&&e.parentNode;)if(e=e.parentNode,e.tagName&&e.tagName.toLowerCase()===t)return e}};
var spreadSheetView={render:function(){$(document).on("keydown",spreadSheetKeyHandler.checkKey),$("#spreadSheetView").remove(),$("body").append(this.spreadSheetMarkup()),projectAction.init(),this.renderExpander(),this.renderFieldsRow(),this.renderDataTable(),this.renderNodeColumn()},destroy:function(){$("#spreadSheetView").remove(),$(document).off("keydown")},spreadSheetMarkup:function(){return'<div id="spreadSheetView"><div id="spreadSheetViewActions"><div id="project-action-container"></div><div id="expanderContainer"></div></div><div id="fields-header-row"></div><div id="redips-drag"></div><div id="data-container"></div></div>'},renderExpander:function(){expanderSelector.init(spreadSheet.tree().maxDepth)},renderFieldsRow:function(){$("#fields-header-row").html('<table id="fieldHeaderTable"><tr id="fieldHeaderRow"></tr></table>'),spreadSheet.fields().forEach(function(e){$("#fieldHeaderRow").append(spreadSheetView.fieldHeader(e.name)),$("#fieldMenuButton"+e.name).click(function(d){spreadSheetView.showFieldMenu(d,e.name)})}),$("#fields-header-row").css("right",scrollBarWidth+"px")},fieldHeader:function(e){return'<td class="fieldHeaderCell"><div class="fieldHeaderContainer"><div class="moveColGrip"></div><div class="fieldNameInputContainer"><textarea id="colHeaderInput'+e+'" class="fieldNameInput">'+e+'</textarea></div><div class="fieldHeaderButton"><img id="fieldMenuButton'+e+'" src="images/down-arrow.png"/></div><div id="grip'+e+'" class="resizeColGrip" onmousedown="startResize(event, this)"></div></div></td>'},showFieldMenu:function(e,d){0===$("#fieldMenu").length&&fieldMenuController.displayFieldMenu(d,e.clientX,e.clientY)},renderDataTable:function(){$("#data-container").append('<table id="dataTable"></table>'),spreadSheet.tree().children.forEach(function(e){$("#dataTable").append(spreadSheetView.dataRowsMarkup(e))}),$("#data-container").scroll(function(){$("#redips-drag").scrollTop($("#data-container").scrollTop()),$("#fields-header-row").scrollLeft($("#data-container").scrollLeft())})},dataRowsMarkup:function(e){var d='<tr id="datarowid'+e.id+'" class="dataRow">';return spreadSheet.fields().forEach(function(t){d+='<td class="cell"><input class="fieldInput fieldInput'+t.name+'" type="text" id="'+t.name+e.id+'" value="'+spreadSheet.formattedValue(t,e)+'" oninput="spreadSheet.updateFieldValue(\''+t.name+"',"+e.id+')" onfocus="$(this).val(spreadSheet.rawValue(\''+t.name+"',"+e.id+'))"></td>'}),e.children.forEach(function(e){d+=spreadSheetView.dataRowsMarkup(e)}),d+"</tr>"},renderDataCell:function(e,d,t,n){$(e).append(spreadSheetView.fieldCell(d,t,n)),$("#"+d+t).on("input",function(){spreadSheet.updateFieldValue(d,t)}),$("#"+d+t).focus(function(){$(this).val(spreadSheet.rawValue(d,t))})},fieldCell:function(e,d,t){return'<td class="cell"><input class="fieldInput fieldInput'+e+'" type="text" id="'+e+d+'" value="'+t+'"></td>'},nodeRowMarkup:function(e){var d='<tr id="rowid'+e.id+'" class="nodeRow"><td class="redips-rowhandler cell"><div id="nodeContent'+e.id+'" class="node-container">';return d+=spreadSheetView.deleteButton(e.id)+spreadSheetView.copyButton(e.id)+spreadSheetView.dragHandle,d+=spreadSheetView.nodeContent(e),e.children.forEach(function(e){d+=spreadSheetView.nodeRowMarkup(e)}),d+"</div></td></tr>"},nodeContent:function(e){var d,t=10*(e.depth-1),n=t;return spreadSheet.hasChildren(e)?d=spreadSheet.childrenHidden(e)?'<span class="glyphicon glyphicon-chevron-right"></span>':'<span class="glyphicon glyphicon-chevron-down"></span>':(d="<span></span>",t+=12,n-=10),spreadSheetView.expandIcon(e.id,t,d)+spreadSheetView.nodeInput(e,DEFAULT_NODE_INPUT_WIDTH-n)},renderNodeColumn:function(){$("#redips-drag").html('<table id="treeTable"></table>'),spreadSheet.tree().children.forEach(function(e){$("#treeTable").append(spreadSheetView.nodeRowMarkup(e))}),$("#redips-drag").css("bottom",scrollBarWidth+"px"),redips.init()},dragHandle:'<div class="redips-drag pull-right"><i class="glyphicon glyphicon-move"></i></div>',copyButton:function(e){return'<a href="#"  class="pull-right btn btn-info btn-xs copy-button" onclick="spreadSheet.copyNode('+e+')"><i class="glyphicon glyphicon-plus"></i></a>'},deleteButton:function(e){return'<a href="#" class="pull-right btn btn-danger btn-xs delete-button" onclick="spreadSheet.deleteNode('+e+')"><i class="glyphicon glyphicon-remove"></i></a>'},expandIcon:function(e,d,t){return'<a href="#" id="icon'+e+'" class="btn btn-xs" style="margin-left:'+d+'px" onclick="spreadSheet.toggleNode('+e+')">'+t+"</a>"},nodeInput:function(e,d){return'<input id="nodeInput'+e.id+'" class="nodeTextInput" style="width:'+d+'px" type="text" value="'+e.name+'" oninput="spreadSheetView.updateNodeName('+e.id+')"/>'},expandNode:function(e){for(var d,t=e.children.length-1;t>=0;t--)d=e.children[t],$(spreadSheetView.dataRowsMarkup(d)).insertAfter($("#datarowid"+e.id)),$(spreadSheetView.nodeRowMarkup(d)).insertAfter($("#rowid"+e.id));spreadSheetView.enableDragging(e)},redrawNodeContent:function(e){$("#icon"+e.id).remove(),$("#nodeInput"+e.id).remove(),$("#nodeContent"+e.id).append(spreadSheetView.nodeContent(e))},addField:function(e){$("#fieldHeaderRow").append(spreadSheetView.fieldHeader(e)),$("#fieldMenuButton"+e).click(function(d){spreadSheetView.showFieldMenu(d,e)}),$(".dataRow").each(function(d,t){spreadSheetView.renderDataCell(t,e,parseInt(t.id.replace("datarowid","")),"")})},updateNodeName:function(e){var d=$("#nodeInput"+e).val();spreadSheet.updateNodeName(e,d),$("#nodeInput"+e).attr("value",d)},removeNode:function(e){$("#rowid"+e.id).remove(),$("#datarowid"+e.id).remove()},insertNodeBefore:function(e,d){$(spreadSheetView.nodeRowMarkup(e)).insertBefore($("#rowid"+d.id)),$(spreadSheetView.dataRowsMarkup(e)).insertBefore($("#datarowid"+d.id)),spreadSheetView.enableDragging(e)},insertNodeAfter:function(e,d){$(spreadSheetView.nodeRowMarkup(e)).insertAfter($("#rowid"+d.id)),$(spreadSheetView.dataRowsMarkup(e)).insertAfter($("#datarowid"+d.id)),spreadSheetView.enableDragging(e)},enableDragging:function(e){REDIPS.drag.enableDivs("init",$("#rowid"+e.id).find("div"))},getFieldValue:function(e,d){return $("#"+e+d).val()},updateFieldValue:function(e,d,t){$("#"+e+d).val(t)}};
var MIN_NODE_SIZE=5,MAX_NODE_SIZE=100,VERTICAL_VIEW=0,HORIZONTAL_VIEW=1,treeView={destroy:function(){$("#treeView").remove()},refresh:function(){treeView.update(treeView.root)},rotate:function(){treeView.direction===HORIZONTAL_VIEW?(treeView.direction=VERTICAL_VIEW,treeView.horizontal_spacing=100,treeView.vertical_spacing=60,treeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.x,e.y]}),treeView.root.y0=treeView.viewerHeight/2,treeView.root.x0=0):(treeView.direction=HORIZONTAL_VIEW,treeView.horizontal_spacing=150,treeView.vertical_spacing=25,treeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]}),treeView.root.x0=treeView.viewerHeight/2,treeView.root.y0=0),treeView.update(treeView.root)},init:function(){treeView.direction=HORIZONTAL_VIEW,treeView.selectedNode=null,treeView.draggingNode=null,treeView.duration=750,treeView.horizontal_spacing=150,treeView.vertical_spacing=25,treeView.maxLabelLength=0,project.traverse(project.getChildren,function(e){treeView.maxLabelLength=Math.max(e.name.length,treeView.maxLabelLength)}),treeView.viewerWidth=$("#tree-container").width(),treeView.viewerHeight=$("#tree-container").height(),treeView.tree=d3.layout.tree().size([treeView.viewerHeight,treeView.viewerWidth]),treeView.root=project.tree,treeView.dragStarted=null,treeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]})},render:function(){function e(){treeView.svgGroup.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function t(e,t){treeView.draggingNode=e,d3.select(t).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(t).attr("class","node activeDrag"),treeView.svgGroup.selectAll("g.node").sort(function(e,t){return e.id!=treeView.draggingNode.id?1:-1}),nodes.length>1&&(links=treeView.tree.links(nodes),nodePaths=treeView.svgGroup.selectAll("path.link").data(links,function(e){return e.target.id}).remove(),nodesExit=treeView.svgGroup.selectAll("g.node").data(nodes,function(e){return e.id}).filter(function(e,t){return e.id!=treeView.draggingNode.id}).remove()),parentLink=treeView.tree.links(treeView.tree.nodes(treeView.draggingNode.parent)),treeView.svgGroup.selectAll("path.link").filter(function(e,t){return e.target.id==treeView.draggingNode.id}).remove(),treeView.dragStarted=null}function r(e){e!=treeView.root&&(treeView.dragStarted&&(domNode=this,t(e,domNode)),e.x0+=d3.event.dy,e.y0+=d3.event.dx,d3.select(this).attr("transform","translate("+e.y0+","+e.x0+")"),treeView.updateTempConnector())}treeView.destroy(),$("body").append('<div id="treeView"><div id="treeViewOptions"><div id="expanderContainer"></div></div><div id="tree-container"></div></div>'),expanderSelector.init(project.tree.maxDepth),$("#treeViewOptions").append('<a href="#" id="treeViewRotateButton" class="btn btn-default pull-right">Rotate View</a>'),$("#treeViewRotateButton").click(function(){treeView.rotate()}),treeView.init(),treeView.zoomListener=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",e);var i=d3.select("#tree-container").append("svg").attr("width",treeView.viewerWidth).attr("height",treeView.viewerHeight).attr("class","overlay").call(treeView.zoomListener);dragListener=d3.behavior.drag().on("dragstart",treeView.dragstart).on("drag",r).on("dragend",treeView.dragend),treeView.svgGroup=i.append("g"),treeView.root.x0=treeView.viewerHeight/2,treeView.root.y0=0,treeView.update(treeView.root),treeView.centerNode(treeView.root)},click:function(e){d3.event.defaultPrevented||(project.toggleExpansion(e),treeView.update(e))},update:function(e){var t=0,r=[1],i=function(e,t){t.children&&t.children.length>0&&(r.length<=e+1&&r.push(0),r[e+1]+=t.children.length,t.children.forEach(function(t){i(e+1,t)}))};i(0,treeView.root);var n=d3.max(r)*treeView.vertical_spacing;treeView.tree=treeView.tree.size([n,treeView.viewerWidth]);var o=treeView.tree.nodes(treeView.root).reverse(),a=treeView.tree.links(o);o.forEach(function(e){e.y=e.depth*treeView.horizontal_spacing}),node=treeView.svgGroup.selectAll("g.node").data(o,function(e){return e.id||(e.id=++t)});var d=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(t){return"translate("+e.y0+","+e.x0+")"}).on("click",treeView.click);d.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"}),d.append("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}).style("fill-opacity",0),d.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(e){treeView.overCircle(e)}).on("mouseout",function(e){treeView.outCircle(e)}),node.select("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}),node.select("circle.nodeCircle").attr("r",function(e){return treeView.computeNodeSize(e)}).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"});var l;l=treeView.direction===VERTICAL_VIEW?node.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}):node.attr("transform",function(e){return"translate("+e.y+","+e.x+")"}),l.select("text").style("fill-opacity",1);var c=node.exit().attr("transform",function(t){return"translate("+e.y+","+e.x+")"}).remove();c.select("circle").attr("r",0),c.select("text").style("fill-opacity",0);var s=treeView.svgGroup.selectAll("path.link").data(a,function(e){return e.target.id});s.enter().insert("path","g").attr("class","link").attr("d",function(t){var r={x:e.x0,y:e.y0};return treeView.diagonal({source:r,target:r})}),s.attr("d",treeView.diagonal),s.exit().attr("d",function(t){var r={x:e.x,y:e.y};return treeView.diagonal({source:r,target:r})}).remove(),o.forEach(function(e){e.x0=e.x,e.y0=e.y})},dragstart:function(e){e!=treeView.root&&(treeView.dragStarted=!0,nodes=treeView.tree.nodes(e),d3.event.sourceEvent.stopPropagation())},dragend:function(e){e!=treeView.root&&(domNode=this,treeView.selectedNode&&(project.removeNode(treeView.draggingNode),treeView.selectedNode.children||(treeView.selectedNode.children=[]),treeView.selectedNode.children.push(treeView.draggingNode),project.expandNode(treeView.selectedNode)),treeView.selectedNode=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),treeView.updateTempConnector(),null!==treeView.draggingNode&&(treeView.update(treeView.root),treeView.draggingNode=null))},updateTempConnector:function(){var e=[];null!==treeView.draggingNode&&null!==treeView.selectedNode&&(e=[{source:{x:treeView.selectedNode.y0,y:treeView.selectedNode.x0},target:{x:treeView.draggingNode.y0,y:treeView.draggingNode.x0}}]);var t=treeView.svgGroup.selectAll(".templink").data(e);t.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),t.attr("d",d3.svg.diagonal()),t.exit().remove()},overCircle:function(e){treeView.selectedNode=e,treeView.updateTempConnector()},outCircle:function(e){treeView.selectedNode=null,treeView.updateTempConnector()},centerNode:function(e){scale=treeView.zoomListener.scale(),x=-e.y0,y=-e.x0,x=x*scale+treeView.viewerWidth/4,y=y*scale+treeView.viewerHeight/2,d3.select("g").attr("transform","translate("+x+","+y+")scale("+scale+")"),treeView.zoomListener.scale(scale),treeView.zoomListener.translate([x,y])},computeNodeSize:function(e){var t=MIN_NODE_SIZE;return t}};
var MIN_NODE_SIZE=5,MAX_NODE_SIZE=100,VERTICAL_VIEW=0,HORIZONTAL_VIEW=1,weightedTreeView={destroy:function(){$("#treeView").remove()},refresh:function(){weightedTreeView.update(weightedTreeView.root)},rotate:function(){weightedTreeView.direction===HORIZONTAL_VIEW?(weightedTreeView.direction=VERTICAL_VIEW,weightedTreeView.horizontal_spacing=100,weightedTreeView.vertical_spacing=60,weightedTreeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.x,e.y]}),weightedTreeView.root.y0=weightedTreeView.viewerHeight/2,weightedTreeView.root.x0=0):(weightedTreeView.direction=HORIZONTAL_VIEW,weightedTreeView.horizontal_spacing=300,weightedTreeView.vertical_spacing=200,weightedTreeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]}),weightedTreeView.root.x0=weightedTreeView.viewerHeight/2,weightedTreeView.root.y0=0),weightedTreeView.update(weightedTreeView.root)},init:function(){weightedTreeView.direction=HORIZONTAL_VIEW,weightedTreeView.selectedNode=null,weightedTreeView.draggingNode=null,weightedTreeView.duration=750,weightedTreeView.horizontal_spacing=300,weightedTreeView.vertical_spacing=200,weightedTreeView.maxLabelLength=0,project.traverse(project.getChildren,function(e){weightedTreeView.maxLabelLength=Math.max(e.name.length,weightedTreeView.maxLabelLength)}),weightedTreeView.viewerWidth=$("#tree-container").width(),weightedTreeView.viewerHeight=$("#tree-container").height(),weightedTreeView.tree=d3.layout.tree().size([weightedTreeView.viewerHeight,weightedTreeView.viewerWidth]),weightedTreeView.root=project.tree,weightedTreeView.dragStarted=null,weightedTreeView.diagonal=d3.svg.diagonal().projection(function(e){return[e.y,e.x]})},render:function(){function e(){weightedTreeView.svgGroup.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function t(e,t){weightedTreeView.draggingNode=e,d3.select(t).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(t).attr("class","node activeDrag"),weightedTreeView.svgGroup.selectAll("g.node").sort(function(e,t){return e.id!=weightedTreeView.draggingNode.id?1:-1}),nodes.length>1&&(links=weightedTreeView.tree.links(nodes),nodePaths=weightedTreeView.svgGroup.selectAll("path.link").data(links,function(e){return e.target.id}).remove(),nodesExit=weightedTreeView.svgGroup.selectAll("g.node").data(nodes,function(e){return e.id}).filter(function(e,t){return e.id!=weightedTreeView.draggingNode.id}).remove()),parentLink=weightedTreeView.tree.links(weightedTreeView.tree.nodes(weightedTreeView.draggingNode.parent)),weightedTreeView.svgGroup.selectAll("path.link").filter(function(e,t){return e.target.id==weightedTreeView.draggingNode.id}).remove(),weightedTreeView.dragStarted=null}function i(e){e!=weightedTreeView.root&&(weightedTreeView.dragStarted&&(domNode=this,t(e,domNode)),e.x0+=d3.event.dy,e.y0+=d3.event.dx,d3.select(this).attr("transform","translate("+e.y0+","+e.x0+")"),weightedTreeView.updateTempConnector())}weightedTreeView.destroy(),$("body").append('<div id="treeView"><div id="treeViewOptions"><div id="expanderContainer"></div></div><div id="tree-container"></div></div>'),expanderSelector.init(project.tree.maxDepth),$("#treeViewOptions").append('<a href="#" id="treeViewRotateButton" class="btn btn-default pull-right">Rotate View</a>'),$("#treeViewRotateButton").click(function(){weightedTreeView.rotate()}),weightedTreeView.init(),weightedTreeView.zoomListener=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",e);var r=d3.select("#tree-container").append("svg").attr("width",weightedTreeView.viewerWidth).attr("height",weightedTreeView.viewerHeight).attr("class","overlay").call(weightedTreeView.zoomListener);dragListener=d3.behavior.drag().on("dragstart",weightedTreeView.dragstart).on("drag",i).on("dragend",weightedTreeView.dragend),weightedTreeView.svgGroup=r.append("g"),weightedTreeView.root.x0=weightedTreeView.viewerHeight/2,weightedTreeView.root.y0=0,weightedTreeView.update(weightedTreeView.root),weightedTreeView.centerNode(weightedTreeView.root)},click:function(e){d3.event.defaultPrevented||(project.toggleExpansion(e),weightedTreeView.update(e))},update:function(e){var t=0,i=[1],r=function(e,t){t.children&&t.children.length>0&&(i.length<=e+1&&i.push(0),i[e+1]+=t.children.length,t.children.forEach(function(t){r(e+1,t)}))};r(0,weightedTreeView.root);var d=d3.max(i)*weightedTreeView.vertical_spacing;weightedTreeView.tree=weightedTreeView.tree.size([d,weightedTreeView.viewerWidth]);var n=weightedTreeView.tree.nodes(weightedTreeView.root).reverse(),o=weightedTreeView.tree.links(n);n.forEach(function(e){e.y=e.depth*weightedTreeView.horizontal_spacing}),node=weightedTreeView.svgGroup.selectAll("g.node").data(n,function(e){return e.id||(e.id=++t)});var a=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(t){return"translate("+e.y0+","+e.x0+")"}).on("click",weightedTreeView.click);a.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"}),a.append("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}).style("fill-opacity",0),a.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(e){weightedTreeView.overCircle(e)}).on("mouseout",function(e){weightedTreeView.outCircle(e)}),node.select("text").attr("x",function(e){return project.hasChildren(e)?-10:10}).attr("text-anchor",function(e){return project.hasChildren(e)?"end":"start"}).text(function(e){return e.name}),node.select("circle.nodeCircle").attr("r",function(e){return weightedTreeView.computeNodeSize(e)}).style("fill",function(e){return project.isNodeCollapsed(e)?"lightsteelblue":"#fff"});var w;w=weightedTreeView.direction===VERTICAL_VIEW?node.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}):node.attr("transform",function(e){return"translate("+e.y+","+e.x+")"}),w.select("text").style("fill-opacity",1);var g=node.exit().attr("transform",function(t){return"translate("+e.y+","+e.x+")"}).remove();g.select("circle").attr("r",0),g.select("text").style("fill-opacity",0);var l=weightedTreeView.svgGroup.selectAll("path.link").data(o,function(e){return e.target.id});l.enter().insert("path","g").attr("class","link").attr("d",function(t){var i={x:e.x0,y:e.y0};return weightedTreeView.diagonal({source:i,target:i})}),l.attr("d",weightedTreeView.diagonal),l.exit().attr("d",function(t){var i={x:e.x,y:e.y};return weightedTreeView.diagonal({source:i,target:i})}).remove(),n.forEach(function(e){e.x0=e.x,e.y0=e.y})},dragstart:function(e){e!=weightedTreeView.root&&(weightedTreeView.dragStarted=!0,nodes=weightedTreeView.tree.nodes(e),d3.event.sourceEvent.stopPropagation())},dragend:function(e){e!=weightedTreeView.root&&(domNode=this,weightedTreeView.selectedNode&&(project.removeNode(weightedTreeView.draggingNode),weightedTreeView.selectedNode.children||(weightedTreeView.selectedNode.children=[]),weightedTreeView.selectedNode.children.push(weightedTreeView.draggingNode),project.expandNode(weightedTreeView.selectedNode)),weightedTreeView.selectedNode=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),weightedTreeView.updateTempConnector(),null!==weightedTreeView.draggingNode&&(weightedTreeView.update(weightedTreeView.root),weightedTreeView.draggingNode=null))},updateTempConnector:function(){var e=[];null!==weightedTreeView.draggingNode&&null!==weightedTreeView.selectedNode&&(e=[{source:{x:weightedTreeView.selectedNode.y0,y:weightedTreeView.selectedNode.x0},target:{x:weightedTreeView.draggingNode.y0,y:weightedTreeView.draggingNode.x0}}]);var t=weightedTreeView.svgGroup.selectAll(".templink").data(e);t.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),t.attr("d",d3.svg.diagonal()),t.exit().remove()},overCircle:function(e){weightedTreeView.selectedNode=e,weightedTreeView.updateTempConnector()},outCircle:function(e){weightedTreeView.selectedNode=null,weightedTreeView.updateTempConnector()},centerNode:function(e){scale=weightedTreeView.zoomListener.scale(),x=-e.y0,y=-e.x0,x=x*scale+weightedTreeView.viewerWidth/4,y=y*scale+weightedTreeView.viewerHeight/2,d3.select("g").attr("transform","translate("+x+","+y+")scale("+scale+")"),weightedTreeView.zoomListener.scale(scale),weightedTreeView.zoomListener.translate([x,y])},computeNodeSize:function(e){var t=MIN_NODE_SIZE;return tree.field&&(e.values&&e.values[tree.field.name]&&(t=MAX_NODE_SIZE*Math.sqrt(e.values[tree.field.name]/tree.maxFieldValue)),MIN_NODE_SIZE>t&&(t=MIN_NODE_SIZE)),t}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZy5qcyIsImRyYWctbGliLmpzIiwiZHJhZy5qcyIsInJlc2l6ZS1jb2x1bW4uanMiLCJjb250cm9sbGVyL2V4cGFuZGVyLmpzIiwiY29udHJvbGxlci9maWVsZE1lbnVDb250cm9sbGVyLmpzIiwiY29udHJvbGxlci9obXMuanMiLCJjb250cm9sbGVyL3NwcmVhZFNoZWV0LmpzIiwiY29udHJvbGxlci90cmVlLmpzIiwibW9kZWwvRmllbGQuanMiLCJtb2RlbC9GaWVsZE1lbnUuanMiLCJtb2RlbC9GaWVsZE1lbnVJdGVtLmpzIiwibW9kZWwvcHJvamVjdC5qcyIsIm1vZGVsL3Byb2plY3RzLmpzIiwidXRpbC9jb25zdGFudHMuanMiLCJ1dGlsL2RlYnVnLmpzIiwidmlldy9jaXJjbGVWaWV3LmpzIiwidmlldy9leHBhbmRlclNlbGVjdG9yLmpzIiwidmlldy9maWVsZE1lbnVWaWV3LmpzIiwidmlldy9oZWFkZXJWaWV3LmpzIiwidmlldy9wcm9qZWN0QWN0aW9uLmpzIiwidmlldy9zcHJlYWRTaGVldEtleUhhbmRsZXIuanMiLCJ2aWV3L3NwcmVhZFNoZWV0Vmlldy5qcyIsInZpZXcvdHJlZVZpZXcuanMiLCJ2aWV3L3dlaWdodGVkVHJlZVZpZXcuanMiXSwibmFtZXMiOlsiYWdncmVnYXRlX2FueSIsIm5vZGUiLCJmaWVsZCIsImNoaWxkcmVuIiwibGVuZ3RoIiwiY2hpbGRyZW5TdW0iLCJpIiwidmFsdWVzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlkIiwidmFsdWUiLCJwYXJzZUZsb2F0IiwiUkVESVBTIiwiZHJhZyIsImluaXQiLCJlbmFibGVEcmFnIiwiZW5hYmxlRGl2cyIsImhhbmRsZXJPbk1vdXNlRG93biIsImhhbmRsZXJPbk1vdXNlVXAiLCJoYW5kbGVyT25Nb3VzZU1vdmUiLCJlbGVtZW50RHJvcCIsInJlc2V0U3R5bGVzIiwicmVnaXN0ZXJFdmVudHMiLCJjZWxsQ2hhbmdlZCIsImhhbmRsZXJPblJlc2l6ZSIsInNldFRhYmxlUm93Q29sdW1uIiwic2V0UG9zaXRpb24iLCJzZXRUZFN0eWxlIiwiZ2V0VGRTdHlsZSIsImJveE9mZnNldCIsImNhbGN1bGF0ZUNlbGxzIiwiZ2V0U2Nyb2xsUG9zaXRpb24iLCJhdXRvU2Nyb2xsWCIsImF1dG9TY3JvbGxZIiwiY29weVByb3BlcnRpZXMiLCJjbG9uZUxpbWl0IiwiZ2V0U3R5bGUiLCJmaW5kUGFyZW50Iiwicm93T3BhY2l0eSIsInJvd0Nsb25lIiwicm93RHJvcCIsIm5vcm1hbGl6ZSIsImJnU3R5bGVPbGQiLCJ0YWJsZSIsIm1vdmVkIiwiY2xvbmVkIiwid2luZG93U2Nyb2xsUG9zaXRpb24iLCJvYmpNYXJnaW4iLCJzY3JlZW4iLCJ3aWR0aCIsImhlaWdodCIsInNjcm9sbERhdGEiLCJjb250YWluZXIiLCJvYmoiLCJlZGdlIiwicGFnZSIsIngiLCJ5IiwiZGl2IiwiZmxhZyIsImNsb25lZElkIiwiY3VycmVudENlbGwiLCJkcmFnQ29udGFpbmVyIiwiZGl2Qm94IiwicG9pbnRlciIsInRocmVzaG9sZCIsInNoaWZ0S2V5IiwiY2xvbmVDbGFzcyIsInJvdyIsInJvd19vbGQiLCJyb3dfc291cmNlIiwiY2VsbCIsImNlbGxfb2xkIiwiY2VsbF9zb3VyY2UiLCJvYmpPbGQiLCJob3ZlciIsImNvbG9yVGQiLCJjb2xvclRyIiwic2Nyb2xsIiwiZW5hYmxlIiwiYm91bmQiLCJzcGVlZCIsInN0eWxlIiwiYm9yZGVyRGlzYWJsZWQiLCJvcGFjaXR5RGlzYWJsZWQiLCJyb3dFbXB0eUNvbG9yIiwidGQiLCJjbG9uZSIsImtleURpdiIsImtleVJvdyIsInNlbmRCYWNrIiwiZHJvcCIsImV2ZW50IiwiY2xvbmVkRHJvcHBlZCIsImNsb25lZEVuZDEiLCJjbG9uZWRFbmQyIiwiZHJvcHBlZCIsImRyb3BwZWRCZWZvcmUiLCJmaW5pc2giLCJub3RDbG9uZWQiLCJub3RNb3ZlZCIsInJvd0NoYW5nZWQiLCJyb3dDbGlja2VkIiwicm93Q2xvbmVkIiwicm93RHJvcHBlZCIsInJvd0Ryb3BwZWRCZWZvcmUiLCJyb3dEcm9wcGVkU291cmNlIiwicm93TW92ZWQiLCJyb3dOb3RDbG9uZWQiLCJyb3dOb3RNb3ZlZCIsInJlZGlwc0Nsb25lIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwicmVkaXBzIiwiYWRkIiwid2luZG93IiwiZSIsIm9mZnNldCIsInBvc2l0aW9uIiwiWCIsIlkiLCJldnQiLCJjYW5jZWxCdWJibGUiLCJzdG9wUHJvcGFnYXRpb24iLCJnZXRTZWxlY3Rpb24iLCJyZW1vdmVBbGxSYW5nZXMiLCJzZWxlY3Rpb24iLCJ0eXBlIiwiZW1wdHkiLCJlcnJvciIsImNsaWVudFgiLCJjbGllbnRZIiwidGhpcyIsImNsYXNzTmFtZSIsImluZGV4T2YiLCJjdXJyZW50IiwicGFyZW50Tm9kZSIsImVsIiwidGFibGVNaW5pIiwicm93T2JqIiwibm9kZU5hbWUiLCJ1bmRlZmluZWQiLCJpbm5lckhUTUwiLCJjbGFzc0xpc3QiLCJzb3VyY2VSb3ciLCJyb3dzIiwicm93SWR4IiwidHJNaW5pIiwiZGVsZXRlVGFibGVSb3ciLCJ0YmwiLCJlbXB0eVJvdyIsImRlbGV0ZVJvdyIsInJvd0luZGV4IiwidGFibGVSb3ciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJyX3JvdyIsIm10X3RyIiwicmVtb3ZlIiwib25zZWxlY3RzdGFydCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFdpZHRoIiwic2Nyb2xsSGVpZ2h0IiwidGFyZ2V0IiwiY2VsbHMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjbG9uZVNvdXJjZURpdiIsIm9ubW91c2Vkb3duIiwidG9wIiwibGVmdCIsInpJbmRleCIsInNjYSIsImRlbHRhWCIsImRlbHRhWSIsInNjcm9sbFBvc2l0aW9uIiwiTWF0aCIsImFicyIsImNvbnRhaW5UYWJsZSIsInBhZ2VZT2Zmc2V0Iiwic2Nyb2xsVG9wIiwiYXV0b3Njcm9sbCIsIm1pZHN0WCIsIm1pZHN0WSIsInByZXZpb3VzIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0Iiwicm93X29mZnNldCIsInJvd19mb3VuZCIsInRvcyIsIm9mZnNldEhlaWdodCIsInJpIiwidCIsInRyIiwicyIsImNvbG9yIiwidG9TdHJpbmciLCJib3JkZXJUciIsImJvcmRlclRvcCIsImJvcmRlckJvdHRvbSIsImJvcmRlclRvcFdpZHRoIiwiYm9yZGVyVG9wU3R5bGUiLCJib3JkZXJUb3BDb2xvciIsImJvcmRlckJvdHRvbVdpZHRoIiwiYm90dG9tIiwiYm9yZGVyQm90dG9tU3R5bGUiLCJib3JkZXJCb3R0b21Db2xvciIsImMiLCJyaWdodCIsImJvcmRlciIsIm5hbWUiLCJib3giLCJib3hfc2Nyb2xsIiwib0xlZnQiLCJvVG9wIiwiYm94T2xkIiwib2Zmc2V0TGVmdCIsInNjcm9sbExlZnQiLCJvZmZzZXRUb3AiLCJvZmZzZXRQYXJlbnQiLCJvZmZzZXRXaWR0aCIsImNiIiwiZGlzcGxheSIsInNjcm9sbFkiLCJzY3JvbGxYIiwic28iLCJwb3MiLCJvbGQiLCJtYXhzcCIsImVkZ2VDcm9zc2VkIiwiY2xpZW50V2lkdGgiLCJzY3JvbGxCeSIsInBhcnNlSW50IiwiaXNOYU4iLCJzZXRUaW1lb3V0IiwiY2xpZW50SGVpZ2h0Iiwic3JjIiwiY2xuIiwiY2hpbGRzIiwiY29weSIsImUxIiwiZTIiLCJlbmFibGVkIiwiZWwxIiwiZWwyIiwidG4iLCJtYXRjaEFycmF5IiwibGltaXRUeXBlIiwibGltaXQiLCJjbGFzc2VzIiwibWF0Y2giLCJyZXBsYWNlIiwiZW5hYmxlX2ZsYWciLCJxdWVyeVNlbGVjdG9yQWxsIiwiaiIsImsiLCJib3JkZXJTdHlsZSIsIm9wYWNpdHkiLCJjdXJzb3IiLCJvdmVyZmxvdyIsInRibHMiLCJyZWdleERyYWciLCJyZWdleE5vQXV0b3Njcm9sbCIsImJvcmRlckVuYWJsZWQiLCJ0ZXN0IiwiZmlsdGVyIiwic3R5bGVfbmFtZSIsImN1cnJlbnRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJkZWZhdWx0VmlldyIsInRhZ19uYW1lIiwic3RyIiwidGROb2RlTGlzdCIsImNoaWxkTm9kZXMiLCJub2RlVHlwZSIsImV2ZW50TmFtZSIsImhhbmRsZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJyZCIsIm5ld1BhcmVudFJvdyIsIm1vdmVkSUQiLCJuZXdQYXJlbnRJRCIsInNwcmVhZFNoZWV0IiwibW92ZU5vZGUiLCJyb3dEZWxldGVkIiwicm93VW5kZWxldGVkIiwicmVzaXplQ29sdW1uTGVmdCIsInJlc2l6ZUZpZWxkIiwiTUlOX0NPTFVNTl9XSURUSCIsIkdSSVBTX1dJRFRIIiwic3RhcnRSZXNpemUiLCJncmlwIiwiJCIsImJpbmQiLCJyZXNpemVEcmFnIiwicmVzaXplRW5kIiwidmlzaWJpbGl0eSIsInBhZ2VYIiwidW5iaW5kIiwibmV3V2lkdGgiLCJjb2x1bW5DZWxscyIsImZpZWxkTWVudUNvbnRyb2xsZXIiLCJkaXNwbGF5RmllbGRNZW51IiwiZmllbGROYW1lIiwicHJvamVjdCIsImdldEZpZWxkIiwibWVudSIsIkZpZWxkTWVudSIsImZpZWxkcyIsImZpZWxkTWVudVZpZXciLCJyZW5kZXIiLCJoYW5kbGVDbGljayIsIm1lbnVJdGVtSUQiLCJjbGlja2VkIiwiZ2V0TWVudUl0ZW0iLCJwYXJlbnQiLCJnZXRNZW51SXRlbVBhcmVudCIsInZhck5hbWUiLCJzZXRDaGVja21hcmtzIiwiaXRlbXMiLCJ1cGRhdGVOdW1iZXJGaWVsZEZvcm1hdHRpbmciLCJyZWFkeSIsInNjcm9sbEJhcldpZHRoIiwiZ2V0U2Nyb2xsQmFyV2lkdGgiLCJobXMiLCJwcm9qZWN0cyIsImhlYWRlclZpZXciLCJvcGVuUHJvamVjdCIsInByb2plY3RJRCIsInRyZWUiLCJhamF4IiwidXJsIiwiZG9uZSIsInZlcnNpb25zIiwicmVmcmVzaCIsIkpTT04iLCJwYXJzZSIsInNlbGVjdFZpZXciLCJzZWxlY3RlZFZpZXciLCJzYXZlVG9EYXRhYmFzZSIsInZpZXdJRCIsInZpZXciLCJkZXN0cm95Iiwic2hvd1ZpZXciLCJzZWxlY3RWZXJzaW9uIiwidmVyc2lvbiIsIm9wZW5Qcm9qZWN0VmVyc2lvbiIsIlNQUkVBRFNIRUVUX1ZJRVciLCJzcHJlYWRTaGVldFZpZXciLCJUUkVFX1ZJRVciLCJ0cmVlVmlldyIsImRpc3BsYXlUcmVlIiwiV0VJR0hURURfVFJFRV9WSUVXIiwid2VpZ2h0ZWRUcmVlVmlldyIsImRpc3BsYXlXZWlnaHRlZFRyZWUiLCJDSVJDTEVfVklFVyIsImNpcmNsZVZpZXciLCJjcmVhdGVOZXdQcm9qZWN0IiwibmV3UHJvamVjdE5hbWUiLCJuZXh0UHJvamVjdElEIiwiZXhwYW5kVG9MZXZlbCIsImxldmVsIiwiZmlyc3RDaGlsZCIsImJvZHkiLCJjbGVhbnNlRGF0YSIsInVwZGF0ZUZpZWxkVmFsdWUiLCJub2RlSUQiLCJmaW5kTm9kZSIsImdldEZpZWxkVmFsdWUiLCJmb3JFYWNoIiwiY2hpbGQiLCJyYXdWYWx1ZSIsImZvcm1hdHRlZFZhbHVlIiwiRmllbGQiLCJmb3JtYXRWYWx1ZSIsImFkZEZpZWxkIiwiaGFzQ2hpbGRyZW4iLCJpc05vZGVDaGlsZGxlc3MiLCJjaGlsZHJlbkhpZGRlbiIsImlzTm9kZUNvbGxhcHNlZCIsIm5ld1BhcmVudE5vZGUiLCJyZW1vdmVOb2RlIiwiYWRkTm9kZSIsInRyYXZlcnNlIiwiZ2V0Q2hpbGRyZW4iLCJyZWRyYXdOb2RlQ29udGVudCIsImRlbGV0ZU5vZGUiLCJleHBhbmROb2RlIiwiaW5zZXJ0Tm9kZUFmdGVyIiwicmVuZGVyRXhwYW5kZXIiLCJjb3B5Tm9kZSIsInNvdXJjZU5vZGUiLCJuZXdOb2RlIiwiY2xvbmVOb2RlIiwiaW5zZXJ0Tm9kZSIsImluc2VydE5vZGVCZWZvcmUiLCJjb2xsYXBzZU5vZGUiLCJ0cmF2ZXJzZURlc2NlbmRhbnRzIiwidG9nZ2xlTm9kZSIsImlzTm9kZUV4cGFuZGVkIiwidXBkYXRlTm9kZU5hbWUiLCJuZXdOYW1lIiwiTnVtYmVyIiwiZW5hYmxlRHJhZ2dpbmciLCJkYXRhIiwibWF4RmllbGRWYWx1ZSIsImNhbGNNYXhGaWVsZFZhbHVlIiwibWF4VmFsdWUiLCJORUdBVElWRV9JTkZJTklUWSIsImRhdGF0eXBlIiwiTlVNQkVSIiwiZm9ybWF0IiwiTlVNQkVSX0ZPUk1BVCIsInByZWNpc2lvbiIsImFnZ190eXBlIiwiTk9fQUdHUkVHQVRJT04iLCJhZ2dfcXR5X2ZpZWxkIiwiU1RSSU5HIiwiQ0hPSUNFIiwiU1VNX0FOWV9BR0dSRUdBVElPTiIsIlBFUkNFTlRfRk9STUFUIiwiU0NJRU5USUZJQ19GT1JNQVQiLCJ0b0ZpeGVkIiwidG9FeHBvbmVudGlhbCIsIm51bWJlckl0ZW0iLCJGaWVsZE1lbnVJdGVtIiwiZm9ybWF0SXRlbSIsIm51bWJlckZvcm1hdEl0ZW0iLCJwdXNoIiwiZGlzcGxheVN0cmluZyIsInBlcmNlbnRGb3JtYXRJdGVtIiwic2NpZW50aWZpY0Zvcm1hdEl0ZW0iLCJhZ2dyZWdhdGlvbkl0ZW0iLCJzdW1BbnlBZ2dJdGVtIiwiaW5kZXgiLCJmIiwicHJvdG90eXBlIiwibWVudUl0ZW0iLCJmb3VuZCIsImNoZWNrZWQiLCJkYXRhVHlwZSIsImpzb24iLCJzdHJpbmdpZnkiLCJ4MCIsInkwIiwic3BsaWNlIiwic2V0RGVwdGhzIiwiZGVwdGgiLCJtYXhEZXB0aCIsImV4dGVuZCIsIm5leHROb2RlSUQiLCJfY2hpbGRyZW4iLCJmdWxseUV4cGFuZE5vZGUiLCJmdWxseUNvbGxhcHNlTm9kZSIsInRvZ2dsZUV4cGFuc2lvbiIsInNlYXJjaE5vZGUiLCJmb3VuZE5vZGUiLCJmb3VuZFBhcmVudCIsImNoaWxkcmVuRm4iLCJ2aXNpdEZuIiwiZmluaXNoRm4iLCJwcm9qZWN0TmFtZSIsIkRPV05fQVJST1dfSU1BR0VfUEFUSCIsIkNIRUNLX01BUktfSU1BR0VfUEFUSCIsIkJMQU5LX01BUktfSU1BR0VfUEFUSCIsIkVOVEVSX0tFWSIsIktFWV9VUF9BUlJPVyIsIktFWV9ET1dOX0FSUk9XIiwiS0VZX0xFRlRfQVJST1ciLCJLRVlfUklHSFRfQVJST1ciLCJERUZBVUxUX05PREVfSU5QVVRfV0lEVEgiLCJkZWJ1ZyIsInByaW50IiwibyIsImNvbnNvbGUiLCJsb2ciLCJwcmludFRyZWUiLCJ6b29tIiwiZCIsImZvY3VzIiwidHJhbnNpdGlvbiIsImQzIiwiZHVyYXRpb24iLCJhbHRLZXkiLCJ0d2VlbiIsImludGVycG9sYXRlWm9vbSIsInIiLCJtYXJnaW4iLCJ6b29tVG8iLCJzZWxlY3RBbGwiLCJlYWNoIiwidiIsImRpYW1ldGVyIiwiYXR0ciIsImNpcmNsZSIsImFwcGVuZCIsInNjYWxlIiwibGluZWFyIiwiZG9tYWluIiwicmFuZ2UiLCJpbnRlcnBvbGF0ZSIsImludGVycG9sYXRlSGNsIiwicGFjayIsImxheW91dCIsInBhZGRpbmciLCJzaXplIiwiUEkiLCJzdmciLCJzZWxlY3QiLCJyb290Iiwibm9kZXMiLCJlbnRlciIsIm9uIiwidGV4dCIsInNlbGYiLCJmcmFtZUVsZW1lbnQiLCJleHBhbmRlclNlbGVjdG9yIiwibnVtTGV2ZWxzIiwiaHRtbCIsImdldE1hcmt1cCIsImNoYW5nZSIsImhhbmRsZSIsInZhbCIsIm1hcmt1cCIsImZpZWxkTWVudSIsInJlbmRlck1lbnUiLCJtb3VzZWxlYXZlIiwiY2hlY2tNYXJrQ2xhc3MiLCJzaWJsaW5ncyIsInNpYmxpbmciLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic2VsZWN0UHJvamVjdCIsImtleXVwIiwidmVyc2lvblNlbGVjdG9yIiwidmlld1NlbGVjdG9yIiwiY2xpY2siLCJwcm9qZWN0U2VsZWN0b3IiLCJmaW5kIiwic2hvdyIsImtleUNvZGUiLCJoaWRlIiwibmV3UHJvamVjdElEIiwib3B0aW9uIiwicHJvamVjdEFjdGlvbiIsImVudGVyUHJlc3NlZCIsInNwcmVhZFNoZWV0S2V5SGFuZGxlciIsImNoZWNrS2V5IiwicHJldmVudERlZmF1bHQiLCJwcmV2Um93IiwiZmluZEFuY2VzdG9yIiwiYWN0aXZlRWxlbWVudCIsInByZXYiLCJnZXROZXh0RWxlbWVudElEIiwibmV4dFJvdyIsIm5leHQiLCJuZXdSb3ciLCJzcGxpdCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsInNwcmVhZFNoZWV0TWFya3VwIiwicmVuZGVyRmllbGRzUm93IiwicmVuZGVyRGF0YVRhYmxlIiwicmVuZGVyTm9kZUNvbHVtbiIsIm9mZiIsImZpZWxkSGVhZGVyIiwic2hvd0ZpZWxkTWVudSIsImNzcyIsImRhdGFSb3dzTWFya3VwIiwicmVuZGVyRGF0YUNlbGwiLCJmaWVsZENlbGwiLCJub2RlUm93TWFya3VwIiwiZGVsZXRlQnV0dG9uIiwiY29weUJ1dHRvbiIsImRyYWdIYW5kbGUiLCJub2RlQ29udGVudCIsImljb25NYXJrdXAiLCJkZXB0aEFkanVzdG1lbnQiLCJ3aWR0aEFkanVzdG1lbnQiLCJleHBhbmRJY29uIiwibm9kZUlucHV0IiwiaW5zZXJ0QWZ0ZXIiLCJpdGVtIiwiaW5zZXJ0QmVmb3JlTm9kZSIsImluc2VydEFmdGVyTm9kZSIsIk1JTl9OT0RFX1NJWkUiLCJNQVhfTk9ERV9TSVpFIiwiVkVSVElDQUxfVklFVyIsIkhPUklaT05UQUxfVklFVyIsInVwZGF0ZSIsInJvdGF0ZSIsImRpcmVjdGlvbiIsImhvcml6b250YWxfc3BhY2luZyIsInZlcnRpY2FsX3NwYWNpbmciLCJkaWFnb25hbCIsInByb2plY3Rpb24iLCJ2aWV3ZXJIZWlnaHQiLCJzZWxlY3RlZE5vZGUiLCJkcmFnZ2luZ05vZGUiLCJtYXhMYWJlbExlbmd0aCIsIm1heCIsInZpZXdlcldpZHRoIiwiZHJhZ1N0YXJ0ZWQiLCJzdmdHcm91cCIsInRyYW5zbGF0ZSIsImluaXRpYXRlRHJhZyIsImRvbU5vZGUiLCJzb3J0IiwiYSIsImIiLCJsaW5rcyIsIm5vZGVQYXRocyIsIm5vZGVzRXhpdCIsInBhcmVudExpbmsiLCJkeSIsImR4IiwidXBkYXRlVGVtcENvbm5lY3RvciIsInpvb21MaXN0ZW5lciIsImJlaGF2aW9yIiwic2NhbGVFeHRlbnQiLCJiYXNlU3ZnIiwiY2FsbCIsImRyYWdMaXN0ZW5lciIsImRyYWdzdGFydCIsImRyYWdlbmQiLCJjZW50ZXJOb2RlIiwiZGVmYXVsdFByZXZlbnRlZCIsInNvdXJjZSIsImxldmVsV2lkdGgiLCJjaGlsZENvdW50IiwibiIsIm5ld0hlaWdodCIsInJldmVyc2UiLCJub2RlRW50ZXIiLCJvdmVyQ2lyY2xlIiwib3V0Q2lyY2xlIiwiY29tcHV0ZU5vZGVTaXplIiwibm9kZVVwZGF0ZSIsIm5vZGVFeGl0IiwiZXhpdCIsImxpbmsiLCJpbnNlcnQiLCJzb3VyY2VFdmVudCIsIm5vZGVTaXplIiwic3FydCJdLCJtYXBwaW5ncyI6IkFBQUEsUUFBU0EsZUFBY0MsRUFBTUMsR0FFM0IsR0FBSUQsRUFBS0UsVUFBcUMsSUFBekJGLEVBQUtFLFNBQVNDLE9BWW5DLENBR0UsSUFBSSxHQUZBQyxHQUFjLEVBRVZDLEVBQUksRUFBR0EsRUFBSUwsRUFBS0UsU0FBU0MsT0FBUUUsSUFFdkNELEdBQWVMLGNBQWNDLEVBQUtFLFNBQVNHLEdBQUlKLEVBV2pELE9BUklELEdBQUtNLFNBRVBOLEVBQUtNLFdBR1BOLEVBQUtNLE9BQU9MLEdBQVNHLEVBQ3JCRyxTQUFTQyxlQUFlUCxFQUFRRCxFQUFLUyxJQUFJQyxNQUFRTixFQUUxQ0EsRUExQlAsTUFBSUosR0FBS00sUUFBV04sRUFBS00sT0FBT0wsR0FNdkJVLFdBQVdYLEVBQUtNLE9BQU9MLElBSnZCO0FDQWIsWUFFQSxJQUFJVyxRQUFTQSxVQUdiQSxRQUFPQyxLQUFRLFdBR2IsR0FBSUMsR0FDRkMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFrQkFDLEVBRUFDLEVBQ0FDLEVBQ0FDLEVBWUFDLEVBL0JBQyxFQUFZLEtBR1pDLEdBQVVDLE1BQU8sRUFBR0MsT0FBUSxHQUc1QkMsR0FBY0YsTUFBUSxLQUNsQkMsT0FBUyxLQUNU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ZnVuY3Rpb24gYWdncmVnYXRlX2FueShub2RlLCBmaWVsZClcclxue1xyXG4gIGlmKCFub2RlLmNoaWxkcmVuIHx8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKVxyXG4gIHtcclxuICAgIGlmKCFub2RlLnZhbHVlcyB8fCAhbm9kZS52YWx1ZXNbZmllbGRdKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gMC4wO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChub2RlLnZhbHVlc1tmaWVsZF0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdmFyIGNoaWxkcmVuU3VtID0gMC4wO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBjaGlsZHJlblN1bSArPSBhZ2dyZWdhdGVfYW55KG5vZGUuY2hpbGRyZW5baV0sIGZpZWxkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZighbm9kZS52YWx1ZXMpXHJcbiAgICB7XHJcbiAgICAgIG5vZGUudmFsdWVzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgbm9kZS52YWx1ZXNbZmllbGRdID0gY2hpbGRyZW5TdW07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBtb2RlbFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGQgKyBub2RlLmlkKS52YWx1ZSA9IGNoaWxkcmVuU3VtOyAgICAgICAgIC8vdXBkYXRlIHRoZSB2aWV3XHJcblxyXG4gICAgcmV0dXJuIGNoaWxkcmVuU3VtO1xyXG4gIH1cclxufSIsIi8qXHJcbkNvcHlyaWdodCAoYykgMjAwOC0yMDExLCB3d3cucmVkaXBzLm5ldCBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5Db2RlIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgTGljZW5zZTogaHR0cDovL3d3dy5yZWRpcHMubmV0L2xpY2Vuc2UvXHJcbmh0dHA6Ly93d3cucmVkaXBzLm5ldC9qYXZhc2NyaXB0L2RyYWctYW5kLWRyb3AtdGFibGUtY29udGVudC9cclxuKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIFJFRElQUyA9IFJFRElQUyB8fCB7fTsgICAgICAvL2NyZWF0ZSBSRURJUFMgbmFtZXNwYWNlIChpZiBpcyBub3QgYWxyZWFkeSBkZWZpbmVkIGluIGFub3RoZXIgUkVESVBTIHBhY2thZ2UpXHJcblxyXG4vL1JFRElQUy5kcmFnIGlzIGEgSmF2YVNjcmlwdCBkcmFnIGFuZCBkcm9wIGxpYnJhcnkgZm9jdXNlZCBvbiBkcmFnZ2luZyB0YWJsZSBjb250ZW50IChESVYgZWxlbWVudHMpIGFuZCB0YWJsZSByb3dzLlxyXG5SRURJUFMuZHJhZyA9IChmdW5jdGlvbiAoKVxyXG57XHJcbiAgICAvLyBtZXRob2RzXHJcbiAgdmFyIGluaXQsICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvblxyXG4gICAgZW5hYmxlRHJhZywgICAgICAgICAvLyBtZXRob2QgYXR0YWNoZXMgLyBkZXRhY2hlcyBvbm1vdXNlZG93biBhbmQgb25zY3JvbGwgZXZlbnQgaGFuZGxlcnMgZm9yIERJViBlbGVtZW50c1xyXG4gICAgZW5hYmxlRGl2cyxcclxuICAgIGhhbmRsZXJPbk1vdXNlRG93biwgICAgIC8vIG9ubW91c2Vkb3duIGhhbmRsZXJcclxuICAgIGhhbmRsZXJPbk1vdXNlVXAsICAgICAvLyBvbm1vdXNldXAgaGFuZGxlclxyXG4gICAgaGFuZGxlck9uTW91c2VNb3ZlLCAgICAgLy8gb25tb3VzZW1vdmUgaGFuZGxlciBmb3IgdGhlIGRvY3VtZW50IGxldmVsXHJcbiAgICBlbGVtZW50RHJvcCwgICAgICAgIC8vIGRyb3AgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbFxyXG4gICAgcmVzZXRTdHlsZXMsICAgICAgICAvLyByZXNldCBvYmplY3Qgc3R5bGVzIGFmdGVyIGVsZW1lbnQgaXMgZHJvcHBlZFxyXG4gICAgcmVnaXN0ZXJFdmVudHMsICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3IgRElWIGVsZW1lbnRcclxuICAgIGNlbGxDaGFuZ2VkLCAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2QgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlKCksIGF1dG9TY3JvbGxYKCksIGF1dG9TY3JvbGxZKClcclxuICAgIGhhbmRsZXJPblJlc2l6ZSwgICAgICAvLyBvbnJlc2l6ZSB3aW5kb3cgZXZlbnQgaGFuZGxlclxyXG4gICAgc2V0VGFibGVSb3dDb2x1bW4sICAgICAgLy8gZnVuY3Rpb24gc2V0cyBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGxcclxuICAgIHNldFBvc2l0aW9uLCAgICAgICAgLy8gZnVuY3Rpb24gc2V0cyBjb2xvciBmb3IgdGhlIGN1cnJlbnQgdGFibGUgY2VsbCBhbmQgcmVtZW1iZXJzIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBjb2xvclxyXG4gICAgc2V0VGRTdHlsZSwgICAgICAgICAvLyBtZXRob2Qgc2V0cyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIGZvciBURFxyXG4gICAgZ2V0VGRTdHlsZSwgICAgICAgICAvLyBtZXRob2QgcmV0dXJucyBvYmplY3QgY29udGFpbmluZyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIGZvciBURFxyXG4gICAgYm94T2Zmc2V0LCAgICAgICAgICAvLyBjYWxjdWxhdGVzIG9iamVjdCAoYm94KSBvZmZzZXQgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdClcclxuICAgIGNhbGN1bGF0ZUNlbGxzLCAgICAgICAvLyBjYWxjdWxhdGVzIHRhYmxlIGNvbHVtbnMgYW5kIHJvdyBvZmZzZXRzIChjZWxscyBkaW1lbnNpb25zKVxyXG4gICAgZ2V0U2Nyb2xsUG9zaXRpb24sICAgICAgLy8gcmV0dXJucyBzY3JvbGwgcG9zaXRpb25zIGluIGFycmF5XHJcbiAgICBhdXRvU2Nyb2xsWCwgICAgICAgIC8vIGhvcml6b250YWwgYXV0byBzY3JvbGwgZnVuY3Rpb25cclxuICAgIGF1dG9TY3JvbGxZLCAgICAgICAgLy8gdmVydGljYWwgYXV0byBzY3JvbGwgZnVuY3Rpb25cclxuICAgIGNvcHlQcm9wZXJ0aWVzLCAgICAgICAvLyBtZXRob2QgY29waWVzIGN1c3RvbSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIGVsZW1lbnQgdG8gdGhlIGNsb25lZCBlbGVtZW50LlxyXG4gICAgY2xvbmVMaW1pdCwgICAgICAgICAvLyBjbG9uZSBsaW1pdCAoYWZ0ZXIgY2xvbmluZyBvYmplY3QsIHRha2UgY2FyZSBhYm91dCBjbGltaXQxX1ggb3IgY2xpbWl0Ml9YIGNsYXNzbmFtZXMpXHJcbiAgICBnZXRTdHlsZSwgICAgICAgICAvLyBtZXRob2QgcmV0dXJucyBzdHlsZSB2YWx1ZSBvZiByZXF1ZXN0ZWQgb2JqZWN0IGFuZCBzdHlsZSBuYW1lXHJcbiAgICBmaW5kUGFyZW50LCAgICAgICAgIC8vIG1ldGhvZCByZXR1cm5zIGEgcmVmZXJlbmNlIG9mIHRoZSByZXF1aXJlZCBwYXJlbnQgZWxlbWVudFxyXG4gICAgcm93T3BhY2l0eSwgICAgICAgICAvLyBtZXRob2Qgc2V0cyBvcGFjaXR5IHRvIHRhYmxlIHJvdyAoZWwsIG9wYWNpdHksIGNvbG9yKVxyXG4gICAgcm93Q2xvbmUsICAgICAgICAgLy8gY2xvbmUgdGFibGUgcm93IC0gaW5wdXQgcGFyYW1ldGVyIGlzIERJViB3aXRoIGNsYXNzIG5hbWUgXCJyZWRpcHMtcm93XCIgLT4gRElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiXHJcbiAgICByb3dEcm9wLCAgICAgICAgICAvLyBmdW5jdGlvbiBkcm9wcyAoZGVsZXRlIG9sZCAmIGluc2VydCBuZXcpIHRhYmxlIHJvdyAoaW5wdXQgcGFyYW1ldGVycyBhcmUgY3VycmVudCB0YWJsZSBhbmQgcm93KVxyXG4gICAgbm9ybWFsaXplLCAgICAgICAgICAvLyBwcml2YXRlIG1ldGhvZCByZXR1cm5zIG5vcm1hbGl6ZWQgc3BhY2VzIGZyb20gaW5wdXQgc3RyaW5nXHJcblxyXG4gICAgLy8gcHJpdmF0ZSBwYXJhbWV0ZXJzXHJcbiAgICBvYmpNYXJnaW4gPSBudWxsLCAgICAgLy8gc3BhY2UgZnJvbSBjbGlja2VkIHBvaW50IHRvIHRoZSBvYmplY3QgYm91bmRzICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpXHJcblxyXG4gICAgLy8gd2luZG93IHdpZHRoIGFuZCBoZWlnaHQgKHBhcmFtZXRlcnMgYXJlIHNldCBpbiBvbmxvYWQgYW5kIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIpLCBqdXN0IGZvciBhIG5vdGU6IHdpbmRvdyBhbmQgV2luZG93IGlzIHJlc2VydmVkIHdvcmQgaW4gSlMgc28gSSBuYW1lZCB2YXJpYWJsZSBcInNjcmVlblwiKVxyXG4gICAgc2NyZWVuID0ge3dpZHRoOiAwLCBoZWlnaHQ6IDB9LFxyXG5cclxuICAgIC8vIGRlZmluZSBzY3JvbGwgb2JqZWN0IHdpdGggY29udGFpbmVkIHByb3BlcnRpZXMgKHRoaXMgaXMgcHJpdmF0ZSBwcm9wZXJ0eSlcclxuICAgIHNjcm9sbERhdGEgPSB7d2lkdGggOiBudWxsLCAvLyBzY3JvbGwgd2lkdGggb2YgdGhlIHdpbmRvdyAoaXQgaXMgdXN1YWxseSBncmVhdGVyIHRoZW4gd2luZG93KVxyXG4gICAgICAgIGhlaWdodCA6IG51bGwsICAgIC8vIHNjcm9sbCBoZWlnaHQgb2YgdGhlIHdpbmRvdyAoaXQgaXMgdXN1YWxseSBncmVhdGVyIHRoZW4gd2luZG93KVxyXG4gICAgICAgIGNvbnRhaW5lciA6IFtdLCAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzIChjb250YWlucyBhdXRvc2Nyb2xsIGFyZWFzLCByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5lciBhbmQgc2Nyb2xsIGRpcmVjdGlvbilcclxuICAgICAgICBvYmogOiBudWxsfSwgICAgLy8gc2Nyb2xsIG9iamVjdCAobmVlZGVkIGluIGF1dG9zY3JvbGwgZm9yIHJlY3Vyc2l2ZSBjYWxscylcclxuXHJcbiAgICBlZGdlID0ge3BhZ2U6IHt4OiAwLCB5OiAwfSwgLy8gYXV0b3Njcm9sbCBib3VuZCB2YWx1ZXMgZm9yIHBhZ2UgYW5kIGRpdiBhcyBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgIGRpdjogIHt4OiAwLCB5OiAwfSwgLy8gY2xvc2VyIHRvIHRoZSBlZGdlLCBmYXN0ZXIgc2Nyb2xsaW5nXHJcbiAgICAgICAgZmxhZzoge3g6IDAsIHk6IDB9fSwvLyBmbGFncyBhcmUgbmVlZGVkIHRvIHByZXZlbnQgbXVsdGlwbGUgY2FsbHMgb2YgYXV0b1Njcm9sbFggYW5kIGF1dG9TY3JvbGxZIGZyb20gb25tb3VzZW1vdmUgZXZlbnQgaGFuZGxlclxyXG5cclxuICAgIGJnU3R5bGVPbGQsICAgICAgICAgLy8gKG9iamVjdCkgb2xkIHRkIHN0eWxlcyAoYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcylcclxuXHJcbiAgICB0YWJsZSwgICAgICAgIC8vIHRhYmxlIG9mZnNldHMgYW5kIHJvdyBvZmZzZXRzIChpbml0aWFsaXplZCBpbiBvbmxvYWQgZXZlbnQpXHJcbiAgICBtb3ZlZCwgICAgICAgICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBlbGVtZW50IGlzIG1vdmVkXHJcbiAgICBjbG9uZWQsICAgICAgICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBlbGVtZW50IGlzIGNsb25lZFxyXG4gICAgY2xvbmVkSWQgPSBbXSwgICAgICAgIC8vIG5lZWRlZCBmb3IgaW5jcmVtZW50IElEIG9mIGNsb25lZCBlbGVtZW50c1xyXG4gICAgY3VycmVudENlbGwgPSBbXSwgICAgIC8vIGN1cnJlbnQgY2VsbCBib3VuZHMgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCkgYW5kIFwiY29udGFpblRhYmxlXCIgZmxhZyBmb3IgbmVzdGVkIHRhYmxlc1xyXG4gICAgZHJhZ0NvbnRhaW5lciA9IG51bGwsICAgLy8gZHJhZyBjb250YWluZXIgcmVmZXJlbmNlXHJcbiAgICBkaXZCb3ggPSBudWxsLCAgICAgICAgLy8gZGl2IGRyYWcgYm94OiB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgbWFyZ2luIChkZWNyZWFzZSBudW1iZXIgY2FsbHMgb2Ygc2V0VGFibGVSb3dDb2x1bW4pXHJcbiAgICBwb2ludGVyID0ge3g6IDAsIHk6IDB9LCAgIC8vIG1vdXNlIHBvaW50ZXIgcG9zaXRpb24gKHRoaXMgcHJvcGVydGllcyBhcmUgc2V0IGluIGhhbmRsZXJPbk1vdXNlTW92ZSgpIC0gbmVlZGVkIGZvciBhdXRvc2Nyb2xsKVxyXG4gICAgdGhyZXNob2xkID0ge3g6IDAsICAgICAgLy8gaW5pdGlhbCB4LCB5IHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICB2YWx1ZTogNywgICAvLyB0aHJlc2hvbGQgZGlzdGFuY2UgdmFsdWVcclxuICAgICAgICAgIGZsYWc6IGZhbHNlfSwgLy8gdGhyZXNob2xkIGZsYWdcclxuICAgIHNoaWZ0S2V5ID0gZmFsc2UsICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBzaGlmdCBrZXkgaXMgcHJlc3NlZCAoc2V0IGluIGhhbmRsZXJfbW91c2Vkb3duKVxyXG4gICAgY2xvbmVDbGFzcyA9IGZhbHNlLCAgICAgLy8gKGJvb2xlYW4pIHRydWUgaWYgY2xpY2tlZCBlbGVtZW50IGNvbnRhaW5zIGNsb25lIGluIGNsYXNzIG5hbWUgKHNldCBpbiBoYW5kbGVyX21vdXNlZG93bilcclxuICAgIHdpbmRvd1Njcm9sbFBvc2l0aW9uLCAgIC8vIChhcnJheSkgdG9wIGFuZCBsZWZ0IHdpbmRvdyBvZmZzZXQgKHNldCBpbiBjYWxjdWxhdGVDZWxscyBhbmQgdXNlZCBpbiBib3hPZmZzZXQpXHJcblxyXG4gICAgLy8gc2VsZWN0ZWQsIHByZXZpb3VzIGFuZCBzb3VyY2Ugcm93IGFuZCBjZWxsIChwcml2YXRlIHBhcmFtZXRlcnMgdG9vKVxyXG4gICAgcm93ID0gbnVsbCxcclxuICAgIHJvd19vbGQgPSBudWxsLFxyXG4gICAgcm93X3NvdXJjZSA9IG51bGwsXHJcbiAgICBjZWxsID0gbnVsbCxcclxuICAgIGNlbGxfb2xkID0gbnVsbCxcclxuICAgIGNlbGxfc291cmNlID0gbnVsbCxcclxuXHJcbiAgICAvLyB2YXJpYWJsZXMgaW4gdGhlIHByaXZhdGUgc2NvcGUgcmV2ZWFsZWQgYXMgcHVibGljIChzZWUgaW5pdCgpIG1ldGhvZClcclxuICAgIG9iaiA9IGZhbHNlLCAgICAgICAgLy8gKG9iamVjdCkgbW92ZWQgb2JqZWN0XHJcbiAgICBvYmpPbGQgPSBmYWxzZSwgICAgICAgLy8gKG9iamVjdCkgcHJldmlvdXNseSBtb3ZlZCBvYmplY3QgKGJlZm9yZSBjbGlja2VkIG9yIGNsb25lZClcclxuICAgIGhvdmVyID0ge2NvbG9yVGQ6ICcjRkZDRkFFJywgY29sb3JUcjogJyM5QkIzREEnfSxcclxuICAgIHNjcm9sbCA9IHtlbmFibGUgOiB0cnVlLCAgLy8gKGJvb2xlYW4pIGVuYWJsZS9kaXNhYmxlIGF1dG9zY3JvbGwgZnVuY3Rpb24gKGRlZmF1bHQgaXMgdHJ1ZSlcclxuICAgICAgICBib3VuZCA6IDI1LCAgICAgLy8gKGludGVnZXIpIGJvdW5kIHdpZHRoIGZvciBhdXRvc2Nyb2xsXHJcbiAgICAgICAgc3BlZWQgOiAyMH0sICAgIC8vIChpbnRlZ2VyKSBzY3JvbGwgc3BlZWQgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICBzdHlsZSA9IHsvL2JvcmRlckVuYWJsZWQgOiAnc29saWQnLCAvLyAoc3RyaW5nKSBib3JkZXIgc3R5bGUgZm9yIGVuYWJsZWQgZWxlbWVudHNcclxuICAgICAgICBib3JkZXJEaXNhYmxlZCA6ICdkb3R0ZWQnLCAgLy8gKHN0cmluZykgYm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIG9wYWNpdHlEaXNhYmxlZCA6ICcnLCAgIC8vIChpbnRlZ2VyKSBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgICByb3dFbXB0eUNvbG9yIDogJ3doaXRlJ30sIC8vIChzdHJpbmcpIGNvbG9yIG9mIGVtcHR5IHJvd1xyXG4gICAgdGQgPSB7fSwgICAgICAgICAgICAvLyAob2JqZWN0KSBjb250YWlucyByZWZlcmVuY2UgdG8gc291cmNlIChzZXQgaW4gb25tb3VzZWRvd24pLCBjdXJyZW50IChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpLCBwcmV2aW91cyAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKSBhbmQgdGFyZ2V0IGNlbGwgKHNldCBpbiBvbm1vdXNldXApXHJcbiAgICBjbG9uZSA9IHtrZXlEaXYgOiBmYWxzZSwgICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIGVsZW1lbnRzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5XHJcbiAgICAgICAga2V5Um93IDogZmFsc2UsICAgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgcm93cyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleVxyXG4gICAgICAgIHNlbmRCYWNrIDogZmFsc2UsICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIHRoZW4gY2xvbmVkIGVsZW1lbnQgY2FuIGJlIHJldHVybmVkIHRvIGl0cyBzb3VyY2VcclxuICAgICAgICBkcm9wIDogZmFsc2V9LCAgICAgIC8vIChib29sZWFuKSBpZiB0cnVlLCB0aGVuIGNsb25lZCBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIGRyb3BwZWQgdG8gdGhlIHRhYmxlIG5vIG1hdHRlciBpZiBkcm9wcGVkIG91dHNpZGUgb2YgdGhlIHRhYmxlXHJcbiAgICBcclxuICAgIGV2ZW50ID0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAob2JqZWN0KSBldmVudCBoYW5kbGVyc1xyXG4gICAge1xyXG4gICAgICBjbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgY2xvbmVkRHJvcHBlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBjbG9uZWRFbmQxIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGNsb25lZEVuZDIgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgZHJvcHBlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBkcm9wcGVkQmVmb3JlIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGZpbmlzaCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBub3RDbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgbm90TW92ZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Q2hhbmdlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dDbGlja2VkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Nsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dEcm9wcGVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Ryb3BwZWRCZWZvcmUgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93RHJvcHBlZFNvdXJjZSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dNb3ZlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dOb3RDbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Tm90TW92ZWQgOiBmdW5jdGlvbiAoKSB7fVxyXG4gICAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIERyYWcgY29udGFpbmVyIGluaXRpYWxpemF0aW9uLiBJdCBzaG91bGQgYmUgY2FsbGVkIGF0IGxlYXN0IG9uY2UgYW5kIGl0J3MgcG9zc2libGUgdG8gY2FsbCBhIG1ldGhvZCBtYW55IHRpbWVzLiBFdmVyeSBwYWdlIHNob3VsZCBoYXZlIGF0IGxlYXN0IG9uZSBkcmFnIGNvbnRhaW5lci5cclxuICAgKiBJZiBSRURJUFMuZHJhZy5pbml0KCkgaXMgY2FsbGVkIHdpdGhvdXQgaW5wdXQgcGFyYW1ldGVyLCBsaWJyYXJ5IHdpbGwgc2VhcmNoIGZvciBkcmFnIGNvbnRhaW5lciB3aXRoIGlkPVwicmVkaXBzLWRyYWdcIi5cclxuICAgKiBPbmx5IHRhYmxlcyBpbnNpZGUgZHJhZyBjb250YWluZXIgd2lsbCBiZSBzY2FubmVkLiBJdCBpcyBwb3NzaWJsZSB0byBoYXZlIHNldmVyYWwgZHJhZyBjb250YWluZXJzIHRvdGFseSBzZXBhcmF0ZWQgKGVsZW1lbnRzIGZyb20gb25lIGNvbnRhaW5lciB3aWxsIG5vdCBiZSB2aXNpYmxlIHRvIG90aGVyIGRyYWcgY29udGFpbmVycykuXHJcbiAgICogXCJpbml0XCIgbWV0aG9kIGNhbGxzIGVuYWJsZURyYWcuIElmIHRhYmxlcyBhcmUgZ2VuZXJhdGVkIGR5bmFtaWNhbGx5IHRoZW4gUkVESVBTLmluaXQoKSBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCB0byBzZXQgY3VzdG9tIHByb3BlcnRpZXMgdG8gdGFibGVzICh0YWJsZSBpbml0aWFsaXphdGlvbikuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtkY10gRHJhZyBjb250YWluZXIgSWQgKGRlZmF1bHQgaXMgXCJyZWRpcHMtZHJhZ1wiKS5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGluaXQgZHJhZyBjb250YWluZXIgKHdpdGggZGVmYXVsdCBpZD1cInJlZGlwcy1kcmFnXCIpXHJcbiAgICogUkVESVBTLmRyYWcuaW5pdCgpO1xyXG4gICAqXHJcbiAgICogLy8gaW5pdCBkcmFnIGNvbnRhaW5lciB3aXRoIGlkPVwibXktZHJhZzFcIlxyXG4gICAqIFJFRElQUy5kcmFnLmluaXQoJ215LWRyYWcxJyk7XHJcbiAgICovXHJcbiAgaW5pdCA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgZHJhZ0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWRpcHMtZHJhZycpOyAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgZHJhZyBjb250YWluZXJcclxuXHJcbiAgICB3aW5kb3dTY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcblxyXG4gICAgLy8gYXBwZW5kIERJViBpZD1cInJlZGlwc19jbG9uZVwiIGlmIERJViBkb2Vzbid0IGV4aXN0IChuZWVkZWQgZm9yIGNsb25pbmcgRElWIGVsZW1lbnRzKVxyXG4gICAgLy8gaWYgYXV0b21hdGljIGNyZWF0aW9uIGlzbid0IHByZWNpc2UgZW5vdWdoLCB1c2VyIGNhbiBtYW51YWxseSBjcmVhdGUgYW5kIHBsYWNlIGVsZW1lbnQgd2l0aCBpZD1cInJlZGlwc19jbG9uZVwiIHRvIHByZXZlbnQgd2luZG93IGV4cGFuZGluZyAodGhlbiB0aGlzIGNvZGUgd2lsbCBiZSBza2lwcGVkKVxyXG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVkaXBzX2Nsb25lJykpXHJcbiAgICB7XHJcbiAgICAgIHZhciByZWRpcHNDbG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICByZWRpcHNDbG9uZS5pZCA9ICdyZWRpcHNfY2xvbmUnO1xyXG4gICAgICByZWRpcHNDbG9uZS5zdHlsZS53aWR0aCA9IHJlZGlwc0Nsb25lLnN0eWxlLmhlaWdodCA9ICcxcHgnO1xyXG4gICAgICBkcmFnQ29udGFpbmVyLmFwcGVuZENoaWxkKHJlZGlwc0Nsb25lKTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVEcmFnKCdpbml0JywgJy5yZWRpcHMtZHJhZycpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhdHRhY2ggb25tb3VzZWRvd24gZXZlbnQgaGFuZGxlciB0byB0aGUgRElWIGVsZW1lbnRzLCBhdHRhY2ggb25zY3JvbGw9J2NhbGN1bGF0ZUNlbGxzJyBmb3IgRElWIGVsZW1lbnRzIHdpdGggJ3Njcm9sbCcgaW4gY2xhc3MgbmFtZSAocHJlcGFyZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhcylcclxuICAgIHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyZWVUYWJsZScpO1xyXG4gICAgdGFibGUucmVkaXBzID0ge307XHJcblxyXG4gICAgaGFuZGxlck9uUmVzaXplKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGluaXRpYWwgd2luZG93IHdpZHRoL2hlaWdodCwgc2Nyb2xsIHdpZHRoL2hlaWdodCBhbmQgZGVmaW5lIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIsIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIgY2FsbHMgY2FsY3VsYXRlIGNvbHVtbnNcclxuICAgIFJFRElQUy5ldmVudC5hZGQod2luZG93LCAncmVzaXplJywgaGFuZGxlck9uUmVzaXplKTtcclxuICAgIFJFRElQUy5ldmVudC5hZGQod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgIC8vIGF0dGFjaCBvbnNjcm9sbCBldmVudCB0byB0aGUgd2luZG93IChuZWVkZWQgZm9yIHJlY2FsY3VsYXRpbmcgdGFibGUgY2VsbHMgcG9zaXRpb25zKVxyXG4gIH07XHJcblxyXG5cclxuICAvLyBvbm1vdXNlZG93biBldmVudCBoYW5kbGVyLiAgVGhpcyBldmVudCBoYW5kbGVyIGlzIGF0dGFjaGVkIHRvIGV2ZXJ5IERJViBlbGVtZW50IGluIGRyYWcgY29udGFpbmVyIChwbGVhc2Ugc2VlIFwiZW5hYmxlRHJhZ1wiKS5cclxuICBoYW5kbGVyT25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZSlcclxuICB7XHJcbiAgICB2YXIgZXZ0ID0gZSB8fCB3aW5kb3cuZXZlbnQ7ICAgICAgICAgIC8vIGRlZmluZSBldmVudCAoY3Jvc3MgYnJvd3NlcilcclxuICAgIHZhciBvZmZzZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2JqZWN0IG9mZnNldFxyXG4gICAgdmFyIHBvc2l0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGlvbiBvZiB0YWJsZSBvciBjb250YWluZXIgYm94IG9mIHRhYmxlIChpZiBoYXMgcG9zaXRpb246Zml4ZWQgdGhlbiBleGNsdWRlIHNjcm9sbCBvZmZzZXQpXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG5cclxuICAgIGV2dC5jYW5jZWxCdWJibGUgPSB0cnVlOyAgICAgICAgICAgICAgLy8gc3RvcCBldmVudCBwcm9wYWdhdGlvbiAob25seSBmaXJzdCBjbGlja2VkIGVsZW1lbnQgd2lsbCByZWdpc3RlciBvbm1vdXNlZG93biBldmVudCksIG5lZWRlZCBpbiBjYXNlIG9mIHBsYWNpbmcgdGFibGUgaW5zaWRlIG9mIDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiPiAoYWZ0ZXIgZWxlbWVudCB3YXMgZHJvcHBlZCB0byB0aGlzIHRhYmxlIGl0IGNvdWxkbid0IGJlIG1vdmVkIG91dCBhbnkgbW9yZSAtIHRhYmxlIGFuZCBlbGVtZW50IG1vdmVkIHRvZ2V0aGVyIGJlY2F1c2UgdGFibGUgY2FwdHVyZXMgbW91c2Vkb3duIGV2ZW50IGFsc28gaW4gYnViYmxpbmcgcHJvY2VzKVxyXG4gICAgaWYgKGV2dC5zdG9wUHJvcGFnYXRpb24pXHJcbiAgICB7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBzaGlmdEtleSA9IGV2dC5zaGlmdEtleTsgICAgICAgICAgICAgIC8vIHNldCB0cnVlIG9yIGZhbHNlIGlmIHNoaWZ0IGtleSBpcyBwcmVzc2VkXHJcblxyXG4gICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGV4dCBzZWxlY3Rpb24gKENocm9tZSwgRkYsIE9wZXJhLCBTYWZhcmkpXHJcbiAgICB7XHJcbiAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiBkb2N1bWVudC5zZWxlY3Rpb24udHlwZSA9PT0gXCJUZXh0XCIpICAvLyBJRThcclxuICAgIHtcclxuICAgICAgdHJ5IHsgZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KCk7IH0gY2F0Y2ggKGVycm9yKSB7IH0gICAgICAgICAgICAgLy8gaWdub3JlIGVycm9yIHRvIGFzIGEgd29ya2Fyb3VuZCBmb3IgYnVnIGluIElFOFxyXG4gICAgfVxyXG5cclxuICAgIFggPSBwb2ludGVyLnggPSBldnQuY2xpZW50WDtcclxuICAgIFkgPSBwb2ludGVyLnkgPSBldnQuY2xpZW50WTtcclxuXHJcbiAgICB0aHJlc2hvbGQueCA9IFg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHRocmVzaG9sZCBwb3NpdGlvbiAobmVlZGVkIGZvciBjYWxjdWxhdGluZyBkaXN0YW5jZSlcclxuICAgIHRocmVzaG9sZC55ID0gWTtcclxuICAgIHRocmVzaG9sZC5mbGFnID0gZmFsc2U7XHJcblxyXG4gICAgUkVESVBTLmRyYWcub2JqT2xkID0gb2JqT2xkID0gb2JqIHx8IHRoaXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBwcmV2aW91cyBvYmplY3QgaWYgZGVmaW5lZCBvciBzZXQgdG8gdGhlIGNsaWNrZWQgb2JqZWN0XHJcbiAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSB0aGlzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGNsaWNrZWQgb2JqZWN0XHJcblxyXG4gICAgY2xvbmVDbGFzcyA9IG9iai5jbGFzc05hbWUuaW5kZXhPZigncmVkaXBzLWNsb25lJykgPiAtMTsgICAgICAgICAgICAvLyBzZXQgdHJ1ZSBvciBmYWxzZSBpZiBjbGlja2VkIGVsZW1lbnQgY29udGFpbnMgXCJyZWRpcHMtY2xvbmVcIiBjbGFzcyBuYW1lIChuZWVkZWQgZm9yIGNsb25lIGVsZW1lbnQgYW5kIGNsb25lIHRhYmxlIHJvdylcclxuXHJcbiAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSByb3dDbG9uZShvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY3VycmVudCByb3cgKGRvIG5vdCBjbG9uZSlcclxuXHJcbiAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB1c2VyIGhhcyB1c2VkIGEgbW91c2UgZXZlbnQgdG8gaW5jcmVhc2UgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIHRhYmxlIC0gY2FsbCBjYWxjdWxhdGVDZWxscygpXHJcblxyXG4gICAgcm93ID0gY2VsbCA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCByb3cgYW5kIGNlbGwgaW5kZXhlcyAobmVlZGVkIGluIGNhc2Ugb2YgZW5hYmxlIC8gZGlzYWJsZSB0YWJsZXMpXHJcbiAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgYW5kIHJlbWVtYmVyIHNvdXJjZSBwb3NpdGlvbiAob2xkIHBvc2l0aW9uIGlzIGluaXRpYWxseSB0aGUgc2FtZSBhcyBzb3VyY2UgcG9zaXRpb24pXHJcbiAgICByb3dfc291cmNlID0gcm93X29sZCA9IHJvdztcclxuICAgIGNlbGxfc291cmNlID0gY2VsbF9vbGQgPSBjZWxsO1xyXG5cclxuICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0NsaWNrZWQodGQuY3VycmVudCk7XHJcblxyXG4gICAgLy8gaWYgc3RhcnQgcG9zaXRpb24gY2Fubm90IGJlIGRlZmluZWQgdGhlbiB1c2VyIHByb2JhYmx5IGNsaWNrZWQgb24gZWxlbWVudCB0aGF0IGJlbG9uZ3MgdG8gdGhlIGRpc2FibGVkIHRhYmxlIChvciBzb21ldGhpbmcgZWxzZSBoYXBwZW5lZCB0aGF0IHdhcyBub3Qgc3VwcG9zZWQgdG8gaGFwcGVuIC0gZXZlcnkgZWxlbWVudCBzaG91bGQgYmVsb25nIHRvIHRoZSB0YWJsZSkgdGhpcyBjb2RlIG11c3QgZ28gYWZ0ZXIgZXhlY3V0aW9uIG9mIGV2ZW50IGhhbmRsZXJzXHJcbiAgICBpZiAocm93ID09PSBudWxsIHx8IGNlbGwgPT09IG51bGwpXHJcbiAgICB7XHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcnVuIHNldFRhYmxlUm93Q29sdW1uKCkgYWdhaW4gYmVjYXVzZSBzb21lIG9mIHRhYmxlcyBtaWdodCBiZSBlbmFibGVkIGluIGhhbmRsZXIgZXZlbnRzIGFib3ZlXHJcbiAgICAgIHJvd19zb3VyY2UgPSByb3dfb2xkID0gcm93O1xyXG4gICAgICBjZWxsX3NvdXJjZSA9IGNlbGxfb2xkID0gY2VsbDtcclxuXHJcbiAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgY2VsbCA9PT0gbnVsbCkgIC8vIG5vLCBjbGlja2VkIGVsZW1lbnQgaXMgb24gdGhlIGRpc2FibGVkIHRhYmxlIC0gc29ycnlcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZWQgPSBjbG9uZWQgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBcIm1vdmVkXCIgZmxhZyAobmVlZGVkIGZvciBjbG9uZSBvYmplY3QgaW4gaGFuZGxlck9uTW91c2VNb3ZlKSBhbmQgXCJjbG9uZWRcIiBmbGFnXHJcblxyXG4gICAgUkVESVBTLmV2ZW50LmFkZChkb2N1bWVudCwgJ21vdXNlbW92ZScsIGhhbmRsZXJPbk1vdXNlTW92ZSk7ICAgICAgICAvLyBhY3RpdmF0ZSBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyIG9uIGRvY3VtZW50IG9iamVjdFxyXG4gICAgUkVESVBTLmV2ZW50LmFkZChkb2N1bWVudCwgJ21vdXNldXAnLCBoYW5kbGVyT25Nb3VzZVVwKTsgICAgICAgICAgICAvLyBhY3RpdmF0ZSBvbm1vdXNldXAgZXZlbnQgaGFuZGxlciBvbiBkb2N1bWVudCBvYmplY3RcclxuXHJcbiAgICBpZiAocm93ICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3IgaWYgaXMgcG9zc2libGVcclxuICAgIHtcclxuICAgICAgYmdTdHlsZU9sZCA9IGdldFRkU3R5bGUocm93KTtcclxuICAgIH1cclxuXHJcbiAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLCAncG9zaXRpb24nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0YWJsZSBDU1MgcG9zaXRpb24gKG5lZWRlZCBmb3IgZXhjbHVzaW9uIFwic2Nyb2xsIG9mZnNldFwiIGlmIHRhYmxlIGJveCBoYXMgcG9zaXRpb24gZml4ZWQpXHJcblxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZSBkb2Vzbid0IGhhdmUgc3R5bGUgcG9zaXRpb246Zml4ZWQgdGhlbiB0YWJsZSBjb250YWluZXIgc2hvdWxkIGJlIHRlc3RlZFxyXG4gICAge1xyXG4gICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLnBhcmVudE5vZGUsICdwb3NpdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIG9mZnNldCA9IGJveE9mZnNldChvYmosIHBvc2l0aW9uKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2JqZWN0IG9mZnNldFxyXG4gICAgb2JqTWFyZ2luID0gW1kgLSBvZmZzZXRbMF0sIG9mZnNldFsxXSAtIFgsIG9mZnNldFsyXSAtIFksIFggLSBvZmZzZXRbM11dOyAgIC8vIGNhbGN1bGF0ZSBvZmZzZXQgZnJvbSB0aGUgY2xpY2tlZCBwb2ludCBpbnNpZGUgZWxlbWVudCB0byB0aGUgdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0IHNpZGUgb2YgdGhlIGVsZW1lbnRcclxuXHJcbiAgICByZXR1cm4gZmFsc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZSB0ZXh0IHNlbGVjdGlvbiBmb3Igbm9uIElFIGJyb3dzZXJzXHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZHMgcmV0dXJucyByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIHJvdyBvciBjbG9uZXMgdGFibGUgcm93LlxyXG4gICAqIElmIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlRG93bjpcclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmlucHV0IHBhcmFtZXRlciBpcyBESVYgY2xhc3M9XCJyZWRpcHMtcm93XCI8L2xpPlxyXG4gICAqIDxsaT5tZXRob2Qgd2lsbCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjdXJyZW50IHJvdzwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBJZiBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmU6XHJcbiAgICogPHVsPlxyXG4gICAqIDxsaT5pbnB1dCBwYXJhbWV0ZXIgaXMgVFIgKGN1cnJlbnQgcm93KSAtIHByZXZpb3VzbHkgcmV0dXJuZWQgd2l0aCB0aGlzIGZ1bmN0aW9uPC9saT5cclxuICAgKiA8bGk+bWV0aG9kIHdpbGwgY2xvbmUgY3VycmVudCByb3cgYW5kIHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGNsb25lZCByb3c8L2xpPlxyXG4gICAqIDwvdWw+XHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgRElWIGNsYXNzPVwicmVkaXBzLXJvd1wiIG9yIFRSIChjdXJyZW50IHJvdylcclxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gUmV0dXJucyByZWZlcmVuY2Ugb2YgdGhlIGN1cnJlbnQgcm93IG9yIGNsb25lIGN1cnJlbnQgcm93IGFuZCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjbG9uZWQgcm93LlxyXG4gICAqL1xyXG4gIHJvd0Nsb25lID0gZnVuY3Rpb24gKGVsKVxyXG4gIHtcclxuICAgIHZhciB0YWJsZU1pbmk7ICAgICAgLy8gb3JpZ2luYWwgdGFibGUgaXMgY2xvbmVkIGFuZCBhbGwgcm93cyBleGNlcHQgcGlja2VkIHJvdyBhcmUgZGVsZXRlZFxyXG4gICAgdmFyIHJvd09iajsgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIHJvdyBvYmplY3RcclxuICAgIHZhciBkaXY7ICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSA8RElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiPiBlbGVtZW50XHJcblxyXG4gICAgaWYgKGVsLm5vZGVOYW1lID09PSAnRElWJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMSkgcm93Q2xvbmUgY2FsbCBpbiBvbm1vdXNlZG93biB3aWxsIHJldHVybiByZWZlcmVuY2Ugb2YgVFIgZWxlbWVudCAoaW5wdXQgcGFyYW1ldGVyIGlzIEhUTUxFbGVtZW50IDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCI+KVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgcmVmZXJlbmNlIHRvIHRoZSA8RElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiPlxyXG4gICAgICBlbCA9IGZpbmRQYXJlbnQoJ1RSJywgZWwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBwYXJlbnQgVFIgZWxlbWVudFxyXG4gICAgICBpZiAoZWwucmVkaXBzID09PSB1bmRlZmluZWQpIHsgZWwucmVkaXBzID0ge307IH0gICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZCAoaXQgaXMgb25seSBvbmUgcHJvcGVydHkgZm9yIG5vdylcclxuICAgICAgZWwucmVkaXBzLmRpdiA9IGRpdjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgcmVmZXJlbmNlIHRvIHRoZSBESVYgZWxlbWVudCBhcyByZWRpcHMuZGl2IHRoaXMgd2lsbCBtb3N0bHkgYmUgcmVmZXJlbmNlZCBhcyBvYmpPbGQucmVkaXBzLmRpdiAoYmVjYXVzZSBvYmpPbGQgaW4gcm93IGRyYWdnaW5nIGNvbnRleHQgaXMgcmVmZXJlbmNlIHRvIHRoZSBzb3VyY2Ugcm93KVxyXG4gICAgICByZXR1cm4gZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHJlZmVyZW5jZSB0byB0aGUgVFIgZWxlbWVudFxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMikgcm93Q2xvbmUgY2FsbCBpbiBvbm1vdXNlbW92ZSB3aWxsIGNsb25lIGN1cnJlbnQgcm93IChlbC5ub2RlTmFtZSA9PT0gJ1RSJylcclxuICAgIHtcclxuICAgICAgcm93T2JqID0gZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgc291cmNlIHJvd1xyXG5cclxuICAgICAgdGFibGVNaW5pID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgdGFibGVNaW5pLmlubmVySFRNTCA9ICc8dHIgaWQ9XCInICsgcm93T2JqLmlkICsgJ1wiIGNsYXNzPVwiJyArIHJvd09iai5jbGFzc0xpc3QgKyAnXCI+JyArIHJvd09iai5pbm5lckhUTUwgKyAnPC90cj4nO1xyXG4gICAgICAvL3RhYmxlTWluaS5pbm5lckhUTUwgPSBnZXRBc3NlbWJseU1hcmt1cChwYXJzZUludChyb3dPYmouaWQucmVwbGFjZSgncm93aWQnLCAnJykpKTsgICAvL2NhbiBiZSB1c2VkIHRvIHNob3cgdGhlIGVudGlyZSBhc3NlbWJseSB3aGVuIGRyYWdnaW5nLCB0ZW5kcyB0byBzbG93IHRoaW5ncyBkb3duIGFuZCBiZSBjdW1iZXJzb21lXHJcblxyXG4gICAgICB0YWJsZU1pbmkucmVkaXBzID0ge307ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIFwicHJvcGVydHkgb2JqZWN0XCIgaW4gd2hpY2ggYWxsIGN1c3RvbSBwcm9wZXJ0aWVzIHdpbGwgYmUgc2F2ZWRcclxuICAgICAgdGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cgPSByb3dPYmo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHNvdXJjZSByb3cgcmVmZXJlbmNlIChuZWVkZWQgZm9yIHNvdXJjZSByb3cgZGVsZXRpb24gaW4gcm93RHJvcCBtZXRob2QpXHJcblxyXG4gICAgICBjb3B5UHJvcGVydGllcyhyb3dPYmosIHRhYmxlTWluaS5yb3dzWzBdKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgdG8gYWxsIGNoaWxkIERJViBlbGVtZW50cyBhbmQgc2V0IG9ubW91c2Vkb3duL29uZGJsY2xpY2sgZXZlbnQgaGFuZGxlcnNcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZGlwc19jbG9uZScpLmFwcGVuZENoaWxkKHRhYmxlTWluaSk7ICAgICAvLyBhcHBlbmQgY2xvbmVkIG1pbmkgdGFibGUgdG8gdGhlIERJViBpZD1cInJlZGlwc19jbG9uZVwiXHJcblxyXG4gICAgICByZXR1cm4gdGFibGVNaW5pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgZHJvcHMgdGFibGUgcm93IHRvIHRoZSB0YXJnZXQgcm93IGFuZCBjYWxscyB1c2VyIGV2ZW50IGhhbmRsZXJzLiBTb3VyY2Ugcm93IGlzIGRlbGV0ZWQgYW5kIGNsb25lZCByb3cgaXMgaW5zZXJ0ZWQgYXQgdGhlIG5ldyBwb3NpdGlvbi5cclxuICAgKiBNZXRob2QgdGFrZXMgY2FyZSBhYm91dCB0aGUgbGFzdCByb3cgaW4gdGhlIHRhYmxlIG9ubHkgaWYgdXNlciBkcmFncyBlbGVtZW50LiBJbiBjYXNlIG9mIG1vdmluZyByb3dzIHdpdGggbW92ZU9iamVjdCgpLCBjb250cm9sXHJcbiAgICogYW5kIGxvZ2ljIGZvciBsYXN0IHJvdyBpcyB0dXJuZWQgb2ZmLiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZVVwKClcclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHRhYmxlSWR4IFRhYmxlIGluZGV4LlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gcm93SWR4IFJvdyBpbmRleC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBbdGFibGVNaW5pXSBSZWZlcmVuY2UgdG8gdGhlIG1pbmkgdGFibGUgKHRhYmxlIHRoYXQgY29udGFpbnMgb25seSBvbmUgcm93KS4gVGhpcyBpcyBhY3R1YWxseSBjbG9uZSBvZiBzb3VyY2Ugcm93LlxyXG4gICAqL1xyXG4gIHJvd0Ryb3AgPSBmdW5jdGlvbiAocm93SWR4KVxyXG4gIHtcclxuICAgIHZhciBkcm9wOyAgICAgICAgICAgICAgIC8vIChib29sZWFuKSBpZiBmYWxzZSB0aGVuIGRyb3BwaW5nIHJvdyB3aWxsIGJlIGNhbmNlbGVkXHJcbiAgICB2YXIgdHJNaW5pOyAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIFRSIGluIG1pbmkgdGFibGVcclxuICAgIHZhciBkZWxldGVUYWJsZVJvdzsgICAgIC8vIGRlbGV0ZSByb3cgKHByaXZhdGUgbWV0aG9kKVxyXG5cclxuICAgIGRlbGV0ZVRhYmxlUm93ID0gZnVuY3Rpb24gKGVsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIHRhYmxlIHJvdyAtIGlucHV0IHBhcmVtZXRlciBpcyByb3cgcmVmZXJlbmNlIChwcml2YXRlIG1ldGhvZClcclxuICAgIHtcclxuICAgICAgdmFyIHRibDtcclxuXHJcbiAgICAgIGlmIChlbC5yZWRpcHMgPT09IHVuZGVmaW5lZCB8fCAhZWwucmVkaXBzLmVtcHR5Um93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBkb2Vzbid0IGhhdmUgY3VzdG9tIFwicmVkaXBzXCIgcHJvcGVydHkgb3IgaXMgbm90IG1hcmtlZCBhcyBlbXB0eSwgdGhlbiBpdCBjYW4gYmUgZGVsZXRlZFxyXG4gICAgICB7XHJcbiAgICAgICAgdGJsID0gZmluZFBhcmVudCgnVEFCTEUnLCBlbCk7XHJcbiAgICAgICAgdGJsLmRlbGV0ZVJvdyhlbC5yb3dJbmRleCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSwgcm93IGlzIG1hcmtlZCBhcyBcImVtcHR5XCIgYW5kIGl0IHdpbGwgYmUgb25seSBjb2xvcmVkIChub3QgZGVsZXRlZCksIGNvbnRlbnQgb2YgdGFibGUgY2VsbHMgd2lsbCBiZSBkZWxldGVkIGFuZCBiYWNrZ3JvdW5kIGNvbG9yIHdpbGwgYmUgc2V0IHRvIGRlZmF1bHQgY29sb3JcclxuICAgICAge1xyXG4gICAgICAgIHJvd09wYWNpdHkoZWwsICdlbXB0eScsIFJFRElQUy5kcmFnLnN0eWxlLnJvd0VtcHR5Q29sb3IpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciB0YWJsZU1pbmkgPSBvYmo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY3VycmVudGx5IGRyYWdnZWQgcm93IC0gbWluaSB0YWJsZVxyXG5cclxuICAgIGlmIChyb3dJZHggPiB0YWJsZS5yb3dzLmxlbmd0aCAtIDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGluZGV4IGlzIG91dCBvZiBib3VuZHMsIHRoZW4gc2V0IG1heCByb3cgaW5kZXggKHJvdyB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSB0YWJsZSBib3R0b20pXHJcbiAgICB7XHJcbiAgICAgIHJvd0lkeCA9IHRhYmxlLnJvd3MubGVuZ3RoIC0gMTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdGFibGVSb3cgPSB0YWJsZS5yb3dzW3Jvd0lkeF07XHJcblxyXG4gICAgdHJNaW5pID0gdGFibGVNaW5pLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBUUiBpbiBtaW5pIHRhYmxlIChtaW5pIHRhYmxlIGhhcyBvbmx5IG9uZSByb3cgLSBmaXJzdCByb3cpXHJcblxyXG4gICAgdGFibGVNaW5pLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGFibGVNaW5pKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXN0cm95IG1pbmkgdGFibGUgKG5vZGUgc3RpbGwgZXhpc3RzIGluIG1lbW9yeSlcclxuXHJcbiAgICBkcm9wID0gUkVESVBTLmRyYWcuZXZlbnQucm93RHJvcHBlZEJlZm9yZSh0YWJsZSwgdGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cucm93SW5kZXgpOyAgICAgIC8vIGNhbGwgZXZlbnQucm93RHJvcHBlZEJlZm9yZSgpIC0gdGhpcyBoYW5kbGVyIGNhbiByZXR1cm4gXCJmYWxzZVwiIHZhbHVlXHJcblxyXG4gICAgaWYgKGRyb3AgIT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBoYW5kbGVyIHJldHVybmVkIGZhbHNlIHRoZW4gcm93IGRyb3BwaW5nIHdpbGwgYmUgY2FuY2VsZWRcclxuICAgIHtcclxuICAgICAgaWYgKHJvd0lkeCA8IHRhYmxlLnJvd3MubGVuZ3RoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGlzIG5vdCBkcm9wcGVkIHRvIHRoZSBsYXN0IHJvdyBwb3NpdGlvblxyXG4gICAgICB7XHJcbiAgICAgICAgdGFibGVSb3cucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodHJNaW5pLCB0YWJsZVJvdy5uZXh0U2libGluZyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IGlzIGRyb3BwZWQgdG8gdGhlIGxhc3Qgcm93IHBvc2l0aW9uLCBpdCdzIHBvc3NpYmxlIHRvIHNldCB0YXJnZXQgcm93IGluZGV4IGdyZWF0ZXIgdGhlbiBudW1iZXIgb2Ygcm93cyAtIGluIHRoaXMgY2FzZSByb3cgd2lsbCBiZSBhcHBlbmRlZCB0byB0aGUgdGFibGUgZW5kXHJcbiAgICAgIHtcclxuICAgICAgICB0YWJsZVJvdy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRyTWluaSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IHNob3VsZCBiZSBhcHBlbmRlZFxyXG4gICAgICAgIHRhYmxlUm93ID0gdGFibGUucm93c1swXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSB1cHBlciByb3csIGFmdGVyIHJvdyBpcyBhcHBlbmRlZCwgdXBwZXIgcm93IHNob3VsZCBiZSB0ZXN0ZWQgaWYgY29udGFpbnMgXCJlbXB0eVJvd1wiIHNldCB0byB0cnVlLCB0aGlzIGNvdWxkIGhhcHBlbiBpbiBjYXNlIHdoZW4gcm93IGlzIG1vdmVkIHRvIHRoZSB0YWJsZSB3aXRoIG9ubHkgb25lIGVtcHR5IHJvd1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgc291cmNlIHJvdyBpZiByb3cgaXMgbm90IGNsb25lZFxyXG4gICAgICB7XHJcbiAgICAgICAgZGVsZXRlVGFibGVSb3codGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkZWxldGUgdHJNaW5pLnJlZGlwcy5lbXB0eVJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgZW1wdHlSb3cgcHJvcGVydHkgZnJvbSBpbnNlcnRlZC9hcHBlbmRlZCByb3cgYmVjYXVzZSBlbXB0eVJvdyB3aWxsIGJlIHNldCBvbiBuZXh0IG1vdmUsIGNvcHlQcm9wZXJ0aWVzKCkgaW4gcm93Q2xvbmUoKSBjb3BpZWQgZW1wdHlSb3cgcHJvcGVydHkgdG8gdGhlIHJvdyBpbiB0YWJsZU1pbmksIG90aGVyd2lzZSByb3cgd2lsbCBiZSBvdmVyd3JpdHRlbiBhbmQgdGhhdCBpcyBub3QgZ29vZFxyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dEcm9wcGVkKHRhYmxlUm93KTsgICAgICAgICAvLyBjYWxsIHJvd0Ryb3BwZWQgZXZlbnQgaGFuZGxlclxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVudC5yb3dEcm9wcGVkQmVmb3JlKCkgcmV0dXJuZWQgXCJmYWxzZVwiIChpdCdzIHVwIHRvIHVzZXIgdG8gcmV0dXJuIHNvdXJjZSByb3cgb3BhY2l0eSB0byBpdHMgb3JpZ2luYWwgc3RhdGUpXHJcbiAgICB7XHJcbiAgICAgIC8vIHJvd09wYWNpdHkob2JqT2xkLCAxMDApO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBvbm1vdXNldXAgZXZlbnQgaGFuZGxlci5cclxuICAgKiBoYW5kbGVyT25Nb3VzZVVwIGlzIGF0dGFjaGVkIHRvIHRoZSBESVYgZWxlbWVudCBpbiBhIG1vbWVudCB3aGVuIERJViBlbGVtZW50IGlzIGNsaWNrZWQgKHRoaXMgaGFwcGVucyBpbiBoYW5kbGVyT25Nb3VzZURvd24pLlxyXG4gICAqIFRoaXMgZXZlbnQgaGFuZGxlciBkZXRhY2hlcyBvbm1vdXNlbW92ZSBhbmQgb25tb3VzZXVwIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGUgRXZlbnQgaW5mb3JtYXRpb24uXHJcbiAgICovXHJcbiAgaGFuZGxlck9uTW91c2VVcCA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgLy8gZGVmaW5lIGV2ZW50IChGRiAmIElFKVxyXG4gICAgdmFyIHJfcm93OyAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIG1vZGU9XCJyb3dcIlxyXG4gICAgdmFyIG10X3RyOyAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIHJldHVybmluZyBjb2xvciB0byB0aGUgdGFibGUgY2VsbCAobXRfdHIgLSBcIm1pbmkgdGFibGVcIiBcInRhYmxlX3Jvd1wiKVxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCBpbiBsb2NhbCBsb29wXHJcbiAgICB2YXIgZHJvcDsgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGZhbHNlIHRoZW4gZHJvcHBlZCBESVYgZWxlbWVudFxyXG5cclxuICAgIFggPSBldnQuY2xpZW50WDtcclxuICAgIFkgPSBldnQuY2xpZW50WTtcclxuXHJcbiAgICBlZGdlLmZsYWcueCA9IGVkZ2UuZmxhZy55ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHVybiBvZmYgYXV0b3Njcm9sbCBcImN1cnJlbnQgY2VsbFwiIGhhbmRsaW5nIChpZiB1c2VyIG1vdXNldXAgaW4gdGhlIG1pZGRsZSBvZiBhdXRvc2Nyb2xsaW5nKVxyXG5cclxuICAgIFJFRElQUy5ldmVudC5yZW1vdmUoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBoYW5kbGVyT25Nb3VzZU1vdmUpO1xyXG4gICAgUkVESVBTLmV2ZW50LnJlbW92ZShkb2N1bWVudCwgJ21vdXNldXAnLCBoYW5kbGVyT25Nb3VzZVVwKTtcclxuXHJcbiAgICBkcmFnQ29udGFpbmVyLm9uc2VsZWN0c3RhcnQgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWNoIGRyYWdDb250YWluZXIub25zZWxlY3RzdGFydCBoYW5kbGVyIHRvIGVuYWJsZSBzZWxlY3QgZm9yIElFNy9JRTggYnJvd3NlclxyXG5cclxuICAgIHJlc2V0U3R5bGVzKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvYmplY3Qgc3R5bGVzXHJcblxyXG4gICAgc2Nyb2xsRGF0YS53aWR0aCAgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg7XHJcbiAgICBzY3JvbGxEYXRhLmhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcblxyXG4gICAgZWRnZS5mbGFnLnggPSBlZGdlLmZsYWcueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGF1dG9zY3JvbGwgZmxhZ3NcclxuXHJcbiAgICBpZiAocm93ID09PSBudWxsIHx8IGNlbGwgPT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGVsZW1lbnQgd2FzIGNsaWNrZWQgYW5kIGxlZnQgYnV0dG9uIHdhcyByZWxlYXNlZCwgYnV0IGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSB1bm1vdmFibGUgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RNb3ZlZCgpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZHJhZy50ZC50YXJnZXQgPSB0ZC50YXJnZXQgPSB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF07XHJcblxyXG4gICAgICBzZXRUZFN0eWxlKHJvdywgYmdTdHlsZU9sZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIGZvciBkZXN0aW5hdGlvbiByb3dcclxuXHJcbiAgICAgIHJfcm93ID0gcm93O1xyXG5cclxuICAgICAgaWYgKCFtb3ZlZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgd2FzIGNsaWNrZWQgYW5kIG1vdXNlIGJ1dHRvbiB3YXMgcmVsZWFzZWQgcmlnaHQgYXdheSAocm93IHdhcyBub3QgbW92ZWQpXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dOb3RNb3ZlZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IHdhcyBtb3ZlZFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHJvd19zb3VyY2UgPT09IHJfcm93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGRyb3BwZWQgdG8gdGhlIHNvdXJjZSByb3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICBtdF90ciA9IG9iai5nZXRFbGVtZW50c0J5VGFnTmFtZSgndHInKVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBUUiBpbiBtaW5pIHRhYmxlIChtaW5pIHRhYmxlIGhhcyBvbmx5IG9uZSByb3cpXHJcblxyXG4gICAgICAgICAgb2JqT2xkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG10X3RyLnN0eWxlLmJhY2tncm91bmRDb2xvcjsgICAgICAgICAgIC8vIHJldHVybiBjb2xvciB0byB0aGUgc291cmNlIHJvdyBmcm9tIHRoZSByb3cgb2YgY2xvbmVkIG1pbmkgdGFibGUsIGNvbG9yIG9mIHRoZSBzb3VyY2Ugcm93IGNhbiBiZSBjaGFuZ2VkIGluIGV2ZW50LnJvd01vdmVkKCkgKHdoZW4gdXNlciB3YW50cyB0byBtYXJrIHNvdXJjZSByb3cpXHJcblxyXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IG10X3RyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBjb2xvciB0byB0aGUgZWFjaCB0YWJsZSBjZWxsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIG9iak9sZC5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBtdF90ci5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjbG9uZWQgbWluaSB0YWJsZVxyXG4gICAgICAgICAgZGVsZXRlIG9iak9sZC5yZWRpcHMuZW1wdHlSb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBlbXB0eVJvdyBwcm9wZXJ0eSBmcm9tIHNvdXJjZSByb3cgYmVjYXVzZSBlbXB0eVJvdyB3aWxsIGJlIHNldCBvbiBuZXh0IG1vdmUsIG90aGVyd2lzZSByb3cgd291bGQgYmUgb3ZlcndyaXR0ZW4gYW5kIHRoYXQncyBubyBnb29kXHJcblxyXG4gICAgICAgICAgaWYgKGNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyB3YXMgY2xvbmVkIGFuZCBkcm9wcGVkIHRvIHRoZSBzb3VyY2UgbG9jYXRpb24gdGhlbiBjYWxsIHJvd05vdENsb25lZCBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd05vdENsb25lZCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQucm93RHJvcHBlZFNvdXJjZSgpIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93RHJvcHBlZFNvdXJjZSh0ZC50YXJnZXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZHJvcHBlZCB0byB0aGUgbmV3IHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJvd0Ryb3Aocl9yb3cpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKCFjbG9uZWQgJiYgIXRocmVzaG9sZC5mbGFnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGlja2VkIGVsZW1lbnQgd2FzIG5vdCBtb3ZlZCAtIERJViBlbGVtZW50IGRpZG4ndCBjcm9zcyB0aHJlc2hvbGQgdmFsdWUsIGp1c3QgY2FsbCBldmVudC5ub3RNb3ZlZCBldmVudCBoYW5kbGVyXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RNb3ZlZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGNsb25lZCAmJiByb3dfc291cmNlID09PSByb3cgJiYgY2VsbF9zb3VyY2UgPT09IGNlbGwpICAgICAgICAgICAgLy8gZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3BwZWQgb24gdGhlIHN0YXJ0IHBvc2l0aW9uXHJcbiAgICAgIHtcclxuICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopO1xyXG4gICAgICAgIGNsb25lZElkW29iak9sZC5pZF0gLT0gMTtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RDbG9uZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChjbG9uZWQgJiYgUkVESVBTLmRyYWcuY2xvbmUuZHJvcCA9PT0gZmFsc2UgJiYgKFggPCB0YWJsZS5yZWRpcHMub2Zmc2V0WzNdIHx8IFggPiB0YWJsZS5yZWRpcHMub2Zmc2V0WzFdIHx8IFkgPCB0YWJsZS5yZWRpcHMub2Zmc2V0WzBdIHx8IFkgPiB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdKSkgICAgLy8gZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3BwZWQgb3V0c2lkZSBjdXJyZW50IHRhYmxlIGFuZCBjbG9uZS5kcm9wIGlzIHNldCB0byBmYWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTtcclxuICAgICAgICBjbG9uZWRJZFtvYmpPbGQuaWRdIC09IDE7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQubm90Q2xvbmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIGNhbGwgZXZlbnQuZHJvcHBlZEJlZm9yZSgpLCBhcHBlbmQgb2JqZWN0IHRvIHRoZSBjZWxsIGFuZCBjYWxsIGV2ZW50LmRyb3BwZWQoKVxyXG4gICAgICB7XHJcbiAgICAgICAgZHJvcCA9IFJFRElQUy5kcmFnLmV2ZW50LmRyb3BwZWRCZWZvcmUodGQudGFyZ2V0KTsgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5kcm9wcGVkQmVmb3JlIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICBlbGVtZW50RHJvcChkcm9wKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkcm9wIGVsZW1lbnQgdG8gdGhlIHRhYmxlIGNlbGwgKG9yIGRlbGV0ZSBjbG9uZWQgZWxlbWVudCBpZiBkcm9wPVwiZmFsc2VcIilcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWNhbGN1bGF0ZSB0YWJsZSBjZWxscyBhbmQgc2Nyb2xsZXJzIGJlY2F1c2UgY2VsbCBjb250ZW50IGNvdWxkIGNoYW5nZSByb3cgZGltZW5zaW9uc1xyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5maW5pc2goKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgbGFzdCBldmVudCBoYW5kbGVyXHJcbiAgICB9XHJcblxyXG4gICAgcm93X29sZCA9IGNlbGxfb2xkID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9sZCBwb3NpdGlvbnNcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRWxlbWVudCBkcm9wLiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZVVwIGFuZCBhcHBlbmRzIGVsZW1lbnQgdG8gdGhlIHRhcmdldCB0YWJsZSBjZWxsLlxyXG4gICAqIElmIGlucHV0IHBhcmFtZXRlciBcImRyb3BcIiBpcyBzZXQgdG8gXCJmYWxzZVwiICh0aGlzIGlzIGFjdHVhbGx5IHJldHVybiB2YWx1ZSBmcm9tIGV2ZW50LmRyb3BwZWRCZWZvcmUpIHRoZW4gRElWIGVsZW1lbnRzIHdpbGwgbm90IGJlIGRyb3BwZWQgKG9ubHkgY2xvbmVkIGVsZW1lbnQgd2lsbCBiZSBkZWxldGVkKS5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtkcm9wXSBJZiBub3QgXCJmYWxzZVwiIHRoZW4gRElWIGVsZW1lbnQgd2lsbCBiZSBkcm9wcGVkIHRvIHRoZSBjZWxsLlxyXG4gICAqL1xyXG4gIGVsZW1lbnREcm9wID0gZnVuY3Rpb24gKGRyb3ApIFxyXG4gIHtcclxuICAgIHZhciBjbG9uZVNvdXJjZURpdiA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lIHNvdXJjZSBlbGVtZW50IChuZWVkZWQgaWYgY2xvbmUuc2VuZEJhY2sgaXMgc2V0IHRvIHRydWUpXHJcbiAgICB2YXIgZGl2OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub2RlTGlzdCBvZiBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGwgKG5lZWRlZCBpZiBjbG9uZS5zZW5kQmFjayBpcyBzZXQgdG8gdHJ1ZSlcclxuICAgIFxyXG4gICAgaWYgKGRyb3AgIT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaW5wdXQgcGFyYW1ldGVyIGlzIG5vdCBcImZhbHNlXCIgdGhlbiBESVYgZWxlbWVudCB3aWxsIGJlIGRyb3BwZWQgdG8gdGhlIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgaWYgKGNsb25lLnNlbmRCYWNrID09PSB0cnVlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNsb25lLnNlbmRCYWNrIGlzIHNldCB0byB0cnVlIHRoZW4gdHJ5IHRvIGZpbmQgc291cmNlIGVsZW1lbnQgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAge1xyXG4gICAgICAgIGRpdiA9IHRkLnRhcmdldC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnRElWJyk7ICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGFsbCBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpdi5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCBhbGwgRElWIGVsZW1lbnRzIGluIHRhcmdldCBjZWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgLy8gaWYgRElWIGluIHRhcmdldCBjZWxsIGlzIHNvdXJjZSBvZiBkcm9wcGVkIERJViBlbGVtZW50IChkcm9wcGVkIERJViBpZCBhbmQgaWQgb2YgRElWIGluIHRhcmdldCBjZWxsIGhhcyB0aGUgc2FtZSBuYW1lIGJlZ2lubmluZyBsaWtlIFwiZDEyYzJcIiBhbmQgXCJkMTJcIilcclxuICAgICAgICAgIC8vIG9mIGNvdXJzZSwgdGhlIGNhc2Ugd2hlcmUgc291cmNlIERJViBlbGVtZW50IGlzIGRyb3BwZWQgdG8gdGhlIGNlbGwgd2l0aCBjbG9uZWQgRElWIGVsZW1lbnQgc2hvdWxkIGJlIGV4Y2x1ZGVkIChwb3NzaWJsZSBpbiBjbGltaXQxIHR5cGUpXHJcbiAgICAgICAgICBpZiAob2JqICE9PSBkaXZbaV0gJiYgb2JqLmlkLmluZGV4T2YoZGl2W2ldLmlkKSA9PT0gMCkgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGNsb25lU291cmNlRGl2ID0gZGl2W2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIGNsb25lU291cmNlRGl2IGVsZW1lbnRcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjbG9uZVNvdXJjZURpdikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2xvbmUgc291cmNlIERJViBlbGVtZW50IGV4aXN0cyBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNsb25lTGltaXQoY2xvbmVTb3VyY2VEaXYsIDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjbGltaXQgY2xhc3MgKGluY3JlbWVudCBieSAxKVxyXG4gICAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRyb3BwZWQgRElWIGVsZW1lbnRcclxuICAgICAgICAgIHJldHVybjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBmcm9tIHRoZSBtZXRob2QgKGV2ZXJ5dGhpbmcgaXMgZG9uZSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRkLnRhcmdldC5hcHBlbmRDaGlsZChvYmopO1xyXG4gICAgICBcclxuICAgICAgcmVnaXN0ZXJFdmVudHMob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgKEZJWCBmb3IgU2FmYXJpIE1vYmlsZSlcclxuICAgICAgUkVESVBTLmRyYWcuZXZlbnQuZHJvcHBlZCh0ZC50YXJnZXQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmRyb3BwZWQgYmVjYXVzZSBjbG9uZUxpbWl0IGNvdWxkIGNhbGwgZXZlbnQuY2xvbmVkRW5kMSBvciBldmVudC5jbG9uZWRFbmQyXHJcbiAgICAgIFxyXG4gICAgICBpZiAoY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9iamVjdCBpcyBjbG9uZWRcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmNsb25lZERyb3BwZWQodGQudGFyZ2V0KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgY2xvbmVkRHJvcHBlZCBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgY2xvbmVMaW1pdChvYmpPbGQsIC0xKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdDFfWCBvciBjbGltaXQyX1ggY2xhc3NuYW1lXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNsb25lZCAmJiBvYmoucGFyZW50Tm9kZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZWQgZWxlbWVudCBzaG91bGQgYmUgZGVsZXRlZCAoaWYgbm90IGFscmVhZHkgZGVsZXRlZClcclxuICAgIHtcclxuICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgZm9yIERJViBlbGVtZW50LlxyXG4gICAqIERJViBlbGVtZW50cyBzaG91bGQgaGF2ZSBvbmx5IG9ubW91c2Vkb3duICh1c2luZyB0cmFkaXRpb25hbCBldmVudCByZWdpc3RyYXRpb24gbW9kZWwpLlxyXG4gICAqIEkgaGFkIGEgcHJvYmxlbSB3aXRoIGFkdmFuY2VkIGV2ZW50IHJlZ2lzdHJhdGlvbiBtb2RlbC5cclxuICAgKiBJbiBjYXNlIG9mIHVzaW5nIGFkdmFuY2VkIG1vZGVsLCBzZWxlY3RlZCB0ZXh0IGFuZCBkcmFnZ2VkIERJViBlbGVtZW50IHdlcmUgaW4gY29sbGlzaW9uLlxyXG4gICAqIEl0IGxvb2tzIGxpa2Ugc2VsZWN0ZWQgdGV4dCB3YXMgYWJsZSB0byBkcmFnIGluc3RlYWQgb2YgRElWIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZGl2IFJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3Igb25tb3VzZWRvd24sIG9udG91Y2hzdGFydCBhbmQgb25kYmxjbGljayB0byB0aGUgRElWIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbZmxhZ10gSWYgc2V0IHRvIGZhbHNlIHRoZW4gZXZlbnQgbGlzdGVuZXJzIHdpbGwgYmUgZGVsZXRlZC5cclxuICAgKi9cclxuICByZWdpc3RlckV2ZW50cyA9IGZ1bmN0aW9uIChkaXYsIGZsYWcpXHJcbiAge1xyXG4gICAgaWYgKGZsYWcgPT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBmbGFnIGlzIHNlIHRvIGZhbHNlLCB0aGVuIHJlbW92ZSBldmVudCBsaXN0ZW5lcnMgb24gRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgZGl2Lm9ubW91c2Vkb3duID0gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgZGl2Lm9ubW91c2Vkb3duID0gaGFuZGxlck9uTW91c2VEb3duO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICByZXNldFN0eWxlcyA9IGZ1bmN0aW9uIChlbCkgICAgICAgICAvLyBBZnRlciBlbGVtZW50IGlzIGRyb3BwZWQsIHN0eWxlcyBuZWVkIHRvIGJlIHJlc2V0LlxyXG4gIHtcclxuICAgIGVsLnN0eWxlLnRvcCAgPSAnJztcclxuICAgIGVsLnN0eWxlLmxlZnQgPSAnJztcclxuICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJyc7XHJcbiAgICBlbC5zdHlsZS56SW5kZXggPSAnJztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlTW92ZSBpcyBhdHRhY2hlZCB0byBkb2N1bWVudCBsZXZlbCBpbiBhIG1vbWVudCB3aGVuIERJViBlbGVtZW50IGlzIGNsaWNrZWQgKHRoaXMgaGFwcGVucyBpbiBoYW5kbGVyT25Nb3VzZURvd24pLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlVXAgZGV0YWNoZXMgb25tb3VzZW1vdmUgYW5kIG9ubW91c2V1cCBldmVudCBoYW5kbGVycy5cclxuICAgKiBAcGFyYW0ge0V2ZW50fSBlIEV2ZW50IGluZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIGhhbmRsZXJPbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgICAgICAgICAvLyBkZWZpbmUgZXZlbnQgKEZGICYgSUUpXHJcbiAgICB2YXIgYm91bmQgPSBSRURJUFMuZHJhZy5zY3JvbGwuYm91bmQ7ICAgLy8gcmVhZCBcImJvdW5kXCIgcHVibGljIHByb3BlcnR5IChtYXliZSBjb2RlIHdpbGwgYmUgZmFzdGVyLCBhbmQgaXQgd2lsbCBiZSBlYXNpZXIgdG8gcmVmZXJlbmNlIGluIG9ubW91c2Vtb3ZlIGhhbmRsZXIpXHJcbiAgICB2YXIgc2NhOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICB2YXIgZGVsdGFYLCBkZWx0YVk7ICAgICAgICAgICAgICAgICAgICAgLy8gZGVsdGEgZnJvbSBpbml0aWFsIHBvc2l0aW9uXHJcbiAgICB2YXIgaTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciBsb2NhbCBsb29wXHJcbiAgICB2YXIgc2Nyb2xsUG9zaXRpb247ICAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHBvc2l0aW9uIHZhcmlhYmxlIG5lZWRlZCBmb3IgYXV0b3Njcm9sbCBjYWxsXHJcblxyXG4gICAgWCA9IHBvaW50ZXIueCA9IGV2dC5jbGllbnRYO1xyXG4gICAgWSA9IHBvaW50ZXIueSA9IGV2dC5jbGllbnRZO1xyXG5cclxuICAgIGRlbHRhWCA9IE1hdGguYWJzKHRocmVzaG9sZC54IC0gWCk7ICAgICAgICAgLy8gY2FsY3VsYXRlIGRlbHRhIGZyb20gaW5pdGlhbCBwb3NpdGlvblxyXG4gICAgZGVsdGFZID0gTWF0aC5hYnModGhyZXNob2xkLnkgLSBZKTtcclxuXHJcbiAgICBpZiAoIW1vdmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIFwibW92ZWRcIiBmbGFnIGlzbid0IHNldCAodGhpcyBpcyB0aGUgZmlyc3QgbW9tZW50IHdoZW4gb2JqZWN0IGlzIG1vdmVkKVxyXG4gICAge1xyXG4gICAgICAvL3JlbWVtYmVyIHJlZmVyZW5jZSBvZiB0aGUgc291cmNlIHJvdywgY2xvbmUgc291cmNlIHJvdyBhbmQgc2V0IG9iaiBhcyByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgcm93IHNldHRpbmdzIG9mIFwiY2xvbmVkXCIgZmxhZyBzaG91bGQgZ28gYmVmb3JlIGNhbGxpbmcgcm93Q2xvbmUoKSBiZWNhdXNlIFwiY2xvbmVkXCIgaXMgbmVlZGVkIGluIHJvd0Nsb25lKCkgdG8gY3V0IG91dCBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIG5hbWUgZnJvbSA8ZGl2IGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvdyByZWRpcHMtY2xvbmVcIj4gZWxlbWVudHNcclxuICAgICAgaWYgKGNsb25lQ2xhc3MgfHwgKFJFRElQUy5kcmFnLmNsb25lLmtleVJvdyA9PT0gdHJ1ZSAmJiBzaGlmdEtleSkpXHJcbiAgICAgIHtcclxuICAgICAgICBjbG9uZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBSRURJUFMuZHJhZy5vYmpPbGQgPSBvYmpPbGQgPSBvYmo7ICAgICAgICAvLyByZW1lbWJlciByZWZlcmVuY2UgdG8gdGhlIHNvdXJjZSByb3dcclxuICAgICAgUkVESVBTLmRyYWcub2JqID0gb2JqID0gcm93Q2xvbmUob2JqKTsgICAgLy8gY2xvbmUgc291cmNlIHJvdyBhbmQgc2V0IGFzIG9ialxyXG4gICAgICBvYmouc3R5bGUuekluZGV4ID0gOTk5OyAgICAgICAgICAgICAgICAgICAvLyBzZXQgaGlnaCB6LWluZGV4IGZvciBjbG9uZWQgbWluaSB0YWJsZVxyXG5cclxuICAgICAgb2JqLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsgICAgICAgICAgICAgLy8gc2V0IHN0eWxlIHRvIGZpeGVkIHRvIGFsbG93IGRyYWdnaW5nIERJViBvYmplY3RcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgY2FsY3VsYXRlIGNlbGxzIGZvciBjYXNlIHdoZXJlIG1vdmVkIGVsZW1lbnQgY2hhbmdlZCBjZWxsIGRpbWVuc2lvbiwgcGxhY2UgMyBlbGVtZW50cyBpbiB0aGUgc2FtZSBjZWxsIGluIGV4YW1wbGUwOCBhbmQgdHJ5IHRvIG1vdmUgb25lIG91dCBvZiB0aGUgdGFibGUgY2VsbFxyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjb2x1bW5cclxuXHJcbiAgICAgIGlmIChjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQgaGFuZGxlciAocm93IGNsb25lZC9tb3ZlZClcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0Nsb25lZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd01vdmVkKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNldFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29sb3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlIGNlbGwgYW5kIHJlbWVtYmVyIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBjb2xvciwgc2V0UG9zaXRpb24oKSBtdXN0IGdvIGFmdGVyIGNhbGxpbmcgZXZlbnQubW92ZWQoKSBhbmQgZXZlbnQucm93TW92ZWQoKSBpZiB1c2VyIHdhbnRzIHRvIGNoYW5nZSBjb2xvciBvZiBzb3VyY2Ugcm93XHJcblxyXG4gICAgICBpZiAoWCA+IHNjcmVlbi53aWR0aCAtIG9iak1hcmdpblsxXSkgICAgLy8gaWYgZWxlbWVudCBpcyBmYXIgYXdheSBvbiB0aGUgcmlnaHQgc2lkZSBvZiBwYWdlLCBzZXQgcG9zc2libGUgcmlnaHQgcG9zaXRpb24gKHNjcmVlbi53aWR0aCAtIG9iamVjdCB3aWR0aCksIG9iak1hcmdpblsxXSArIG9iak1hcmdpblszXSA9IG9iamVjdCB3aWR0aFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnN0eWxlLmxlZnQgPSAoc2NyZWVuLndpZHRoIC0gKG9iak1hcmdpblsxXSArICBvYmpNYXJnaW5bM10pKSArICdweCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChZID4gc2NyZWVuLmhlaWdodCAtIG9iak1hcmdpblsyXSkgICAvLyBpZiBlbGVtZW50IGlzIGJlbG93IHBhZ2UgYm90dG9tLCBzZXQgcG9zc2libGUgbG93ZXIgcG9zaXRpb24gKHNjcmVlbi53aWR0aCAtIG9iamVjdCBoZWlnaHQpLCBvYmpNYXJnaW5bMF0gKyBvYmpNYXJnaW5bMl0gPSBvYmplY3QgaGVpZ2h0XHJcbiAgICAgIHtcclxuICAgICAgICBvYmouc3R5bGUudG9wICA9IChzY3JlZW4uaGVpZ2h0IC0gKG9iak1hcmdpblswXSArIG9iak1hcmdpblsyXSkpICsgJ3B4JztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vdmVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBtb3ZlZF9mbGFnXHJcblxyXG4gICAgLy8gc2V0IGxlZnQgYW5kIHRvcCBzdHlsZXMgZm9yIHRoZSBtb3ZlZCBlbGVtZW50IGlmIGVsZW1lbnQgaXMgaW5zaWRlIHdpbmRvdywgdGhpcyBjb25kaXRpb25zIHdpbGwgc3RvcCBlbGVtZW50IG9uIHdpbmRvdyBib3VuZHNcclxuICAgIGlmIChYID4gb2JqTWFyZ2luWzNdICYmIFggPCBzY3JlZW4ud2lkdGggLSBvYmpNYXJnaW5bMV0pXHJcbiAgICB7XHJcbiAgICAgIG9iai5zdHlsZS5sZWZ0ID0gKFggLSBvYmpNYXJnaW5bM10pICsgJ3B4JztcclxuICAgIH1cclxuICAgIGlmIChZID4gb2JqTWFyZ2luWzBdICYmIFkgPCBzY3JlZW4uaGVpZ2h0IC0gb2JqTWFyZ2luWzJdKVxyXG4gICAge1xyXG4gICAgICBvYmouc3R5bGUudG9wICA9IChZIC0gb2JqTWFyZ2luWzBdKSArICdweCc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCAodGhpcyBjb25kaXRpb24gc2hvdWxkIHNwYXJlIENQVSk6IDEpIGlmIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIERJViBpZD1cInJlZGlwcy1kcmFnXCIgMikgYW5kIGF1dG9zY3JvbGwgaXMgbm90IHdvcmtpbmcgMykgYW5kIGN1cnJlbnQgdGFibGUgY29udGFpbnMgbmVzdGVkIHRhYmxlIG9yIGN1cnNvciBpcyBvdXRzaWRlIG9mIGN1cnJlbnQgY2VsbFxyXG4gICAgaWYgKFggPCBkaXZCb3hbMV0gJiYgWCA+IGRpdkJveFszXSAmJiBZIDwgZGl2Qm94WzJdICYmIFkgPiBkaXZCb3hbMF0gJiZcclxuICAgICAgZWRnZS5mbGFnLnggPT09IDAgJiYgZWRnZS5mbGFnLnkgPT09IDAgJiZcclxuICAgICAgKGN1cnJlbnRDZWxsLmNvbnRhaW5UYWJsZSB8fCAoWCA8IGN1cnJlbnRDZWxsWzNdIHx8IFggPiBjdXJyZW50Q2VsbFsxXSB8fCBZIDwgY3VycmVudENlbGxbMF0gfHwgWSA+IGN1cnJlbnRDZWxsWzJdKSkpXHJcbiAgICB7XHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSByb3cgYW5kIHRhYmxlIGNlbGxcclxuICAgICAgY2VsbENoYW5nZWQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG5ldyBsb2NhdGlvbiBpcyBpbnNpZGUgdGFibGUgYW5kIG5ldyBsb2NhdGlvbiBpcyBkaWZmZXJlbnQgdGhlbiBvbGQgbG9jYXRpb25cclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBhdXRvU2Nyb2xsIG9wdGlvbiBpcyBlbmFibGVkIChieSBkZWZhdWx0IGl0IGlzIGJ1dCBpdCBjYW4gYmUgdHVybmVkIG9mZilcclxuICAgIGlmIChSRURJUFMuZHJhZy5zY3JvbGwuZW5hYmxlKVxyXG4gICAge1xyXG4gICAgICBlZGdlLnBhZ2UueCA9IGJvdW5kIC0gKHNjcmVlbi53aWR0aCAvIDIgID4gWCA/IFggLSBvYmpNYXJnaW5bM10gOiBzY3JlZW4ud2lkdGggLSBYIC0gb2JqTWFyZ2luWzFdKTsgICAgICAgLy8gY2FsY3VsYXRlIGhvcml6b250YWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuXHJcbiAgICAgIGlmIChlZGdlLnBhZ2UueCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZWRnZS5wYWdlLnggPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2hlbiBvYmplY3QgaXMgb25seSBoYWxmIHZpc2libGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLnBhZ2UueCA9IGJvdW5kO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZ2V0IGhvcml6b250YWwgd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICAgIC8vc2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSAwOyAgIC8vZGlzYWJsaW5nIGJlY2F1c2Ugd2Ugc2hvdWxkbid0IGhhdmUgdGhlIHVzZXIgc2Nyb2xsaW5nIGhvcml6b250YWxseSBhbmQgdGhpcyBpbXByb3ZlcyBwZXJmb3JtYW5jZSBmb3IgbGFyZ2UgdHJlZXNcclxuXHJcbiAgICAgICAgZWRnZS5wYWdlLnggKj0gWCA8IHNjcmVlbi53aWR0aCAvIDIgPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvblxyXG5cclxuICAgICAgICAvLyBpZiBwYWdlIGJvdW5kIGlzIGNyb3NzZWQgYW5kIHRoaXMgdHdvIGNhc2VzIGFyZW4ndCBtZXQ6IDEpIHNjcm9sbGJhciBpcyBvbiB0aGUgbGVmdCBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgbGVmdCAyKSBzY3JvbGxiYXIgaXMgb24gdGhlIHJpZ2h0IGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCByaWdodFxyXG4gICAgICAgIGlmICghKChlZGdlLnBhZ2UueCA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPD0gMCkgfHwgKGVkZ2UucGFnZS54ID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA+PSAoc2Nyb2xsRGF0YS53aWR0aCAtIHNjcmVlbi53aWR0aCkpKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoZWRnZS5mbGFnLngrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlIGF1dG9zY3JvbGwgZnVuY3Rpb24gKHRoaXMgc2hvdWxkIGhhcHBlbiBvbmx5IG9uY2UpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAvLyByZXNldCBvbnNjcm9sbCBldmVudFxyXG4gICAgICAgICAgICBhdXRvU2Nyb2xsWCh3aW5kb3cpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB3aW5kb3cgYXV0b3Njcm9sbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBlZGdlLnBhZ2UueCA9IDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVkZ2UucGFnZS55ID0gYm91bmQgLSAoc2NyZWVuLmhlaWdodCAvIDIgPiBZID8gWSAtIG9iak1hcmdpblswXSA6IHNjcmVlbi5oZWlnaHQgLSBZIC0gb2JqTWFyZ2luWzJdKTsgICAgICAvLyBjYWxjdWxhdGUgdmVydGljYWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuICAgICAgXHJcbiAgICAgIGlmIChlZGdlLnBhZ2UueSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGVkZ2UucGFnZS55ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgbWF4IGNyb3NzZWQgYm91bmRcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLnBhZ2UueSA9IGJvdW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCB2ZXJ0aWNhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgICAgZWRnZS5wYWdlLnkgKj0gWSA8IHNjcmVlbi5oZWlnaHQgLyAyID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvblxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghKChlZGdlLnBhZ2UueSA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPD0gMCkgfHwgKGVkZ2UucGFnZS55ID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA+PSAoc2Nyb2xsRGF0YS5oZWlnaHQgLSBzY3JlZW4uaGVpZ2h0KSkpKSAgICAvLyBpZiBwYWdlIGJvdW5kIGlzIGNyb3NzZWQgYW5kIHRoaXMgdHdvIGNhc2VzIGFyZW4ndCBtZXQ6IDEpIHNjcm9sbGJhciBpcyBvbiB0aGUgcGFnZSB0b3AgYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIHVwIDIpIHNjcm9sbGJhciBpcyBvbiB0aGUgcGFnZSBib3R0b20gYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIGRvd25cclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoZWRnZS5mbGFnLnkrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlIGF1dG9zY3JvbGwgKHRoaXMgc2hvdWxkIGhhcHBlbiBvbmx5IG9uY2UpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvbnNjcm9sbCBldmVudFxyXG4gICAgICAgICAgICBhdXRvU2Nyb2xsWSh3aW5kb3cpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB3aW5kb3cgYXV0b3Njcm9sbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgZWRnZS5wYWdlLnkgPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgc2Nyb2xsRGF0YS5jb250YWluZXIubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVzdCBpZiBkcmFnZ2VkIG9iamVjdCBpcyBpbiBzY3JvbGxhYmxlIGNvbnRhaW5lciwgdGhpcyBjb2RlIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBpZiBzY3JvbGxhYmxlIGNvbnRhaW5lciAoRElWIHdpdGggb3ZlcmZsb3cgb3RoZXIgdGhhbiAndmlzaWJsZSkgZXhpc3RzIG9uIHBhZ2VcclxuICAgICAge1xyXG4gICAgICAgIHNjYSA9IHNjcm9sbERhdGEuY29udGFpbmVyW2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzY2EuYXV0b3Njcm9sbCAmJiBYIDwgc2NhLm9mZnNldFsxXSAmJiBYID4gc2NhLm9mZnNldFszXSAmJiBZIDwgc2NhLm9mZnNldFsyXSAmJiBZID4gc2NhLm9mZnNldFswXSkgLy8gaWYgZHJhZ2dlZCBvYmplY3QgaXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyIGFuZCBzY3JvbGxhYmxlIGNvbnRhaW5lciBoYXMgZW5hYmxlZCBhdXRvc2Nyb2xsIG9wdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UuZGl2LnggPSBib3VuZCAtIChzY2EubWlkc3RYICA+IFggPyBYIC0gb2JqTWFyZ2luWzNdIC0gc2NhLm9mZnNldFszXSA6IHNjYS5vZmZzZXRbMV0gLSBYIC0gb2JqTWFyZ2luWzFdKTsgICAvLyBjYWxjdWxhdGUgaG9yaXpvbnRhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZWRnZS5kaXYueCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlLmRpdi54ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdoZW4gb2JqZWN0IGlzIG9ubHkgaGFsZiB2aXNpYmxlIChwYWdlIGlzIHNjcm9sbGVkIG9uIHRoYXQgb2JqZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZWRnZS5kaXYueCA9IGJvdW5kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlZGdlLmRpdi54ICo9IFggPCBzY2EubWlkc3RYID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb246IG5lZ2F0aXZlIC0gbGVmdCwgcG9zaXRpdmUgLSByaWdodFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZmxhZy54KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvbnNjcm9sbCBldmVudCBoYW5kbGVyIGFuZCBjYWxsIGF1dG9TY3JvbGxZIGZ1bmN0aW9uIG9ubHkgb25jZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZShzY2EuZGl2LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAgICAgICAgIGF1dG9TY3JvbGxYKHNjYS5kaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlZGdlLmRpdi54ID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgZWRnZS5kaXYueSA9IGJvdW5kIC0gKHNjYS5taWRzdFkgID4gWSA/IFkgLSBvYmpNYXJnaW5bMF0gLSBzY2Eub2Zmc2V0WzBdIDogc2NhLm9mZnNldFsyXSAtIFkgLSBvYmpNYXJnaW5bMl0pOyAgIC8vIGNhbGN1bGF0ZSB2ZXJ0aWNhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZWRnZS5kaXYueSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlLmRpdi55ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdoZW4gb2JqZWN0IGlzIG9ubHkgaGFsZiB2aXNpYmxlIChwYWdlIGlzIHNjcm9sbGVkIG9uIHRoYXQgb2JqZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZWRnZS5kaXYueSA9IGJvdW5kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlZGdlLmRpdi55ICo9IFkgPCBzY2EubWlkc3RZID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb246IG5lZ2F0aXZlIC0gdXAsIHBvc2l0aXZlIC0gZG93blxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZmxhZy55KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvbnNjcm9sbCBldmVudCBoYW5kbGVyIGFuZCBjYWxsIGF1dG9TY3JvbGxZIGZ1bmN0aW9uIG9ubHkgb25jZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZShzY2EuZGl2LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAgICAgICAgIGF1dG9TY3JvbGxZKHNjYS5kaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlZGdlLmRpdi55ID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJyZWFrIHRoZSBsb29wIChjaGVja2luZyBmb3Igb3RoZXIgc2Nyb2xsYWJsZSBjb250YWluZXJzIGlzIG5vdCBuZWVkZWQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSAoSSBtZWFuIGRyYWdnZWQgb2JqZWN0IGlzbid0IGluc2lkZSBhbnkgb2Ygc2Nyb2xsYWJsZSBjb250YWluZXIpIHJlc2V0IGNyb3NzZWQgZWRnZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UuZGl2LnggPSBlZGdlLmRpdi55ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gc3RvcCBhbGwgcHJvcGFnYXRpb24gb2YgdGhlIGV2ZW50IGluIHRoZSBidWJibGluZyBwaGFzZS4gIChzYXZlIHN5c3RlbSByZXNvdXJjZXMgYnkgdHVybmluZyBvZmYgZXZlbnQgYnViYmxpbmcgLyBwcm9wYWdhdGlvbilcclxuICAgIGV2dC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgaWYgKGV2dC5zdG9wUHJvcGFnYXRpb24pIFxyXG4gICAge1xyXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gVGhpcyBtZXRob2QgaXMgY2FsbGVkIChmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSwgYXV0b1Njcm9sbFgsIGF1dG9TY3JvbGxZKSBpbiBjYXNlIG9mIGNoYW5nZSBvZiBjdXJyZW50IHRhYmxlIGNlbGwuXHJcbiAgLy8gV2hlbiBjaGFuZ2UgaGFwcGVucywgdGhlbiByZXR1cm4gYmFja2dyb3VuZCBjb2xvciB0byBvbGQgcG9zaXRpb24sIGhpZ2hsaWdodCBuZXcgcG9zaXRpb24sIGNhbGN1bGF0ZSBjZWxsIGJvdW5kYXJpZXMgYW5kIGNhbGwgZXZlbnQuY2hhbmdlZC5cclxuICBjZWxsQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIGlmICgocm93ICE9PSByb3dfb2xkIHx8IGNlbGwgIT09IGNlbGxfb2xkKSkgXHJcbiAgICB7XHJcbiAgICAgIGlmIChyb3dfb2xkICE9PSBudWxsICYmIGNlbGxfb2xkICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjZWxsIGJhY2tncm91bmQgY29sb3IgdG8gdGhlIHByZXZpb3VzIGNlbGxcclxuICAgICAge1xyXG4gICAgICAgIHNldFRkU3R5bGUocm93X29sZCwgYmdTdHlsZU9sZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciBmb3IgcHJldmlvdXMgdGFibGUgcm93XHJcbiAgICAgICAgUkVESVBTLmRyYWcudGQucHJldmlvdXMgPSB0ZC5wcmV2aW91cyA9IHRhYmxlLnJvd3Nbcm93X29sZF0uY2VsbHNbY2VsbF9vbGRdOyAgICAgIC8vIGRlZmluZSBwcmV2aW91cyB0YWJsZSBjZWxsXHJcbiAgICAgICAgUkVESVBTLmRyYWcudGQuY3VycmVudCA9IHRkLmN1cnJlbnQgPSB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF07ICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjdXJyZW50IHRhYmxlIGNlbGxcclxuXHJcbiAgICAgICAgaWYgKHJvdyAhPT0gcm93X29sZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciB0YWJsZSBvciByb3cgc2hvdWxkIGNoYW5nZSAoY2hhbmdpbmcgY2VsbCBpbiB0aGUgc2FtZSByb3cgd2lsbCBiZSBpZ25vcmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0NoYW5nZWQodGQuY3VycmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRQb3NpdGlvbigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIEluIGluaXRpYWxpemF0aW9uIHBoYXNlLCB0aGlzIG1ldGhvZCBpcyBhdHRhY2hlZCBhcyBvbnJlc2l6ZSBldmVudCBoYW5kbGVyIGZvciB3aW5kb3cuICBJdCBhbHNvIGNhbGN1bGF0ZXMgd2luZG93IHdpZHRoIGFuZCB3aW5kb3cgaGVpZ2h0LiBSZXN1bHQgaXMgc2F2ZWQgaW4gdmFyaWFibGVzIHNjcmVlbi53aWR0aCBhbmQgc2NyZWVuLmhlaWdodCB2aXNpYmxlIGluc2lkZSBSRURJUFMuZHJhZyBwcml2YXRlIHNjb3BlLlxyXG4gIGhhbmRsZXJPblJlc2l6ZSA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHNjcmVlbi53aWR0aCAgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIHNjcmVlbi5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICBcclxuICAgIHNjcm9sbERhdGEud2lkdGggID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoOyAgICAgLy8gc2V0IHNjcm9sbCBzaXplIChvbnJlc2l6ZSwgb25sb2FkIGFuZCBvbm1vdXNldXAgZXZlbnQpXHJcbiAgICBzY3JvbGxEYXRhLmhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcbiAgICBcclxuICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGNvbHVtcyBhbmQgcm93cyBvZmZzZXQgKGNlbGxzIGRpbWVuc2lvbnMpXHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIHNldHMgY3VycmVudCByb3cgYW5kIGNlbGwuICBDdXJyZW50IGNlbGwgcG9zaXRpb24gaXMgYmFzZWQgb24gcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlciBhbmQgY2FsY3VsYXRlZCBncmlkIG9mIHRhYmxlcyBpbnNpZGUgZHJhZyBjb250YWluZXIuXHJcbiAgLy8gUm93cyB3aXRoIGRpc3BsYXk9J25vbmUnIGFyZSBub3QgY29udGFpbmVkIGluIHJvd19vZmZzZXQgYXJyYXkgc28gcm93IGJvdW5kcyBjYWxjdWxhdGlvbiBzaG91bGQgdGFrZSBjYXJlIGFib3V0IHNwYXJzZSBhcnJheXMgKHNpbmNlIHZlcnNpb24gNC4zLjYpLlxyXG4gIHNldFRhYmxlUm93Q29sdW1uID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICB2YXIgcHJldmlvdXM7ICAgICAgIC8vIHNldCBwcmV2aW91cyBwb3NpdGlvbiAoY3VycmVudCBjZWxsIHdpbGwgbm90IGJlIGhpZ2hsaWdodGVkKVxyXG4gICAgdmFyIHJvd19vZmZzZXQ7ICAgICAvLyByb3cgb2Zmc2V0cyBmb3IgdGhlIHNlbGVjdGVkIHRhYmxlIChyb3cgYm94IGJvdW5kcylcclxuICAgIHZhciByb3dfZm91bmQ7ICAgICAgLy8gcmVtZW1iZXIgZm91bmQgcm93XHJcbiAgICB2YXIgdG9zID0gW107ICAgICAgIC8vIHRhYmxlIG9mZnNldFxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBpOyAgICAgICAgICAgICAgLy8gdXNlZCBpbiBsb2NhbCBsb29wXHJcblxyXG4gICAgcHJldmlvdXMgPSBmdW5jdGlvbiAoKSAgICAvLyBzZXQgcHJldmlvdXMgcG9zaXRpb24gKGN1cnJlbnQgY2VsbCB3aWxsIG5vdCBiZSBoaWdobGlnaHRlZClcclxuICAgIHtcclxuICAgICAgaWYgKHJvd19vbGQgIT09IG51bGwgJiYgY2VsbF9vbGQgIT09IG51bGwpXHJcbiAgICAgIHtcclxuICAgICAgICByb3cgPSByb3dfb2xkO1xyXG4gICAgICAgIGNlbGwgPSBjZWxsX29sZDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBYID0gcG9pbnRlci54OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgWSA9IHBvaW50ZXIueTtcclxuXHJcbiAgICB0b3NbMF0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzBdOyAvLyB0b3BcclxuICAgIHRvc1sxXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMV07IC8vIHJpZ2h0XHJcbiAgICB0b3NbMl0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdOyAvLyBib3R0b21cclxuICAgIHRvc1szXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbM107IC8vIGxlZnRcclxuXHJcbiAgICAvLyBpZiB0YWJsZSBiZWxvbmdzIHRvIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lciB0aGVuIHNldCBzY3JvbGxhYmxlIGNvbnRhaW5lciBvZmZzZXQgaWYgbmVlZGVkIGluIGNhc2Ugd2hlbiBzb21lIHBhcnRzIG9mIHRhYmxlIGFyZSBoaWRkZW4gKGZvciBleGFtcGxlIHdpdGggXCJvdmVyZmxvdzogYXV0b1wiKVxyXG4gICAgaWYgKHRhYmxlLnNjYSAhPT0gdW5kZWZpbmVkKVxyXG4gICAge1xyXG4gICAgICB0b3NbMF0gPSB0b3NbMF0gPiB0YWJsZS5zY2Eub2Zmc2V0WzBdID8gdG9zWzBdIDogdGFibGUuc2NhLm9mZnNldFswXTsgLy8gdG9wXHJcbiAgICAgIHRvc1sxXSA9IHRvc1sxXSA8IHRhYmxlLnNjYS5vZmZzZXRbMV0gPyB0b3NbMV0gOiB0YWJsZS5zY2Eub2Zmc2V0WzFdOyAvLyByaWdodFxyXG4gICAgICB0b3NbMl0gPSB0b3NbMl0gPCB0YWJsZS5zY2Eub2Zmc2V0WzJdID8gdG9zWzJdIDogdGFibGUuc2NhLm9mZnNldFsyXTsgLy8gYm90dG9tXHJcbiAgICAgIHRvc1szXSA9IHRvc1szXSA+IHRhYmxlLnNjYS5vZmZzZXRbM10gPyB0b3NbM10gOiB0YWJsZS5zY2Eub2Zmc2V0WzNdOyAvLyBsZWZ0XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRvc1szXSA8IFggJiYgWCA8IHRvc1sxXSAmJiB0b3NbMF0gPCBZICYmIFkgPCB0b3NbMl0pICAgICAgICAgICAgICAgICAvLyBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSB0YWJsZSAob3Igc2Nyb2xsYWJsZSBjb250YWluZXIpXHJcbiAgICB7XHJcbiAgICAgIHJvd19vZmZzZXQgPSB0YWJsZS5yZWRpcHMucm93X29mZnNldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSByb3cgb2Zmc2V0cyBmb3IgdGhlIHNlbGVjdGVkIHRhYmxlIChyb3cgYm94IGJvdW5kcylcclxuXHJcbiAgICAgIGZvciAocm93ID0gMDsgcm93IDwgcm93X29mZnNldC5sZW5ndGggLSAxOyByb3crKykgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGN1cnJlbnQgcm93IChsb29wIHNraXBzIGhpZGRlbiByb3dzKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHJvd19vZmZzZXRbcm93XSA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBkb2Vzbid0IGV4aXN0IChpbiBjYXNlIG9mIGhpZGRlbiByb3cpIC0gc2tpcCBpdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0b3AgYW5kIGJvdHRvbSBjZWxsIGJvdW5kc1xyXG5cclxuICAgICAgICBpZiAocm93X29mZnNldFtyb3cgKyAxXSAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJvdHRvbSBjZWxsIGJvdW5kIChpZiBpcyBwb3NzaWJsZSkgLSBoaWRkZW4gcm93IGRvZXNuJ3QgZXhpc3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IHJvd19vZmZzZXRbcm93ICsgMV1bMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoaWRkZW4gcm93IChsaWtlIHN0eWxlLmRpc3BsYXkgPT09ICdub25lJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmb3IgKGkgPSByb3cgKyAyOyBpIDwgcm93X29mZnNldC5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgbmV4dCB2aXNpYmxlIHJvd1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocm93X29mZnNldFtpXSAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2aXNpYmxlIHJvdyBmb3VuZFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY3VycmVudENlbGxbMl0gPSByb3dfb2Zmc2V0W2ldWzBdO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoWSA8PSBjdXJyZW50Q2VsbFsyXSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9wIGJvdW5kIG9mIHRoZSBuZXh0IHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcm93X2ZvdW5kID0gcm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgZm91bmQgcm93XHJcblxyXG4gICAgICBpZiAocm93ID09PSByb3dfb2Zmc2V0Lmxlbmd0aCAtIDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBsb29wIGV4Y2VlZHMsIHRoZW4gc2V0IGJvdW5kcyBmb3IgdGhlIGxhc3Qgcm93IChvZmZzZXQgZm9yIHRoZSBsYXN0IHJvdyBkb2Vzbid0IHdvcmsgaW4gSUU4LCBzbyB1c2UgdGFibGUgYm91bmRzKVxyXG4gICAgICB7XHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07XHJcbiAgICAgICAgY3VycmVudENlbGxbMl0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjZWxsID0gMDtcclxuXHJcbiAgICAgIGlmIChyb3cgPCAwIHx8IGNlbGwgPCAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjZWxsIDwgMCBvciByb3cgPCAwIHRoZW4gdXNlIGxhc3QgcG9zc2libGUgbG9jYXRpb25cclxuICAgICAge1xyXG4gICAgICAgIHByZXZpb3VzKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAocm93ICE9PSByb3dfZm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgY2VsbCBmb3VuZCBidXQgaWYgY3VycmVudCByb3cgZGlmZmVyIGZyb20gcHJldmlvdXNseSBmb3VuZCByb3cgKHRoYW5rcyB0b28gd2hpbGUgbG9vcCB3aXRoIHJvdy0tKSB0aGVuIHRlc3QgaWYgWSBpcyBpbnNpZGUgY3VycmVudCBjZWxsLCAodGhpcyBzaG91bGQgcHJldmVudCBjYXNlIHdoZXJlIFREIGJvcmRlciA+IDFweCBhbmQgdXBwZXIgY29sc3BhbmVkIHJvdyBsaWtlIGluIGV4YW1wbGUxNSkgbG9naWMgd2lsbCBlbmQgaW4gdXBwZXIgY29sc3BhbmVkIHJvdyB3aGlsZSBjdXJyZW50IHJvdyB3aWxsIG5vdCBtb3ZlIC0gYW5kIHRoYXQgd2FzIHdyb25nXHJcbiAgICAgIHtcclxuXHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWNhbGN1bGF0ZSB0b3AgYW5kIGJvdHRvbSByb3cgb2Zmc2V0IChhZ2FpbilcclxuICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IGN1cnJlbnRDZWxsWzBdICsgdGFibGUucm93c1tyb3ddLmNlbGxzW2NlbGxdLm9mZnNldEhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKFkgPCBjdXJyZW50Q2VsbFswXSB8fCBZID4gY3VycmVudENlbGxbMl0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBZIGlzIG91dHNpZGUgb2YgdGhlIGN1cnJlbnQgcm93LCByZXR1cm4gcHJldmlvdXMgbG9jYXRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcmV2aW91cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCBzZXRzIGJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlIGNlbGwgYW5kIHJlbWVtYmVycyBwcmV2aW91cyBwb3NpdGlvbiBhbmQgYmFja2dyb3VuZCBjb2xvci4gIEl0IGlzIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSBhbmQgY2VsbENoYW5nZWQuXHJcbiAgc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKVxyXG4gIHtcclxuICAgIGlmIChyb3cgIT09IG51bGwgJiYgY2VsbCAhPT0gbnVsbCkgICAgICAvLyBpbiBjYXNlIGlmIG9yZGluYXJ5IGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSAnZGVueScgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBiZ1N0eWxlT2xkID0gZ2V0VGRTdHlsZShyb3cpOyAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3IgYmVmb3JlIHNldHRpbmcgdGhlIG5ldyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgIHNldFRkU3R5bGUocm93KTsgICAgICAgICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0IGN1cnJlbnQgVEQgLyBUUiAoY29sb3JzIGFuZCBzdHlsZXMgYXJlIHJlYWQgZnJvbSBwdWJsaWMgcHJvcGVydHkgXCJob3ZlclwiXHJcbiAgICAgIHJvd19vbGQgPSByb3c7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgY3VycmVudCBwb3NpdGlvbiAoZm9yIHJvdyBhbmQgY2VsbClcclxuICAgICAgY2VsbF9vbGQgPSBjZWxsO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBzZXRzIHRhYmxlIGNlbGwocykgYmFja2dyb3VuZCBzdHlsZXMgKGJhY2tncm91bmQgY29sb3JzIGFuZCBib3JkZXIgc3R5bGVzKS5cclxuICAgKiBJZiB0ZFN0eWxlIGlzIHVuZGVmaW5lZCB0aGVuIGN1cnJlbnQgdGQvdHIgd2lsbCBiZSBoaWdobGlnaHRlZCBmcm9tIHB1YmxpYyBwcm9wZXJ0eSBob3Zlci5jb2xvcl90ZCwgaG92ZXIuY29sb3JfdHIgLi4uXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSByaSBSb3cgaW5kZXguXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHQgT2JqZWN0IGNvbnRhaW5zIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgKFwidFwiIGlzIFREIHN0eWxlIG9iamVjdCBpcyBwcmVwYXJlZCBpbiBnZXRUZFN0eWxlIG1ldGhvZCkuXHJcbiAgICovXHJcbiAgc2V0VGRTdHlsZSA9IGZ1bmN0aW9uIChyaSwgdCkgXHJcbiAge1xyXG4gICAgdmFyIHRyLCBzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IGFuZCB0ZC5zdHlsZVxyXG5cclxuICAgIHRyID0gdGFibGUucm93c1tyaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHRhYmxlIHJvd1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbG9ycyB0byB0YWJsZSBjZWxscyAocmVzcGVjdGl2ZWx5KSBvciBmaXJzdCBjb2xvciB0byBhbGwgY2VsbHMgKGluIGNhc2Ugb2Ygc2V0dGluZ3MgaG92ZXIgdG8gdGhlIHJvdylcclxuICAgIHtcclxuICAgICAgcyA9IHRyLmNlbGxzW2ldLnN0eWxlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIGN1cnJlbnQgVEQgc3R5bGVcclxuICAgICAgcy5iYWNrZ3JvdW5kQ29sb3IgPSAodCA9PT0gdW5kZWZpbmVkKSA/IFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVHIgOiB0LmNvbG9yW2ldLnRvU3RyaW5nKCk7ICAvLyBUUiBiYWNrZ3JvdW5kIGNvbG9yIC0gdGRTdHlsZSBpcyB1bmRlZmluZWQgdGhlbiBoaWdobGlnaHQgVEQgb3RoZXJ3aXNlIHJldHVybiBwcmV2aW91cyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgIFxyXG4gICAgICBpZiAoUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHIgIT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRSIGJvcmRlciAtIGlmIGhvdmVyLmJvcmRlclRkIGlzIHNldCB0aGVuIHRha2UgY2FyZSBvZiBib3JkZXIgc3R5bGVcclxuICAgICAge1xyXG4gICAgICAgIGlmICh0ID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBib3JkZXIgKGhpZ2hsaWdodCkgLSBzb3VyY2Ugcm93IHdpbGwgbm90IGhhdmUgYW55IGJvcmRlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChyb3cgPCByb3dfc291cmNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaXMgbW92ZWQgYWJvdmUgc291cmNlIHJvdyBpbiBjdXJyZW50IHRhYmxlXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHMuYm9yZGVyVG9wID0gUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGlzIG1vdmVkIGJlbG93IHNvdXJjZSByb3cgaW4gY3VycmVudCB0YWJsZVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBzLmJvcmRlckJvdHRvbSA9IFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gcHJldmlvdXMgc3RhdGUgYm9yZGVyVG9wIGFuZCBib3JkZXJCb3R0b20gKGV4aXQgZnJvbSBURClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBzLmJvcmRlclRvcFdpZHRoID0gdC50b3BbaV1bMF07XHJcbiAgICAgICAgICBzLmJvcmRlclRvcFN0eWxlID0gdC50b3BbaV1bMV07XHJcbiAgICAgICAgICBzLmJvcmRlclRvcENvbG9yID0gdC50b3BbaV1bMl07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbVdpZHRoID0gdC5ib3R0b21baV1bMF07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbVN0eWxlID0gdC5ib3R0b21baV1bMV07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbUNvbG9yID0gdC5ib3R0b21baV1bMl07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8vIE1ldGhvZCByZXR1cm5zIGJhY2tncm91bmQgYW5kIGJvcmRlciBzdHlsZXMgYXMgb2JqZWN0IGZvciB0aGUgaW5wdXQgcGFyYW1ldGVyIHJvdyBpbmRleCAocmkpLiAgQHJldHVybiB7T2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIChmb3IgdGhlIHJvdykuXHJcbiAgZ2V0VGRTdHlsZSA9IGZ1bmN0aW9uIChyaSkgXHJcbiAge1xyXG4gICAgdmFyIHRyLCBjOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IGFuZCB0ZCByZWZlcmVuY2UgICBcclxuICAgIHZhciB0ID0ge2NvbG9yOiBbXSwgdG9wOiBbXSwgcmlnaHQ6IFtdLCBib3R0b206IFtdLCBsZWZ0OiBbXX07ICAgICAgICAvLyBkZWZpbmUgVEQgc3R5bGUgb2JqZWN0IHdpdGggYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlczogdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0XHJcbiAgICAgIFxyXG4gICAgdmFyIGJvcmRlciA9IGZ1bmN0aW9uIChjLCBuYW1lKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByaXZhdGUgbWV0aG9kIGdldHMgYm9yZGVyIHN0eWxlczogdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0XHJcbiAgICB7XHJcbiAgICAgIHZhciB3aWR0aCA9ICdib3JkZXInICsgbmFtZSArICdXaWR0aCcsIHN0eWxlID0gJ2JvcmRlcicgKyBuYW1lICsgJ1N0eWxlJywgY29sb3IgPSAnYm9yZGVyJyArIG5hbWUgKyAnQ29sb3InO1xyXG4gICAgICByZXR1cm4gW2dldFN0eWxlKGMsIHdpZHRoKSwgZ2V0U3R5bGUoYywgc3R5bGUpLCBnZXRTdHlsZShjLCBjb2xvcildO1xyXG4gICAgfTtcclxuXHJcbiAgICB0ciA9IHRhYmxlLnJvd3NbcmldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCB0YWJsZSByb3dcclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ci5jZWxscy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHN0eWxlcyBmb3IgZWFjaCB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIGMgPSB0ci5jZWxsc1tpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IFREIHJlZmVyZW5jZVxyXG4gICAgICB0LmNvbG9yW2ldID0gYy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgXHJcbiAgICAgIGlmIChSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUciAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgdG9wIGFuZCBib3R0b20gVEQgYm9yZGVyIHN0eWxlcyBpZiBob3Zlci5ib3JkZXJUciBwcm9wZXJ0eSBpcyBzZXRcclxuICAgICAge1xyXG4gICAgICAgIHQudG9wW2ldID0gYm9yZGVyKGMsICdUb3AnKTtcclxuICAgICAgICB0LmJvdHRvbVtpXSA9IGJvcmRlcihjLCAnQm90dG9tJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgcmV0dXJucyBhcnJheSBvZiBlbGVtZW50IGJvdW5kcyAob2Zmc2V0KSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgKG5lZWRlZCBmb3IgdGFibGUgZ3JpZCBjYWxjdWxhdGlvbikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gYm94IEhUTUxFbGVtZW50IGZvciBib3ggbWV0cmljcy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3Bvc2l0aW9uXSBIVE1MRWxlbWVudCBcInBvc2l0aW9uXCIgc3R5bGUuIEVsZW1lbnRzIHdpdGggc3R5bGUgXCJmaXhlZFwiIHdpbGwgbm90IGhhdmUgaW5jbHVkZWQgcGFnZSBzY3JvbGwgb2Zmc2V0LlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2JveF9zY3JvbGxdIElmIHNldCB0byBcImZhbHNlXCIgdGhlbiBlbGVtZW50IHNjcm9sbCBvZmZzZXQgd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gY2FsY3VsYXRpb24gKGRlZmF1bHQgaXMgXCJ0cnVlXCIpLlxyXG4gICAqIEByZXR1cm4ge0FycmF5fSBCb3ggb2Zmc2V0IGFycmF5OiBbIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCBdXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBjYWxjdWxhdGUgYm94IG9mZnNldCBmb3IgdGhlIGRpdiBpZD1cInJlZGlwcy1kcmFnXCJcclxuICAgKiBkaXZib3ggPSBib3hPZmZzZXQoZHJhZ0NvbnRhaW5lcik7XHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBpbmNsdWRlIHNjcm9sbCBwb3NpdGlvbiBpbiBvZmZzZXRcclxuICAgKiBvZmZzZXQgPSBib3hPZmZzZXQocm93T2JqLCAnZml4ZWQnKTtcclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGdldCBESVYgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIGVsZW1lbnQgc2Nyb2xsIG9mZnNldFxyXG4gICAqIGNiID0gYm94T2Zmc2V0KGRpdiwgcG9zaXRpb24sIGZhbHNlKTtcclxuICAgKi9cclxuICBib3hPZmZzZXQgPSBmdW5jdGlvbiAoYm94LCBwb3NpdGlvbiwgYm94X3Njcm9sbClcclxuICB7XHJcbiAgICB2YXIgb0xlZnQgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgbGVmdCAodGFrZSBjYXJlIG9mIGhvcml6b250YWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgdmFyIG9Ub3AgID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IHRvcCAodGFrZSBjYXJlIG9kIHZlcnRpY2FsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHZhciBib3hPbGQgPSBib3g7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgYm94IG9iamVjdFxyXG5cclxuICAgIGlmIChwb3NpdGlvbiAhPT0gJ2ZpeGVkJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGFibGVfcG9zaXRpb24gaXMgdW5kZWZpbmVkLCAnJyBvciAncGFnZV9zY3JvbGwnIHRoZW4gaW5jbHVkZSBwYWdlIHNjcm9sbCBvZmZzZXQsIHdpbmRvd1Njcm9sbFBvc2l0aW9uIGlzIHNldCBpbiBjYWxjdWxhdGVDZWxscygpLCBjYWxjdWxhdGVDZWxscygpIGlzIGNhbGxlZCBvbiB3aW5kb3cgc2Nyb2xsIGV2ZW50XHJcbiAgICB7XHJcbiAgICAgIG9MZWZ0ID0gMCAtIHdpbmRvd1Njcm9sbFBvc2l0aW9uWzBdOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgbGVmdCAodGFrZSBjYXJlIG9mIGhvcml6b250YWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgICBvVG9wICA9IDAgLSB3aW5kb3dTY3JvbGxQb3NpdGlvblsxXTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IHRvcCAodGFrZSBjYXJlIG9kIHZlcnRpY2FsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYm94X3Njcm9sbCA9PT0gdW5kZWZpbmVkIHx8IGJveF9zY3JvbGwgPT09IHRydWUpICAgICAgICAgIC8vIGNsaW1iIHVwIHRocm91Z2ggRE9NIGhpZXJhcmNoeSAoZ2V0U2Nyb2xsUG9zaXRpb24oKSB0YWtlcyBjYXJlIGFib3V0IHBhZ2Ugc2Nyb2xsIHBvc2l0aW9ucylcclxuICAgIHtcclxuICAgICAgZG9cclxuICAgICAge1xyXG4gICAgICAgIG9MZWZ0ICs9IGJveC5vZmZzZXRMZWZ0IC0gYm94LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgb1RvcCArPSBib3gub2Zmc2V0VG9wIC0gYm94LnNjcm9sbFRvcDtcclxuICAgICAgICBib3ggPSBib3gub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcbiAgICAgIHdoaWxlIChib3ggJiYgYm94Lm5vZGVOYW1lICE9PSAnQk9EWScpO1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGltYiB1cCB0byB0aGUgQk9EWSBlbGVtZW50IGJ1dCB3aXRob3V0IHNjcm9sbCBwb3NpdGlvbnNcclxuICAgIHtcclxuICAgICAgZG9cclxuICAgICAge1xyXG4gICAgICAgIG9MZWZ0ICs9IGJveC5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIG9Ub3AgKz0gYm94Lm9mZnNldFRvcDtcclxuICAgICAgICBib3ggPSBib3gub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcbiAgICAgIHdoaWxlIChib3ggJiYgYm94Lm5vZGVOYW1lICE9PSAnQk9EWScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICAgICAgICB0b3AgICAgICAgICAgICAgICAgIHJpZ2h0LCAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSAgICAgICAgICAgbGVmdFxyXG4gICAgcmV0dXJuIFsgb1RvcCwgb0xlZnQgKyBib3hPbGQub2Zmc2V0V2lkdGgsIG9Ub3AgKyBib3hPbGQub2Zmc2V0SGVpZ2h0LCBvTGVmdCBdO1xyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCBpcyBjYWxsZWQgaW4gZXZlcnkgcG9zc2libGUgY2FzZSB3aGVuIHBvc2l0aW9uIG9yIHNpemUgb2YgdGFibGUgZ3JpZCBjb3VsZCBjaGFuZ2UgbGlrZTogcGFnZSBzY3JvbGxpbmcsIGVsZW1lbnQgZHJvcHBlZCB0byB0aGUgdGFibGUgY2VsbCwgZWxlbWVudCBzdGFydCBkcmFnZ2luZyBhbmQgc28gb24uXHJcbiAgLy8gSXQgY2FsY3VsYXRlcyB0YWJsZSByb3cgb2Zmc2V0cyAodGFibGUgZ3JpZCkgYW5kIHNhdmVzIHRvIHRoZSBcInRhYmxlc1wiIGFycmF5LlxyXG4gIC8vIFRhYmxlIHJvd3Mgd2l0aCBzdHlsZSBkaXNwbGF5PSdub25lJyBhcmUgc2tpcHBlZC5cclxuICBjYWxjdWxhdGVDZWxscyA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHZhciByb3dfb2Zmc2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IGJveFxyXG4gICAgdmFyIHBvc2l0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50ICh0YWJsZSBvciB0YWJsZSBjb250YWluZXIpIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIFwicGFnZSBzY3JvbGxcIiBvZmZzZXQgc2hvdWxkIG5vdCBiZSBhZGRlZFxyXG4gICAgdmFyIGNiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBib3ggb2Zmc2V0IGZvciBjb250YWluZXIgYm94IChjYilcclxuXHJcbiAgICB3aW5kb3dTY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZUNlbGxzKCkgaXMgY2FsbGVkIG9uIHdpbmRvdyBzY3JvbGwgZXZlbnQgc28gaGVyZSBpcyBwZXJmZWN0IHBsYWNlIHRvIHJlZnJlc2ggd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgcm93X29mZnNldCA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIHJvd19vZmZzZXQgYXJyYXlcclxuICAgIFxyXG4gICAgcG9zaXRpb24gPSBnZXRTdHlsZSh0YWJsZSwgJ3Bvc2l0aW9uJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGFibGUgc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgXCJwYWdlIHNjcm9sbFwiIG9mZnNldCBmcm9tIGNhbGN1bGF0aW9uIGlmIG5lZWRlZClcclxuICAgIFxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZSBkb2Vzbid0IGhhdmUgc3R5bGUgcG9zaXRpb246Zml4ZWQgdGhlbiB0YWJsZSBjb250YWluZXIgc2hvdWxkIGJlIHRlc3RlZFxyXG4gICAge1xyXG4gICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLnBhcmVudE5vZGUsICdwb3NpdGlvbicpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gdGFibGUucm93cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgICAgICAgICAgICAgICAgICAgIC8vIGJhY2t3YXJkIGxvb3AgaGFzIGJldHRlciBwZXJmb21hbmNlXHJcbiAgICB7XHJcbiAgICAgIGlmICh0YWJsZS5yb3dzW2ldLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJykgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCByb3dzIHRvIHRoZSBvZmZzZXQgYXJyYXkgaWYgcm93IGlzIG5vdCBoaWRkZW5cclxuICAgICAge1xyXG4gICAgICAgIHJvd19vZmZzZXRbaV0gPSBib3hPZmZzZXQodGFibGUucm93c1tpXSwgcG9zaXRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRhYmxlLnJlZGlwcy5vZmZzZXQgPSBib3hPZmZzZXQodGFibGUsIHBvc2l0aW9uKTsgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSB0YWJsZSBpbmZvcm1hdGlvbnMgKHRhYmxlIG9mZnNldCBhbmQgcm93IG9mZnNldHMpXHJcbiAgICB0YWJsZS5yZWRpcHMucm93X29mZnNldCA9IHJvd19vZmZzZXQ7XHJcblxyXG4gICAgZGl2Qm94ID0gYm94T2Zmc2V0KGRyYWdDb250YWluZXIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgYm94IG9mZnNldCBmb3IgdGhlIGRpdiBpZD1yZWRpcHMtZHJhZ1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjcm9sbERhdGEuY29udGFpbmVyLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXMgaWYgbmVlZGVkXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUoc2Nyb2xsRGF0YS5jb250YWluZXJbaV0uZGl2LCAncG9zaXRpb24nKTsgICAgIC8vIHNldCBjb250YWluZXIgYm94IHN0eWxlIHBvc2l0aW9uICh0byBleGNsdWRlIHBhZ2Ugc2Nyb2xsIG9mZnNldCBmcm9tIGNhbGN1bGF0aW9uIGlmIG5lZWRlZClcclxuICAgICAgY2IgPSBib3hPZmZzZXQoc2Nyb2xsRGF0YS5jb250YWluZXJbaV0uZGl2LCBwb3NpdGlvbiwgZmFsc2UpOyAgICAgLy8gZ2V0IERJViBjb250YWluZXIgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIHNjcm9sbCBwb3NpdGlvbiBvZiB0aGUgY29udGVudFxyXG4gICAgICBcclxuICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbaV0ub2Zmc2V0ID0gY2I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhc1xyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5taWRzdFggPSAoY2JbMV0gKyBjYlszXSkgLyAyO1xyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5taWRzdFkgPSAoY2JbMF0gKyBjYlsyXSkgLyAyO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCByZXR1cm5zIGN1cnJlbnQgcGFnZSBzY3JvbGwgdmFsdWVzIGFzIGFycmF5IChYIGFuZCBZIGF4aXMpLlxyXG4gIGdldFNjcm9sbFBvc2l0aW9uID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgdmFyIHNjcm9sbFkgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgIC8vdmFyIHNjcm9sbFggPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICB2YXIgc2Nyb2xsWCA9IDA7XHJcblxyXG4gICAgcmV0dXJuIFsgc2Nyb2xsWCwgc2Nyb2xsWSBdO1xyXG4gIH07XHJcblxyXG4gIC8vIEhvcml6b250YWwgYXV0byBzY3JvbGwgbWV0aG9kLiAgQHBhcmFtIHtIVE1MRWxlbWVudH0gc28gV2luZG93IG9yIERJViBlbGVtZW50IChzbyAtIHNjcm9sbCBvYmplY3QpLlxyXG4gIGF1dG9TY3JvbGxYID0gZnVuY3Rpb24gKHNvKSBcclxuICB7XHJcbiAgICB2YXIgcG9zLCAgICAgIC8vIGxlZnQgc3R5bGUgcG9zaXRpb25cclxuICAgICAgb2xkLCAgICAgIC8vIG9sZCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChuZWVkZWQgZm9yIHdpbmRvdyBzY3JvbGxpbmcpXHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uLCAvLyBkZWZpbmUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgbWF4c3AsICAgICAgLy8gbWF4aW11bSBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgZWRnZUNyb3NzZWQsICAvLyBjcm9zc2VkIGVkZ2UgZm9yIHdpbmRvdyBhbmQgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgWCA9IHBvaW50ZXIueCwgIC8vIGRlZmluZSBwb2ludGVyIFggcG9zaXRpb25cclxuICAgICAgWSA9IHBvaW50ZXIueTsgIC8vIGRlZmluZSBwb2ludGVyIFkgcG9zaXRpb25cclxuICAgIC8vIGlmIG1vdXNldXAgdGhlbiBzdG9wIGhhbmRsaW5nIFwiY3VycmVudCBjZWxsXCJcclxuICAgIGlmIChlZGdlLmZsYWcueCA+IDApIHtcclxuICAgICAgLy8gY2FsY3VsYXRlIGNlbGwgKGF1dG9zY3JvbGwgaXMgd29ya2luZylcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTtcclxuICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUgcm93IGFuZCB0YWJsZSBjZWxsXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7XHJcbiAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgaWYgbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgRElWIGlkPVwicmVkaXBzLWRyYWdcIlxyXG4gICAgICBpZiAoWCA8IGRpdkJveFsxXSAmJiBYID4gZGl2Qm94WzNdICYmIFkgPCBkaXZCb3hbMl0gJiYgWSA+IGRpdkJveFswXSkge1xyXG4gICAgICAgIGNlbGxDaGFuZ2VkKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHNhdmUgc2Nyb2xsIG9iamVjdCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlIGZvciB0aGUgZmlyc3QgY2FsbCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZVxyXG4gICAgLy8gcmVjdXJzaXZlIGNhbGxzIHdpbGwgbm90IGVudGVyIHRoaXMgY29kZSBhbmQgcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxEYXRhLm9iaiB3aWxsIGJlIHByZXNlcnZlZFxyXG4gICAgaWYgKHR5cGVvZihzbykgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHNjcm9sbERhdGEub2JqID0gc287XHJcbiAgICB9XHJcbiAgICAvLyB3aW5kb3cgYXV0b3Njcm9sbCAoZGVmaW5lIGN1cnJlbnQsIG9sZCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IG9sZCA9IGdldFNjcm9sbFBvc2l0aW9uKClbMF07XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS53aWR0aCAtIHNjcmVlbi53aWR0aDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLnBhZ2UueDtcclxuICAgIH1cclxuICAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIChkZWZpbmUgY3VycmVudCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICBlbHNlIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxMZWZ0O1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEub2JqLnNjcm9sbFdpZHRoIC0gc2Nyb2xsRGF0YS5vYmouY2xpZW50V2lkdGg7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5kaXYueDtcclxuICAgIH1cclxuICAgIC8vIGlmIHNjcm9sbGluZyBpcyBwb3NzaWJsZVxyXG4gICAgaWYgKGVkZ2UuZmxhZy54ID4gMCAmJiAoKGVkZ2VDcm9zc2VkIDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA+IDApIHx8IChlZGdlQ3Jvc3NlZCA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPCBtYXhzcCkpKSB7XHJcbiAgICAgIC8vIGlmIG9iamVjdCBpcyB3aW5kb3dcclxuICAgICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpIHtcclxuICAgICAgICAvLyBzY3JvbGwgd2luZG93XHJcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KGVkZ2VDcm9zc2VkLCAwKTtcclxuICAgICAgICAvLyBnZXQgbmV3IHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKGFmdGVyIHNjcm9sbGluZylcclxuICAgICAgICAvLyBiZWNhdXNlIGF0IHBhZ2UgdG9wIG9yIGJvdHRvbSBlZGdlWSBjYW4gYmUgYmlnZ2VyIHRoZW4gdGhlIHJlc3Qgb2Ygc2Nyb2xsaW5nIGFyZWFcclxuICAgICAgICAvLyBpdCB3aWxsIGJlIG5pY2UgdG8ga25vdyBob3cgbXVjaCB3YXMgd2luZG93IHNjcm9sbGVkIGFmdGVyIHNjcm9sbEJ5IGNvbW1hbmRcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKClbMF07XHJcbiAgICAgICAgLy8gZ2V0IGN1cnJlbnQgb2JqZWN0IHRvcCBzdHlsZVxyXG4gICAgICAgIHBvcyA9IHBhcnNlSW50KG9iai5zdHlsZS5sZWZ0LCAxMCk7XHJcbiAgICAgICAgaWYgKGlzTmFOKHBvcykpIHtcclxuICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIG9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNjcm9sbERhdGEub2JqLnNjcm9sbExlZnQgKz0gZWRnZUNyb3NzZWQ7XHJcbiAgICAgIH1cclxuICAgICAgLy8gcmVjdXJzaXZlIGF1dG9zY3JvbGwgY2FsbFxyXG4gICAgICBzZXRUaW1lb3V0KGF1dG9TY3JvbGxYLCBSRURJUFMuZHJhZy5zY3JvbGwuc3BlZWQpO1xyXG4gICAgfVxyXG4gICAgLy8gYXV0b3Njcm9sbCBpcyBlbmRlZDogZWxlbWVudCBpcyBvdXQgb2YgdGhlIHBhZ2UgZWRnZSBvciBtYXhpbXVtIHBvc2l0aW9uIGlzIHJlYWNoZWQgKGxlZnQgb3IgcmlnaHQpXHJcbiAgICBlbHNlIHtcclxuICAgICAgLy8gcmV0dXJuIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgKHRvIHdpbmRvdyBvciBkaXYgZWxlbWVudClcclxuICAgICAgUkVESVBTLmV2ZW50LmFkZChzY3JvbGxEYXRhLm9iaiwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTtcclxuICAgICAgLy8gcmVzZXQgYXV0byBzY3JvbGwgZmxhZyBYXHJcbiAgICAgIGVkZ2UuZmxhZy54ID0gMDtcclxuICAgICAgLy8gcmVzZXQgY3VycmVudCBjZWxsIHBvc2l0aW9uXHJcbiAgICAgIGN1cnJlbnRDZWxsID0gWzAsIDAsIDAsIDBdO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFZlcnRpY2FsIGF1dG8gc2Nyb2xsIG1ldGhvZC4gIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNvIFdpbmRvdyBvciBESVYgZWxlbWVudCAoc28gLSBzY3JvbGwgb2JqZWN0KS5cclxuICBhdXRvU2Nyb2xsWSA9IGZ1bmN0aW9uIChzbykgXHJcbiAge1xyXG4gICAgdmFyIHBvcywgICAgICAvLyB0b3Agc3R5bGUgcG9zaXRpb25cclxuICAgICAgb2xkLCAgICAgIC8vIG9sZCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChuZWVkZWQgZm9yIHdpbmRvdyBzY3JvbGxpbmcpXHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uLCAvLyBkZWZpbmUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgbWF4c3AsICAgICAgLy8gbWF4aW11bSBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgZWRnZUNyb3NzZWQsICAvLyBjcm9zc2VkIGVkZ2UgZm9yIHdpbmRvdyBhbmQgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgWCA9IHBvaW50ZXIueCwgIC8vIGRlZmluZSBwb2ludGVyIFggcG9zaXRpb25cclxuICAgICAgWSA9IHBvaW50ZXIueTsgIC8vIGRlZmluZSBwb2ludGVyIFkgcG9zaXRpb25cclxuICAgIFxyXG4gICAgaWYgKGVkZ2UuZmxhZy55ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBtb3VzZXVwIHRoZW4gc3RvcCBoYW5kbGluZyBcImN1cnJlbnQgY2VsbFwiXHJcbiAgICB7XHJcbiAgICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBjZWxsIChhdXRvc2Nyb2xsIGlzIHdvcmtpbmcpXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlIHJvdyBhbmQgdGFibGUgY2VsbFxyXG4gICAgICBcclxuICAgICAgaWYgKFggPCBkaXZCb3hbMV0gJiYgWCA+IGRpdkJveFszXSAmJiBZIDwgZGl2Qm94WzJdICYmIFkgPiBkaXZCb3hbMF0pICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCBpZiBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSBESVYgaWQ9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICAgIHtcclxuICAgICAgICBjZWxsQ2hhbmdlZCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIHNhdmUgc2Nyb2xsIG9iamVjdCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlIGZvciB0aGUgZmlyc3QgY2FsbCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSwgcmVjdXJzaXZlIGNhbGxzIHdpbGwgbm90IGVudGVyIHRoaXMgY29kZSBhbmQgcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxEYXRhLm9iaiB3aWxsIGJlIHByZXNlcnZlZFxyXG4gICAgaWYgKHR5cGVvZihzbykgPT09ICdvYmplY3QnKSBcclxuICAgIHtcclxuICAgICAgc2Nyb2xsRGF0YS5vYmogPSBzbztcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cgYXV0b3Njcm9sbCAoZGVmaW5lIGN1cnJlbnQsIG9sZCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gb2xkID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVsxXTtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLmhlaWdodCAtIHNjcmVlbi5oZWlnaHQ7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5wYWdlLnk7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIChkZWZpbmUgY3VycmVudCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsVG9wO1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEub2JqLnNjcm9sbEhlaWdodCAtIHNjcm9sbERhdGEub2JqLmNsaWVudEhlaWdodDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLmRpdi55O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBpZiBzY3JvbGxpbmcgaXMgcG9zc2libGVcclxuICAgIGlmIChlZGdlLmZsYWcueSA+IDAgJiYgKChlZGdlQ3Jvc3NlZCA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPiAwKSB8fCAoZWRnZUNyb3NzZWQgPiAwICYmIHNjcm9sbFBvc2l0aW9uIDwgbWF4c3ApKSkgXHJcbiAgICB7XHJcbiAgICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9iamVjdCBpcyB3aW5kb3dcclxuICAgICAge1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxCeSgwLCBlZGdlQ3Jvc3NlZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgd2luZG93XHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpWzFdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBuZXcgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAoYWZ0ZXIgc2Nyb2xsaW5nKSwgYmVjYXVzZSBhdCBwYWdlIHRvcCBvciBib3R0b20gZWRnZVkgY2FuIGJlIGJpZ2dlciB0aGVuIHRoZSByZXN0IG9mIHNjcm9sbGluZyBhcmVhLCBpdCB3aWxsIGJlIG5pY2UgdG8ga25vdyBob3cgbXVjaCB3YXMgd2luZG93IHNjcm9sbGVkIGFmdGVyIHNjcm9sbEJ5IGNvbW1hbmRcclxuICAgICAgICBwb3MgPSBwYXJzZUludChvYmouc3R5bGUudG9wLCAxMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgb2JqZWN0IHRvcCBzdHlsZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpc05hTihwb3MpKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwb3MgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvciBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICB7XHJcbiAgICAgICAgc2Nyb2xsRGF0YS5vYmouc2Nyb2xsVG9wICs9IGVkZ2VDcm9zc2VkO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBzZXRUaW1lb3V0KGF1dG9TY3JvbGxZLCBSRURJUFMuZHJhZy5zY3JvbGwuc3BlZWQpOyAgICAgICAgICAgICAgICAgICAgICAvLyByZWN1cnNpdmUgYXV0b3Njcm9sbCBjYWxsXHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF1dG9zY3JvbGwgaXMgZW5kZWQ6IGVsZW1lbnQgaXMgb3V0IG9mIHRoZSBwYWdlIGVkZ2Ugb3IgbWF4aW11bSBwb3NpdGlvbiBpcyByZWFjaGVkICh0b3Agb3IgYm90dG9tKVxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZXZlbnQuYWRkKHNjcm9sbERhdGEub2JqLCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAvLyByZXR1cm4gb25zY3JvbGwgZXZlbnQgaGFuZGxlciAodG8gd2luZG93IG9yIGRpdiBlbGVtZW50KVxyXG4gICAgICBlZGdlLmZsYWcueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBhdXRvIHNjcm9sbCBmbGFnIFlcclxuICAgICAgY3VycmVudENlbGwgPSBbMCwgMCwgMCwgMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgY3VycmVudCBjZWxsIHBvc2l0aW9uXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIGNvcGllcyBjdXN0b20gcHJvcGVydGllcyBmcm9tIHNvdXJjZSBlbGVtZW50IHRvIHRoZSBjbG9uZWQgZWxlbWVudCBhbmQgc2V0cyBldmVudCBoYW5kbGVycyAob25tb3VzZWRvd24gYW5kIG9uZGJsY2xpY2spLlxyXG4gICAqIFRoaXMgYWN0aW9uIHdpbGwgYmUgdGFrZW4gb24gRElWIGVsZW1lbnQgaXRzZWxmIGFuZCBhbGwgY2hpbGQgRElWIGVsZW1lbnRzLlxyXG4gICAqIE5lZWRlZCBpbiBjYXNlIHdoZW4gRElWIGVsZW1lbnQgaXMgY2xvbmVkIG9yIFJPVyBpcyBjbG9uZWQgKGZvciBkcmFnZ2luZyBtb2RlPVwicm93XCIpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNyYyBTb3VyY2UgZWxlbWVudCAoRElWIG9yIFRSIGVsZW1lbnQpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNsbiBDbG9uZWQgZWxlbWVudCAoRElWIG9yIFRSIGVsZW1lbnQpLlxyXG4gICAqL1xyXG4gIGNvcHlQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHNyYywgY2xuKSBcclxuICB7XHJcbiAgICB2YXIgY29weSA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBtZXRob2RcclxuICAgIHZhciBjaGlsZHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHByb3BlcnRpZXMgZm9yIGNoaWxkIGVsZW1lbnRzICh0aGlzIG1ldGhvZCBjYWxscyBcImNvcHlcIiBtZXRob2QpXHJcbiAgICBcclxuICAgIGNvcHlbMF0gPSBmdW5jdGlvbiAoZTEsIGUyKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY29weSBtZXRob2QgZm9yIERJViBlbGVtZW50cyAoZTEgc291cmNlIGVsZW1lbnQsIGUyIGNsb25lZCBlbGVtZW50KSwgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80MDk0ODExL2phdmFzY3JpcHQtY2xvbmVub2RlLWFuZC1wcm9wZXJ0aWVzXHJcbiAgICB7XHJcbiAgICAgIGlmIChlMS5yZWRpcHMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVkaXBzIHByb3BlcnR5IGV4aXN0cyBpbiBzb3VyY2UgZWxlbWVudCwgY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVuYWJsZWQsICByZWRpcHMuY29udGFpbmVyIC4uLilcclxuICAgICAge1xyXG4gICAgICAgIGUyLnJlZGlwcyA9IHt9O1xyXG4gICAgICAgIGUyLnJlZGlwcy5lbmFibGVkID0gZTEucmVkaXBzLmVuYWJsZWQ7XHJcbiAgICAgICAgZTIucmVkaXBzLmNvbnRhaW5lciA9IGUxLnJlZGlwcy5jb250YWluZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGUxLnJlZGlwcy5lbmFibGVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9ubW91c2Vkb3duIGV2ZW50IGhhbmRsZXIgaWYgc291cmNlIGVsZW1lbnQgaXMgZW5hYmxlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJlZ2lzdGVyRXZlbnRzKGUyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvcHlbMV0gPSBmdW5jdGlvbiAoZTEsIGUyKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY29weSBtZXRob2QgZm9yIFRSIGVsZW1lbnRzIFxyXG4gICAge1xyXG4gICAgICBpZiAoZTEucmVkaXBzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJlZGlwcyBwcm9wZXJ0eSBleGlzdHMgaW4gc291cmNlIGVsZW1lbnQsIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgKHJlZGlwcy5lbXB0eVJvdyAuLi4pXHJcbiAgICAgIHtcclxuICAgICAgICBlMi5yZWRpcHMgPSB7fTtcclxuICAgICAgICBlMi5yZWRpcHMuZW1wdHlSb3cgPSBlMS5yZWRpcHMuZW1wdHlSb3c7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNoaWxkcyA9IGZ1bmN0aW9uIChlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgbWV0aG9kIHRvIGNvcHkgcHJvcGVydGllcyBmb3IgY2hpbGQgZWxlbWVudHMgKGlucHV0IHBhcmFtZXRlciBpcyBlbGVtZW50IGluZGV4IDAgLSBESVYsIDEgLSBUUilcclxuICAgIHtcclxuICAgICAgdmFyIGVsMSwgZWwyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0aW9uIG9mIERJVi9UUiBlbGVtZW50cyBpbiBzb3VyY2UgYW5kIGNsb25lZCBlbGVtZW50XHJcbiAgICAgIHZhciB0biA9IFsnRElWJywgJ1RSJ107ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFnIG5hbWVcclxuICAgICAgXHJcbiAgICAgIGVsMSA9IHNyYy5nZXRFbGVtZW50c0J5VGFnTmFtZSh0bltlXSk7ICAgICAgICAgICAgLy8gY29sbGVjdCBjaGlsZCBESVYvVFIgZWxlbWVudHMgZnJvbSB0aGUgc291cmNlIGVsZW1lbnQgKHBvc3NpYmxlIGlmIGRpdiBlbGVtZW50IGNvbnRhaW5zIHRhYmxlKVxyXG4gICAgICBlbDIgPSBjbG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUodG5bZV0pOyAgICAgICAgICAgIC8vIGNvbGxlY3QgY2hpbGQgRElWL1RSIGVsZW1lbnRzIGZyb20gY2xvbmVkIGVsZW1lbnRcclxuICAgICAgXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWwyLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgLy8gY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVuYWJsZWQsICByZWRpcHMuY29udGFpbmVyIC4uLikgYW5kIHNldCBldmVudCBoYW5kbGVycyB0byBjaGlsZCBESVYgZWxlbWVudHNcclxuICAgICAge1xyXG4gICAgICAgIGNvcHlbZV0oZWwxW2ldLCBlbDJbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBpZiAoc3JjLm5vZGVOYW1lID09PSAnRElWJykgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgc291cmNlIGVsZW1lbnQgaXMgRElWIGVsZW1lbnQgdGhlbiBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIGZvciBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBjb3B5WzBdKHNyYywgY2xuKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHNyYy5ub2RlTmFtZSA9PT0gJ1RSJykgICAgICAgICAgICAgICAgICAgICAvLyBpZiBzb3VyY2UgZWxlbWVudCBpcyBUUiBlbGVtZW50IHRoZW4gY29weSBjdXN0b20gcHJvcGVydGllcyBmb3IgVFIgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBjb3B5WzFdKHNyYywgY2xuKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY2hpbGRzKDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcHJvcGVydGllcyBmb3IgRElWIGNoaWxkIGVsZW1lbnRzXHJcbiAgICBjaGlsZHMoMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIGZvciBUUiBjaGlsZCBlbGVtZW50c1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgdXBkYXRlcyBjbGltaXQxX1ggb3IgY2xpbWl0Ml9YIGNsYXNzIG5hbWUgKFggZGVmaW5lcyBjbG9uaW5nIGxpbWl0KS5cclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmNsaW1pdDFfWCAtIGFmdGVyIGNsb25pbmcgWCBlbGVtZW50cywgbGFzdCBlbGVtZW50IHdpbGwgYmUgbm9ybWFsIGRyYWctYWJsZSBlbGVtZW50PC9saT5cclxuICAgKiA8bGk+Y2xpbWl0Ml9YIC0gYWZ0ZXIgY2xvbmluZyBYIGVsZW1lbnRzLCBsYXN0IGVsZW1lbnQgd2lsbCBzdGF5IHVubW92YWJsZTwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBFbGVtZW50IG9uIHdoaWNoIGNuYW1lIGNsYXNzIHNob3VsZCBiZSB1cGRhdGVkLlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gdmFsdWUgSW5jcmVtZW50IG9yIGRlY3JlbWVudCBjbGltaXQgdmFsdWUuXHJcbiAgICovXHJcbiAgY2xvbmVMaW1pdCA9IGZ1bmN0aW9uIChlbCwgdmFsdWUpIFxyXG4gIHtcclxuICAgIHZhciBtYXRjaEFycmF5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoIGFycmF5XHJcbiAgICB2YXIgbGltaXRUeXBlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW1pdCB0eXBlICgxIC0gY2xvbmUgYmVjb21lcyBcIm5vcm1hbFwiIGRyYWcgZWxlbWVudCBhdCBsYXN0OyAyIC0gY2xvbmUgZWxlbWVudCBzdGF5cyBpbW1vdmFibGUpXHJcbiAgICB2YXIgbGltaXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW1pdCBudW1iZXJcclxuICAgIHZhciBjbGFzc2VzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsYXNzIG5hbWVzIG9mIGNsb25lIGVsZW1lbnRcclxuICAgIFxyXG4gICAgY2xhc3NlcyA9IGVsLmNsYXNzTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVhZCBjbGFzcyBuYW1lIGZyb20gZWxlbWVudFxyXG4gICAgbWF0Y2hBcnJheSA9IGNsYXNzZXMubWF0Y2goL2NsaW1pdChcXGQpXyhcXGQrKS8pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaCBjbGltaXQgY2xhc3MgbmFtZVxyXG4gICAgXHJcbiAgICBpZiAobWF0Y2hBcnJheSAhPT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgY2xhc3MgY29udGFpbnMgY2xpbWl0XHJcbiAgICB7XHJcbiAgICAgIGxpbWl0VHlwZSA9IHBhcnNlSW50KG1hdGNoQXJyYXlbMV0sIDEwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIGxpbWl0VHlwZSAoMSBvciAyKSBhbmQgbGltaXRcclxuICAgICAgbGltaXQgPSBwYXJzZUludChtYXRjaEFycmF5WzJdLCAxMCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAobGltaXQgPT09IDAgJiYgdmFsdWUgPT09IDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY3VycmVudCBsaW1pdCBpcyAwIGFuZCBzaG91bGQgYmUgc2V0IHRvIDEgdGhlbiByZXR1cm4gXCJjbG9uaW5nXCIgdG8gdGhlIERJViBlbGVtZW50XHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgcmVkaXBzLWNsb25lJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIHRvIGNsYXNzIGF0dHJpYnV0ZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsaW1pdFR5cGUgPT09IDIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5hYmxlIERJViBlbGVtZW50IGZvciBjbGltaXQyIHR5cGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbmFibGVEcmFnKHRydWUsIGVsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGxpbWl0ICs9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbGltaXQgdmFsdWVcclxuICAgICAgY2xhc3NlcyA9IGNsYXNzZXMucmVwbGFjZSgvY2xpbWl0XFxkX1xcZCsvZywgJ2NsaW1pdCcgKyBsaW1pdFR5cGUgKyAnXycgKyBsaW1pdCk7ICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdCBjbGFzcyBuYW1lIHdpdGggbmV3IGxpbWl0IHZhbHVlXHJcbiAgICAgIFxyXG4gICAgICBpZiAobGltaXQgPD0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVzdCBpZiBsaW1pdCBkcm9wcyB0byB6ZXJvXHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzc2VzID0gY2xhc3Nlcy5yZXBsYWNlKCdyZWRpcHMtY2xvbmUnLCAnJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG1vcmUgY2xvbmluZywgY3V0IG91dCBcInJlZGlwcy1jbG9uZVwiIGZyb20gY2xhc3MgbmFtZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsaW1pdFR5cGUgPT09IDIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbGltaXQgdHlwZSBpcyAyIHRoZW4gZGlzYWJsZSBjbG9uZSBlbGVtZW50IChpdCB3aWxsIHN0YXkgaW4gY2VsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbmFibGVEcmFnKGZhbHNlLCBlbCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHNvdXJjZSBESVYgZWxlbWVudFxyXG4gICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQuY2xvbmVkRW5kMigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5jbG9uZWRFbmQyIGhhbmRsZXJcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5jbG9uZWRFbmQxKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmNsb25lZEVuZDEgaGFuZGxlclxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZWwuY2xhc3NOYW1lID0gbm9ybWFsaXplKGNsYXNzZXMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSBzcGFjZXMgYW5kIHJldHVybiBjbGFzc2VzIHRvIHRoZSBjbG9uZSBvYmplY3RcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgYXR0YWNoZXMgLyBkZXRhY2hlcyBvbm1vdXNlZG93biwgb250b3VjaHN0YXJ0IGFuZCBvbmRibGNsaWNrIGV2ZW50cyB0byBESVYgZWxlbWVudHMgYW5kIGF0dGFjaGVzIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSBzY3JvbGwgY29udGFpbmVycyBpbiBpbml0aWFsaXphdGlvbiBwaGFzZS5cclxuICAgKiBJdCBhbHNvIGNhbiBiZSB1c2VkIGZvciBlbGVtZW50IGluaXRpYWxpemF0aW9uIGFmdGVyIERJViBlbGVtZW50IHdhcyBtYW51YWxseSBhZGRlZCB0byB0aGUgdGFibGUuXHJcbiAgICogSWYgY2xhc3MgYXR0cmlidXRlIG9mIERJViBjb250YWluZXIgY29udGFpbnMgXCJyZWRpcHMtbm9hdXRvc2Nyb2xsXCIgY2xhc3MgbmFtZSB0aGVuIGF1dG9TY3JvbGwgb3B0aW9uIHdpbGwgYmUgZGlzYWJsZWQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufFN0cmluZ30gZW5hYmxlX2ZsYWcgRW5hYmxlIC8gZGlzYWJsZSBlbGVtZW50IChvciBlbGVtZW50IHN1YnRyZWUgbGlrZSB0YWJsZSwgZHJhZ2dpbmcgY29udGFpbmVyIC4uLikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxTdHJpbmd9IFtlbF0gSFRNTCBub2RlIG9yIENTUyBzZWxlY3RvciB0byBlbmFibGUgLyBkaXNhYmxlLiBQYXJhbWV0ZXIgZGVmaW5lcyBlbGVtZW50IHJlZmVyZW5jZSBvciBDU1Mgc2VsZWN0b3Igb2YgRElWIGVsZW1lbnRzIHRvIGVuYWJsZSAvIGRpc2FibGUuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBlbmFibGUgZWxlbWVudCB3aXRoIGlkPVwiaWQxMjNcIiAoZWxlbWVudCBpZCBzaG91bGQgYmUgYSBzdHJpbmcgYWNjb3JkaW5nIHRvIERPTSBkb2NzKVxyXG4gICAqIHJkLmVuYWJsZURyYWcodHJ1ZSwgJyNpZDEyMycpO1xyXG4gICAqXHJcbiAgICogLy8gb3IgaW5pdCBtYW51YWxseSBhZGRlZCBlbGVtZW50IHdpdGgga25vd24gaWRcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKHRydWUsICcjaWQyMzQnKTtcclxuICAgKlxyXG4gICAqIC8vIGRpc2FibGUgYWxsIERJViBlbGVtZW50cyBpbiBkcmFnMSBzdWJ0cmVlXHJcbiAgICogcmQuZW5hYmxlRHJhZyhmYWxzZSwgJyNkcmFnMSBkaXYnKVxyXG4gICAqXHJcbiAgICogLy8gaW5pdCBESVYgZWxlbWVudHMgaW4gZHJhZ2dpbmcgYXJlYSAoaW5jbHVkaW5nIG5ld2x5IGFkZGVkIERJViBlbGVtZW50KVxyXG4gICAqIC8vIERJViBpbml0aWFsaXphdGlvbiB3aWxsIHdvcmsgaWYgdGFibGUgbm9kZSBzdGF5cyBpbnRhY3QgKHRhYmxlIGlzIG5vdCBnZW5lcmF0ZWQgZHluYW1pY2FsbHkpXHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZygnaW5pdCcpO1xyXG4gICAqXHJcbiAgICogLy8gaW5pdCBhZGRlZCBlbGVtZW50IHdpdGggcmVmZXJlbmNlIG15RWxlbWVudFxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcodHJ1ZSwgbXlFbGVtZW50KTtcclxuICAgKlxyXG4gICAqIC8vIGRpc2FibGUgYWxsIERJViBlbGVtZW50cyB3aXRoaW4gVEQgKHRkIGlzIHJlZmVyZW5jZSB0byBURCBub2RlKVxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcoZmFsc2UsIHRkKTtcclxuICAgKi9cclxuICBlbmFibGVEcmFnID0gZnVuY3Rpb24gKGVuYWJsZV9mbGFnLCBlbCkgXHJcbiAge1xyXG4gICAgdmFyIGRpdiA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gb2YgZGl2IGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0YWJsZXMgb3Igb25lIGRpdiBlbGVtZW50XHJcbiAgICBcclxuICAgIGlmIChlbCA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IERJViBlbGVtZW50cyBpbnNpZGUgY3VycmVudCBkcmFnIGFyZWEgKGRyYWcgZWxlbWVudHMgYW5kIHNjcm9sbCBjb250YWluZXJzKSBlLmcuIGVuYWJsZURyYWcodHJ1ZSlcclxuICAgIHtcclxuICAgICAgZGl2ID0gZHJhZ0NvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2Jyk7XHJcbiAgICB9ICAgIFxyXG4gICAgZWxzZSBpZiAodHlwZW9mKGVsKSA9PT0gJ3N0cmluZycpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiZWxcIiBpcyBzdHJpbmcgKENTUyBzZWxlY3RvcikgLSBpdCBjYW4gY29sbGVjdCBvbmUgRElWIGVsZW1lbnQgKGxpa2UgXCIjZDEyXCIpIG9yIG1hbnkgRElWIGVsZW1lbnRzIChsaWtlIFwiI2RyYWcxIGRpdlwiKVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZihlbCkgPT09ICdvYmplY3QnICYmIChlbC5ub2RlTmFtZSAhPT0gJ0RJVicgfHwgZWwuY2xhc3NOYW1lLmluZGV4T2YoJ3JlZGlwcy1kcmFnJykgPT09IC0xKSkgICAgICAvLyBcImVsXCIgaXMgbm9kZSByZWZlcmVuY2UgdG8gZWxlbWVudCB0aGF0IGlzIG5vdCBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub25lIG9mIGFib3ZlLCBlbCBpcyBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiLCBzbyBwcmVwYXJlIGFycmF5IHdpdGggb25lIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGRpdlswXSA9IGVsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBlbmFibGVEaXZzKGVuYWJsZV9mbGFnLCBkaXYpO1xyXG4gIH07XHJcbiAgXHJcbiAgXHJcbiAgZW5hYmxlRGl2cyA9IGZ1bmN0aW9uKGVuYWJsZV9mbGFnLCBkaXYpXHJcbiAge1xyXG4gICAgIHZhciBpLCBqLCBrLCAgICAvLyBsb2NhbCB2YXJpYWJsZXMgdXNlZCBpbiBsb29wXHJcbiAgICAgIHRibHMgPSBbXSwgICAgLy8gY29sbGVjdGlvbiBvZiB0YWJsZXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIGJvcmRlclN0eWxlLCAgLy8gYm9yZGVyIHN0eWxlIChzb2xpZCBvciBkb3R0ZWQpXHJcbiAgICAgIG9wYWNpdHksICAgIC8vIChpbnRlZ2VyKSBzZXQgb3BhY2l0eSBmb3IgZW5hYmxlZCAvIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgIGN1cnNvciwgICAgIC8vIGN1cnNvciBzdHlsZSAobW92ZSBvciBhdXRvKVxyXG4gICAgICBvdmVyZmxvdywgICAvLyBjc3MgdmFsdWUgb2Ygb3ZlcmZsb3cgcHJvcGVydHlcclxuICAgICAgYXV0b3Njcm9sbCwgICAvLyBib29sZWFuIC0gaWYgc2Nyb2xsYWJsZSBjb250YWluZXIgd2lsbCBoYXZlIGF1dG9zY3JvbGwgb3B0aW9uIChkZWZhdWx0IGlzIHRydWUpXHJcbiAgICAgIGVuYWJsZWQsICAgIC8vIGVuYWJsZWQgcHJvcGVydHkgKHRydWUgb3IgZmFsc2UpXHJcbiAgICAgIGNiLCAgICAgICAvLyBib3ggb2Zmc2V0IGZvciBjb250YWluZXIgYm94IChjYilcclxuICAgICAgcG9zaXRpb24sICAgLy8gaWYgdGFibGUgY29udGFpbmVyIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIFwicGFnZSBzY3JvbGxcIiBvZmZzZXQgc2hvdWxkIG5vdCBiZSBhZGRlZFxyXG4gICAgICByZWdleERyYWcgPSAvXFxicmVkaXBzLWRyYWdcXGIvaSwgLy8gcmVndWxhciBleHByZXNzaW9uIHRvIHNlYXJjaCBcInJlZGlwcy1kcmFnXCIgY2xhc3MgbmFtZVxyXG4gICAgICByZWdleE5vQXV0b3Njcm9sbCA9IC9cXGJyZWRpcHMtbm9hdXRvc2Nyb2xsXFxiL2k7IC8vIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggXCJyZWRpcHMtbm9hdXRvc2Nyb2xsXCIgY2xhc3MgbmFtZSAgIFxyXG5cclxuICAgIG9wYWNpdHkgPSBSRURJUFMuZHJhZy5zdHlsZS5vcGFjaXR5RGlzYWJsZWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHMgZnJvbSBwdWJsaWMgcHJvcGVydHkgXCJvcGFjaXR5RGlzYWJsZWRcIlxyXG4gICAgXHJcbiAgICBpZiAoZW5hYmxlX2ZsYWcgPT09IHRydWUgfHwgZW5hYmxlX2ZsYWcgPT09ICdpbml0JykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHN0eWxlcyBmb3IgZW5hYmxlZCBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBib3JkZXJTdHlsZSA9IFJFRElQUy5kcmFnLnN0eWxlLmJvcmRlckVuYWJsZWQ7XHJcbiAgICAgIGN1cnNvciA9ICdtb3ZlJztcclxuICAgICAgZW5hYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBzZXQgc3R5bGVzIGZvciBkaXNhYmxlZCBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBib3JkZXJTdHlsZSA9IFJFRElQUy5kcmFnLnN0eWxlLmJvcmRlckRpc2FibGVkO1xyXG4gICAgICBjdXJzb3IgPSAnYXV0byc7XHJcbiAgICAgIGVuYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gICAgXHJcbiAgICBcclxuICAgIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgZGl2Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWluIGxvb3AgdGhhdCBnb2VzIHRocm91Z2ggYWxsIERJViBlbGVtZW50c1xyXG4gICAgeyAgICBcclxuICAgICAgaWYgKHJlZ2V4RHJhZy50ZXN0KGRpdltpXS5jbGFzc05hbWUpKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgZWxlbWVudCBjb250YWlucyBcInJlZGlwcy1kcmFnXCIgY2xhc3MgbmFtZVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGVuYWJsZV9mbGFnID09PSAnaW5pdCcgfHwgZGl2W2ldLnJlZGlwcyA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHJlZmVyZW5jZSB0byB0aGUgRElWIGNvbnRhaW5lciAoaW5pdGlhbGl6YXRpb24gb3IgbmV3bHkgYWRkZWQgZWxlbWVudCB0byB0aGUgdGFibGUpIHRoaXMgcHJvcGVydHkgc2hvdWxkIG5vdCBiZSBjaGFuZ2VkIGluIGxhdGVyIGVsZW1lbnQgZW5hYmxlL2Rpc2FibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaXZbaV0ucmVkaXBzID0ge307ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZFxyXG4gICAgICAgICAgZGl2W2ldLnJlZGlwcy5jb250YWluZXIgPSBkcmFnQ29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbmFibGVfZmxhZyA9PT0gdHJ1ZSAmJiB0eXBlb2Yob3BhY2l0eSkgPT09ICdudW1iZXInKSAgICAgICAgICAgICAgICAvLyByZW1vdmUgb3BhY2l0eSBtYXNrXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLm9wYWNpdHkgPSAnJztcclxuICAgICAgICAgIGRpdltpXS5zdHlsZS5maWx0ZXIgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZW5hYmxlX2ZsYWcgPT09IGZhbHNlICYmIHR5cGVvZihvcGFjaXR5KSA9PT0gJ251bWJlcicpICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5IC8gMTAwO1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZWdpc3RlckV2ZW50cyhkaXZbaV0sIGVuYWJsZWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lciBmb3IgRElWIGVsZW1lbnRcclxuICAgICAgICBcclxuICAgICAgICBkaXZbaV0uc3R5bGUuYm9yZGVyU3R5bGUgPSBib3JkZXJTdHlsZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc3R5bGVzIGZvciBESVYgZWxlbWVudFxyXG4gICAgICAgIGRpdltpXS5zdHlsZS5jdXJzb3IgPSBjdXJzb3I7XHJcbiAgICAgICAgZGl2W2ldLnJlZGlwcy5lbmFibGVkID0gZW5hYmxlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGVuYWJsZWQgcHJvcGVydHkgdG8gdGhlIERJViBlbGVtZW50ICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGVuYWJsZV9mbGFnID09PSAnaW5pdCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXR0YWNoIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSBESVYgZWxlbWVudCBpbiBpbml0IHBoYXNlIG9ubHkgaWYgRElWIGVsZW1lbnQgaGFzIG92ZXJmbG93IG90aGVyIHRoYW4gZGVmYXVsdCB2YWx1ZSAndmlzaWJsZScgYW5kIHRoYXQgbWVhbnMgc2Nyb2xsYWJsZSBESVYgY29udGFpbmVyXHJcbiAgICAgIHtcclxuICAgICAgICBvdmVyZmxvdyA9IGdldFN0eWxlKGRpdltpXSwgJ292ZXJmbG93Jyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhc2sgZm9yIG92ZXJmbG93IHN0eWxlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG92ZXJmbG93ICE9PSAndmlzaWJsZScpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGlzIHNjcm9sbGFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBSRURJUFMuZXZlbnQuYWRkKGRpdltpXSwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgZm9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKGRpdltpXSwgJ3Bvc2l0aW9uJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbnRhaW5lciBib3ggc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgcGFnZSBzY3JvbGwgb2Zmc2V0IGZyb20gY2FsY3VsYXRpb24gaWYgbmVlZGVkKVxyXG4gICAgICAgICAgY2IgPSBib3hPZmZzZXQoZGl2W2ldLCBwb3NpdGlvbiwgZmFsc2UpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBESVYgY29udGFpbmVyIG9mZnNldCB3aXRoIG9yIHdpdGhvdXQgXCJwYWdlIHNjcm9sbFwiIGFuZCBleGNsdWRlZCBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGNvbnRlbnRcclxuICAgICAgICAgIGF1dG9zY3JvbGwgPSAhcmVnZXhOb0F1dG9zY3JvbGwudGVzdChkaXZbaV0uY2xhc3NOYW1lKTsgICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggZm9yIHJlZGlwcy1ub2F1dG9zY3JvbGwgb3B0aW9uXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2pdID0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRpdiA6IGRpdltpXSwgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgICAgb2Zmc2V0IDogY2IsICAgICAgICAgICAgICAgICAgLy8gYm94IG9mZnNldCBvZiB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgICAgbWlkc3RYIDogKGNiWzFdICsgY2JbM10pIC8gMiwgLy8gbWlkZGxlIFhcclxuICAgICAgICAgICAgbWlkc3RZIDogKGNiWzBdICsgY2JbMl0pIC8gMiwgLy8gbWlkZGxlIFlcclxuICAgICAgICAgICAgYXV0b3Njcm9sbCA6IGF1dG9zY3JvbGwgICAgICAgLy8gYXV0b3Njcm9sbCBlbmFibGVkIG9yIGRpc2FibGVkICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgdGJscyA9IGRpdltpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGFibGUnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgdGFibGVzIGluc2lkZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgdGJscy5sZW5ndGg7IGsrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCBnb2VzIHRocm91Z2ggZm91bmQgdGFibGVzIGluc2lkZSBzY3JvbGxhYmxlIGFyZWFcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGJsc1trXS5zY2EgPSBzY3JvbGxEYXRhLmNvbnRhaW5lcltqXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYSByZWZlcmVuY2UgdG8gdGhlIGNvcnJlc3BvbmRpbmcgc2Nyb2xsYWJsZSBhcmVhXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGorKzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNyZWFzZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBjb3VudGVyXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICAgXHJcbiAgfTtcclxuXHJcbiAgLy9NZXRob2QgcmV0dXJucyBzdHlsZSB2YWx1ZSBmb3IgcmVxdWVzdGVkIEhUTUwgZWxlbWVudCBhbmQgc3R5bGUgbmFtZS5cclxuICBnZXRTdHlsZSA9IGZ1bmN0aW9uIChlbCwgc3R5bGVfbmFtZSkgXHJcbiAge1xyXG4gICAgaWYgKGVsICYmIGVsLmN1cnJlbnRTdHlsZSkgXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBlbC5jdXJyZW50U3R5bGVbc3R5bGVfbmFtZV07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChlbCAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSkgXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsLCBudWxsKVtzdHlsZV9uYW1lXTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBmaW5kIHRoZSBmaXJzdCBwYXJlbnQgZWxlbWVudCBvZiBlbCB3aXRoIHRoZSB0YWcgbmFtZSB0YWdfbmFtZSBcclxuICBmaW5kUGFyZW50ID0gZnVuY3Rpb24gKHRhZ19uYW1lLCBlbCkgXHJcbiAge1xyXG4gICAgZWwgPSBlbC5wYXJlbnROb2RlOyAgICAgICAgICAgICAgICAgLy8gc2V0IFwiZWxcIiB0byB0aGUgbmV4dCBub2RlICh0byBwcmV2ZW50IGZpbmRpbmcgbm9kZSBpdHNlbGYpXHJcbiAgICBcclxuICAgIHdoaWxlIChlbCkgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGxvb3BcclxuICAgIHtcclxuICAgICAgaWYgKGVsLm5vZGVOYW1lID09PSB0YWdfbmFtZSkgICAgIC8vIG5vZGUgaXMgZm91bmRcclxuICAgICAge1xyXG4gICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9kZSBpcyBmb3VuZCBhbmQgbG9vcCBjYW4gYmUgZW5kZWRcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZWwgPSBlbC5wYXJlbnROb2RlOyAgICAgICAgICAgICAgIC8vIG1vdmUgb24gdG8gdGhlIHBhcmVudCBub2RlXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBlbDtcclxuICB9O1xyXG5cclxuICAvL0Z1bmN0aW9uIHJldHVybnMgYSBzdHJpbmcgaW4gd2hpY2ggYWxsIG9mIHRoZSBwcmVjZWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlIHNwYWNlIGhhcyBiZWVuIHJlbW92ZWQsIGFuZCBpbiB3aGljaCBhbGwgaW50ZXJuYWwgc2VxdWVuY2VzIG9mIHdoaXRlIGlzIHJlcGxhY2VkIHdpdGggb25lIHdoaXRlIHNwYWNlLlxyXG4gIG5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChzdHIpIFxyXG4gIHtcclxuICAgIGlmIChzdHIgIT09IHVuZGVmaW5lZCkgXHJcbiAgICB7XHJcbiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gc3RyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gbm9ybWFsaXplZCBzdHJpbmcgKHdpdGhvdXQgcHJlY2VkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXMpXHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHNldHMgb3BhY2l0eSB0byB0YWJsZSByb3cgb3IgZGVsZXRlcyByb3cgY29udGVudC5cclxuICAgKiBJbnB1dCBwYXJhbWV0ZXIgXCJlbFwiIGlzIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IG9yIHJlZmVyZW5jZSB0byB0aGUgY2xvbmVkIG1pbmkgdGFibGUgKHdoZW4gcm93IGlzIG1vdmVkKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ30gZWwgSWQgb2Ygcm93IGhhbmRsZXIgKGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIikgb3IgcmVmZXJlbmNlIHRvIGVsZW1lbnQgKHNvdXJjZSByb3cgb3IgbWluaSB0YWJsZSkuXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfFN0cmluZ30gb3BhY2l0eSBPcGFjaXR5IGxldmVsIChmcm9tIDAgdG8gMTAwKSBvciBcImVtcHR5XCIgKHRoZW4gY29udGVudCBvZiB0YWJsZSBjZWxscyBpbiByb3cgd2lsbCBiZSBkZWxldGVkIC0gaW4gdGhhdCBjYXNlIGZpcnN0IHBhcmFtZXRlciBzaG91bGQgYmUgVFIpLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbY29sb3JdIEJhY2tncm91bmQgY29sb3IuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZyBsaWJyYXJ5XHJcbiAgICogcmQgPSBSRURJUFMuZHJhZztcclxuICAgKlxyXG4gICAqIC8vIG1ha2Ugcm93IHNlbWktdHJhbnNwYXJlbnRcclxuICAgKiByZC5yb3dPcGFjaXR5KHJvd09iaiwgNTApO1xyXG4gICAqXHJcbiAgICogLy8gc2V0IHJvdyBhcyBlbXB0eSBhbmQgd2hpdGUgKGNvbnRlbnQgaW4gdGFibGUgY2VsbHMgd2lsbCBiZSBkZWxldGVkKVxyXG4gICAqIHJkLnJvd09wYWNpdHkocm93T2JqLCAnZW1wdHknLCAnV2hpdGUnKTtcclxuICAgKi9cclxuICByb3dPcGFjaXR5ID0gZnVuY3Rpb24gKGVsLCBvcGFjaXR5LCBjb2xvcikgXHJcbiAge1xyXG4gICAgdmFyIHRkTm9kZUxpc3Q7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWJsZSBjZWxsc1xyXG4gICAgdmFyIGksIGo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHZhcmlhYmxlc1xyXG4gICAgXHJcbiAgICBpZiAodHlwZW9mKGVsKSA9PT0gJ3N0cmluZycpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGlucHV0IHBhcmFtZXRlciBpcyBzdHJpbmcgKHRoaXMgc2hvdWxkIGJlIGVsZW1lbnQgaWQpLCB0aGVuIHNldCBlbGVtZW50IHJlZmVyZW5jZVxyXG4gICAge1xyXG4gICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKTtcclxuICAgICAgZWwgPSBmaW5kUGFyZW50KCdUQUJMRScsIGVsKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWwgY291bGQgYmUgcmVmZXJlbmNlIG9mIHRoZSBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCIgKHJvdyBoYW5kbGVyKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoZWwubm9kZU5hbWUgPT09ICdUUicpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsIGlzIFRSLCB0aGVuIHNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIGVhY2ggY2VsbCAoaWYgbmVlZGVkKSBhbmQgYXBwbHkgb3BhY2l0eVxyXG4gICAge1xyXG4gICAgICB0ZE5vZGVMaXN0ID0gZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RkJyk7ICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IHRhYmxlIGNlbGwgZnJvbSB0aGUgcm93XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGROb2RlTGlzdC5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgRElWIGVsZW1lbnRcclxuICAgICAge1xyXG4gICAgICAgIHRkTm9kZUxpc3RbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3IgPyBjb2xvciA6ICcnOyAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciB0byB0YWJsZSBjZWxsIGlmIG5lZWRlZFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChvcGFjaXR5ID09PSAnZW1wdHknKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBvcGFjaXR5IGlzIHNldCB0byBcImVtcHR5XCIgdGhlbiBkZWxldGUgY2VsbCBjb250ZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGROb2RlTGlzdFtpXS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBzZXQgb3BhY2l0eSB0byBldmVyeSBjaGlsZCBub2RlIGluIHRhYmxlIGNlbGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzLmxlbmd0aDsgaisrKSAgIC8vIGxvb3AgdGhyb3VnaCBjaGlsZCBub2RlcyBvZiBldmVyeSB0YWJsZSBjZWxsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIGFwcGx5IHN0eWxlcyBvbmx5IHRvIEVsZW1lbnQgbm9kZXMgKG5vdCB0ZXh0IG5vZGVzLCBhdHRyaWJ1dGVzIC4uLiksIGh0dHA6Ly9jb2RlLnN0ZXBoZW5tb3JsZXkub3JnL2phdmFzY3JpcHQvZG9tLW5vZGV0eXBlLWNvbnN0YW50cy9cclxuICAgICAgICAgICAgaWYgKHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlc1tqXS5ub2RlVHlwZSA9PT0gMSkgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXNbal0uc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7XHJcbiAgICAgICAgICAgICAgdGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzW2pdLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gcm93IGlzIG1vdmVkIHRoZW4gUkVESVBTLmRyYWcgd2lsbCBjcmVhdGUgbWluaSB0YWJsZSB3aXRoIG9uZSByb3csIGFsbCBicm93c2VycyAoSUU4LCBPcGVyYTExLCBGRjMuNiwgQ2hyb21lMTApIGNhbiBzZXQgb3BhY2l0eSB0byB0aGUgdGFibGVcclxuICAgIHtcclxuICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIEZGLCBDaHJvbWUsIE9wZXJhXHJcbiAgICAgIGVsLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknOyAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBJRVxyXG4gICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvciA/IGNvbG9yIDogJyc7ICAgICAgICAgICAgICAvLyBzZXQgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAvKiBwdWJsaWMgcHJvcGVydGllcyAqL1xyXG4gICAgb2JqIDogb2JqLCAgICAgICAgICAgICAgICAgIC8vVHlwZTogSFRNTEVsZW1lbnQgLSBDdXJyZW50bHkgbW92ZWQgRElWIGVsZW1lbnQuIFJlZmVyZW5jZSB0byB0aGUgUkVESVBTLmRyYWcub2JqIChkcmFnZ2VkIERJViBlbGVtZW50KSBpcyB2aXNpYmxlIGFuZCBjYW4gYmUgdXNlZCBpbiBhcHByb3ByaWF0ZSBldmVudCBoYW5kbGVycy5cclxuICAgIG9iak9sZCAgOiBvYmpPbGQsICAgICAgICAgICAvL1R5cGU6IEhUTUxFbGVtZW50IC0gUHJldmlvdXNseSBtb3ZlZCBESVYgZWxlbWVudCAoYmVmb3JlIGNsaWNrZWQgb3IgY2xvbmVkKS4gSW4gY2FzZSB3aGVuIERJViBlbGVtZW50IGlzIGNsb25lZCwgb2JqIGlzIHJlZmVyZW5jZSBvZiBjdXJyZW50IChjbG9uZWQpIERJViBlbGVtZW50IHdoaWxlIG9iak9sZCBpcyByZWZlcmVuY2Ugb2YgYm90dG9tIChvcmlnaW4pIERJViBlbGVtZW50LlxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgY29udGFpbnMgcmVmZXJlbmNlIHRvIHByZXZpb3VzLCBzb3VyY2UsIGN1cnJlbnQgYW5kIHRhcmdldCB0YWJsZSBjZWxsLiBUZCByZWZlcmVuY2VzIGNhbiBiZSB1c2VkIGluIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQuc291cmNlIC0gcmVmZXJlbmNlIHRvIHNvdXJjZSB0YWJsZSBjZWxsIChzZXQgaW4gb25tb3VzZWRvd24pPC9saT5cclxuICAgICAqIDxsaT57SFRNTEVsZW1lbnR9IHRkLnByZXZpb3VzIC0gcmVmZXJlbmNlIHRvIHByZXZpb3VzIHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCk8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQuY3VycmVudCAtIHJlZmVyZW5jZSB0byBjdXJyZW50IHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCk8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQudGFyZ2V0IC0gcmVmZXJlbmNlIHRvIHRhcmdldCB0YWJsZSBjZWxsICh0YXJnZXQgdGFibGUgY2VsbCBpcyBzZXQgaW4gYSBtb21lbnQgb2YgZHJvcHBpbmcgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbCk8L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICB0ZCA6IHRkLFxyXG4gICAgLyoqXHJcbiAgICAgKiBIb3ZlciBvYmplY3QgY29udGFpbnMgNCBwcm9wZXJ0aWVzOiBjb2xvclRkLCBjb2xvclRyLCBib3JkZXJUZCBhbmQgYm9yZGVyVHIuIGNvbG9yVGQgYW5kIGNvbG9yVHIgZGVmaW5lIGhvdmVyIGNvbG9yIGZvciBESVYgZWxlbWVudCBhbmQgdGFibGUgcm93LlxyXG4gICAgICogSWYgYm9yZGVyVGQgaXMgZGVmaW5lZCwgdGhlbiBoaWdobGlnaHRlZCBjZWxsIHdpbGwgaGF2ZSBib3JkZXIuIElmIGJvcmRlclRyIGlzIGRlZmluZWQgdGhlbiBoaWdobGlnaHRlZCByb3cgd2lsbCBoYXZlIG9ubHkgdG9wIG9yIGJvdHRvbSBib3JkZXIuXHJcbiAgICAgKiBUb3AgYm9yZGVyIHNob3dzIHRoYXQgcm93IHdpbGwgYmUgcGxhY2VkIGFib3ZlIGN1cnJlbnQgcm93LCB3aGlsZSBib3R0b20gYm9yZGVyIHNob3dzIHRoYXQgY3VycmVudCByb3cgd2lsbCBiZSBwbGFjZWQgYmVsb3cgY3VycmVudCByb3cuXHJcbiAgICAgKiBTb21lIGJyb3dzZXJzIG1heSBoYXZlIHByb2JsZW0gd2l0aCBcImJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZVwiIHRhYmxlIHN0eWxlIGFuZCBib3JkZXIgaGlnaGxpZ2h0aW5nLlxyXG4gICAgICogSW4gdGhhdCBjYXNlIHRyeSB3aXRob3V0IGNvbGxhcHNpbmcgVEQgYm9yZGVycyAoZS5nIHNldCBcImJvcmRlci1zcGFjaW5nOjBcIiBhbmQgc21hbGxlciBcInRkLmJvcmRlci13aWR0aFwiKS5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICogQG5hbWUgUkVESVBTLmRyYWcjaG92ZXJcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBzZXQgXCIjOUJCM0RBXCIgYXMgaG92ZXIgY29sb3IgZm9yIFREXHJcbiAgICAgKiBSRURJUFMuZHJhZy5ob3Zlci5jb2xvclRkID0gJyM5QkIzREEnO1xyXG4gICAgICpcclxuICAgICAqIC8vIG9yIHNldCBcIkxpbWVcIiBhcyBob3ZlciBjb2xvciBmb3IgVFJcclxuICAgICAqIFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVHIgPSAnTGltZSc7XHJcbiAgICAgKlxyXG4gICAgICogLy8gc2V0IHJlZCBib3JkZXIgZm9yIGhpZ2hsaWdodGVkIFREXHJcbiAgICAgKiBSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUZCA9ICcycHggc29saWQgcmVkJztcclxuICAgICAqL1xyXG4gICAgaG92ZXIgOiBob3ZlcixcclxuICAgIC8qKlxyXG4gICAgICogU2Nyb2xsIG9iamVjdCBjb250YWlucyBwcm9wZXJ0aWVzIG5lZWRlZCBmb3IgYXV0b3Njcm9sbCBvcHRpb24uXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IHNjcm9sbC5lbmFibGUgLSBFbmFibGUgLyBkaXNhYmxlIGF1dG9zY3JvbGwgb3B0aW9uLiBCeSBkZWZhdWx0IGF1dG9zY3JvbGwgaXMgZW5hYmxlZCBidXQgaXQgY2FuIGJlIHVzZWZ1bGwgaW4gc29tZSBjYXNlcyB0byBjb21wbGV0ZWx5IHR1cm4gb2ZmIGF1dG9zY3JvbGwgKGlmIGFwcGxpY2F0aW9uIGRvZXNuJ3QgbmVlZCBhdXRvc2Nyb2xsaW5nIHBhZ2Ugbm9yIGF1dG9zY3JvbGxpbmcgRElWIGNvbnRhaW5lcikuIFR1cm5pbmcgb2ZmIGF1dG9zY3JvbGwgd2lsbCBzcGVlZCB1cCBhcHBsaWNhdGlvbiBiZWNhdXNlIGV4dHJhIGNhbGN1bGF0aW9ucyB3aWxsIGJlIHNraXBwZWQuIERlZmF1bHQgaXMgdHJ1ZTwvbGk+XHJcbiAgICAgKiA8bGk+e0ludGVnZXJ9IHNjcm9sbC5ib3VuZCAtIEJvdW5kIHNpemUgZm9yIHRyaWdnZXJpbmcgcGFnZSBhdXRvU2Nyb2xsIG9yIGF1dG9TY3JvbGwgb2Ygc2Nyb2xsYWJsZSBESVYgY29udGFpbmVyLiBEZWZhdWx0IHZhbHVlIGlzIDI1IChweCkuPC9saT5cclxuICAgICAqIDxsaT57SW50ZWdlcn0gc2Nyb2xsLnNwZWVkIC0gQXV0b3Njcm9sbCBwYXVzZSBpbiBtaWxsaXNlY29uZHMuIERlZmF1bHQgdmFsdWUgaXMgMjAgKG1pbGxpc2Vjb25kcykuPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgc2Nyb2xsIDogc2Nyb2xsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgY29udGFpbnMgc3R5bGVzIChjb2xvcnMsIG9wYWNpdHkgbGV2ZWxzKSBmb3IgRElWIGVsZW1lbnRzIGFuZCB0YWJsZSByb3dzLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLmJvcmRlckVuYWJsZWQgLSBCb3JkZXIgc3R5bGUgZm9yIGVuYWJsZWQgRElWIGVsZW1lbnRzLiBEZWZhdWx0IGlzIFwic29saWRcIi48L2xpPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLmJvcmRlckRpc2FibGVkIC0gQm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBESVYgZWxlbWVudHMuIERlZmF1bHQgaXMgXCJkb3R0ZWRcIi48L2xpPlxyXG4gICAgICogPGxpPntJbnRlZ2VyfSBzdHlsZS5vcGFjaXR5RGlzYWJsZWQgLSBPcGFjaXR5IGxldmVsIGZvciBkaXNhYmxlZCBlbGVtZW50cy4gRGVmYXVsdCBpcyBlbXB0eSBzdHJpbmcuPC9saT5cclxuICAgICAqIDxsaT57U3RyaW5nfSBzdHlsZS5yb3dFbXB0eUNvbG9yIC0gXCJFbXB0eSByb3dcIiBjb2xvci4gV2hlbiBsYXN0IHJvdyBmcm9tIHRhYmxlIGlzIG1vdmVkIHRoZW4gdGhpcyBjb2xvciB3aWxsIGJlIHNldCB0byBcImVtcHR5IHJvd1wiLiBEZWZhdWx0IGlzIFwid2hpdGVcIi48L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBkZWZpbmUgYm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICogUkVESVBTLmRyYWcuc3R5bGUuYm9yZGVyRGlzYWJsZWQgPSAnZGFzaGVkJztcclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBzdHlsZSA6IHN0eWxlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgZGVmaW5lcyBzZXZlcmFsIHJ1bGVzIHJlbGF0ZWQgdG8gY2xvbmluZyBESVYgZWxlbWVudHMgbGlrZSBlbmFibGUgY2xvbmluZyB3aXRoIHNoaWZ0IGtleSwgZW5hYmxlIHJldHVybmluZyBjbG9uZWQgRElWIGVsZW1lbnQgdG8gaXRzIHNvdXJjZSBhbmQgc28gb24uXHJcbiAgICAgKiBJbnN0ZWFkIG9mIG1vdmluZywgRElWIGVsZW1lbnQgLyByb3cgd2lsbCBiZSBjbG9uZWQgYW5kIHJlYWR5IGZvciBkcmFnZ2luZy5cclxuICAgICAqIEp1c3QgcHJlc3MgU0hJRlQga2V5IGFuZCB0cnkgdG8gZHJhZyBESVYgZWxlbWVudCAvIHJvdy5cclxuICAgICAqIGlmIGNsb25lLnNlbmRCYWNrIHByb3BlcnR5IHNldCB0byB0cnVlLCBjbG9uZWQgRElWIGVsZW1lbnQgd2lsbCBiZSBkZWxldGVkIHdoZW4gZHJvcHBlZCB0byB0aGUgY2VsbCBjb250YWluaW5nIGl0cyBzb3VyY2UgY2xvbmUgZWxlbWVudC5cclxuICAgICAqIElmIGV4aXN0cywgXCJjbGltaXRcIiBjbGFzcyB3aWxsIGJlIHVwZGF0ZWQgKGluY3JlYXNlZCBieSAxKS5cclxuICAgICAqIGNsb25lLmRyb3AgcHJvcGVydHkgZGVmaW5lcyBwbGFjaW5nIGNsb25lZCBESVYgZWxlbWVudCAoZHJvcHBlZCBvdXRzaWRlIGFueSB0YWJsZSkgdG8gdGhlIGxhc3QgbWFya2VkIHBvc2l0aW9uLlxyXG4gICAgICogSWYgdGhpcyBwcm9wZXJ0eSBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGNsb25lZCBESVYgZWxlbWVudCB3aWxsIGJlIGFsd2F5cyBwbGFjZWQgdG8gdGhlIHRhYmxlIGNlbGwuXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLmtleURpdiAtIElmIHNldCB0byB0cnVlLCBhbGwgRElWIGVsZW1lbnRzIG9uIHRhYmxlcyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5rZXlSb3cgLSBJZiBzZXQgdG8gdHJ1ZSwgdGFibGUgcm93cyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5zZW5kQmFjayAtIElmIHNldCB0byB0cnVlLCBjbG9uZWQgZWxlbWVudCBjYW4gYmUgcmV0dXJuZWQgdG8gaXRzIHNvdXJjZS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5kcm9wIC0gSWYgc2V0IHRvIHRydWUsIGNsb25lZCBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIHBsYWNlZCB0byB0aGUgdGFibGUgKHRvIHRoZSBsYXN0IHBvc3NpYmxlIGNlbGwpIG5vIG1hdHRlciBpZiBpcyBkcm9wcGVkIG91dHNpZGUgdGhlIHRhYmxlLiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGNsb25lIDogY2xvbmUsXHJcbiAgICAvKiBwdWJsaWMgbWV0aG9kcyAoZG9jdW1lbnRlZCBpbiBtYWluIGNvZGUpICovXHJcbiAgICBpbml0IDogaW5pdCxcclxuICAgIGVuYWJsZURyYWcgOiBlbmFibGVEcmFnLFxyXG4gICAgZW5hYmxlRGl2cyA6IGVuYWJsZURpdnMsXHJcbiAgICByb3dPcGFjaXR5IDogcm93T3BhY2l0eSxcclxuICAgIGdldFNjcm9sbFBvc2l0aW9uIDogZ2V0U2Nyb2xsUG9zaXRpb24sXHJcbiAgICBnZXRTdHlsZSA6IGdldFN0eWxlLFxyXG4gICAgZmluZFBhcmVudCA6IGZpbmRQYXJlbnQsXHJcbiAgICBldmVudCA6IGV2ZW50XHJcbiAgfTtcclxufSgpKTtcclxuXHJcblxyXG5pZiAoIVJFRElQUy5ldmVudCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgUkVESVBTLmV2ZW50IGlzbid0IGFscmVhZHkgZGVmaW5lZCAoZnJvbSBvdGhlciBSRURJUFMgZmlsZSlcclxue1xyXG4gIFJFRElQUy5ldmVudCA9IChmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICB2YXIgYWRkO1xyXG4gICAgdmFyIHJlbW92ZTtcclxuXHJcbiAgICBhZGQgPSBmdW5jdGlvbiAob2JqLCBldmVudE5hbWUsIGhhbmRsZXIpICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXJcclxuICAgIHtcclxuICAgICAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgZmFsc2UpOyAgICAgICAgLy8gKGZhbHNlKSByZWdpc3RlciBldmVudCBpbiBidWJibGUgcGhhc2UgKGV2ZW50IHByb3BhZ2F0ZXMgZnJvbSBmcm9tIHRhcmdldCBlbGVtZW50IHVwIHRvIHRoZSBET00gcm9vdClcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmpbJ29uJyArIGV2ZW50TmFtZV0gPSBoYW5kbGVyO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIChvYmosIGV2ZW50TmFtZSwgaGFuZGxlcikgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBldmVudCBsaXN0ZW5lclxyXG4gICAge1xyXG4gICAgICBpZiAob2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAob2JqLmRldGFjaEV2ZW50KSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5kZXRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBoYW5kbGVyKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqWydvbicgKyBldmVudE5hbWVdID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4geyBhZGQ6IGFkZCwgcmVtb3ZlOiByZW1vdmUgfTtcclxuICB9KCkpO1xyXG59IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgcmVkaXBzID0ge307XHJcblxyXG5yZWRpcHMuaW5pdCA9IGZ1bmN0aW9uICgpIFxyXG57XHJcbiAgdmFyIHJkID0gUkVESVBTLmRyYWc7ICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZyBsaWJyYXJ5XHJcblxyXG4gIHJkLmluaXQoKTtcclxuXHJcbiAgLy9yZC5jbG9uZS5rZXlEaXYgPSByZC5jbG9uZS5rZXlSb3cgPSB0cnVlOyAgIC8vIGVuYWJsZSBjbG9uZSBlbGVtZW50IGFuZCBjbG9uZSByb3cgd2l0aCBzaGlmdCBrZXlcclxuXHJcbiAgcmQuZXZlbnQucm93RHJvcHBlZCA9IGZ1bmN0aW9uIChuZXdQYXJlbnRSb3cpXHJcbiAge1xyXG4gICAgdmFyIG1vdmVkSUQgICAgICAgPSBwYXJzZUludChyZC5vYmpPbGQuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gICAgdmFyIG5ld1BhcmVudElEICAgPSBwYXJzZUludChuZXdQYXJlbnRSb3cuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gICAgc3ByZWFkU2hlZXQubW92ZU5vZGUobW92ZWRJRCwgbmV3UGFyZW50SUQpO1xyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd0Ryb3BwZWRTb3VyY2UgPSBmdW5jdGlvbiAoKSAgICAgICAgIC8vIHJvdyB3YXMgZHJvcHBlZCB0byB0aGUgc291cmNlIC0gZXZlbnQgaGFuZGxlciwgbWluaSB0YWJsZSAoY2xvbmVkIHJvdykgd2lsbCBiZSBkZWxldGVkIGFuZCBzb3VyY2Ugcm93IHNob3VsZCByZXR1cm4gdG8gb3JpZ2luYWwgc3RhdGVcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iak9sZCwgMTAwKTsgICAgICAgICAgICAgICAgLy8gbWFrZSBzb3VyY2Ugcm93IGNvbXBsZXRlbHkgdmlzaWJsZSAobm8gb3BhY2l0eSlcclxuICB9O1xyXG5cclxuICByZC5ldmVudC5yb3dNb3ZlZCA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgcmQucm93T3BhY2l0eShyZC5vYmosIDg1KTsgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBtb3ZlZCByb3csIHJkLm9iaiBpcyByZWZlcmVuY2Ugb2YgY2xvbmVkIHJvdyAobWluaSB0YWJsZSlcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAyMCwgJ1doaXRlJyk7ICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3Igc291cmNlIHJvdyBhbmQgY2hhbmdlIHNvdXJjZSByb3cgYmFja2dyb3VuZCBjb2xvciwgb2JqLm9iak9sZCBpcyByZWZlcmVuY2Ugb2Ygc291cmNlIHJvd1xyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd0NsaWNrZWQgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd05vdE1vdmVkICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd0Nsb25lZCAgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd05vdENsb25lZCA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd0RlbGV0ZWQgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICByZC5ldmVudC5yb3dVbmRlbGV0ZWQgPSBmdW5jdGlvbiAoKSAgICAgICAgICAgICAvLyByb3cgaXMgdW5kZWxldGVkIChyZXR1cm4gc291cmNlIHJvdyB0byBvcmlnaW5hbCBzdGF0ZSlcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iak9sZCwgMTAwKTtcclxuICB9O1xyXG59O1xyXG4iLCJ2YXIgcmVzaXplQ29sdW1uTGVmdCA9IDA7XHJcbnZhciByZXNpemVGaWVsZCA9ICcwJztcclxudmFyIE1JTl9DT0xVTU5fV0lEVEggPSA3MDtcclxudmFyIEdSSVBTX1dJRFRIID0gMTY7XHJcblxyXG52YXIgc3RhcnRSZXNpemUgPSBmdW5jdGlvbihlLCBncmlwKVxyXG57XHJcbiAgJChkb2N1bWVudCkuYmluZCgndG91Y2htb3ZlLnJlc2l6ZUNvbEdyaXAgbW91c2Vtb3ZlLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVEcmFnKS5iaW5kKCd0b3VjaGVuZC5yZXNpemVDb2xHcmlwIG1vdXNldXAucmVzaXplQ29sR3JpcCcsIHJlc2l6ZUVuZCk7XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLmxlZnQgPSBlLnBhZ2VYICsgJ3B4JztcclxuXHJcbiAgcmVzaXplQ29sdW1uTGVmdCA9ICQoZ3JpcC5wYXJlbnROb2RlKS5wb3NpdGlvbigpLmxlZnQ7ICAgICAgICAgICAgICAgICAgICAvL3NhdmUgdGhlIGxlZnQgcG9zaXRpb24gb2YgdGhlIGNvbHVtbiBiZWluZyByZXNpemVkXHJcbiAgcmVzaXplRmllbGQgPSBncmlwLnBhcmVudE5vZGUuaWQucmVwbGFjZSgnY29sSGVhZGVyJywgJycpOyAgICAgICAgICAgICAgICAvL3NhdmUgdGhlIGZpZWxkIG9mIHRoZSBjb2x1bW4gYmVpbmcgcmVzaXplZFxyXG59O1xyXG5cclxudmFyIHJlc2l6ZUVuZCA9IGZ1bmN0aW9uKGUpXHJcbntcclxuICAkKGRvY3VtZW50KS51bmJpbmQoJ3RvdWNobW92ZS5yZXNpemVDb2xHcmlwIG1vdXNlbW92ZS5yZXNpemVDb2xHcmlwJywgcmVzaXplRHJhZykudW5iaW5kKCd0b3VjaGVuZC5yZXNpemVDb2xHcmlwIG1vdXNldXAucmVzaXplQ29sR3JpcCcsIHJlc2l6ZUVuZCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcblxyXG4gIHZhciBuZXdXaWR0aCA9IGUucGFnZVggLSByZXNpemVDb2x1bW5MZWZ0IC0gR1JJUFNfV0lEVEg7XHJcblxyXG4gIGlmKG5ld1dpZHRoIDwgTUlOX0NPTFVNTl9XSURUSClcclxuICB7XHJcbiAgICBuZXdXaWR0aCA9IE1JTl9DT0xVTU5fV0lEVEg7XHJcbiAgfVxyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sSGVhZGVySW5wdXQnICsgcmVzaXplRmllbGQpLnN0eWxlLndpZHRoID0gbmV3V2lkdGggKyAncHgnOyAgICAvL3Jlc2l6ZSB0aGUgd2lkdGggb2YgdGhlIGNvbHVtbiBoZWFkZXJcclxuXHJcbiAgLy9yZXNpemUgdGhlIHdpZHRoIG9mIGV2ZXJ5IGNlbGwgaW4gdGhlIGNvbHVtblxyXG4gIHZhciBjb2x1bW5DZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWVsZElucHV0JyArIHJlc2l6ZUZpZWxkKTtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNvbHVtbkNlbGxzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIGNvbHVtbkNlbGxzW2ldLnN0eWxlLndpZHRoID0gKG5ld1dpZHRoICsgOCkgKyAncHgnO1xyXG4gIH1cclxufTtcclxuXHJcbnZhciByZXNpemVEcmFnID0gZnVuY3Rpb24oZSlcclxue1xyXG4gIGlmKGUucGFnZVggPiByZXNpemVDb2x1bW5MZWZ0ICsgTUlOX0NPTFVNTl9XSURUSCArIEdSSVBTX1dJRFRIKVxyXG4gIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUubGVmdCA9IGUucGFnZVggKyAncHgnOyAgICAgIC8vbW92ZSB0aGUgcmVzaXplIGxpbmUgYXMgdGhlIHVzZXIgZHJhZ3MgaXRcclxuICB9XHJcbn07IiwiIiwidmFyIGZpZWxkTWVudUNvbnRyb2xsZXIgPVxyXG57XHJcbiAgZGlzcGxheUZpZWxkTWVudTogZnVuY3Rpb24oZmllbGROYW1lLCB4LCB5KSBcclxuICB7XHJcbiAgICB2YXIgZmllbGQgPSBwcm9qZWN0LmdldEZpZWxkKGZpZWxkTmFtZSk7XHJcbiAgICAgIFxyXG4gICAgdGhpcy5tZW51ID0gbmV3IEZpZWxkTWVudShmaWVsZCwgc3ByZWFkU2hlZXQuZmllbGRzKTtcclxuICAgIFxyXG4gICAgZmllbGRNZW51Vmlldy5yZW5kZXIodGhpcy5tZW51LCB4LCB5KTsgICAgXHJcbiAgfSxcclxuICBoYW5kbGVDbGljazogZnVuY3Rpb24obWVudUl0ZW1JRClcclxuICB7XHJcbiAgICB2YXIgY2xpY2tlZCA9IHRoaXMubWVudS5nZXRNZW51SXRlbShtZW51SXRlbUlELCB0aGlzLm1lbnUpO1xyXG4gICAgdmFyIHBhcmVudCA9IHRoaXMubWVudS5nZXRNZW51SXRlbVBhcmVudChtZW51SXRlbUlELCB0aGlzLm1lbnUpO1xyXG4gIFxyXG4gICAgaWYoY2xpY2tlZC5maWVsZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZSBtZW51IGl0ZW0gZG9lc24ndCBoYXZlIGEgZmllbGQgdGhlbiBpZ25vcmUgaXRcclxuICAgIHtcclxuICAgICAgdmFyIGZpZWxkID0gcHJvamVjdC5nZXRGaWVsZChjbGlja2VkLmZpZWxkLm5hbWUpO1xyXG4gICAgICBmaWVsZFtjbGlja2VkLnZhck5hbWVdID0gY2xpY2tlZC52YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NldCB2YWx1ZSBmb3IgdGhlIGZpZWxkIGluIHRoZSBtb2RlbCBiYXNlZCBvbiB0aGUgY2xpY2tlZCBtZW51IGl0ZW1cclxuICAgIFxyXG4gICAgICBmaWVsZE1lbnVWaWV3LnNldENoZWNrbWFya3MobWVudUl0ZW1JRCwgcGFyZW50Lml0ZW1zKTtcclxuXHJcbiAgICAgIGlmKHBhcmVudCA9PT0gdGhpcy5tZW51KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgdGhpcyBpcyBhIHRvcCBsZXZlbCBtZW51IGl0ZW0gdGhlbiB1cGRhdGUgdGhlIGZvcm1hdHRpbmcsIHNpbmNlIHdlIG9ubHkgd2FudCB0byBkbyB0aGlzIG9uY2UgcGVyIGNsaWNrXHJcbiAgICAgIHtcclxuICAgICAgICBzcHJlYWRTaGVldC51cGRhdGVOdW1iZXJGaWVsZEZvcm1hdHRpbmcoZmllbGQpO1xyXG4gICAgICB9XHJcbiAgICB9ICAgIFxyXG4gIH1cclxufTsiLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpXHJcbntcclxuICBzY3JvbGxCYXJXaWR0aCA9IGdldFNjcm9sbEJhcldpZHRoKCk7ICAvL2dldCB0aGUgc2Nyb2xsYmFyIHdpZHRoIGZvciB0aGUgYnJvd3NlciwgdG8gdXNlIGxhdGVyIGZvciBzaXppbmcgb3RoZXIgZWxlbWVudHMgXHJcbiAgaG1zLmluaXQoKTtcclxufSk7XHJcblxyXG52YXIgaG1zID0gXHJcbntcclxuICBpbml0OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcHJvamVjdHMuaW5pdChmdW5jdGlvbihwcm9qZWN0cykgeyBoZWFkZXJWaWV3LnJlbmRlcihwcm9qZWN0cyk7IH0pOyAgIFxyXG4gIH0sXHJcbiAgb3BlblByb2plY3Q6IGZ1bmN0aW9uKHByb2plY3RJRClcclxuICB7XHJcbiAgICBwcm9qZWN0cy5vcGVuUHJvamVjdChwcm9qZWN0SUQsIGZ1bmN0aW9uKHRyZWUpXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3QudHJlZSA9IHRyZWU7XHJcbiAgICAgIFxyXG4gICAgICAkLmFqYXgoeyB0eXBlOiAnR0VUJywgdXJsOiAnYXBpL3ZlcnNpb25zP3Byb2plY3RJRD0xJyB9KS5kb25lKGZ1bmN0aW9uKHZlcnNpb25zKVxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZGVyVmlldy5yZWZyZXNoKEpTT04ucGFyc2UodmVyc2lvbnMpLnZlcnNpb25zKTtcclxuICAgICAgICBobXMuc2VsZWN0VmlldyhoZWFkZXJWaWV3LnNlbGVjdGVkVmlldygpKTtcclxuICAgICAgfSk7ICAgIFxyXG4gICAgfSk7ICAgICBcclxuICB9LFxyXG4gIHNhdmVUb0RhdGFiYXNlOiBmdW5jdGlvbigpIFxyXG4gIHsgXHJcbiAgICBwcm9qZWN0LnNhdmVUb0RhdGFiYXNlKCk7XHJcbiAgICAkLmFqYXgoeyB0eXBlOiAnR0VUJywgdXJsOiAnYXBpL3ZlcnNpb25zP3Byb2plY3RJRD0xJyB9KS5kb25lKGZ1bmN0aW9uKHZlcnNpb25zKVxyXG4gICAge1xyXG4gICAgICBoZWFkZXJWaWV3LnJlZnJlc2goSlNPTi5wYXJzZSh2ZXJzaW9ucykudmVyc2lvbnMpO1xyXG4gICAgfSk7ICAgICAgXHJcbiAgfSxcclxuICBzZWxlY3RWaWV3OiBmdW5jdGlvbih2aWV3SUQpXHJcbiAge1xyXG4gICAgaWYocHJvamVjdC50cmVlKVxyXG4gICAge1xyXG4gICAgICBpZih0aGlzLnZpZXcpIHsgdGhpcy52aWV3LmRlc3Ryb3koKTsgfVxyXG4gICAgICB0aGlzLnNob3dWaWV3KHZpZXdJRCk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBzZWxlY3RWZXJzaW9uOiBmdW5jdGlvbih2ZXJzaW9uKVxyXG4gIHtcclxuICAgIHByb2plY3RzLm9wZW5Qcm9qZWN0VmVyc2lvbihwcm9qZWN0LnRyZWUucHJvamVjdElELCB2ZXJzaW9uLCBmdW5jdGlvbih0cmVlKVxyXG4gICAge1xyXG4gICAgICBwcm9qZWN0LnRyZWUgPSB0cmVlO1xyXG4gICAgICBobXMuc2VsZWN0VmlldyhoZWFkZXJWaWV3LnNlbGVjdGVkVmlldygpKTtcclxuICAgIH0pO1xyXG4gIH0sICBcclxuICBzaG93VmlldzogZnVuY3Rpb24odmlld0lEKVxyXG4gIHtcclxuICAgIHN3aXRjaCh2aWV3SUQpXHJcbiAgICB7XHJcbiAgICAgIGNhc2UgU1BSRUFEU0hFRVRfVklFVzpcclxuICAgICAgICB0aGlzLnZpZXcgPSBzcHJlYWRTaGVldFZpZXc7XHJcbiAgICAgICAgc3ByZWFkU2hlZXQuZGlzcGxheSgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICAgIFxyXG4gICAgICBjYXNlIFRSRUVfVklFVzpcclxuICAgICAgICB0aGlzLnZpZXcgPSB0cmVlVmlldztcclxuICAgICAgICB0cmVlLmRpc3BsYXlUcmVlKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgXHJcbiAgICAgIGNhc2UgV0VJR0hURURfVFJFRV9WSUVXOlxyXG4gICAgICAgIHRoaXMudmlldyA9IHdlaWdodGVkVHJlZVZpZXc7XHJcbiAgICAgICAgdHJlZS5kaXNwbGF5V2VpZ2h0ZWRUcmVlKCk7XHJcbiAgICAgICAgYnJlYWs7IFxyXG4gICAgICAgIFxyXG4gICAgICBjYXNlIENJUkNMRV9WSUVXOlxyXG4gICAgICAgIHRoaXMudmlldyA9IGNpcmNsZVZpZXc7XHJcbiAgICAgICAgY2lyY2xlVmlldy5kaXNwbGF5KCk7XHJcbiAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgIFxyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGNyZWF0ZU5ld1Byb2plY3Q6IGZ1bmN0aW9uKG5ld1Byb2plY3ROYW1lKVxyXG4gIHsgIFx0XHJcbiAgICBwcm9qZWN0cy5jcmVhdGVOZXdQcm9qZWN0KG5ld1Byb2plY3ROYW1lKTtcclxuICBcdGhtcy5zZWxlY3RWaWV3KGhlYWRlclZpZXcuc2VsZWN0ZWRWaWV3KCkpOyAgICAgIFxyXG4gIH0sXHJcbiAgbmV4dFByb2plY3RJRDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHJldHVybiBwcm9qZWN0cy5uZXh0UHJvamVjdElEKys7XHJcbiAgfSxcclxuICBleHBhbmRUb0xldmVsOiBmdW5jdGlvbihsZXZlbClcclxuICB7XHJcbiAgICBwcm9qZWN0LmV4cGFuZFRvTGV2ZWwocHJvamVjdC50cmVlLCBsZXZlbCk7XHJcbiAgICAvL1RPRE86IHRoZSBmb2xsb3dpbmcgbmVlZHMgdG8gYmUgcmVmYWN0b3JlZFxyXG4gICAgaWYodGhpcy52aWV3ID09PSBzcHJlYWRTaGVldFZpZXcpIHsgc3ByZWFkU2hlZXQuZGlzcGxheSgpOyB9XHJcbiAgICBlbHNlIGlmKHRoaXMudmlldyA9PT0gdHJlZVZpZXcpIHsgdHJlZVZpZXcucmVmcmVzaCgpOyB9XHJcbiAgICBlbHNlIGlmKHRoaXMudmlldyA9PT0gd2VpZ2h0ZWRUcmVlVmlldykgeyB3ZWlnaHRlZFRyZWVWaWV3LnJlZnJlc2goKTsgfSAgIFxyXG4gIH1cclxufTtcclxuXHJcbnZhciBzY3JvbGxCYXJXaWR0aDtcclxudmFyIGdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24oKSBcclxue1xyXG4gIHZhciBkaXYsIHdpZHRoO1xyXG4gIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGRpdi5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT1cIndpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDotNTBweDt0b3A6LTUwcHg7b3ZlcmZsb3c6YXV0bztcIj48ZGl2IHN0eWxlPVwid2lkdGg6MXB4O2hlaWdodDoxMDBweDtcIj48L2Rpdj48L2Rpdj4nO1xyXG4gIGRpdiA9IGRpdi5maXJzdENoaWxkO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICB3aWR0aCA9IGRpdi5vZmZzZXRXaWR0aCAtIGRpdi5jbGllbnRXaWR0aDtcclxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XHJcbiAgcmV0dXJuIHdpZHRoO1xyXG59OyIsInZhciBzcHJlYWRTaGVldCA9IFxyXG57XHJcbiAgZGlzcGxheTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHByb2plY3QuY2xlYW5zZURhdGEoKTsgICAgICAgICAgICAgICAgICAvL3JlcXVpcmVkIHRvIHJlbW92ZSBjaXJjdWxhciByZWZlcmVuY2VzIHRoYXQgb3RoZXIgdmlld3MgbWF5IGFkZFxyXG4gICAgc3ByZWFkU2hlZXRWaWV3LnJlbmRlcihwcm9qZWN0LnRyZWUpO1xyXG4gIH0sXHJcbiAgZmllbGRzOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuIHByb2plY3QuZmllbGRzKCk7XHJcbiAgfSxcclxuICB0cmVlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuIHByb2plY3QudHJlZTtcclxuICB9LFxyXG4gIHVwZGF0ZUZpZWxkVmFsdWU6IGZ1bmN0aW9uKGZpZWxkTmFtZSwgbm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShub2RlSUQpO1xyXG4gIFxyXG4gICAgaWYobm9kZSlcclxuICAgIHtcclxuICAgICAgaWYoIW5vZGUudmFsdWVzKSB7IG5vZGUudmFsdWVzID0ge307IH1cclxuICAgICAgbm9kZS52YWx1ZXNbZmllbGROYW1lXSA9IHNwcmVhZFNoZWV0Vmlldy5nZXRGaWVsZFZhbHVlKGZpZWxkTmFtZSwgbm9kZUlEKTsgICAgIFxyXG4gICAgfSAgXHJcbiAgXHJcbiAgICAvL1RPRE86IHNob3VsZCBwZXJmb3JtIHRoZSBhZ2dyZWdhdGlvbiBiYXNlZCBvbiB0aGUgZmllbGQgc2V0dGluZ3MgZm9yIGFnZ3JlZ2F0aW5nIHRoaXMgZmllbGRcclxuICAgIHByb2plY3QudHJlZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSBcclxuICAgIHtcclxuICAgICAgYWdncmVnYXRlX2FueShjaGlsZCwgZmllbGROYW1lKTtcclxuICAgIH0pOyAgICBcclxuICB9LFxyXG4gIHJhd1ZhbHVlOiBmdW5jdGlvbihmaWVsZE5hbWUsIG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUocGFyc2VJbnQobm9kZUlEKSk7XHJcbiAgICBcclxuICAgIGlmKG5vZGUudmFsdWVzICYmIG5vZGUudmFsdWVzW2ZpZWxkTmFtZV0pXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBub2RlLnZhbHVlc1tmaWVsZE5hbWVdO1xyXG4gICAgfSAgXHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBmb3JtYXR0ZWRWYWx1ZTogZnVuY3Rpb24oZmllbGQsIG5vZGUpXHJcbiAge1xyXG4gICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbZmllbGQubmFtZV0pXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBGaWVsZC5mb3JtYXRWYWx1ZShmaWVsZCwgbm9kZS52YWx1ZXNbZmllbGQubmFtZV0pO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gJyc7XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgYWRkRmllbGQ6IGZ1bmN0aW9uKGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICBwcm9qZWN0LmFkZEZpZWxkKGZpZWxkTmFtZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuYWRkRmllbGQoZmllbGROYW1lKTtcclxuICB9LFxyXG4gIGhhc0NoaWxkcmVuOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiAhcHJvamVjdC5pc05vZGVDaGlsZGxlc3Mobm9kZSk7XHJcbiAgfSxcclxuICBjaGlsZHJlbkhpZGRlbjogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC5pc05vZGVDb2xsYXBzZWQobm9kZSk7XHJcbiAgfSxcclxuICBtb3ZlTm9kZTogZnVuY3Rpb24obm9kZUlELCBuZXdQYXJlbnRJRClcclxuICB7XHJcbiAgICB2YXIgbmV3UGFyZW50Tm9kZSA9IHByb2plY3QuZmluZE5vZGUobmV3UGFyZW50SUQpO1xyXG4gICAgdmFyIG5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgXHJcbiAgICBzcHJlYWRTaGVldC5yZW1vdmVOb2RlKG5vZGUpO1xyXG4gICAgcHJvamVjdC5hZGROb2RlKG5vZGUsIG5ld1BhcmVudE5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXQuYWRkTm9kZShub2RlLCBuZXdQYXJlbnROb2RlKTsgICAgXHJcbiAgfSxcclxuICByZW1vdmVOb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBwYXJlbnROb2RlID0gcHJvamVjdC5maW5kUGFyZW50KG5vZGUuaWQpO1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZShwcm9qZWN0LmdldENoaWxkcmVuLCBzcHJlYWRTaGVldFZpZXcucmVtb3ZlTm9kZSwgbm9kZSk7XHJcbiAgICBwcm9qZWN0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQocGFyZW50Tm9kZSk7ICAgICAgICAgIC8vaWYgdGhlIHBhcmVudCBpcyBjaGlsZGxlc3Mgbm93LCB0aGVuIGhpZGUgdGhlIG9sZCBwYXJlbnQncyBleHBhbmQvY29sbGFwc2UgaWNvbiAgICAgXHJcbiAgfSxcclxuICBkZWxldGVOb2RlOiBmdW5jdGlvbihub2RlSUQpXHJcbiAge1xyXG4gICAgdmFyIG5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgICBzcHJlYWRTaGVldC5yZW1vdmVOb2RlKG5vZGUpO1xyXG4gIH0sXHJcbiAgYWRkTm9kZTogZnVuY3Rpb24obm9kZSwgcGFyZW50Tm9kZSlcclxuICB7XHJcbiAgICBpZihwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChwYXJlbnROb2RlKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIHtcclxuICAgICAgc3ByZWFkU2hlZXQuZXhwYW5kTm9kZShwYXJlbnROb2RlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgc3ByZWFkU2hlZXRWaWV3LnJlZHJhd05vZGVDb250ZW50KHBhcmVudE5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXRWaWV3Lmluc2VydE5vZGVBZnRlcihub2RlLCBwYXJlbnROb2RlKTsgICAgICAvL2FkZCB0aGUgbW92ZWQgbm9kZSBhbmQgaXRzIGRlc2NlbmRhbnRzIHRvIHRoZSBuZXcgcGFyZW50IGluIHRoZSB2aWV3XHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVuZGVyRXhwYW5kZXIoKTsgIFxyXG4gIH0sXHJcbiAgY29weU5vZGU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgc291cmNlTm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICAgIHZhciBuZXdOb2RlID0gcHJvamVjdC5jbG9uZU5vZGUoc291cmNlTm9kZSk7XHJcbiAgICBwcm9qZWN0Lmluc2VydE5vZGUobmV3Tm9kZSwgc291cmNlTm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuaW5zZXJ0Tm9kZUJlZm9yZShuZXdOb2RlLCBzb3VyY2VOb2RlKTsgICAgXHJcbiAgfSxcclxuICBleHBhbmROb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHByb2plY3QuZXhwYW5kTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5leHBhbmROb2RlKG5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXRWaWV3LnJlZHJhd05vZGVDb250ZW50KG5vZGUpOyAgICAgIFxyXG4gIH0sXHJcbiAgY29sbGFwc2VOb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHByb2plY3QudHJhdmVyc2VEZXNjZW5kYW50cyhwcm9qZWN0LmdldENoaWxkcmVuLCBzcHJlYWRTaGVldFZpZXcucmVtb3ZlTm9kZSwgbm9kZSk7ICAgIFxyXG4gICAgcHJvamVjdC5jb2xsYXBzZU5vZGUobm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQobm9kZSk7ICAgICBcclxuICB9LFxyXG4gIHRvZ2dsZU5vZGU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUobm9kZUlEKTtcclxuICAgIFxyXG4gICAgaWYocHJvamVjdC5pc05vZGVFeHBhbmRlZChub2RlKSlcclxuICAgIHtcclxuICAgICAgc3ByZWFkU2hlZXQuY29sbGFwc2VOb2RlKG5vZGUpOyAgICAgICAgICAgICAgICBcclxuICAgIH1cclxuICAgIGVsc2UgaWYocHJvamVjdC5pc05vZGVDb2xsYXBzZWQobm9kZSkpXHJcbiAgICB7XHJcbiAgICAgIHNwcmVhZFNoZWV0LmV4cGFuZE5vZGUobm9kZSk7IFxyXG4gICAgfSAgXHJcbiAgfSxcclxuICB1cGRhdGVOb2RlTmFtZTogZnVuY3Rpb24obm9kZUlELCBuZXdOYW1lKVxyXG4gIHtcclxuICAgIHByb2plY3QuZmluZE5vZGUobm9kZUlEKS5uYW1lID0gbmV3TmFtZTsgICAgXHJcbiAgfSxcclxuICB1cGRhdGVOdW1iZXJGaWVsZEZvcm1hdHRpbmc6IGZ1bmN0aW9uKGZpZWxkKVxyXG4gIHtcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgZnVuY3Rpb24obm9kZSlcclxuICAgIHsgICAgICBcclxuICAgICAgaWYobm9kZS52YWx1ZXMpXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSBGaWVsZC5mb3JtYXRWYWx1ZShmaWVsZCwgTnVtYmVyKG5vZGUudmFsdWVzW2ZpZWxkLm5hbWVdKSk7ICAgICAgICAgICAgICAgIC8vZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBtb2RlbFxyXG4gICAgICAgIHNwcmVhZFNoZWV0Vmlldy51cGRhdGVGaWVsZFZhbHVlKGZpZWxkLm5hbWUsIG5vZGUuaWQsIHZhbHVlKTtcclxuICAgICAgfSAgICAgIFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBlbmFibGVEcmFnZ2luZzogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZywgbm9kZSk7ICAgIFxyXG4gIH0gIFxyXG59OyIsInZhciB0cmVlID1cclxue1xyXG4gIGRpc3BsYXlUcmVlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgdGhpcy5kYXRhID0gcHJvamVjdC50cmVlO1xyXG4gICAgdGhpcy5maWVsZCA9IHByb2plY3QuZmllbGRzKClbMF07XHJcbiAgICB0cmVlVmlldy5yZW5kZXIoKTtcclxuICB9LFxyXG4gIGRpc3BsYXlXZWlnaHRlZFRyZWU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB0aGlzLmRhdGEgPSBwcm9qZWN0LnRyZWU7XHJcbiAgICB0aGlzLmZpZWxkID0gcHJvamVjdC5maWVsZHMoKVswXTtcclxuICAgIHRoaXMubWF4RmllbGRWYWx1ZSA9IHRoaXMuY2FsY01heEZpZWxkVmFsdWUoKTtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcucmVuZGVyKCk7XHJcbiAgfSwgIFxyXG4gIGNhbGNNYXhGaWVsZFZhbHVlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgdmFyIG1heFZhbHVlID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZO1xyXG4gICAgXHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIGZ1bmN0aW9uKG5vZGUpIFxyXG4gICAge1xyXG4gICAgICBpZihub2RlLnZhbHVlcylcclxuICAgICAge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IG5vZGUudmFsdWVzW3RyZWUuZmllbGQubmFtZV07XHJcbiAgICAgICAgaWYodmFsdWUgPiBtYXhWYWx1ZSkgeyBtYXhWYWx1ZSA9IHZhbHVlOyB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gbWF4VmFsdWU7XHJcbiAgfVxyXG59OyIsInZhciBGaWVsZCA9IGZ1bmN0aW9uKG5hbWUpXHJcbntcclxuICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gIHRoaXMuZGF0YXR5cGUgPSBGaWVsZC5OVU1CRVI7XHJcbiAgdGhpcy5mb3JtYXQgPSBGaWVsZC5OVU1CRVJfRk9STUFUO1xyXG4gIHRoaXMucHJlY2lzaW9uID0gMjtcclxuICB0aGlzLmFnZ190eXBlID0gRmllbGQuTk9fQUdHUkVHQVRJT047XHJcbiAgdGhpcy5hZ2dfcXR5X2ZpZWxkID0gbnVsbDtcclxufTtcclxuXHJcbkZpZWxkLk5VTUJFUiA9ICcwJztcclxuRmllbGQuU1RSSU5HID0gJzEnO1xyXG5GaWVsZC5DSE9JQ0UgPSAnMic7XHJcblxyXG5GaWVsZC5OT19BR0dSRUdBVElPTiA9ICcwJztcclxuRmllbGQuU1VNX0FOWV9BR0dSRUdBVElPTiA9ICcxJztcclxuXHJcbkZpZWxkLk5VTUJFUl9GT1JNQVQgPSAnMCc7XHJcbkZpZWxkLlBFUkNFTlRfRk9STUFUID0gJzEnO1xyXG5GaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVCA9ICcyJztcclxuXHJcbkZpZWxkLmZvcm1hdFZhbHVlID0gZnVuY3Rpb24oZmllbGQsIHZhbHVlKVxyXG57XHJcbiAgaWYoZmllbGQuZGF0YXR5cGUgPT09IEZpZWxkLk5VTUJFUilcclxuICB7XHJcbiAgICB2YWx1ZSA9IE51bWJlcih2YWx1ZSk7ICAgICAgLy9UT0RPOiBoYW5kbGUgY2FzZSB3aGVyZSB2YWx1ZSBkb2Vzbid0IHBhcnNlIHRvIGEgbnVtYmVyXHJcbiAgICBcclxuICAgIGlmKGZpZWxkLmZvcm1hdCA9PT0gRmllbGQuTlVNQkVSX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLnRvRml4ZWQoZmllbGQucHJlY2lzaW9uKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5QRVJDRU5UX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuICgxMDAuMCAqIHZhbHVlKS50b0ZpeGVkKGZpZWxkLnByZWNpc2lvbikgKyAnJSc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKGZpZWxkLmZvcm1hdCA9PT0gRmllbGQuU0NJRU5USUZJQ19GT1JNQVQpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiB2YWx1ZS50b0V4cG9uZW50aWFsKGZpZWxkLnByZWNpc2lvbik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVsc2UgaWYoZmllbGQuZGF0YXR5cGUgPT09IEZpZWxkLlNUUklORylcclxuICB7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfSBcclxuICBlbHNlIGlmKGZpZWxkLmRhdGF0eXBlID09PSBGaWVsZC5DSE9JQ0UpXHJcbiAge1xyXG4gICAgLy9UT0RPOiBpbXBsZW1lbnRcclxuICB9ICAgICAgXHJcbn07ICAiLCJ2YXIgRmllbGRNZW51ID0gZnVuY3Rpb24oZmllbGQsIGZpZWxkcylcclxue1xyXG4gIHZhciBudW1iZXJJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ051bWJlcicsIEZpZWxkLk5VTUJFUiwgJ2RhdGF0eXBlJywgZmllbGQpO1xyXG4gIHZhciBmb3JtYXRJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ0Zvcm1hdCcpO1xyXG4gIFxyXG4gIHZhciBudW1iZXJGb3JtYXRJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ051bWJlcicsIEZpZWxkLk5VTUJFUl9GT1JNQVQsICdmb3JtYXQnLCBmaWVsZCk7XHJcbiAgbnVtYmVyRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCcwJywgMCwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgdmFyIGRpc3BsYXlTdHJpbmcgPSAnMC4nO1xyXG4gIGZvcih2YXIgaSA9IDE7IGkgPCAxMTsgaSsrKVxyXG4gIHtcclxuICAgIGRpc3BsYXlTdHJpbmcgKz0gJzAnO1xyXG4gICAgbnVtYmVyRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKGRpc3BsYXlTdHJpbmcsIGksICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIH1cclxuICBmb3JtYXRJdGVtLml0ZW1zLnB1c2gobnVtYmVyRm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIHBlcmNlbnRGb3JtYXRJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ1BlcmNlbnQnLCBGaWVsZC5QRVJDRU5UX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKTtcclxuICBwZXJjZW50Rm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCcwJScsIDAsICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIHZhciBkaXNwbGF5U3RyaW5nID0gJzAuJztcclxuICBmb3IodmFyIGkgPSAxOyBpIDwgMTE7IGkrKylcclxuICB7XHJcbiAgICBkaXNwbGF5U3RyaW5nICs9ICcwJztcclxuICAgIHBlcmNlbnRGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IEZpZWxkTWVudUl0ZW0oZGlzcGxheVN0cmluZyArICclJywgaSwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgfVxyXG4gIGZvcm1hdEl0ZW0uaXRlbXMucHVzaChwZXJjZW50Rm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIHNjaWVudGlmaWNGb3JtYXRJdGVtID0gbmV3IEZpZWxkTWVudUl0ZW0oJ1NjaWVudGlmaWMnLCBGaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKTtcclxuICBzY2llbnRpZmljRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCcwZSswJywgMCwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgdmFyIGRpc3BsYXlTdHJpbmcgPSAnMC4nO1xyXG4gIGZvcih2YXIgaSA9IDE7IGkgPCAxMTsgaSsrKVxyXG4gIHtcclxuICAgIGRpc3BsYXlTdHJpbmcgKz0gJzAnO1xyXG4gICAgc2NpZW50aWZpY0Zvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgRmllbGRNZW51SXRlbShkaXNwbGF5U3RyaW5nICsgJ2UrMCcsIGksICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIH1cclxuICBmb3JtYXRJdGVtLml0ZW1zLnB1c2goc2NpZW50aWZpY0Zvcm1hdEl0ZW0pOyAgXHJcbiAgXHJcbiAgbnVtYmVySXRlbS5pdGVtcy5wdXNoKGZvcm1hdEl0ZW0pO1xyXG4gIFxyXG4gIHZhciBhZ2dyZWdhdGlvbkl0ZW0gPSBuZXcgRmllbGRNZW51SXRlbSgnQWdncmVnYXRpb24nKTtcclxuICBhZ2dyZWdhdGlvbkl0ZW0uaXRlbXMucHVzaChuZXcgRmllbGRNZW51SXRlbSgnTm8gQWdncmVnYXRpb24nLCBGaWVsZC5OT19BR0dSRUdBVElPTiwgJ2FnZ190eXBlJywgZmllbGQpKTtcclxuICBcclxuICB2YXIgc3VtQW55QWdnSXRlbSA9IG5ldyBGaWVsZE1lbnVJdGVtKCdTdW0gYW55IGRlZmluZWQgY2hpbGRyZW4nLCBGaWVsZC5TVU1fQU5ZX0FHR1JFR0FUSU9OLCAnYWdnX3R5cGUnLCBmaWVsZCk7XHJcbiAgXHJcbiAgZm9yKHZhciBpbmRleCBpbiBmaWVsZHMpXHJcbiAge1xyXG4gICAgdmFyIGYgPSBmaWVsZHNbaW5kZXhdO1xyXG4gICAgXHJcbiAgICBpZihmLm5hbWUgIT0gZmllbGQubmFtZSlcclxuICAgIHtcclxuICAgICAgc3VtQW55QWdnSXRlbS5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKGYubmFtZSwgZi5uYW1lLCAnYWdnX3F0eV9maWVsZCcsIGZpZWxkKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGFnZ3JlZ2F0aW9uSXRlbS5pdGVtcy5wdXNoKHN1bUFueUFnZ0l0ZW0pO1xyXG4gIG51bWJlckl0ZW0uaXRlbXMucHVzaChhZ2dyZWdhdGlvbkl0ZW0pO1xyXG4gIFxyXG4gIHRoaXMuaXRlbXMgPSBbXTtcclxuICB0aGlzLml0ZW1zLnB1c2gobnVtYmVySXRlbSk7XHJcbiAgdGhpcy5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCdUZXh0JywgRmllbGQuU1RSSU5HLCAnZGF0YXR5cGUnLCBmaWVsZCkpO1xyXG4gIC8vVE9ETzogdGhpcy5pdGVtcy5wdXNoKG5ldyBGaWVsZE1lbnVJdGVtKCdDaG9pY2UnLCBGaWVsZC5DSE9JQ0UsICdkYXRhdHlwZScsIGZpZWxkKSk7ICBcclxufTtcclxuXHJcbkZpZWxkTWVudS5wcm90b3R5cGUuZ2V0TWVudUl0ZW0gPSBmdW5jdGlvbihpZCwgbWVudUl0ZW0pXHJcbntcclxuICBpZihpZCA9PT0gbWVudUl0ZW0uaWQpXHJcbiAge1xyXG4gICAgcmV0dXJuIG1lbnVJdGVtO1xyXG4gIH1cclxuICBlbHNlIGlmKG1lbnVJdGVtLml0ZW1zICYmIG1lbnVJdGVtLml0ZW1zLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgdmFyIGZvdW5kO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG1lbnVJdGVtLml0ZW1zLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBmb3VuZCA9IHRoaXMuZ2V0TWVudUl0ZW0oaWQsIG1lbnVJdGVtLml0ZW1zW2ldKTtcclxuICAgICAgaWYoZm91bmQpIHsgcmV0dXJuIGZvdW5kOyB9XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuRmllbGRNZW51LnByb3RvdHlwZS5nZXRNZW51SXRlbVBhcmVudCA9IGZ1bmN0aW9uKGlkLCBtZW51SXRlbSlcclxue1xyXG4gIGlmKG1lbnVJdGVtLml0ZW1zICYmIG1lbnVJdGVtLml0ZW1zLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG1lbnVJdGVtLml0ZW1zLmxlbmd0aDsgaSsrKVxyXG4gICAgeyBcclxuICAgICAgaWYobWVudUl0ZW0uaXRlbXNbaV0uaWQgPT09IGlkKVxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIG1lbnVJdGVtO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIHZhciBmb3VuZCA9IHRoaXMuZ2V0TWVudUl0ZW1QYXJlbnQoaWQsIG1lbnVJdGVtLml0ZW1zW2ldKTtcclxuICAgICAgICBpZihmb3VuZCkgeyByZXR1cm4gZm91bmQ7IH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufTsiLCJ2YXIgRmllbGRNZW51SXRlbSA9IGZ1bmN0aW9uKGRpc3BsYXksIHZhbHVlLCB2YXJOYW1lLCBmaWVsZClcclxue1xyXG4gIHRoaXMuZGlzcGxheSA9IGRpc3BsYXk7XHJcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gIHRoaXMudmFyTmFtZSA9IHZhck5hbWU7XHJcbiAgdGhpcy5maWVsZCA9IGZpZWxkO1xyXG4gIHRoaXMuaXRlbXMgPSBbXTtcclxuICB0aGlzLmlkID0gRmllbGRNZW51SXRlbS5pZCsrO1xyXG4gIHRoaXMucGFyZW50ID0gLTE7XHJcblxyXG4gIGlmKGZpZWxkKVxyXG4gIHtcclxuICAgIHRoaXMuY2hlY2tlZCA9IGZpZWxkW3Zhck5hbWVdID09PSB2YWx1ZTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHRoaXMuY2hlY2tlZCA9IGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbkZpZWxkTWVudUl0ZW0uaWQgPSAwOyIsInZhciBwcm9qZWN0ID1cclxue1xyXG4gIHNhdmVUb0RhdGFiYXNlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgdGhpcy5jbGVhbnNlRGF0YSgpO1xyXG4gICAgJC5hamF4KHsgdHlwZTogJ1BPU1QnLCB1cmw6ICcvYXBpL3RyZWUnLCBkYXRhVHlwZTogJ2pzb24nLCBkYXRhOiB7IGpzb246IEpTT04uc3RyaW5naWZ5KHRoaXMudHJlZSkgfSB9KTtcclxuICB9LFxyXG4gIGZpZWxkczogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHJldHVybiB0aGlzLnRyZWUuZmllbGRzO1xyXG4gIH0sXHJcbiAgY2xlYW5zZURhdGE6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB0aGlzLnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIGZ1bmN0aW9uKG5vZGUpXHJcbiAgICB7XHJcbiAgICAgIGlmKCFub2RlLmNoaWxkcmVuKSB7IG5vZGUuY2hpbGRyZW4gPSBbXTsgfVxyXG4gICAgICBkZWxldGUgbm9kZS5wYXJlbnQ7XHJcbiAgICAgIGRlbGV0ZSBub2RlLng7XHJcbiAgICAgIGRlbGV0ZSBub2RlLngwO1xyXG4gICAgICBkZWxldGUgbm9kZS55O1xyXG4gICAgICBkZWxldGUgbm9kZS55MDtcclxuICAgIH0pOyAgICBcclxuICB9LFxyXG4gIGFkZEZpZWxkOiBmdW5jdGlvbihmaWVsZE5hbWUpXHJcbiAge1xyXG4gICAgdGhpcy50cmVlLmZpZWxkcy5wdXNoKG5ldyBGaWVsZChmaWVsZE5hbWUpKTtcclxuICB9LFxyXG4gIGdldEZpZWxkOiBmdW5jdGlvbihmaWVsZE5hbWUpXHJcbiAge1xyXG4gICAgZm9yKHZhciBpIGluIHRoaXMudHJlZS5maWVsZHMpXHJcbiAgICB7XHJcbiAgICAgIHZhciBmaWVsZCA9IHRoaXMudHJlZS5maWVsZHNbaV07XHJcbiAgICAgIGlmKGZpZWxkLm5hbWUgPT09IGZpZWxkTmFtZSlcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiBmaWVsZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgcmVtb3ZlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICB2YXIgcGFyZW50Tm9kZSA9IHRoaXMuZmluZFBhcmVudChub2RlLmlkKTtcclxuICBcclxuICAgIGlmKHBhcmVudE5vZGUpXHJcbiAgICB7XHJcbiAgICAgIHBhcmVudE5vZGUuY2hpbGRyZW4uc3BsaWNlKHBhcmVudE5vZGUuY2hpbGRyZW4uaW5kZXhPZihub2RlKSwgMSk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHRoaXMudHJlZS5jaGlsZHJlbi5zcGxpY2UodGhpcy50cmVlLmNoaWxkcmVuLmluZGV4T2Yobm9kZSksIDEpOyAgXHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgYWRkTm9kZTogZnVuY3Rpb24obm9kZSwgcGFyZW50Tm9kZSlcclxuICB7XHJcbiAgICBwYXJlbnROb2RlLmNoaWxkcmVuLnB1c2gobm9kZSk7ICAgICAgICAgICAgLy9hZGQgdGhlIG1vdmVkIG5vZGUgdG8gaXQncyBuZXcgcGFyZW50IGluIHRoZSBtb2RlbFxyXG4gICAgcHJvamVjdC5zZXREZXB0aHMocGFyZW50Tm9kZSk7ICAgICAgICAgICAgIC8vc2V0IHRoZSBuZXcgZGVwdGggdmFsdWVzIGZvciB0aGUgbW92ZWQgbm9kZXMgICAgICAgXHJcbiAgfSxcclxuICBzZXREZXB0aHM6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkLCBpKVxyXG4gICAge1xyXG4gICAgICBjaGlsZC5kZXB0aCA9IG5vZGUuZGVwdGggKyAxO1xyXG4gICAgICBcclxuICAgICAgaWYoY2hpbGQuZGVwdGggPiBwcm9qZWN0LnRyZWUubWF4RGVwdGgpIFxyXG4gICAgICB7IFxyXG4gICAgICAgIHByb2plY3QudHJlZS5tYXhEZXB0aCA9IGNoaWxkLmRlcHRoOyBcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcHJvamVjdC5zZXREZXB0aHMoY2hpbGQpO1xyXG4gICAgfSk7XHJcbiAgfSxcclxuICBpbnNlcnROb2RlOiBmdW5jdGlvbihub2RlLCBzb3VyY2VOb2RlKVxyXG4gIHtcclxuICAgIHZhciBwYXJlbnROb2RlID0gdGhpcy5maW5kUGFyZW50KHNvdXJjZU5vZGUuaWQpO1xyXG4gICAgaWYocGFyZW50Tm9kZSlcclxuICAgIHtcclxuICAgICAgcGFyZW50Tm9kZS5jaGlsZHJlbi5zcGxpY2UocGFyZW50Tm9kZS5jaGlsZHJlbi5pbmRleE9mKHNvdXJjZU5vZGUpLCAwLCBub2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgdGhpcy50cmVlLmNoaWxkcmVuLnNwbGljZSh0aGlzLnRyZWUuY2hpbGRyZW4uaW5kZXhPZihzb3VyY2VOb2RlKSwgMCwgbm9kZSk7XHJcbiAgICB9ICAgICBcclxuICB9LFxyXG4gIGNsb25lTm9kZTogZnVuY3Rpb24oc291cmNlTm9kZSlcclxuICB7XHJcbiAgICB2YXIgbmV3Tm9kZSA9ICQuZXh0ZW5kKHRydWUsIHt9LCBzb3VyY2VOb2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jbG9uZSB0aGUgc291cmNlIG5vZGVcclxuICAgIHRoaXMudHJhdmVyc2UodGhpcy5nZXRDaGlsZHJlbiwgZnVuY3Rpb24obm9kZSkgeyBub2RlLmlkID0gcHJvamVjdC50cmVlLm5leHROb2RlSUQrKzsgfSwgbmV3Tm9kZSk7ICAvL2Fzc2lnbiB1bmlxdWUgaWRzIHRvIGVhY2ggbm9kZSBpbiB0aGUgY2xvbmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgcmV0dXJuIG5ld05vZGU7ICAgICBcclxuICB9LFxyXG4gIGV4cGFuZE5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgaWYocHJvamVjdC5pc05vZGVDb2xsYXBzZWQobm9kZSkpXHJcbiAgICB7XHJcbiAgICAgIG5vZGUuY2hpbGRyZW4gPSBub2RlLl9jaGlsZHJlbjtcclxuICAgICAgbm9kZS5fY2hpbGRyZW4gPSBbXTsgXHJcbiAgICB9ICAgXHJcbiAgfSxcclxuICBmdWxseUV4cGFuZE5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcHJvamVjdC5leHBhbmROb2RlKG5vZGUpO1xyXG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7IHByb2plY3QuZnVsbHlFeHBhbmROb2RlKGNoaWxkKTsgfSk7ICAgICAgIFxyXG4gIH0sXHJcbiAgZXhwYW5kVG9MZXZlbDogZnVuY3Rpb24obm9kZSwgbGV2ZWwpXHJcbiAgeyAgICBcclxuICAgIGlmKG5vZGUuZGVwdGggPCBsZXZlbClcclxuICAgIHtcclxuICAgICAgcHJvamVjdC5leHBhbmROb2RlKG5vZGUpO1xyXG4gICAgICBmb3IodmFyIGkgaW4gbm9kZS5jaGlsZHJlbikgeyBwcm9qZWN0LmV4cGFuZFRvTGV2ZWwobm9kZS5jaGlsZHJlbltpXSwgbGV2ZWwpOyB9XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3QuY29sbGFwc2VOb2RlKG5vZGUpO1xyXG4gICAgICBmb3IodmFyIGkgaW4gbm9kZS5fY2hpbGRyZW4pIHsgcHJvamVjdC5leHBhbmRUb0xldmVsKG5vZGUuX2NoaWxkcmVuW2ldLCBsZXZlbCk7IH1cclxuICAgIH1cclxuICB9LCBcclxuICBjb2xsYXBzZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgaWYocHJvamVjdC5pc05vZGVFeHBhbmRlZChub2RlKSlcclxuICAgIHtcclxuICAgICAgbm9kZS5fY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xyXG4gICAgICBub2RlLmNoaWxkcmVuID0gW107XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgZnVsbHlDb2xsYXBzZU5vZGU6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgaWYobm9kZS5jaGlsZHJlbilcclxuICAgIHtcclxuICAgICAgbm9kZS5fY2hpbGRyZW4gPSBub2RlLmNoaWxkcmVuO1xyXG4gICAgICBub2RlLl9jaGlsZHJlbi5mb3JFYWNoKHByb2plY3QuZnVsbHlDb2xsYXBzZU5vZGUpO1xyXG4gICAgICBub2RlLmNoaWxkcmVuID0gW107XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgdG9nZ2xlRXhwYW5zaW9uOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuKSBcclxuICAgIHtcclxuICAgICAgICBub2RlLl9jaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XHJcbiAgICAgICAgbm9kZS5jaGlsZHJlbiA9IFtdO1xyXG4gICAgfSBcclxuICAgIGVsc2UgaWYgKG5vZGUuX2NoaWxkcmVuKSBcclxuICAgIHtcclxuICAgICAgICBub2RlLmNoaWxkcmVuID0gbm9kZS5fY2hpbGRyZW47XHJcbiAgICAgICAgbm9kZS5fY2hpbGRyZW4gPSBbXTtcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBoYXNDaGlsZHJlbjogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gKG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHx8IChub2RlLl9jaGlsZHJlbiAmJiBub2RlLl9jaGlsZHJlbi5sZW5ndGggPT09IDApO1xyXG4gIH0sICBcclxuICBpc05vZGVDaGlsZGxlc3M6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuICghbm9kZS5jaGlsZHJlbiB8fCBub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgJiYgKCFub2RlLl9jaGlsZHJlbiB8fCBub2RlLl9jaGlsZHJlbi5sZW5ndGggPT09IDApO1xyXG4gIH0sXHJcbiAgaXNOb2RlQ29sbGFwc2VkOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiBub2RlLl9jaGlsZHJlbiAmJiBub2RlLl9jaGlsZHJlbi5sZW5ndGggPiAwO1xyXG4gIH0sXHJcbiAgaXNOb2RlRXhwYW5kZWQ6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcmV0dXJuIG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwO1xyXG4gIH0sXHJcbiAgZmluZE5vZGU6IGZ1bmN0aW9uKG5vZGVJRCwgc2VhcmNoTm9kZSlcclxuICB7XHJcbiAgICBpZighc2VhcmNoTm9kZSkgeyBzZWFyY2hOb2RlID0gdGhpcy50cmVlOyB9XHJcbiAgICBcclxuICAgIGlmKHNlYXJjaE5vZGUuaWQgPT09IG5vZGVJRClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHNlYXJjaE5vZGU7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIGZvcih2YXIgaSBpbiBzZWFyY2hOb2RlLmNoaWxkcmVuKVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kTm9kZSA9IHRoaXMuZmluZE5vZGUobm9kZUlELCBzZWFyY2hOb2RlLmNoaWxkcmVuW2ldKTtcclxuICAgICAgICBpZihmb3VuZE5vZGUpIHsgcmV0dXJuIGZvdW5kTm9kZTsgfVxyXG4gICAgICB9XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgZmluZFBhcmVudDogZnVuY3Rpb24obm9kZUlELCBzZWFyY2hOb2RlLCBwYXJlbnQpXHJcbiAge1xyXG4gICAgaWYoIXNlYXJjaE5vZGUpIHsgc2VhcmNoTm9kZSA9IHRoaXMudHJlZTsgfVxyXG4gICAgXHJcbiAgICBpZihzZWFyY2hOb2RlLmlkID09PSBub2RlSUQpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBwYXJlbnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIGZvcih2YXIgaSBpbiBzZWFyY2hOb2RlLmNoaWxkcmVuKVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kUGFyZW50ID0gdGhpcy5maW5kUGFyZW50KG5vZGVJRCwgc2VhcmNoTm9kZS5jaGlsZHJlbltpXSwgc2VhcmNoTm9kZSk7XHJcbiAgICAgICAgaWYoZm91bmRQYXJlbnQpIHsgcmV0dXJuIGZvdW5kUGFyZW50OyB9XHJcbiAgICAgIH1cclxuICAgIH0gICAgXHJcbiAgfSxcclxuICB0cmF2ZXJzZTogZnVuY3Rpb24oY2hpbGRyZW5GbiwgdmlzaXRGbiwgcGFyZW50KVxyXG4gIHtcclxuICAgIGlmICghcGFyZW50KSB7IHBhcmVudCA9IHByb2plY3QudHJlZTsgfVxyXG4gICAgdmlzaXRGbihwYXJlbnQpO1xyXG4gICAgXHJcbiAgICB2YXIgY2hpbGRyZW4gPSBjaGlsZHJlbkZuKHBhcmVudCk7XHJcbiAgICBmb3IgKHZhciBpIGluIGNoaWxkcmVuKSBcclxuICAgIHtcclxuICAgICAgcHJvamVjdC50cmF2ZXJzZShjaGlsZHJlbkZuLCB2aXNpdEZuLCBjaGlsZHJlbltpXSk7XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgdHJhdmVyc2VEZXNjZW5kYW50czogZnVuY3Rpb24oY2hpbGRyZW5GbiwgdmlzaXRGbiwgcGFyZW50KVxyXG4gIHtcclxuICAgIGlmKCFwYXJlbnQpIHsgcGFyZW50ID0gcHJvamVjdC50cmVlOyB9XHJcbiAgICBwYXJlbnQuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkgeyBwcm9qZWN0LnRyYXZlcnNlKGNoaWxkcmVuRm4sIHZpc2l0Rm4sIGNoaWxkKTsgfSk7ICBcclxuICB9LFxyXG4gIGdldENoaWxkcmVuOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiBub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCA/IG5vZGUuY2hpbGRyZW4gOiBudWxsOyAgICBcclxuICB9ICAgXHJcbn07IiwidmFyIHByb2plY3RzID1cclxue1xyXG4gIGluaXQ6IGZ1bmN0aW9uKGZpbmlzaEZuKVxyXG4gIHsgIFx0XHJcbiAgICAkLmFqYXgoeyB0eXBlOiAnR0VUJywgdXJsOiAnYXBpL3Byb2plY3RzJ30pLmRvbmUoZnVuY3Rpb24oZGF0YSkgICAvL3JlYWQgcHJvamVjdHMgZnJvbSB0aGUgc2VydmVyXHJcbiAgICB7IFxyXG4gICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICBmaW5pc2hGbihkYXRhLnByb2plY3RzKTtcclxuICAgIH0pOyAgICAgXHJcbiAgfSxcclxuICBjcmVhdGVOZXdQcm9qZWN0OiBmdW5jdGlvbihuZXdQcm9qZWN0TmFtZSlcclxuICB7XHJcbiAgXHQkLmFqYXgoeyB0eXBlOiAnUE9TVCcsIHVybDogJy9hcGkvYWRkUHJvamVjdD9wcm9qZWN0TmFtZT0nICsgbmV3UHJvamVjdE5hbWUgfSk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgbmV3IHByb2plY3QgdG8gdGhlIHByb2plY3RzIGRvY3VtZW50IGluIHRoZSBkYXRhYmFzZVxyXG4gIFx0XHJcbiAgICBwcm9qZWN0LnRyZWUgPSB7IFwicHJvamVjdElEXCI6IHByb2plY3QubmV4dFByb2plY3RJRCwgXCJwcm9qZWN0TmFtZVwiOiBuZXdQcm9qZWN0TmFtZSwgXCJuYW1lXCI6IG5ld1Byb2plY3ROYW1lLCBcInZlcnNpb25cIjogMSwgXCJuZXh0Tm9kZUlEXCI6IDMsIFwiZGVwdGhcIjogMCwgXCJpZFwiOiAxLCBcImZpZWxkc1wiOiBbXSwgXCJjaGlsZHJlblwiOiBbeyBcImlkXCI6IDIsIFwibmFtZVwiOiBuZXdQcm9qZWN0TmFtZSwgXCJkZXB0aFwiOiAxLCBcImNoaWxkcmVuXCI6IFtdIH1dIH07XHJcbiAgXHRwcm9qZWN0LnNhdmVUb0RhdGFiYXNlKCk7ICBcclxuICB9LFxyXG4gIG9wZW5Qcm9qZWN0OiBmdW5jdGlvbihwcm9qZWN0SUQsIGZpbmlzaEZuKVxyXG4gIHtcclxuICAgICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvdHJlZT9wcm9qZWN0SUQ9JyArIHByb2plY3RJRCB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpICAgICAgICAgICAgICAgLy9yZWFkIHRyZWUgZm9yIHRoZSBzZWxlY3RlZCBwcm9qZWN0IGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICB7XHJcbiAgICAgIGZpbmlzaEZuKGRhdGEpO1xyXG4gICAgfSk7ICAgICBcclxuICB9LFxyXG4gIG9wZW5Qcm9qZWN0VmVyc2lvbjogZnVuY3Rpb24ocHJvamVjdElELCB2ZXJzaW9uLCBmaW5pc2hGbilcclxuICB7XHJcbiAgICAkLmFqYXgoeyB0eXBlOiAnR0VUJywgdXJsOiAnYXBpL3ZlcnNpb24/cHJvamVjdElEPScgKyBwcm9qZWN0SUQgKyAnJnZlcnNpb249JyArIHZlcnNpb24gfSkuZG9uZShmdW5jdGlvbihkYXRhKSAgICAgICAgICAgICAgIC8vcmVhZCB0cmVlIGZvciB0aGUgc2VsZWN0ZWQgcHJvamVjdCB2ZXJzaW9uIGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICB7XHJcbiAgICAgIGZpbmlzaEZuKGRhdGEpO1xyXG4gICAgfSk7ICAgICBcclxuICB9IFxyXG59OyIsInZhciBET1dOX0FSUk9XX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2Rvd24tYXJyb3cucG5nJztcclxudmFyIENIRUNLX01BUktfSU1BR0VfUEFUSCA9ICdpbWFnZXMvY2hlY2ttYXJrLnBuZyc7XHJcbnZhciBCTEFOS19NQVJLX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2JsYW5rbWFyay5wbmcnO1xyXG5cclxudmFyIEVOVEVSX0tFWSA9IDEzO1xyXG5cclxudmFyIEtFWV9VUF9BUlJPVyA9IDM4O1xyXG52YXIgS0VZX0RPV05fQVJST1cgPSA0MDtcclxudmFyIEtFWV9MRUZUX0FSUk9XID0gMzc7XHJcbnZhciBLRVlfUklHSFRfQVJST1cgPSAzOTtcclxuXHJcbnZhciBERUZBVUxUX05PREVfSU5QVVRfV0lEVEggPSAzOTA7XHJcblxyXG52YXIgU1BSRUFEU0hFRVRfVklFVyA9ICcwJztcclxudmFyIFRSRUVfVklFVyA9ICcxJztcclxudmFyIFdFSUdIVEVEX1RSRUVfVklFVyA9ICcyJztcclxudmFyIENJUkNMRV9WSUVXID0gJzMnOyIsImZ1bmN0aW9uIGRlYnVnKCkge31cclxuXHJcbmRlYnVnLnByaW50ID0gZnVuY3Rpb24obylcclxue1xyXG4gIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KG8sIG51bGwsICdcXHQnKSk7ICBcclxufTtcclxuXHJcbmRlYnVnLnByaW50VHJlZSA9IGZ1bmN0aW9uKClcclxue1xyXG4gIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHByb2plY3QudHJlZSwgbnVsbCwgJ1xcdCcpKTtcclxufTsiLCJ2YXIgY2lyY2xlVmlldyA9XHJcbntcclxuICBkZXN0cm95OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI2NpcmNsZVZpZXcnKS5yZW1vdmUoKTtcclxuICB9LFxyXG4gIGRpc3BsYXk6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiY2lyY2xlVmlld1wiPjwvZGl2PicpO1xyXG4gICAgXHJcbiAgICB2YXIgbWFyZ2luID0gMjAsXHJcbiAgICAgICAgZGlhbWV0ZXIgPSA5NjA7XHJcbiAgICBcclxuICAgIHZhciBjb2xvciA9IGQzLnNjYWxlLmxpbmVhcigpXHJcbiAgICAgICAgLmRvbWFpbihbLTEsIDVdKVxyXG4gICAgICAgIC5yYW5nZShbXCJoc2woMTUyLDgwJSw4MCUpXCIsIFwiaHNsKDIyOCwzMCUsNDAlKVwiXSlcclxuICAgICAgICAuaW50ZXJwb2xhdGUoZDMuaW50ZXJwb2xhdGVIY2wpO1xyXG4gICAgXHJcbiAgICB2YXIgcGFjayA9IGQzLmxheW91dC5wYWNrKClcclxuICAgICAgICAucGFkZGluZygyKVxyXG4gICAgICAgIC5zaXplKFtkaWFtZXRlciAtIG1hcmdpbiwgZGlhbWV0ZXIgLSBtYXJnaW5dKVxyXG4gICAgICAgIC52YWx1ZShmdW5jdGlvbihkKSB7IHJldHVybiBNYXRoLlBJICogZC52YWx1ZXNbJ0EnXSAqIGQudmFsdWVzWydBJ10gLyA0OyB9KTtcclxuICAgIFxyXG4gICAgdmFyIHN2ZyA9IGQzLnNlbGVjdChcIiNjaXJjbGVWaWV3XCIpLmFwcGVuZChcInN2Z1wiKVxyXG4gICAgICAgIC5hdHRyKFwid2lkdGhcIiwgZGlhbWV0ZXIpXHJcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgZGlhbWV0ZXIpXHJcbiAgICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkaWFtZXRlciAvIDIgKyBcIixcIiArIGRpYW1ldGVyIC8gMiArIFwiKVwiKTtcclxuICAgIFxyXG4gICAgdmFyIHJvb3QgPSBwcm9qZWN0LnRyZWU7XHJcblxyXG4gICAgXHJcbiAgICAgIHZhciBmb2N1cyA9IHJvb3QsXHJcbiAgICAgICAgICBub2RlcyA9IHBhY2subm9kZXMocm9vdCksXHJcbiAgICAgICAgICB2aWV3O1xyXG4gICAgXHJcbiAgICAgIHZhciBjaXJjbGUgPSBzdmcuc2VsZWN0QWxsKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgICAuZGF0YShub2RlcylcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5wYXJlbnQgPyBkLmNoaWxkcmVuID8gXCJub2RlXCIgOiBcIm5vZGUgbm9kZS0tbGVhZlwiIDogXCJub2RlIG5vZGUtLXJvb3RcIjsgfSlcclxuICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jaGlsZHJlbiA/IGNvbG9yKGQuZGVwdGgpIDogbnVsbDsgfSlcclxuICAgICAgICAgIC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGQpIHsgaWYgKGZvY3VzICE9PSBkKSB6b29tKGQpLCBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgfSk7XHJcbiAgICBcclxuICAgICAgdmFyIHRleHQgPSBzdmcuc2VsZWN0QWxsKFwidGV4dFwiKVxyXG4gICAgICAgICAgLmRhdGEobm9kZXMpXHJcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwidGV4dFwiKVxyXG4gICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxhYmVsXCIpXHJcbiAgICAgICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5wYXJlbnQgPT09IHJvb3QgPyAxIDogMDsgfSlcclxuICAgICAgICAgIC5zdHlsZShcImRpc3BsYXlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5wYXJlbnQgPT09IHJvb3QgPyBudWxsIDogXCJub25lXCI7IH0pXHJcbiAgICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLm5hbWU7IH0pO1xyXG4gICAgXHJcbiAgICAgIHZhciBub2RlID0gc3ZnLnNlbGVjdEFsbChcImNpcmNsZSx0ZXh0XCIpO1xyXG4gICAgXHJcbiAgICAgIGQzLnNlbGVjdChcImJvZHlcIilcclxuICAgICAgICAgIC5zdHlsZShcImJhY2tncm91bmRcIiwgY29sb3IoLTEpKVxyXG4gICAgICAgICAgLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7IHpvb20ocm9vdCk7IH0pO1xyXG4gICAgXHJcbiAgICAgIHpvb21Ubyhbcm9vdC54LCByb290LnksIHJvb3QuciAqIDIgKyBtYXJnaW5dKTtcclxuICAgIFxyXG4gICAgICBmdW5jdGlvbiB6b29tKGQpIHtcclxuICAgICAgICB2YXIgZm9jdXMwID0gZm9jdXM7IGZvY3VzID0gZDtcclxuICAgIFxyXG4gICAgICAgIHZhciB0cmFuc2l0aW9uID0gZDMudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgIC5kdXJhdGlvbihkMy5ldmVudC5hbHRLZXkgPyA3NTAwIDogNzUwKVxyXG4gICAgICAgICAgICAudHdlZW4oXCJ6b29tXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICB2YXIgaSA9IGQzLmludGVycG9sYXRlWm9vbSh2aWV3LCBbZm9jdXMueCwgZm9jdXMueSwgZm9jdXMuciAqIDIgKyBtYXJnaW5dKTtcclxuICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgeyB6b29tVG8oaSh0KSk7IH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgdHJhbnNpdGlvbi5zZWxlY3RBbGwoXCJ0ZXh0XCIpXHJcbiAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQucGFyZW50ID09PSBmb2N1cyB8fCB0aGlzLnN0eWxlLmRpc3BsYXkgPT09IFwiaW5saW5lXCI7IH0pXHJcbiAgICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnBhcmVudCA9PT0gZm9jdXMgPyAxIDogMDsgfSlcclxuICAgICAgICAgICAgLmVhY2goXCJzdGFydFwiLCBmdW5jdGlvbihkKSB7IGlmIChkLnBhcmVudCA9PT0gZm9jdXMpIHRoaXMuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lXCI7IH0pXHJcbiAgICAgICAgICAgIC5lYWNoKFwiZW5kXCIsIGZ1bmN0aW9uKGQpIHsgaWYgKGQucGFyZW50ICE9PSBmb2N1cykgdGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7IH0pO1xyXG4gICAgICB9XHJcbiAgICBcclxuICAgICAgZnVuY3Rpb24gem9vbVRvKHYpIHtcclxuICAgICAgICB2YXIgayA9IGRpYW1ldGVyIC8gdlsyXTsgdmlldyA9IHY7XHJcbiAgICAgICAgbm9kZS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgKGQueCAtIHZbMF0pICogayArIFwiLFwiICsgKGQueSAtIHZbMV0pICogayArIFwiKVwiOyB9KTtcclxuICAgICAgICBjaXJjbGUuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5yICogazsgfSk7XHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgZDMuc2VsZWN0KHNlbGYuZnJhbWVFbGVtZW50KS5zdHlsZShcImhlaWdodFwiLCBkaWFtZXRlciArIFwicHhcIik7ICAgIFxyXG4gIH1cclxufTsiLCJ2YXIgZXhwYW5kZXJTZWxlY3RvciA9XHJcbntcclxuICBpbml0OiBmdW5jdGlvbihudW1MZXZlbHMpXHJcbiAge1xyXG4gICAgJCgnI2V4cGFuZGVyQ29udGFpbmVyJykuaHRtbChleHBhbmRlclNlbGVjdG9yLmdldE1hcmt1cChudW1MZXZlbHMpKTtcclxuICAgICQoXCIjZXhwYW5kZXJTZWxlY3RvclwiKS5jaGFuZ2UoZXhwYW5kZXJTZWxlY3Rvci5oYW5kbGUpO1xyXG4gIH0sXHJcbiAgaGFuZGxlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgdmFyIGxldmVsID0gcGFyc2VJbnQoJCgnI2V4cGFuZGVyU2VsZWN0b3InKS52YWwoKSk7XHJcblxyXG4gICAgaWYobGV2ZWwgPiAwKVxyXG4gICAge1xyXG4gICAgICBobXMuZXhwYW5kVG9MZXZlbChsZXZlbCk7ICBcclxuICAgIH1cclxuICB9LCAgXHJcbiAgZ2V0TWFya3VwOiBmdW5jdGlvbihudW1MZXZlbHMpXHJcbiAge1xyXG4gICAgdmFyIG1hcmt1cCA9ICc8ZGl2IGlkPVwiZXhwYW5kZXJTZWxlY3RDb250YWluZXJcIj4nXHJcbiAgICArICc8c2VsZWN0IGlkPVwiZXhwYW5kZXJTZWxlY3RvclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+J1xyXG4gICAgKyAnPG9wdGlvbiB2YWx1ZT1cIjBcIj5FeHBhbmQvQ29sbGFwc2UgdG8gTGV2ZWw8L29wdGlvbj4nO1xyXG4gICAgXHJcbiAgICBmb3IodmFyIGkgPSAxOyBpIDwgbnVtTGV2ZWxzKzE7IGkrKylcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIGkgKyAnXCI+JyArIGkgKyAnPC9vcHRpb24+JztcclxuICAgIH1cclxuICAgIFxyXG4gICAgbWFya3VwICs9ICc8L3NlbGVjdD4nXHJcbiAgICArICc8aW5wdXQgaWQ9XCJwcm9qZWN0QWN0aW9uSW5wdXRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPjwvaW5wdXQ+J1xyXG4gICAgKyAnPC9kaXY+JztcclxuICAgIHJldHVybiBtYXJrdXA7IFxyXG4gIH1cclxufTsiLCJ2YXIgZmllbGRNZW51VmlldyA9IFxyXG57XHJcbiAgcmVuZGVyOiBmdW5jdGlvbihmaWVsZE1lbnUsIHgsIHkpXHJcbiAge1xyXG4gICAgdmFyIG1hcmt1cCA9ICc8ZGl2IGlkPVwiZmllbGRNZW51XCIgc3R5bGU9XCJsZWZ0OicgKyAoeC0xMCkgKyAncHg7dG9wOicgKyAoeS0xMCkgKyAncHg7XCI+JztcclxuICAgIFxyXG4gICAgbWFya3VwICs9IHRoaXMucmVuZGVyTWVudShmaWVsZE1lbnUpO1xyXG4gICAgXHJcbiAgICBtYXJrdXAgKz0gJzwvZGl2Pic7XHJcbiAgICBcclxuICAgICQoJ2JvZHknKS5hcHBlbmQoJChtYXJrdXApKTtcclxuICAgICQoJyNmaWVsZE1lbnUnKS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCkgeyAkKCcjZmllbGRNZW51JykucmVtb3ZlKCk7IH0pOyAgXHJcbiAgfSxcclxuICByZW5kZXJNZW51OiBmdW5jdGlvbihtZW51KVxyXG4gIHtcclxuICAgIHZhciBtYXJrdXAgPSAnPHVsPic7XHJcbiAgICBcclxuICAgIG1lbnUuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihtZW51SXRlbSlcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9ICc8bGkgb25jbGljaz1cImZpZWxkTWVudUNvbnRyb2xsZXIuaGFuZGxlQ2xpY2soJyArIG1lbnVJdGVtLmlkICsgJyk7XCI+JztcclxuICBcclxuICAgICAgdmFyIGNoZWNrTWFya0NsYXNzID0gJ3VuY2hlY2tlZEZpZWxkTWVudUl0ZW0nO1xyXG4gICAgICBpZihtZW51SXRlbS5maWVsZCAmJiBtZW51SXRlbS5jaGVja2VkKVxyXG4gICAgICB7XHJcbiAgICAgICAgY2hlY2tNYXJrQ2xhc3MgPSAnY2hlY2tlZEZpZWxkTWVudUl0ZW0nO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBtYXJrdXAgKz0gJzxpbWcgaWQ9XCJGaWVsZE1lbnVJdGVtJyArIG1lbnVJdGVtLmlkICsgJ1wiIHNyYz1cIicgKyBDSEVDS19NQVJLX0lNQUdFX1BBVEggKyAnXCIgY2xhc3M9XCInICsgY2hlY2tNYXJrQ2xhc3MgKyAnXCIvPic7XHJcbiAgICAgIG1hcmt1cCArPSBtZW51SXRlbS5kaXNwbGF5O1xyXG4gICAgICBcclxuICAgICAgaWYobWVudUl0ZW0uaXRlbXMgJiYgbWVudUl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICAgICAge1xyXG4gICAgICAgIG1hcmt1cCArPSAnPGRpdiBjbGFzcz1cImFycm93UmlnaHRcIj48L2Rpdj4nO1xyXG4gICAgICAgIG1hcmt1cCArPSBmaWVsZE1lbnVWaWV3LnJlbmRlck1lbnUobWVudUl0ZW0pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBtYXJrdXAgKz0gJzwvbGk+JzsgICAgICBcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICByZXR1cm4gbWFya3VwICsgJzwvdWw+JzsgICAgXHJcbiAgfSxcclxuICBzZXRDaGVja21hcmtzOiBmdW5jdGlvbihtZW51SXRlbUlELCBzaWJsaW5ncylcclxuICB7XHJcbiAgICBzaWJsaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKHNpYmxpbmcpIHsgJCgnI0ZpZWxkTWVudUl0ZW0nICsgc2libGluZy5pZCkucmVtb3ZlQ2xhc3MoJ2NoZWNrZWRGaWVsZE1lbnVJdGVtJykuYWRkQ2xhc3MoJ3VuY2hlY2tlZEZpZWxkTWVudUl0ZW0nKTsgfSk7ICAvL2NsZWFyIHRoZSBjaGVja21hcmtzIGZvciBhbGwgaXRlbSBvbiB0aGUgc2FtZSBtZW51IGxldmVsXHJcbiAgXHJcbiAgICAkKCcjRmllbGRNZW51SXRlbScgKyBtZW51SXRlbUlEKS5yZW1vdmVDbGFzcygndW5jaGVja2VkRmllbGRNZW51SXRlbScpLmFkZENsYXNzKCdjaGVja2VkRmllbGRNZW51SXRlbScpOyAgICAgIFxyXG4gIH1cclxufTsiLCJ2YXIgaGVhZGVyVmlldyA9IFxyXG57XHJcbiAgcmVuZGVyOiBmdW5jdGlvbihwcm9qZWN0cylcclxuICB7XHJcbiAgICB2YXIgbWFya3VwID0gJzxzZWxlY3QgaWQ9XCJwcm9qZWN0U2VsZWN0b3JcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPicgK1xyXG4gICAgJzxvcHRpb24gaWQ9XCJzZWxlY3RQcm9qZWN0T3B0aW9uXCIgdmFsdWU9XCIwXCI+U2VsZWN0IFByb2plY3QuLi48L29wdGlvbj4nO1xyXG4gIFxyXG4gICAgcHJvamVjdHMuZm9yRWFjaChmdW5jdGlvbihwcm9qZWN0KVxyXG4gICAge1xyXG4gICAgICBtYXJrdXAgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgcHJvamVjdC5pZCArICdcIj4nICsgcHJvamVjdC5uYW1lICsgJzwvb3B0aW9uPic7XHJcbiAgICB9KTtcclxuICBcclxuICAgIG1hcmt1cCArPSAnPG9wdGlvbiBpZD1cIm5ld1Byb2plY3RPcHRpb25cIiB2YWx1ZT1cIi0xXCI+Q3JlYXRlIE5ldyBQcm9qZWN0Li4uPC9vcHRpb24+PC9zZWxlY3Q+J1xyXG4gICAgKyAnPGlucHV0IGlkPVwiZWRpdE5ld1Byb2plY3ROYW1lSW5wdXRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPjwvaW5wdXQ+JztcclxuICAgIC8vbWFya3VwICs9ICc8YSBocmVmPVwiI1wiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgaWQ9XCJzYXZlLWZpbGUtYnV0dG9uXCIgb25jbGljaz1cInNhdmVMb2NhbGx5KClcIj5TYXZlIGFzIEZpbGU8L2E+JzsgICAgXHJcbiAgICBcclxuICAgICQoJyNoZWFkZXInKS5odG1sKG1hcmt1cCk7XHJcbiAgICBcclxuICAgIC8vZXZlbnQgaGFuZGxlcnNcclxuICAgICQoJyNwcm9qZWN0U2VsZWN0b3InKS5jaGFuZ2UoZnVuY3Rpb24oKSB7IGhlYWRlclZpZXcuc2VsZWN0UHJvamVjdCgkKHRoaXMpKTsgfSk7XHJcbiAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS5rZXl1cChmdW5jdGlvbihlKSB7IGhlYWRlclZpZXcuY3JlYXRlTmV3UHJvamVjdChlKTsgfSk7XHJcbiAgfSxcclxuICByZWZyZXNoOiBmdW5jdGlvbih2ZXJzaW9ucylcclxuICB7XHJcbiAgICAkKCcjdmVyc2lvblNlbGVjdG9yJykucmVtb3ZlKCk7XHJcbiAgICAkKCcjdmlld1NlbGVjdG9yJykucmVtb3ZlKCk7XHJcbiAgICAkKCcjc2F2ZS1kYXRhYmFzZS1idXR0b24nKS5yZW1vdmUoKTtcclxuICAgIFxyXG4gICAgdmFyIHZlcnNpb25TZWxlY3RvciA9ICc8c2VsZWN0IGlkPVwidmVyc2lvblNlbGVjdG9yXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4nO1xyXG4gICAgdmVyc2lvbnMuZm9yRWFjaChmdW5jdGlvbih2ZXJzaW9uKSBcclxuICAgIHsgXHJcbiAgICAgIHZlcnNpb25TZWxlY3RvciArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyB2ZXJzaW9uLnZlcnNpb24gKyAnXCI+JyArIHZlcnNpb24udmVyc2lvbiArICc8L29wdGlvbj4nOyAgIFxyXG4gICAgfSk7XHJcbiAgICB2ZXJzaW9uU2VsZWN0b3IgKz0gJzwvc2VsZWN0Pic7XHJcbiAgICAkKCcjaGVhZGVyJykuYXBwZW5kKHZlcnNpb25TZWxlY3Rvcik7XHJcbiAgICBcclxuICAgICQoJyNoZWFkZXInKS5hcHBlbmQoJzxhIGhyZWY9XCIjXCIgaWQ9XCJzYXZlLWRhdGFiYXNlLWJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCI+U2F2ZSB0byBEYXRhYmFzZTwvYT4nKTtcclxuICAgIFxyXG4gICAgdmFyIHZpZXdTZWxlY3RvciA9ICc8c2VsZWN0IGlkPVwidmlld1NlbGVjdG9yXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4nICtcclxuICAgICc8b3B0aW9uIHZhbHVlPVwiMFwiPlNwcmVhZCBTaGVldDwvb3B0aW9uPicgK1xyXG4gICAgJzxvcHRpb24gdmFsdWU9XCIxXCI+VHJlZTwvb3B0aW9uPicgK1xyXG4gICAgJzxvcHRpb24gdmFsdWU9XCIyXCI+V2VpZ2h0ZWQgVHJlZTwvb3B0aW9uPicgK1xyXG4gICAgJzxvcHRpb24gdmFsdWU9XCIzXCI+Q2lyY2xlIFBhY2tpbmc8L29wdGlvbj4nICtcclxuICAgICc8L3NlbGVjdD4nO1xyXG4gICAgXHJcbiAgICAkKCcjaGVhZGVyJykuYXBwZW5kKHZpZXdTZWxlY3Rvcik7XHJcbiAgICAkKCcjc2F2ZS1kYXRhYmFzZS1idXR0b24nKS5jbGljayhmdW5jdGlvbigpIHsgaG1zLnNhdmVUb0RhdGFiYXNlKCk7IH0pO1xyXG4gICAgJCgnI3ZpZXdTZWxlY3RvcicpLmNoYW5nZShmdW5jdGlvbigpIHsgaG1zLnNlbGVjdFZpZXcoJCh0aGlzKS52YWwoKSk7IH0pO1xyXG4gICAgJCgnI3ZlcnNpb25TZWxlY3RvcicpLmNoYW5nZShmdW5jdGlvbigpIHsgaG1zLnNlbGVjdFZlcnNpb24oJCh0aGlzKS52YWwoKSk7IH0pOyAgICAgXHJcbiAgfSxcclxuICBzZWxlY3RlZFZpZXc6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gJCgnI3ZpZXdTZWxlY3RvcicpLnZhbCgpO1xyXG4gIH0sXHJcbiAgc2VsZWN0UHJvamVjdDogZnVuY3Rpb24ocHJvamVjdFNlbGVjdG9yKVxyXG4gIHtcclxuICAgIGlmKHByb2plY3RTZWxlY3Rvci5maW5kKFwiOnNlbGVjdGVkXCIpLmF0dHIoJ2lkJykgPT09IFwibmV3UHJvamVjdE9wdGlvblwiKVxyXG4gICAge1xyXG4gICAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS52YWwoXCJUeXBlIE5ldyBQcm9qZWN0IE5hbWUgYW5kIFByZXNzIEVudGVyIHRvIENyZWF0ZVwiKTtcclxuICAgICAgJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0Jykuc2hvdygpLmZvY3VzKCkuc2VsZWN0KCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgICQoJyNzZWxlY3RQcm9qZWN0T3B0aW9uJykucmVtb3ZlKCk7ICAgICAvL3JlbW92ZSB0aGUgc2VsZWN0IHByb2plY3Qgb3B0aW9uLCBvbmNlIHRoZSB1c2VyIHNlbGVjdHMgYSBwcm9qZWN0ICAgICAgXHJcbiAgICAgIGhtcy5vcGVuUHJvamVjdChwcm9qZWN0U2VsZWN0b3IudmFsKCkpO1xyXG4gICAgfSAgICAgICBcclxuICB9LFxyXG4gIGNyZWF0ZU5ld1Byb2plY3Q6IGZ1bmN0aW9uKGUpXHJcbiAge1xyXG4gICAgaWYoZS5rZXlDb2RlID09IEVOVEVSX0tFWSlcclxuICAgIHtcclxuICAgIFx0JCgnI3NlbGVjdFByb2plY3RPcHRpb24nKS5yZW1vdmUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSB0aGUgc2VsZWN0IHByb2plY3Qgb3B0aW9uLCBvbmNlIHRoZSB1c2VyIHNlbGVjdHMgYSBwcm9qZWN0IFxyXG4gICAgXHRcclxuICAgIFx0dmFyIG5ld1Byb2plY3ROYW1lID0gJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0JykudmFsKCk7XHJcbiAgICBcdCQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLmhpZGUoKTtcclxuICAgIFx0XHJcbiAgICBcdC8vYWRkIGFuIG9wdGlvbiBmb3IgdGhlIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBsaXN0LCBzZWxlY3QgdGhhdCBvcHRpb25cclxuICAgIFx0dmFyIG5ld1Byb2plY3RJRCA9IGhtcy5uZXh0UHJvamVjdElEKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBuZWVkIHRvIGdldCB0aGlzIGZyb20gdGhlIGRhdGFiYXNlIHRvIGluc3VyZSB3ZSBnZXQgdGhlIGNvcnJlY3QgaWRcclxuICAgIFx0dmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICBcdG9wdGlvbi50ZXh0ID0gbmV3UHJvamVjdE5hbWU7XHJcbiAgICBcdG9wdGlvbi52YWx1ZSA9IG5ld1Byb2plY3RJRC50b1N0cmluZygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIFx0JChvcHRpb24pLmluc2VydEJlZm9yZSgnI3Byb2plY3RTZWxlY3RvciBvcHRpb246bnRoLWNoaWxkKCcgKyAkKCcjcHJvamVjdFNlbGVjdG9yJykubGVuZ3RoICsgJyknKTtcclxuICAgIFx0JCgnI3Byb2plY3RTZWxlY3RvcicpLnZhbChuZXdQcm9qZWN0SUQpO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICBobXMuY3JlYXRlTmV3UHJvamVjdChuZXdQcm9qZWN0TmFtZSk7XHJcbiAgICB9ICAgIFxyXG4gIH1cclxufTsiLCJ2YXIgcHJvamVjdEFjdGlvbiA9XHJcbntcclxuICBpbml0OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI3Byb2plY3QtYWN0aW9uLWNvbnRhaW5lcicpLmh0bWwocHJvamVjdEFjdGlvbi5tYXJrdXAoKSk7XHJcbiAgICBcclxuICAgICQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS5rZXl1cChmdW5jdGlvbihlKVxyXG4gICAge1xyXG4gICAgICBpZihlLmtleUNvZGUgPT0gRU5URVJfS0VZKVxyXG4gICAgICB7XHJcbiAgICAgICAgcHJvamVjdEFjdGlvbi5lbnRlclByZXNzZWQoKTtcclxuICAgICAgfVxyXG4gICAgfSk7IFxyXG4gICAgXHJcbiAgICAkKFwiI3Byb2plY3RBY3Rpb25TZWxlY3RvclwiKS5jaGFuZ2UocHJvamVjdEFjdGlvbi5oYW5kbGUpO1xyXG4gIH0sXHJcbiAgaGFuZGxlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gIFx0aWYoJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgpID09ICdhZGRGaWVsZCcpXHJcbiAgXHR7XHJcbiAgICAgICQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS52YWwoXCJUeXBlIE5ldyBGaWVsZCBOYW1lIGFuZCBQcmVzcyBFbnRlciB0byBDcmVhdGVcIik7XHJcbiAgXHRcdCQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS5zaG93KCkuZm9jdXMoKS5zZWxlY3QoKTtcclxuICBcdH1cdFxyXG4gIH0sXHJcbiAgZW50ZXJQcmVzc2VkOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gIFx0aWYoJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgpID09ICdhZGRGaWVsZCcpXHJcbiAgXHR7XHJcbiAgICAgIHNwcmVhZFNoZWV0LmFkZEZpZWxkKCQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS52YWwoKSk7XHRcclxuICAgICAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLmhpZGUoKTtcclxuICAgICAgJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgnYmxhbmsnKTtcclxuICBcdH1cclxuICB9LFxyXG4gIG1hcmt1cDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHJldHVybiAnPGRpdiBpZD1cInByb2plY3RBY3Rpb25TZWxlY3RvckNvbnRhaW5lclwiPidcclxuICAgICsgJzxzZWxlY3QgaWQ9XCJwcm9qZWN0QWN0aW9uU2VsZWN0b3JcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPidcclxuICAgICsgJzxvcHRpb24gdmFsdWU9XCJibGFua1wiPjwvb3B0aW9uPidcclxuICAgICsgJzxvcHRpb24gdmFsdWU9XCJhZGRGaWVsZFwiPkFkZCBGaWVsZDwvb3B0aW9uPidcclxuICAgICsgJzwvc2VsZWN0PidcclxuICAgICsgJzxpbnB1dCBpZD1cInByb2plY3RBY3Rpb25JbnB1dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+PC9pbnB1dD4nXHJcbiAgICArICc8L2Rpdj4nOyBcclxuICB9XHJcbn07IiwidmFyIHNwcmVhZFNoZWV0S2V5SGFuZGxlciA9XHJcbntcclxuICBjaGVja0tleTogZnVuY3Rpb24oZSkgXHJcbiAge1xyXG4gICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xyXG4gIFxyXG4gICAgaWYgKGUua2V5Q29kZSA9PSBLRVlfVVBfQVJST1cpIFxyXG4gICAge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciBwcmV2Um93ID0gJChzcHJlYWRTaGVldEtleUhhbmRsZXIuZmluZEFuY2VzdG9yKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0cicpKS5wcmV2KClbMF07XHJcbiAgICAgIFxyXG4gICAgICBpZihwcmV2Um93KSB7ICQoJyMnICsgc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmdldE5leHRFbGVtZW50SUQocHJldlJvdykpLmZvY3VzKCk7IH0gICAgICBcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfRE9XTl9BUlJPVykgXHJcbiAgICB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdmFyIG5leHRSb3cgPSAkKHNwcmVhZFNoZWV0S2V5SGFuZGxlci5maW5kQW5jZXN0b3IoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RyJykpLm5leHQoKVswXTtcclxuICAgICAgXHJcbiAgICAgIGlmKG5leHRSb3cpIHsgJCgnIycgKyBzcHJlYWRTaGVldEtleUhhbmRsZXIuZ2V0TmV4dEVsZW1lbnRJRChuZXh0Um93KSkuZm9jdXMoKTsgfSAgICAgICBcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfUklHSFRfQVJST1cpIFxyXG4gICAge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICQoc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmZpbmRBbmNlc3Rvcihkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndGQnKSkubmV4dCgpLmZpbmQoJ2lucHV0JykuZm9jdXMoKTsgIFxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZS5rZXlDb2RlID09IEtFWV9MRUZUX0FSUk9XKSBcclxuICAgIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0S2V5SGFuZGxlci5maW5kQW5jZXN0b3IoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RkJykpLnByZXYoKS5maW5kKCdpbnB1dCcpLmZvY3VzKCk7ICBcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBnZXROZXh0RWxlbWVudElEOiBmdW5jdGlvbihuZXdSb3cpXHJcbiAge1xyXG4gICAgdmFyIGlkID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pZDsgIFxyXG4gICAgaWYoaWQuaW5kZXhPZignbm9kZUlucHV0JykgPiAtMSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuICdub2RlSW5wdXQnICsgbmV3Um93LmlkLnJlcGxhY2UoJ3Jvd2lkJywnJyk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHZhciBjbGFzc2VzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuICBcclxuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgYyA9IGNsYXNzZXNbaV07XHJcbiAgXHJcbiAgICAgICAgaWYoYy5pbmRleE9mKCdmaWVsZElucHV0JykgPiAtMSAmJiBjICE9ICdmaWVsZElucHV0JylcclxuICAgICAgICB7XHJcbiAgICAgICAgICB2YXIgZmllbGROYW1lID0gYy5yZXBsYWNlKCdmaWVsZElucHV0JywgJycpO1xyXG4gICAgICAgICAgcmV0dXJuIGZpZWxkTmFtZSArIG5ld1Jvdy5pZC5yZXBsYWNlKCdkYXRhcm93aWQnLCcnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gICBcclxuICB9LFxyXG4gIGZpbmRBbmNlc3RvcjogZnVuY3Rpb24oZWwsIHRhZ05hbWUpIFxyXG4gIHtcclxuICAgIHRhZ05hbWUgPSB0YWdOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgXHJcbiAgICB3aGlsZSAoZWwgJiYgZWwucGFyZW50Tm9kZSkgXHJcbiAgICB7XHJcbiAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcclxuICAgICAgaWYgKGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSB0YWdOYW1lKSB7IHJldHVybiBlbDsgfVxyXG4gICAgfVxyXG4gIH1cclxufTsiLCIvL1RPRE86IGFkZCBjb21tZW50c1xyXG52YXIgc3ByZWFkU2hlZXRWaWV3ID0gXHJcbntcclxuICByZW5kZXI6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmNoZWNrS2V5KTtcclxuICAgIFxyXG4gICAgJCgnI3NwcmVhZFNoZWV0VmlldycpLnJlbW92ZSgpO1xyXG4gICAgJCgnYm9keScpLmFwcGVuZCh0aGlzLnNwcmVhZFNoZWV0TWFya3VwKCkpO1xyXG4gICAgXHJcbiAgICBwcm9qZWN0QWN0aW9uLmluaXQoKTtcclxuICAgIHRoaXMucmVuZGVyRXhwYW5kZXIoKTtcclxuICAgIHRoaXMucmVuZGVyRmllbGRzUm93KCk7XHJcbiAgICB0aGlzLnJlbmRlckRhdGFUYWJsZSgpO1xyXG4gICAgdGhpcy5yZW5kZXJOb2RlQ29sdW1uKCk7XHJcbiAgfSxcclxuICBkZXN0cm95OiBmdW5jdGlvbigpIFxyXG4gIHsgXHJcbiAgICAkKCcjc3ByZWFkU2hlZXRWaWV3JykucmVtb3ZlKCk7XHJcbiAgICAkKGRvY3VtZW50KS5vZmYoXCJrZXlkb3duXCIpOyBcclxuICB9LFxyXG4gIHNwcmVhZFNoZWV0TWFya3VwOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuICc8ZGl2IGlkPVwic3ByZWFkU2hlZXRWaWV3XCI+JyArXHJcbiAgICAgICc8ZGl2IGlkPVwic3ByZWFkU2hlZXRWaWV3QWN0aW9uc1wiPjxkaXYgaWQ9XCJwcm9qZWN0LWFjdGlvbi1jb250YWluZXJcIj48L2Rpdj48ZGl2IGlkPVwiZXhwYW5kZXJDb250YWluZXJcIj48L2Rpdj48L2Rpdj4nICtcclxuICAgICAgJzxkaXYgaWQ9XCJmaWVsZHMtaGVhZGVyLXJvd1wiPjwvZGl2PicgK1xyXG4gICAgICAnPGRpdiBpZD1cInJlZGlwcy1kcmFnXCI+PC9kaXY+JyArXHJcbiAgICAgICc8ZGl2IGlkPVwiZGF0YS1jb250YWluZXJcIj48L2Rpdj4nICtcclxuICAgICc8L2Rpdj4nO1xyXG4gIH0sXHJcbiAgcmVuZGVyRXhwYW5kZXI6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICBleHBhbmRlclNlbGVjdG9yLmluaXQoc3ByZWFkU2hlZXQudHJlZSgpLm1heERlcHRoKTtcclxuICB9LFxyXG4gIHJlbmRlckZpZWxkc1JvdzogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoJyNmaWVsZHMtaGVhZGVyLXJvdycpLmh0bWwoJzx0YWJsZSBpZD1cImZpZWxkSGVhZGVyVGFibGVcIj48dHIgaWQ9XCJmaWVsZEhlYWRlclJvd1wiPjwvdHI+PC90YWJsZT4nKTtcclxuICBcclxuICAgIHNwcmVhZFNoZWV0LmZpZWxkcygpLmZvckVhY2goZnVuY3Rpb24oZmllbGQpXHJcbiAgICB7IFxyXG4gICAgICAkKCcjZmllbGRIZWFkZXJSb3cnKS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmZpZWxkSGVhZGVyKGZpZWxkLm5hbWUpKTtcclxuICAgICAgJCgnI2ZpZWxkTWVudUJ1dHRvbicgKyBmaWVsZC5uYW1lKS5jbGljayhmdW5jdGlvbihlKSB7IHNwcmVhZFNoZWV0Vmlldy5zaG93RmllbGRNZW51KGUsIGZpZWxkLm5hbWUpOyB9KTtcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgJCgnI2ZpZWxkcy1oZWFkZXItcm93JykuY3NzKCdyaWdodCcsIHNjcm9sbEJhcldpZHRoICsgJ3B4Jyk7ICAgLy9zaG9ydGVuIHRoZSB3aWR0aCBvZiB0aGUgZmllbGRzUm93IGJ5IHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsIGJhciAgIFxyXG4gIH0sXHJcbiAgZmllbGRIZWFkZXI6IGZ1bmN0aW9uKGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICByZXR1cm4gJzx0ZCBjbGFzcz1cImZpZWxkSGVhZGVyQ2VsbFwiPjxkaXYgY2xhc3M9XCJmaWVsZEhlYWRlckNvbnRhaW5lclwiPidcclxuICAgICAgKyAnPGRpdiBjbGFzcz1cIm1vdmVDb2xHcmlwXCI+PC9kaXY+J1xyXG4gICAgICArICc8ZGl2IGNsYXNzPVwiZmllbGROYW1lSW5wdXRDb250YWluZXJcIj48dGV4dGFyZWEgaWQ9XCJjb2xIZWFkZXJJbnB1dCcgKyBmaWVsZE5hbWUgKyAnXCIgY2xhc3M9XCJmaWVsZE5hbWVJbnB1dFwiPicgKyBmaWVsZE5hbWUgKyAnPC90ZXh0YXJlYT48L2Rpdj4nXHJcbiAgICAgICsgJzxkaXYgY2xhc3M9XCJmaWVsZEhlYWRlckJ1dHRvblwiPidcclxuICAgICAgKyAnPGltZyBpZD1cImZpZWxkTWVudUJ1dHRvbicgKyBmaWVsZE5hbWUgKyAnXCIgc3JjPVwiaW1hZ2VzL2Rvd24tYXJyb3cucG5nXCIvPidcclxuICAgICAgKyAnPC9kaXY+J1xyXG4gICAgICArICc8ZGl2IGlkPVwiZ3JpcCcgKyBmaWVsZE5hbWUgKyAnXCIgY2xhc3M9XCJyZXNpemVDb2xHcmlwXCIgb25tb3VzZWRvd249XCJzdGFydFJlc2l6ZShldmVudCwgdGhpcylcIj48L2Rpdj4nXHJcbiAgICAgICsgJzwvZGl2PjwvdGQ+JztcclxuICB9LFxyXG4gIHNob3dGaWVsZE1lbnU6IGZ1bmN0aW9uKGUsIGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICBpZigkKCcjZmllbGRNZW51JykubGVuZ3RoID09PSAwKVxyXG4gICAge1xyXG4gICAgICBmaWVsZE1lbnVDb250cm9sbGVyLmRpc3BsYXlGaWVsZE1lbnUoZmllbGROYW1lLCBlLmNsaWVudFgsIGUuY2xpZW50WSk7XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgcmVuZGVyRGF0YVRhYmxlOiBmdW5jdGlvbigpXHJcbiAgeyAgICBcclxuICAgICQoJyNkYXRhLWNvbnRhaW5lcicpLmFwcGVuZCgnPHRhYmxlIGlkPVwiZGF0YVRhYmxlXCI+PC90YWJsZT4nKTtcclxuICAgIHNwcmVhZFNoZWV0LnRyZWUoKS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSBcclxuICAgIHsgXHJcbiAgICAgICQoJyNkYXRhVGFibGUnKS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmRhdGFSb3dzTWFya3VwKGNoaWxkKSk7IFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbChmdW5jdGlvbigpIFxyXG4gICAge1xyXG4gICAgICAkKCcjcmVkaXBzLWRyYWcnKS5zY3JvbGxUb3AoJCgnI2RhdGEtY29udGFpbmVyJykuc2Nyb2xsVG9wKCkpO1xyXG4gICAgICAkKCcjZmllbGRzLWhlYWRlci1yb3cnKS5zY3JvbGxMZWZ0KCQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbExlZnQoKSk7ICAgICAgXHJcbiAgICB9KTsgICAgIFxyXG4gIH0sXHJcbiAgZGF0YVJvd3NNYXJrdXA6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIG1hcmt1cCA9ICc8dHIgaWQ9XCJkYXRhcm93aWQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cImRhdGFSb3dcIj4nO1xyXG4gICAgXHJcbiAgICBzcHJlYWRTaGVldC5maWVsZHMoKS5mb3JFYWNoKGZ1bmN0aW9uKGZpZWxkKSBcclxuICAgIHsgIFxyXG4gICAgICBtYXJrdXAgKz0gJzx0ZCBjbGFzcz1cImNlbGxcIj4nXHJcbiAgICAgICAgICAgICArICc8aW5wdXQgY2xhc3M9XCJmaWVsZElucHV0IGZpZWxkSW5wdXQnICsgZmllbGQubmFtZSArICdcIiB0eXBlPVwidGV4dFwiIGlkPVwiJyArIGZpZWxkLm5hbWUgKyBub2RlLmlkICsgJ1wiIHZhbHVlPVwiJyArIHNwcmVhZFNoZWV0LmZvcm1hdHRlZFZhbHVlKGZpZWxkLCBub2RlKSArICdcIiAnXHJcbiAgICAgICAgICAgICArICdvbmlucHV0PVwic3ByZWFkU2hlZXQudXBkYXRlRmllbGRWYWx1ZShcXCcnICsgZmllbGQubmFtZSArICdcXCcsJyArIG5vZGUuaWQgKyAnKVwiIG9uZm9jdXM9XCIkKHRoaXMpLnZhbChzcHJlYWRTaGVldC5yYXdWYWx1ZShcXCcnICsgZmllbGQubmFtZSArICdcXCcsJyArIG5vZGUuaWQgKyAnKSlcIj4nXHJcbiAgICAgICAgICAgICArICc8L3RkPic7XHJcbiAgICB9KTtcclxuXHJcbiAgICBub2RlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHsgbWFya3VwICs9IHNwcmVhZFNoZWV0Vmlldy5kYXRhUm93c01hcmt1cChjaGlsZCk7IH0pOyAgIFxyXG5cclxuICAgIHJldHVybiBtYXJrdXAgKyAnPC90cj4nO1xyXG4gIH0sXHJcbiAgcmVuZGVyRGF0YUNlbGw6IGZ1bmN0aW9uKHJvdywgZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG4gIHtcclxuICAgICQocm93KS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmZpZWxkQ2VsbChmaWVsZE5hbWUsIG5vZGVJRCwgdmFsdWUpKTtcclxuICAgICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS5vbignaW5wdXQnLCBmdW5jdGlvbigpIHsgc3ByZWFkU2hlZXQudXBkYXRlRmllbGRWYWx1ZShmaWVsZE5hbWUsIG5vZGVJRCk7IH0pO1xyXG4gICAgJCgnIycgKyBmaWVsZE5hbWUgKyBub2RlSUQpLmZvY3VzKGZ1bmN0aW9uKCkgeyAkKHRoaXMpLnZhbChzcHJlYWRTaGVldC5yYXdWYWx1ZShmaWVsZE5hbWUsIG5vZGVJRCkpOyB9KTsgICAgIFxyXG4gIH0sXHJcbiAgZmllbGRDZWxsOiBmdW5jdGlvbihmaWVsZE5hbWUsIG5vZGVJRCwgdmFsdWUpXHJcbiAge1xyXG4gICAgcmV0dXJuICc8dGQgY2xhc3M9XCJjZWxsXCI+PGlucHV0IGNsYXNzPVwiZmllbGRJbnB1dCBmaWVsZElucHV0JyArIGZpZWxkTmFtZSArICdcIiB0eXBlPVwidGV4dFwiIGlkPVwiJyArIGZpZWxkTmFtZSArIG5vZGVJRCArICdcIiB2YWx1ZT1cIicgKyB2YWx1ZSArICdcIj48L3RkPic7XHJcbiAgfSxcclxuICBub2RlUm93TWFya3VwOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBtYXJrdXAgPSAnPHRyIGlkPVwicm93aWQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cIm5vZGVSb3dcIj48dGQgY2xhc3M9XCJyZWRpcHMtcm93aGFuZGxlciBjZWxsXCI+PGRpdiBpZD1cIm5vZGVDb250ZW50JyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJub2RlLWNvbnRhaW5lclwiPic7XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcuZGVsZXRlQnV0dG9uKG5vZGUuaWQpICsgc3ByZWFkU2hlZXRWaWV3LmNvcHlCdXR0b24obm9kZS5pZCkgKyBzcHJlYWRTaGVldFZpZXcuZHJhZ0hhbmRsZTtcclxuICAgIG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcubm9kZUNvbnRlbnQobm9kZSk7ICAgIFxyXG4gIFxyXG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7IG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcubm9kZVJvd01hcmt1cChjaGlsZCk7IH0pO1xyXG4gIFxyXG4gICAgcmV0dXJuIG1hcmt1cCArICc8L2Rpdj48L3RkPjwvdHI+JztcclxuICB9LFxyXG4gIG5vZGVDb250ZW50OiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBpY29uTWFya3VwO1xyXG4gICAgdmFyIGRlcHRoQWRqdXN0bWVudCA9IChub2RlLmRlcHRoLTEpICogMTA7XHJcbiAgICB2YXIgd2lkdGhBZGp1c3RtZW50ID0gZGVwdGhBZGp1c3RtZW50OyAgIFxyXG4gIFxyXG4gICAgaWYoc3ByZWFkU2hlZXQuaGFzQ2hpbGRyZW4obm9kZSkpXHJcbiAgICB7XHJcbiAgICAgIGlmKHNwcmVhZFNoZWV0LmNoaWxkcmVuSGlkZGVuKG5vZGUpKSB7IGljb25NYXJrdXAgPSAnPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L3NwYW4+JzsgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpY29uTWFya3VwID0gJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd25cIj48L3NwYW4+JzsgfVxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBpY29uTWFya3VwID0gJzxzcGFuPjwvc3Bhbj4nO1xyXG4gICAgICBkZXB0aEFkanVzdG1lbnQgKz0gMTI7XHJcbiAgICAgIHdpZHRoQWRqdXN0bWVudCAtPSAxMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHNwcmVhZFNoZWV0Vmlldy5leHBhbmRJY29uKG5vZGUuaWQsIGRlcHRoQWRqdXN0bWVudCwgaWNvbk1hcmt1cCkgKyBzcHJlYWRTaGVldFZpZXcubm9kZUlucHV0KG5vZGUsIERFRkFVTFRfTk9ERV9JTlBVVF9XSURUSC13aWR0aEFkanVzdG1lbnQpOyAgICAgXHJcbiAgfSxcclxuICByZW5kZXJOb2RlQ29sdW1uOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI3JlZGlwcy1kcmFnJykuaHRtbCgnPHRhYmxlIGlkPVwidHJlZVRhYmxlXCI+PC90YWJsZT4nKTtcclxuICAgIHNwcmVhZFNoZWV0LnRyZWUoKS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSBcclxuICAgIHsgXHJcbiAgICAgICAkKCcjdHJlZVRhYmxlJykuYXBwZW5kKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKGNoaWxkKSk7XHJcbiAgICB9KTtcclxuICAgICQoJyNyZWRpcHMtZHJhZycpLmNzcygnYm90dG9tJywgc2Nyb2xsQmFyV2lkdGggKyAncHgnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zaG9ydGVuIHRoZSBoZWlnaHQgb2YgdGhlIHRyZWUgc2VjdGlvbiBieSB0aGUgd2lkdGggb2YgdGhlIHNjcm9sbCBiYXJcclxuICBcdHJlZGlwcy5pbml0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pbml0aWFsaXplIHRyZWUgZHJhZy9kcm9wIGxpYnJhcnkgICAgXHJcbiAgfSxcclxuICBkcmFnSGFuZGxlOiAnPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHB1bGwtcmlnaHRcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tbW92ZVwiPjwvaT48L2Rpdj4nLFxyXG4gIGNvcHlCdXR0b246IGZ1bmN0aW9uKG5vZGVJRCkgeyByZXR1cm4gJzxhIGhyZWY9XCIjXCIgIGNsYXNzPVwicHVsbC1yaWdodCBidG4gYnRuLWluZm8gYnRuLXhzIGNvcHktYnV0dG9uXCIgb25jbGljaz1cInNwcmVhZFNoZWV0LmNvcHlOb2RlKCcgKyBub2RlSUQgKyAnKVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzXCI+PC9pPjwvYT4nIH0sXHJcbiAgZGVsZXRlQnV0dG9uOiBmdW5jdGlvbihub2RlSUQpIHsgcmV0dXJuICc8YSBocmVmPVwiI1wiIGNsYXNzPVwicHVsbC1yaWdodCBidG4gYnRuLWRhbmdlciBidG4teHMgZGVsZXRlLWJ1dHRvblwiIG9uY2xpY2s9XCJzcHJlYWRTaGVldC5kZWxldGVOb2RlKCcgKyBub2RlSUQgKyAnKVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L2k+PC9hPicgfSxcclxuICBleHBhbmRJY29uOiBmdW5jdGlvbihub2RlSUQsIGRlcHRoQWRqdXN0bWVudCwgaWNvbk1hcmt1cCkgXHJcbiAgeyBcclxuICAgIHJldHVybiAnPGEgaHJlZj1cIiNcIiBpZD1cImljb24nICsgbm9kZUlEICsgJ1wiIGNsYXNzPVwiYnRuIGJ0bi14c1wiIHN0eWxlPVwibWFyZ2luLWxlZnQ6JyArIGRlcHRoQWRqdXN0bWVudCArICdweFwiICdcclxuICAgICAgICAgKyAnb25jbGljaz1cInNwcmVhZFNoZWV0LnRvZ2dsZU5vZGUoJyArIG5vZGVJRCArICcpXCI+JyArIGljb25NYXJrdXAgKyAnPC9hPic7IFxyXG4gIH0sXHJcbiAgbm9kZUlucHV0OiBmdW5jdGlvbihub2RlLCB3aWR0aClcclxuICB7IFxyXG4gICAgcmV0dXJuICc8aW5wdXQgaWQ9XCJub2RlSW5wdXQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cIm5vZGVUZXh0SW5wdXRcIiBzdHlsZT1cIndpZHRoOicgKyB3aWR0aCArICdweFwiIHR5cGU9XCJ0ZXh0XCIgJ1xyXG4gICAgICAgICArICd2YWx1ZT1cIicgKyBub2RlLm5hbWUgKyAnXCIgb25pbnB1dD1cInNwcmVhZFNoZWV0Vmlldy51cGRhdGVOb2RlTmFtZSgnICsgbm9kZS5pZCArICcpXCIvPic7IFxyXG4gIH0sXHJcbiAgZXhwYW5kTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICB2YXIgY2hpbGQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIGRlc2NlbmRhbnQgbm9kZSByb3dzIHRvIHRoZSBET01cclxuICAgIGZvcih2YXIgaSA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcHJlc2VydmUgdGhlIG5vZGUgb3JkZXJpbmdcclxuICAgIHtcclxuICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0Vmlldy5kYXRhUm93c01hcmt1cChjaGlsZCkpLmluc2VydEFmdGVyKCQoJyNkYXRhcm93aWQnICsgbm9kZS5pZCkpO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKGNoaWxkKSkuaW5zZXJ0QWZ0ZXIoJCgnI3Jvd2lkJyArIG5vZGUuaWQpKTtcclxuICAgIH0gICAgIFxyXG5cclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgIFxyXG4gIH0sXHJcbiAgcmVkcmF3Tm9kZUNvbnRlbnQ6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgJCgnI2ljb24nICsgbm9kZS5pZCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjbm9kZUlucHV0JyArIG5vZGUuaWQpLnJlbW92ZSgpO1xyXG4gICAgJCgnI25vZGVDb250ZW50JyArIG5vZGUuaWQpLmFwcGVuZChzcHJlYWRTaGVldFZpZXcubm9kZUNvbnRlbnQobm9kZSkpOyAgICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgICQoJyNmaWVsZEhlYWRlclJvdycpLmFwcGVuZChzcHJlYWRTaGVldFZpZXcuZmllbGRIZWFkZXIoZmllbGROYW1lKSk7XHJcbiAgICAkKCcjZmllbGRNZW51QnV0dG9uJyArIGZpZWxkTmFtZSkuY2xpY2soZnVuY3Rpb24oZSkgeyBzcHJlYWRTaGVldFZpZXcuc2hvd0ZpZWxkTWVudShlLCBmaWVsZE5hbWUpOyB9KTtcclxuICAgICQoJy5kYXRhUm93JykuZWFjaChmdW5jdGlvbihpLCBpdGVtKSB7IHNwcmVhZFNoZWV0Vmlldy5yZW5kZXJEYXRhQ2VsbChpdGVtLCBmaWVsZE5hbWUsIHBhcnNlSW50KGl0ZW0uaWQucmVwbGFjZSgnZGF0YXJvd2lkJywgJycpKSwgJycpOyB9KTsgICAgICAgIFxyXG4gIH0sXHJcbiAgdXBkYXRlTm9kZU5hbWU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgdmFsdWUgPSAkKCcjbm9kZUlucHV0JyArIG5vZGVJRCkudmFsKCk7XHJcbiAgICBzcHJlYWRTaGVldC51cGRhdGVOb2RlTmFtZShub2RlSUQsIHZhbHVlKTtcclxuICAgICQoJyNub2RlSW5wdXQnICsgbm9kZUlEKS5hdHRyKCd2YWx1ZScsIHZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBpbiB0aGUgRE9NLCBzbyB0aGF0IHdoZW4gd2UgZHJhZy9tb3ZlIHRoZSByb3csIHRoZSB2YWx1ZSBpcyBjb3JyZWN0ICAgIFxyXG4gIH0sXHJcbiAgcmVtb3ZlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICAkKCcjcm93aWQnICsgbm9kZS5pZCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjZGF0YXJvd2lkJyArIG5vZGUuaWQpLnJlbW92ZSgpOyAgICAgXHJcbiAgfSxcclxuICBpbnNlcnROb2RlQmVmb3JlOiBmdW5jdGlvbihub2RlLCBpbnNlcnRCZWZvcmVOb2RlKVxyXG4gIHtcclxuICAgICQoc3ByZWFkU2hlZXRWaWV3Lm5vZGVSb3dNYXJrdXAobm9kZSkpLmluc2VydEJlZm9yZSgkKCcjcm93aWQnICsgaW5zZXJ0QmVmb3JlTm9kZS5pZCkpOyAgICAgIC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgICQoc3ByZWFkU2hlZXRWaWV3LmRhdGFSb3dzTWFya3VwKG5vZGUpKS5pbnNlcnRCZWZvcmUoJCgnI2RhdGFyb3dpZCcgKyBpbnNlcnRCZWZvcmVOb2RlLmlkKSk7IC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgXHJcbiAgfSxcclxuICBpbnNlcnROb2RlQWZ0ZXI6IGZ1bmN0aW9uKG5vZGUsIGluc2VydEFmdGVyTm9kZSlcclxuICB7XHJcbiAgICAkKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKG5vZGUpKS5pbnNlcnRBZnRlcigkKCcjcm93aWQnICsgaW5zZXJ0QWZ0ZXJOb2RlLmlkKSk7ICAgICAgLy9pbnNlcnQgdGhlIG5ldyByb3dzIGJlZm9yZSB0aGUgc291cmNlIHJvd1xyXG4gICAgJChzcHJlYWRTaGVldFZpZXcuZGF0YVJvd3NNYXJrdXAobm9kZSkpLmluc2VydEFmdGVyKCQoJyNkYXRhcm93aWQnICsgaW5zZXJ0QWZ0ZXJOb2RlLmlkKSk7IC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgXHJcbiAgfSxcclxuICBlbmFibGVEcmFnZ2luZzogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBSRURJUFMuZHJhZy5lbmFibGVEaXZzKCdpbml0JywgJCgnI3Jvd2lkJyArIG5vZGUuaWQpLmZpbmQoJ2RpdicpKTsgICAgICAgXHJcbiAgfSxcclxuICBnZXRGaWVsZFZhbHVlOiBmdW5jdGlvbihmaWVsZE5hbWUsIG5vZGVJRClcclxuICB7XHJcbiAgICByZXR1cm4gJCgnIycgKyBmaWVsZE5hbWUgKyBub2RlSUQpLnZhbCgpO1xyXG4gIH0sXHJcbiAgdXBkYXRlRmllbGRWYWx1ZTogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG4gIHtcclxuICAgICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS52YWwodmFsdWUpO1xyXG4gIH1cclxufTsiLCJ2YXIgTUlOX05PREVfU0laRSA9IDU7XHJcbnZhciBNQVhfTk9ERV9TSVpFID0gMTAwO1xyXG5cclxudmFyIFZFUlRJQ0FMX1ZJRVcgPSAwO1xyXG52YXIgSE9SSVpPTlRBTF9WSUVXID0gMTtcclxuXHJcbi8vVE9ETzogcmVmYWN0b3IsIHJlbW92ZSByZWZlcmVuY2VzIHRvIHByb2plY3QgYW5kIHB1dCB0aGVtIGluIHRoZSB0cmVlIGNvbnRyb2xsZXIgZmlsZVxyXG52YXIgdHJlZVZpZXcgPSBcclxue1xyXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKCcjdHJlZVZpZXcnKS5yZW1vdmUoKTtcclxuICB9LFxyXG4gIHJlZnJlc2g6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB0cmVlVmlldy51cGRhdGUodHJlZVZpZXcucm9vdCk7XHJcbiAgfSxcclxuICByb3RhdGU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICBpZih0cmVlVmlldy5kaXJlY3Rpb24gPT09IEhPUklaT05UQUxfVklFVylcclxuICAgIHtcclxuICAgICAgdHJlZVZpZXcuZGlyZWN0aW9uID0gVkVSVElDQUxfVklFVztcclxuICAgICAgdHJlZVZpZXcuaG9yaXpvbnRhbF9zcGFjaW5nID0gMTAwO1xyXG4gICAgICB0cmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nID0gNjA7XHJcbiAgICAgIHRyZWVWaWV3LmRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKCkucHJvamVjdGlvbihmdW5jdGlvbihkKSB7IHJldHVybiBbZC54LCBkLnldOyB9KTsgIC8vIGRlZmluZSBhIGQzIGRpYWdvbmFsIHByb2plY3Rpb24gZm9yIHVzZSBieSB0aGUgbm9kZSBwYXRocyBsYXRlciBvbi5cclxuICAgICAgXHJcbiAgICAgIHRyZWVWaWV3LnJvb3QueTAgPSB0cmVlVmlldy52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgICB0cmVlVmlldy5yb290LngwID0gMDsgICAgICBcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgdHJlZVZpZXcuZGlyZWN0aW9uID0gSE9SSVpPTlRBTF9WSUVXO1xyXG4gICAgICB0cmVlVmlldy5ob3Jpem9udGFsX3NwYWNpbmcgPSAxNTA7XHJcbiAgICAgIHRyZWVWaWV3LnZlcnRpY2FsX3NwYWNpbmcgPSAyNTtcclxuICAgICAgdHJlZVZpZXcuZGlhZ29uYWwgPSBkMy5zdmcuZGlhZ29uYWwoKS5wcm9qZWN0aW9uKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFtkLnksIGQueF07IH0pOyAgLy8gZGVmaW5lIGEgZDMgZGlhZ29uYWwgcHJvamVjdGlvbiBmb3IgdXNlIGJ5IHRoZSBub2RlIHBhdGhzIGxhdGVyIG9uLlxyXG4gICAgICBcclxuICAgICAgdHJlZVZpZXcucm9vdC54MCA9IHRyZWVWaWV3LnZpZXdlckhlaWdodCAvIDI7XHJcbiAgICAgIHRyZWVWaWV3LnJvb3QueTAgPSAwOyAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgdHJlZVZpZXcudXBkYXRlKHRyZWVWaWV3LnJvb3QpO1xyXG4gIH0sXHJcbiAgaW5pdDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHRyZWVWaWV3LmRpcmVjdGlvbiA9IEhPUklaT05UQUxfVklFVztcclxuICAgIHRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICB0cmVlVmlldy5kcmFnZ2luZ05vZGUgPSBudWxsO1xyXG4gICAgdHJlZVZpZXcuZHVyYXRpb24gPSA3NTA7XHJcbiAgICB0cmVlVmlldy5ob3Jpem9udGFsX3NwYWNpbmcgPSAxNTA7XHJcbiAgICB0cmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nID0gMjU7ICAgIFxyXG4gICAgXHJcbiAgICB0cmVlVmlldy5tYXhMYWJlbExlbmd0aCA9IDA7XHJcbiAgICBcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgZnVuY3Rpb24oZClcclxuICAgIHtcclxuICAgICAgdHJlZVZpZXcubWF4TGFiZWxMZW5ndGggPSBNYXRoLm1heChkLm5hbWUubGVuZ3RoLCB0cmVlVmlldy5tYXhMYWJlbExlbmd0aCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdHJlZVZpZXcudmlld2VyV2lkdGggPSAkKCcjdHJlZS1jb250YWluZXInKS53aWR0aCgpO1xyXG4gICAgdHJlZVZpZXcudmlld2VySGVpZ2h0ID0gJCgnI3RyZWUtY29udGFpbmVyJykuaGVpZ2h0KCk7XHJcbiAgICBcclxuICAgIHRyZWVWaWV3LnRyZWUgPSBkMy5sYXlvdXQudHJlZSgpLnNpemUoW3RyZWVWaWV3LnZpZXdlckhlaWdodCwgdHJlZVZpZXcudmlld2VyV2lkdGhdKTtcclxuICAgIHRyZWVWaWV3LnJvb3QgPSBwcm9qZWN0LnRyZWU7XHJcbiAgICBcclxuICAgIHRyZWVWaWV3LmRyYWdTdGFydGVkID0gbnVsbDtcclxuICAgIHRyZWVWaWV3LmRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKCkucHJvamVjdGlvbihmdW5jdGlvbihkKSB7IHJldHVybiBbZC55LCBkLnhdOyB9KTsgIC8vIGRlZmluZSBhIGQzIGRpYWdvbmFsIHByb2plY3Rpb24gZm9yIHVzZSBieSB0aGUgbm9kZSBwYXRocyBsYXRlciBvbi4gICAgICAgICAgICAgICAgXHJcbiAgfSwgIFxyXG4gIHJlbmRlcjogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHRyZWVWaWV3LmRlc3Ryb3koKTtcclxuICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJ0cmVlVmlld1wiPjxkaXYgaWQ9XCJ0cmVlVmlld09wdGlvbnNcIj48ZGl2IGlkPVwiZXhwYW5kZXJDb250YWluZXJcIj48L2Rpdj48L2Rpdj48ZGl2IGlkPVwidHJlZS1jb250YWluZXJcIj48L2Rpdj48L2Rpdj4nKTtcclxuIFxyXG4gICAgZXhwYW5kZXJTZWxlY3Rvci5pbml0KHByb2plY3QudHJlZS5tYXhEZXB0aCk7XHJcbiAgICAkKCcjdHJlZVZpZXdPcHRpb25zJykuYXBwZW5kKCc8YSBocmVmPVwiI1wiIGlkPVwidHJlZVZpZXdSb3RhdGVCdXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBwdWxsLXJpZ2h0XCI+Um90YXRlIFZpZXc8L2E+Jyk7XHJcbiAgICAkKCcjdHJlZVZpZXdSb3RhdGVCdXR0b24nKS5jbGljayhmdW5jdGlvbigpIHsgdHJlZVZpZXcucm90YXRlKCk7IH0pOyAgXHJcbiBcclxuICAgIHRyZWVWaWV3LmluaXQoKTtcclxuXHJcbiAgICBmdW5jdGlvbiB6b29tKCkgeyB0cmVlVmlldy5zdmdHcm91cC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpc2NhbGUoXCIgKyBkMy5ldmVudC5zY2FsZSArIFwiKVwiKTsgfSAgIC8vIERlZmluZSB0aGUgem9vbSBmdW5jdGlvbiBmb3IgdGhlIHpvb21hYmxlIHRyZWVcclxuICBcclxuICAgIHRyZWVWaWV3Lnpvb21MaXN0ZW5lciA9IGQzLmJlaGF2aW9yLnpvb20oKS5zY2FsZUV4dGVudChbMC4xLCAzXSkub24oXCJ6b29tXCIsIHpvb20pOyAgICAgLy8gZGVmaW5lIHRoZSB0cmVlVmlldy56b29tTGlzdGVuZXIgd2hpY2ggY2FsbHMgdGhlIHpvb20gZnVuY3Rpb24gb24gdGhlIFwiem9vbVwiIGV2ZW50IGNvbnN0cmFpbmVkIHdpdGhpbiB0aGUgc2NhbGVFeHRlbnRzXHJcbiAgXHJcbiAgICBmdW5jdGlvbiBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSkgXHJcbiAgICB7XHJcbiAgICAgIHRyZWVWaWV3LmRyYWdnaW5nTm9kZSA9IGQ7XHJcbiAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJy5naG9zdENpcmNsZScpLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuICAgICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZSBzaG93Jyk7XHJcbiAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5hdHRyKCdjbGFzcycsICdub2RlIGFjdGl2ZURyYWcnKTtcclxuXHJcbiAgICAgIHRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKS5zb3J0KGZ1bmN0aW9uKGEsIGIpICAgIC8vIHNlbGVjdCB0aGUgcGFyZW50IGFuZCBzb3J0IHRoZSBwYXRoJ3NcclxuICAgICAgeyBcclxuICAgICAgICBpZiAoYS5pZCAhPSB0cmVlVmlldy5kcmFnZ2luZ05vZGUuaWQpIHJldHVybiAxOyAgICAgICAgICAvLyBhIGlzIG5vdCB0aGUgaG92ZXJlZCBlbGVtZW50LCBzZW5kIFwiYVwiIHRvIHRoZSBiYWNrXHJcbiAgICAgICAgZWxzZSByZXR1cm4gLTE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBpcyB0aGUgaG92ZXJlZCBlbGVtZW50LCBicmluZyBcImFcIiB0byB0aGUgZnJvbnRcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIGlmIG5vZGVzIGhhcyBjaGlsZHJlbiwgcmVtb3ZlIHRoZSBsaW5rcyBhbmQgbm9kZXNcclxuICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEpIFxyXG4gICAgICB7XHJcbiAgICAgICAgLy8gcmVtb3ZlIGxpbmsgcGF0aHNcclxuICAgICAgICBsaW5rcyA9IHRyZWVWaWV3LnRyZWUubGlua3Mobm9kZXMpO1xyXG4gICAgICAgIG5vZGVQYXRocyA9IHRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcInBhdGgubGlua1wiKS5kYXRhKGxpbmtzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC5pZDsgfSkucmVtb3ZlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVtb3ZlIGNoaWxkIG5vZGVzXHJcbiAgICAgICAgbm9kZXNFeGl0ID0gdHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpLmRhdGEobm9kZXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuaWQ7IH0pLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkLmlkICE9IHRyZWVWaWV3LmRyYWdnaW5nTm9kZS5pZDsgfSkucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICBcclxuICAgICAgLy8gcmVtb3ZlIHBhcmVudCBsaW5rXHJcbiAgICAgIHBhcmVudExpbmsgPSB0cmVlVmlldy50cmVlLmxpbmtzKHRyZWVWaWV3LnRyZWUubm9kZXModHJlZVZpZXcuZHJhZ2dpbmdOb2RlLnBhcmVudCkpO1xyXG4gICAgICB0cmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoJ3BhdGgubGluaycpLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkLnRhcmdldC5pZCA9PSB0cmVlVmlldy5kcmFnZ2luZ05vZGUuaWQ7IH0pLnJlbW92ZSgpO1xyXG5cclxuICAgICAgdHJlZVZpZXcuZHJhZ1N0YXJ0ZWQgPSBudWxsO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gZGVmaW5lIHRoZSBiYXNlU3ZnLCBhdHRhY2hpbmcgYSBjbGFzcyBmb3Igc3R5bGluZyBhbmQgdGhlIHRyZWVWaWV3Lnpvb21MaXN0ZW5lclxyXG4gICAgdmFyIGJhc2VTdmcgPSBkMy5zZWxlY3QoXCIjdHJlZS1jb250YWluZXJcIikuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgdHJlZVZpZXcudmlld2VyV2lkdGgpXHJcbiAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHRyZWVWaWV3LnZpZXdlckhlaWdodClcclxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm92ZXJsYXlcIilcclxuICAgICAgLmNhbGwodHJlZVZpZXcuem9vbUxpc3RlbmVyKTtcclxuICBcclxuICAgIGRyYWdMaXN0ZW5lciA9IGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCB0cmVlVmlldy5kcmFnc3RhcnQpLm9uKFwiZHJhZ1wiLCBkcmFnKS5vbihcImRyYWdlbmRcIiwgdHJlZVZpZXcuZHJhZ2VuZCk7ICAvLyBEZWZpbmUgdGhlIGRyYWcgbGlzdGVuZXJzIGZvciBkcmFnL2Ryb3AgYmVoYXZpb3VyIG9mIG5vZGVzLlxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBkcmFnKGQpXHJcbiAgICB7XHJcbiAgICAgIGlmIChkID09IHRyZWVWaWV3LnJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAodHJlZVZpZXcuZHJhZ1N0YXJ0ZWQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgZG9tTm9kZSA9IHRoaXM7XHJcbiAgICAgICAgaW5pdGlhdGVEcmFnKGQsIGRvbU5vZGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkLngwICs9IGQzLmV2ZW50LmR5O1xyXG4gICAgICBkLnkwICs9IGQzLmV2ZW50LmR4O1xyXG4gICAgICBkMy5zZWxlY3QodGhpcykuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQueTAgKyBcIixcIiArIGQueDAgKyBcIilcIik7XHJcbiAgICAgIHRyZWVWaWV3LnVwZGF0ZVRlbXBDb25uZWN0b3IoKTsgICAgICBcclxuICAgIH1cclxuICBcclxuICAgIC8vIEFwcGVuZCBhIGdyb3VwIHdoaWNoIGhvbGRzIGFsbCBub2RlcyBhbmQgd2hpY2ggdGhlIHpvb20gTGlzdGVuZXIgY2FuIGFjdCB1cG9uLlxyXG4gICAgdHJlZVZpZXcuc3ZnR3JvdXAgPSBiYXNlU3ZnLmFwcGVuZChcImdcIik7XHJcbiAgXHJcbiAgICAvLyBEZWZpbmUgdGhlIHJvb3RcclxuICAgIHRyZWVWaWV3LnJvb3QueDAgPSB0cmVlVmlldy52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgdHJlZVZpZXcucm9vdC55MCA9IDA7XHJcbiAgICBcclxuICAgIC8vIExheW91dCB0aGUgdHJlZSBpbml0aWFsbHkgYW5kIGNlbnRlciBvbiB0aGUgcm9vdCBub2RlLlxyXG4gICAgdHJlZVZpZXcudXBkYXRlKHRyZWVWaWV3LnJvb3QpO1xyXG4gICAgdHJlZVZpZXcuY2VudGVyTm9kZSh0cmVlVmlldy5yb290KTsgICAgXHJcbiAgfSxcclxuICBjbGljazogZnVuY3Rpb24oZCkgICAvLyBUb2dnbGUgY2hpbGRyZW4gb24gY2xpY2suXHJcbiAge1xyXG4gICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHsgcmV0dXJuOyB9IC8vIGNsaWNrIHN1cHByZXNzZWRcclxuICAgIHByb2plY3QudG9nZ2xlRXhwYW5zaW9uKGQpO1xyXG4gICAgdHJlZVZpZXcudXBkYXRlKGQpO1xyXG4gIH0sICBcclxuICB1cGRhdGU6IGZ1bmN0aW9uKHNvdXJjZSkgXHJcbiAgeyBcclxuICAgIHZhciBpID0gMDtcclxuICAgICAgICBcclxuICAgIC8vIENvbXB1dGUgdGhlIG5ldyBoZWlnaHQsIGZ1bmN0aW9uIGNvdW50cyB0b3RhbCBjaGlsZHJlbiBvZiByb290IG5vZGUgYW5kIHNldHMgdHJlZSBoZWlnaHQgYWNjb3JkaW5nbHkuXHJcbiAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBsYXlvdXQgbG9va2luZyBzcXVhc2hlZCB3aGVuIG5ldyBub2RlcyBhcmUgbWFkZSB2aXNpYmxlIG9yIGxvb2tpbmcgc3BhcnNlIHdoZW4gbm9kZXMgYXJlIHJlbW92ZWRcclxuICAgIC8vIFRoaXMgbWFrZXMgdGhlIGxheW91dCBtb3JlIGNvbnNpc3RlbnQuXHJcbiAgICB2YXIgbGV2ZWxXaWR0aCA9IFsxXTtcclxuICAgIHZhciBjaGlsZENvdW50ID0gZnVuY3Rpb24obGV2ZWwsIG4pIFxyXG4gICAge1xyXG4gICAgICBpZiAobi5jaGlsZHJlbiAmJiBuLmNoaWxkcmVuLmxlbmd0aCA+IDApIFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGxldmVsV2lkdGgubGVuZ3RoIDw9IGxldmVsICsgMSkgeyBsZXZlbFdpZHRoLnB1c2goMCk7IH1cclxuXHJcbiAgICAgICAgbGV2ZWxXaWR0aFtsZXZlbCArIDFdICs9IG4uY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICAgIG4uY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihkKSB7IGNoaWxkQ291bnQobGV2ZWwgKyAxLCBkKTsgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNoaWxkQ291bnQoMCwgdHJlZVZpZXcucm9vdCk7XHJcbiAgICB2YXIgbmV3SGVpZ2h0ID0gZDMubWF4KGxldmVsV2lkdGgpICogdHJlZVZpZXcudmVydGljYWxfc3BhY2luZzsgLy8gMjUgcGl4ZWxzIHBlciBsaW5lXHJcbiAgICB0cmVlVmlldy50cmVlID0gdHJlZVZpZXcudHJlZS5zaXplKFtuZXdIZWlnaHQsIHRyZWVWaWV3LnZpZXdlcldpZHRoXSk7XHJcblxyXG4gICAgLy8gQ29tcHV0ZSB0aGUgbmV3IHRyZWUgbGF5b3V0LlxyXG4gICAgdmFyIG5vZGVzID0gdHJlZVZpZXcudHJlZS5ub2Rlcyh0cmVlVmlldy5yb290KS5yZXZlcnNlKCk7XHJcbiAgICB2YXIgbGlua3MgPSB0cmVlVmlldy50cmVlLmxpbmtzKG5vZGVzKTtcclxuXHJcbiAgICAvLyBTZXQgd2lkdGhzIGJldHdlZW4gbGV2ZWxzIGJhc2VkIG9uIG1heExhYmVsTGVuZ3RoLlxyXG4gICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgLy9kLnkgPSAoZC5kZXB0aCAqICh0cmVlVmlldy5tYXhMYWJlbExlbmd0aCAqIDEwKSk7IC8vbWF4TGFiZWxMZW5ndGggKiAxMHB4XHJcbiAgICAgICAgLy8gYWx0ZXJuYXRpdmVseSB0byBrZWVwIGEgZml4ZWQgc2NhbGUgb25lIGNhbiBzZXQgYSBmaXhlZCBkZXB0aCBwZXIgbGV2ZWxcclxuICAgICAgICAvLyBOb3JtYWxpemUgZm9yIGZpeGVkLWRlcHRoIGJ5IGNvbW1lbnRpbmcgb3V0IGJlbG93IGxpbmVcclxuICAgICAgICBkLnkgPSAoZC5kZXB0aCAqIHRyZWVWaWV3Lmhvcml6b250YWxfc3BhY2luZyk7IC8vMjAwcHggcGVyIGxldmVsLlxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBub2Rlc+KAplxyXG4gICAgbm9kZSA9IHRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKS5kYXRhKG5vZGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkIHx8IChkLmlkID0gKytpKTsgfSk7XHJcblxyXG4gICAgLy8gRW50ZXIgYW55IG5ldyBub2RlcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXHJcbiAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcImdcIilcclxuICAgICAgLmNhbGwoZHJhZ0xpc3RlbmVyKVxyXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZVwiKVxyXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS55MCArIFwiLFwiICsgc291cmNlLngwICsgXCIpXCI7IH0pXHJcbiAgICAgIC5vbignY2xpY2snLCB0cmVlVmlldy5jbGljayk7XHJcblxyXG4gICAgbm9kZUVudGVyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAuYXR0cignY2xhc3MnLCAnbm9kZUNpcmNsZScpXHJcbiAgICAgIC5hdHRyKFwiclwiLCAwKVxyXG4gICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKGQpID8gXCJsaWdodHN0ZWVsYmx1ZVwiIDogXCIjZmZmXCI7IH0pO1xyXG5cclxuICAgIG5vZGVFbnRlci5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0Lmhhc0NoaWxkcmVuKGQpID8gLTEwIDogMTA7IH0pXHJcbiAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxyXG4gICAgICAuYXR0cignY2xhc3MnLCAnbm9kZVRleHQnKVxyXG4gICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyBcImVuZFwiIDogXCJzdGFydFwiOyB9KVxyXG4gICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLm5hbWU7IH0pXHJcbiAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAvLyBwaGFudG9tIG5vZGUgdG8gZ2l2ZSB1cyBtb3VzZW92ZXIgaW4gYSByYWRpdXMgYXJvdW5kIGl0XHJcbiAgICBub2RlRW50ZXIuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgIC5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZScpXHJcbiAgICAgIC5hdHRyKFwiclwiLCAzMClcclxuICAgICAgLmF0dHIoXCJvcGFjaXR5XCIsIDAuMikgLy8gY2hhbmdlIHRoaXMgdG8gemVybyB0byBoaWRlIHRoZSB0YXJnZXQgYXJlYVxyXG4gICAgICAuc3R5bGUoXCJmaWxsXCIsIFwicmVkXCIpXHJcbiAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdtb3VzZW92ZXInKVxyXG4gICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24obm9kZSkgeyB0cmVlVmlldy5vdmVyQ2lyY2xlKG5vZGUpOyB9KVxyXG4gICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbihub2RlKSB7IHRyZWVWaWV3Lm91dENpcmNsZShub2RlKTsgfSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSB0ZXh0IHRvIHJlZmxlY3Qgd2hldGhlciBub2RlIGhhcyBjaGlsZHJlbiBvciBub3QuXHJcbiAgICBub2RlLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyAtMTAgOiAxMDsgfSlcclxuICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaGFzQ2hpbGRyZW4oZCkgPyBcImVuZFwiIDogXCJzdGFydFwiOyB9KVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubmFtZTsgfSk7XHJcblxyXG4gICAgLy8gQ2hhbmdlIHRoZSBjaXJjbGUgZmlsbCBkZXBlbmRpbmcgb24gd2hldGhlciBpdCBoYXMgY2hpbGRyZW4gYW5kIGlzIGNvbGxhcHNlZFxyXG4gICAgbm9kZS5zZWxlY3QoXCJjaXJjbGUubm9kZUNpcmNsZVwiKVxyXG4gICAgICAuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gdHJlZVZpZXcuY29tcHV0ZU5vZGVTaXplKGQpOyB9KVxyXG4gICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKGQpID8gXCJsaWdodHN0ZWVsYmx1ZVwiIDogXCIjZmZmXCI7IH0pO1xyXG5cclxuICAgIC8vIFRyYW5zaXRpb24gbm9kZXMgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxyXG4gICAgdmFyIG5vZGVVcGRhdGU7XHJcbiAgICBpZih0cmVlVmlldy5kaXJlY3Rpb24gPT09IFZFUlRJQ0FMX1ZJRVcpXHJcbiAgICB7XHJcbiAgICAgIG5vZGVVcGRhdGUgPSBub2RlLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiOyB9KTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgbm9kZVVwZGF0ZSA9IG5vZGUuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIGQueSArIFwiLFwiICsgZC54ICsgXCIpXCI7IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZhZGUgdGhlIHRleHQgaW5cclxuICAgIG5vZGVVcGRhdGUuc2VsZWN0KFwidGV4dFwiKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAxKTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgIHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueSArIFwiLFwiICsgc291cmNlLnggKyBcIilcIjsgfSlcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgbm9kZUV4aXQuc2VsZWN0KFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIDApO1xyXG4gICAgbm9kZUV4aXQuc2VsZWN0KFwidGV4dFwiKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGxpbmtz4oCmXHJcbiAgICB2YXIgbGluayA9IHRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcInBhdGgubGlua1wiKS5kYXRhKGxpbmtzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC5pZDsgfSk7XHJcblxyXG4gICAgLy8gRW50ZXIgYW55IG5ldyBsaW5rcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXHJcbiAgICBsaW5rLmVudGVyKCkuaW5zZXJ0KFwicGF0aFwiLCBcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGlua1wiKVxyXG4gICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHZhciBvID0geyB4OiBzb3VyY2UueDAsIHk6IHNvdXJjZS55MCB9O1xyXG4gICAgICAgICAgICByZXR1cm4gdHJlZVZpZXcuZGlhZ29uYWwoeyBzb3VyY2U6IG8sIHRhcmdldDogbyB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIGxpbmtzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cclxuICAgIGxpbmsuYXR0cihcImRcIiwgdHJlZVZpZXcuZGlhZ29uYWwpO1xyXG5cclxuICAgIC8vIFRyYW5zaXRpb24gZXhpdGluZyBub2RlcyB0byB0aGUgcGFyZW50J3MgbmV3IHBvc2l0aW9uLlxyXG4gICAgbGluay5leGl0KClcclxuICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB2YXIgbyA9IHsgeDogc291cmNlLngsIHk6IHNvdXJjZS55IH07XHJcbiAgICAgICAgICAgIHJldHVybiB0cmVlVmlldy5kaWFnb25hbCh7IHNvdXJjZTogbywgdGFyZ2V0OiBvIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgIC8vIFN0YXNoIHRoZSBvbGQgcG9zaXRpb25zIGZvciB0cmFuc2l0aW9uLlxyXG4gICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7IGQueDAgPSBkLng7IGQueTAgPSBkLnk7IH0pO1xyXG4gIH0sICBcclxuICBkcmFnc3RhcnQ6IGZ1bmN0aW9uKGQpXHJcbiAge1xyXG4gICAgaWYgKGQgPT0gdHJlZVZpZXcucm9vdCkgeyByZXR1cm47IH1cclxuICAgIHRyZWVWaWV3LmRyYWdTdGFydGVkID0gdHJ1ZTtcclxuICAgIG5vZGVzID0gdHJlZVZpZXcudHJlZS5ub2RlcyhkKTtcclxuICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgLy8gaXQncyBpbXBvcnRhbnQgdGhhdCB3ZSBzdXBwcmVzcyB0aGUgbW91c2VvdmVyIGV2ZW50IG9uIHRoZSBub2RlIGJlaW5nIGRyYWdnZWQuIE90aGVyd2lzZSBpdCB3aWxsIGFic29yYiB0aGUgbW91c2VvdmVyIGV2ZW50IGFuZCB0aGUgdW5kZXJseWluZyBub2RlIHdpbGwgbm90IGRldGVjdCBpdCBkMy5zZWxlY3QodGhpcykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpOyAgICAgIFxyXG4gIH0sXHJcbiAgZHJhZ2VuZDogZnVuY3Rpb24oZClcclxuICB7XHJcbiAgICBpZiAoZCA9PSB0cmVlVmlldy5yb290KSB7IHJldHVybjsgfVxyXG4gICAgZG9tTm9kZSA9IHRoaXM7XHJcbiAgICBcclxuICAgIGlmICh0cmVlVmlldy5zZWxlY3RlZE5vZGUpIFxyXG4gICAge1xyXG4gICAgICAvLyBub3cgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIHBhcmVudCwgYW5kIGluc2VydCBpdCBpbnRvIHRoZSBuZXcgZWxlbWVudHMgY2hpbGRyZW5cclxuICAgICAgcHJvamVjdC5yZW1vdmVOb2RlKHRyZWVWaWV3LmRyYWdnaW5nTm9kZSk7XHJcbiAgICAgIFxyXG4gICAgICBpZighdHJlZVZpZXcuc2VsZWN0ZWROb2RlLmNoaWxkcmVuKSB7IHRyZWVWaWV3LnNlbGVjdGVkTm9kZS5jaGlsZHJlbiA9IFtdOyB9XHJcbiAgICAgIHRyZWVWaWV3LnNlbGVjdGVkTm9kZS5jaGlsZHJlbi5wdXNoKHRyZWVWaWV3LmRyYWdnaW5nTm9kZSk7XHJcbiAgICAgIFxyXG4gICAgICBwcm9qZWN0LmV4cGFuZE5vZGUodHJlZVZpZXcuc2VsZWN0ZWROb2RlKTsgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBub2RlIGJlaW5nIGFkZGVkIHRvIGlzIGV4cGFuZGVkIHNvIHVzZXIgY2FuIHNlZSBhZGRlZCBub2RlIGlzIGNvcnJlY3RseSBtb3ZlZCAgICBcclxuICAgIH0gXHJcbiAgXHJcbiAgICB0cmVlVmlldy5zZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZScpO1xyXG4gICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUnKTtcclxuICAgIFxyXG4gICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdCgnLmdob3N0Q2lyY2xlJykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnJyk7ICAgLy8gbm93IHJlc3RvcmUgdGhlIG1vdXNlb3ZlciBldmVudCBvciB3ZSB3b24ndCBiZSBhYmxlIHRvIGRyYWcgYSAybmQgdGltZVxyXG4gICAgdHJlZVZpZXcudXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gICAgXHJcbiAgICBpZiAodHJlZVZpZXcuZHJhZ2dpbmdOb2RlICE9PSBudWxsKSBcclxuICAgIHtcclxuICAgICAgdHJlZVZpZXcudXBkYXRlKHRyZWVWaWV3LnJvb3QpO1xyXG4gICAgICAvL3RyZWVWaWV3LmNlbnRlck5vZGUodHJlZVZpZXcuZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgdHJlZVZpZXcuZHJhZ2dpbmdOb2RlID0gbnVsbDtcclxuICAgIH0gICAgICBcclxuICB9LFxyXG4gIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSB0aGUgdGVtcG9yYXJ5IGNvbm5lY3RvciBpbmRpY2F0aW5nIGRyYWdnaW5nIGFmZmlsaWF0aW9uXHJcbiAgdXBkYXRlVGVtcENvbm5lY3RvcjogZnVuY3Rpb24oKSBcclxuICB7XHJcbiAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgaWYgKHRyZWVWaWV3LmRyYWdnaW5nTm9kZSAhPT0gbnVsbCAmJiB0cmVlVmlldy5zZWxlY3RlZE5vZGUgIT09IG51bGwpICAgLy8gaGF2ZSB0byBmbGlwIHRoZSBzb3VyY2UgY29vcmRpbmF0ZXMgc2luY2Ugd2UgZGlkIHRoaXMgZm9yIHRoZSBleGlzdGluZyBjb25uZWN0b3JzIG9uIHRoZSBvcmlnaW5hbCB0cmVlXHJcbiAgICB7XHJcbiAgICAgIGRhdGEgPSBbeyBzb3VyY2U6IHsgeDogdHJlZVZpZXcuc2VsZWN0ZWROb2RlLnkwLCB5OiB0cmVlVmlldy5zZWxlY3RlZE5vZGUueDAgfSwgdGFyZ2V0OiB7IHg6IHRyZWVWaWV3LmRyYWdnaW5nTm9kZS55MCwgeTogdHJlZVZpZXcuZHJhZ2dpbmdOb2RlLngwIH0gfV07XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZhciBsaW5rID0gdHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwiLnRlbXBsaW5rXCIpLmRhdGEoZGF0YSk7XHJcbiAgICBsaW5rLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJ0ZW1wbGlua1wiKS5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSkuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xyXG4gICAgbGluay5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSk7XHJcbiAgICBsaW5rLmV4aXQoKS5yZW1vdmUoKTtcclxuICB9LFxyXG4gIG92ZXJDaXJjbGU6IGZ1bmN0aW9uKGQpIFxyXG4gIHtcclxuICAgIHRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IGQ7XHJcbiAgICB0cmVlVmlldy51cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgfSxcclxuICBvdXRDaXJjbGU6IGZ1bmN0aW9uKGQpIFxyXG4gIHtcclxuICAgIHRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICB0cmVlVmlldy51cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgfSxcclxuICBjZW50ZXJOb2RlOiBmdW5jdGlvbihzb3VyY2UpICAgICAvLyBGdW5jdGlvbiB0byBjZW50ZXIgbm9kZSB3aGVuIGNsaWNrZWQvZHJvcHBlZCBzbyBub2RlIGRvZXNuJ3QgZ2V0IGxvc3Qgd2hlbiBjb2xsYXBzaW5nL21vdmluZyB3aXRoIGxhcmdlIGFtb3VudCBvZiBjaGlsZHJlbi5cclxuICB7XHJcbiAgICBzY2FsZSA9IHRyZWVWaWV3Lnpvb21MaXN0ZW5lci5zY2FsZSgpO1xyXG4gICAgeCA9IC1zb3VyY2UueTA7XHJcbiAgICB5ID0gLXNvdXJjZS54MDtcclxuICAgIHggPSB4ICogc2NhbGUgKyB0cmVlVmlldy52aWV3ZXJXaWR0aCAvIDQ7XHJcbiAgICB5ID0geSAqIHNjYWxlICsgdHJlZVZpZXcudmlld2VySGVpZ2h0IC8gMjtcclxuICAgIGQzLnNlbGVjdCgnZycpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB4ICsgXCIsXCIgKyB5ICsgXCIpc2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiKTtcclxuICAgIHRyZWVWaWV3Lnpvb21MaXN0ZW5lci5zY2FsZShzY2FsZSk7XHJcbiAgICB0cmVlVmlldy56b29tTGlzdGVuZXIudHJhbnNsYXRlKFt4LCB5XSk7XHJcbiAgfSwgICAgICAgICAgXHJcbiAgY29tcHV0ZU5vZGVTaXplOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBub2RlU2l6ZSA9IE1JTl9OT0RFX1NJWkU7XHJcbiAgICBcclxuICAgIC8qaWYodHJlZS5maWVsZClcclxuICAgIHtcclxuICAgICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbdHJlZS5maWVsZC5uYW1lXSlcclxuICAgICAge1xyXG4gICAgICAgIC8vbm9kZVNpemUgPSAyICogTWF0aC5QSSAqIE1hdGguc3FydChNQVhfTk9ERV9TSVpFICogbm9kZS52YWx1ZXNbdHJlZS5maWVsZC5uYW1lXSAvIHRyZWUubWF4RmllbGRWYWx1ZSAvIE1hdGguUEkpO1xyXG4gICAgICAgIG5vZGVTaXplID0gTUFYX05PREVfU0laRSAqIE1hdGguc3FydChub2RlLnZhbHVlc1t0cmVlLmZpZWxkLm5hbWVdIC8gdHJlZS5tYXhGaWVsZFZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYobm9kZVNpemUgPCBNSU5fTk9ERV9TSVpFKSB7IG5vZGVTaXplID0gTUlOX05PREVfU0laRTsgfVxyXG4gICAgfSovXHJcbiAgICBcclxuICAgIHJldHVybiBub2RlU2l6ZTsgICAgICAgXHJcbiAgfSAgIFxyXG59OyIsInZhciBNSU5fTk9ERV9TSVpFID0gNTtcclxudmFyIE1BWF9OT0RFX1NJWkUgPSAxMDA7XHJcblxyXG52YXIgVkVSVElDQUxfVklFVyA9IDA7XHJcbnZhciBIT1JJWk9OVEFMX1ZJRVcgPSAxO1xyXG5cclxudmFyIHdlaWdodGVkVHJlZVZpZXcgPSBcclxue1xyXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKCcjdHJlZVZpZXcnKS5yZW1vdmUoKTtcclxuICB9LFxyXG4gIHJlZnJlc2g6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZSh3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpO1xyXG4gIH0sXHJcbiAgcm90YXRlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgaWYod2VpZ2h0ZWRUcmVlVmlldy5kaXJlY3Rpb24gPT09IEhPUklaT05UQUxfVklFVylcclxuICAgIHtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5kaXJlY3Rpb24gPSBWRVJUSUNBTF9WSUVXO1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3Lmhvcml6b250YWxfc3BhY2luZyA9IDEwMDtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nID0gNjA7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcuZGlhZ29uYWwgPSBkMy5zdmcuZGlhZ29uYWwoKS5wcm9qZWN0aW9uKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFtkLngsIGQueV07IH0pOyAgLy8gZGVmaW5lIGEgZDMgZGlhZ29uYWwgcHJvamVjdGlvbiBmb3IgdXNlIGJ5IHRoZSBub2RlIHBhdGhzIGxhdGVyIG9uLlxyXG4gICAgICBcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5yb290LnkwID0gd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QueDAgPSAwOyAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LmRpcmVjdGlvbiA9IEhPUklaT05UQUxfVklFVztcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5ob3Jpem9udGFsX3NwYWNpbmcgPSAzMDA7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcudmVydGljYWxfc3BhY2luZyA9IDIwMDtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5kaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpLnByb2plY3Rpb24oZnVuY3Rpb24oZCkgeyByZXR1cm4gW2QueSwgZC54XTsgfSk7ICAvLyBkZWZpbmUgYSBkMyBkaWFnb25hbCBwcm9qZWN0aW9uIGZvciB1c2UgYnkgdGhlIG5vZGUgcGF0aHMgbGF0ZXIgb24uXHJcbiAgICAgIFxyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QueDAgPSB3ZWlnaHRlZFRyZWVWaWV3LnZpZXdlckhlaWdodCAvIDI7XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcucm9vdC55MCA9IDA7ICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZSh3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpO1xyXG4gIH0sXHJcbiAgaW5pdDogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuZGlyZWN0aW9uID0gSE9SSVpPTlRBTF9WSUVXO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUgPSBudWxsO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5kdXJhdGlvbiA9IDc1MDtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuaG9yaXpvbnRhbF9zcGFjaW5nID0gMzAwO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nID0gMjAwOyAgICBcclxuICAgIFxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5tYXhMYWJlbExlbmd0aCA9IDA7XHJcbiAgICBcclxuICAgIHByb2plY3QudHJhdmVyc2UocHJvamVjdC5nZXRDaGlsZHJlbiwgZnVuY3Rpb24oZClcclxuICAgIHtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5tYXhMYWJlbExlbmd0aCA9IE1hdGgubWF4KGQubmFtZS5sZW5ndGgsIHdlaWdodGVkVHJlZVZpZXcubWF4TGFiZWxMZW5ndGgpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHdlaWdodGVkVHJlZVZpZXcudmlld2VyV2lkdGggPSAkKCcjdHJlZS1jb250YWluZXInKS53aWR0aCgpO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJIZWlnaHQgPSAkKCcjdHJlZS1jb250YWluZXInKS5oZWlnaHQoKTtcclxuICAgIFxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy50cmVlID0gZDMubGF5b3V0LnRyZWUoKS5zaXplKFt3ZWlnaHRlZFRyZWVWaWV3LnZpZXdlckhlaWdodCwgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJXaWR0aF0pO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5yb290ID0gcHJvamVjdC50cmVlO1xyXG4gICAgXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdTdGFydGVkID0gbnVsbDtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuZGlhZ29uYWwgPSBkMy5zdmcuZGlhZ29uYWwoKS5wcm9qZWN0aW9uKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFtkLnksIGQueF07IH0pOyAgLy8gZGVmaW5lIGEgZDMgZGlhZ29uYWwgcHJvamVjdGlvbiBmb3IgdXNlIGJ5IHRoZSBub2RlIHBhdGhzIGxhdGVyIG9uLiAgICAgICAgICAgICAgICBcclxuICB9LCAgXHJcbiAgcmVuZGVyOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy5kZXN0cm95KCk7XHJcbiAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwidHJlZVZpZXdcIj48ZGl2IGlkPVwidHJlZVZpZXdPcHRpb25zXCI+PGRpdiBpZD1cImV4cGFuZGVyQ29udGFpbmVyXCI+PC9kaXY+PC9kaXY+PGRpdiBpZD1cInRyZWUtY29udGFpbmVyXCI+PC9kaXY+PC9kaXY+Jyk7XHJcbiBcclxuICAgIGV4cGFuZGVyU2VsZWN0b3IuaW5pdChwcm9qZWN0LnRyZWUubWF4RGVwdGgpO1xyXG4gICAgJCgnI3RyZWVWaWV3T3B0aW9ucycpLmFwcGVuZCgnPGEgaHJlZj1cIiNcIiBpZD1cInRyZWVWaWV3Um90YXRlQnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgcHVsbC1yaWdodFwiPlJvdGF0ZSBWaWV3PC9hPicpO1xyXG4gICAgJCgnI3RyZWVWaWV3Um90YXRlQnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7IHdlaWdodGVkVHJlZVZpZXcucm90YXRlKCk7IH0pOyAgXHJcbiBcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuaW5pdCgpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHpvb20oKSB7IHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQzLmV2ZW50LnRyYW5zbGF0ZSArIFwiKXNjYWxlKFwiICsgZDMuZXZlbnQuc2NhbGUgKyBcIilcIik7IH0gICAvLyBEZWZpbmUgdGhlIHpvb20gZnVuY3Rpb24gZm9yIHRoZSB6b29tYWJsZSB0cmVlXHJcbiAgXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3Lnpvb21MaXN0ZW5lciA9IGQzLmJlaGF2aW9yLnpvb20oKS5zY2FsZUV4dGVudChbMC4xLCAzXSkub24oXCJ6b29tXCIsIHpvb20pOyAgICAgLy8gZGVmaW5lIHRoZSB3ZWlnaHRlZFRyZWVWaWV3Lnpvb21MaXN0ZW5lciB3aGljaCBjYWxscyB0aGUgem9vbSBmdW5jdGlvbiBvbiB0aGUgXCJ6b29tXCIgZXZlbnQgY29uc3RyYWluZWQgd2l0aGluIHRoZSBzY2FsZUV4dGVudHNcclxuICBcclxuICAgIGZ1bmN0aW9uIGluaXRpYXRlRHJhZyhkLCBkb21Ob2RlKSBcclxuICAgIHtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUgPSBkO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcbiAgICAgIGQzLnNlbGVjdEFsbCgnLmdob3N0Q2lyY2xlJykuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUgc2hvdycpO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuYXR0cignY2xhc3MnLCAnbm9kZSBhY3RpdmVEcmFnJyk7XHJcblxyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKS5zb3J0KGZ1bmN0aW9uKGEsIGIpICAgIC8vIHNlbGVjdCB0aGUgcGFyZW50IGFuZCBzb3J0IHRoZSBwYXRoJ3NcclxuICAgICAgeyBcclxuICAgICAgICBpZiAoYS5pZCAhPSB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZS5pZCkgcmV0dXJuIDE7ICAgICAgICAgIC8vIGEgaXMgbm90IHRoZSBob3ZlcmVkIGVsZW1lbnQsIHNlbmQgXCJhXCIgdG8gdGhlIGJhY2tcclxuICAgICAgICBlbHNlIHJldHVybiAtMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhIGlzIHRoZSBob3ZlcmVkIGVsZW1lbnQsIGJyaW5nIFwiYVwiIHRvIHRoZSBmcm9udFxyXG4gICAgICB9KTtcclxuICAgICAgLy8gaWYgbm9kZXMgaGFzIGNoaWxkcmVuLCByZW1vdmUgdGhlIGxpbmtzIGFuZCBub2Rlc1xyXG4gICAgICBpZiAobm9kZXMubGVuZ3RoID4gMSkgXHJcbiAgICAgIHtcclxuICAgICAgICAvLyByZW1vdmUgbGluayBwYXRoc1xyXG4gICAgICAgIGxpbmtzID0gd2VpZ2h0ZWRUcmVlVmlldy50cmVlLmxpbmtzKG5vZGVzKTtcclxuICAgICAgICBub2RlUGF0aHMgPSB3ZWlnaHRlZFRyZWVWaWV3LnN2Z0dyb3VwLnNlbGVjdEFsbChcInBhdGgubGlua1wiKS5kYXRhKGxpbmtzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC5pZDsgfSkucmVtb3ZlKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gcmVtb3ZlIGNoaWxkIG5vZGVzXHJcbiAgICAgICAgbm9kZXNFeGl0ID0gd2VpZ2h0ZWRUcmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoXCJnLm5vZGVcIikuZGF0YShub2RlcywgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5pZDsgfSkuZmlsdGVyKGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIGQuaWQgIT0gd2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUuaWQ7IH0pLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIC8vIHJlbW92ZSBwYXJlbnQgbGlua1xyXG4gICAgICBwYXJlbnRMaW5rID0gd2VpZ2h0ZWRUcmVlVmlldy50cmVlLmxpbmtzKHdlaWdodGVkVHJlZVZpZXcudHJlZS5ub2Rlcyh3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZS5wYXJlbnQpKTtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy5zdmdHcm91cC5zZWxlY3RBbGwoJ3BhdGgubGluaycpLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7IHJldHVybiBkLnRhcmdldC5pZCA9PSB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZS5pZDsgfSkucmVtb3ZlKCk7XHJcblxyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdTdGFydGVkID0gbnVsbDtcclxuICAgIH1cclxuICBcclxuICAgIC8vIGRlZmluZSB0aGUgYmFzZVN2ZywgYXR0YWNoaW5nIGEgY2xhc3MgZm9yIHN0eWxpbmcgYW5kIHRoZSB3ZWlnaHRlZFRyZWVWaWV3Lnpvb21MaXN0ZW5lclxyXG4gICAgdmFyIGJhc2VTdmcgPSBkMy5zZWxlY3QoXCIjdHJlZS1jb250YWluZXJcIikuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJXaWR0aClcclxuICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJIZWlnaHQpXHJcbiAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJvdmVybGF5XCIpXHJcbiAgICAgIC5jYWxsKHdlaWdodGVkVHJlZVZpZXcuem9vbUxpc3RlbmVyKTtcclxuICBcclxuICAgIGRyYWdMaXN0ZW5lciA9IGQzLmJlaGF2aW9yLmRyYWcoKS5vbihcImRyYWdzdGFydFwiLCB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdzdGFydCkub24oXCJkcmFnXCIsIGRyYWcpLm9uKFwiZHJhZ2VuZFwiLCB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdlbmQpOyAgLy8gRGVmaW5lIHRoZSBkcmFnIGxpc3RlbmVycyBmb3IgZHJhZy9kcm9wIGJlaGF2aW91ciBvZiBub2Rlcy5cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gZHJhZyhkKVxyXG4gICAge1xyXG4gICAgICBpZiAoZCA9PSB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAod2VpZ2h0ZWRUcmVlVmlldy5kcmFnU3RhcnRlZCkgXHJcbiAgICAgIHtcclxuICAgICAgICBkb21Ob2RlID0gdGhpcztcclxuICAgICAgICBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGQueDAgKz0gZDMuZXZlbnQuZHk7XHJcbiAgICAgIGQueTAgKz0gZDMuZXZlbnQuZHg7XHJcbiAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZC55MCArIFwiLFwiICsgZC54MCArIFwiKVwiKTtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGVUZW1wQ29ubmVjdG9yKCk7ICAgICAgXHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBBcHBlbmQgYSBncm91cCB3aGljaCBob2xkcyBhbGwgbm9kZXMgYW5kIHdoaWNoIHRoZSB6b29tIExpc3RlbmVyIGNhbiBhY3QgdXBvbi5cclxuICAgIHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAgPSBiYXNlU3ZnLmFwcGVuZChcImdcIik7XHJcbiAgXHJcbiAgICAvLyBEZWZpbmUgdGhlIHJvb3RcclxuICAgIHdlaWdodGVkVHJlZVZpZXcucm9vdC54MCA9IHdlaWdodGVkVHJlZVZpZXcudmlld2VySGVpZ2h0IC8gMjtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcucm9vdC55MCA9IDA7XHJcbiAgICBcclxuICAgIC8vIExheW91dCB0aGUgdHJlZSBpbml0aWFsbHkgYW5kIGNlbnRlciBvbiB0aGUgcm9vdCBub2RlLlxyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGUod2VpZ2h0ZWRUcmVlVmlldy5yb290KTtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuY2VudGVyTm9kZSh3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpOyAgICBcclxuICB9LFxyXG4gIGNsaWNrOiBmdW5jdGlvbihkKSAgIC8vIFRvZ2dsZSBjaGlsZHJlbiBvbiBjbGljay5cclxuICB7XHJcbiAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgeyByZXR1cm47IH0gLy8gY2xpY2sgc3VwcHJlc3NlZFxyXG4gICAgcHJvamVjdC50b2dnbGVFeHBhbnNpb24oZCk7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZShkKTtcclxuICB9LCAgXHJcbiAgdXBkYXRlOiBmdW5jdGlvbihzb3VyY2UpIFxyXG4gIHsgXHJcbiAgICB2YXIgaSA9IDA7XHJcbiAgICAgICAgXHJcbiAgICAvLyBDb21wdXRlIHRoZSBuZXcgaGVpZ2h0LCBmdW5jdGlvbiBjb3VudHMgdG90YWwgY2hpbGRyZW4gb2Ygcm9vdCBub2RlIGFuZCBzZXRzIHRyZWUgaGVpZ2h0IGFjY29yZGluZ2x5LlxyXG4gICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgbGF5b3V0IGxvb2tpbmcgc3F1YXNoZWQgd2hlbiBuZXcgbm9kZXMgYXJlIG1hZGUgdmlzaWJsZSBvciBsb29raW5nIHNwYXJzZSB3aGVuIG5vZGVzIGFyZSByZW1vdmVkXHJcbiAgICAvLyBUaGlzIG1ha2VzIHRoZSBsYXlvdXQgbW9yZSBjb25zaXN0ZW50LlxyXG4gICAgdmFyIGxldmVsV2lkdGggPSBbMV07XHJcbiAgICB2YXIgY2hpbGRDb3VudCA9IGZ1bmN0aW9uKGxldmVsLCBuKSBcclxuICAgIHtcclxuICAgICAgaWYgKG4uY2hpbGRyZW4gJiYgbi5jaGlsZHJlbi5sZW5ndGggPiAwKSBcclxuICAgICAge1xyXG4gICAgICAgIGlmIChsZXZlbFdpZHRoLmxlbmd0aCA8PSBsZXZlbCArIDEpIHsgbGV2ZWxXaWR0aC5wdXNoKDApOyB9XHJcblxyXG4gICAgICAgIGxldmVsV2lkdGhbbGV2ZWwgKyAxXSArPSBuLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICBuLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oZCkgeyBjaGlsZENvdW50KGxldmVsICsgMSwgZCk7IH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjaGlsZENvdW50KDAsIHdlaWdodGVkVHJlZVZpZXcucm9vdCk7XHJcbiAgICB2YXIgbmV3SGVpZ2h0ID0gZDMubWF4KGxldmVsV2lkdGgpICogd2VpZ2h0ZWRUcmVlVmlldy52ZXJ0aWNhbF9zcGFjaW5nOyAvLyAyNSBwaXhlbHMgcGVyIGxpbmVcclxuICAgIHdlaWdodGVkVHJlZVZpZXcudHJlZSA9IHdlaWdodGVkVHJlZVZpZXcudHJlZS5zaXplKFtuZXdIZWlnaHQsIHdlaWdodGVkVHJlZVZpZXcudmlld2VyV2lkdGhdKTtcclxuXHJcbiAgICAvLyBDb21wdXRlIHRoZSBuZXcgdHJlZSBsYXlvdXQuXHJcbiAgICB2YXIgbm9kZXMgPSB3ZWlnaHRlZFRyZWVWaWV3LnRyZWUubm9kZXMod2VpZ2h0ZWRUcmVlVmlldy5yb290KS5yZXZlcnNlKCk7XHJcbiAgICB2YXIgbGlua3MgPSB3ZWlnaHRlZFRyZWVWaWV3LnRyZWUubGlua3Mobm9kZXMpO1xyXG5cclxuICAgIC8vIFNldCB3aWR0aHMgYmV0d2VlbiBsZXZlbHMgYmFzZWQgb24gbWF4TGFiZWxMZW5ndGguXHJcbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAvL2QueSA9IChkLmRlcHRoICogKHdlaWdodGVkVHJlZVZpZXcubWF4TGFiZWxMZW5ndGggKiAxMCkpOyAvL21heExhYmVsTGVuZ3RoICogMTBweFxyXG4gICAgICAgIC8vIGFsdGVybmF0aXZlbHkgdG8ga2VlcCBhIGZpeGVkIHNjYWxlIG9uZSBjYW4gc2V0IGEgZml4ZWQgZGVwdGggcGVyIGxldmVsXHJcbiAgICAgICAgLy8gTm9ybWFsaXplIGZvciBmaXhlZC1kZXB0aCBieSBjb21tZW50aW5nIG91dCBiZWxvdyBsaW5lXHJcbiAgICAgICAgZC55ID0gKGQuZGVwdGggKiB3ZWlnaHRlZFRyZWVWaWV3Lmhvcml6b250YWxfc3BhY2luZyk7IC8vMjAwcHggcGVyIGxldmVsLlxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVXBkYXRlIHRoZSBub2Rlc+KAplxyXG4gICAgbm9kZSA9IHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpLmRhdGEobm9kZXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuaWQgfHwgKGQuaWQgPSArK2kpOyB9KTtcclxuXHJcbiAgICAvLyBFbnRlciBhbnkgbmV3IG5vZGVzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cclxuICAgIHZhciBub2RlRW50ZXIgPSBub2RlLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAuY2FsbChkcmFnTGlzdGVuZXIpXHJcbiAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlXCIpXHJcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgc291cmNlLnkwICsgXCIsXCIgKyBzb3VyY2UueDAgKyBcIilcIjsgfSlcclxuICAgICAgLm9uKCdjbGljaycsIHdlaWdodGVkVHJlZVZpZXcuY2xpY2spO1xyXG5cclxuICAgIG5vZGVFbnRlci5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ25vZGVDaXJjbGUnKVxyXG4gICAgICAuYXR0cihcInJcIiwgMClcclxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChkKSA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiOyB9KTtcclxuXHJcbiAgICBub2RlRW50ZXIuYXBwZW5kKFwidGV4dFwiKVxyXG4gICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5oYXNDaGlsZHJlbihkKSA/IC0xMCA6IDEwOyB9KVxyXG4gICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcclxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ25vZGVUZXh0JylcclxuICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0Lmhhc0NoaWxkcmVuKGQpID8gXCJlbmRcIiA6IFwic3RhcnRcIjsgfSlcclxuICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5uYW1lOyB9KVxyXG4gICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMCk7XHJcblxyXG4gICAgLy8gcGhhbnRvbSBub2RlIHRvIGdpdmUgdXMgbW91c2VvdmVyIGluIGEgcmFkaXVzIGFyb3VuZCBpdFxyXG4gICAgbm9kZUVudGVyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUnKVxyXG4gICAgICAuYXR0cihcInJcIiwgMzApXHJcbiAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCAwLjIpIC8vIGNoYW5nZSB0aGlzIHRvIHplcm8gdG8gaGlkZSB0aGUgdGFyZ2V0IGFyZWFcclxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcInJlZFwiKVxyXG4gICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbW91c2VvdmVyJylcclxuICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uKG5vZGUpIHsgd2VpZ2h0ZWRUcmVlVmlldy5vdmVyQ2lyY2xlKG5vZGUpOyB9KVxyXG4gICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbihub2RlKSB7IHdlaWdodGVkVHJlZVZpZXcub3V0Q2lyY2xlKG5vZGUpOyB9KTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIHRleHQgdG8gcmVmbGVjdCB3aGV0aGVyIG5vZGUgaGFzIGNoaWxkcmVuIG9yIG5vdC5cclxuICAgIG5vZGUuc2VsZWN0KCd0ZXh0JylcclxuICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5oYXNDaGlsZHJlbihkKSA/IC0xMCA6IDEwOyB9KVxyXG4gICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcHJvamVjdC5oYXNDaGlsZHJlbihkKSA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7IH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5uYW1lOyB9KTtcclxuXHJcbiAgICAvLyBDaGFuZ2UgdGhlIGNpcmNsZSBmaWxsIGRlcGVuZGluZyBvbiB3aGV0aGVyIGl0IGhhcyBjaGlsZHJlbiBhbmQgaXMgY29sbGFwc2VkXHJcbiAgICBub2RlLnNlbGVjdChcImNpcmNsZS5ub2RlQ2lyY2xlXCIpXHJcbiAgICAgIC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB3ZWlnaHRlZFRyZWVWaWV3LmNvbXB1dGVOb2RlU2l6ZShkKTsgfSlcclxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChkKSA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiOyB9KTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIG5vZGVzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cclxuICAgIHZhciBub2RlVXBkYXRlO1xyXG4gICAgaWYod2VpZ2h0ZWRUcmVlVmlldy5kaXJlY3Rpb24gPT09IFZFUlRJQ0FMX1ZJRVcpXHJcbiAgICB7XHJcbiAgICAgIG5vZGVVcGRhdGUgPSBub2RlLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiOyB9KTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgbm9kZVVwZGF0ZSA9IG5vZGUuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIGQueSArIFwiLFwiICsgZC54ICsgXCIpXCI7IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZhZGUgdGhlIHRleHQgaW5cclxuICAgIG5vZGVVcGRhdGUuc2VsZWN0KFwidGV4dFwiKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAxKTtcclxuXHJcbiAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgIHZhciBub2RlRXhpdCA9IG5vZGUuZXhpdCgpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueSArIFwiLFwiICsgc291cmNlLnggKyBcIilcIjsgfSlcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgbm9kZUV4aXQuc2VsZWN0KFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIDApO1xyXG4gICAgbm9kZUV4aXQuc2VsZWN0KFwidGV4dFwiKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIGxpbmtz4oCmXHJcbiAgICB2YXIgbGluayA9IHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwicGF0aC5saW5rXCIpLmRhdGEobGlua3MsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudGFyZ2V0LmlkOyB9KTtcclxuXHJcbiAgICAvLyBFbnRlciBhbnkgbmV3IGxpbmtzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cclxuICAgIGxpbmsuZW50ZXIoKS5pbnNlcnQoXCJwYXRoXCIsIFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5rXCIpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgdmFyIG8gPSB7IHg6IHNvdXJjZS54MCwgeTogc291cmNlLnkwIH07XHJcbiAgICAgICAgICAgIHJldHVybiB3ZWlnaHRlZFRyZWVWaWV3LmRpYWdvbmFsKHsgc291cmNlOiBvLCB0YXJnZXQ6IG8gfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLy8gVHJhbnNpdGlvbiBsaW5rcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICBsaW5rLmF0dHIoXCJkXCIsIHdlaWdodGVkVHJlZVZpZXcuZGlhZ29uYWwpO1xyXG5cclxuICAgIC8vIFRyYW5zaXRpb24gZXhpdGluZyBub2RlcyB0byB0aGUgcGFyZW50J3MgbmV3IHBvc2l0aW9uLlxyXG4gICAgbGluay5leGl0KClcclxuICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB2YXIgbyA9IHsgeDogc291cmNlLngsIHk6IHNvdXJjZS55IH07XHJcbiAgICAgICAgICAgIHJldHVybiB3ZWlnaHRlZFRyZWVWaWV3LmRpYWdvbmFsKHsgc291cmNlOiBvLCB0YXJnZXQ6IG8gfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgLy8gU3Rhc2ggdGhlIG9sZCBwb3NpdGlvbnMgZm9yIHRyYW5zaXRpb24uXHJcbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsgZC54MCA9IGQueDsgZC55MCA9IGQueTsgfSk7XHJcbiAgfSwgIFxyXG4gIGRyYWdzdGFydDogZnVuY3Rpb24oZClcclxuICB7XHJcbiAgICBpZiAoZCA9PSB3ZWlnaHRlZFRyZWVWaWV3LnJvb3QpIHsgcmV0dXJuOyB9XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdTdGFydGVkID0gdHJ1ZTtcclxuICAgIG5vZGVzID0gd2VpZ2h0ZWRUcmVlVmlldy50cmVlLm5vZGVzKGQpO1xyXG4gICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAvLyBpdCdzIGltcG9ydGFudCB0aGF0IHdlIHN1cHByZXNzIHRoZSBtb3VzZW92ZXIgZXZlbnQgb24gdGhlIG5vZGUgYmVpbmcgZHJhZ2dlZC4gT3RoZXJ3aXNlIGl0IHdpbGwgYWJzb3JiIHRoZSBtb3VzZW92ZXIgZXZlbnQgYW5kIHRoZSB1bmRlcmx5aW5nIG5vZGUgd2lsbCBub3QgZGV0ZWN0IGl0IGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7ICAgICAgXHJcbiAgfSxcclxuICBkcmFnZW5kOiBmdW5jdGlvbihkKVxyXG4gIHtcclxuICAgIGlmIChkID09IHdlaWdodGVkVHJlZVZpZXcucm9vdCkgeyByZXR1cm47IH1cclxuICAgIGRvbU5vZGUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICBpZiAod2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUpIFxyXG4gICAge1xyXG4gICAgICAvLyBub3cgcmVtb3ZlIHRoZSBlbGVtZW50IGZyb20gdGhlIHBhcmVudCwgYW5kIGluc2VydCBpdCBpbnRvIHRoZSBuZXcgZWxlbWVudHMgY2hpbGRyZW5cclxuICAgICAgcHJvamVjdC5yZW1vdmVOb2RlKHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgXHJcbiAgICAgIGlmKCF3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZS5jaGlsZHJlbikgeyB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZS5jaGlsZHJlbiA9IFtdOyB9XHJcbiAgICAgIHdlaWdodGVkVHJlZVZpZXcuc2VsZWN0ZWROb2RlLmNoaWxkcmVuLnB1c2god2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUpO1xyXG4gICAgICBcclxuICAgICAgcHJvamVjdC5leHBhbmROb2RlKHdlaWdodGVkVHJlZVZpZXcuc2VsZWN0ZWROb2RlKTsgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBub2RlIGJlaW5nIGFkZGVkIHRvIGlzIGV4cGFuZGVkIHNvIHVzZXIgY2FuIHNlZSBhZGRlZCBub2RlIGlzIGNvcnJlY3RseSBtb3ZlZCAgICBcclxuICAgIH0gXHJcbiAgXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICBkMy5zZWxlY3RBbGwoJy5naG9zdENpcmNsZScpLmF0dHIoJ2NsYXNzJywgJ2dob3N0Q2lyY2xlJyk7XHJcbiAgICBkMy5zZWxlY3QoZG9tTm9kZSkuYXR0cignY2xhc3MnLCAnbm9kZScpO1xyXG4gICAgXHJcbiAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICcnKTsgICAvLyBub3cgcmVzdG9yZSB0aGUgbW91c2VvdmVyIGV2ZW50IG9yIHdlIHdvbid0IGJlIGFibGUgdG8gZHJhZyBhIDJuZCB0aW1lXHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICAgIFxyXG4gICAgaWYgKHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlICE9PSBudWxsKSBcclxuICAgIHtcclxuICAgICAgd2VpZ2h0ZWRUcmVlVmlldy51cGRhdGUod2VpZ2h0ZWRUcmVlVmlldy5yb290KTtcclxuICAgICAgLy93ZWlnaHRlZFRyZWVWaWV3LmNlbnRlck5vZGUod2VpZ2h0ZWRUcmVlVmlldy5kcmFnZ2luZ05vZGUpO1xyXG4gICAgICB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZSA9IG51bGw7XHJcbiAgICB9ICAgICAgXHJcbiAgfSxcclxuICAvLyBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIHRlbXBvcmFyeSBjb25uZWN0b3IgaW5kaWNhdGluZyBkcmFnZ2luZyBhZmZpbGlhdGlvblxyXG4gIHVwZGF0ZVRlbXBDb25uZWN0b3I6IGZ1bmN0aW9uKCkgXHJcbiAge1xyXG4gICAgdmFyIGRhdGEgPSBbXTtcclxuICAgIGlmICh3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZSAhPT0gbnVsbCAmJiB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZSAhPT0gbnVsbCkgICAvLyBoYXZlIHRvIGZsaXAgdGhlIHNvdXJjZSBjb29yZGluYXRlcyBzaW5jZSB3ZSBkaWQgdGhpcyBmb3IgdGhlIGV4aXN0aW5nIGNvbm5lY3RvcnMgb24gdGhlIG9yaWdpbmFsIHRyZWVcclxuICAgIHtcclxuICAgICAgZGF0YSA9IFt7IHNvdXJjZTogeyB4OiB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZS55MCwgeTogd2VpZ2h0ZWRUcmVlVmlldy5zZWxlY3RlZE5vZGUueDAgfSwgdGFyZ2V0OiB7IHg6IHdlaWdodGVkVHJlZVZpZXcuZHJhZ2dpbmdOb2RlLnkwLCB5OiB3ZWlnaHRlZFRyZWVWaWV3LmRyYWdnaW5nTm9kZS54MCB9IH1dO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgbGluayA9IHdlaWdodGVkVHJlZVZpZXcuc3ZnR3JvdXAuc2VsZWN0QWxsKFwiLnRlbXBsaW5rXCIpLmRhdGEoZGF0YSk7XHJcbiAgICBsaW5rLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJ0ZW1wbGlua1wiKS5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSkuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xyXG4gICAgbGluay5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSk7XHJcbiAgICBsaW5rLmV4aXQoKS5yZW1vdmUoKTtcclxuICB9LFxyXG4gIG92ZXJDaXJjbGU6IGZ1bmN0aW9uKGQpIFxyXG4gIHtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcuc2VsZWN0ZWROb2RlID0gZDtcclxuICAgIHdlaWdodGVkVHJlZVZpZXcudXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gIH0sXHJcbiAgb3V0Q2lyY2xlOiBmdW5jdGlvbihkKSBcclxuICB7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICB3ZWlnaHRlZFRyZWVWaWV3LnVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICB9LFxyXG4gIGNlbnRlck5vZGU6IGZ1bmN0aW9uKHNvdXJjZSkgICAgIC8vIEZ1bmN0aW9uIHRvIGNlbnRlciBub2RlIHdoZW4gY2xpY2tlZC9kcm9wcGVkIHNvIG5vZGUgZG9lc24ndCBnZXQgbG9zdCB3aGVuIGNvbGxhcHNpbmcvbW92aW5nIHdpdGggbGFyZ2UgYW1vdW50IG9mIGNoaWxkcmVuLlxyXG4gIHtcclxuICAgIHNjYWxlID0gd2VpZ2h0ZWRUcmVlVmlldy56b29tTGlzdGVuZXIuc2NhbGUoKTtcclxuICAgIHggPSAtc291cmNlLnkwO1xyXG4gICAgeSA9IC1zb3VyY2UueDA7XHJcbiAgICB4ID0geCAqIHNjYWxlICsgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJXaWR0aCAvIDQ7XHJcbiAgICB5ID0geSAqIHNjYWxlICsgd2VpZ2h0ZWRUcmVlVmlldy52aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgZDMuc2VsZWN0KCdnJykuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHggKyBcIixcIiArIHkgKyBcIilzY2FsZShcIiArIHNjYWxlICsgXCIpXCIpO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy56b29tTGlzdGVuZXIuc2NhbGUoc2NhbGUpO1xyXG4gICAgd2VpZ2h0ZWRUcmVlVmlldy56b29tTGlzdGVuZXIudHJhbnNsYXRlKFt4LCB5XSk7XHJcbiAgfSwgICAgICAgICAgXHJcbiAgY29tcHV0ZU5vZGVTaXplOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBub2RlU2l6ZSA9IE1JTl9OT0RFX1NJWkU7XHJcbiAgICBcclxuICAgIGlmKHRyZWUuZmllbGQpXHJcbiAgICB7XHJcbiAgICAgIGlmKG5vZGUudmFsdWVzICYmIG5vZGUudmFsdWVzW3RyZWUuZmllbGQubmFtZV0pXHJcbiAgICAgIHtcclxuICAgICAgICAvL25vZGVTaXplID0gMiAqIE1hdGguUEkgKiBNYXRoLnNxcnQoTUFYX05PREVfU0laRSAqIG5vZGUudmFsdWVzW3RyZWUuZmllbGQubmFtZV0gLyB0cmVlLm1heEZpZWxkVmFsdWUgLyBNYXRoLlBJKTtcclxuICAgICAgICBub2RlU2l6ZSA9IE1BWF9OT0RFX1NJWkUgKiBNYXRoLnNxcnQobm9kZS52YWx1ZXNbdHJlZS5maWVsZC5uYW1lXSAvIHRyZWUubWF4RmllbGRWYWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmKG5vZGVTaXplIDwgTUlOX05PREVfU0laRSkgeyBub2RlU2l6ZSA9IE1JTl9OT0RFX1NJWkU7IH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIG5vZGVTaXplOyAgICAgICBcclxuICB9ICAgXHJcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9