function aggregate_any(e,a){if(e.nodes&&0!==e.nodes.length){for(var n=0,l=0;l<e.nodes.length;l++)n+=aggregate_any(e.nodes[l],a);return e.values||(e.values={}),e.values[a]=n,document.getElementById(a+e.id).value=n,n}return e.values&&e.values[a]?parseFloat(e.values[a]):0}
var DOWN_ARROW_IMAGE_PATH="images/down-arrow.png",CHECK_MARK_IMAGE_PATH="images/checkmark.png",BLANK_MARK_IMAGE_PATH="images/blankmark.png";
function displayTreeView(t){function e(t,n,r){if(t){n(t);var a=r(t);if(a)for(var l=a.length,o=0;l>o;o++)e(a[o],n,r)}}function n(){A.sort(function(t,e){return e.name.toLowerCase()<t.name.toLowerCase()?1:-1})}function r(t,e){var n=m;panTimer&&(clearTimeout(panTimer),translateCoords=d3.transform(z.attr("transform")),"left"==e||"right"==e?(translateX="left"==e?translateCoords.translate[0]+n:translateCoords.translate[0]-n,translateY=translateCoords.translate[1]):("up"==e||"down"==e)&&(translateX=translateCoords.translate[0],translateY="up"==e?translateCoords.translate[1]+n:translateCoords.translate[1]-n),scaleX=translateCoords.scale[0],scaleY=translateCoords.scale[1],scale=N.scale(),z.transition().attr("transform","translate("+translateX+","+translateY+")scale("+scale+")"),d3.select(t).select("g.node").attr("transform","translate("+translateX+","+translateY+")"),N.scale(N.scale()),N.translate([translateX,translateY]),panTimer=setTimeout(function(){r(t,n,e)},50))}function a(){z.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function l(t,e){v=t,d3.select(e).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(e).attr("class","node activeDrag"),z.selectAll("g.node").sort(function(t,e){return t.id!=v.id?1:-1}),nodes.length>1&&(links=A.links(nodes),nodePaths=z.selectAll("path.link").data(links,function(t){return t.target.id}).remove(),nodesExit=z.selectAll("g.node").data(nodes,function(t){return t.id}).filter(function(t,e){return t.id==v.id?!1:!0}).remove()),parentLink=A.links(A.nodes(v.parent)),z.selectAll("path.link").filter(function(t,e){return t.target.id==v.id}).remove(),dragStarted=null}function o(){console.log(domNode),p=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),console.log(domNode),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),L(),null!==v&&(u(f),i(v),v=null)}function s(t){t._children&&(t.children=t._children,t.children.forEach(s),t._children=null)}function i(t){scale=N.scale(),x=-t.y0,y=-t.x0,x=x*scale+_/2,y=y*scale+w/2,d3.select("g").transition().duration(T).attr("transform","translate("+x+","+y+")scale("+scale+")"),N.scale(scale),N.translate([x,y])}function d(t){return t.children?(t._children=t.children,t.children=null):t._children&&(t.children=t._children,t._children=null),t}function c(t){d3.event.defaultPrevented||(t=d(t),u(t),i(t))}function u(t){var e=[1],n=function(t,r){r.nodes&&r.nodes.length>0&&(e.length<=t+1&&e.push(0),e[t+1]+=r.nodes.length,r.nodes.forEach(function(e){n(t+1,e)}))};n(0,f);var r=25*d3.max(e);A=A.size([r,_]);var a=A.nodes(f).reverse(),l=A.links(a);a.forEach(function(t){t.y=10*t.depth*g}),node=z.selectAll("g.node").data(a,function(t){return t.id||(t.id=++k)});var o=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).on("click",c);o.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(t){return t._children?"lightsteelblue":"#fff"}),o.append("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}).style("fill-opacity",0),o.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(t){Y(t)}).on("mouseout",function(t){b(t)}),node.select("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}),node.select("circle.nodeCircle").attr("r",4.5).style("fill",function(t){return t._children?"lightsteelblue":"#fff"});var s=node.transition().duration(T).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});s.select("text").style("fill-opacity",1);var i=node.exit().transition().duration(T).attr("transform",function(e){return"translate("+t.y+","+t.x+")"}).remove();i.select("circle").attr("r",0),i.select("text").style("fill-opacity",0);var d=z.selectAll("path.link").data(l,function(t){return t.target.id});d.enter().insert("path","g").attr("class","link").attr("d",function(e){var n={x:t.x0,y:t.y0};return E({source:n,target:n})}),d.transition().duration(T).attr("d",E),d.exit().transition().duration(T).attr("d",function(e){var n={x:t.x,y:t.y};return E({source:n,target:n})}).remove(),a.forEach(function(t){t.x0=t.x,t.y0=t.y})}$("body").append('<div id="tree-container"></div>');var f,h=0,g=0,p=null,v=null,m=200,C=20,k=0,T=750,_=$("#tree-container").width(),w=$("#tree-container").height(),A=d3.layout.tree().size([w,_]);A.children(function(t){return t.nodes});var E=d3.svg.diagonal().projection(function(t){return[t.y,t.x]});e(t,function(t){h++,g=Math.max(t.name.length,g)},function(t){return t.nodes&&t.nodes.length>0?t.nodes:null}),n();var N=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",a),X=d3.select("#tree-container").append("svg").attr("width",_).attr("height",w).attr("class","overlay").call(N);dragListener=d3.behavior.drag().on("dragstart",function(t){console.log("dragstart"),t!=f&&(dragStarted=!0,nodes=A.nodes(t),d3.event.sourceEvent.stopPropagation())}).on("drag",function(t){if(t!=f){if(dragStarted&&(domNode=this,l(t,domNode)),relCoords=d3.mouse($("svg").get(0)),relCoords[0]<C)panTimer=!0,r(this,"left");else if(relCoords[0]>$("svg").width()-C)panTimer=!0,r(this,"right");else if(relCoords[1]<C)panTimer=!0,r(this,"up");else if(relCoords[1]>$("svg").height()-C)panTimer=!0,r(this,"down");else try{clearTimeout(panTimer)}catch(e){}t.x0+=d3.event.dy,t.y0+=d3.event.dx;var n=d3.select(this);n.attr("transform","translate("+t.y0+","+t.x0+")"),L()}}).on("dragend",function(t){if(console.log("dragend"),t!=f)if(domNode=this,p){var e=v.parent.children.indexOf(v);e>-1&&v.parent.children.splice(e,1),p.nodes.push(v),s(p),n(),o()}else o()});var Y=function(t){p=t,L()},b=function(t){p=null,L()},L=function(){var t=[];null!==v&&null!==p&&(t=[{source:{x:p.y0,y:p.x0},target:{x:v.y0,y:v.x0}}]);var e=z.selectAll(".templink").data(t);e.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),e.attr("d",d3.svg.diagonal()),e.exit().remove()},z=X.append("g");f=t,f.x0=w/2,f.y0=0,u(f),i(f)}
"use strict";var REDIPS=REDIPS||{};REDIPS.drag=function(){var e,o,t,n,r,d,l,i,a,s,c,f,p,g,u,v,y,m,h,w,E,b,D,I,S,R,P,x,N,T,C,B,j,k=null,L={width:0,height:0},M={width:null,height:null,container:[],obj:null},O={page:{x:0,y:0},div:{x:0,y:0},flag:{x:0,y:0}},Y=[],H=[],W=null,_=null,X={x:0,y:0},A={x:0,y:0,value:7,flag:!1},V=!1,z=!1,F=null,q=null,K=null,$=null,G=null,J=null,Q=!1,U=!1,Z={colorTd:"#FFCFAE",colorTr:"#9BB3DA"},ee={enable:!0,bound:25,speed:20},oe={borderDisabled:"dotted",opacityDisabled:"",rowEmptyColor:"white"},te={},ne={keyDiv:!1,keyRow:!1,sendBack:!1,drop:!1},re={cloned:function(){},clonedDropped:function(){},clonedEnd1:function(){},clonedEnd2:function(){},dropped:function(){},droppedBefore:function(){},finish:function(){},notCloned:function(){},notMoved:function(){},rowChanged:function(){},rowClicked:function(){},rowCloned:function(){},rowDropped:function(){},rowDroppedBefore:function(){},rowDroppedSource:function(){},rowMoved:function(){},rowNotCloned:function(){},rowNotMoved:function(){}};return e=function(){if(W=document.getElementById("redips-drag"),j=m(),!document.getElementById("redips_clone")){var e=document.createElement("div");e.id="redips_clone",e.style.width=e.style.height="1px",W.appendChild(e)}o("init",".redips-drag"),T=document.getElementById("treeTable"),T.redips={},c(),REDIPS.event.add(window,"resize",c),REDIPS.event.add(window,"scroll",y)},n=function(e){var o,t,n,l,i=e||window.event;if(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),V=i.shiftKey,window.getSelection)window.getSelection().removeAllRanges();else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(a){}return n=X.x=i.clientX,l=X.y=i.clientY,A.x=n,A.y=l,A.flag=!1,REDIPS.drag.objOld=U=Q||this,REDIPS.drag.obj=Q=this,z=Q.className.indexOf("redips-clone")>-1,REDIPS.drag.obj=Q=R(Q),y(),F=$=null,f(),K=q=F,J=G=$,REDIPS.drag.event.rowClicked(te.current),null!==F&&null!==$||(f(),K=q=F,J=G=$,null!==F&&null!==$)?(C=B=!1,REDIPS.event.add(document,"mousemove",d),REDIPS.event.add(document,"mouseup",r),null!==F&&(N=u(F)),t=D(T,"position"),"fixed"!==t&&(t=D(T.parentNode,"position")),o=v(Q,t),k=[l-o[0],o[1]-n,o[2]-l,n-o[3]],!1):!0},R=function(e){var o,t,n;return"DIV"===e.nodeName?(n=e,e=I("TR",e),void 0===e.redips&&(e.redips={}),e.redips.div=n,e):(t=e,o=document.createElement("table"),o.innerHTML='<tr id="'+t.id+'" class="'+t.classList+'">'+t.innerHTML+"</tr>",o.redips={},o.redips.sourceRow=t,E(t,o.rows[0]),document.getElementById("redips_clone").appendChild(o),o)},P=function(e){var o,t,n;n=function(e){var o;void 0!==e.redips&&e.redips.emptyRow?S(e,"empty",REDIPS.drag.style.rowEmptyColor):(o=I("TABLE",e),o.deleteRow(e.rowIndex))};var r=Q;e>T.rows.length-1&&(e=T.rows.length-1);var d=T.rows[e];t=r.getElementsByTagName("tr")[0],r.parentNode.removeChild(r),o=REDIPS.drag.event.rowDroppedBefore(T,r.redips.sourceRow.rowIndex),o!==!1&&(e<T.rows.length?d.parentNode.insertBefore(t,d.nextSibling):(d.parentNode.appendChild(t),d=T.rows[0]),B||n(r.redips.sourceRow),delete t.redips.emptyRow,REDIPS.drag.event.rowDropped(d))},r=function(e){var o,t,n,a,s,c,f=e||window.event;if(n=f.clientX,a=f.clientY,O.flag.x=O.flag.y=0,REDIPS.event.remove(document,"mousemove",d),REDIPS.event.remove(document,"mouseup",r),W.onselectstart=null,i(Q),M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,O.flag.x=O.flag.y=0,null===F||null===$)REDIPS.drag.event.notMoved();else{if(REDIPS.drag.td.target=te.target=T.rows[F].cells[$],g(F,N),o=F,C)if(K===o){for(t=Q.getElementsByTagName("tr")[0],U.style.backgroundColor=t.style.backgroundColor,s=0;s<t.cells.length;s++)U.cells[s].style.backgroundColor=t.cells[s].style.backgroundColor;Q.parentNode.removeChild(Q),delete U.redips.emptyRow,B?REDIPS.drag.event.rowNotCloned():REDIPS.drag.event.rowDroppedSource(te.target)}else P(o);else REDIPS.drag.event.rowNotMoved();B||A.flag?B&&K===F&&J===$?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):B&&REDIPS.drag.clone.drop===!1&&(n<T.redips.offset[3]||n>T.redips.offset[1]||a<T.redips.offset[0]||a>T.redips.offset[2])?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):(c=REDIPS.drag.event.droppedBefore(te.target),l(c)):REDIPS.drag.event.notMoved(),y(),REDIPS.drag.event.finish()}q=G=null},l=function(e){var o,t=null;if(e!==!1){if(ne.sendBack===!0){o=te.target.getElementsByTagName("DIV");for(var n=0;n<o.length;n++)if(Q!==o[n]&&0===Q.id.indexOf(o[n].id)){t=o[n];break}if(t)return b(t,1),void Q.parentNode.removeChild(Q)}te.target.appendChild(Q),a(Q),REDIPS.drag.event.dropped(te.target),B&&(REDIPS.drag.event.clonedDropped(te.target),b(U,-1))}else B&&Q.parentNode&&Q.parentNode.removeChild(Q)},a=function(e,o){e.onmousedown=o===!1?null:n},i=function(e){e.style.top="",e.style.left="",e.style.position="",e.style.zIndex=""},d=function(e){var o,t,n,r,d,l,i,a=e||window.event,c=REDIPS.drag.scroll.bound;if(t=X.x=a.clientX,n=X.y=a.clientY,r=Math.abs(A.x-t),d=Math.abs(A.y-n),C||((z||REDIPS.drag.clone.keyRow===!0&&V)&&(B=!0),REDIPS.drag.objOld=U=Q,REDIPS.drag.obj=Q=R(Q),Q.style.zIndex=999,Q.style.position="fixed",y(),f(),B?REDIPS.drag.event.rowCloned():REDIPS.drag.event.rowMoved(),p(),t>L.width-k[1]&&(Q.style.left=L.width-(k[1]+k[3])+"px"),n>L.height-k[2]&&(Q.style.top=L.height-(k[0]+k[2])+"px")),C=!0,t>k[3]&&t<L.width-k[1]&&(Q.style.left=t-k[3]+"px"),n>k[0]&&n<L.height-k[2]&&(Q.style.top=n-k[0]+"px"),t<_[1]&&t>_[3]&&n<_[2]&&n>_[0]&&0===O.flag.x&&0===O.flag.y&&(H.containTable||t<H[3]||t>H[1]||n<H[0]||n>H[2])&&(f(),s()),REDIPS.drag.scroll.enable)for(O.page.x=c-(L.width/2>t?t-k[3]:L.width-t-k[1]),O.page.x>0?(O.page.x>c&&(O.page.x=c),i=0,O.page.x*=t<L.width/2?-1:1,O.page.x<0&&0>=i||O.page.x>0&&i>=M.width-L.width||0===O.flag.x++&&(REDIPS.event.remove(window,"scroll",y),h(window))):O.page.x=0,O.page.y=c-(L.height/2>n?n-k[0]:L.height-n-k[2]),O.page.y>0?(O.page.y>c&&(O.page.y=c),i=window.pageYOffset||document.documentElement.scrollTop,O.page.y*=n<L.height/2?-1:1,O.page.y<0&&0>=i||O.page.y>0&&i>=M.height-L.height||0===O.flag.y++&&(REDIPS.event.remove(window,"scroll",y),w(window))):O.page.y=0,l=0;l<M.container.length;l++){if(o=M.container[l],o.autoscroll&&t<o.offset[1]&&t>o.offset[3]&&n<o.offset[2]&&n>o.offset[0]){O.div.x=c-(o.midstX>t?t-k[3]-o.offset[3]:o.offset[1]-t-k[1]),O.div.x>0?(O.div.x>c&&(O.div.x=c),O.div.x*=t<o.midstX?-1:1,0===O.flag.x++&&(REDIPS.event.remove(o.div,"scroll",y),h(o.div))):O.div.x=0,O.div.y=c-(o.midstY>n?n-k[0]-o.offset[0]:o.offset[2]-n-k[2]),O.div.y>0?(O.div.y>c&&(O.div.y=c),O.div.y*=n<o.midstY?-1:1,0===O.flag.y++&&(REDIPS.event.remove(o.div,"scroll",y),w(o.div))):O.div.y=0;break}O.div.x=O.div.y=0}a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},s=function(){(F!==q||$!==G)&&(null!==q&&null!==G&&(g(q,N),REDIPS.drag.td.previous=te.previous=T.rows[q].cells[G],REDIPS.drag.td.current=te.current=T.rows[F].cells[$],F!==q&&REDIPS.drag.event.rowChanged(te.current)),p())},c=function(){L.width=window.innerWidth,L.height=window.innerHeight,M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,y()},f=function(){var e,o,t,n,r,d,l=[];if(e=function(){null!==q&&null!==G&&(F=q,$=G)},n=X.x,r=X.y,l[0]=T.redips.offset[0],l[1]=T.redips.offset[1],l[2]=T.redips.offset[2],l[3]=T.redips.offset[3],void 0!==T.sca&&(l[0]=l[0]>T.sca.offset[0]?l[0]:T.sca.offset[0],l[1]=l[1]<T.sca.offset[1]?l[1]:T.sca.offset[1],l[2]=l[2]<T.sca.offset[2]?l[2]:T.sca.offset[2],l[3]=l[3]>T.sca.offset[3]?l[3]:T.sca.offset[3]),l[3]<n&&n<l[1]&&l[0]<r&&r<l[2]){for(o=T.redips.row_offset,F=0;F<o.length-1;F++)if(void 0!==o[F]){if(H[0]=o[F][0],void 0!==o[F+1])H[2]=o[F+1][0];else for(d=F+2;d<o.length;d++)if(void 0!==o[d]){H[2]=o[d][0];break}if(r<=H[2])break}t=F,F===o.length-1&&(H[0]=o[F][0],H[2]=T.redips.offset[2]),$=0,0>F||0>$?e():F!==t&&(H[0]=o[F][0],H[2]=H[0]+T.rows[F].cells[$].offsetHeight,(r<H[0]||r>H[2])&&e())}},p=function(){null!==F&&null!==$&&(N=u(F),g(F),q=F,G=$)},g=function(e,o){var t,n;t=T.rows[e];for(var r=0;r<t.cells.length;r++)n=t.cells[r].style,n.backgroundColor=void 0===o?REDIPS.drag.hover.colorTr:o.color[r].toString(),void 0!==REDIPS.drag.hover.borderTr&&(void 0===o?K>F?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:(n.borderTopWidth=o.top[r][0],n.borderTopStyle=o.top[r][1],n.borderTopColor=o.top[r][2],n.borderBottomWidth=o.bottom[r][0],n.borderBottomStyle=o.bottom[r][1],n.borderBottomColor=o.bottom[r][2]))},u=function(e){var o,t,n={color:[],top:[],right:[],bottom:[],left:[]},r=function(e,o){var t="border"+o+"Width",n="border"+o+"Style",r="border"+o+"Color";return[D(e,t),D(e,n),D(e,r)]};o=T.rows[e];for(var d=0;d<o.cells.length;d++)t=o.cells[d],n.color[d]=t.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTr&&(n.top[d]=r(t,"Top"),n.bottom[d]=r(t,"Bottom"));return n},v=function(e,o,t){var n=0,r=0,d=e;if("fixed"!==o&&(n=0-j[0],r=0-j[1]),void 0===t||t===!0){do n+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName)}else do n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName);return[r,n+d.offsetWidth,r+d.offsetHeight,n]},y=function(){var e,o,t;j=m(),e=[],o=D(T,"position"),"fixed"!==o&&(o=D(T.parentNode,"position"));for(var n=T.rows.length-1;n>=0;n--)"none"!==T.rows[n].style.display&&(e[n]=v(T.rows[n],o));T.redips.offset=v(T,o),T.redips.row_offset=e,_=v(W);for(var n=0;n<M.container.length;n++)o=D(M.container[n].div,"position"),t=v(M.container[n].div,o,!1),M.container[n].offset=t,M.container[n].midstX=(t[1]+t[3])/2,M.container[n].midstY=(t[0]+t[2])/2},m=function(){var e=window.pageYOffset||document.documentElement.scrollTop,o=0;return[o,e]},h=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.x>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[0],r=M.width-L.width,d=O.page.x):(n=M.obj.scrollLeft,r=M.obj.scrollWidth-M.obj.clientWidth,d=O.div.x),O.flag.x>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(d,0),n=m()[0],o=parseInt(Q.style.left,10),isNaN(o)&&(o=0)):M.obj.scrollLeft+=d,setTimeout(h,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.x=0,H=[0,0,0,0])},w=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.y>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[1],r=M.height-L.height,d=O.page.y):(n=M.obj.scrollTop,r=M.obj.scrollHeight-M.obj.clientHeight,d=O.div.y),O.flag.y>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(0,d),n=m()[1],o=parseInt(Q.style.top,10),isNaN(o)&&(o=0)):M.obj.scrollTop+=d,setTimeout(w,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.y=0,H=[0,0,0,0])},E=function(e,o){var t,n=[];n[0]=function(e,o){e.redips&&(o.redips={},o.redips.enabled=e.redips.enabled,o.redips.container=e.redips.container,e.redips.enabled&&a(o))},n[1]=function(e,o){e.redips&&(o.redips={},o.redips.emptyRow=e.redips.emptyRow)},t=function(t){var r,d,l=["DIV","TR"];r=e.getElementsByTagName(l[t]),d=o.getElementsByTagName(l[t]);for(var i=0;i<d.length;i++)n[t](r[i],d[i])},"DIV"===e.nodeName?n[0](e,o):"TR"===e.nodeName&&n[1](e,o),t(0),t(1)},b=function(e,t){var n,r,d,l;l=e.className,n=l.match(/climit(\d)_(\d+)/),null!==n&&(r=parseInt(n[1],10),d=parseInt(n[2],10),0===d&&1===t&&(l+=" redips-clone",2===r&&o(!0,e)),d+=t,l=l.replace(/climit\d_\d+/g,"climit"+r+"_"+d),0>=d&&(l=l.replace("redips-clone",""),2===r?(o(!1,e),REDIPS.drag.event.clonedEnd2()):REDIPS.drag.event.clonedEnd1()),e.className=x(l))},o=function(e,o){var n=[];void 0===o?n=W.getElementsByTagName("div"):"string"==typeof o?n=document.querySelectorAll(o):"object"!=typeof o||"DIV"===o.nodeName&&-1!==o.className.indexOf("redips-drag")?n[0]=o:n=o.getElementsByTagName("div"),t(e,n)},t=function(e,o){var t,n,r,d,l,i,s,c,f,p,g,u=[],m=/\bredips-drag\b/i,h=/\bredips-noautoscroll\b/i;for(l=REDIPS.drag.style.opacityDisabled,e===!0||"init"===e?(d=REDIPS.drag.style.borderEnabled,i="move",f=!0):(d=REDIPS.drag.style.borderDisabled,i="auto",f=!1),t=0,n=0;t<o.length;t++)if(m.test(o[t].className))"init"===e||void 0===o[t].redips?(o[t].redips={},o[t].redips.container=W):e===!0&&"number"==typeof l?(o[t].style.opacity="",o[t].style.filter=""):e===!1&&"number"==typeof l&&(o[t].style.opacity=l/100,o[t].style.filter="alpha(opacity="+l+")"),a(o[t],f),o[t].style.borderStyle=d,o[t].style.cursor=i,o[t].redips.enabled=f;else if("init"===e&&(s=D(o[t],"overflow"),"visible"!==s)){for(REDIPS.event.add(o[t],"scroll",y),g=D(o[t],"position"),p=v(o[t],g,!1),c=!h.test(o[t].className),M.container[n]={div:o[t],offset:p,midstX:(p[1]+p[3])/2,midstY:(p[0]+p[2])/2,autoscroll:c},u=o[t].getElementsByTagName("table"),r=0;r<u.length;r++)u[r].sca=M.container[n];n++}},D=function(e,o){return e&&e.currentStyle?e.currentStyle[o]:e&&window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[o]:void 0},I=function(e,o){for(o=o.parentNode;o&&o.nodeName!==e;)o=o.parentNode;return o},x=function(e){return void 0!==e&&(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ")),e},S=function(e,o,t){var n,r,d;if("string"==typeof e&&(e=document.getElementById(e),e=I("TABLE",e)),"TR"===e.nodeName)for(n=e.getElementsByTagName("td"),r=0;r<n.length;r++)if(n[r].style.backgroundColor=t?t:"","empty"===o)n[r].innerHTML="";else for(d=0;d<n[r].childNodes.length;d++)1===n[r].childNodes[d].nodeType&&(n[r].childNodes[d].style.opacity=o/100,n[r].childNodes[d].style.filter="alpha(opacity="+o+")");else e.style.opacity=o/100,e.style.filter="alpha(opacity="+o+")",e.style.backgroundColor=t?t:""},{obj:Q,objOld:U,td:te,hover:Z,scroll:ee,style:oe,clone:ne,init:e,enableDrag:o,enableDivs:t,rowOpacity:S,getScrollPosition:m,getStyle:D,findParent:I,event:re}}(),REDIPS.event||(REDIPS.event=function(){var e,o;return e=function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},o=function(e,o,t){e.removeEventListener?e.removeEventListener(o,t,!1):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=null},{add:e,remove:o}}());
"use strict";var redips={};redips.init=function(){var e=REDIPS.drag;e.init(),e.event.rowDropped=function(n){var t=parseInt(e.objOld.id.replace("rowid","")),o=document.getElementById(e.objOld.id),d=parseInt(n.id.replace("rowid","")),i=getParentID(o);moveAssembly(t,d,i,n),document.getElementById("expandID"+d).classList.remove("hide-expand"),document.getElementById("expandID"+d).classList.add("show-expand")},e.event.rowDroppedSource=function(){e.rowOpacity(e.objOld,100)},e.event.rowMoved=function(){e.rowOpacity(e.obj,85),e.rowOpacity(e.objOld,20,"White")},e.event.rowClicked=function(){},e.event.rowNotMoved=function(){},e.event.rowCloned=function(){},e.event.rowNotCloned=function(){},e.event.rowDeleted=function(){},e.event.rowUndeleted=function(){e.rowOpacity(e.objOld,100)}};
function initProjectActions(){$("#projectActionInput").keyup(function(e){e.keyCode==ENTER_KEY&&projectActionEnterPressed()})}var scrollBarWidth;$(document).ready(function(){scrollBarWidth=getScrollBarWidth(),document.onkeydown=checkKey,$.ajax({type:"GET",url:"api/projects"}).done(function(e){projects=e,$("#header").html(generateHeaderMarkup(projects.projects)),$("#editNewProjectNameInput").keyup(function(e){e.keyCode==ENTER_KEY&&createNewProject()})})});var getScrollBarWidth=function(){var e,t;return e=document.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t};
function checkKey(e){if(e=e||window.event,e.keyCode==KEY_UP_ARROW){e.preventDefault();var t=$(getAncestorTag(document.activeElement,"tr")).prev()[0];t&&$("#"+getNextElementID(t)).focus()}else if(e.keyCode==KEY_DOWN_ARROW){e.preventDefault();var n=$(getAncestorTag(document.activeElement,"tr")).next()[0];n&&$("#"+getNextElementID(n)).focus()}else e.keyCode==KEY_RIGHT_ARROW?(e.preventDefault(),$(getAncestorTag(document.activeElement,"td")).next().find("input").focus()):e.keyCode==KEY_LEFT_ARROW&&(e.preventDefault(),$(getAncestorTag(document.activeElement,"td")).prev().find("input").focus())}function getNextElementID(e){var t=document.activeElement.id;if(t.indexOf("nodeInput")>-1)return"nodeInput"+e.id.replace("rowid","");for(var n=document.activeElement.className.split(" "),r=0;r<n.length;r++){var a=n[r];if(a.indexOf("fieldInput")>-1&&"fieldInput"!=a){var c=a.replace("fieldInput","");return c+e.id.replace("datarowid","")}}}var KEY_UP_ARROW=38,KEY_DOWN_ARROW=40,KEY_LEFT_ARROW=37,KEY_RIGHT_ARROW=39;
function generateSpreadSheetMarkup(){return'<div id="spreadSheetView"><div id="project-action-container"></div><div id="fields-header-row"></div><div id="redips-drag"></div><div id="data-container" onscroll="handleDataScroll()"></div></div>'}function generateHeaderMarkup(e){for(var t='<select id="projectSelector" class="form-control" onchange="selectProject()"><option id="selectProjectOption" value="0">Select Project...</option>',n=0;n<e.length;n++)t+='<option value="'+e[n].id+'">'+e[n].name+"</option>";return t+='<option id="newProjectOption" value="-1">Create New Project...</option></select><input id="editNewProjectNameInput" class="form-control"></input><a href="#" id="save-database-button" class="btn btn-default" onclick="Project.saveToDatabase()">Save to Database</a><a href="#" id="switchViewButton" class="btn btn-default" onclick="Project.switchView()">Switch View</a>'}function generateProjectSelectorMarkup(){return'<table><tr id="headerRow"><tr><div id="project-select-container"><select id="projectActionSelector" class="form-control" onchange="handleProjectAction()"><option value="blank"></option><option value="addField">Add Field</option></select><input id="projectActionInput" class="form-control"></input></div></tr><table>'}function generateFieldsRowMarkup(){for(var e='<table id="fieldHeaderTable"><tr id="fieldHeaderRow">',t=0;t<tree.fields.length;t++)e+=getFieldHeaderMarkup(tree.fields[t].name,t);return e+="</tr></table>"}function generateTreeMarkup(){for(var e='<table id="treeTable">',t=0;t<tree.nodes.length;t++)e+=addRow(tree.nodes[t],0,"",0);return e+="</table>"}function addRow(e,t,n,i){var a="",d="nodeRow depth"+t+" expanded parent"+i+" "+n,r=e.id,o='<div class="redips-drag pull-right"><i class="glyphicon glyphicon-move"></i></div>',l='<a href="#" class="pull-right btn btn-danger btn-xs delete-button" onclick="deleteNode(this)"><i class="glyphicon glyphicon-remove"></i></a>',s='<a href="#"  class="pull-right btn btn-info btn-xs copy-button" onclick="copyNode(this)"><i class="glyphicon glyphicon-plus"></i></a>',c='<a id="expandID'+r+'" href="#" style="margin-left:'+10*t+'px" onclick="toggle(this)" class="btn btn-xs show-expand"><span id="icon'+r+'" class="glyphicon glyphicon-chevron-down iconp'+i+'"></span></a>',u='<a id="expandID'+r+'" href="#" style="margin-left:'+10*t+'px" onclick="toggle(this)" class="btn btn-xs hide-expand"><span id="icon'+r+'" class="glyphicon glyphicon-chevron-down iconp'+i+'"></span></a>';if(a+='<tr id="rowid'+r+'" class="'+d+'"><td class="redips-rowhandler cell"><div class="node-container">',a+=l+s+o,a+=e.nodes&&e.nodes.length>0?c:u,a+='<input id="nodeInput'+e.id+'" class="nodeTextInput" type="text" value="'+e.name+'" style="width:'+(DEFAULT_NODE_INPUT_WIDTH-10*t)+'px" oninput="updateNodeName(this)"/></div></td></tr>',e.nodes&&e.nodes.length>0)for(var p=0;p<e.nodes.length;p++)a+=addRow(e.nodes[p],t+1,n+" ancestor"+r,r);return a}function generateDataMarkup(){for(var e='<table id="dataTable">',t=0;t<tree.nodes.length;t++)e+=addDataRow(tree.nodes[t]);return e+="</table>"}function addDataRow(e){for(var t='<tr id="datarowid'+e.id+'" class="dataRow">',n=0;n<tree.fields.length;n++){var i=tree.fields[n],a="";e.values&&e.values[i.name]&&(a=Field.formatValue(i,e.values[i.name])),t+=getFieldCellMarkup(i.name,e.id,a)}if(t+="</tr>",e.nodes&&e.nodes.length>0)for(var n=0;n<e.nodes.length;n++)t+=addDataRow(e.nodes[n]);return t}function addColumn(e){$("#fieldHeaderRow").append(getFieldHeaderMarkup(e,tree.fields.length)),$(".dataRow").each(function(t,n){$(n).append(getFieldCellMarkup(e,n.id.replace("datarowid","")))})}function getFieldHeaderMarkup(e,t){return'<td class="fieldHeaderCell"><div class="fieldHeaderContainer"><div class="moveColGrip"></div><div class="fieldNameInputContainer"><textarea id="colHeaderInput'+e+'" class="fieldNameInput">'+e+'</textarea></div><div class="fieldHeaderButton"><img src="images/down-arrow.png" onclick="showMenu(event, \''+e+'\');" style="cursor:pointer"/></div><div id="grip'+t+'" class="resizeColGrip" onmousedown="startResize(event, this)"></div></div></td>'}function getFieldCellMarkup(e,t,n){return'<td class="cell"><input class="fieldInput fieldInput'+e+'" type="text" id="'+e+t+'" value="'+n+'" oninput="updateFieldValue(\''+e+"', '"+t+"')\" onfocus=\"displayRawValue('"+e+"', '"+t+"')\"/></td>"}function getAssemblyMarkup(e,t,n){var i=findNodeInTree(e),a=findParentInTree(e);return addRow(i,n,"ancestor"+a.id,a.id)}function getFieldMenuMarkup(e,t,n){var i=Project.getField(e),a=new Menu,d=new MenuItem("Number",Field.NUMBER,"datatype",i),r=new MenuItem("Format"),o=new MenuItem("Number",Field.NUMBER_FORMAT,"format",i);o.items.push(new MenuItem("0",0,"precision",i));for(var l="0.",s=1;11>s;s++)l+="0",o.items.push(new MenuItem(l,s,"precision",i));r.items.push(o);var c=new MenuItem("Percent",Field.PERCENT_FORMAT,"format",i);c.items.push(new MenuItem("0",0,"precision",i));for(var l="0.",s=1;11>s;s++)l+="0",c.items.push(new MenuItem(l+"%",s,"precision",i));r.items.push(c);var u=new MenuItem("Scientific",Field.SCIENTIFIC_FORMAT,"format",i);u.items.push(new MenuItem("0",0,"precision",i));for(var l="0.",s=1;11>s;s++)l+="0",u.items.push(new MenuItem(l+"e+0",s,"precision",i));r.items.push(u),d.items.push(r);var p=new MenuItem("Aggregation");p.items.push(new MenuItem("No Aggregation",Field.NO_AGGREGATION,"agg_type",i));for(var h=new MenuItem("Sum any defined children",Field.SUM_ANY_AGGREGATION,"agg_type",i),s=0;s<tree.fields.length;s++){var m=tree.fields[s];m.name!=i.name&&h.items.push(new MenuItem(m.name,m.name,"agg_qty_field",i))}p.items.push(h),d.items.push(p),a.items=[],a.items.push(d),a.items.push(new MenuItem("Text",Field.STRING,"datatype",i));var f='<div id="fieldMenu" style="left:'+t+"px;top:"+n+'px;">';return f+=generateMenuMarkup(a),f+="</div>"}function generateMenuMarkup(e){for(var t="<ul>",n=0;n<e.items.length;n++){var i=e.items[n];t+='<li onclick="Menu.handleClick('+i.id+');">';var a="uncheckedMenuItem";i.field&&i.checked&&(a="checkedMenuItem"),t+='<img id="menuItem'+i.id+'" src="'+CHECK_MARK_IMAGE_PATH+'" class="'+a+'"/>',t+=i.display,i.items&&i.items.length>0&&(t+='<div class="arrowRight"></div>'),i.items&&i.items.length>0&&(t+=generateMenuMarkup(i)),t+="</li>"}return t+"</ul>"}var DEFAULT_NODE_INPUT_WIDTH=400;
function displaySpreadSheet(){$("body").append(generateSpreadSheetMarkup()),$("#project-action-container").html(generateProjectSelectorMarkup()),$("#fields-header-row").html(generateFieldsRowMarkup()),$("#fields-header-row").css("right",scrollBarWidth+"px"),$("#data-container").html(generateDataMarkup()),$("#redips-drag").html(generateTreeMarkup()),$("#redips-drag").css("bottom",scrollBarWidth+"px"),redips.init(),initProjectActions()}function projectActionEnterPressed(){if("addField"==$("#projectActionSelector").val()){var e=$("#projectActionInput").val();tree.fields.push(new Field(e)),addColumn(e),$("#projectActionInput").hide(),$("#projectActionSelector").val("blank")}}function createNewProject(){$("#selectProjectOption").remove();var e=$("#editNewProjectNameInput").val();$("#editNewProjectNameInput").hide();var t=projects.nextProjectID.toString(),r=document.createElement("option");r.text=e,r.value=t,$(r).insertBefore("#projectSelector option:nth-child("+$("#projectSelector").length+")"),$("#projectSelector").val(t),$.ajax({type:"POST",url:"/api/addProject?projectName="+e}),tree={projectID:t,projectName:e,name:e,version:1,nextNodeID:2,fields:[],nodes:[{id:1,name:e,nodes:[]}]},displaySpreadSheet(),Project.saveToDatabase()}function showMenu(e,t){0===$("#fieldMenu").length&&($(getFieldMenuMarkup(t,e.clientX,e.clientY)).appendTo("body"),$("#fieldMenu").mouseleave(function(){$("#fieldMenu").remove()}))}var handleProjectAction=function(){"addField"==$("#projectActionSelector").val()&&($("#projectActionInput").val("Type New Field Name and Press Enter to Create"),$("#projectActionInput").show().focus().select())};
var resizeColumnLeft=0,resizeField="0",startResize=function(e,i){$(document).bind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).bind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="visible",document.getElementById("resizeLine").style.left=e.pageX+"px",resizeColumnLeft=$(i.parentNode).position().left,resizeField=i.parentNode.id.replace("colHeader","")},resizeEnd=function(e){$(document).unbind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).unbind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="hidden";var i=e.pageX-resizeColumnLeft-GRIPS_WIDTH;i<MIN_COLUMN_WIDTH&&(i=MIN_COLUMN_WIDTH),document.getElementById("colHeaderInput"+resizeField).style.width=i+"px";for(var t=document.querySelectorAll(".fieldInput"+resizeField),r=0;r<t.length;r++)t[r].style.width=i+8+"px"},resizeDrag=function(e){e.pageX>resizeColumnLeft+MIN_COLUMN_WIDTH+GRIPS_WIDTH&&(document.getElementById("resizeLine").style.left=e.pageX+"px")};
function handleDataScroll(){$("#redips-drag").scrollTop($("#data-container").scrollTop()),$("#fields-header-row").scrollLeft($("#data-container").scrollLeft())}function printProject(){console.log(JSON.stringify(tree,null,"	"))}function displayRawValue(e,n){var t=Project.getField(e),o=findNodeInTree(parseInt(n));o.values&&o.values[t.name]?(console.log(o.values[t.name]),$("#"+e+n).val(o.values[t.name])):$("#"+e+n).val("")}function toggle(e){var n=getAncestorTag(e,"tr"),t=parseInt(n.id.replace("rowid","")),o=document.getElementById("icon"+t);if(n.classList.contains("collapsed")){for(var r=document.querySelectorAll(".parent"+t),d=document.querySelectorAll(".iconp"+t),s=0;s<r.length;s++)r[s].style.display="",r[s].classList.add("collapsed");for(var s=0;s<d.length;s++)d[s].classList.contains("glyphicon-chevron-down")&&(d[s].classList.remove("glyphicon-chevron-down"),d[s].classList.add("glyphicon-chevron-right"));o.classList.remove("glyphicon-chevron-right"),o.classList.add("glyphicon-chevron-down"),n.classList.remove("collapsed"),n.classList.add("expanded")}else{for(var a=document.querySelectorAll(".ancestor"+t),s=0;s<a.length;s++)a[s].style.display="none";o.classList.remove("glyphicon-chevron-down"),o.classList.add("glyphicon-chevron-right"),n.classList.remove("expanded"),n.classList.add("collapsed")}}function updateFieldValue(e,n){updateNodeValueInTree(n,e,document.getElementById(e+n).value);for(var t=0;t<tree.nodes.length;t++)aggregate_any(tree.nodes[t],e)}function updateNodeValueInTree(e,n,t){for(var o=null,r=0;r<tree.nodes.length;r++)o=tree.nodes[r],o.id==e?(o.values||(o.values={}),o.values[n]=t):updateNodeValue(e,o,n,t)}function updateNodeValue(e,n,t,o){var r=null;if(n&&n.id==e)return n;if(n&&n.nodes&&n.nodes.length>0)for(var d=0;d<n.nodes.length;d++)if(r=updateNodeValue(e,n.nodes[d],t,o))return r.values||(r.values={}),r.values[t]=o,r;return null}var projects=null,tree,ENTER_KEY=13,MIN_COLUMN_WIDTH=70,GRIPS_WIDTH=16,selectProject=function(){var e=document.getElementById("projectSelector"),n=e.options[e.selectedIndex];"newProjectOption"===n.id?($("#editNewProjectNameInput").val("Type New Project Name and Press Enter to Create"),$("#editNewProjectNameInput").show().focus().select()):(e.value>0&&document.getElementById("selectProjectOption")&&$("#selectProjectOption").remove(),$.ajax({type:"GET",url:"api/tree?projectID="+e.value}).done(function(e){tree=e,displaySpreadSheet(),$("#tree-container").hide()}))},getDepth=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];if(o.indexOf("depth")>-1)return parseInt(o.replace("depth",""))}},getParentID=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];if(o.indexOf("parent")>-1)return parseInt(o.replace("parent",""))}},removeParent=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];o.indexOf("parent")>-1&&e.classList.remove(o)}},getAncestors=function(e){for(var n=[],t=e.className.split(" "),o=0;o<t.length;o++){var r=t[o];r.indexOf("ancestor")>-1&&n.push(r)}return n},removeAncestors=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];o.indexOf("ancestor")>-1&&e.classList.remove(o)}},addAncestors=function(e,n){for(var t=0;t<n.length;t++)e.classList.add(n[t])},setNewAncestors=function(e,n,t){removeParent(e),e.classList.add("parent"+t),removeAncestors(e),addAncestors(e,n)},moveAssembly=function(e,n,t,o){var r=findNodeInTree(t),d=findNodeInTree(n),s=findNodeInTree(e);if(r){if(r.nodes&&r.nodes.length>0)for(var a=0;a<r.nodes.length;a++)if(r.nodes[a].id===e){r.nodes.splice(a,1);break}}else for(var a=0;a<tree.nodes.length;a++)if(tree.nodes[a].id===e){tree.nodes.splice(a,1);break}d.nodes.push(s);var i=document.getElementById("rowid"+e),l=document.getElementById("datarowid"+e),c=document.getElementById("datarowid"+n),u=getAncestors(o);u.push("ancestor"+n),setNewAncestors(i,u,n);var f=getDepth(i),g=getDepth(o)+1;if(i.classList.remove("depth"+f),i.classList.add("depth"+g),document.getElementById("expandID"+e).style.marginLeft=10*g+"px",document.getElementById("nodeInput"+e).style.width=DEFAULT_NODE_INPUT_WIDTH-10*g+"px",$(l).remove(),$(l).insertAfter(c),s.nodes&&s.nodes.length>0)for(var a=s.nodes.length-1;a>=0;a--)moveNode(s.nodes[a],s.nodes[a].id,e,g+1,u)},moveNode=function(e,n,t,o,r){var d=document.getElementById("rowid"+n),s=document.getElementById("datarowid"+n),a=document.getElementById("rowid"+t),i=document.getElementById("datarowid"+t),l=getDepth(d),c=r.slice(0);if(c.push("ancestor"+t),setNewAncestors(d,c,t),d.classList.remove("depth"+l),d.classList.add("depth"+o),document.getElementById("expandID"+n).style.marginLeft=10*o+"px",$(d).remove(),$(d).insertAfter(a),$(s).remove(),$(s).insertAfter(i),e.nodes&&e.nodes.length>0)for(var u=e.nodes.length-1;u>=0;u--)moveNode(e.nodes[u],e.nodes[u].id,n,o+1,c)},findNodeInTree=function(e){if(tree.nodes&&tree.nodes.length>0)for(var n=0;n<tree.nodes.length;n++){var t=findNode(e,tree.nodes[n]);if(t)return t}},findNode=function(e,n){if(n.id===e)return n;if(n.nodes&&n.nodes.length>0)for(var t=0;t<n.nodes.length;t++){var o=findNode(e,n.nodes[t]);if(o)return o}},findParentInTree=function(e){if(tree.nodes&&tree.nodes.length>0)for(var n=0;n<tree.nodes.length;n++){var t=findParent(e,tree.nodes[n],null);if(t)return t}},findParent=function(e,n,t){if(n.id===e)return t;if(n.nodes&&n.nodes.length>0)for(var o=0;o<n.nodes.length;o++){var r=findParent(e,n.nodes[o],n);if(r)return r}},deleteNode=function(e){var n=getAncestorTag(e,"tr"),t=parseInt(n.id.replace("rowid","")),o=findNodeInTree(t),r=findParentInTree(t);removeNodeRow(o);for(var d=0;d<r.nodes.length;d++)if(r.nodes[d].id==t){r.nodes.splice(d,1);break}},removeNodeRow=function(e){var n=document.getElementById("rowid"+e.id);if($(n).remove(),e.nodes&&e.nodes.length>0)for(var t=0;t<e.nodes.length;t++)removeNodeRow(e.nodes[t])},copyNode=function(e){var n,t,o=getAncestorTag(e,"tr"),r=parseInt(o.id.replace("rowid","")),d=findNodeInTree(r),s=findParentInTree(r),a=jQuery.extend(!0,{},d);assignNewNodeIDs(a),void 0===s?(n=getNodeIndex(tree.nodes,d.id),tree.nodes.splice(n,0,a),t=addRow(a,0,"",0)):(n=getNodeIndex(s.nodes,d.id),s.nodes.splice(n,0,a),t=getAssemblyMarkup(a.id,d.id,getDepth(o))),$(t).insertBefore(o);var i=document.getElementById("rowid"+a.id);REDIPS.drag.enableDivs("init",i.getElementsByTagName("div"))},assignNewNodeIDs=function(e){if(e.id=tree.nextNodeID++,e.nodes&&e.nodes.length>0)for(var n=0;n<e.nodes.length;n++)assignNewNodeIDs(e.nodes[n])},getNodeIndex=function(e,n){var t=$.map(e,function(e,t){return e.id==n?t:void 0});return t[0]},getAncestorTag=function(e,n){for(n=n.toLowerCase();e&&e.parentNode;)if(e=e.parentNode,e.tagName&&e.tagName.toLowerCase()==n)return e},updateNodeName=function(e){var n=getAncestorTag(e,"tr"),t=parseInt(n.id.replace("rowid","")),o=findNodeInTree(t);o.name=e.value,$("#nodeInput"+t).attr("value",o.name)};
var Field=function(i){this.name=i,this.datatype=Field.NUMBER,this.format=Field.NUMBER_FORMAT,this.precision=2,this.agg_type=Field.NO_AGGREGATION,this.agg_qty_field=null};Field.NUMBER="0",Field.STRING="1",Field.CHOICE="2",Field.NO_AGGREGATION="0",Field.SUM_ANY_AGGREGATION="1",Field.NUMBER_FORMAT="0",Field.PERCENT_FORMAT="1",Field.SCIENTIFIC_FORMAT="2",Field.formatValue=function(i,e){if(i.datatype===Field.NUMBER){if(i.format===Field.NUMBER_FORMAT)return e.toFixed(i.precision);if(i.format===Field.PERCENT_FORMAT)return(100*e).toFixed(i.precision)+"%";if(i.format===Field.SCIENTIFIC_FORMAT)return Number(e).toExponential(i.precision)}else{if(i.datatype===Field.STRING)return e;i.datatype===Field.CHOICE}};
var Menu=function(){Menu.menu=this};Menu.menu,Menu.handleClick=function(e){var t=Menu.menu.getMenuItem(e,Menu.menu),n=Menu.menu.getMenuItemParent(e,Menu.menu);if(t.field){var u=Project.getField(t.field.name);u[t.varName]=t.value;for(var m=0;m<n.items.length;m++)$("#menuItem"+n.items[m].id).removeClass("checkedMenuItem").addClass("uncheckedMenuItem");$("#menuItem"+e).removeClass("uncheckedMenuItem").addClass("checkedMenuItem"),n===Menu.menu&&Project.updateFieldFormatting(u)}},Menu.prototype.getMenuItem=function(e,t){if(e===t.id)return t;if(t.items&&t.items.length>0)for(var n,u=0;u<t.items.length;u++)if(n=this.getMenuItem(e,t.items[u]))return n;return null},Menu.prototype.getMenuItemParent=function(e,t){if(t.items&&t.items.length>0)for(var n=0;n<t.items.length;n++){if(t.items[n].id===e)return t;var u=this.getMenuItemParent(e,t.items[n]);if(u)return u}return null};
var MenuItem=function(i,t,e,s){this.display=i,this.value=t,this.varName=e,this.field=s,this.items=[],this.id=MenuItem.id++,this.parent=-1,this.checked=s?s[e]===t:!1};MenuItem.id=0;
function Project(){}Project.getField=function(e){for(var t=0;t<tree.fields.length;t++){var r=tree.fields[t];if(r.name===e)return r}return null},Project.saveToDatabase=function(){$.ajax({type:"POST",url:"/api/tree",dataType:"json",data:{json:JSON.stringify(tree)}})},Project.updateFieldFormatting=function(e){$(".fieldInput"+e.name).each(function(t){var r=$(this).attr("id").replace(e.name,""),a=findNodeInTree(parseInt(r));if(a.values){var n=Number(a.values[e.name]);$(this).val(Field.formatValue(e,n))}})},Project.getTree=function(){return tree},Project.switchView=function(){$("#spreadSheetView").length?($("#spreadSheetView").remove(),displayTreeView(tree)):($("#tree-container").remove(),displaySpreadSheet())};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZy5qcyIsImNvbnN0YW50cy5qcyIsImRuZFRyZWUuanMiLCJkcmFnLWxpYi5qcyIsImRyYWcuanMiLCJpbml0LmpzIiwia2V5cy5qcyIsIm1hcmt1cC5qcyIsInByb2plY3QuanMiLCJyZXNpemUtY29sdW1uLmpzIiwidHJlZS5qcyIsIm1vZGVsL0ZpZWxkLmpzIiwibW9kZWwvTWVudS5qcyIsIm1vZGVsL01lbnVJdGVtLmpzIiwibW9kZWwvUHJvamVjdC5qcyJdLCJuYW1lcyI6WyJhZ2dyZWdhdGVfYW55Iiwibm9kZSIsImZpZWxkIiwibm9kZXMiLCJsZW5ndGgiLCJjaGlsZHJlblN1bSIsImkiLCJ2YWx1ZXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJET1dOX0FSUk9XX0lNQUdFX1BBVEgiLCJDSEVDS19NQVJLX0lNQUdFX1BBVEgiLCJCTEFOS19NQVJLX0lNQUdFX1BBVEgiLCJkaXNwbGF5VHJlZVZpZXciLCJ0cmVlRGF0YSIsInZpc2l0IiwicGFyZW50IiwidmlzaXRGbiIsImNoaWxkcmVuRm4iLCJjaGlsZHJlbiIsImNvdW50Iiwic29ydFRyZWUiLCJ0cmVlIiwic29ydCIsImEiLCJiIiwibmFtZSIsInRvTG93ZXJDYXNlIiwicGFuIiwiZG9tTm9kZSIsImRpcmVjdGlvbiIsInNwZWVkIiwicGFuU3BlZWQiLCJwYW5UaW1lciIsImNsZWFyVGltZW91dCIsInRyYW5zbGF0ZUNvb3JkcyIsImQzIiwidHJhbnNmb3JtIiwic3ZnR3JvdXAiLCJhdHRyIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZSIsInRyYW5zbGF0ZVkiLCJzY2FsZVgiLCJzY2FsZSIsInNjYWxlWSIsInpvb21MaXN0ZW5lciIsInRyYW5zaXRpb24iLCJzZWxlY3QiLCJzZXRUaW1lb3V0Iiwiem9vbSIsImV2ZW50IiwiaW5pdGlhdGVEcmFnIiwiZCIsImRyYWdnaW5nTm9kZSIsInNlbGVjdEFsbCIsImxpbmtzIiwibm9kZVBhdGhzIiwiZGF0YSIsInRhcmdldCIsInJlbW92ZSIsIm5vZGVzRXhpdCIsImZpbHRlciIsInBhcmVudExpbmsiLCJkcmFnU3RhcnRlZCIsImVuZERyYWciLCJjb25zb2xlIiwibG9nIiwic2VsZWN0ZWROb2RlIiwidXBkYXRlVGVtcENvbm5lY3RvciIsInVwZGF0ZSIsInJvb3QiLCJjZW50ZXJOb2RlIiwiZXhwYW5kIiwiX2NoaWxkcmVuIiwiZm9yRWFjaCIsInNvdXJjZSIsIngiLCJ5MCIsInkiLCJ4MCIsInZpZXdlcldpZHRoIiwidmlld2VySGVpZ2h0IiwiZHVyYXRpb24iLCJ0b2dnbGVDaGlsZHJlbiIsImNsaWNrIiwiZGVmYXVsdFByZXZlbnRlZCIsImxldmVsV2lkdGgiLCJjaGlsZENvdW50IiwibGV2ZWwiLCJuIiwicHVzaCIsIm5ld0hlaWdodCIsIm1heCIsInNpemUiLCJyZXZlcnNlIiwiZGVwdGgiLCJtYXhMYWJlbExlbmd0aCIsIm5vZGVFbnRlciIsImVudGVyIiwiYXBwZW5kIiwiY2FsbCIsImRyYWdMaXN0ZW5lciIsIm9uIiwic3R5bGUiLCJ0ZXh0Iiwib3ZlckNpcmNsZSIsIm91dENpcmNsZSIsIm5vZGVVcGRhdGUiLCJub2RlRXhpdCIsImV4aXQiLCJsaW5rIiwiaW5zZXJ0IiwibyIsImRpYWdvbmFsIiwiJCIsInRvdGFsTm9kZXMiLCJwYW5Cb3VuZGFyeSIsIndpZHRoIiwiaGVpZ2h0IiwibGF5b3V0Iiwic3ZnIiwicHJvamVjdGlvbiIsIk1hdGgiLCJiZWhhdmlvciIsInNjYWxlRXh0ZW50IiwiYmFzZVN2ZyIsImRyYWciLCJzb3VyY2VFdmVudCIsInN0b3BQcm9wYWdhdGlvbiIsInRoaXMiLCJyZWxDb29yZHMiLCJtb3VzZSIsImdldCIsImUiLCJkeSIsImR4IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiUkVESVBTIiwiaW5pdCIsImVuYWJsZURyYWciLCJlbmFibGVEaXZzIiwiaGFuZGxlck9uTW91c2VEb3duIiwiaGFuZGxlck9uTW91c2VVcCIsImhhbmRsZXJPbk1vdXNlTW92ZSIsImVsZW1lbnREcm9wIiwicmVzZXRTdHlsZXMiLCJyZWdpc3RlckV2ZW50cyIsImNlbGxDaGFuZ2VkIiwiaGFuZGxlck9uUmVzaXplIiwic2V0VGFibGVSb3dDb2x1bW4iLCJzZXRQb3NpdGlvbiIsInNldFRkU3R5bGUiLCJnZXRUZFN0eWxlIiwiYm94T2Zmc2V0IiwiY2FsY3VsYXRlQ2VsbHMiLCJnZXRTY3JvbGxQb3NpdGlvbiIsImF1dG9TY3JvbGxYIiwiYXV0b1Njcm9sbFkiLCJjb3B5UHJvcGVydGllcyIsImNsb25lTGltaXQiLCJnZXRTdHlsZSIsImZpbmRQYXJlbnQiLCJyb3dPcGFjaXR5Iiwicm93Q2xvbmUiLCJyb3dEcm9wIiwibm9ybWFsaXplIiwiYmdTdHlsZU9sZCIsInRhYmxlIiwibW92ZWQiLCJjbG9uZWQiLCJ3aW5kb3dTY3JvbGxQb3NpdGlvbiIsIm9iak1hcmdpbiIsInNjcmVlbiIsInNjcm9sbERhdGEiLCJjb250YWluZXIiLCJvYmoiLCJlZGdlIiwicGFnZSIsImRpdiIsImZsYWciLCJjbG9uZWRJZCIsImN1cnJlbnRDZWxsIiwiZHJhZ0NvbnRhaW5lciIsImRpdkJveCIsInBvaW50ZXIiLCJ0aHJlc2hvbGQiLCJzaGlmdEtleSIsImNsb25lQ2xhc3MiLCJyb3ciLCJyb3dfb2xkIiwicm93X3NvdXJjZSIsImNlbGwiLCJjZWxsX29sZCIsImNlbGxfc291cmNlIiwib2JqT2xkIiwiaG92ZXIiLCJjb2xvclRkIiwiY29sb3JUciIsInNjcm9sbCIsImVuYWJsZSIsImJvdW5kIiwiYm9yZGVyRGlzYWJsZWQiLCJvcGFjaXR5RGlzYWJsZWQiLCJyb3dFbXB0eUNvbG9yIiwidGQiLCJjbG9uZSIsImtleURpdiIsImtleVJvdyIsInNlbmRCYWNrIiwiZHJvcCIsImNsb25lZERyb3BwZWQiLCJjbG9uZWRFbmQxIiwiY2xvbmVkRW5kMiIsImRyb3BwZWQiLCJkcm9wcGVkQmVmb3JlIiwiZmluaXNoIiwibm90Q2xvbmVkIiwibm90TW92ZWQiLCJyb3dDaGFuZ2VkIiwicm93Q2xpY2tlZCIsInJvd0Nsb25lZCIsInJvd0Ryb3BwZWQiLCJyb3dEcm9wcGVkQmVmb3JlIiwicm93RHJvcHBlZFNvdXJjZSIsInJvd01vdmVkIiwicm93Tm90Q2xvbmVkIiwicm93Tm90TW92ZWQiLCJyZWRpcHNDbG9uZSIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInJlZGlwcyIsImFkZCIsIndpbmRvdyIsIm9mZnNldCIsInBvc2l0aW9uIiwiWCIsIlkiLCJldnQiLCJjYW5jZWxCdWJibGUiLCJnZXRTZWxlY3Rpb24iLCJyZW1vdmVBbGxSYW5nZXMiLCJzZWxlY3Rpb24iLCJ0eXBlIiwiZW1wdHkiLCJlcnJvciIsImNsaWVudFgiLCJjbGllbnRZIiwiY2xhc3NOYW1lIiwiY3VycmVudCIsInBhcmVudE5vZGUiLCJlbCIsInRhYmxlTWluaSIsInJvd09iaiIsIm5vZGVOYW1lIiwidW5kZWZpbmVkIiwiaW5uZXJIVE1MIiwiY2xhc3NMaXN0Iiwic291cmNlUm93Iiwicm93cyIsInJvd0lkeCIsInRyTWluaSIsImRlbGV0ZVRhYmxlUm93IiwidGJsIiwiZW1wdHlSb3ciLCJkZWxldGVSb3ciLCJyb3dJbmRleCIsInRhYmxlUm93IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwicl9yb3ciLCJtdF90ciIsIm9uc2VsZWN0c3RhcnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxXaWR0aCIsInNjcm9sbEhlaWdodCIsImNlbGxzIiwiYmFja2dyb3VuZENvbG9yIiwiY2xvbmVTb3VyY2VEaXYiLCJvbm1vdXNlZG93biIsInRvcCIsImxlZnQiLCJ6SW5kZXgiLCJzY2EiLCJkZWx0YVgiLCJkZWx0YVkiLCJzY3JvbGxQb3NpdGlvbiIsImFicyIsImNvbnRhaW5UYWJsZSIsInBhZ2VZT2Zmc2V0Iiwic2Nyb2xsVG9wIiwiYXV0b3Njcm9sbCIsIm1pZHN0WCIsIm1pZHN0WSIsInByZXZpb3VzIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0Iiwicm93X29mZnNldCIsInJvd19mb3VuZCIsInRvcyIsIm9mZnNldEhlaWdodCIsInJpIiwidCIsInRyIiwicyIsImNvbG9yIiwidG9TdHJpbmciLCJib3JkZXJUciIsImJvcmRlclRvcCIsImJvcmRlckJvdHRvbSIsImJvcmRlclRvcFdpZHRoIiwiYm9yZGVyVG9wU3R5bGUiLCJib3JkZXJUb3BDb2xvciIsImJvcmRlckJvdHRvbVdpZHRoIiwiYm90dG9tIiwiYm9yZGVyQm90dG9tU3R5bGUiLCJib3JkZXJCb3R0b21Db2xvciIsImMiLCJyaWdodCIsImJvcmRlciIsImJveCIsImJveF9zY3JvbGwiLCJvTGVmdCIsIm9Ub3AiLCJib3hPbGQiLCJvZmZzZXRMZWZ0Iiwic2Nyb2xsTGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsIm9mZnNldFdpZHRoIiwiY2IiLCJkaXNwbGF5Iiwic2Nyb2xsWSIsInNjcm9sbFgiLCJzbyIsInBvcyIsIm9sZCIsIm1heHNwIiwiZWRnZUNyb3NzZWQiLCJjbGllbnRXaWR0aCIsInNjcm9sbEJ5IiwicGFyc2VJbnQiLCJpc05hTiIsImNsaWVudEhlaWdodCIsInNyYyIsImNsbiIsImNoaWxkcyIsImNvcHkiLCJlMSIsImUyIiwiZW5hYmxlZCIsImVsMSIsImVsMiIsInRuIiwibWF0Y2hBcnJheSIsImxpbWl0VHlwZSIsImxpbWl0IiwiY2xhc3NlcyIsIm1hdGNoIiwicmVwbGFjZSIsImVuYWJsZV9mbGFnIiwicXVlcnlTZWxlY3RvckFsbCIsImoiLCJrIiwiYm9yZGVyU3R5bGUiLCJvcGFjaXR5IiwiY3Vyc29yIiwib3ZlcmZsb3ciLCJ0YmxzIiwicmVnZXhEcmFnIiwicmVnZXhOb0F1dG9zY3JvbGwiLCJib3JkZXJFbmFibGVkIiwidGVzdCIsInN0eWxlX25hbWUiLCJjdXJyZW50U3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwiZGVmYXVsdFZpZXciLCJ0YWdfbmFtZSIsInN0ciIsInRkTm9kZUxpc3QiLCJjaGlsZE5vZGVzIiwibm9kZVR5cGUiLCJldmVudE5hbWUiLCJoYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50IiwicmQiLCJuZXdQYXJlbnRSb3ciLCJtb3ZlZElEIiwibW92ZWRSb3ciLCJuZXdQYXJlbnRJRCIsIm9sZFBhcmVudElEIiwiZ2V0UGFyZW50SUQiLCJtb3ZlQXNzZW1ibHkiLCJyb3dEZWxldGVkIiwicm93VW5kZWxldGVkIiwiaW5pdFByb2plY3RBY3Rpb25zIiwia2V5dXAiLCJrZXlDb2RlIiwiRU5URVJfS0VZIiwicHJvamVjdEFjdGlvbkVudGVyUHJlc3NlZCIsInNjcm9sbEJhcldpZHRoIiwicmVhZHkiLCJnZXRTY3JvbGxCYXJXaWR0aCIsIm9ua2V5ZG93biIsImNoZWNrS2V5IiwiYWpheCIsInVybCIsImRvbmUiLCJwcm9qZWN0cyIsImh0bWwiLCJnZW5lcmF0ZUhlYWRlck1hcmt1cCIsImNyZWF0ZU5ld1Byb2plY3QiLCJmaXJzdENoaWxkIiwiYm9keSIsIktFWV9VUF9BUlJPVyIsInByZXZlbnREZWZhdWx0IiwicHJldlJvdyIsImdldEFuY2VzdG9yVGFnIiwiYWN0aXZlRWxlbWVudCIsInByZXYiLCJnZXROZXh0RWxlbWVudElEIiwiZm9jdXMiLCJLRVlfRE9XTl9BUlJPVyIsIm5leHRSb3ciLCJuZXh0IiwiS0VZX1JJR0hUX0FSUk9XIiwiZmluZCIsIktFWV9MRUZUX0FSUk9XIiwibmV3Um93Iiwic3BsaXQiLCJmaWVsZE5hbWUiLCJnZW5lcmF0ZVNwcmVhZFNoZWV0TWFya3VwIiwibWFya3VwIiwiZ2VuZXJhdGVQcm9qZWN0U2VsZWN0b3JNYXJrdXAiLCJnZW5lcmF0ZUZpZWxkc1Jvd01hcmt1cCIsImZpZWxkcyIsImdldEZpZWxkSGVhZGVyTWFya3VwIiwiZ2VuZXJhdGVUcmVlTWFya3VwIiwiYWRkUm93IiwiYW5jZXN0b3JzIiwibm9kZUlEIiwiZHJhZ0hhbmRsZSIsImRlbGV0ZUJ1dHRvbiIsImNvcHlCdXR0b24iLCJzaG93RXhwYW5kQnV0dG9uIiwiaGlkZUV4cGFuZEJ1dHRvbiIsIkRFRkFVTFRfTk9ERV9JTlBVVF9XSURUSCIsImdlbmVyYXRlRGF0YU1hcmt1cCIsImFkZERhdGFSb3ciLCJGaWVsZCIsImZvcm1hdFZhbHVlIiwiZ2V0RmllbGRDZWxsTWFya3VwIiwiYWRkQ29sdW1uIiwiZWFjaCIsIml0ZW0iLCJnZXRBc3NlbWJseU1hcmt1cCIsIm5ld05vZGVJRCIsImZpbmROb2RlSW5UcmVlIiwiZmluZFBhcmVudEluVHJlZSIsImdldEZpZWxkTWVudU1hcmt1cCIsIlByb2plY3QiLCJnZXRGaWVsZCIsIm1lbnUiLCJNZW51IiwibnVtYmVySXRlbSIsIk1lbnVJdGVtIiwiTlVNQkVSIiwiZm9ybWF0SXRlbSIsIm51bWJlckZvcm1hdEl0ZW0iLCJOVU1CRVJfRk9STUFUIiwiaXRlbXMiLCJkaXNwbGF5U3RyaW5nIiwicGVyY2VudEZvcm1hdEl0ZW0iLCJQRVJDRU5UX0ZPUk1BVCIsInNjaWVudGlmaWNGb3JtYXRJdGVtIiwiU0NJRU5USUZJQ19GT1JNQVQiLCJhZ2dyZWdhdGlvbkl0ZW0iLCJOT19BR0dSRUdBVElPTiIsInN1bUFueUFnZ0l0ZW0iLCJTVU1fQU5ZX0FHR1JFR0FUSU9OIiwiZiIsIlNUUklORyIsImdlbmVyYXRlTWVudU1hcmt1cCIsImNoZWNrTWFya0NsYXNzIiwiY2hlY2tlZCIsImRpc3BsYXlTcHJlYWRTaGVldCIsImNzcyIsInZhbCIsImhpZGUiLCJuZXdQcm9qZWN0TmFtZSIsIm5ld1Byb2plY3RJRCIsIm5leHRQcm9qZWN0SUQiLCJvcHRpb24iLCJwcm9qZWN0SUQiLCJwcm9qZWN0TmFtZSIsInZlcnNpb24iLCJuZXh0Tm9kZUlEIiwic2F2ZVRvRGF0YWJhc2UiLCJzaG93TWVudSIsImFwcGVuZFRvIiwibW91c2VsZWF2ZSIsImhhbmRsZVByb2plY3RBY3Rpb24iLCJzaG93IiwicmVzaXplQ29sdW1uTGVmdCIsInJlc2l6ZUZpZWxkIiwic3RhcnRSZXNpemUiLCJncmlwIiwiYmluZCIsInJlc2l6ZURyYWciLCJyZXNpemVFbmQiLCJ2aXNpYmlsaXR5IiwicGFnZVgiLCJ1bmJpbmQiLCJuZXdXaWR0aCIsIkdSSVBTX1dJRFRIIiwiTUlOX0NPTFVNTl9XSURUSCIsImNvbHVtbkNlbGxzIiwiaGFuZGxlRGF0YVNjcm9sbCIsInByaW50UHJvamVjdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkaXNwbGF5UmF3VmFsdWUiLCJ0b2dnbGUiLCJpY29uIiwiY29udGFpbnMiLCJjaGlsZHJlbkljb25zIiwiZGVzY2VuZGFudHMiLCJ1cGRhdGVGaWVsZFZhbHVlIiwidXBkYXRlTm9kZVZhbHVlSW5UcmVlIiwidXBkYXRlTm9kZVZhbHVlIiwiZm91bmQiLCJzZWxlY3RQcm9qZWN0IiwicHJvamVjdFNlbGVjdG9yIiwic2VsZWN0ZWRPcHRpb24iLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCIsImdldERlcHRoIiwicmVtb3ZlUGFyZW50IiwiZ2V0QW5jZXN0b3JzIiwicmVtb3ZlQW5jZXN0b3JzIiwiYWRkQW5jZXN0b3JzIiwic2V0TmV3QW5jZXN0b3JzIiwicGFyZW50SUQiLCJvbGRQYXJlbnROb2RlIiwibmV3UGFyZW50Tm9kZSIsIm1vdmVkTm9kZSIsIm1vdmVkRGF0YVJvdyIsInBhcmVudERhdGFSb3ciLCJvbGREZXB0aCIsIm5ld0RlcHRoIiwibWFyZ2luTGVmdCIsImluc2VydEFmdGVyIiwibW92ZU5vZGUiLCJub2RlUm93Iiwibm9kZURhdGFSb3ciLCJwYXJlbnRSb3ciLCJuZXdBbmNlc3RvcnMiLCJzbGljZSIsImZvdW5kTm9kZSIsImZpbmROb2RlIiwiZm91bmRQYXJlbnQiLCJkZWxldGVOb2RlIiwicmVtb3ZlTm9kZVJvdyIsImNvcHlOb2RlIiwibm9kZUluZGV4IiwibmV3Um93TWFya3VwIiwic291cmNlTm9kZSIsInNvdXJjZVBhcmVudE5vZGUiLCJuZXdOb2RlIiwialF1ZXJ5IiwiZXh0ZW5kIiwiYXNzaWduTmV3Tm9kZUlEcyIsImdldE5vZGVJbmRleCIsImluZGV4ZXMiLCJtYXAiLCJ0YWdOYW1lIiwidXBkYXRlTm9kZU5hbWUiLCJkYXRhdHlwZSIsImZvcm1hdCIsInByZWNpc2lvbiIsImFnZ190eXBlIiwiYWdnX3F0eV9maWVsZCIsIkNIT0lDRSIsInRvRml4ZWQiLCJOdW1iZXIiLCJ0b0V4cG9uZW50aWFsIiwiaGFuZGxlQ2xpY2siLCJjbGlja2VkIiwiZ2V0TWVudUl0ZW0iLCJnZXRNZW51SXRlbVBhcmVudCIsInZhck5hbWUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwidXBkYXRlRmllbGRGb3JtYXR0aW5nIiwicHJvdG90eXBlIiwibWVudUl0ZW0iLCJkYXRhVHlwZSIsImpzb24iLCJnZXRUcmVlIiwic3dpdGNoVmlldyJdLCJtYXBwaW5ncyI6IkFBQUEsUUFBU0EsZUFBY0MsRUFBTUMsR0FFM0IsR0FBSUQsRUFBS0UsT0FBK0IsSUFBdEJGLEVBQUtFLE1BQU1DLE9BWTdCLENBR0UsSUFBSSxHQUZBQyxHQUFjLEVBRVZDLEVBQUksRUFBR0EsRUFBSUwsRUFBS0UsTUFBTUMsT0FBUUUsSUFFcENELEdBQWVMLGNBQWNDLEVBQUtFLE1BQU1HLEdBQUlKLEVBVzlDLE9BUklELEdBQUtNLFNBRVBOLEVBQUtNLFdBR1BOLEVBQUtNLE9BQU9MLEdBQVNHLEVBQ3JCRyxTQUFTQyxlQUFlUCxFQUFRRCxFQUFLUyxJQUFJQyxNQUFRTixFQUUxQ0EsRUExQlAsTUFBSUosR0FBS00sUUFBV04sRUFBS00sT0FBT0wsR0FNdkJVLFdBQVdYLEVBQUtNLE9BQU9MLElBSnZCO0FDTmIsR0FBSVcsdUJBQXdCLHdCQUN4QkMsc0JBQXdCLHVCQUN4QkMsc0JBQXdCO0FDRDVCLFFBQVNDLGlCQUFnQkMsR0FzQnZCLFFBQVNDLEdBQU1DLEVBQVFDLEVBQVNDLEdBRTlCLEdBQUtGLEVBQUwsQ0FDQUMsRUFBUUQsRUFFUixJQUFJRyxHQUFXRCxFQUFXRixFQUMxQixJQUFJRyxFQUdGLElBQUssR0FEREMsR0FBUUQsRUFBU2xCLE9BQ1pFLEVBQUksRUFBT2lCLEVBQUpqQixFQUFXQSxJQUV2QlksRUFBTUks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RSxvQkFBb0J2RCxTQUN0Qi9DLGdCQUFnQlMsUUFJaEI2RixFQUFFLG1CQUFtQnZELFNBQ3JCZ2IiLCJmaWxlIjoiaG1zLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGFnZ3JlZ2F0ZV9hbnkobm9kZSwgZmllbGQpXHJcbntcclxuICBpZighbm9kZS5ub2RlcyB8fCBub2RlLm5vZGVzLmxlbmd0aCA9PT0gMClcclxuICB7XHJcbiAgICBpZighbm9kZS52YWx1ZXMgfHwgIW5vZGUudmFsdWVzW2ZpZWxkXSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIDAuMDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQobm9kZS52YWx1ZXNbZmllbGRdKTtcclxuICAgIH1cclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHZhciBjaGlsZHJlblN1bSA9IDAuMDtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbm9kZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgY2hpbGRyZW5TdW0gKz0gYWdncmVnYXRlX2FueShub2RlLm5vZGVzW2ldLCBmaWVsZCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoIW5vZGUudmFsdWVzKVxyXG4gICAge1xyXG4gICAgICBub2RlLnZhbHVlcyA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIG5vZGUudmFsdWVzW2ZpZWxkXSA9IGNoaWxkcmVuU3VtOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3VwZGF0ZSB0aGUgbW9kZWxcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkICsgbm9kZS5pZCkudmFsdWUgPSBjaGlsZHJlblN1bTsgICAgICAgICAvL3VwZGF0ZSB0aGUgdmlld1xyXG5cclxuICAgIHJldHVybiBjaGlsZHJlblN1bTtcclxuICB9XHJcbn0iLCJ2YXIgRE9XTl9BUlJPV19JTUFHRV9QQVRIID0gJ2ltYWdlcy9kb3duLWFycm93LnBuZyc7XHJcbnZhciBDSEVDS19NQVJLX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2NoZWNrbWFyay5wbmcnO1xyXG52YXIgQkxBTktfTUFSS19JTUFHRV9QQVRIID0gJ2ltYWdlcy9ibGFua21hcmsucG5nJzsiLCIvLyBHZXQgSlNPTiBkYXRhXHJcbmZ1bmN0aW9uIGRpc3BsYXlUcmVlVmlldyh0cmVlRGF0YSlcclxue1xyXG4gICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJ0cmVlLWNvbnRhaW5lclwiPjwvZGl2PicpO1xyXG5cclxuICB2YXIgdG90YWxOb2RlcyA9IDA7XHJcbiAgdmFyIG1heExhYmVsTGVuZ3RoID0gMDtcclxuICB2YXIgc2VsZWN0ZWROb2RlID0gbnVsbDtcclxuICB2YXIgZHJhZ2dpbmdOb2RlID0gbnVsbDtcclxuICB2YXIgcGFuU3BlZWQgPSAyMDA7XHJcbiAgdmFyIHBhbkJvdW5kYXJ5ID0gMjA7IC8vIFdpdGhpbiAyMHB4IGZyb20gZWRnZXMgd2lsbCBwYW4gd2hlbiBkcmFnZ2luZy5cclxuICB2YXIgaSA9IDA7XHJcbiAgdmFyIGR1cmF0aW9uID0gNzUwO1xyXG4gIHZhciByb290O1xyXG4gIHZhciB2aWV3ZXJXaWR0aCA9ICQoJyN0cmVlLWNvbnRhaW5lcicpLndpZHRoKCk7XHJcbiAgdmFyIHZpZXdlckhlaWdodCA9ICQoJyN0cmVlLWNvbnRhaW5lcicpLmhlaWdodCgpO1xyXG5cclxuICB2YXIgdHJlZSA9IGQzLmxheW91dC50cmVlKCkuc2l6ZShbdmlld2VySGVpZ2h0LCB2aWV3ZXJXaWR0aF0pO1xyXG4gIFxyXG4gIHRyZWUuY2hpbGRyZW4oZnVuY3Rpb24oZCl7IHJldHVybiBkLm5vZGVzOyB9KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zZXQgdGhlIGNoaWxkcmVuIGZ1bmN0aW9uIHRvIHJlZmVyZW5jZSB0aGUgbm9kZXMgaW4gdGhlIHRyZWUgbW9kZWxcclxuXHJcbiAgdmFyIGRpYWdvbmFsID0gZDMuc3ZnLmRpYWdvbmFsKCkucHJvamVjdGlvbihmdW5jdGlvbihkKSB7IHJldHVybiBbZC55LCBkLnhdOyB9KTsgICAgICAvLyBkZWZpbmUgYSBkMyBkaWFnb25hbCBwcm9qZWN0aW9uIGZvciB1c2UgYnkgdGhlIG5vZGUgcGF0aHMgbGF0ZXIgb24uXHJcblxyXG4gIGZ1bmN0aW9uIHZpc2l0KHBhcmVudCwgdmlzaXRGbiwgY2hpbGRyZW5GbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSByZWN1cnNpdmUgaGVscGVyIGZ1bmN0aW9uIGZvciBwZXJmb3JtaW5nIHNvbWUgc2V0dXAgYnkgd2Fsa2luZyB0aHJvdWdoIGFsbCBub2Rlc1xyXG4gIHtcclxuICAgIGlmICghcGFyZW50KSB7IHJldHVybjsgfVxyXG4gICAgdmlzaXRGbihwYXJlbnQpO1xyXG5cclxuICAgIHZhciBjaGlsZHJlbiA9IGNoaWxkcmVuRm4ocGFyZW50KTtcclxuICAgIGlmIChjaGlsZHJlbikgXHJcbiAgICB7XHJcbiAgICAgIHZhciBjb3VudCA9IGNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSBcclxuICAgICAge1xyXG4gICAgICAgICAgdmlzaXQoY2hpbGRyZW5baV0sIHZpc2l0Rm4sIGNoaWxkcmVuRm4pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2aXNpdCh0cmVlRGF0YSwgZnVuY3Rpb24oZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGwgdmlzaXQgZnVuY3Rpb24gdG8gZXN0YWJsaXNoIG1heExhYmVsTGVuZ3RoXHJcbiAge1xyXG4gICAgICB0b3RhbE5vZGVzKys7XHJcbiAgICAgIG1heExhYmVsTGVuZ3RoID0gTWF0aC5tYXgoZC5uYW1lLmxlbmd0aCwgbWF4TGFiZWxMZW5ndGgpO1xyXG5cclxuICB9LCBmdW5jdGlvbihkKSBcclxuICB7XHJcbiAgICAgIHJldHVybiBkLm5vZGVzICYmIGQubm9kZXMubGVuZ3RoID4gMCA/IGQubm9kZXMgOiBudWxsO1xyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBzb3J0VHJlZSgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNvcnQgdGhlIHRyZWUgYWNjb3JkaW5nIHRvIHRoZSBub2RlIG5hbWVzXHJcbiAge1xyXG4gICAgdHJlZS5zb3J0KGZ1bmN0aW9uKGEsIGIpIFxyXG4gICAge1xyXG4gICAgICByZXR1cm4gYi5uYW1lLnRvTG93ZXJDYXNlKCkgPCBhLm5hbWUudG9Mb3dlckNhc2UoKSA/IDEgOiAtMTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICBzb3J0VHJlZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvcnQgdGhlIHRyZWUgaW5pdGlhbGx5IGluY2FzZSB0aGUgSlNPTiBpc24ndCBpbiBhIHNvcnRlZCBvcmRlci5cclxuXHJcbiAgZnVuY3Rpb24gcGFuKGRvbU5vZGUsIGRpcmVjdGlvbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBQYW4gZnVuY3Rpb24sIGNhbiBiZSBiZXR0ZXIgaW1wbGVtZW50ZWQuXHJcbiAge1xyXG4gICAgICB2YXIgc3BlZWQgPSBwYW5TcGVlZDtcclxuICAgICAgaWYgKHBhblRpbWVyKSBcclxuICAgICAge1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHBhblRpbWVyKTtcclxuICAgICAgICAgIHRyYW5zbGF0ZUNvb3JkcyA9IGQzLnRyYW5zZm9ybShzdmdHcm91cC5hdHRyKFwidHJhbnNmb3JtXCIpKTtcclxuICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgdHJhbnNsYXRlWCA9IGRpcmVjdGlvbiA9PSAnbGVmdCcgPyB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzBdICsgc3BlZWQgOiB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzBdIC0gc3BlZWQ7XHJcbiAgICAgICAgICAgICAgdHJhbnNsYXRlWSA9IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMV07XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSAndXAnIHx8IGRpcmVjdGlvbiA9PSAnZG93bicpIHtcclxuICAgICAgICAgICAgICB0cmFuc2xhdGVYID0gdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVswXTtcclxuICAgICAgICAgICAgICB0cmFuc2xhdGVZID0gZGlyZWN0aW9uID09ICd1cCcgPyB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdICsgc3BlZWQgOiB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdIC0gc3BlZWQ7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzY2FsZVggPSB0cmFuc2xhdGVDb29yZHMuc2NhbGVbMF07XHJcbiAgICAgICAgICBzY2FsZVkgPSB0cmFuc2xhdGVDb29yZHMuc2NhbGVbMV07XHJcbiAgICAgICAgICBzY2FsZSA9IHpvb21MaXN0ZW5lci5zY2FsZSgpO1xyXG4gICAgICAgICAgc3ZnR3JvdXAudHJhbnNpdGlvbigpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB0cmFuc2xhdGVYICsgXCIsXCIgKyB0cmFuc2xhdGVZICsgXCIpc2NhbGUoXCIgKyBzY2FsZSArIFwiKVwiKTtcclxuICAgICAgICAgIGQzLnNlbGVjdChkb21Ob2RlKS5zZWxlY3QoJ2cubm9kZScpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB0cmFuc2xhdGVYICsgXCIsXCIgKyB0cmFuc2xhdGVZICsgXCIpXCIpO1xyXG4gICAgICAgICAgem9vbUxpc3RlbmVyLnNjYWxlKHpvb21MaXN0ZW5lci5zY2FsZSgpKTtcclxuICAgICAgICAgIHpvb21MaXN0ZW5lci50cmFuc2xhdGUoW3RyYW5zbGF0ZVgsIHRyYW5zbGF0ZVldKTtcclxuICAgICAgICAgIHBhblRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBwYW4oZG9tTm9kZSwgc3BlZWQsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICB9LCA1MCk7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHpvb20oKSAgICAgICAvLyBEZWZpbmUgdGhlIHpvb20gZnVuY3Rpb24gZm9yIHRoZSB6b29tYWJsZSB0cmVlXHJcbiAge1xyXG4gICAgICBzdmdHcm91cC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpc2NhbGUoXCIgKyBkMy5ldmVudC5zY2FsZSArIFwiKVwiKTtcclxuICB9XHJcblxyXG4gIHZhciB6b29tTGlzdGVuZXIgPSBkMy5iZWhhdmlvci56b29tKCkuc2NhbGVFeHRlbnQoWzAuMSwgM10pLm9uKFwiem9vbVwiLCB6b29tKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgdGhlIHpvb21MaXN0ZW5lciB3aGljaCBjYWxscyB0aGUgem9vbSBmdW5jdGlvbiBvbiB0aGUgXCJ6b29tXCIgZXZlbnQgY29uc3RyYWluZWQgd2l0aGluIHRoZSBzY2FsZUV4dGVudHNcclxuXHJcbiAgZnVuY3Rpb24gaW5pdGlhdGVEcmFnKGQsIGRvbU5vZGUpIFxyXG4gIHtcclxuICAgICAgZHJhZ2dpbmdOb2RlID0gZDtcclxuICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdCgnLmdob3N0Q2lyY2xlJykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xyXG4gICAgICBkMy5zZWxlY3RBbGwoJy5naG9zdENpcmNsZScpLmF0dHIoJ2NsYXNzJywgJ2dob3N0Q2lyY2xlIHNob3cnKTtcclxuICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUgYWN0aXZlRHJhZycpO1xyXG5cclxuICAgICAgc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpLnNvcnQoZnVuY3Rpb24oYSwgYikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0IHRoZSBwYXJlbnQgYW5kIHNvcnQgdGhlIHBhdGgnc1xyXG4gICAgICB7IFxyXG4gICAgICAgICAgaWYgKGEuaWQgIT0gZHJhZ2dpbmdOb2RlLmlkKSByZXR1cm4gMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBpcyBub3QgdGhlIGhvdmVyZWQgZWxlbWVudCwgc2VuZCBcImFcIiB0byB0aGUgYmFja1xyXG4gICAgICAgICAgZWxzZSByZXR1cm4gLTE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBpcyB0aGUgaG92ZXJlZCBlbGVtZW50LCBicmluZyBcImFcIiB0byB0aGUgZnJvbnRcclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAobm9kZXMubGVuZ3RoID4gMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbm9kZXMgaGFzIGNoaWxkcmVuLCByZW1vdmUgdGhlIGxpbmtzIGFuZCBub2Rlc1xyXG4gICAgICB7XHJcbiAgICAgICAgICBsaW5rcyA9IHRyZWUubGlua3Mobm9kZXMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgbGluayBwYXRoc1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBub2RlUGF0aHMgPSBzdmdHcm91cC5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIikuZGF0YShsaW5rcywgZnVuY3Rpb24oZCkgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgfSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIG5vZGVzRXhpdCA9IHN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGNoaWxkIG5vZGVzXHJcbiAgICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24oZCkgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQuaWQ7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmZpbHRlcihmdW5jdGlvbihkLCBpKSBcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBpZiAoZC5pZCA9PSBkcmFnZ2luZ05vZGUuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH0pLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZW1vdmUgcGFyZW50IGxpbmtcclxuICAgICAgcGFyZW50TGluayA9IHRyZWUubGlua3ModHJlZS5ub2RlcyhkcmFnZ2luZ05vZGUucGFyZW50KSk7XHJcbiAgICAgIHN2Z0dyb3VwLnNlbGVjdEFsbCgncGF0aC5saW5rJykuZmlsdGVyKGZ1bmN0aW9uKGQsIGkpIFxyXG4gICAgICB7XHJcbiAgICAgICAgICByZXR1cm4gZC50YXJnZXQuaWQgPT0gZHJhZ2dpbmdOb2RlLmlkO1xyXG4gICAgICB9KS5yZW1vdmUoKTtcclxuXHJcbiAgICAgIGRyYWdTdGFydGVkID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8vIGRlZmluZSB0aGUgYmFzZVN2ZywgYXR0YWNoaW5nIGEgY2xhc3MgZm9yIHN0eWxpbmcgYW5kIHRoZSB6b29tTGlzdGVuZXJcclxuICB2YXIgYmFzZVN2ZyA9IGQzLnNlbGVjdChcIiN0cmVlLWNvbnRhaW5lclwiKS5hcHBlbmQoXCJzdmdcIilcclxuICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB2aWV3ZXJXaWR0aClcclxuICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgdmlld2VySGVpZ2h0KVxyXG4gICAgICAuYXR0cihcImNsYXNzXCIsIFwib3ZlcmxheVwiKVxyXG4gICAgICAuY2FsbCh6b29tTGlzdGVuZXIpO1xyXG5cclxuXHJcbiAgLy8gRGVmaW5lIHRoZSBkcmFnIGxpc3RlbmVycyBmb3IgZHJhZy9kcm9wIGJlaGF2aW91ciBvZiBub2Rlcy5cclxuICBkcmFnTGlzdGVuZXIgPSBkMy5iZWhhdmlvci5kcmFnKClcclxuICAgICAgLm9uKFwiZHJhZ3N0YXJ0XCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnZHJhZ3N0YXJ0Jyk7XHJcbiAgICAgICAgICBpZiAoZCA9PSByb290KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZHJhZ1N0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgbm9kZXMgPSB0cmVlLm5vZGVzKGQpO1xyXG4gICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAvLyBpdCdzIGltcG9ydGFudCB0aGF0IHdlIHN1cHByZXNzIHRoZSBtb3VzZW92ZXIgZXZlbnQgb24gdGhlIG5vZGUgYmVpbmcgZHJhZ2dlZC4gT3RoZXJ3aXNlIGl0IHdpbGwgYWJzb3JiIHRoZSBtb3VzZW92ZXIgZXZlbnQgYW5kIHRoZSB1bmRlcmx5aW5nIG5vZGUgd2lsbCBub3QgZGV0ZWN0IGl0IGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5vbihcImRyYWdcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgaWYgKGQgPT0gcm9vdCkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChkcmFnU3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgIGRvbU5vZGUgPSB0aGlzO1xyXG4gICAgICAgICAgICAgIGluaXRpYXRlRHJhZyhkLCBkb21Ob2RlKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBnZXQgY29vcmRzIG9mIG1vdXNlRXZlbnQgcmVsYXRpdmUgdG8gc3ZnIGNvbnRhaW5lciB0byBhbGxvdyBmb3IgcGFubmluZ1xyXG4gICAgICAgICAgcmVsQ29vcmRzID0gZDMubW91c2UoJCgnc3ZnJykuZ2V0KDApKTtcclxuICAgICAgICAgIGlmIChyZWxDb29yZHNbMF0gPCBwYW5Cb3VuZGFyeSkge1xyXG4gICAgICAgICAgICAgIHBhblRpbWVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBwYW4odGhpcywgJ2xlZnQnKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzBdID4gKCQoJ3N2ZycpLndpZHRoKCkgLSBwYW5Cb3VuZGFyeSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgcGFuVGltZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIHBhbih0aGlzLCAncmlnaHQnKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzFdIDwgcGFuQm91bmRhcnkpIHtcclxuICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgcGFuKHRoaXMsICd1cCcpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChyZWxDb29yZHNbMV0gPiAoJCgnc3ZnJykuaGVpZ2h0KCkgLSBwYW5Cb3VuZGFyeSkpIHtcclxuICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgcGFuKHRoaXMsICdkb3duJyk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChwYW5UaW1lcik7XHJcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZC54MCArPSBkMy5ldmVudC5keTtcclxuICAgICAgICAgIGQueTAgKz0gZDMuZXZlbnQuZHg7XHJcbiAgICAgICAgICB2YXIgbm9kZSA9IGQzLnNlbGVjdCh0aGlzKTtcclxuICAgICAgICAgIG5vZGUuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQueTAgKyBcIixcIiArIGQueDAgKyBcIilcIik7XHJcbiAgICAgICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgICAgIH0pLm9uKFwiZHJhZ2VuZFwiLCBmdW5jdGlvbihkKSBcclxuICAgICAge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdkcmFnZW5kJyk7XHJcbiAgICAgICAgICBpZiAoZCA9PSByb290KSB7IHJldHVybjsgfVxyXG4gICAgICAgICAgZG9tTm9kZSA9IHRoaXM7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChzZWxlY3RlZE5vZGUpIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAgIC8vIG5vdyByZW1vdmUgdGhlIGVsZW1lbnQgZnJvbSB0aGUgcGFyZW50LCBhbmQgaW5zZXJ0IGl0IGludG8gdGhlIG5ldyBlbGVtZW50cyBjaGlsZHJlblxyXG4gICAgICAgICAgICAgIHZhciBpbmRleCA9IGRyYWdnaW5nTm9kZS5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihkcmFnZ2luZ05vZGUpO1xyXG4gICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSBcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIGRyYWdnaW5nTm9kZS5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIHNlbGVjdGVkTm9kZS5ub2Rlcy5wdXNoKGRyYWdnaW5nTm9kZSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBub2RlIGJlaW5nIGFkZGVkIHRvIGlzIGV4cGFuZGVkIHNvIHVzZXIgY2FuIHNlZSBhZGRlZCBub2RlIGlzIGNvcnJlY3RseSBtb3ZlZFxyXG4gICAgICAgICAgICAgIGV4cGFuZChzZWxlY3RlZE5vZGUpO1xyXG4gICAgICAgICAgICAgIHNvcnRUcmVlKCk7XHJcbiAgICAgICAgICAgICAgZW5kRHJhZygpO1xyXG4gICAgICAgICAgfSBlbHNlIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGVuZERyYWcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIGVuZERyYWcoKSBcclxuICB7XHJcbiAgICBjb25zb2xlLmxvZyhkb21Ob2RlKTtcclxuICAgICAgc2VsZWN0ZWROb2RlID0gbnVsbDtcclxuICAgICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZScpO1xyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuYXR0cignY2xhc3MnLCAnbm9kZScpO1xyXG4gICAgY29uc29sZS5sb2coZG9tTm9kZSk7ICBcclxuICAgICAgLy8gbm93IHJlc3RvcmUgdGhlIG1vdXNlb3ZlciBldmVudCBvciB3ZSB3b24ndCBiZSBhYmxlIHRvIGRyYWcgYSAybmQgdGltZVxyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICcnKTtcclxuICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gICAgICBpZiAoZHJhZ2dpbmdOb2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICB1cGRhdGUocm9vdCk7XHJcbiAgICAgICAgICBjZW50ZXJOb2RlKGRyYWdnaW5nTm9kZSk7XHJcbiAgICAgICAgICBkcmFnZ2luZ05vZGUgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBIZWxwZXIgZnVuY3Rpb25zIGZvciBjb2xsYXBzaW5nIGFuZCBleHBhbmRpbmcgbm9kZXMuXHJcblxyXG4gIGZ1bmN0aW9uIGNvbGxhcHNlKGQpIHtcclxuICAgICAgaWYgKGQuY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcclxuICAgICAgICAgIGQuX2NoaWxkcmVuLmZvckVhY2goY29sbGFwc2UpO1xyXG4gICAgICAgICAgZC5jaGlsZHJlbiA9IG51bGw7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGV4cGFuZChkKSB7XHJcbiAgICAgIGlmIChkLl9jaGlsZHJlbikge1xyXG4gICAgICAgICAgZC5jaGlsZHJlbiA9IGQuX2NoaWxkcmVuO1xyXG4gICAgICAgICAgZC5jaGlsZHJlbi5mb3JFYWNoKGV4cGFuZCk7XHJcbiAgICAgICAgICBkLl9jaGlsZHJlbiA9IG51bGw7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIHZhciBvdmVyQ2lyY2xlID0gZnVuY3Rpb24oZCkge1xyXG4gICAgICBzZWxlY3RlZE5vZGUgPSBkO1xyXG4gICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgfTtcclxuICB2YXIgb3V0Q2lyY2xlID0gZnVuY3Rpb24oZCkge1xyXG4gICAgICBzZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgfTtcclxuXHJcbiAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIHRoZSB0ZW1wb3JhcnkgY29ubmVjdG9yIGluZGljYXRpbmcgZHJhZ2dpbmcgYWZmaWxpYXRpb25cclxuICB2YXIgdXBkYXRlVGVtcENvbm5lY3RvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgICBpZiAoZHJhZ2dpbmdOb2RlICE9PSBudWxsICYmIHNlbGVjdGVkTm9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgLy8gaGF2ZSB0byBmbGlwIHRoZSBzb3VyY2UgY29vcmRpbmF0ZXMgc2luY2Ugd2UgZGlkIHRoaXMgZm9yIHRoZSBleGlzdGluZyBjb25uZWN0b3JzIG9uIHRoZSBvcmlnaW5hbCB0cmVlXHJcbiAgICAgICAgICBkYXRhID0gW3tcclxuICAgICAgICAgICAgICBzb3VyY2U6IHtcclxuICAgICAgICAgICAgICAgICAgeDogc2VsZWN0ZWROb2RlLnkwLFxyXG4gICAgICAgICAgICAgICAgICB5OiBzZWxlY3RlZE5vZGUueDBcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHRhcmdldDoge1xyXG4gICAgICAgICAgICAgICAgICB4OiBkcmFnZ2luZ05vZGUueTAsXHJcbiAgICAgICAgICAgICAgICAgIHk6IGRyYWdnaW5nTm9kZS54MFxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1dO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBsaW5rID0gc3ZnR3JvdXAuc2VsZWN0QWxsKFwiLnRlbXBsaW5rXCIpLmRhdGEoZGF0YSk7XHJcblxyXG4gICAgICBsaW5rLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKVxyXG4gICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInRlbXBsaW5rXCIpXHJcbiAgICAgICAgICAuYXR0cihcImRcIiwgZDMuc3ZnLmRpYWdvbmFsKCkpXHJcbiAgICAgICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xyXG5cclxuICAgICAgbGluay5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSk7XHJcblxyXG4gICAgICBsaW5rLmV4aXQoKS5yZW1vdmUoKTtcclxuICB9O1xyXG5cclxuICAvLyBGdW5jdGlvbiB0byBjZW50ZXIgbm9kZSB3aGVuIGNsaWNrZWQvZHJvcHBlZCBzbyBub2RlIGRvZXNuJ3QgZ2V0IGxvc3Qgd2hlbiBjb2xsYXBzaW5nL21vdmluZyB3aXRoIGxhcmdlIGFtb3VudCBvZiBjaGlsZHJlbi5cclxuXHJcbiAgZnVuY3Rpb24gY2VudGVyTm9kZShzb3VyY2UpIHtcclxuICAgICAgc2NhbGUgPSB6b29tTGlzdGVuZXIuc2NhbGUoKTtcclxuICAgICAgeCA9IC1zb3VyY2UueTA7XHJcbiAgICAgIHkgPSAtc291cmNlLngwO1xyXG4gICAgICB4ID0geCAqIHNjYWxlICsgdmlld2VyV2lkdGggLyAyO1xyXG4gICAgICB5ID0geSAqIHNjYWxlICsgdmlld2VySGVpZ2h0IC8gMjtcclxuICAgICAgZDMuc2VsZWN0KCdnJykudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXHJcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHggKyBcIixcIiArIHkgKyBcIilzY2FsZShcIiArIHNjYWxlICsgXCIpXCIpO1xyXG4gICAgICB6b29tTGlzdGVuZXIuc2NhbGUoc2NhbGUpO1xyXG4gICAgICB6b29tTGlzdGVuZXIudHJhbnNsYXRlKFt4LCB5XSk7XHJcbiAgfVxyXG5cclxuICAvLyBUb2dnbGUgY2hpbGRyZW4gZnVuY3Rpb25cclxuXHJcbiAgZnVuY3Rpb24gdG9nZ2xlQ2hpbGRyZW4oZCkge1xyXG4gICAgICBpZiAoZC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xyXG4gICAgICAgICAgZC5jaGlsZHJlbiA9IG51bGw7XHJcbiAgICAgIH0gZWxzZSBpZiAoZC5fY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGQuY2hpbGRyZW4gPSBkLl9jaGlsZHJlbjtcclxuICAgICAgICAgIGQuX2NoaWxkcmVuID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZDtcclxuICB9XHJcblxyXG4gIC8vIFRvZ2dsZSBjaGlsZHJlbiBvbiBjbGljay5cclxuXHJcbiAgZnVuY3Rpb24gY2xpY2soZCkge1xyXG4gICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuOyAvLyBjbGljayBzdXBwcmVzc2VkXHJcbiAgICAgIGQgPSB0b2dnbGVDaGlsZHJlbihkKTtcclxuICAgICAgdXBkYXRlKGQpO1xyXG4gICAgICBjZW50ZXJOb2RlKGQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlKHNvdXJjZSkge1xyXG4gICAgICAvLyBDb21wdXRlIHRoZSBuZXcgaGVpZ2h0LCBmdW5jdGlvbiBjb3VudHMgdG90YWwgY2hpbGRyZW4gb2Ygcm9vdCBub2RlIGFuZCBzZXRzIHRyZWUgaGVpZ2h0IGFjY29yZGluZ2x5LlxyXG4gICAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBsYXlvdXQgbG9va2luZyBzcXVhc2hlZCB3aGVuIG5ldyBub2RlcyBhcmUgbWFkZSB2aXNpYmxlIG9yIGxvb2tpbmcgc3BhcnNlIHdoZW4gbm9kZXMgYXJlIHJlbW92ZWRcclxuICAgICAgLy8gVGhpcyBtYWtlcyB0aGUgbGF5b3V0IG1vcmUgY29uc2lzdGVudC5cclxuICAgICAgdmFyIGxldmVsV2lkdGggPSBbMV07XHJcbiAgICAgIHZhciBjaGlsZENvdW50ID0gZnVuY3Rpb24obGV2ZWwsIG4pIHtcclxuICAgICAgICAgIGlmIChuLm5vZGVzICYmIG4ubm9kZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIGlmIChsZXZlbFdpZHRoLmxlbmd0aCA8PSBsZXZlbCArIDEpIGxldmVsV2lkdGgucHVzaCgwKTtcclxuXHJcbiAgICAgICAgICAgICAgbGV2ZWxXaWR0aFtsZXZlbCArIDFdICs9IG4ubm9kZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgIG4ubm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNoaWxkQ291bnQobGV2ZWwgKyAxLCBkKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgY2hpbGRDb3VudCgwLCByb290KTtcclxuICAgICAgdmFyIG5ld0hlaWdodCA9IGQzLm1heChsZXZlbFdpZHRoKSAqIDI1OyAvLyAyNSBwaXhlbHMgcGVyIGxpbmUgIFxyXG4gICAgICB0cmVlID0gdHJlZS5zaXplKFtuZXdIZWlnaHQsIHZpZXdlcldpZHRoXSk7XHJcblxyXG4gICAgICAvLyBDb21wdXRlIHRoZSBuZXcgdHJlZSBsYXlvdXQuXHJcbiAgICAgIHZhciBub2RlcyA9IHRyZWUubm9kZXMocm9vdCkucmV2ZXJzZSgpLFxyXG4gICAgICAgICAgbGlua3MgPSB0cmVlLmxpbmtzKG5vZGVzKTtcclxuXHJcbiAgICAgIC8vIFNldCB3aWR0aHMgYmV0d2VlbiBsZXZlbHMgYmFzZWQgb24gbWF4TGFiZWxMZW5ndGguXHJcbiAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgZC55ID0gKGQuZGVwdGggKiAobWF4TGFiZWxMZW5ndGggKiAxMCkpOyAvL21heExhYmVsTGVuZ3RoICogMTBweFxyXG4gICAgICAgICAgLy8gYWx0ZXJuYXRpdmVseSB0byBrZWVwIGEgZml4ZWQgc2NhbGUgb25lIGNhbiBzZXQgYSBmaXhlZCBkZXB0aCBwZXIgbGV2ZWxcclxuICAgICAgICAgIC8vIE5vcm1hbGl6ZSBmb3IgZml4ZWQtZGVwdGggYnkgY29tbWVudGluZyBvdXQgYmVsb3cgbGluZVxyXG4gICAgICAgICAgLy8gZC55ID0gKGQuZGVwdGggKiA1MDApOyAvLzUwMHB4IHBlciBsZXZlbC5cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgdGhlIG5vZGVz4oCmXHJcbiAgICAgIG5vZGUgPSBzdmdHcm91cC5zZWxlY3RBbGwoXCJnLm5vZGVcIilcclxuICAgICAgICAgIC5kYXRhKG5vZGVzLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQuaWQgfHwgKGQuaWQgPSArK2kpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBFbnRlciBhbnkgbmV3IG5vZGVzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cclxuICAgICAgdmFyIG5vZGVFbnRlciA9IG5vZGUuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAuY2FsbChkcmFnTGlzdGVuZXIpXHJcbiAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZVwiKVxyXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHNvdXJjZS55MCArIFwiLFwiICsgc291cmNlLngwICsgXCIpXCI7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLm9uKCdjbGljaycsIGNsaWNrKTtcclxuXHJcbiAgICAgIG5vZGVFbnRlci5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdub2RlQ2lyY2xlJylcclxuICAgICAgICAgIC5hdHRyKFwiclwiLCAwKVxyXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQuX2NoaWxkcmVuID8gXCJsaWdodHN0ZWVsYmx1ZVwiIDogXCIjZmZmXCI7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIG5vZGVFbnRlci5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gLTEwIDogMTA7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbm9kZVRleHQnKVxyXG4gICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyBcImVuZFwiIDogXCJzdGFydFwiO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAgIC8vIHBoYW50b20gbm9kZSB0byBnaXZlIHVzIG1vdXNlb3ZlciBpbiBhIHJhZGl1cyBhcm91bmQgaXRcclxuICAgICAgbm9kZUVudGVyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2dob3N0Q2lyY2xlJylcclxuICAgICAgICAgIC5hdHRyKFwiclwiLCAzMClcclxuICAgICAgICAgIC5hdHRyKFwib3BhY2l0eVwiLCAwLjIpIC8vIGNoYW5nZSB0aGlzIHRvIHplcm8gdG8gaGlkZSB0aGUgdGFyZ2V0IGFyZWFcclxuICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcInJlZFwiKVxyXG4gICAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ21vdXNlb3ZlcicpXHJcbiAgICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgIG92ZXJDaXJjbGUobm9kZSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgIG91dENpcmNsZShub2RlKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHRoZSB0ZXh0IHRvIHJlZmxlY3Qgd2hldGhlciBub2RlIGhhcyBjaGlsZHJlbiBvciBub3QuXHJcbiAgICAgIG5vZGUuc2VsZWN0KCd0ZXh0JylcclxuICAgICAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAtMTAgOiAxMDtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBkLm5hbWU7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIENoYW5nZSB0aGUgY2lyY2xlIGZpbGwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgaXQgaGFzIGNoaWxkcmVuIGFuZCBpcyBjb2xsYXBzZWRcclxuICAgICAgbm9kZS5zZWxlY3QoXCJjaXJjbGUubm9kZUNpcmNsZVwiKVxyXG4gICAgICAgICAgLmF0dHIoXCJyXCIsIDQuNSlcclxuICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBkLl9jaGlsZHJlbiA/IFwibGlnaHRzdGVlbGJsdWVcIiA6IFwiI2ZmZlwiO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBUcmFuc2l0aW9uIG5vZGVzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cclxuICAgICAgdmFyIG5vZGVVcGRhdGUgPSBub2RlLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGQueSArIFwiLFwiICsgZC54ICsgXCIpXCI7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEZhZGUgdGhlIHRleHQgaW5cclxuICAgICAgbm9kZVVwZGF0ZS5zZWxlY3QoXCJ0ZXh0XCIpXHJcbiAgICAgICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMSk7XHJcblxyXG4gICAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgICAgdmFyIG5vZGVFeGl0ID0gbm9kZS5leGl0KCkudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXHJcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgc291cmNlLnkgKyBcIixcIiArIHNvdXJjZS54ICsgXCIpXCI7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgbm9kZUV4aXQuc2VsZWN0KFwiY2lyY2xlXCIpXHJcbiAgICAgICAgICAuYXR0cihcInJcIiwgMCk7XHJcblxyXG4gICAgICBub2RlRXhpdC5zZWxlY3QoXCJ0ZXh0XCIpXHJcbiAgICAgICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMCk7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgdGhlIGxpbmtz4oCmXHJcbiAgICAgIHZhciBsaW5rID0gc3ZnR3JvdXAuc2VsZWN0QWxsKFwicGF0aC5saW5rXCIpXHJcbiAgICAgICAgICAuZGF0YShsaW5rcywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC5pZDtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gRW50ZXIgYW55IG5ldyBsaW5rcyBhdCB0aGUgcGFyZW50J3MgcHJldmlvdXMgcG9zaXRpb24uXHJcbiAgICAgIGxpbmsuZW50ZXIoKS5pbnNlcnQoXCJwYXRoXCIsIFwiZ1wiKVxyXG4gICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtcIilcclxuICAgICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG8gPSB7XHJcbiAgICAgICAgICAgICAgICAgIHg6IHNvdXJjZS54MCxcclxuICAgICAgICAgICAgICAgICAgeTogc291cmNlLnkwXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICByZXR1cm4gZGlhZ29uYWwoe1xyXG4gICAgICAgICAgICAgICAgICBzb3VyY2U6IG8sXHJcbiAgICAgICAgICAgICAgICAgIHRhcmdldDogb1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBUcmFuc2l0aW9uIGxpbmtzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cclxuICAgICAgbGluay50cmFuc2l0aW9uKClcclxuICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcclxuICAgICAgICAgIC5hdHRyKFwiZFwiLCBkaWFnb25hbCk7XHJcblxyXG4gICAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgICAgbGluay5leGl0KCkudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXHJcbiAgICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHZhciBvID0ge1xyXG4gICAgICAgICAgICAgICAgICB4OiBzb3VyY2UueCxcclxuICAgICAgICAgICAgICAgICAgeTogc291cmNlLnlcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIHJldHVybiBkaWFnb25hbCh7XHJcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogbyxcclxuICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBvXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgLy8gU3Rhc2ggdGhlIG9sZCBwb3NpdGlvbnMgZm9yIHRyYW5zaXRpb24uXHJcbiAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgZC54MCA9IGQueDtcclxuICAgICAgICAgIGQueTAgPSBkLnk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQXBwZW5kIGEgZ3JvdXAgd2hpY2ggaG9sZHMgYWxsIG5vZGVzIGFuZCB3aGljaCB0aGUgem9vbSBMaXN0ZW5lciBjYW4gYWN0IHVwb24uXHJcbiAgdmFyIHN2Z0dyb3VwID0gYmFzZVN2Zy5hcHBlbmQoXCJnXCIpO1xyXG5cclxuICAvLyBEZWZpbmUgdGhlIHJvb3RcclxuICByb290ID0gdHJlZURhdGE7XHJcbiAgcm9vdC54MCA9IHZpZXdlckhlaWdodCAvIDI7XHJcbiAgcm9vdC55MCA9IDA7XHJcblxyXG4gIC8vIExheW91dCB0aGUgdHJlZSBpbml0aWFsbHkgYW5kIGNlbnRlciBvbiB0aGUgcm9vdCBub2RlLlxyXG4gIHVwZGF0ZShyb290KTtcclxuICBjZW50ZXJOb2RlKHJvb3QpO1xyXG59IiwiLypcclxuQ29weXJpZ2h0IChjKSAyMDA4LTIwMTEsIHd3dy5yZWRpcHMubmV0IEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkNvZGUgbGljZW5zZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlOiBodHRwOi8vd3d3LnJlZGlwcy5uZXQvbGljZW5zZS9cclxuaHR0cDovL3d3dy5yZWRpcHMubmV0L2phdmFzY3JpcHQvZHJhZy1hbmQtZHJvcC10YWJsZS1jb250ZW50L1xyXG4qL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgUkVESVBTID0gUkVESVBTIHx8IHt9OyAgICAgIC8vY3JlYXRlIFJFRElQUyBuYW1lc3BhY2UgKGlmIGlzIG5vdCBhbHJlYWR5IGRlZmluZWQgaW4gYW5vdGhlciBSRURJUFMgcGFja2FnZSlcclxuXHJcbi8vUkVESVBTLmRyYWcgaXMgYSBKYXZhU2NyaXB0IGRyYWcgYW5kIGRyb3AgbGlicmFyeSBmb2N1c2VkIG9uIGRyYWdnaW5nIHRhYmxlIGNvbnRlbnQgKERJViBlbGVtZW50cykgYW5kIHRhYmxlIHJvd3MuXHJcblJFRElQUy5kcmFnID0gKGZ1bmN0aW9uICgpXHJcbntcclxuICAgIC8vIG1ldGhvZHNcclxuICB2YXIgaW5pdCwgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uXHJcbiAgICBlbmFibGVEcmFnLCAgICAgICAgIC8vIG1ldGhvZCBhdHRhY2hlcyAvIGRldGFjaGVzIG9ubW91c2Vkb3duIGFuZCBvbnNjcm9sbCBldmVudCBoYW5kbGVycyBmb3IgRElWIGVsZW1lbnRzXHJcbiAgICBlbmFibGVEaXZzLFxyXG4gICAgaGFuZGxlck9uTW91c2VEb3duLCAgICAgLy8gb25tb3VzZWRvd24gaGFuZGxlclxyXG4gICAgaGFuZGxlck9uTW91c2VVcCwgICAgIC8vIG9ubW91c2V1cCBoYW5kbGVyXHJcbiAgICBoYW5kbGVyT25Nb3VzZU1vdmUsICAgICAvLyBvbm1vdXNlbW92ZSBoYW5kbGVyIGZvciB0aGUgZG9jdW1lbnQgbGV2ZWxcclxuICAgIGVsZW1lbnREcm9wLCAgICAgICAgLy8gZHJvcCBlbGVtZW50IHRvIHRoZSB0YWJsZSBjZWxsXHJcbiAgICByZXNldFN0eWxlcywgICAgICAgIC8vIHJlc2V0IG9iamVjdCBzdHlsZXMgYWZ0ZXIgZWxlbWVudCBpcyBkcm9wcGVkXHJcbiAgICByZWdpc3RlckV2ZW50cywgICAgICAgLy8gcmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIGZvciBESVYgZWxlbWVudFxyXG4gICAgY2VsbENoYW5nZWQsICAgICAgICAvLyBwcml2YXRlIG1ldGhvZCBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmUoKSwgYXV0b1Njcm9sbFgoKSwgYXV0b1Njcm9sbFkoKVxyXG4gICAgaGFuZGxlck9uUmVzaXplLCAgICAgIC8vIG9ucmVzaXplIHdpbmRvdyBldmVudCBoYW5kbGVyXHJcbiAgICBzZXRUYWJsZVJvd0NvbHVtbiwgICAgICAvLyBmdW5jdGlvbiBzZXRzIGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbFxyXG4gICAgc2V0UG9zaXRpb24sICAgICAgICAvLyBmdW5jdGlvbiBzZXRzIGNvbG9yIGZvciB0aGUgY3VycmVudCB0YWJsZSBjZWxsIGFuZCByZW1lbWJlcnMgcHJldmlvdXMgcG9zaXRpb24gYW5kIGNvbG9yXHJcbiAgICBzZXRUZFN0eWxlLCAgICAgICAgIC8vIG1ldGhvZCBzZXRzIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgZm9yIFREXHJcbiAgICBnZXRUZFN0eWxlLCAgICAgICAgIC8vIG1ldGhvZCByZXR1cm5zIG9iamVjdCBjb250YWluaW5nIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgZm9yIFREXHJcbiAgICBib3hPZmZzZXQsICAgICAgICAgIC8vIGNhbGN1bGF0ZXMgb2JqZWN0IChib3gpIG9mZnNldCAodG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KVxyXG4gICAgY2FsY3VsYXRlQ2VsbHMsICAgICAgIC8vIGNhbGN1bGF0ZXMgdGFibGUgY29sdW1ucyBhbmQgcm93IG9mZnNldHMgKGNlbGxzIGRpbWVuc2lvbnMpXHJcbiAgICBnZXRTY3JvbGxQb3NpdGlvbiwgICAgICAvLyByZXR1cm5zIHNjcm9sbCBwb3NpdGlvbnMgaW4gYXJyYXlcclxuICAgIGF1dG9TY3JvbGxYLCAgICAgICAgLy8gaG9yaXpvbnRhbCBhdXRvIHNjcm9sbCBmdW5jdGlvblxyXG4gICAgYXV0b1Njcm9sbFksICAgICAgICAvLyB2ZXJ0aWNhbCBhdXRvIHNjcm9sbCBmdW5jdGlvblxyXG4gICAgY29weVByb3BlcnRpZXMsICAgICAgIC8vIG1ldGhvZCBjb3BpZXMgY3VzdG9tIHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgZWxlbWVudCB0byB0aGUgY2xvbmVkIGVsZW1lbnQuXHJcbiAgICBjbG9uZUxpbWl0LCAgICAgICAgIC8vIGNsb25lIGxpbWl0IChhZnRlciBjbG9uaW5nIG9iamVjdCwgdGFrZSBjYXJlIGFib3V0IGNsaW1pdDFfWCBvciBjbGltaXQyX1ggY2xhc3NuYW1lcylcclxuICAgIGdldFN0eWxlLCAgICAgICAgIC8vIG1ldGhvZCByZXR1cm5zIHN0eWxlIHZhbHVlIG9mIHJlcXVlc3RlZCBvYmplY3QgYW5kIHN0eWxlIG5hbWVcclxuICAgIGZpbmRQYXJlbnQsICAgICAgICAgLy8gbWV0aG9kIHJldHVybnMgYSByZWZlcmVuY2Ugb2YgdGhlIHJlcXVpcmVkIHBhcmVudCBlbGVtZW50XHJcbiAgICByb3dPcGFjaXR5LCAgICAgICAgIC8vIG1ldGhvZCBzZXRzIG9wYWNpdHkgdG8gdGFibGUgcm93IChlbCwgb3BhY2l0eSwgY29sb3IpXHJcbiAgICByb3dDbG9uZSwgICAgICAgICAvLyBjbG9uZSB0YWJsZSByb3cgLSBpbnB1dCBwYXJhbWV0ZXIgaXMgRElWIHdpdGggY2xhc3MgbmFtZSBcInJlZGlwcy1yb3dcIiAtPiBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCJcclxuICAgIHJvd0Ryb3AsICAgICAgICAgIC8vIGZ1bmN0aW9uIGRyb3BzIChkZWxldGUgb2xkICYgaW5zZXJ0IG5ldykgdGFibGUgcm93IChpbnB1dCBwYXJhbWV0ZXJzIGFyZSBjdXJyZW50IHRhYmxlIGFuZCByb3cpXHJcbiAgICBub3JtYWxpemUsICAgICAgICAgIC8vIHByaXZhdGUgbWV0aG9kIHJldHVybnMgbm9ybWFsaXplZCBzcGFjZXMgZnJvbSBpbnB1dCBzdHJpbmdcclxuXHJcbiAgICAvLyBwcml2YXRlIHBhcmFtZXRlcnNcclxuICAgIG9iak1hcmdpbiA9IG51bGwsICAgICAvLyBzcGFjZSBmcm9tIGNsaWNrZWQgcG9pbnQgdG8gdGhlIG9iamVjdCBib3VuZHMgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdClcclxuXHJcbiAgICAvLyB3aW5kb3cgd2lkdGggYW5kIGhlaWdodCAocGFyYW1ldGVycyBhcmUgc2V0IGluIG9ubG9hZCBhbmQgb25yZXNpemUgZXZlbnQgaGFuZGxlciksIGp1c3QgZm9yIGEgbm90ZTogd2luZG93IGFuZCBXaW5kb3cgaXMgcmVzZXJ2ZWQgd29yZCBpbiBKUyBzbyBJIG5hbWVkIHZhcmlhYmxlIFwic2NyZWVuXCIpXHJcbiAgICBzY3JlZW4gPSB7d2lkdGg6IDAsIGhlaWdodDogMH0sXHJcblxyXG4gICAgLy8gZGVmaW5lIHNjcm9sbCBvYmplY3Qgd2l0aCBjb250YWluZWQgcHJvcGVydGllcyAodGhpcyBpcyBwcml2YXRlIHByb3BlcnR5KVxyXG4gICAgc2Nyb2xsRGF0YSA9IHt3aWR0aCA6IG51bGwsIC8vIHNjcm9sbCB3aWR0aCBvZiB0aGUgd2luZG93IChpdCBpcyB1c3VhbGx5IGdyZWF0ZXIgdGhlbiB3aW5kb3cpXHJcbiAgICAgICAgaGVpZ2h0IDogbnVsbCwgICAgLy8gc2Nyb2xsIGhlaWdodCBvZiB0aGUgd2luZG93IChpdCBpcyB1c3VhbGx5IGdyZWF0ZXIgdGhlbiB3aW5kb3cpXHJcbiAgICAgICAgY29udGFpbmVyIDogW10sICAgLy8gc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXMgKGNvbnRhaW5zIGF1dG9zY3JvbGwgYXJlYXMsIHJlZmVyZW5jZSB0byB0aGUgY29udGFpbmVyIGFuZCBzY3JvbGwgZGlyZWN0aW9uKVxyXG4gICAgICAgIG9iaiA6IG51bGx9LCAgICAvLyBzY3JvbGwgb2JqZWN0IChuZWVkZWQgaW4gYXV0b3Njcm9sbCBmb3IgcmVjdXJzaXZlIGNhbGxzKVxyXG5cclxuICAgIGVkZ2UgPSB7cGFnZToge3g6IDAsIHk6IDB9LCAvLyBhdXRvc2Nyb2xsIGJvdW5kIHZhbHVlcyBmb3IgcGFnZSBhbmQgZGl2IGFzIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgZGl2OiAge3g6IDAsIHk6IDB9LCAvLyBjbG9zZXIgdG8gdGhlIGVkZ2UsIGZhc3RlciBzY3JvbGxpbmdcclxuICAgICAgICBmbGFnOiB7eDogMCwgeTogMH19LC8vIGZsYWdzIGFyZSBuZWVkZWQgdG8gcHJldmVudCBtdWx0aXBsZSBjYWxscyBvZiBhdXRvU2Nyb2xsWCBhbmQgYXV0b1Njcm9sbFkgZnJvbSBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyXHJcblxyXG4gICAgYmdTdHlsZU9sZCwgICAgICAgICAvLyAob2JqZWN0KSBvbGQgdGQgc3R5bGVzIChiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzKVxyXG5cclxuICAgIHRhYmxlLCAgICAgICAgLy8gdGFibGUgb2Zmc2V0cyBhbmQgcm93IG9mZnNldHMgKGluaXRpYWxpemVkIGluIG9ubG9hZCBldmVudClcclxuICAgIG1vdmVkLCAgICAgICAgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIGVsZW1lbnQgaXMgbW92ZWRcclxuICAgIGNsb25lZCwgICAgICAgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIGVsZW1lbnQgaXMgY2xvbmVkXHJcbiAgICBjbG9uZWRJZCA9IFtdLCAgICAgICAgLy8gbmVlZGVkIGZvciBpbmNyZW1lbnQgSUQgb2YgY2xvbmVkIGVsZW1lbnRzXHJcbiAgICBjdXJyZW50Q2VsbCA9IFtdLCAgICAgLy8gY3VycmVudCBjZWxsIGJvdW5kcyAodG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KSBhbmQgXCJjb250YWluVGFibGVcIiBmbGFnIGZvciBuZXN0ZWQgdGFibGVzXHJcbiAgICBkcmFnQ29udGFpbmVyID0gbnVsbCwgICAvLyBkcmFnIGNvbnRhaW5lciByZWZlcmVuY2VcclxuICAgIGRpdkJveCA9IG51bGwsICAgICAgICAvLyBkaXYgZHJhZyBib3g6IHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdCBtYXJnaW4gKGRlY3JlYXNlIG51bWJlciBjYWxscyBvZiBzZXRUYWJsZVJvd0NvbHVtbilcclxuICAgIHBvaW50ZXIgPSB7eDogMCwgeTogMH0sICAgLy8gbW91c2UgcG9pbnRlciBwb3NpdGlvbiAodGhpcyBwcm9wZXJ0aWVzIGFyZSBzZXQgaW4gaGFuZGxlck9uTW91c2VNb3ZlKCkgLSBuZWVkZWQgZm9yIGF1dG9zY3JvbGwpXHJcbiAgICB0aHJlc2hvbGQgPSB7eDogMCwgICAgICAvLyBpbml0aWFsIHgsIHkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgICAgICAgeTogMCxcclxuICAgICAgICAgIHZhbHVlOiA3LCAgIC8vIHRocmVzaG9sZCBkaXN0YW5jZSB2YWx1ZVxyXG4gICAgICAgICAgZmxhZzogZmFsc2V9LCAvLyB0aHJlc2hvbGQgZmxhZ1xyXG4gICAgc2hpZnRLZXkgPSBmYWxzZSwgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIHNoaWZ0IGtleSBpcyBwcmVzc2VkIChzZXQgaW4gaGFuZGxlcl9tb3VzZWRvd24pXHJcbiAgICBjbG9uZUNsYXNzID0gZmFsc2UsICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBjbGlja2VkIGVsZW1lbnQgY29udGFpbnMgY2xvbmUgaW4gY2xhc3MgbmFtZSAoc2V0IGluIGhhbmRsZXJfbW91c2Vkb3duKVxyXG4gICAgd2luZG93U2Nyb2xsUG9zaXRpb24sICAgLy8gKGFycmF5KSB0b3AgYW5kIGxlZnQgd2luZG93IG9mZnNldCAoc2V0IGluIGNhbGN1bGF0ZUNlbGxzIGFuZCB1c2VkIGluIGJveE9mZnNldClcclxuXHJcbiAgICAvLyBzZWxlY3RlZCwgcHJldmlvdXMgYW5kIHNvdXJjZSByb3cgYW5kIGNlbGwgKHByaXZhdGUgcGFyYW1ldGVycyB0b28pXHJcbiAgICByb3cgPSBudWxsLFxyXG4gICAgcm93X29sZCA9IG51bGwsXHJcbiAgICByb3dfc291cmNlID0gbnVsbCxcclxuICAgIGNlbGwgPSBudWxsLFxyXG4gICAgY2VsbF9vbGQgPSBudWxsLFxyXG4gICAgY2VsbF9zb3VyY2UgPSBudWxsLFxyXG5cclxuICAgIC8vIHZhcmlhYmxlcyBpbiB0aGUgcHJpdmF0ZSBzY29wZSByZXZlYWxlZCBhcyBwdWJsaWMgKHNlZSBpbml0KCkgbWV0aG9kKVxyXG4gICAgb2JqID0gZmFsc2UsICAgICAgICAvLyAob2JqZWN0KSBtb3ZlZCBvYmplY3RcclxuICAgIG9iak9sZCA9IGZhbHNlLCAgICAgICAvLyAob2JqZWN0KSBwcmV2aW91c2x5IG1vdmVkIG9iamVjdCAoYmVmb3JlIGNsaWNrZWQgb3IgY2xvbmVkKVxyXG4gICAgaG92ZXIgPSB7Y29sb3JUZDogJyNGRkNGQUUnLCBjb2xvclRyOiAnIzlCQjNEQSd9LFxyXG4gICAgc2Nyb2xsID0ge2VuYWJsZSA6IHRydWUsICAvLyAoYm9vbGVhbikgZW5hYmxlL2Rpc2FibGUgYXV0b3Njcm9sbCBmdW5jdGlvbiAoZGVmYXVsdCBpcyB0cnVlKVxyXG4gICAgICAgIGJvdW5kIDogMjUsICAgICAvLyAoaW50ZWdlcikgYm91bmQgd2lkdGggZm9yIGF1dG9zY3JvbGxcclxuICAgICAgICBzcGVlZCA6IDIwfSwgICAgLy8gKGludGVnZXIpIHNjcm9sbCBzcGVlZCBpbiBtaWxsaXNlY29uZHNcclxuICAgIHN0eWxlID0gey8vYm9yZGVyRW5hYmxlZCA6ICdzb2xpZCcsIC8vIChzdHJpbmcpIGJvcmRlciBzdHlsZSBmb3IgZW5hYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIGJvcmRlckRpc2FibGVkIDogJ2RvdHRlZCcsICAvLyAoc3RyaW5nKSBib3JkZXIgc3R5bGUgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgICAgb3BhY2l0eURpc2FibGVkIDogJycsICAgLy8gKGludGVnZXIpIHNldCBvcGFjaXR5IGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIHJvd0VtcHR5Q29sb3IgOiAnd2hpdGUnfSwgLy8gKHN0cmluZykgY29sb3Igb2YgZW1wdHkgcm93XHJcbiAgICB0ZCA9IHt9LCAgICAgICAgICAgIC8vIChvYmplY3QpIGNvbnRhaW5zIHJlZmVyZW5jZSB0byBzb3VyY2UgKHNldCBpbiBvbm1vdXNlZG93biksIGN1cnJlbnQgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCksIHByZXZpb3VzIChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpIGFuZCB0YXJnZXQgY2VsbCAoc2V0IGluIG9ubW91c2V1cClcclxuICAgIGNsb25lID0ge2tleURpdiA6IGZhbHNlLCAgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgZWxlbWVudHMgY291bGQgYmUgY2xvbmVkIHdpdGggcHJlc3NlZCBTSElGVCBrZXlcclxuICAgICAgICBrZXlSb3cgOiBmYWxzZSwgICAgIC8vIChib29sZWFuKSBpZiB0cnVlLCByb3dzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5XHJcbiAgICAgICAgc2VuZEJhY2sgOiBmYWxzZSwgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgdGhlbiBjbG9uZWQgZWxlbWVudCBjYW4gYmUgcmV0dXJuZWQgdG8gaXRzIHNvdXJjZVxyXG4gICAgICAgIGRyb3AgOiBmYWxzZX0sICAgICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIHRoZW4gY2xvbmVkIGVsZW1lbnQgd2lsbCBiZSBhbHdheXMgZHJvcHBlZCB0byB0aGUgdGFibGUgbm8gbWF0dGVyIGlmIGRyb3BwZWQgb3V0c2lkZSBvZiB0aGUgdGFibGVcclxuICAgIFxyXG4gICAgZXZlbnQgPSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChvYmplY3QpIGV2ZW50IGhhbmRsZXJzXHJcbiAgICB7XHJcbiAgICAgIGNsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBjbG9uZWREcm9wcGVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGNsb25lZEVuZDEgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgY2xvbmVkRW5kMiA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBkcm9wcGVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGRyb3BwZWRCZWZvcmUgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgZmluaXNoIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIG5vdENsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBub3RNb3ZlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dDaGFuZ2VkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0NsaWNrZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Q2xvbmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Ryb3BwZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93RHJvcHBlZEJlZm9yZSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dEcm9wcGVkU291cmNlIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd01vdmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd05vdENsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dOb3RNb3ZlZCA6IGZ1bmN0aW9uICgpIHt9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRHJhZyBjb250YWluZXIgaW5pdGlhbGl6YXRpb24uIEl0IHNob3VsZCBiZSBjYWxsZWQgYXQgbGVhc3Qgb25jZSBhbmQgaXQncyBwb3NzaWJsZSB0byBjYWxsIGEgbWV0aG9kIG1hbnkgdGltZXMuIEV2ZXJ5IHBhZ2Ugc2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIGRyYWcgY29udGFpbmVyLlxyXG4gICAqIElmIFJFRElQUy5kcmFnLmluaXQoKSBpcyBjYWxsZWQgd2l0aG91dCBpbnB1dCBwYXJhbWV0ZXIsIGxpYnJhcnkgd2lsbCBzZWFyY2ggZm9yIGRyYWcgY29udGFpbmVyIHdpdGggaWQ9XCJyZWRpcHMtZHJhZ1wiLlxyXG4gICAqIE9ubHkgdGFibGVzIGluc2lkZSBkcmFnIGNvbnRhaW5lciB3aWxsIGJlIHNjYW5uZWQuIEl0IGlzIHBvc3NpYmxlIHRvIGhhdmUgc2V2ZXJhbCBkcmFnIGNvbnRhaW5lcnMgdG90YWx5IHNlcGFyYXRlZCAoZWxlbWVudHMgZnJvbSBvbmUgY29udGFpbmVyIHdpbGwgbm90IGJlIHZpc2libGUgdG8gb3RoZXIgZHJhZyBjb250YWluZXJzKS5cclxuICAgKiBcImluaXRcIiBtZXRob2QgY2FsbHMgZW5hYmxlRHJhZy4gSWYgdGFibGVzIGFyZSBnZW5lcmF0ZWQgZHluYW1pY2FsbHkgdGhlbiBSRURJUFMuaW5pdCgpIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIHRvIHNldCBjdXN0b20gcHJvcGVydGllcyB0byB0YWJsZXMgKHRhYmxlIGluaXRpYWxpemF0aW9uKS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2RjXSBEcmFnIGNvbnRhaW5lciBJZCAoZGVmYXVsdCBpcyBcInJlZGlwcy1kcmFnXCIpLlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gaW5pdCBkcmFnIGNvbnRhaW5lciAod2l0aCBkZWZhdWx0IGlkPVwicmVkaXBzLWRyYWdcIilcclxuICAgKiBSRURJUFMuZHJhZy5pbml0KCk7XHJcbiAgICpcclxuICAgKiAvLyBpbml0IGRyYWcgY29udGFpbmVyIHdpdGggaWQ9XCJteS1kcmFnMVwiXHJcbiAgICogUkVESVBTLmRyYWcuaW5pdCgnbXktZHJhZzEnKTtcclxuICAgKi9cclxuICBpbml0ID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICBkcmFnQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZGlwcy1kcmFnJyk7ICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBkcmFnIGNvbnRhaW5lclxyXG5cclxuICAgIHdpbmRvd1Njcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHdpbmRvdyBzY3JvbGwgcG9zaXRpb25cclxuXHJcbiAgICAvLyBhcHBlbmQgRElWIGlkPVwicmVkaXBzX2Nsb25lXCIgaWYgRElWIGRvZXNuJ3QgZXhpc3QgKG5lZWRlZCBmb3IgY2xvbmluZyBESVYgZWxlbWVudHMpXHJcbiAgICAvLyBpZiBhdXRvbWF0aWMgY3JlYXRpb24gaXNuJ3QgcHJlY2lzZSBlbm91Z2gsIHVzZXIgY2FuIG1hbnVhbGx5IGNyZWF0ZSBhbmQgcGxhY2UgZWxlbWVudCB3aXRoIGlkPVwicmVkaXBzX2Nsb25lXCIgdG8gcHJldmVudCB3aW5kb3cgZXhwYW5kaW5nICh0aGVuIHRoaXMgY29kZSB3aWxsIGJlIHNraXBwZWQpXHJcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWRpcHNfY2xvbmUnKSlcclxuICAgIHtcclxuICAgICAgdmFyIHJlZGlwc0Nsb25lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIHJlZGlwc0Nsb25lLmlkID0gJ3JlZGlwc19jbG9uZSc7XHJcbiAgICAgIHJlZGlwc0Nsb25lLnN0eWxlLndpZHRoID0gcmVkaXBzQ2xvbmUuc3R5bGUuaGVpZ2h0ID0gJzFweCc7XHJcbiAgICAgIGRyYWdDb250YWluZXIuYXBwZW5kQ2hpbGQocmVkaXBzQ2xvbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZURyYWcoJ2luaXQnLCAnLnJlZGlwcy1kcmFnJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0dGFjaCBvbm1vdXNlZG93biBldmVudCBoYW5kbGVyIHRvIHRoZSBESVYgZWxlbWVudHMsIGF0dGFjaCBvbnNjcm9sbD0nY2FsY3VsYXRlQ2VsbHMnIGZvciBESVYgZWxlbWVudHMgd2l0aCAnc2Nyb2xsJyBpbiBjbGFzcyBuYW1lIChwcmVwYXJlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzKVxyXG4gICAgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJlZVRhYmxlJyk7XHJcbiAgICB0YWJsZS5yZWRpcHMgPSB7fTtcclxuXHJcbiAgICBoYW5kbGVyT25SZXNpemUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCB3aW5kb3cgd2lkdGgvaGVpZ2h0LCBzY3JvbGwgd2lkdGgvaGVpZ2h0IGFuZCBkZWZpbmUgb25yZXNpemUgZXZlbnQgaGFuZGxlciwgb25yZXNpemUgZXZlbnQgaGFuZGxlciBjYWxscyBjYWxjdWxhdGUgY29sdW1uc1xyXG4gICAgUkVESVBTLmV2ZW50LmFkZCh3aW5kb3csICdyZXNpemUnLCBoYW5kbGVyT25SZXNpemUpO1xyXG4gICAgUkVESVBTLmV2ZW50LmFkZCh3aW5kb3csICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgICAgLy8gYXR0YWNoIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSB3aW5kb3cgKG5lZWRlZCBmb3IgcmVjYWxjdWxhdGluZyB0YWJsZSBjZWxscyBwb3NpdGlvbnMpXHJcbiAgfTtcclxuXHJcblxyXG4gIC8vIG9ubW91c2Vkb3duIGV2ZW50IGhhbmRsZXIuICBUaGlzIGV2ZW50IGhhbmRsZXIgaXMgYXR0YWNoZWQgdG8gZXZlcnkgRElWIGVsZW1lbnQgaW4gZHJhZyBjb250YWluZXIgKHBsZWFzZSBzZWUgXCJlbmFibGVEcmFnXCIpLlxyXG4gIGhhbmRsZXJPbk1vdXNlRG93biA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgICAgICAgLy8gZGVmaW5lIGV2ZW50IChjcm9zcyBicm93c2VyKVxyXG4gICAgdmFyIG9mZnNldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvYmplY3Qgb2Zmc2V0XHJcbiAgICB2YXIgcG9zaXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc2l0aW9uIG9mIHRhYmxlIG9yIGNvbnRhaW5lciBib3ggb2YgdGFibGUgKGlmIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIGV4Y2x1ZGUgc2Nyb2xsIG9mZnNldClcclxuICAgIHZhciBYLCBZOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcblxyXG4gICAgZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7ICAgICAgICAgICAgICAvLyBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uIChvbmx5IGZpcnN0IGNsaWNrZWQgZWxlbWVudCB3aWxsIHJlZ2lzdGVyIG9ubW91c2Vkb3duIGV2ZW50KSwgbmVlZGVkIGluIGNhc2Ugb2YgcGxhY2luZyB0YWJsZSBpbnNpZGUgb2YgPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnXCI+IChhZnRlciBlbGVtZW50IHdhcyBkcm9wcGVkIHRvIHRoaXMgdGFibGUgaXQgY291bGRuJ3QgYmUgbW92ZWQgb3V0IGFueSBtb3JlIC0gdGFibGUgYW5kIGVsZW1lbnQgbW92ZWQgdG9nZXRoZXIgYmVjYXVzZSB0YWJsZSBjYXB0dXJlcyBtb3VzZWRvd24gZXZlbnQgYWxzbyBpbiBidWJibGluZyBwcm9jZXMpXHJcbiAgICBpZiAoZXZ0LnN0b3BQcm9wYWdhdGlvbilcclxuICAgIHtcclxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNoaWZ0S2V5ID0gZXZ0LnNoaWZ0S2V5OyAgICAgICAgICAgICAgLy8gc2V0IHRydWUgb3IgZmFsc2UgaWYgc2hpZnQga2V5IGlzIHByZXNzZWRcclxuXHJcbiAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0ZXh0IHNlbGVjdGlvbiAoQ2hyb21lLCBGRiwgT3BlcmEsIFNhZmFyaSlcclxuICAgIHtcclxuICAgICAgd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uICYmIGRvY3VtZW50LnNlbGVjdGlvbi50eXBlID09PSBcIlRleHRcIikgIC8vIElFOFxyXG4gICAge1xyXG4gICAgICB0cnkgeyBkb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkoKTsgfSBjYXRjaCAoZXJyb3IpIHsgfSAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3IgdG8gYXMgYSB3b3JrYXJvdW5kIGZvciBidWcgaW4gSUU4XHJcbiAgICB9XHJcblxyXG4gICAgWCA9IHBvaW50ZXIueCA9IGV2dC5jbGllbnRYO1xyXG4gICAgWSA9IHBvaW50ZXIueSA9IGV2dC5jbGllbnRZO1xyXG5cclxuICAgIHRocmVzaG9sZC54ID0gWDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGluaXRpYWwgdGhyZXNob2xkIHBvc2l0aW9uIChuZWVkZWQgZm9yIGNhbGN1bGF0aW5nIGRpc3RhbmNlKVxyXG4gICAgdGhyZXNob2xkLnkgPSBZO1xyXG4gICAgdGhyZXNob2xkLmZsYWcgPSBmYWxzZTtcclxuXHJcbiAgICBSRURJUFMuZHJhZy5vYmpPbGQgPSBvYmpPbGQgPSBvYmogfHwgdGhpczsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHByZXZpb3VzIG9iamVjdCBpZiBkZWZpbmVkIG9yIHNldCB0byB0aGUgY2xpY2tlZCBvYmplY3RcclxuICAgIFJFRElQUy5kcmFnLm9iaiA9IG9iaiA9IHRoaXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY2xpY2tlZCBvYmplY3RcclxuXHJcbiAgICBjbG9uZUNsYXNzID0gb2JqLmNsYXNzTmFtZS5pbmRleE9mKCdyZWRpcHMtY2xvbmUnKSA+IC0xOyAgICAgICAgICAgIC8vIHNldCB0cnVlIG9yIGZhbHNlIGlmIGNsaWNrZWQgZWxlbWVudCBjb250YWlucyBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIG5hbWUgKG5lZWRlZCBmb3IgY2xvbmUgZWxlbWVudCBhbmQgY2xvbmUgdGFibGUgcm93KVxyXG5cclxuICAgIFJFRElQUy5kcmFnLm9iaiA9IG9iaiA9IHJvd0Nsb25lKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ganVzdCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjdXJyZW50IHJvdyAoZG8gbm90IGNsb25lKVxyXG5cclxuICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHVzZXIgaGFzIHVzZWQgYSBtb3VzZSBldmVudCB0byBpbmNyZWFzZSB0aGUgZGltZW5zaW9ucyBvZiB0aGUgdGFibGUgLSBjYWxsIGNhbGN1bGF0ZUNlbGxzKClcclxuXHJcbiAgICByb3cgPSBjZWxsID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHJvdyBhbmQgY2VsbCBpbmRleGVzIChuZWVkZWQgaW4gY2FzZSBvZiBlbmFibGUgLyBkaXNhYmxlIHRhYmxlcylcclxuICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCBhbmQgcmVtZW1iZXIgc291cmNlIHBvc2l0aW9uIChvbGQgcG9zaXRpb24gaXMgaW5pdGlhbGx5IHRoZSBzYW1lIGFzIHNvdXJjZSBwb3NpdGlvbilcclxuICAgIHJvd19zb3VyY2UgPSByb3dfb2xkID0gcm93O1xyXG4gICAgY2VsbF9zb3VyY2UgPSBjZWxsX29sZCA9IGNlbGw7XHJcblxyXG4gICAgUkVESVBTLmRyYWcuZXZlbnQucm93Q2xpY2tlZCh0ZC5jdXJyZW50KTtcclxuXHJcbiAgICAvLyBpZiBzdGFydCBwb3NpdGlvbiBjYW5ub3QgYmUgZGVmaW5lZCB0aGVuIHVzZXIgcHJvYmFibHkgY2xpY2tlZCBvbiBlbGVtZW50IHRoYXQgYmVsb25ncyB0byB0aGUgZGlzYWJsZWQgdGFibGUgKG9yIHNvbWV0aGluZyBlbHNlIGhhcHBlbmVkIHRoYXQgd2FzIG5vdCBzdXBwb3NlZCB0byBoYXBwZW4gLSBldmVyeSBlbGVtZW50IHNob3VsZCBiZWxvbmcgdG8gdGhlIHRhYmxlKSB0aGlzIGNvZGUgbXVzdCBnbyBhZnRlciBleGVjdXRpb24gb2YgZXZlbnQgaGFuZGxlcnNcclxuICAgIGlmIChyb3cgPT09IG51bGwgfHwgY2VsbCA9PT0gbnVsbClcclxuICAgIHtcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVydW4gc2V0VGFibGVSb3dDb2x1bW4oKSBhZ2FpbiBiZWNhdXNlIHNvbWUgb2YgdGFibGVzIG1pZ2h0IGJlIGVuYWJsZWQgaW4gaGFuZGxlciBldmVudHMgYWJvdmVcclxuICAgICAgcm93X3NvdXJjZSA9IHJvd19vbGQgPSByb3c7XHJcbiAgICAgIGNlbGxfc291cmNlID0gY2VsbF9vbGQgPSBjZWxsO1xyXG5cclxuICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCBjZWxsID09PSBudWxsKSAgLy8gbm8sIGNsaWNrZWQgZWxlbWVudCBpcyBvbiB0aGUgZGlzYWJsZWQgdGFibGUgLSBzb3JyeVxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb3ZlZCA9IGNsb25lZCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IFwibW92ZWRcIiBmbGFnIChuZWVkZWQgZm9yIGNsb25lIG9iamVjdCBpbiBoYW5kbGVyT25Nb3VzZU1vdmUpIGFuZCBcImNsb25lZFwiIGZsYWdcclxuXHJcbiAgICBSRURJUFMuZXZlbnQuYWRkKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgaGFuZGxlck9uTW91c2VNb3ZlKTsgICAgICAgIC8vIGFjdGl2YXRlIG9ubW91c2Vtb3ZlIGV2ZW50IGhhbmRsZXIgb24gZG9jdW1lbnQgb2JqZWN0XHJcbiAgICBSRURJUFMuZXZlbnQuYWRkKGRvY3VtZW50LCAnbW91c2V1cCcsIGhhbmRsZXJPbk1vdXNlVXApOyAgICAgICAgICAgIC8vIGFjdGl2YXRlIG9ubW91c2V1cCBldmVudCBoYW5kbGVyIG9uIGRvY3VtZW50IG9iamVjdFxyXG5cclxuICAgIGlmIChyb3cgIT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgYmFja2dyb3VuZCBjb2xvciBpZiBpcyBwb3NzaWJsZVxyXG4gICAge1xyXG4gICAgICBiZ1N0eWxlT2xkID0gZ2V0VGRTdHlsZShyb3cpO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUsICdwb3NpdGlvbicpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRhYmxlIENTUyBwb3NpdGlvbiAobmVlZGVkIGZvciBleGNsdXNpb24gXCJzY3JvbGwgb2Zmc2V0XCIgaWYgdGFibGUgYm94IGhhcyBwb3NpdGlvbiBmaXhlZClcclxuXHJcbiAgICBpZiAocG9zaXRpb24gIT09ICdmaXhlZCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRhYmxlIGRvZXNuJ3QgaGF2ZSBzdHlsZSBwb3NpdGlvbjpmaXhlZCB0aGVuIHRhYmxlIGNvbnRhaW5lciBzaG91bGQgYmUgdGVzdGVkXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUucGFyZW50Tm9kZSwgJ3Bvc2l0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb2Zmc2V0ID0gYm94T2Zmc2V0KG9iaiwgcG9zaXRpb24pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvYmplY3Qgb2Zmc2V0XHJcbiAgICBvYmpNYXJnaW4gPSBbWSAtIG9mZnNldFswXSwgb2Zmc2V0WzFdIC0gWCwgb2Zmc2V0WzJdIC0gWSwgWCAtIG9mZnNldFszXV07ICAgLy8gY2FsY3VsYXRlIG9mZnNldCBmcm9tIHRoZSBjbGlja2VkIHBvaW50IGluc2lkZSBlbGVtZW50IHRvIHRoZSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgc2lkZSBvZiB0aGUgZWxlbWVudFxyXG5cclxuICAgIHJldHVybiBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHRleHQgc2VsZWN0aW9uIGZvciBub24gSUUgYnJvd3NlcnNcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kcyByZXR1cm5zIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IG9yIGNsb25lcyB0YWJsZSByb3cuXHJcbiAgICogSWYgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VEb3duOlxyXG4gICAqIDx1bD5cclxuICAgKiA8bGk+aW5wdXQgcGFyYW1ldGVyIGlzIERJViBjbGFzcz1cInJlZGlwcy1yb3dcIjwvbGk+XHJcbiAgICogPGxpPm1ldGhvZCB3aWxsIHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGN1cnJlbnQgcm93PC9saT5cclxuICAgKiA8L3VsPlxyXG4gICAqIElmIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZTpcclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmlucHV0IHBhcmFtZXRlciBpcyBUUiAoY3VycmVudCByb3cpIC0gcHJldmlvdXNseSByZXR1cm5lZCB3aXRoIHRoaXMgZnVuY3Rpb248L2xpPlxyXG4gICAqIDxsaT5tZXRob2Qgd2lsbCBjbG9uZSBjdXJyZW50IHJvdyBhbmQgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY2xvbmVkIHJvdzwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBESVYgY2xhc3M9XCJyZWRpcHMtcm93XCIgb3IgVFIgKGN1cnJlbnQgcm93KVxyXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBSZXR1cm5zIHJlZmVyZW5jZSBvZiB0aGUgY3VycmVudCByb3cgb3IgY2xvbmUgY3VycmVudCByb3cgYW5kIHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGNsb25lZCByb3cuXHJcbiAgICovXHJcbiAgcm93Q2xvbmUgPSBmdW5jdGlvbiAoZWwpXHJcbiAge1xyXG4gICAgdmFyIHRhYmxlTWluaTsgICAgICAvLyBvcmlnaW5hbCB0YWJsZSBpcyBjbG9uZWQgYW5kIGFsbCByb3dzIGV4Y2VwdCBwaWNrZWQgcm93IGFyZSBkZWxldGVkXHJcbiAgICB2YXIgcm93T2JqOyAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgcm93IG9iamVjdFxyXG4gICAgdmFyIGRpdjsgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIDxESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCI+IGVsZW1lbnRcclxuXHJcbiAgICBpZiAoZWwubm9kZU5hbWUgPT09ICdESVYnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxKSByb3dDbG9uZSBjYWxsIGluIG9ubW91c2Vkb3duIHdpbGwgcmV0dXJuIHJlZmVyZW5jZSBvZiBUUiBlbGVtZW50IChpbnB1dCBwYXJhbWV0ZXIgaXMgSFRNTEVsZW1lbnQgPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIj4pXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGVsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciByZWZlcmVuY2UgdG8gdGhlIDxESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCI+XHJcbiAgICAgIGVsID0gZmluZFBhcmVudCgnVFInLCBlbCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIHBhcmVudCBUUiBlbGVtZW50XHJcbiAgICAgIGlmIChlbC5yZWRpcHMgPT09IHVuZGVmaW5lZCkgeyBlbC5yZWRpcHMgPSB7fTsgfSAgICAvLyBjcmVhdGUgYSBcInByb3BlcnR5IG9iamVjdFwiIGluIHdoaWNoIGFsbCBjdXN0b20gcHJvcGVydGllcyB3aWxsIGJlIHNhdmVkIChpdCBpcyBvbmx5IG9uZSBwcm9wZXJ0eSBmb3Igbm93KVxyXG4gICAgICBlbC5yZWRpcHMuZGl2ID0gZGl2OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSByZWZlcmVuY2UgdG8gdGhlIERJViBlbGVtZW50IGFzIHJlZGlwcy5kaXYgdGhpcyB3aWxsIG1vc3RseSBiZSByZWZlcmVuY2VkIGFzIG9iak9sZC5yZWRpcHMuZGl2IChiZWNhdXNlIG9iak9sZCBpbiByb3cgZHJhZ2dpbmcgY29udGV4dCBpcyByZWZlcmVuY2UgdG8gdGhlIHNvdXJjZSByb3cpXHJcbiAgICAgIHJldHVybiBlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gcmVmZXJlbmNlIHRvIHRoZSBUUiBlbGVtZW50XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAyKSByb3dDbG9uZSBjYWxsIGluIG9ubW91c2Vtb3ZlIHdpbGwgY2xvbmUgY3VycmVudCByb3cgKGVsLm5vZGVOYW1lID09PSAnVFInKVxyXG4gICAge1xyXG4gICAgICByb3dPYmogPSBlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBzb3VyY2Ugcm93XHJcblxyXG4gICAgICB0YWJsZU1pbmkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xyXG4gICAgICB0YWJsZU1pbmkuaW5uZXJIVE1MID0gJzx0ciBpZD1cIicgKyByb3dPYmouaWQgKyAnXCIgY2xhc3M9XCInICsgcm93T2JqLmNsYXNzTGlzdCArICdcIj4nICsgcm93T2JqLmlubmVySFRNTCArICc8L3RyPic7XHJcbiAgICAgIC8vdGFibGVNaW5pLmlubmVySFRNTCA9IGdldEFzc2VtYmx5TWFya3VwKHBhcnNlSW50KHJvd09iai5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSkpOyAgIC8vY2FuIGJlIHVzZWQgdG8gc2hvdyB0aGUgZW50aXJlIGFzc2VtYmx5IHdoZW4gZHJhZ2dpbmcsIHRlbmRzIHRvIHNsb3cgdGhpbmdzIGRvd24gYW5kIGJlIGN1bWJlcnNvbWVcclxuXHJcbiAgICAgIHRhYmxlTWluaS5yZWRpcHMgPSB7fTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZFxyXG4gICAgICB0YWJsZU1pbmkucmVkaXBzLnNvdXJjZVJvdyA9IHJvd09iajsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgc291cmNlIHJvdyByZWZlcmVuY2UgKG5lZWRlZCBmb3Igc291cmNlIHJvdyBkZWxldGlvbiBpbiByb3dEcm9wIG1ldGhvZClcclxuXHJcbiAgICAgIGNvcHlQcm9wZXJ0aWVzKHJvd09iaiwgdGFibGVNaW5pLnJvd3NbMF0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBjdXN0b20gcHJvcGVydGllcyB0byBhbGwgY2hpbGQgRElWIGVsZW1lbnRzIGFuZCBzZXQgb25tb3VzZWRvd24vb25kYmxjbGljayBldmVudCBoYW5kbGVyc1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVkaXBzX2Nsb25lJykuYXBwZW5kQ2hpbGQodGFibGVNaW5pKTsgICAgIC8vIGFwcGVuZCBjbG9uZWQgbWluaSB0YWJsZSB0byB0aGUgRElWIGlkPVwicmVkaXBzX2Nsb25lXCJcclxuXHJcbiAgICAgIHJldHVybiB0YWJsZU1pbmk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBkcm9wcyB0YWJsZSByb3cgdG8gdGhlIHRhcmdldCByb3cgYW5kIGNhbGxzIHVzZXIgZXZlbnQgaGFuZGxlcnMuIFNvdXJjZSByb3cgaXMgZGVsZXRlZCBhbmQgY2xvbmVkIHJvdyBpcyBpbnNlcnRlZCBhdCB0aGUgbmV3IHBvc2l0aW9uLlxyXG4gICAqIE1ldGhvZCB0YWtlcyBjYXJlIGFib3V0IHRoZSBsYXN0IHJvdyBpbiB0aGUgdGFibGUgb25seSBpZiB1c2VyIGRyYWdzIGVsZW1lbnQuIEluIGNhc2Ugb2YgbW92aW5nIHJvd3Mgd2l0aCBtb3ZlT2JqZWN0KCksIGNvbnRyb2xcclxuICAgKiBhbmQgbG9naWMgZm9yIGxhc3Qgcm93IGlzIHR1cm5lZCBvZmYuIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlVXAoKVxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gdGFibGVJZHggVGFibGUgaW5kZXguXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSByb3dJZHggUm93IGluZGV4LlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFt0YWJsZU1pbmldIFJlZmVyZW5jZSB0byB0aGUgbWluaSB0YWJsZSAodGFibGUgdGhhdCBjb250YWlucyBvbmx5IG9uZSByb3cpLiBUaGlzIGlzIGFjdHVhbGx5IGNsb25lIG9mIHNvdXJjZSByb3cuXHJcbiAgICovXHJcbiAgcm93RHJvcCA9IGZ1bmN0aW9uIChyb3dJZHgpXHJcbiAge1xyXG4gICAgdmFyIGRyb3A7ICAgICAgICAgICAgICAgLy8gKGJvb2xlYW4pIGlmIGZhbHNlIHRoZW4gZHJvcHBpbmcgcm93IHdpbGwgYmUgY2FuY2VsZWRcclxuICAgIHZhciB0ck1pbmk7ICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgVFIgaW4gbWluaSB0YWJsZVxyXG4gICAgdmFyIGRlbGV0ZVRhYmxlUm93OyAgICAgLy8gZGVsZXRlIHJvdyAocHJpdmF0ZSBtZXRob2QpXHJcblxyXG4gICAgZGVsZXRlVGFibGVSb3cgPSBmdW5jdGlvbiAoZWwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgdGFibGUgcm93IC0gaW5wdXQgcGFyZW1ldGVyIGlzIHJvdyByZWZlcmVuY2UgKHByaXZhdGUgbWV0aG9kKVxyXG4gICAge1xyXG4gICAgICB2YXIgdGJsO1xyXG5cclxuICAgICAgaWYgKGVsLnJlZGlwcyA9PT0gdW5kZWZpbmVkIHx8ICFlbC5yZWRpcHMuZW1wdHlSb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGRvZXNuJ3QgaGF2ZSBjdXN0b20gXCJyZWRpcHNcIiBwcm9wZXJ0eSBvciBpcyBub3QgbWFya2VkIGFzIGVtcHR5LCB0aGVuIGl0IGNhbiBiZSBkZWxldGVkXHJcbiAgICAgIHtcclxuICAgICAgICB0YmwgPSBmaW5kUGFyZW50KCdUQUJMRScsIGVsKTtcclxuICAgICAgICB0YmwuZGVsZXRlUm93KGVsLnJvd0luZGV4KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlLCByb3cgaXMgbWFya2VkIGFzIFwiZW1wdHlcIiBhbmQgaXQgd2lsbCBiZSBvbmx5IGNvbG9yZWQgKG5vdCBkZWxldGVkKSwgY29udGVudCBvZiB0YWJsZSBjZWxscyB3aWxsIGJlIGRlbGV0ZWQgYW5kIGJhY2tncm91bmQgY29sb3Igd2lsbCBiZSBzZXQgdG8gZGVmYXVsdCBjb2xvclxyXG4gICAgICB7XHJcbiAgICAgICAgcm93T3BhY2l0eShlbCwgJ2VtcHR5JywgUkVESVBTLmRyYWcuc3R5bGUucm93RW1wdHlDb2xvcik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIHRhYmxlTWluaSA9IG9iajsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50bHkgZHJhZ2dlZCByb3cgLSBtaW5pIHRhYmxlXHJcblxyXG4gICAgaWYgKHJvd0lkeCA+IHRhYmxlLnJvd3MubGVuZ3RoIC0gMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaW5kZXggaXMgb3V0IG9mIGJvdW5kcywgdGhlbiBzZXQgbWF4IHJvdyBpbmRleCAocm93IHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhlIHRhYmxlIGJvdHRvbSlcclxuICAgIHtcclxuICAgICAgcm93SWR4ID0gdGFibGUucm93cy5sZW5ndGggLSAxO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB0YWJsZVJvdyA9IHRhYmxlLnJvd3Nbcm93SWR4XTtcclxuXHJcbiAgICB0ck1pbmkgPSB0YWJsZU1pbmkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RyJylbMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIFRSIGluIG1pbmkgdGFibGUgKG1pbmkgdGFibGUgaGFzIG9ubHkgb25lIHJvdyAtIGZpcnN0IHJvdylcclxuXHJcbiAgICB0YWJsZU1pbmkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YWJsZU1pbmkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlc3Ryb3kgbWluaSB0YWJsZSAobm9kZSBzdGlsbCBleGlzdHMgaW4gbWVtb3J5KVxyXG5cclxuICAgIGRyb3AgPSBSRURJUFMuZHJhZy5ldmVudC5yb3dEcm9wcGVkQmVmb3JlKHRhYmxlLCB0YWJsZU1pbmkucmVkaXBzLnNvdXJjZVJvdy5yb3dJbmRleCk7ICAgICAgLy8gY2FsbCBldmVudC5yb3dEcm9wcGVkQmVmb3JlKCkgLSB0aGlzIGhhbmRsZXIgY2FuIHJldHVybiBcImZhbHNlXCIgdmFsdWVcclxuXHJcbiAgICBpZiAoZHJvcCAhPT0gZmFsc2UpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGhhbmRsZXIgcmV0dXJuZWQgZmFsc2UgdGhlbiByb3cgZHJvcHBpbmcgd2lsbCBiZSBjYW5jZWxlZFxyXG4gICAge1xyXG4gICAgICBpZiAocm93SWR4IDwgdGFibGUucm93cy5sZW5ndGgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaXMgbm90IGRyb3BwZWQgdG8gdGhlIGxhc3Qgcm93IHBvc2l0aW9uXHJcbiAgICAgIHtcclxuICAgICAgICB0YWJsZVJvdy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0ck1pbmksIHRhYmxlUm93Lm5leHRTaWJsaW5nKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgaXMgZHJvcHBlZCB0byB0aGUgbGFzdCByb3cgcG9zaXRpb24sIGl0J3MgcG9zc2libGUgdG8gc2V0IHRhcmdldCByb3cgaW5kZXggZ3JlYXRlciB0aGVuIG51bWJlciBvZiByb3dzIC0gaW4gdGhpcyBjYXNlIHJvdyB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSB0YWJsZSBlbmRcclxuICAgICAge1xyXG4gICAgICAgIHRhYmxlUm93LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodHJNaW5pKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgc2hvdWxkIGJlIGFwcGVuZGVkXHJcbiAgICAgICAgdGFibGVSb3cgPSB0YWJsZS5yb3dzWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIHVwcGVyIHJvdywgYWZ0ZXIgcm93IGlzIGFwcGVuZGVkLCB1cHBlciByb3cgc2hvdWxkIGJlIHRlc3RlZCBpZiBjb250YWlucyBcImVtcHR5Um93XCIgc2V0IHRvIHRydWUsIHRoaXMgY291bGQgaGFwcGVuIGluIGNhc2Ugd2hlbiByb3cgaXMgbW92ZWQgdG8gdGhlIHRhYmxlIHdpdGggb25seSBvbmUgZW1wdHkgcm93XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBzb3VyY2Ugcm93IGlmIHJvdyBpcyBub3QgY2xvbmVkXHJcbiAgICAgIHtcclxuICAgICAgICBkZWxldGVUYWJsZVJvdyh0YWJsZU1pbmkucmVkaXBzLnNvdXJjZVJvdyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRlbGV0ZSB0ck1pbmkucmVkaXBzLmVtcHR5Um93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBlbXB0eVJvdyBwcm9wZXJ0eSBmcm9tIGluc2VydGVkL2FwcGVuZGVkIHJvdyBiZWNhdXNlIGVtcHR5Um93IHdpbGwgYmUgc2V0IG9uIG5leHQgbW92ZSwgY29weVByb3BlcnRpZXMoKSBpbiByb3dDbG9uZSgpIGNvcGllZCBlbXB0eVJvdyBwcm9wZXJ0eSB0byB0aGUgcm93IGluIHRhYmxlTWluaSwgb3RoZXJ3aXNlIHJvdyB3aWxsIGJlIG92ZXJ3cml0dGVuIGFuZCB0aGF0IGlzIG5vdCBnb29kXHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0Ryb3BwZWQodGFibGVSb3cpOyAgICAgICAgIC8vIGNhbGwgcm93RHJvcHBlZCBldmVudCBoYW5kbGVyXHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50LnJvd0Ryb3BwZWRCZWZvcmUoKSByZXR1cm5lZCBcImZhbHNlXCIgKGl0J3MgdXAgdG8gdXNlciB0byByZXR1cm4gc291cmNlIHJvdyBvcGFjaXR5IHRvIGl0cyBvcmlnaW5hbCBzdGF0ZSlcclxuICAgIHtcclxuICAgICAgLy8gcm93T3BhY2l0eShvYmpPbGQsIDEwMCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIG9ubW91c2V1cCBldmVudCBoYW5kbGVyLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlVXAgaXMgYXR0YWNoZWQgdG8gdGhlIERJViBlbGVtZW50IGluIGEgbW9tZW50IHdoZW4gRElWIGVsZW1lbnQgaXMgY2xpY2tlZCAodGhpcyBoYXBwZW5zIGluIGhhbmRsZXJPbk1vdXNlRG93bikuXHJcbiAgICogVGhpcyBldmVudCBoYW5kbGVyIGRldGFjaGVzIG9ubW91c2Vtb3ZlIGFuZCBvbm1vdXNldXAgZXZlbnQgaGFuZGxlcnMuXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZSBFdmVudCBpbmZvcm1hdGlvbi5cclxuICAgKi9cclxuICBoYW5kbGVyT25Nb3VzZVVwID0gZnVuY3Rpb24gKGUpXHJcbiAge1xyXG4gICAgdmFyIGV2dCA9IGUgfHwgd2luZG93LmV2ZW50OyAgICAvLyBkZWZpbmUgZXZlbnQgKEZGICYgSUUpXHJcbiAgICB2YXIgcl9yb3c7ICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgbW9kZT1cInJvd1wiXHJcbiAgICB2YXIgbXRfdHI7ICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgcmV0dXJuaW5nIGNvbG9yIHRvIHRoZSB0YWJsZSBjZWxsIChtdF90ciAtIFwibWluaSB0YWJsZVwiIFwidGFibGVfcm93XCIpXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgdmFyIGk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VkIGluIGxvY2FsIGxvb3BcclxuICAgIHZhciBkcm9wOyAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZmFsc2UgdGhlbiBkcm9wcGVkIERJViBlbGVtZW50XHJcblxyXG4gICAgWCA9IGV2dC5jbGllbnRYO1xyXG4gICAgWSA9IGV2dC5jbGllbnRZO1xyXG5cclxuICAgIGVkZ2UuZmxhZy54ID0gZWRnZS5mbGFnLnkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0dXJuIG9mZiBhdXRvc2Nyb2xsIFwiY3VycmVudCBjZWxsXCIgaGFuZGxpbmcgKGlmIHVzZXIgbW91c2V1cCBpbiB0aGUgbWlkZGxlIG9mIGF1dG9zY3JvbGxpbmcpXHJcblxyXG4gICAgUkVESVBTLmV2ZW50LnJlbW92ZShkb2N1bWVudCwgJ21vdXNlbW92ZScsIGhhbmRsZXJPbk1vdXNlTW92ZSk7XHJcbiAgICBSRURJUFMuZXZlbnQucmVtb3ZlKGRvY3VtZW50LCAnbW91c2V1cCcsIGhhbmRsZXJPbk1vdXNlVXApO1xyXG5cclxuICAgIGRyYWdDb250YWluZXIub25zZWxlY3RzdGFydCA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhY2ggZHJhZ0NvbnRhaW5lci5vbnNlbGVjdHN0YXJ0IGhhbmRsZXIgdG8gZW5hYmxlIHNlbGVjdCBmb3IgSUU3L0lFOCBicm93c2VyXHJcblxyXG4gICAgcmVzZXRTdHlsZXMob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9iamVjdCBzdHlsZXNcclxuXHJcbiAgICBzY3JvbGxEYXRhLndpZHRoICA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDtcclxuICAgIHNjcm9sbERhdGEuaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodDtcclxuXHJcbiAgICBlZGdlLmZsYWcueCA9IGVkZ2UuZmxhZy55ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgYXV0b3Njcm9sbCBmbGFnc1xyXG5cclxuICAgIGlmIChyb3cgPT09IG51bGwgfHwgY2VsbCA9PT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgZWxlbWVudCB3YXMgY2xpY2tlZCBhbmQgbGVmdCBidXR0b24gd2FzIHJlbGVhc2VkLCBidXQgZWxlbWVudCBpcyBwbGFjZWQgaW5zaWRlIHVubW92YWJsZSB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdE1vdmVkKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIFJFRElQUy5kcmFnLnRkLnRhcmdldCA9IHRkLnRhcmdldCA9IHRhYmxlLnJvd3Nbcm93XS5jZWxsc1tjZWxsXTtcclxuXHJcbiAgICAgIHNldFRkU3R5bGUocm93LCBiZ1N0eWxlT2xkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJhY2tncm91bmQgY29sb3IgZm9yIGRlc3RpbmF0aW9uIHJvd1xyXG5cclxuICAgICAgcl9yb3cgPSByb3c7XHJcblxyXG4gICAgICBpZiAoIW1vdmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyB3YXMgY2xpY2tlZCBhbmQgbW91c2UgYnV0dG9uIHdhcyByZWxlYXNlZCByaWdodCBhd2F5IChyb3cgd2FzIG5vdCBtb3ZlZClcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd05vdE1vdmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgd2FzIG1vdmVkXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAocm93X3NvdXJjZSA9PT0gcl9yb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZHJvcHBlZCB0byB0aGUgc291cmNlIHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG10X3RyID0gb2JqLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIFRSIGluIG1pbmkgdGFibGUgKG1pbmkgdGFibGUgaGFzIG9ubHkgb25lIHJvdylcclxuXHJcbiAgICAgICAgICBvYmpPbGQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbXRfdHIuc3R5bGUuYmFja2dyb3VuZENvbG9yOyAgICAgICAgICAgLy8gcmV0dXJuIGNvbG9yIHRvIHRoZSBzb3VyY2Ugcm93IGZyb20gdGhlIHJvdyBvZiBjbG9uZWQgbWluaSB0YWJsZSwgY29sb3Igb2YgdGhlIHNvdXJjZSByb3cgY2FuIGJlIGNoYW5nZWQgaW4gZXZlbnQucm93TW92ZWQoKSAod2hlbiB1c2VyIHdhbnRzIHRvIG1hcmsgc291cmNlIHJvdylcclxuXHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbXRfdHIuY2VsbHMubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGNvbG9yIHRvIHRoZSBlYWNoIHRhYmxlIGNlbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgb2JqT2xkLmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG10X3RyLmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvcjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGNsb25lZCBtaW5pIHRhYmxlXHJcbiAgICAgICAgICBkZWxldGUgb2JqT2xkLnJlZGlwcy5lbXB0eVJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGVtcHR5Um93IHByb3BlcnR5IGZyb20gc291cmNlIHJvdyBiZWNhdXNlIGVtcHR5Um93IHdpbGwgYmUgc2V0IG9uIG5leHQgbW92ZSwgb3RoZXJ3aXNlIHJvdyB3b3VsZCBiZSBvdmVyd3JpdHRlbiBhbmQgdGhhdCdzIG5vIGdvb2RcclxuXHJcbiAgICAgICAgICBpZiAoY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IHdhcyBjbG9uZWQgYW5kIGRyb3BwZWQgdG8gdGhlIHNvdXJjZSBsb2NhdGlvbiB0aGVuIGNhbGwgcm93Tm90Q2xvbmVkIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Tm90Q2xvbmVkKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5yb3dEcm9wcGVkU291cmNlKCkgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dEcm9wcGVkU291cmNlKHRkLnRhcmdldCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBkcm9wcGVkIHRvIHRoZSBuZXcgcm93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcm93RHJvcChyX3Jvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIWNsb25lZCAmJiAhdGhyZXNob2xkLmZsYWcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsaWNrZWQgZWxlbWVudCB3YXMgbm90IG1vdmVkIC0gRElWIGVsZW1lbnQgZGlkbid0IGNyb3NzIHRocmVzaG9sZCB2YWx1ZSwganVzdCBjYWxsIGV2ZW50Lm5vdE1vdmVkIGV2ZW50IGhhbmRsZXJcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdE1vdmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoY2xvbmVkICYmIHJvd19zb3VyY2UgPT09IHJvdyAmJiBjZWxsX3NvdXJjZSA9PT0gY2VsbCkgICAgICAgICAgICAvLyBkZWxldGUgY2xvbmVkIGVsZW1lbnQgaWYgZHJvcHBlZCBvbiB0aGUgc3RhcnQgcG9zaXRpb25cclxuICAgICAge1xyXG4gICAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7XHJcbiAgICAgICAgY2xvbmVkSWRbb2JqT2xkLmlkXSAtPSAxO1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdENsb25lZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGNsb25lZCAmJiBSRURJUFMuZHJhZy5jbG9uZS5kcm9wID09PSBmYWxzZSAmJiAoWCA8IHRhYmxlLnJlZGlwcy5vZmZzZXRbM10gfHwgWCA+IHRhYmxlLnJlZGlwcy5vZmZzZXRbMV0gfHwgWSA8IHRhYmxlLnJlZGlwcy5vZmZzZXRbMF0gfHwgWSA+IHRhYmxlLnJlZGlwcy5vZmZzZXRbMl0pKSAgICAvLyBkZWxldGUgY2xvbmVkIGVsZW1lbnQgaWYgZHJvcHBlZCBvdXRzaWRlIGN1cnJlbnQgdGFibGUgYW5kIGNsb25lLmRyb3AgaXMgc2V0IHRvIGZhbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopO1xyXG4gICAgICAgIGNsb25lZElkW29iak9sZC5pZF0gLT0gMTtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RDbG9uZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2UgY2FsbCBldmVudC5kcm9wcGVkQmVmb3JlKCksIGFwcGVuZCBvYmplY3QgdG8gdGhlIGNlbGwgYW5kIGNhbGwgZXZlbnQuZHJvcHBlZCgpXHJcbiAgICAgIHtcclxuICAgICAgICBkcm9wID0gUkVESVBTLmRyYWcuZXZlbnQuZHJvcHBlZEJlZm9yZSh0ZC50YXJnZXQpOyAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmRyb3BwZWRCZWZvcmUgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgIGVsZW1lbnREcm9wKGRyb3ApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRyb3AgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbCAob3IgZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3A9XCJmYWxzZVwiKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY2FsY3VsYXRlIHRhYmxlIGNlbGxzIGFuZCBzY3JvbGxlcnMgYmVjYXVzZSBjZWxsIGNvbnRlbnQgY291bGQgY2hhbmdlIHJvdyBkaW1lbnNpb25zXHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmZpbmlzaCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBsYXN0IGV2ZW50IGhhbmRsZXJcclxuICAgIH1cclxuXHJcbiAgICByb3dfb2xkID0gY2VsbF9vbGQgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgb2xkIHBvc2l0aW9uc1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBFbGVtZW50IGRyb3AuIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlVXAgYW5kIGFwcGVuZHMgZWxlbWVudCB0byB0aGUgdGFyZ2V0IHRhYmxlIGNlbGwuXHJcbiAgICogSWYgaW5wdXQgcGFyYW1ldGVyIFwiZHJvcFwiIGlzIHNldCB0byBcImZhbHNlXCIgKHRoaXMgaXMgYWN0dWFsbHkgcmV0dXJuIHZhbHVlIGZyb20gZXZlbnQuZHJvcHBlZEJlZm9yZSkgdGhlbiBESVYgZWxlbWVudHMgd2lsbCBub3QgYmUgZHJvcHBlZCAob25seSBjbG9uZWQgZWxlbWVudCB3aWxsIGJlIGRlbGV0ZWQpLlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2Ryb3BdIElmIG5vdCBcImZhbHNlXCIgdGhlbiBESVYgZWxlbWVudCB3aWxsIGJlIGRyb3BwZWQgdG8gdGhlIGNlbGwuXHJcbiAgICovXHJcbiAgZWxlbWVudERyb3AgPSBmdW5jdGlvbiAoZHJvcCkgXHJcbiAge1xyXG4gICAgdmFyIGNsb25lU291cmNlRGl2ID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmUgc291cmNlIGVsZW1lbnQgKG5lZWRlZCBpZiBjbG9uZS5zZW5kQmFjayBpcyBzZXQgdG8gdHJ1ZSlcclxuICAgIHZhciBkaXY7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vZGVMaXN0IG9mIERJViBlbGVtZW50cyBpbiB0YXJnZXQgY2VsbCAobmVlZGVkIGlmIGNsb25lLnNlbmRCYWNrIGlzIHNldCB0byB0cnVlKVxyXG4gICAgXHJcbiAgICBpZiAoZHJvcCAhPT0gZmFsc2UpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpbnB1dCBwYXJhbWV0ZXIgaXMgbm90IFwiZmFsc2VcIiB0aGVuIERJViBlbGVtZW50IHdpbGwgYmUgZHJvcHBlZCB0byB0aGUgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBpZiAoY2xvbmUuc2VuZEJhY2sgPT09IHRydWUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2xvbmUuc2VuZEJhY2sgaXMgc2V0IHRvIHRydWUgdGhlbiB0cnkgdG8gZmluZCBzb3VyY2UgZWxlbWVudCBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICB7XHJcbiAgICAgICAgZGl2ID0gdGQudGFyZ2V0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdESVYnKTsgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggYWxsIERJViBlbGVtZW50cyBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGFsbCBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAvLyBpZiBESVYgaW4gdGFyZ2V0IGNlbGwgaXMgc291cmNlIG9mIGRyb3BwZWQgRElWIGVsZW1lbnQgKGRyb3BwZWQgRElWIGlkIGFuZCBpZCBvZiBESVYgaW4gdGFyZ2V0IGNlbGwgaGFzIHRoZSBzYW1lIG5hbWUgYmVnaW5uaW5nIGxpa2UgXCJkMTJjMlwiIGFuZCBcImQxMlwiKVxyXG4gICAgICAgICAgLy8gb2YgY291cnNlLCB0aGUgY2FzZSB3aGVyZSBzb3VyY2UgRElWIGVsZW1lbnQgaXMgZHJvcHBlZCB0byB0aGUgY2VsbCB3aXRoIGNsb25lZCBESVYgZWxlbWVudCBzaG91bGQgYmUgZXhjbHVkZWQgKHBvc3NpYmxlIGluIGNsaW1pdDEgdHlwZSlcclxuICAgICAgICAgIGlmIChvYmogIT09IGRpdltpXSAmJiBvYmouaWQuaW5kZXhPZihkaXZbaV0uaWQpID09PSAwKSBcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY2xvbmVTb3VyY2VEaXYgPSBkaXZbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gY2xvbmVTb3VyY2VEaXYgZWxlbWVudFxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGNsb25lU291cmNlRGl2KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjbG9uZSBzb3VyY2UgRElWIGVsZW1lbnQgZXhpc3RzIGluIHRhcmdldCBjZWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY2xvbmVMaW1pdChjbG9uZVNvdXJjZURpdiwgMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdCBjbGFzcyAoaW5jcmVtZW50IGJ5IDEpXHJcbiAgICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgZHJvcHBlZCBESVYgZWxlbWVudFxyXG4gICAgICAgICAgcmV0dXJuOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGZyb20gdGhlIG1ldGhvZCAoZXZlcnl0aGluZyBpcyBkb25lKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGQudGFyZ2V0LmFwcGVuZENoaWxkKG9iaik7XHJcbiAgICAgIFxyXG4gICAgICByZWdpc3RlckV2ZW50cyhvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyAoRklYIGZvciBTYWZhcmkgTW9iaWxlKVxyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5kcm9wcGVkKHRkLnRhcmdldCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQuZHJvcHBlZCBiZWNhdXNlIGNsb25lTGltaXQgY291bGQgY2FsbCBldmVudC5jbG9uZWRFbmQxIG9yIGV2ZW50LmNsb25lZEVuZDJcclxuICAgICAgXHJcbiAgICAgIGlmIChjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgb2JqZWN0IGlzIGNsb25lZFxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQuY2xvbmVkRHJvcHBlZCh0ZC50YXJnZXQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBjbG9uZWREcm9wcGVkIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICBjbG9uZUxpbWl0KG9iak9sZCwgLTEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY2xpbWl0MV9YIG9yIGNsaW1pdDJfWCBjbGFzc25hbWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoY2xvbmVkICYmIG9iai5wYXJlbnROb2RlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lZCBlbGVtZW50IHNob3VsZCBiZSBkZWxldGVkIChpZiBub3QgYWxyZWFkeSBkZWxldGVkKVxyXG4gICAge1xyXG4gICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3IgRElWIGVsZW1lbnQuXHJcbiAgICogRElWIGVsZW1lbnRzIHNob3VsZCBoYXZlIG9ubHkgb25tb3VzZWRvd24gKHVzaW5nIHRyYWRpdGlvbmFsIGV2ZW50IHJlZ2lzdHJhdGlvbiBtb2RlbCkuXHJcbiAgICogSSBoYWQgYSBwcm9ibGVtIHdpdGggYWR2YW5jZWQgZXZlbnQgcmVnaXN0cmF0aW9uIG1vZGVsLlxyXG4gICAqIEluIGNhc2Ugb2YgdXNpbmcgYWR2YW5jZWQgbW9kZWwsIHNlbGVjdGVkIHRleHQgYW5kIGRyYWdnZWQgRElWIGVsZW1lbnQgd2VyZSBpbiBjb2xsaXNpb24uXHJcbiAgICogSXQgbG9va3MgbGlrZSBzZWxlY3RlZCB0ZXh0IHdhcyBhYmxlIHRvIGRyYWcgaW5zdGVhZCBvZiBESVYgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBkaXYgUmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIGZvciBvbm1vdXNlZG93biwgb250b3VjaHN0YXJ0IGFuZCBvbmRibGNsaWNrIHRvIHRoZSBESVYgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmbGFnXSBJZiBzZXQgdG8gZmFsc2UgdGhlbiBldmVudCBsaXN0ZW5lcnMgd2lsbCBiZSBkZWxldGVkLlxyXG4gICAqL1xyXG4gIHJlZ2lzdGVyRXZlbnRzID0gZnVuY3Rpb24gKGRpdiwgZmxhZylcclxuICB7XHJcbiAgICBpZiAoZmxhZyA9PT0gZmFsc2UpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGZsYWcgaXMgc2UgdG8gZmFsc2UsIHRoZW4gcmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBvbiBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBkaXYub25tb3VzZWRvd24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBkaXYub25tb3VzZWRvd24gPSBoYW5kbGVyT25Nb3VzZURvd247XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIHJlc2V0U3R5bGVzID0gZnVuY3Rpb24gKGVsKSAgICAgICAgIC8vIEFmdGVyIGVsZW1lbnQgaXMgZHJvcHBlZCwgc3R5bGVzIG5lZWQgdG8gYmUgcmVzZXQuXHJcbiAge1xyXG4gICAgZWwuc3R5bGUudG9wICA9ICcnO1xyXG4gICAgZWwuc3R5bGUubGVmdCA9ICcnO1xyXG4gICAgZWwuc3R5bGUucG9zaXRpb24gPSAnJztcclxuICAgIGVsLnN0eWxlLnpJbmRleCA9ICcnO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIG9ubW91c2Vtb3ZlIGV2ZW50IGhhbmRsZXIuXHJcbiAgICogaGFuZGxlck9uTW91c2VNb3ZlIGlzIGF0dGFjaGVkIHRvIGRvY3VtZW50IGxldmVsIGluIGEgbW9tZW50IHdoZW4gRElWIGVsZW1lbnQgaXMgY2xpY2tlZCAodGhpcyBoYXBwZW5zIGluIGhhbmRsZXJPbk1vdXNlRG93bikuXHJcbiAgICogaGFuZGxlck9uTW91c2VVcCBkZXRhY2hlcyBvbm1vdXNlbW92ZSBhbmQgb25tb3VzZXVwIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGUgRXZlbnQgaW5mb3JtYXRpb24uXHJcbiAgICovXHJcbiAgaGFuZGxlck9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpXHJcbiAge1xyXG4gICAgdmFyIGV2dCA9IGUgfHwgd2luZG93LmV2ZW50OyAgICAgICAgICAgIC8vIGRlZmluZSBldmVudCAoRkYgJiBJRSlcclxuICAgIHZhciBib3VuZCA9IFJFRElQUy5kcmFnLnNjcm9sbC5ib3VuZDsgICAvLyByZWFkIFwiYm91bmRcIiBwdWJsaWMgcHJvcGVydHkgKG1heWJlIGNvZGUgd2lsbCBiZSBmYXN0ZXIsIGFuZCBpdCB3aWxsIGJlIGVhc2llciB0byByZWZlcmVuY2UgaW4gb25tb3VzZW1vdmUgaGFuZGxlcilcclxuICAgIHZhciBzY2E7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50IHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFcclxuICAgIHZhciBYLCBZOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBkZWx0YVgsIGRlbHRhWTsgICAgICAgICAgICAgICAgICAgICAvLyBkZWx0YSBmcm9tIGluaXRpYWwgcG9zaXRpb25cclxuICAgIHZhciBpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIGxvY2FsIGxvb3BcclxuICAgIHZhciBzY3JvbGxQb3NpdGlvbjsgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgcG9zaXRpb24gdmFyaWFibGUgbmVlZGVkIGZvciBhdXRvc2Nyb2xsIGNhbGxcclxuXHJcbiAgICBYID0gcG9pbnRlci54ID0gZXZ0LmNsaWVudFg7XHJcbiAgICBZID0gcG9pbnRlci55ID0gZXZ0LmNsaWVudFk7XHJcblxyXG4gICAgZGVsdGFYID0gTWF0aC5hYnModGhyZXNob2xkLnggLSBYKTsgICAgICAgICAvLyBjYWxjdWxhdGUgZGVsdGEgZnJvbSBpbml0aWFsIHBvc2l0aW9uXHJcbiAgICBkZWx0YVkgPSBNYXRoLmFicyh0aHJlc2hvbGQueSAtIFkpO1xyXG5cclxuICAgIGlmICghbW92ZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgXCJtb3ZlZFwiIGZsYWcgaXNuJ3Qgc2V0ICh0aGlzIGlzIHRoZSBmaXJzdCBtb21lbnQgd2hlbiBvYmplY3QgaXMgbW92ZWQpXHJcbiAgICB7XHJcbiAgICAgIC8vcmVtZW1iZXIgcmVmZXJlbmNlIG9mIHRoZSBzb3VyY2Ugcm93LCBjbG9uZSBzb3VyY2Ugcm93IGFuZCBzZXQgb2JqIGFzIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCByb3cgc2V0dGluZ3Mgb2YgXCJjbG9uZWRcIiBmbGFnIHNob3VsZCBnbyBiZWZvcmUgY2FsbGluZyByb3dDbG9uZSgpIGJlY2F1c2UgXCJjbG9uZWRcIiBpcyBuZWVkZWQgaW4gcm93Q2xvbmUoKSB0byBjdXQgb3V0IFwicmVkaXBzLWNsb25lXCIgY2xhc3MgbmFtZSBmcm9tIDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93IHJlZGlwcy1jbG9uZVwiPiBlbGVtZW50c1xyXG4gICAgICBpZiAoY2xvbmVDbGFzcyB8fCAoUkVESVBTLmRyYWcuY2xvbmUua2V5Um93ID09PSB0cnVlICYmIHNoaWZ0S2V5KSlcclxuICAgICAge1xyXG4gICAgICAgIGNsb25lZCA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFJFRElQUy5kcmFnLm9iak9sZCA9IG9iak9sZCA9IG9iajsgICAgICAgIC8vIHJlbWVtYmVyIHJlZmVyZW5jZSB0byB0aGUgc291cmNlIHJvd1xyXG4gICAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSByb3dDbG9uZShvYmopOyAgICAvLyBjbG9uZSBzb3VyY2Ugcm93IGFuZCBzZXQgYXMgb2JqXHJcbiAgICAgIG9iai5zdHlsZS56SW5kZXggPSA5OTk7ICAgICAgICAgICAgICAgICAgIC8vIHNldCBoaWdoIHotaW5kZXggZm9yIGNsb25lZCBtaW5pIHRhYmxlXHJcblxyXG4gICAgICBvYmouc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOyAgICAgICAgICAgICAvLyBzZXQgc3R5bGUgdG8gZml4ZWQgdG8gYWxsb3cgZHJhZ2dpbmcgRElWIG9iamVjdFxyXG4gICAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBjYWxjdWxhdGUgY2VsbHMgZm9yIGNhc2Ugd2hlcmUgbW92ZWQgZWxlbWVudCBjaGFuZ2VkIGNlbGwgZGltZW5zaW9uLCBwbGFjZSAzIGVsZW1lbnRzIGluIHRoZSBzYW1lIGNlbGwgaW4gZXhhbXBsZTA4IGFuZCB0cnkgdG8gbW92ZSBvbmUgb3V0IG9mIHRoZSB0YWJsZSBjZWxsXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNvbHVtblxyXG5cclxuICAgICAgaWYgKGNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudCBoYW5kbGVyIChyb3cgY2xvbmVkL21vdmVkKVxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Q2xvbmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93TW92ZWQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0UG9zaXRpb24oKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjb2xvciBmb3IgdGhlIGN1cnJlbnQgdGFibGUgY2VsbCBhbmQgcmVtZW1iZXIgcHJldmlvdXMgcG9zaXRpb24gYW5kIGNvbG9yLCBzZXRQb3NpdGlvbigpIG11c3QgZ28gYWZ0ZXIgY2FsbGluZyBldmVudC5tb3ZlZCgpIGFuZCBldmVudC5yb3dNb3ZlZCgpIGlmIHVzZXIgd2FudHMgdG8gY2hhbmdlIGNvbG9yIG9mIHNvdXJjZSByb3dcclxuXHJcbiAgICAgIGlmIChYID4gc2NyZWVuLndpZHRoIC0gb2JqTWFyZ2luWzFdKSAgICAvLyBpZiBlbGVtZW50IGlzIGZhciBhd2F5IG9uIHRoZSByaWdodCBzaWRlIG9mIHBhZ2UsIHNldCBwb3NzaWJsZSByaWdodCBwb3NpdGlvbiAoc2NyZWVuLndpZHRoIC0gb2JqZWN0IHdpZHRoKSwgb2JqTWFyZ2luWzFdICsgb2JqTWFyZ2luWzNdID0gb2JqZWN0IHdpZHRoXHJcbiAgICAgIHtcclxuICAgICAgICBvYmouc3R5bGUubGVmdCA9IChzY3JlZW4ud2lkdGggLSAob2JqTWFyZ2luWzFdICsgIG9iak1hcmdpblszXSkpICsgJ3B4JztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKFkgPiBzY3JlZW4uaGVpZ2h0IC0gb2JqTWFyZ2luWzJdKSAgIC8vIGlmIGVsZW1lbnQgaXMgYmVsb3cgcGFnZSBib3R0b20sIHNldCBwb3NzaWJsZSBsb3dlciBwb3NpdGlvbiAoc2NyZWVuLndpZHRoIC0gb2JqZWN0IGhlaWdodCksIG9iak1hcmdpblswXSArIG9iak1hcmdpblsyXSA9IG9iamVjdCBoZWlnaHRcclxuICAgICAge1xyXG4gICAgICAgIG9iai5zdHlsZS50b3AgID0gKHNjcmVlbi5oZWlnaHQgLSAob2JqTWFyZ2luWzBdICsgb2JqTWFyZ2luWzJdKSkgKyAncHgnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZWQgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG1vdmVkX2ZsYWdcclxuXHJcbiAgICAvLyBzZXQgbGVmdCBhbmQgdG9wIHN0eWxlcyBmb3IgdGhlIG1vdmVkIGVsZW1lbnQgaWYgZWxlbWVudCBpcyBpbnNpZGUgd2luZG93LCB0aGlzIGNvbmRpdGlvbnMgd2lsbCBzdG9wIGVsZW1lbnQgb24gd2luZG93IGJvdW5kc1xyXG4gICAgaWYgKFggPiBvYmpNYXJnaW5bM10gJiYgWCA8IHNjcmVlbi53aWR0aCAtIG9iak1hcmdpblsxXSlcclxuICAgIHtcclxuICAgICAgb2JqLnN0eWxlLmxlZnQgPSAoWCAtIG9iak1hcmdpblszXSkgKyAncHgnO1xyXG4gICAgfVxyXG4gICAgaWYgKFkgPiBvYmpNYXJnaW5bMF0gJiYgWSA8IHNjcmVlbi5oZWlnaHQgLSBvYmpNYXJnaW5bMl0pXHJcbiAgICB7XHJcbiAgICAgIG9iai5zdHlsZS50b3AgID0gKFkgLSBvYmpNYXJnaW5bMF0pICsgJ3B4JztcclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsICh0aGlzIGNvbmRpdGlvbiBzaG91bGQgc3BhcmUgQ1BVKTogMSkgaWYgbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgRElWIGlkPVwicmVkaXBzLWRyYWdcIiAyKSBhbmQgYXV0b3Njcm9sbCBpcyBub3Qgd29ya2luZyAzKSBhbmQgY3VycmVudCB0YWJsZSBjb250YWlucyBuZXN0ZWQgdGFibGUgb3IgY3Vyc29yIGlzIG91dHNpZGUgb2YgY3VycmVudCBjZWxsXHJcbiAgICBpZiAoWCA8IGRpdkJveFsxXSAmJiBYID4gZGl2Qm94WzNdICYmIFkgPCBkaXZCb3hbMl0gJiYgWSA+IGRpdkJveFswXSAmJlxyXG4gICAgICBlZGdlLmZsYWcueCA9PT0gMCAmJiBlZGdlLmZsYWcueSA9PT0gMCAmJlxyXG4gICAgICAoY3VycmVudENlbGwuY29udGFpblRhYmxlIHx8IChYIDwgY3VycmVudENlbGxbM10gfHwgWCA+IGN1cnJlbnRDZWxsWzFdIHx8IFkgPCBjdXJyZW50Q2VsbFswXSB8fCBZID4gY3VycmVudENlbGxbMl0pKSlcclxuICAgIHtcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlIHJvdyBhbmQgdGFibGUgY2VsbFxyXG4gICAgICBjZWxsQ2hhbmdlZCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbmV3IGxvY2F0aW9uIGlzIGluc2lkZSB0YWJsZSBhbmQgbmV3IGxvY2F0aW9uIGlzIGRpZmZlcmVudCB0aGVuIG9sZCBsb2NhdGlvblxyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGF1dG9TY3JvbGwgb3B0aW9uIGlzIGVuYWJsZWQgKGJ5IGRlZmF1bHQgaXQgaXMgYnV0IGl0IGNhbiBiZSB0dXJuZWQgb2ZmKVxyXG4gICAgaWYgKFJFRElQUy5kcmFnLnNjcm9sbC5lbmFibGUpXHJcbiAgICB7XHJcbiAgICAgIGVkZ2UucGFnZS54ID0gYm91bmQgLSAoc2NyZWVuLndpZHRoIC8gMiAgPiBYID8gWCAtIG9iak1hcmdpblszXSA6IHNjcmVlbi53aWR0aCAtIFggLSBvYmpNYXJnaW5bMV0pOyAgICAgICAvLyBjYWxjdWxhdGUgaG9yaXpvbnRhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG5cclxuICAgICAgaWYgKGVkZ2UucGFnZS54ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kIHRoZW4gc2V0IHNjcm9sbCBkaXJlY3Rpb24gYW5kIGNhbGwgYXV0byBzY3JvbGxcclxuICAgICAge1xyXG4gICAgICAgIGlmIChlZGdlLnBhZ2UueCA+IGJvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3aGVuIG9iamVjdCBpcyBvbmx5IGhhbGYgdmlzaWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UucGFnZS54ID0gYm91bmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBnZXQgaG9yaXpvbnRhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgICAgLy9zY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IDA7ICAgLy9kaXNhYmxpbmcgYmVjYXVzZSB3ZSBzaG91bGRuJ3QgaGF2ZSB0aGUgdXNlciBzY3JvbGxpbmcgaG9yaXpvbnRhbGx5IGFuZCB0aGlzIGltcHJvdmVzIHBlcmZvcm1hbmNlIGZvciBsYXJnZSB0cmVlc1xyXG5cclxuICAgICAgICBlZGdlLnBhZ2UueCAqPSBYIDwgc2NyZWVuLndpZHRoIC8gMiA/IC0xIDogMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzY3JvbGwgZGlyZWN0aW9uXHJcblxyXG4gICAgICAgIC8vIGlmIHBhZ2UgYm91bmQgaXMgY3Jvc3NlZCBhbmQgdGhpcyB0d28gY2FzZXMgYXJlbid0IG1ldDogMSkgc2Nyb2xsYmFyIGlzIG9uIHRoZSBsZWZ0IGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCBsZWZ0IDIpIHNjcm9sbGJhciBpcyBvbiB0aGUgcmlnaHQgYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIHJpZ2h0XHJcbiAgICAgICAgaWYgKCEoKGVkZ2UucGFnZS54IDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA8PSAwKSB8fCAoZWRnZS5wYWdlLnggPiAwICYmIHNjcm9sbFBvc2l0aW9uID49IChzY3JvbGxEYXRhLndpZHRoIC0gc2NyZWVuLndpZHRoKSkpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChlZGdlLmZsYWcueCsrID09PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpcmUgYXV0b3Njcm9sbCBmdW5jdGlvbiAodGhpcyBzaG91bGQgaGFwcGVuIG9ubHkgb25jZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZSh3aW5kb3csICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgIC8vIHJlc2V0IG9uc2Nyb2xsIGV2ZW50XHJcbiAgICAgICAgICAgIGF1dG9TY3JvbGxYKHdpbmRvdyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHdpbmRvdyBhdXRvc2Nyb2xsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIGVkZ2UucGFnZS54ID0gMDtcclxuICAgICAgfVxyXG5cclxuICAgICAgZWRnZS5wYWdlLnkgPSBib3VuZCAtIChzY3JlZW4uaGVpZ2h0IC8gMiA+IFkgPyBZIC0gb2JqTWFyZ2luWzBdIDogc2NyZWVuLmhlaWdodCAtIFkgLSBvYmpNYXJnaW5bMl0pOyAgICAgIC8vIGNhbGN1bGF0ZSB2ZXJ0aWNhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICBcclxuICAgICAgaWYgKGVkZ2UucGFnZS55ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZWRnZS5wYWdlLnkgPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBtYXggY3Jvc3NlZCBib3VuZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UucGFnZS55ID0gYm91bmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHZlcnRpY2FsIHdpbmRvdyBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgICBlZGdlLnBhZ2UueSAqPSBZIDwgc2NyZWVuLmhlaWdodCAvIDIgPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzY3JvbGwgZGlyZWN0aW9uXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCEoKGVkZ2UucGFnZS55IDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA8PSAwKSB8fCAoZWRnZS5wYWdlLnkgPiAwICYmIHNjcm9sbFBvc2l0aW9uID49IChzY3JvbGxEYXRhLmhlaWdodCAtIHNjcmVlbi5oZWlnaHQpKSkpICAgIC8vIGlmIHBhZ2UgYm91bmQgaXMgY3Jvc3NlZCBhbmQgdGhpcyB0d28gY2FzZXMgYXJlbid0IG1ldDogMSkgc2Nyb2xsYmFyIGlzIG9uIHRoZSBwYWdlIHRvcCBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgdXAgMikgc2Nyb2xsYmFyIGlzIG9uIHRoZSBwYWdlIGJvdHRvbSBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgZG93blxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChlZGdlLmZsYWcueSsrID09PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpcmUgYXV0b3Njcm9sbCAodGhpcyBzaG91bGQgaGFwcGVuIG9ubHkgb25jZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZSh3aW5kb3csICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9uc2Nyb2xsIGV2ZW50XHJcbiAgICAgICAgICAgIGF1dG9TY3JvbGxZKHdpbmRvdyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHdpbmRvdyBhdXRvc2Nyb2xsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgXHJcbiAgICAgIHtcclxuICAgICAgICBlZGdlLnBhZ2UueSA9IDA7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzY3JvbGxEYXRhLmNvbnRhaW5lci5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXN0IGlmIGRyYWdnZWQgb2JqZWN0IGlzIGluIHNjcm9sbGFibGUgY29udGFpbmVyLCB0aGlzIGNvZGUgd2lsbCBiZSBleGVjdXRlZCBvbmx5IGlmIHNjcm9sbGFibGUgY29udGFpbmVyIChESVYgd2l0aCBvdmVyZmxvdyBvdGhlciB0aGFuICd2aXNpYmxlKSBleGlzdHMgb24gcGFnZVxyXG4gICAgICB7XHJcbiAgICAgICAgc2NhID0gc2Nyb2xsRGF0YS5jb250YWluZXJbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHNjYS5hdXRvc2Nyb2xsICYmIFggPCBzY2Eub2Zmc2V0WzFdICYmIFggPiBzY2Eub2Zmc2V0WzNdICYmIFkgPCBzY2Eub2Zmc2V0WzJdICYmIFkgPiBzY2Eub2Zmc2V0WzBdKSAvLyBpZiBkcmFnZ2VkIG9iamVjdCBpcyBpbnNpZGUgc2Nyb2xsYWJsZSBjb250YWluZXIgYW5kIHNjcm9sbGFibGUgY29udGFpbmVyIGhhcyBlbmFibGVkIGF1dG9zY3JvbGwgb3B0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWRnZS5kaXYueCA9IGJvdW5kIC0gKHNjYS5taWRzdFggID4gWCA/IFggLSBvYmpNYXJnaW5bM10gLSBzY2Eub2Zmc2V0WzNdIDogc2NhLm9mZnNldFsxXSAtIFggLSBvYmpNYXJnaW5bMV0pOyAgIC8vIGNhbGN1bGF0ZSBob3Jpem9udGFsbHkgY3Jvc3NlZCBwYWdlIGJvdW5kXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChlZGdlLmRpdi54ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kIHRoZW4gc2V0IHNjcm9sbCBkaXJlY3Rpb24gYW5kIGNhbGwgYXV0byBzY3JvbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZGl2LnggPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2hlbiBvYmplY3QgaXMgb25seSBoYWxmIHZpc2libGUgKHBhZ2UgaXMgc2Nyb2xsZWQgb24gdGhhdCBvYmplY3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBlZGdlLmRpdi54ID0gYm91bmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnggKj0gWCA8IHNjYS5taWRzdFggPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvbjogbmVnYXRpdmUgLSBsZWZ0LCBwb3NpdGl2ZSAtIHJpZ2h0XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZWRnZS5mbGFnLngrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgYW5kIGNhbGwgYXV0b1Njcm9sbFkgZnVuY3Rpb24gb25seSBvbmNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBSRURJUFMuZXZlbnQucmVtb3ZlKHNjYS5kaXYsICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7XHJcbiAgICAgICAgICAgICAgYXV0b1Njcm9sbFgoc2NhLmRpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnggPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBlZGdlLmRpdi55ID0gYm91bmQgLSAoc2NhLm1pZHN0WSAgPiBZID8gWSAtIG9iak1hcmdpblswXSAtIHNjYS5vZmZzZXRbMF0gOiBzY2Eub2Zmc2V0WzJdIC0gWSAtIG9iak1hcmdpblsyXSk7ICAgLy8gY2FsY3VsYXRlIHZlcnRpY2FsbHkgY3Jvc3NlZCBwYWdlIGJvdW5kXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChlZGdlLmRpdi55ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kIHRoZW4gc2V0IHNjcm9sbCBkaXJlY3Rpb24gYW5kIGNhbGwgYXV0byBzY3JvbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZGl2LnkgPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2hlbiBvYmplY3QgaXMgb25seSBoYWxmIHZpc2libGUgKHBhZ2UgaXMgc2Nyb2xsZWQgb24gdGhhdCBvYmplY3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBlZGdlLmRpdi55ID0gYm91bmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnkgKj0gWSA8IHNjYS5taWRzdFkgPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvbjogbmVnYXRpdmUgLSB1cCwgcG9zaXRpdmUgLSBkb3duXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZWRnZS5mbGFnLnkrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgYW5kIGNhbGwgYXV0b1Njcm9sbFkgZnVuY3Rpb24gb25seSBvbmNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBSRURJUFMuZXZlbnQucmVtb3ZlKHNjYS5kaXYsICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7XHJcbiAgICAgICAgICAgICAgYXV0b1Njcm9sbFkoc2NhLmRpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnkgPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnJlYWsgdGhlIGxvb3AgKGNoZWNraW5nIGZvciBvdGhlciBzY3JvbGxhYmxlIGNvbnRhaW5lcnMgaXMgbm90IG5lZWRlZClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIChJIG1lYW4gZHJhZ2dlZCBvYmplY3QgaXNuJ3QgaW5zaWRlIGFueSBvZiBzY3JvbGxhYmxlIGNvbnRhaW5lcikgcmVzZXQgY3Jvc3NlZCBlZGdlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWRnZS5kaXYueCA9IGVkZ2UuZGl2LnkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBzdG9wIGFsbCBwcm9wYWdhdGlvbiBvZiB0aGUgZXZlbnQgaW4gdGhlIGJ1YmJsaW5nIHBoYXNlLiAgKHNhdmUgc3lzdGVtIHJlc291cmNlcyBieSB0dXJuaW5nIG9mZiBldmVudCBidWJibGluZyAvIHByb3BhZ2F0aW9uKVxyXG4gICAgZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICBpZiAoZXZ0LnN0b3BQcm9wYWdhdGlvbikgXHJcbiAgICB7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgKGZyb20gaGFuZGxlck9uTW91c2VNb3ZlLCBhdXRvU2Nyb2xsWCwgYXV0b1Njcm9sbFkpIGluIGNhc2Ugb2YgY2hhbmdlIG9mIGN1cnJlbnQgdGFibGUgY2VsbC5cclxuICAvLyBXaGVuIGNoYW5nZSBoYXBwZW5zLCB0aGVuIHJldHVybiBiYWNrZ3JvdW5kIGNvbG9yIHRvIG9sZCBwb3NpdGlvbiwgaGlnaGxpZ2h0IG5ldyBwb3NpdGlvbiwgY2FsY3VsYXRlIGNlbGwgYm91bmRhcmllcyBhbmQgY2FsbCBldmVudC5jaGFuZ2VkLlxyXG4gIGNlbGxDaGFuZ2VkID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgaWYgKChyb3cgIT09IHJvd19vbGQgfHwgY2VsbCAhPT0gY2VsbF9vbGQpKSBcclxuICAgIHtcclxuICAgICAgaWYgKHJvd19vbGQgIT09IG51bGwgJiYgY2VsbF9vbGQgIT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNlbGwgYmFja2dyb3VuZCBjb2xvciB0byB0aGUgcHJldmlvdXMgY2VsbFxyXG4gICAgICB7XHJcbiAgICAgICAgc2V0VGRTdHlsZShyb3dfb2xkLCBiZ1N0eWxlT2xkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIGZvciBwcmV2aW91cyB0YWJsZSByb3dcclxuICAgICAgICBSRURJUFMuZHJhZy50ZC5wcmV2aW91cyA9IHRkLnByZXZpb3VzID0gdGFibGUucm93c1tyb3dfb2xkXS5jZWxsc1tjZWxsX29sZF07ICAgICAgLy8gZGVmaW5lIHByZXZpb3VzIHRhYmxlIGNlbGxcclxuICAgICAgICBSRURJUFMuZHJhZy50ZC5jdXJyZW50ID0gdGQuY3VycmVudCA9IHRhYmxlLnJvd3Nbcm93XS5jZWxsc1tjZWxsXTsgICAgICAgICAgICAgICAgLy8gZGVmaW5lIGN1cnJlbnQgdGFibGUgY2VsbFxyXG5cclxuICAgICAgICBpZiAocm93ICE9PSByb3dfb2xkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRhYmxlIG9yIHJvdyBzaG91bGQgY2hhbmdlIChjaGFuZ2luZyBjZWxsIGluIHRoZSBzYW1lIHJvdyB3aWxsIGJlIGlnbm9yZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Q2hhbmdlZCh0ZC5jdXJyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNldFBvc2l0aW9uKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gSW4gaW5pdGlhbGl6YXRpb24gcGhhc2UsIHRoaXMgbWV0aG9kIGlzIGF0dGFjaGVkIGFzIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIgZm9yIHdpbmRvdy4gIEl0IGFsc28gY2FsY3VsYXRlcyB3aW5kb3cgd2lkdGggYW5kIHdpbmRvdyBoZWlnaHQuIFJlc3VsdCBpcyBzYXZlZCBpbiB2YXJpYWJsZXMgc2NyZWVuLndpZHRoIGFuZCBzY3JlZW4uaGVpZ2h0IHZpc2libGUgaW5zaWRlIFJFRElQUy5kcmFnIHByaXZhdGUgc2NvcGUuXHJcbiAgaGFuZGxlck9uUmVzaXplID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgc2NyZWVuLndpZHRoICA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgc2NyZWVuLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIFxyXG4gICAgc2Nyb2xsRGF0YS53aWR0aCAgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg7ICAgICAvLyBzZXQgc2Nyb2xsIHNpemUgKG9ucmVzaXplLCBvbmxvYWQgYW5kIG9ubW91c2V1cCBldmVudClcclxuICAgIHNjcm9sbERhdGEuaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodDtcclxuICAgIFxyXG4gICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgY29sdW1zIGFuZCByb3dzIG9mZnNldCAoY2VsbHMgZGltZW5zaW9ucylcclxuICB9O1xyXG5cclxuICAvLyBNZXRob2Qgc2V0cyBjdXJyZW50IHJvdyBhbmQgY2VsbC4gIEN1cnJlbnQgY2VsbCBwb3NpdGlvbiBpcyBiYXNlZCBvbiBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyIGFuZCBjYWxjdWxhdGVkIGdyaWQgb2YgdGFibGVzIGluc2lkZSBkcmFnIGNvbnRhaW5lci5cclxuICAvLyBSb3dzIHdpdGggZGlzcGxheT0nbm9uZScgYXJlIG5vdCBjb250YWluZWQgaW4gcm93X29mZnNldCBhcnJheSBzbyByb3cgYm91bmRzIGNhbGN1bGF0aW9uIHNob3VsZCB0YWtlIGNhcmUgYWJvdXQgc3BhcnNlIGFycmF5cyAoc2luY2UgdmVyc2lvbiA0LjMuNikuXHJcbiAgc2V0VGFibGVSb3dDb2x1bW4gPSBmdW5jdGlvbiAoKVxyXG4gIHtcclxuICAgIHZhciBwcmV2aW91czsgICAgICAgLy8gc2V0IHByZXZpb3VzIHBvc2l0aW9uIChjdXJyZW50IGNlbGwgd2lsbCBub3QgYmUgaGlnaGxpZ2h0ZWQpXHJcbiAgICB2YXIgcm93X29mZnNldDsgICAgIC8vIHJvdyBvZmZzZXRzIGZvciB0aGUgc2VsZWN0ZWQgdGFibGUgKHJvdyBib3ggYm91bmRzKVxyXG4gICAgdmFyIHJvd19mb3VuZDsgICAgICAvLyByZW1lbWJlciBmb3VuZCByb3dcclxuICAgIHZhciB0b3MgPSBbXTsgICAgICAgLy8gdGFibGUgb2Zmc2V0XHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgdmFyIGk7ICAgICAgICAgICAgICAvLyB1c2VkIGluIGxvY2FsIGxvb3BcclxuXHJcbiAgICBwcmV2aW91cyA9IGZ1bmN0aW9uICgpICAgIC8vIHNldCBwcmV2aW91cyBwb3NpdGlvbiAoY3VycmVudCBjZWxsIHdpbGwgbm90IGJlIGhpZ2hsaWdodGVkKVxyXG4gICAge1xyXG4gICAgICBpZiAocm93X29sZCAhPT0gbnVsbCAmJiBjZWxsX29sZCAhPT0gbnVsbClcclxuICAgICAge1xyXG4gICAgICAgIHJvdyA9IHJvd19vbGQ7XHJcbiAgICAgICAgY2VsbCA9IGNlbGxfb2xkO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFggPSBwb2ludGVyLng7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICBZID0gcG9pbnRlci55O1xyXG5cclxuICAgIHRvc1swXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMF07IC8vIHRvcFxyXG4gICAgdG9zWzFdID0gdGFibGUucmVkaXBzLm9mZnNldFsxXTsgLy8gcmlnaHRcclxuICAgIHRvc1syXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMl07IC8vIGJvdHRvbVxyXG4gICAgdG9zWzNdID0gdGFibGUucmVkaXBzLm9mZnNldFszXTsgLy8gbGVmdFxyXG5cclxuICAgIC8vIGlmIHRhYmxlIGJlbG9uZ3MgdG8gdGhlIHNjcm9sbGFibGUgY29udGFpbmVyIHRoZW4gc2V0IHNjcm9sbGFibGUgY29udGFpbmVyIG9mZnNldCBpZiBuZWVkZWQgaW4gY2FzZSB3aGVuIHNvbWUgcGFydHMgb2YgdGFibGUgYXJlIGhpZGRlbiAoZm9yIGV4YW1wbGUgd2l0aCBcIm92ZXJmbG93OiBhdXRvXCIpXHJcbiAgICBpZiAodGFibGUuc2NhICE9PSB1bmRlZmluZWQpXHJcbiAgICB7XHJcbiAgICAgIHRvc1swXSA9IHRvc1swXSA+IHRhYmxlLnNjYS5vZmZzZXRbMF0gPyB0b3NbMF0gOiB0YWJsZS5zY2Eub2Zmc2V0WzBdOyAvLyB0b3BcclxuICAgICAgdG9zWzFdID0gdG9zWzFdIDwgdGFibGUuc2NhLm9mZnNldFsxXSA/IHRvc1sxXSA6IHRhYmxlLnNjYS5vZmZzZXRbMV07IC8vIHJpZ2h0XHJcbiAgICAgIHRvc1syXSA9IHRvc1syXSA8IHRhYmxlLnNjYS5vZmZzZXRbMl0gPyB0b3NbMl0gOiB0YWJsZS5zY2Eub2Zmc2V0WzJdOyAvLyBib3R0b21cclxuICAgICAgdG9zWzNdID0gdG9zWzNdID4gdGFibGUuc2NhLm9mZnNldFszXSA/IHRvc1szXSA6IHRhYmxlLnNjYS5vZmZzZXRbM107IC8vIGxlZnRcclxuICAgIH1cclxuXHJcbiAgICBpZiAodG9zWzNdIDwgWCAmJiBYIDwgdG9zWzFdICYmIHRvc1swXSA8IFkgJiYgWSA8IHRvc1syXSkgICAgICAgICAgICAgICAgIC8vIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIHRhYmxlIChvciBzY3JvbGxhYmxlIGNvbnRhaW5lcilcclxuICAgIHtcclxuICAgICAgcm93X29mZnNldCA9IHRhYmxlLnJlZGlwcy5yb3dfb2Zmc2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIHJvdyBvZmZzZXRzIGZvciB0aGUgc2VsZWN0ZWQgdGFibGUgKHJvdyBib3ggYm91bmRzKVxyXG5cclxuICAgICAgZm9yIChyb3cgPSAwOyByb3cgPCByb3dfb2Zmc2V0Lmxlbmd0aCAtIDE7IHJvdysrKSAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCB0aGUgY3VycmVudCByb3cgKGxvb3Agc2tpcHMgaGlkZGVuIHJvd3MpXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAocm93X29mZnNldFtyb3ddID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGRvZXNuJ3QgZXhpc3QgKGluIGNhc2Ugb2YgaGlkZGVuIHJvdykgLSBza2lwIGl0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdXJyZW50Q2VsbFswXSA9IHJvd19vZmZzZXRbcm93XVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRvcCBhbmQgYm90dG9tIGNlbGwgYm91bmRzXHJcblxyXG4gICAgICAgIGlmIChyb3dfb2Zmc2V0W3JvdyArIDFdICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYm90dG9tIGNlbGwgYm91bmQgKGlmIGlzIHBvc3NpYmxlKSAtIGhpZGRlbiByb3cgZG9lc24ndCBleGlzdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGN1cnJlbnRDZWxsWzJdID0gcm93X29mZnNldFtyb3cgKyAxXVswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhpZGRlbiByb3cgKGxpa2Ugc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZvciAoaSA9IHJvdyArIDI7IGkgPCByb3dfb2Zmc2V0Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZvciBuZXh0IHZpc2libGUgcm93XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChyb3dfb2Zmc2V0W2ldICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZpc2libGUgcm93IGZvdW5kXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IHJvd19vZmZzZXRbaV1bMF07XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChZIDw9IGN1cnJlbnRDZWxsWzJdKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b3AgYm91bmQgb2YgdGhlIG5leHQgcm93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByb3dfZm91bmQgPSByb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBmb3VuZCByb3dcclxuXHJcbiAgICAgIGlmIChyb3cgPT09IHJvd19vZmZzZXQubGVuZ3RoIC0gMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGxvb3AgZXhjZWVkcywgdGhlbiBzZXQgYm91bmRzIGZvciB0aGUgbGFzdCByb3cgKG9mZnNldCBmb3IgdGhlIGxhc3Qgcm93IGRvZXNuJ3Qgd29yayBpbiBJRTgsIHNvIHVzZSB0YWJsZSBib3VuZHMpXHJcbiAgICAgIHtcclxuICAgICAgICBjdXJyZW50Q2VsbFswXSA9IHJvd19vZmZzZXRbcm93XVswXTtcclxuICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMl07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNlbGwgPSAwO1xyXG5cclxuICAgICAgaWYgKHJvdyA8IDAgfHwgY2VsbCA8IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNlbGwgPCAwIG9yIHJvdyA8IDAgdGhlbiB1c2UgbGFzdCBwb3NzaWJsZSBsb2NhdGlvblxyXG4gICAgICB7XHJcbiAgICAgICAgcHJldmlvdXMoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChyb3cgIT09IHJvd19mb3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBjZWxsIGZvdW5kIGJ1dCBpZiBjdXJyZW50IHJvdyBkaWZmZXIgZnJvbSBwcmV2aW91c2x5IGZvdW5kIHJvdyAodGhhbmtzIHRvbyB3aGlsZSBsb29wIHdpdGggcm93LS0pIHRoZW4gdGVzdCBpZiBZIGlzIGluc2lkZSBjdXJyZW50IGNlbGwsICh0aGlzIHNob3VsZCBwcmV2ZW50IGNhc2Ugd2hlcmUgVEQgYm9yZGVyID4gMXB4IGFuZCB1cHBlciBjb2xzcGFuZWQgcm93IGxpa2UgaW4gZXhhbXBsZTE1KSBsb2dpYyB3aWxsIGVuZCBpbiB1cHBlciBjb2xzcGFuZWQgcm93IHdoaWxlIGN1cnJlbnQgcm93IHdpbGwgbm90IG1vdmUgLSBhbmQgdGhhdCB3YXMgd3JvbmdcclxuICAgICAge1xyXG5cclxuICAgICAgICBjdXJyZW50Q2VsbFswXSA9IHJvd19vZmZzZXRbcm93XVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY2FsY3VsYXRlIHRvcCBhbmQgYm90dG9tIHJvdyBvZmZzZXQgKGFnYWluKVxyXG4gICAgICAgIGN1cnJlbnRDZWxsWzJdID0gY3VycmVudENlbGxbMF0gKyB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF0ub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAoWSA8IGN1cnJlbnRDZWxsWzBdIHx8IFkgPiBjdXJyZW50Q2VsbFsyXSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIFkgaXMgb3V0c2lkZSBvZiB0aGUgY3VycmVudCByb3csIHJldHVybiBwcmV2aW91cyBsb2NhdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByZXZpb3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIHNldHMgYmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIGN1cnJlbnQgdGFibGUgY2VsbCBhbmQgcmVtZW1iZXJzIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBiYWNrZ3JvdW5kIGNvbG9yLiAgSXQgaXMgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlIGFuZCBjZWxsQ2hhbmdlZC5cclxuICBzZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgaWYgKHJvdyAhPT0gbnVsbCAmJiBjZWxsICE9PSBudWxsKSAgICAgIC8vIGluIGNhc2UgaWYgb3JkaW5hcnkgZWxlbWVudCBpcyBwbGFjZWQgaW5zaWRlICdkZW55JyB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIGJnU3R5bGVPbGQgPSBnZXRUZFN0eWxlKHJvdyk7ICAgICAgICAgLy8gcmVtZW1iZXIgYmFja2dyb3VuZCBjb2xvciBiZWZvcmUgc2V0dGluZyB0aGUgbmV3IGJhY2tncm91bmQgY29sb3JcclxuICAgICAgc2V0VGRTdHlsZShyb3cpOyAgICAgICAgICAgICAgICAgICAgICAvLyBoaWdobGlnaHQgY3VycmVudCBURCAvIFRSIChjb2xvcnMgYW5kIHN0eWxlcyBhcmUgcmVhZCBmcm9tIHB1YmxpYyBwcm9wZXJ0eSBcImhvdmVyXCJcclxuICAgICAgcm93X29sZCA9IHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBjdXJyZW50IHBvc2l0aW9uIChmb3Igcm93IGFuZCBjZWxsKVxyXG4gICAgICBjZWxsX29sZCA9IGNlbGw7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHNldHMgdGFibGUgY2VsbChzKSBiYWNrZ3JvdW5kIHN0eWxlcyAoYmFja2dyb3VuZCBjb2xvcnMgYW5kIGJvcmRlciBzdHlsZXMpLlxyXG4gICAqIElmIHRkU3R5bGUgaXMgdW5kZWZpbmVkIHRoZW4gY3VycmVudCB0ZC90ciB3aWxsIGJlIGhpZ2hsaWdodGVkIGZyb20gcHVibGljIHByb3BlcnR5IGhvdmVyLmNvbG9yX3RkLCBob3Zlci5jb2xvcl90ciAuLi5cclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHJpIFJvdyBpbmRleC5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gdCBPYmplY3QgY29udGFpbnMgYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcyAoXCJ0XCIgaXMgVEQgc3R5bGUgb2JqZWN0IGlzIHByZXBhcmVkIGluIGdldFRkU3R5bGUgbWV0aG9kKS5cclxuICAgKi9cclxuICBzZXRUZFN0eWxlID0gZnVuY3Rpb24gKHJpLCB0KSBcclxuICB7XHJcbiAgICB2YXIgdHIsIHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgYW5kIHRkLnN0eWxlXHJcblxyXG4gICAgdHIgPSB0YWJsZS5yb3dzW3JpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgdGFibGUgcm93XHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHIuY2VsbHMubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29sb3JzIHRvIHRhYmxlIGNlbGxzIChyZXNwZWN0aXZlbHkpIG9yIGZpcnN0IGNvbG9yIHRvIGFsbCBjZWxscyAoaW4gY2FzZSBvZiBzZXR0aW5ncyBob3ZlciB0byB0aGUgcm93KVxyXG4gICAge1xyXG4gICAgICBzID0gdHIuY2VsbHNbaV0uc3R5bGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gY3VycmVudCBURCBzdHlsZVxyXG4gICAgICBzLmJhY2tncm91bmRDb2xvciA9ICh0ID09PSB1bmRlZmluZWQpID8gUkVESVBTLmRyYWcuaG92ZXIuY29sb3JUciA6IHQuY29sb3JbaV0udG9TdHJpbmcoKTsgIC8vIFRSIGJhY2tncm91bmQgY29sb3IgLSB0ZFN0eWxlIGlzIHVuZGVmaW5lZCB0aGVuIGhpZ2hsaWdodCBURCBvdGhlcndpc2UgcmV0dXJuIHByZXZpb3VzIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgXHJcbiAgICAgIGlmIChSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUciAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVFIgYm9yZGVyIC0gaWYgaG92ZXIuYm9yZGVyVGQgaXMgc2V0IHRoZW4gdGFrZSBjYXJlIG9mIGJvcmRlciBzdHlsZVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJvcmRlciAoaGlnaGxpZ2h0KSAtIHNvdXJjZSByb3cgd2lsbCBub3QgaGF2ZSBhbnkgYm9yZGVyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKHJvdyA8IHJvd19zb3VyY2UpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBpcyBtb3ZlZCBhYm92ZSBzb3VyY2Ugcm93IGluIGN1cnJlbnQgdGFibGVcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcy5ib3JkZXJUb3AgPSBSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaXMgbW92ZWQgYmVsb3cgc291cmNlIHJvdyBpbiBjdXJyZW50IHRhYmxlXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHMuYm9yZGVyQm90dG9tID0gUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBwcmV2aW91cyBzdGF0ZSBib3JkZXJUb3AgYW5kIGJvcmRlckJvdHRvbSAoZXhpdCBmcm9tIFREKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHMuYm9yZGVyVG9wV2lkdGggPSB0LnRvcFtpXVswXTtcclxuICAgICAgICAgIHMuYm9yZGVyVG9wU3R5bGUgPSB0LnRvcFtpXVsxXTtcclxuICAgICAgICAgIHMuYm9yZGVyVG9wQ29sb3IgPSB0LnRvcFtpXVsyXTtcclxuICAgICAgICAgIHMuYm9yZGVyQm90dG9tV2lkdGggPSB0LmJvdHRvbVtpXVswXTtcclxuICAgICAgICAgIHMuYm9yZGVyQm90dG9tU3R5bGUgPSB0LmJvdHRvbVtpXVsxXTtcclxuICAgICAgICAgIHMuYm9yZGVyQm90dG9tQ29sb3IgPSB0LmJvdHRvbVtpXVsyXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLy8gTWV0aG9kIHJldHVybnMgYmFja2dyb3VuZCBhbmQgYm9yZGVyIHN0eWxlcyBhcyBvYmplY3QgZm9yIHRoZSBpbnB1dCBwYXJhbWV0ZXIgcm93IGluZGV4IChyaSkuICBAcmV0dXJuIHtPYmplY3R9IE9iamVjdCBjb250YWluaW5nIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgKGZvciB0aGUgcm93KS5cclxuICBnZXRUZFN0eWxlID0gZnVuY3Rpb24gKHJpKSBcclxuICB7XHJcbiAgICB2YXIgdHIsIGM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgYW5kIHRkIHJlZmVyZW5jZSAgIFxyXG4gICAgdmFyIHQgPSB7Y29sb3I6IFtdLCB0b3A6IFtdLCByaWdodDogW10sIGJvdHRvbTogW10sIGxlZnQ6IFtdfTsgICAgICAgIC8vIGRlZmluZSBURCBzdHlsZSBvYmplY3Qgd2l0aCBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzOiB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnRcclxuICAgICAgXHJcbiAgICB2YXIgYm9yZGVyID0gZnVuY3Rpb24gKGMsIG5hbWUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2QgZ2V0cyBib3JkZXIgc3R5bGVzOiB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRcclxuICAgIHtcclxuICAgICAgdmFyIHdpZHRoID0gJ2JvcmRlcicgKyBuYW1lICsgJ1dpZHRoJywgc3R5bGUgPSAnYm9yZGVyJyArIG5hbWUgKyAnU3R5bGUnLCBjb2xvciA9ICdib3JkZXInICsgbmFtZSArICdDb2xvcic7XHJcbiAgICAgIHJldHVybiBbZ2V0U3R5bGUoYywgd2lkdGgpLCBnZXRTdHlsZShjLCBzdHlsZSksIGdldFN0eWxlKGMsIGNvbG9yKV07XHJcbiAgICB9O1xyXG5cclxuICAgIHRyID0gdGFibGUucm93c1tyaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHRhYmxlIHJvd1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgc3R5bGVzIGZvciBlYWNoIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgYyA9IHRyLmNlbGxzW2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgVEQgcmVmZXJlbmNlXHJcbiAgICAgIHQuY29sb3JbaV0gPSBjLnN0eWxlLmJhY2tncm91bmRDb2xvcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICBcclxuICAgICAgaWYgKFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciB0b3AgYW5kIGJvdHRvbSBURCBib3JkZXIgc3R5bGVzIGlmIGhvdmVyLmJvcmRlclRyIHByb3BlcnR5IGlzIHNldFxyXG4gICAgICB7XHJcbiAgICAgICAgdC50b3BbaV0gPSBib3JkZXIoYywgJ1RvcCcpO1xyXG4gICAgICAgIHQuYm90dG9tW2ldID0gYm9yZGVyKGMsICdCb3R0b20nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0O1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCByZXR1cm5zIGFycmF5IG9mIGVsZW1lbnQgYm91bmRzIChvZmZzZXQpIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdCAobmVlZGVkIGZvciB0YWJsZSBncmlkIGNhbGN1bGF0aW9uKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBib3ggSFRNTEVsZW1lbnQgZm9yIGJveCBtZXRyaWNzLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcG9zaXRpb25dIEhUTUxFbGVtZW50IFwicG9zaXRpb25cIiBzdHlsZS4gRWxlbWVudHMgd2l0aCBzdHlsZSBcImZpeGVkXCIgd2lsbCBub3QgaGF2ZSBpbmNsdWRlZCBwYWdlIHNjcm9sbCBvZmZzZXQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYm94X3Njcm9sbF0gSWYgc2V0IHRvIFwiZmFsc2VcIiB0aGVuIGVsZW1lbnQgc2Nyb2xsIG9mZnNldCB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbiBjYWxjdWxhdGlvbiAoZGVmYXVsdCBpcyBcInRydWVcIikuXHJcbiAgICogQHJldHVybiB7QXJyYXl9IEJveCBvZmZzZXQgYXJyYXk6IFsgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0IF1cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGNhbGN1bGF0ZSBib3ggb2Zmc2V0IGZvciB0aGUgZGl2IGlkPVwicmVkaXBzLWRyYWdcIlxyXG4gICAqIGRpdmJveCA9IGJveE9mZnNldChkcmFnQ29udGFpbmVyKTtcclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGluY2x1ZGUgc2Nyb2xsIHBvc2l0aW9uIGluIG9mZnNldFxyXG4gICAqIG9mZnNldCA9IGJveE9mZnNldChyb3dPYmosICdmaXhlZCcpO1xyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gZ2V0IERJViBvZmZzZXQgd2l0aCBvciB3aXRob3V0IFwicGFnZSBzY3JvbGxcIiBhbmQgZXhjbHVkZWQgZWxlbWVudCBzY3JvbGwgb2Zmc2V0XHJcbiAgICogY2IgPSBib3hPZmZzZXQoZGl2LCBwb3NpdGlvbiwgZmFsc2UpO1xyXG4gICAqL1xyXG4gIGJveE9mZnNldCA9IGZ1bmN0aW9uIChib3gsIHBvc2l0aW9uLCBib3hfc2Nyb2xsKVxyXG4gIHtcclxuICAgIHZhciBvTGVmdCA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9mZnNldCBsZWZ0ICh0YWtlIGNhcmUgb2YgaG9yaXpvbnRhbCBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB2YXIgb1RvcCAgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgdG9wICh0YWtlIGNhcmUgb2QgdmVydGljYWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgdmFyIGJveE9sZCA9IGJveDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBib3ggb2JqZWN0XHJcblxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZV9wb3NpdGlvbiBpcyB1bmRlZmluZWQsICcnIG9yICdwYWdlX3Njcm9sbCcgdGhlbiBpbmNsdWRlIHBhZ2Ugc2Nyb2xsIG9mZnNldCwgd2luZG93U2Nyb2xsUG9zaXRpb24gaXMgc2V0IGluIGNhbGN1bGF0ZUNlbGxzKCksIGNhbGN1bGF0ZUNlbGxzKCkgaXMgY2FsbGVkIG9uIHdpbmRvdyBzY3JvbGwgZXZlbnRcclxuICAgIHtcclxuICAgICAgb0xlZnQgPSAwIC0gd2luZG93U2Nyb2xsUG9zaXRpb25bMF07ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9mZnNldCBsZWZ0ICh0YWtlIGNhcmUgb2YgaG9yaXpvbnRhbCBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICAgIG9Ub3AgID0gMCAtIHdpbmRvd1Njcm9sbFBvc2l0aW9uWzFdOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgdG9wICh0YWtlIGNhcmUgb2QgdmVydGljYWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChib3hfc2Nyb2xsID09PSB1bmRlZmluZWQgfHwgYm94X3Njcm9sbCA9PT0gdHJ1ZSkgICAgICAgICAgLy8gY2xpbWIgdXAgdGhyb3VnaCBET00gaGllcmFyY2h5IChnZXRTY3JvbGxQb3NpdGlvbigpIHRha2VzIGNhcmUgYWJvdXQgcGFnZSBzY3JvbGwgcG9zaXRpb25zKVxyXG4gICAge1xyXG4gICAgICBkb1xyXG4gICAgICB7XHJcbiAgICAgICAgb0xlZnQgKz0gYm94Lm9mZnNldExlZnQgLSBib3guc2Nyb2xsTGVmdDtcclxuICAgICAgICBvVG9wICs9IGJveC5vZmZzZXRUb3AgLSBib3guc2Nyb2xsVG9wO1xyXG4gICAgICAgIGJveCA9IGJveC5vZmZzZXRQYXJlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgd2hpbGUgKGJveCAmJiBib3gubm9kZU5hbWUgIT09ICdCT0RZJyk7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsaW1iIHVwIHRvIHRoZSBCT0RZIGVsZW1lbnQgYnV0IHdpdGhvdXQgc2Nyb2xsIHBvc2l0aW9uc1xyXG4gICAge1xyXG4gICAgICBkb1xyXG4gICAgICB7XHJcbiAgICAgICAgb0xlZnQgKz0gYm94Lm9mZnNldExlZnQ7XHJcbiAgICAgICAgb1RvcCArPSBib3gub2Zmc2V0VG9wO1xyXG4gICAgICAgIGJveCA9IGJveC5vZmZzZXRQYXJlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgd2hpbGUgKGJveCAmJiBib3gubm9kZU5hbWUgIT09ICdCT0RZJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gICAgICAgIHRvcCAgICAgICAgICAgICAgICAgcmlnaHQsICAgICAgICAgICAgICAgICAgICAgYm90dG9tICAgICAgICAgICBsZWZ0XHJcbiAgICByZXR1cm4gWyBvVG9wLCBvTGVmdCArIGJveE9sZC5vZmZzZXRXaWR0aCwgb1RvcCArIGJveE9sZC5vZmZzZXRIZWlnaHQsIG9MZWZ0IF07XHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIGlzIGNhbGxlZCBpbiBldmVyeSBwb3NzaWJsZSBjYXNlIHdoZW4gcG9zaXRpb24gb3Igc2l6ZSBvZiB0YWJsZSBncmlkIGNvdWxkIGNoYW5nZSBsaWtlOiBwYWdlIHNjcm9sbGluZywgZWxlbWVudCBkcm9wcGVkIHRvIHRoZSB0YWJsZSBjZWxsLCBlbGVtZW50IHN0YXJ0IGRyYWdnaW5nIGFuZCBzbyBvbi5cclxuICAvLyBJdCBjYWxjdWxhdGVzIHRhYmxlIHJvdyBvZmZzZXRzICh0YWJsZSBncmlkKSBhbmQgc2F2ZXMgdG8gdGhlIFwidGFibGVzXCIgYXJyYXkuXHJcbiAgLy8gVGFibGUgcm93cyB3aXRoIHN0eWxlIGRpc3BsYXk9J25vbmUnIGFyZSBza2lwcGVkLlxyXG4gIGNhbGN1bGF0ZUNlbGxzID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgdmFyIHJvd19vZmZzZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgYm94XHJcbiAgICB2YXIgcG9zaXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgKHRhYmxlIG9yIHRhYmxlIGNvbnRhaW5lcikgaGFzIHBvc2l0aW9uOmZpeGVkIHRoZW4gXCJwYWdlIHNjcm9sbFwiIG9mZnNldCBzaG91bGQgbm90IGJlIGFkZGVkXHJcbiAgICB2YXIgY2I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJveCBvZmZzZXQgZm9yIGNvbnRhaW5lciBib3ggKGNiKVxyXG5cclxuICAgIHdpbmRvd1Njcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlQ2VsbHMoKSBpcyBjYWxsZWQgb24gd2luZG93IHNjcm9sbCBldmVudCBzbyBoZXJlIGlzIHBlcmZlY3QgcGxhY2UgdG8gcmVmcmVzaCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICByb3dfb2Zmc2V0ID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgcm93X29mZnNldCBhcnJheVxyXG4gICAgXHJcbiAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLCAncG9zaXRpb24nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0YWJsZSBzdHlsZSBwb3NpdGlvbiAodG8gZXhjbHVkZSBcInBhZ2Ugc2Nyb2xsXCIgb2Zmc2V0IGZyb20gY2FsY3VsYXRpb24gaWYgbmVlZGVkKVxyXG4gICAgXHJcbiAgICBpZiAocG9zaXRpb24gIT09ICdmaXhlZCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRhYmxlIGRvZXNuJ3QgaGF2ZSBzdHlsZSBwb3NpdGlvbjpmaXhlZCB0aGVuIHRhYmxlIGNvbnRhaW5lciBzaG91bGQgYmUgdGVzdGVkXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUucGFyZW50Tm9kZSwgJ3Bvc2l0aW9uJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSB0YWJsZS5yb3dzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSAgICAgICAgICAgICAgICAgICAgLy8gYmFja3dhcmQgbG9vcCBoYXMgYmV0dGVyIHBlcmZvbWFuY2VcclxuICAgIHtcclxuICAgICAgaWYgKHRhYmxlLnJvd3NbaV0uc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKSAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHJvd3MgdG8gdGhlIG9mZnNldCBhcnJheSBpZiByb3cgaXMgbm90IGhpZGRlblxyXG4gICAgICB7XHJcbiAgICAgICAgcm93X29mZnNldFtpXSA9IGJveE9mZnNldCh0YWJsZS5yb3dzW2ldLCBwb3NpdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgdGFibGUucmVkaXBzLm9mZnNldCA9IGJveE9mZnNldCh0YWJsZSwgcG9zaXRpb24pOyAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHRhYmxlIGluZm9ybWF0aW9ucyAodGFibGUgb2Zmc2V0IGFuZCByb3cgb2Zmc2V0cylcclxuICAgIHRhYmxlLnJlZGlwcy5yb3dfb2Zmc2V0ID0gcm93X29mZnNldDtcclxuXHJcbiAgICBkaXZCb3ggPSBib3hPZmZzZXQoZHJhZ0NvbnRhaW5lcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBib3ggb2Zmc2V0IGZvciB0aGUgZGl2IGlkPXJlZGlwcy1kcmFnXHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2Nyb2xsRGF0YS5jb250YWluZXIubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhcyBpZiBuZWVkZWRcclxuICAgIHtcclxuICAgICAgcG9zaXRpb24gPSBnZXRTdHlsZShzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5kaXYsICdwb3NpdGlvbicpOyAgICAgLy8gc2V0IGNvbnRhaW5lciBib3ggc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgcGFnZSBzY3JvbGwgb2Zmc2V0IGZyb20gY2FsY3VsYXRpb24gaWYgbmVlZGVkKVxyXG4gICAgICBjYiA9IGJveE9mZnNldChzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5kaXYsIHBvc2l0aW9uLCBmYWxzZSk7ICAgICAvLyBnZXQgRElWIGNvbnRhaW5lciBvZmZzZXQgd2l0aCBvciB3aXRob3V0IFwicGFnZSBzY3JvbGxcIiBhbmQgZXhjbHVkZWQgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBjb250ZW50XHJcbiAgICAgIFxyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5vZmZzZXQgPSBjYjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzXHJcbiAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2ldLm1pZHN0WCA9IChjYlsxXSArIGNiWzNdKSAvIDI7XHJcbiAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2ldLm1pZHN0WSA9IChjYlswXSArIGNiWzJdKSAvIDI7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIHJldHVybnMgY3VycmVudCBwYWdlIHNjcm9sbCB2YWx1ZXMgYXMgYXJyYXkgKFggYW5kIFkgYXhpcykuXHJcbiAgZ2V0U2Nyb2xsUG9zaXRpb24gPSBmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICB2YXIgc2Nyb2xsWSA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgLy92YXIgc2Nyb2xsWCA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcclxuICAgIHZhciBzY3JvbGxYID0gMDtcclxuXHJcbiAgICByZXR1cm4gWyBzY3JvbGxYLCBzY3JvbGxZIF07XHJcbiAgfTtcclxuXHJcbiAgLy8gSG9yaXpvbnRhbCBhdXRvIHNjcm9sbCBtZXRob2QuICBAcGFyYW0ge0hUTUxFbGVtZW50fSBzbyBXaW5kb3cgb3IgRElWIGVsZW1lbnQgKHNvIC0gc2Nyb2xsIG9iamVjdCkuXHJcbiAgYXV0b1Njcm9sbFggPSBmdW5jdGlvbiAoc28pIFxyXG4gIHtcclxuICAgIHZhciBwb3MsICAgICAgLy8gbGVmdCBzdHlsZSBwb3NpdGlvblxyXG4gICAgICBvbGQsICAgICAgLy8gb2xkIHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKG5lZWRlZCBmb3Igd2luZG93IHNjcm9sbGluZylcclxuICAgICAgc2Nyb2xsUG9zaXRpb24sIC8vIGRlZmluZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBtYXhzcCwgICAgICAvLyBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBlZGdlQ3Jvc3NlZCwgIC8vIGNyb3NzZWQgZWRnZSBmb3Igd2luZG93IGFuZCBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICBYID0gcG9pbnRlci54LCAgLy8gZGVmaW5lIHBvaW50ZXIgWCBwb3NpdGlvblxyXG4gICAgICBZID0gcG9pbnRlci55OyAgLy8gZGVmaW5lIHBvaW50ZXIgWSBwb3NpdGlvblxyXG4gICAgLy8gaWYgbW91c2V1cCB0aGVuIHN0b3AgaGFuZGxpbmcgXCJjdXJyZW50IGNlbGxcIlxyXG4gICAgaWYgKGVkZ2UuZmxhZy54ID4gMCkge1xyXG4gICAgICAvLyBjYWxjdWxhdGUgY2VsbCAoYXV0b3Njcm9sbCBpcyB3b3JraW5nKVxyXG4gICAgICBjYWxjdWxhdGVDZWxscygpO1xyXG4gICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSByb3cgYW5kIHRhYmxlIGNlbGxcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTtcclxuICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCBpZiBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSBESVYgaWQ9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICAgIGlmIChYIDwgZGl2Qm94WzFdICYmIFggPiBkaXZCb3hbM10gJiYgWSA8IGRpdkJveFsyXSAmJiBZID4gZGl2Qm94WzBdKSB7XHJcbiAgICAgICAgY2VsbENoYW5nZWQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gc2F2ZSBzY3JvbGwgb2JqZWN0IHRvIHRoZSBnbG9iYWwgdmFyaWFibGUgZm9yIHRoZSBmaXJzdCBjYWxsIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlXHJcbiAgICAvLyByZWN1cnNpdmUgY2FsbHMgd2lsbCBub3QgZW50ZXIgdGhpcyBjb2RlIGFuZCByZWZlcmVuY2UgdG8gdGhlIHNjcm9sbERhdGEub2JqIHdpbGwgYmUgcHJlc2VydmVkXHJcbiAgICBpZiAodHlwZW9mKHNvKSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgc2Nyb2xsRGF0YS5vYmogPSBzbztcclxuICAgIH1cclxuICAgIC8vIHdpbmRvdyBhdXRvc2Nyb2xsIChkZWZpbmUgY3VycmVudCwgb2xkIGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gb2xkID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVswXTtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLndpZHRoIC0gc2NyZWVuLndpZHRoO1xyXG4gICAgICBlZGdlQ3Jvc3NlZCA9IGVkZ2UucGFnZS54O1xyXG4gICAgfVxyXG4gICAgLy8gc2Nyb2xsYWJsZSBjb250YWluZXIgKGRlZmluZSBjdXJyZW50IGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIGVsc2Uge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IHNjcm9sbERhdGEub2JqLnNjcm9sbExlZnQ7XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsV2lkdGggLSBzY3JvbGxEYXRhLm9iai5jbGllbnRXaWR0aDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLmRpdi54O1xyXG4gICAgfVxyXG4gICAgLy8gaWYgc2Nyb2xsaW5nIGlzIHBvc3NpYmxlXHJcbiAgICBpZiAoZWRnZS5mbGFnLnggPiAwICYmICgoZWRnZUNyb3NzZWQgPCAwICYmIHNjcm9sbFBvc2l0aW9uID4gMCkgfHwgKGVkZ2VDcm9zc2VkID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA8IG1heHNwKSkpIHtcclxuICAgICAgLy8gaWYgb2JqZWN0IGlzIHdpbmRvd1xyXG4gICAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykge1xyXG4gICAgICAgIC8vIHNjcm9sbCB3aW5kb3dcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoZWRnZUNyb3NzZWQsIDApO1xyXG4gICAgICAgIC8vIGdldCBuZXcgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAoYWZ0ZXIgc2Nyb2xsaW5nKVxyXG4gICAgICAgIC8vIGJlY2F1c2UgYXQgcGFnZSB0b3Agb3IgYm90dG9tIGVkZ2VZIGNhbiBiZSBiaWdnZXIgdGhlbiB0aGUgcmVzdCBvZiBzY3JvbGxpbmcgYXJlYVxyXG4gICAgICAgIC8vIGl0IHdpbGwgYmUgbmljZSB0byBrbm93IGhvdyBtdWNoIHdhcyB3aW5kb3cgc2Nyb2xsZWQgYWZ0ZXIgc2Nyb2xsQnkgY29tbWFuZFxyXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVswXTtcclxuICAgICAgICAvLyBnZXQgY3VycmVudCBvYmplY3QgdG9wIHN0eWxlXHJcbiAgICAgICAgcG9zID0gcGFyc2VJbnQob2JqLnN0eWxlLmxlZnQsIDEwKTtcclxuICAgICAgICBpZiAoaXNOYU4ocG9zKSkge1xyXG4gICAgICAgICAgcG9zID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gb3Igc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2Nyb2xsRGF0YS5vYmouc2Nyb2xsTGVmdCArPSBlZGdlQ3Jvc3NlZDtcclxuICAgICAgfVxyXG4gICAgICAvLyByZWN1cnNpdmUgYXV0b3Njcm9sbCBjYWxsXHJcbiAgICAgIHNldFRpbWVvdXQoYXV0b1Njcm9sbFgsIFJFRElQUy5kcmFnLnNjcm9sbC5zcGVlZCk7XHJcbiAgICB9XHJcbiAgICAvLyBhdXRvc2Nyb2xsIGlzIGVuZGVkOiBlbGVtZW50IGlzIG91dCBvZiB0aGUgcGFnZSBlZGdlIG9yIG1heGltdW0gcG9zaXRpb24gaXMgcmVhY2hlZCAobGVmdCBvciByaWdodClcclxuICAgIGVsc2Uge1xyXG4gICAgICAvLyByZXR1cm4gb25zY3JvbGwgZXZlbnQgaGFuZGxlciAodG8gd2luZG93IG9yIGRpdiBlbGVtZW50KVxyXG4gICAgICBSRURJUFMuZXZlbnQuYWRkKHNjcm9sbERhdGEub2JqLCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAvLyByZXNldCBhdXRvIHNjcm9sbCBmbGFnIFhcclxuICAgICAgZWRnZS5mbGFnLnggPSAwO1xyXG4gICAgICAvLyByZXNldCBjdXJyZW50IGNlbGwgcG9zaXRpb25cclxuICAgICAgY3VycmVudENlbGwgPSBbMCwgMCwgMCwgMF07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gVmVydGljYWwgYXV0byBzY3JvbGwgbWV0aG9kLiAgQHBhcmFtIHtIVE1MRWxlbWVudH0gc28gV2luZG93IG9yIERJViBlbGVtZW50IChzbyAtIHNjcm9sbCBvYmplY3QpLlxyXG4gIGF1dG9TY3JvbGxZID0gZnVuY3Rpb24gKHNvKSBcclxuICB7XHJcbiAgICB2YXIgcG9zLCAgICAgIC8vIHRvcCBzdHlsZSBwb3NpdGlvblxyXG4gICAgICBvbGQsICAgICAgLy8gb2xkIHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKG5lZWRlZCBmb3Igd2luZG93IHNjcm9sbGluZylcclxuICAgICAgc2Nyb2xsUG9zaXRpb24sIC8vIGRlZmluZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBtYXhzcCwgICAgICAvLyBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBlZGdlQ3Jvc3NlZCwgIC8vIGNyb3NzZWQgZWRnZSBmb3Igd2luZG93IGFuZCBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICBYID0gcG9pbnRlci54LCAgLy8gZGVmaW5lIHBvaW50ZXIgWCBwb3NpdGlvblxyXG4gICAgICBZID0gcG9pbnRlci55OyAgLy8gZGVmaW5lIHBvaW50ZXIgWSBwb3NpdGlvblxyXG4gICAgXHJcbiAgICBpZiAoZWRnZS5mbGFnLnkgPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG1vdXNldXAgdGhlbiBzdG9wIGhhbmRsaW5nIFwiY3VycmVudCBjZWxsXCJcclxuICAgIHtcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGNlbGwgKGF1dG9zY3JvbGwgaXMgd29ya2luZylcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUgcm93IGFuZCB0YWJsZSBjZWxsXHJcbiAgICAgIFxyXG4gICAgICBpZiAoWCA8IGRpdkJveFsxXSAmJiBYID4gZGl2Qm94WzNdICYmIFkgPCBkaXZCb3hbMl0gJiYgWSA+IGRpdkJveFswXSkgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsIGlmIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIERJViBpZD1cInJlZGlwcy1kcmFnXCJcclxuICAgICAge1xyXG4gICAgICAgIGNlbGxDaGFuZ2VkKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gc2F2ZSBzY3JvbGwgb2JqZWN0IHRvIHRoZSBnbG9iYWwgdmFyaWFibGUgZm9yIHRoZSBmaXJzdCBjYWxsIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlLCByZWN1cnNpdmUgY2FsbHMgd2lsbCBub3QgZW50ZXIgdGhpcyBjb2RlIGFuZCByZWZlcmVuY2UgdG8gdGhlIHNjcm9sbERhdGEub2JqIHdpbGwgYmUgcHJlc2VydmVkXHJcbiAgICBpZiAodHlwZW9mKHNvKSA9PT0gJ29iamVjdCcpIFxyXG4gICAge1xyXG4gICAgICBzY3JvbGxEYXRhLm9iaiA9IHNvO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpbmRvdyBhdXRvc2Nyb2xsIChkZWZpbmUgY3VycmVudCwgb2xkIGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBvbGQgPSBnZXRTY3JvbGxQb3NpdGlvbigpWzFdO1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEuaGVpZ2h0IC0gc2NyZWVuLmhlaWdodDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLnBhZ2UueTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsYWJsZSBjb250YWluZXIgKGRlZmluZSBjdXJyZW50IGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxUb3A7XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsRGF0YS5vYmouY2xpZW50SGVpZ2h0O1xyXG4gICAgICBlZGdlQ3Jvc3NlZCA9IGVkZ2UuZGl2Lnk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIGlmIHNjcm9sbGluZyBpcyBwb3NzaWJsZVxyXG4gICAgaWYgKGVkZ2UuZmxhZy55ID4gMCAmJiAoKGVkZ2VDcm9zc2VkIDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA+IDApIHx8IChlZGdlQ3Jvc3NlZCA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPCBtYXhzcCkpKSBcclxuICAgIHtcclxuICAgICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgb2JqZWN0IGlzIHdpbmRvd1xyXG4gICAgICB7XHJcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KDAsIGVkZ2VDcm9zc2VkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjcm9sbCB3aW5kb3dcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKClbMV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IG5ldyB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChhZnRlciBzY3JvbGxpbmcpLCBiZWNhdXNlIGF0IHBhZ2UgdG9wIG9yIGJvdHRvbSBlZGdlWSBjYW4gYmUgYmlnZ2VyIHRoZW4gdGhlIHJlc3Qgb2Ygc2Nyb2xsaW5nIGFyZWEsIGl0IHdpbGwgYmUgbmljZSB0byBrbm93IGhvdyBtdWNoIHdhcyB3aW5kb3cgc2Nyb2xsZWQgYWZ0ZXIgc2Nyb2xsQnkgY29tbWFuZFxyXG4gICAgICAgIHBvcyA9IHBhcnNlSW50KG9iai5zdHlsZS50b3AsIDEwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgY3VycmVudCBvYmplY3QgdG9wIHN0eWxlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGlzTmFOKHBvcykpIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIHtcclxuICAgICAgICBzY3JvbGxEYXRhLm9iai5zY3JvbGxUb3AgKz0gZWRnZUNyb3NzZWQ7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHNldFRpbWVvdXQoYXV0b1Njcm9sbFksIFJFRElQUy5kcmFnLnNjcm9sbC5zcGVlZCk7ICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZSBhdXRvc2Nyb2xsIGNhbGxcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXV0b3Njcm9sbCBpcyBlbmRlZDogZWxlbWVudCBpcyBvdXQgb2YgdGhlIHBhZ2UgZWRnZSBvciBtYXhpbXVtIHBvc2l0aW9uIGlzIHJlYWNoZWQgKHRvcCBvciBib3R0b20pXHJcbiAgICB7XHJcbiAgICAgIFJFRElQUy5ldmVudC5hZGQoc2Nyb2xsRGF0YS5vYmosICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgIC8vIHJldHVybiBvbnNjcm9sbCBldmVudCBoYW5kbGVyICh0byB3aW5kb3cgb3IgZGl2IGVsZW1lbnQpXHJcbiAgICAgIGVkZ2UuZmxhZy55ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGF1dG8gc2Nyb2xsIGZsYWcgWVxyXG4gICAgICBjdXJyZW50Q2VsbCA9IFswLCAwLCAwLCAwXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBjdXJyZW50IGNlbGwgcG9zaXRpb25cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgY29waWVzIGN1c3RvbSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIGVsZW1lbnQgdG8gdGhlIGNsb25lZCBlbGVtZW50IGFuZCBzZXRzIGV2ZW50IGhhbmRsZXJzIChvbm1vdXNlZG93biBhbmQgb25kYmxjbGljaykuXHJcbiAgICogVGhpcyBhY3Rpb24gd2lsbCBiZSB0YWtlbiBvbiBESVYgZWxlbWVudCBpdHNlbGYgYW5kIGFsbCBjaGlsZCBESVYgZWxlbWVudHMuXHJcbiAgICogTmVlZGVkIGluIGNhc2Ugd2hlbiBESVYgZWxlbWVudCBpcyBjbG9uZWQgb3IgUk9XIGlzIGNsb25lZCAoZm9yIGRyYWdnaW5nIG1vZGU9XCJyb3dcIikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gc3JjIFNvdXJjZSBlbGVtZW50IChESVYgb3IgVFIgZWxlbWVudCkuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2xuIENsb25lZCBlbGVtZW50IChESVYgb3IgVFIgZWxlbWVudCkuXHJcbiAgICovXHJcbiAgY29weVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoc3JjLCBjbG4pIFxyXG4gIHtcclxuICAgIHZhciBjb3B5ID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IG1ldGhvZFxyXG4gICAgdmFyIGNoaWxkczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcHJvcGVydGllcyBmb3IgY2hpbGQgZWxlbWVudHMgKHRoaXMgbWV0aG9kIGNhbGxzIFwiY29weVwiIG1ldGhvZClcclxuICAgIFxyXG4gICAgY29weVswXSA9IGZ1bmN0aW9uIChlMSwgZTIpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjb3B5IG1ldGhvZCBmb3IgRElWIGVsZW1lbnRzIChlMSBzb3VyY2UgZWxlbWVudCwgZTIgY2xvbmVkIGVsZW1lbnQpLCBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQwOTQ4MTEvamF2YXNjcmlwdC1jbG9uZW5vZGUtYW5kLXByb3BlcnRpZXNcclxuICAgIHtcclxuICAgICAgaWYgKGUxLnJlZGlwcykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByZWRpcHMgcHJvcGVydHkgZXhpc3RzIGluIHNvdXJjZSBlbGVtZW50LCBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIChyZWRpcHMuZW5hYmxlZCwgIHJlZGlwcy5jb250YWluZXIgLi4uKVxyXG4gICAgICB7XHJcbiAgICAgICAgZTIucmVkaXBzID0ge307XHJcbiAgICAgICAgZTIucmVkaXBzLmVuYWJsZWQgPSBlMS5yZWRpcHMuZW5hYmxlZDtcclxuICAgICAgICBlMi5yZWRpcHMuY29udGFpbmVyID0gZTEucmVkaXBzLmNvbnRhaW5lcjtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZTEucmVkaXBzLmVuYWJsZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb25tb3VzZWRvd24gZXZlbnQgaGFuZGxlciBpZiBzb3VyY2UgZWxlbWVudCBpcyBlbmFibGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcmVnaXN0ZXJFdmVudHMoZTIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29weVsxXSA9IGZ1bmN0aW9uIChlMSwgZTIpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjb3B5IG1ldGhvZCBmb3IgVFIgZWxlbWVudHMgXHJcbiAgICB7XHJcbiAgICAgIGlmIChlMS5yZWRpcHMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVkaXBzIHByb3BlcnR5IGV4aXN0cyBpbiBzb3VyY2UgZWxlbWVudCwgY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVtcHR5Um93IC4uLilcclxuICAgICAge1xyXG4gICAgICAgIGUyLnJlZGlwcyA9IHt9O1xyXG4gICAgICAgIGUyLnJlZGlwcy5lbXB0eVJvdyA9IGUxLnJlZGlwcy5lbXB0eVJvdztcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY2hpbGRzID0gZnVuY3Rpb24gKGUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBtZXRob2QgdG8gY29weSBwcm9wZXJ0aWVzIGZvciBjaGlsZCBlbGVtZW50cyAoaW5wdXQgcGFyYW1ldGVyIGlzIGVsZW1lbnQgaW5kZXggMCAtIERJViwgMSAtIFRSKVxyXG4gICAge1xyXG4gICAgICB2YXIgZWwxLCBlbDI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gb2YgRElWL1RSIGVsZW1lbnRzIGluIHNvdXJjZSBhbmQgY2xvbmVkIGVsZW1lbnRcclxuICAgICAgdmFyIHRuID0gWydESVYnLCAnVFInXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWcgbmFtZVxyXG4gICAgICBcclxuICAgICAgZWwxID0gc3JjLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRuW2VdKTsgICAgICAgICAgICAvLyBjb2xsZWN0IGNoaWxkIERJVi9UUiBlbGVtZW50cyBmcm9tIHRoZSBzb3VyY2UgZWxlbWVudCAocG9zc2libGUgaWYgZGl2IGVsZW1lbnQgY29udGFpbnMgdGFibGUpXHJcbiAgICAgIGVsMiA9IGNsbi5nZXRFbGVtZW50c0J5VGFnTmFtZSh0bltlXSk7ICAgICAgICAgICAgLy8gY29sbGVjdCBjaGlsZCBESVYvVFIgZWxlbWVudHMgZnJvbSBjbG9uZWQgZWxlbWVudFxyXG4gICAgICBcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbDIubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAvLyBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIChyZWRpcHMuZW5hYmxlZCwgIHJlZGlwcy5jb250YWluZXIgLi4uKSBhbmQgc2V0IGV2ZW50IGhhbmRsZXJzIHRvIGNoaWxkIERJViBlbGVtZW50c1xyXG4gICAgICB7XHJcbiAgICAgICAgY29weVtlXShlbDFbaV0sIGVsMltpXSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGlmIChzcmMubm9kZU5hbWUgPT09ICdESVYnKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBzb3VyY2UgZWxlbWVudCBpcyBESVYgZWxlbWVudCB0aGVuIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgZm9yIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGNvcHlbMF0oc3JjLCBjbG4pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoc3JjLm5vZGVOYW1lID09PSAnVFInKSAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHNvdXJjZSBlbGVtZW50IGlzIFRSIGVsZW1lbnQgdGhlbiBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIGZvciBUUiBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGNvcHlbMV0oc3JjLCBjbG4pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjaGlsZHMoMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIGZvciBESVYgY2hpbGQgZWxlbWVudHNcclxuICAgIGNoaWxkcygxKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHByb3BlcnRpZXMgZm9yIFRSIGNoaWxkIGVsZW1lbnRzXHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCB1cGRhdGVzIGNsaW1pdDFfWCBvciBjbGltaXQyX1ggY2xhc3MgbmFtZSAoWCBkZWZpbmVzIGNsb25pbmcgbGltaXQpLlxyXG4gICAqIDx1bD5cclxuICAgKiA8bGk+Y2xpbWl0MV9YIC0gYWZ0ZXIgY2xvbmluZyBYIGVsZW1lbnRzLCBsYXN0IGVsZW1lbnQgd2lsbCBiZSBub3JtYWwgZHJhZy1hYmxlIGVsZW1lbnQ8L2xpPlxyXG4gICAqIDxsaT5jbGltaXQyX1ggLSBhZnRlciBjbG9uaW5nIFggZWxlbWVudHMsIGxhc3QgZWxlbWVudCB3aWxsIHN0YXkgdW5tb3ZhYmxlPC9saT5cclxuICAgKiA8L3VsPlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIEVsZW1lbnQgb24gd2hpY2ggY25hbWUgY2xhc3Mgc2hvdWxkIGJlIHVwZGF0ZWQuXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSB2YWx1ZSBJbmNyZW1lbnQgb3IgZGVjcmVtZW50IGNsaW1pdCB2YWx1ZS5cclxuICAgKi9cclxuICBjbG9uZUxpbWl0ID0gZnVuY3Rpb24gKGVsLCB2YWx1ZSkgXHJcbiAge1xyXG4gICAgdmFyIG1hdGNoQXJyYXk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2ggYXJyYXlcclxuICAgIHZhciBsaW1pdFR5cGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpbWl0IHR5cGUgKDEgLSBjbG9uZSBiZWNvbWVzIFwibm9ybWFsXCIgZHJhZyBlbGVtZW50IGF0IGxhc3Q7IDIgLSBjbG9uZSBlbGVtZW50IHN0YXlzIGltbW92YWJsZSlcclxuICAgIHZhciBsaW1pdDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpbWl0IG51bWJlclxyXG4gICAgdmFyIGNsYXNzZXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xhc3MgbmFtZXMgb2YgY2xvbmUgZWxlbWVudFxyXG4gICAgXHJcbiAgICBjbGFzc2VzID0gZWwuY2xhc3NOYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWFkIGNsYXNzIG5hbWUgZnJvbSBlbGVtZW50XHJcbiAgICBtYXRjaEFycmF5ID0gY2xhc3Nlcy5tYXRjaCgvY2xpbWl0KFxcZClfKFxcZCspLyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoIGNsaW1pdCBjbGFzcyBuYW1lXHJcbiAgICBcclxuICAgIGlmIChtYXRjaEFycmF5ICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIERJViBjbGFzcyBjb250YWlucyBjbGltaXRcclxuICAgIHtcclxuICAgICAgbGltaXRUeXBlID0gcGFyc2VJbnQobWF0Y2hBcnJheVsxXSwgMTApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgbGltaXRUeXBlICgxIG9yIDIpIGFuZCBsaW1pdFxyXG4gICAgICBsaW1pdCA9IHBhcnNlSW50KG1hdGNoQXJyYXlbMl0sIDEwKTtcclxuICAgICAgXHJcbiAgICAgIGlmIChsaW1pdCA9PT0gMCAmJiB2YWx1ZSA9PT0gMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjdXJyZW50IGxpbWl0IGlzIDAgYW5kIHNob3VsZCBiZSBzZXQgdG8gMSB0aGVuIHJldHVybiBcImNsb25pbmdcIiB0byB0aGUgRElWIGVsZW1lbnRcclxuICAgICAge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyByZWRpcHMtY2xvbmUnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIFwicmVkaXBzLWNsb25lXCIgY2xhc3MgdG8gY2xhc3MgYXR0cmlidXRlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGxpbWl0VHlwZSA9PT0gMikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGUgRElWIGVsZW1lbnQgZm9yIGNsaW1pdDIgdHlwZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVuYWJsZURyYWcodHJ1ZSwgZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgbGltaXQgKz0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBsaW1pdCB2YWx1ZVxyXG4gICAgICBjbGFzc2VzID0gY2xhc3Nlcy5yZXBsYWNlKC9jbGltaXRcXGRfXFxkKy9nLCAnY2xpbWl0JyArIGxpbWl0VHlwZSArICdfJyArIGxpbWl0KTsgICAgICAgICAvLyB1cGRhdGUgY2xpbWl0IGNsYXNzIG5hbWUgd2l0aCBuZXcgbGltaXQgdmFsdWVcclxuICAgICAgXHJcbiAgICAgIGlmIChsaW1pdCA8PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXN0IGlmIGxpbWl0IGRyb3BzIHRvIHplcm9cclxuICAgICAge1xyXG4gICAgICAgIGNsYXNzZXMgPSBjbGFzc2VzLnJlcGxhY2UoJ3JlZGlwcy1jbG9uZScsICcnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gbW9yZSBjbG9uaW5nLCBjdXQgb3V0IFwicmVkaXBzLWNsb25lXCIgZnJvbSBjbGFzcyBuYW1lXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGxpbWl0VHlwZSA9PT0gMikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBsaW1pdCB0eXBlIGlzIDIgdGhlbiBkaXNhYmxlIGNsb25lIGVsZW1lbnQgKGl0IHdpbGwgc3RheSBpbiBjZWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVuYWJsZURyYWcoZmFsc2UsIGVsKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgc291cmNlIERJViBlbGVtZW50XHJcbiAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5jbG9uZWRFbmQyKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmNsb25lZEVuZDIgaGFuZGxlclxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmNsb25lZEVuZDEoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQuY2xvbmVkRW5kMSBoYW5kbGVyXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBlbC5jbGFzc05hbWUgPSBub3JtYWxpemUoY2xhc3Nlcyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsaXplIHNwYWNlcyBhbmQgcmV0dXJuIGNsYXNzZXMgdG8gdGhlIGNsb25lIG9iamVjdFxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBhdHRhY2hlcyAvIGRldGFjaGVzIG9ubW91c2Vkb3duLCBvbnRvdWNoc3RhcnQgYW5kIG9uZGJsY2xpY2sgZXZlbnRzIHRvIERJViBlbGVtZW50cyBhbmQgYXR0YWNoZXMgb25zY3JvbGwgZXZlbnQgdG8gdGhlIHNjcm9sbCBjb250YWluZXJzIGluIGluaXRpYWxpemF0aW9uIHBoYXNlLlxyXG4gICAqIEl0IGFsc28gY2FuIGJlIHVzZWQgZm9yIGVsZW1lbnQgaW5pdGlhbGl6YXRpb24gYWZ0ZXIgRElWIGVsZW1lbnQgd2FzIG1hbnVhbGx5IGFkZGVkIHRvIHRoZSB0YWJsZS5cclxuICAgKiBJZiBjbGFzcyBhdHRyaWJ1dGUgb2YgRElWIGNvbnRhaW5lciBjb250YWlucyBcInJlZGlwcy1ub2F1dG9zY3JvbGxcIiBjbGFzcyBuYW1lIHRoZW4gYXV0b1Njcm9sbCBvcHRpb24gd2lsbCBiZSBkaXNhYmxlZC5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW58U3RyaW5nfSBlbmFibGVfZmxhZyBFbmFibGUgLyBkaXNhYmxlIGVsZW1lbnQgKG9yIGVsZW1lbnQgc3VidHJlZSBsaWtlIHRhYmxlLCBkcmFnZ2luZyBjb250YWluZXIgLi4uKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ30gW2VsXSBIVE1MIG5vZGUgb3IgQ1NTIHNlbGVjdG9yIHRvIGVuYWJsZSAvIGRpc2FibGUuIFBhcmFtZXRlciBkZWZpbmVzIGVsZW1lbnQgcmVmZXJlbmNlIG9yIENTUyBzZWxlY3RvciBvZiBESVYgZWxlbWVudHMgdG8gZW5hYmxlIC8gZGlzYWJsZS5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGVuYWJsZSBlbGVtZW50IHdpdGggaWQ9XCJpZDEyM1wiIChlbGVtZW50IGlkIHNob3VsZCBiZSBhIHN0cmluZyBhY2NvcmRpbmcgdG8gRE9NIGRvY3MpXHJcbiAgICogcmQuZW5hYmxlRHJhZyh0cnVlLCAnI2lkMTIzJyk7XHJcbiAgICpcclxuICAgKiAvLyBvciBpbml0IG1hbnVhbGx5IGFkZGVkIGVsZW1lbnQgd2l0aCBrbm93biBpZFxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcodHJ1ZSwgJyNpZDIzNCcpO1xyXG4gICAqXHJcbiAgICogLy8gZGlzYWJsZSBhbGwgRElWIGVsZW1lbnRzIGluIGRyYWcxIHN1YnRyZWVcclxuICAgKiByZC5lbmFibGVEcmFnKGZhbHNlLCAnI2RyYWcxIGRpdicpXHJcbiAgICpcclxuICAgKiAvLyBpbml0IERJViBlbGVtZW50cyBpbiBkcmFnZ2luZyBhcmVhIChpbmNsdWRpbmcgbmV3bHkgYWRkZWQgRElWIGVsZW1lbnQpXHJcbiAgICogLy8gRElWIGluaXRpYWxpemF0aW9uIHdpbGwgd29yayBpZiB0YWJsZSBub2RlIHN0YXlzIGludGFjdCAodGFibGUgaXMgbm90IGdlbmVyYXRlZCBkeW5hbWljYWxseSlcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKCdpbml0Jyk7XHJcbiAgICpcclxuICAgKiAvLyBpbml0IGFkZGVkIGVsZW1lbnQgd2l0aCByZWZlcmVuY2UgbXlFbGVtZW50XHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZyh0cnVlLCBteUVsZW1lbnQpO1xyXG4gICAqXHJcbiAgICogLy8gZGlzYWJsZSBhbGwgRElWIGVsZW1lbnRzIHdpdGhpbiBURCAodGQgaXMgcmVmZXJlbmNlIHRvIFREIG5vZGUpXHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZyhmYWxzZSwgdGQpO1xyXG4gICAqL1xyXG4gIGVuYWJsZURyYWcgPSBmdW5jdGlvbiAoZW5hYmxlX2ZsYWcsIGVsKSBcclxuICB7XHJcbiAgICB2YXIgZGl2ID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29sbGVjdGlvbiBvZiBkaXYgZWxlbWVudHMgY29udGFpbmVkIGluIHRhYmxlcyBvciBvbmUgZGl2IGVsZW1lbnRcclxuICAgIFxyXG4gICAgaWYgKGVsID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3QgRElWIGVsZW1lbnRzIGluc2lkZSBjdXJyZW50IGRyYWcgYXJlYSAoZHJhZyBlbGVtZW50cyBhbmQgc2Nyb2xsIGNvbnRhaW5lcnMpIGUuZy4gZW5hYmxlRHJhZyh0cnVlKVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBkcmFnQ29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKTtcclxuICAgIH0gICAgXHJcbiAgICBlbHNlIGlmICh0eXBlb2YoZWwpID09PSAnc3RyaW5nJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJlbFwiIGlzIHN0cmluZyAoQ1NTIHNlbGVjdG9yKSAtIGl0IGNhbiBjb2xsZWN0IG9uZSBESVYgZWxlbWVudCAobGlrZSBcIiNkMTJcIikgb3IgbWFueSBESVYgZWxlbWVudHMgKGxpa2UgXCIjZHJhZzEgZGl2XCIpXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWwpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mKGVsKSA9PT0gJ29iamVjdCcgJiYgKGVsLm5vZGVOYW1lICE9PSAnRElWJyB8fCBlbC5jbGFzc05hbWUuaW5kZXhPZigncmVkaXBzLWRyYWcnKSA9PT0gLTEpKSAgICAgIC8vIFwiZWxcIiBpcyBub2RlIHJlZmVyZW5jZSB0byBlbGVtZW50IHRoYXQgaXMgbm90IERJViBjbGFzcz1cInJlZGlwcy1kcmFnXCJcclxuICAgIHtcclxuICAgICAgZGl2ID0gZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpO1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vbmUgb2YgYWJvdmUsIGVsIGlzIERJViBjbGFzcz1cInJlZGlwcy1kcmFnXCIsIHNvIHByZXBhcmUgYXJyYXkgd2l0aCBvbmUgRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgZGl2WzBdID0gZWw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGVuYWJsZURpdnMoZW5hYmxlX2ZsYWcsIGRpdik7XHJcbiAgfTtcclxuICBcclxuICBcclxuICBlbmFibGVEaXZzID0gZnVuY3Rpb24oZW5hYmxlX2ZsYWcsIGRpdilcclxuICB7XHJcbiAgICAgdmFyIGksIGosIGssICAgIC8vIGxvY2FsIHZhcmlhYmxlcyB1c2VkIGluIGxvb3BcclxuICAgICAgdGJscyA9IFtdLCAgICAvLyBjb2xsZWN0aW9uIG9mIHRhYmxlcyBpbnNpZGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgYm9yZGVyU3R5bGUsICAvLyBib3JkZXIgc3R5bGUgKHNvbGlkIG9yIGRvdHRlZClcclxuICAgICAgb3BhY2l0eSwgICAgLy8gKGludGVnZXIpIHNldCBvcGFjaXR5IGZvciBlbmFibGVkIC8gZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgY3Vyc29yLCAgICAgLy8gY3Vyc29yIHN0eWxlIChtb3ZlIG9yIGF1dG8pXHJcbiAgICAgIG92ZXJmbG93LCAgIC8vIGNzcyB2YWx1ZSBvZiBvdmVyZmxvdyBwcm9wZXJ0eVxyXG4gICAgICBhdXRvc2Nyb2xsLCAgIC8vIGJvb2xlYW4gLSBpZiBzY3JvbGxhYmxlIGNvbnRhaW5lciB3aWxsIGhhdmUgYXV0b3Njcm9sbCBvcHRpb24gKGRlZmF1bHQgaXMgdHJ1ZSlcclxuICAgICAgZW5hYmxlZCwgICAgLy8gZW5hYmxlZCBwcm9wZXJ0eSAodHJ1ZSBvciBmYWxzZSlcclxuICAgICAgY2IsICAgICAgIC8vIGJveCBvZmZzZXQgZm9yIGNvbnRhaW5lciBib3ggKGNiKVxyXG4gICAgICBwb3NpdGlvbiwgICAvLyBpZiB0YWJsZSBjb250YWluZXIgaGFzIHBvc2l0aW9uOmZpeGVkIHRoZW4gXCJwYWdlIHNjcm9sbFwiIG9mZnNldCBzaG91bGQgbm90IGJlIGFkZGVkXHJcbiAgICAgIHJlZ2V4RHJhZyA9IC9cXGJyZWRpcHMtZHJhZ1xcYi9pLCAvLyByZWd1bGFyIGV4cHJlc3Npb24gdG8gc2VhcmNoIFwicmVkaXBzLWRyYWdcIiBjbGFzcyBuYW1lXHJcbiAgICAgIHJlZ2V4Tm9BdXRvc2Nyb2xsID0gL1xcYnJlZGlwcy1ub2F1dG9zY3JvbGxcXGIvaTsgLy8gcmVndWxhciBleHByZXNzaW9uIHRvIHNlYXJjaCBcInJlZGlwcy1ub2F1dG9zY3JvbGxcIiBjbGFzcyBuYW1lICAgXHJcblxyXG4gICAgb3BhY2l0eSA9IFJFRElQUy5kcmFnLnN0eWxlLm9wYWNpdHlEaXNhYmxlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBkaXNhYmxlZCBlbGVtZW50cyBmcm9tIHB1YmxpYyBwcm9wZXJ0eSBcIm9wYWNpdHlEaXNhYmxlZFwiXHJcbiAgICBcclxuICAgIGlmIChlbmFibGVfZmxhZyA9PT0gdHJ1ZSB8fCBlbmFibGVfZmxhZyA9PT0gJ2luaXQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc3R5bGVzIGZvciBlbmFibGVkIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGJvcmRlclN0eWxlID0gUkVESVBTLmRyYWcuc3R5bGUuYm9yZGVyRW5hYmxlZDtcclxuICAgICAgY3Vyc29yID0gJ21vdmUnO1xyXG4gICAgICBlbmFibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIHNldCBzdHlsZXMgZm9yIGRpc2FibGVkIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGJvcmRlclN0eWxlID0gUkVESVBTLmRyYWcuc3R5bGUuYm9yZGVyRGlzYWJsZWQ7XHJcbiAgICAgIGN1cnNvciA9ICdhdXRvJztcclxuICAgICAgZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfSAgICBcclxuICAgIFxyXG4gICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBkaXYubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW4gbG9vcCB0aGF0IGdvZXMgdGhyb3VnaCBhbGwgRElWIGVsZW1lbnRzXHJcbiAgICB7ICAgIFxyXG4gICAgICBpZiAocmVnZXhEcmFnLnRlc3QoZGl2W2ldLmNsYXNzTmFtZSkpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIERJViBlbGVtZW50IGNvbnRhaW5zIFwicmVkaXBzLWRyYWdcIiBjbGFzcyBuYW1lXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZW5hYmxlX2ZsYWcgPT09ICdpbml0JyB8fCBkaXZbaV0ucmVkaXBzID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAvLyBhZGQgcmVmZXJlbmNlIHRvIHRoZSBESVYgY29udGFpbmVyIChpbml0aWFsaXphdGlvbiBvciBuZXdseSBhZGRlZCBlbGVtZW50IHRvIHRoZSB0YWJsZSkgdGhpcyBwcm9wZXJ0eSBzaG91bGQgbm90IGJlIGNoYW5nZWQgaW4gbGF0ZXIgZWxlbWVudCBlbmFibGUvZGlzYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRpdltpXS5yZWRpcHMgPSB7fTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBcInByb3BlcnR5IG9iamVjdFwiIGluIHdoaWNoIGFsbCBjdXN0b20gcHJvcGVydGllcyB3aWxsIGJlIHNhdmVkXHJcbiAgICAgICAgICBkaXZbaV0ucmVkaXBzLmNvbnRhaW5lciA9IGRyYWdDb250YWluZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVuYWJsZV9mbGFnID09PSB0cnVlICYmIHR5cGVvZihvcGFjaXR5KSA9PT0gJ251bWJlcicpICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvcGFjaXR5IG1hc2tcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUub3BhY2l0eSA9ICcnO1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLmZpbHRlciA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbmFibGVfZmxhZyA9PT0gZmFsc2UgJiYgdHlwZW9mKG9wYWNpdHkpID09PSAnbnVtYmVyJykgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUuZmlsdGVyID0gJ2FscGhhKG9wYWNpdHk9JyArIG9wYWNpdHkgKyAnKSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlZ2lzdGVyRXZlbnRzKGRpdltpXSwgZW5hYmxlZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVyIGZvciBESVYgZWxlbWVudFxyXG4gICAgICAgIFxyXG4gICAgICAgIGRpdltpXS5zdHlsZS5ib3JkZXJTdHlsZSA9IGJvcmRlclN0eWxlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzdHlsZXMgZm9yIERJViBlbGVtZW50XHJcbiAgICAgICAgZGl2W2ldLnN0eWxlLmN1cnNvciA9IGN1cnNvcjtcclxuICAgICAgICBkaXZbaV0ucmVkaXBzLmVuYWJsZWQgPSBlbmFibGVkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZW5hYmxlZCBwcm9wZXJ0eSB0byB0aGUgRElWIGVsZW1lbnQgKHRydWUgb3IgZmFsc2UpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoZW5hYmxlX2ZsYWcgPT09ICdpbml0JykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhdHRhY2ggb25zY3JvbGwgZXZlbnQgdG8gdGhlIERJViBlbGVtZW50IGluIGluaXQgcGhhc2Ugb25seSBpZiBESVYgZWxlbWVudCBoYXMgb3ZlcmZsb3cgb3RoZXIgdGhhbiBkZWZhdWx0IHZhbHVlICd2aXNpYmxlJyBhbmQgdGhhdCBtZWFucyBzY3JvbGxhYmxlIERJViBjb250YWluZXJcclxuICAgICAge1xyXG4gICAgICAgIG92ZXJmbG93ID0gZ2V0U3R5bGUoZGl2W2ldLCAnb3ZlcmZsb3cnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzayBmb3Igb3ZlcmZsb3cgc3R5bGVcclxuICAgICAgICBcclxuICAgICAgICBpZiAob3ZlcmZsb3cgIT09ICd2aXNpYmxlJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgaXMgc2Nyb2xsYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFJFRElQUy5ldmVudC5hZGQoZGl2W2ldLCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb25zY3JvbGwgZXZlbnQgaGFuZGxlciBmb3Igc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUoZGl2W2ldLCAncG9zaXRpb24nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29udGFpbmVyIGJveCBzdHlsZSBwb3NpdGlvbiAodG8gZXhjbHVkZSBwYWdlIHNjcm9sbCBvZmZzZXQgZnJvbSBjYWxjdWxhdGlvbiBpZiBuZWVkZWQpXHJcbiAgICAgICAgICBjYiA9IGJveE9mZnNldChkaXZbaV0sIHBvc2l0aW9uLCBmYWxzZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IERJViBjb250YWluZXIgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIHNjcm9sbCBwb3NpdGlvbiBvZiB0aGUgY29udGVudFxyXG4gICAgICAgICAgYXV0b3Njcm9sbCA9ICFyZWdleE5vQXV0b3Njcm9sbC50ZXN0KGRpdltpXS5jbGFzc05hbWUpOyAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgcmVkaXBzLW5vYXV0b3Njcm9sbCBvcHRpb25cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbal0gPSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXNcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZGl2IDogZGl2W2ldLCAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBvZmZzZXQgOiBjYiwgICAgICAgICAgICAgICAgICAvLyBib3ggb2Zmc2V0IG9mIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBtaWRzdFggOiAoY2JbMV0gKyBjYlszXSkgLyAyLCAvLyBtaWRkbGUgWFxyXG4gICAgICAgICAgICBtaWRzdFkgOiAoY2JbMF0gKyBjYlsyXSkgLyAyLCAvLyBtaWRkbGUgWVxyXG4gICAgICAgICAgICBhdXRvc2Nyb2xsIDogYXV0b3Njcm9sbCAgICAgICAvLyBhdXRvc2Nyb2xsIGVuYWJsZWQgb3IgZGlzYWJsZWQgKHRydWUgb3IgZmFsc2UpXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0YmxzID0gZGl2W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0YWJsZScpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZvciB0YWJsZXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGZvciAoayA9IDA7IGsgPCB0YmxzLmxlbmd0aDsgaysrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIGdvZXMgdGhyb3VnaCBmb3VuZCB0YWJsZXMgaW5zaWRlIHNjcm9sbGFibGUgYXJlYVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB0YmxzW2tdLnNjYSA9IHNjcm9sbERhdGEuY29udGFpbmVyW2pdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhIHJlZmVyZW5jZSB0byB0aGUgY29ycmVzcG9uZGluZyBzY3JvbGxhYmxlIGFyZWFcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaisrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluY3JlYXNlIHNjcm9sbGFibGUgY29udGFpbmVyIGNvdW50ZXJcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gICBcclxuICB9O1xyXG5cclxuICAvL01ldGhvZCByZXR1cm5zIHN0eWxlIHZhbHVlIGZvciByZXF1ZXN0ZWQgSFRNTCBlbGVtZW50IGFuZCBzdHlsZSBuYW1lLlxyXG4gIGdldFN0eWxlID0gZnVuY3Rpb24gKGVsLCBzdHlsZV9uYW1lKSBcclxuICB7XHJcbiAgICBpZiAoZWwgJiYgZWwuY3VycmVudFN0eWxlKSBcclxuICAgIHtcclxuICAgICAgcmV0dXJuIGVsLmN1cnJlbnRTdHlsZVtzdHlsZV9uYW1lXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGVsICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKSBcclxuICAgIHtcclxuICAgICAgcmV0dXJuIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpW3N0eWxlX25hbWVdO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIGZpbmQgdGhlIGZpcnN0IHBhcmVudCBlbGVtZW50IG9mIGVsIHdpdGggdGhlIHRhZyBuYW1lIHRhZ19uYW1lIFxyXG4gIGZpbmRQYXJlbnQgPSBmdW5jdGlvbiAodGFnX25hbWUsIGVsKSBcclxuICB7XHJcbiAgICBlbCA9IGVsLnBhcmVudE5vZGU7ICAgICAgICAgICAgICAgICAvLyBzZXQgXCJlbFwiIHRvIHRoZSBuZXh0IG5vZGUgKHRvIHByZXZlbnQgZmluZGluZyBub2RlIGl0c2VsZilcclxuICAgIFxyXG4gICAgd2hpbGUgKGVsKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnQgbG9vcFxyXG4gICAge1xyXG4gICAgICBpZiAoZWwubm9kZU5hbWUgPT09IHRhZ19uYW1lKSAgICAgLy8gbm9kZSBpcyBmb3VuZFxyXG4gICAgICB7XHJcbiAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAvLyBub2RlIGlzIGZvdW5kIGFuZCBsb29wIGNhbiBiZSBlbmRlZFxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBlbCA9IGVsLnBhcmVudE5vZGU7ICAgICAgICAgICAgICAgLy8gbW92ZSBvbiB0byB0aGUgcGFyZW50IG5vZGVcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGVsO1xyXG4gIH07XHJcblxyXG4gIC8vRnVuY3Rpb24gcmV0dXJucyBhIHN0cmluZyBpbiB3aGljaCBhbGwgb2YgdGhlIHByZWNlZGluZyBhbmQgdHJhaWxpbmcgd2hpdGUgc3BhY2UgaGFzIGJlZW4gcmVtb3ZlZCwgYW5kIGluIHdoaWNoIGFsbCBpbnRlcm5hbCBzZXF1ZW5jZXMgb2Ygd2hpdGUgaXMgcmVwbGFjZWQgd2l0aCBvbmUgd2hpdGUgc3BhY2UuXHJcbiAgbm9ybWFsaXplID0gZnVuY3Rpb24gKHN0cikgXHJcbiAge1xyXG4gICAgaWYgKHN0ciAhPT0gdW5kZWZpbmVkKSBcclxuICAgIHtcclxuICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKS5yZXBsYWNlKC9cXHN7Mix9L2csICcgJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBzdHI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBub3JtYWxpemVkIHN0cmluZyAod2l0aG91dCBwcmVjZWRpbmcgYW5kIHRyYWlsaW5nIHNwYWNlcylcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2Qgc2V0cyBvcGFjaXR5IHRvIHRhYmxlIHJvdyBvciBkZWxldGVzIHJvdyBjb250ZW50LlxyXG4gICAqIElucHV0IHBhcmFtZXRlciBcImVsXCIgaXMgcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgb3IgcmVmZXJlbmNlIHRvIHRoZSBjbG9uZWQgbWluaSB0YWJsZSAod2hlbiByb3cgaXMgbW92ZWQpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U3RyaW5nfSBlbCBJZCBvZiByb3cgaGFuZGxlciAoZGl2IGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiKSBvciByZWZlcmVuY2UgdG8gZWxlbWVudCAoc291cmNlIHJvdyBvciBtaW5pIHRhYmxlKS5cclxuICAgKiBAcGFyYW0ge0ludGVnZXJ8U3RyaW5nfSBvcGFjaXR5IE9wYWNpdHkgbGV2ZWwgKGZyb20gMCB0byAxMDApIG9yIFwiZW1wdHlcIiAodGhlbiBjb250ZW50IG9mIHRhYmxlIGNlbGxzIGluIHJvdyB3aWxsIGJlIGRlbGV0ZWQgLSBpbiB0aGF0IGNhc2UgZmlyc3QgcGFyYW1ldGVyIHNob3VsZCBiZSBUUikuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtjb2xvcl0gQmFja2dyb3VuZCBjb2xvci5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIFJFRElQUy5kcmFnIGxpYnJhcnlcclxuICAgKiByZCA9IFJFRElQUy5kcmFnO1xyXG4gICAqXHJcbiAgICogLy8gbWFrZSByb3cgc2VtaS10cmFuc3BhcmVudFxyXG4gICAqIHJkLnJvd09wYWNpdHkocm93T2JqLCA1MCk7XHJcbiAgICpcclxuICAgKiAvLyBzZXQgcm93IGFzIGVtcHR5IGFuZCB3aGl0ZSAoY29udGVudCBpbiB0YWJsZSBjZWxscyB3aWxsIGJlIGRlbGV0ZWQpXHJcbiAgICogcmQucm93T3BhY2l0eShyb3dPYmosICdlbXB0eScsICdXaGl0ZScpO1xyXG4gICAqL1xyXG4gIHJvd09wYWNpdHkgPSBmdW5jdGlvbiAoZWwsIG9wYWNpdHksIGNvbG9yKSBcclxuICB7XHJcbiAgICB2YXIgdGROb2RlTGlzdDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhYmxlIGNlbGxzXHJcbiAgICB2YXIgaSwgajsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgdmFyaWFibGVzXHJcbiAgICBcclxuICAgIGlmICh0eXBlb2YoZWwpID09PSAnc3RyaW5nJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaW5wdXQgcGFyYW1ldGVyIGlzIHN0cmluZyAodGhpcyBzaG91bGQgYmUgZWxlbWVudCBpZCksIHRoZW4gc2V0IGVsZW1lbnQgcmVmZXJlbmNlXHJcbiAgICB7XHJcbiAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpO1xyXG4gICAgICBlbCA9IGZpbmRQYXJlbnQoJ1RBQkxFJywgZWwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbCBjb3VsZCBiZSByZWZlcmVuY2Ugb2YgdGhlIERJViBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIiAocm93IGhhbmRsZXIpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChlbC5ub2RlTmFtZSA9PT0gJ1RSJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWwgaXMgVFIsIHRoZW4gc2V0IGJhY2tncm91bmQgY29sb3IgdG8gZWFjaCBjZWxsIChpZiBuZWVkZWQpIGFuZCBhcHBseSBvcGFjaXR5XHJcbiAgICB7XHJcbiAgICAgIHRkTm9kZUxpc3QgPSBlbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGQnKTsgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3QgdGFibGUgY2VsbCBmcm9tIHRoZSByb3dcclxuICAgICAgXHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0ZE5vZGVMaXN0Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBESVYgZWxlbWVudFxyXG4gICAgICB7XHJcbiAgICAgICAgdGROb2RlTGlzdFtpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvciA/IGNvbG9yIDogJyc7IC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIHRhYmxlIGNlbGwgaWYgbmVlZGVkXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG9wYWNpdHkgPT09ICdlbXB0eScpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9wYWNpdHkgaXMgc2V0IHRvIFwiZW1wdHlcIiB0aGVuIGRlbGV0ZSBjZWxsIGNvbnRlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0ZE5vZGVMaXN0W2ldLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHNldCBvcGFjaXR5IHRvIGV2ZXJ5IGNoaWxkIG5vZGUgaW4gdGFibGUgY2VsbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspICAgLy8gbG9vcCB0aHJvdWdoIGNoaWxkIG5vZGVzIG9mIGV2ZXJ5IHRhYmxlIGNlbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgLy8gYXBwbHkgc3R5bGVzIG9ubHkgdG8gRWxlbWVudCBub2RlcyAobm90IHRleHQgbm9kZXMsIGF0dHJpYnV0ZXMgLi4uKSwgaHR0cDovL2NvZGUuc3RlcGhlbm1vcmxleS5vcmcvamF2YXNjcmlwdC9kb20tbm9kZXR5cGUtY29uc3RhbnRzL1xyXG4gICAgICAgICAgICBpZiAodGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzW2pdLm5vZGVUeXBlID09PSAxKSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlc1tqXS5zdHlsZS5vcGFjaXR5ID0gb3BhY2l0eSAvIDEwMDtcclxuICAgICAgICAgICAgICB0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXNbal0uc3R5bGUuZmlsdGVyID0gJ2FscGhhKG9wYWNpdHk9JyArIG9wYWNpdHkgKyAnKSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiByb3cgaXMgbW92ZWQgdGhlbiBSRURJUFMuZHJhZyB3aWxsIGNyZWF0ZSBtaW5pIHRhYmxlIHdpdGggb25lIHJvdywgYWxsIGJyb3dzZXJzIChJRTgsIE9wZXJhMTEsIEZGMy42LCBDaHJvbWUxMCkgY2FuIHNldCBvcGFjaXR5IHRvIHRoZSB0YWJsZVxyXG4gICAge1xyXG4gICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gb3BhY2l0eSAvIDEwMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgRkYsIENocm9tZSwgT3BlcmFcclxuICAgICAgZWwuc3R5bGUuZmlsdGVyID0gJ2FscGhhKG9wYWNpdHk9JyArIG9wYWNpdHkgKyAnKSc7ICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIElFXHJcbiAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yID8gY29sb3IgOiAnJzsgICAgICAgICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC8qIHB1YmxpYyBwcm9wZXJ0aWVzICovXHJcbiAgICBvYmogOiBvYmosICAgICAgICAgICAgICAgICAgLy9UeXBlOiBIVE1MRWxlbWVudCAtIEN1cnJlbnRseSBtb3ZlZCBESVYgZWxlbWVudC4gUmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZy5vYmogKGRyYWdnZWQgRElWIGVsZW1lbnQpIGlzIHZpc2libGUgYW5kIGNhbiBiZSB1c2VkIGluIGFwcHJvcHJpYXRlIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAgb2JqT2xkICA6IG9iak9sZCwgICAgICAgICAgIC8vVHlwZTogSFRNTEVsZW1lbnQgLSBQcmV2aW91c2x5IG1vdmVkIERJViBlbGVtZW50IChiZWZvcmUgY2xpY2tlZCBvciBjbG9uZWQpLiBJbiBjYXNlIHdoZW4gRElWIGVsZW1lbnQgaXMgY2xvbmVkLCBvYmogaXMgcmVmZXJlbmNlIG9mIGN1cnJlbnQgKGNsb25lZCkgRElWIGVsZW1lbnQgd2hpbGUgb2JqT2xkIGlzIHJlZmVyZW5jZSBvZiBib3R0b20gKG9yaWdpbikgRElWIGVsZW1lbnQuXHJcbiAgICAvKipcclxuICAgICAqIE9iamVjdCBjb250YWlucyByZWZlcmVuY2UgdG8gcHJldmlvdXMsIHNvdXJjZSwgY3VycmVudCBhbmQgdGFyZ2V0IHRhYmxlIGNlbGwuIFRkIHJlZmVyZW5jZXMgY2FuIGJlIHVzZWQgaW4gZXZlbnQgaGFuZGxlcnMuXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC5zb3VyY2UgLSByZWZlcmVuY2UgdG8gc291cmNlIHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlZG93bik8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQucHJldmlvdXMgLSByZWZlcmVuY2UgdG8gcHJldmlvdXMgdGFibGUgY2VsbCAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKTwvbGk+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC5jdXJyZW50IC0gcmVmZXJlbmNlIHRvIGN1cnJlbnQgdGFibGUgY2VsbCAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKTwvbGk+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC50YXJnZXQgLSByZWZlcmVuY2UgdG8gdGFyZ2V0IHRhYmxlIGNlbGwgKHRhcmdldCB0YWJsZSBjZWxsIGlzIHNldCBpbiBhIG1vbWVudCBvZiBkcm9wcGluZyBlbGVtZW50IHRvIHRoZSB0YWJsZSBjZWxsKTwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHRkIDogdGQsXHJcbiAgICAvKipcclxuICAgICAqIEhvdmVyIG9iamVjdCBjb250YWlucyA0IHByb3BlcnRpZXM6IGNvbG9yVGQsIGNvbG9yVHIsIGJvcmRlclRkIGFuZCBib3JkZXJUci4gY29sb3JUZCBhbmQgY29sb3JUciBkZWZpbmUgaG92ZXIgY29sb3IgZm9yIERJViBlbGVtZW50IGFuZCB0YWJsZSByb3cuXHJcbiAgICAgKiBJZiBib3JkZXJUZCBpcyBkZWZpbmVkLCB0aGVuIGhpZ2hsaWdodGVkIGNlbGwgd2lsbCBoYXZlIGJvcmRlci4gSWYgYm9yZGVyVHIgaXMgZGVmaW5lZCB0aGVuIGhpZ2hsaWdodGVkIHJvdyB3aWxsIGhhdmUgb25seSB0b3Agb3IgYm90dG9tIGJvcmRlci5cclxuICAgICAqIFRvcCBib3JkZXIgc2hvd3MgdGhhdCByb3cgd2lsbCBiZSBwbGFjZWQgYWJvdmUgY3VycmVudCByb3csIHdoaWxlIGJvdHRvbSBib3JkZXIgc2hvd3MgdGhhdCBjdXJyZW50IHJvdyB3aWxsIGJlIHBsYWNlZCBiZWxvdyBjdXJyZW50IHJvdy5cclxuICAgICAqIFNvbWUgYnJvd3NlcnMgbWF5IGhhdmUgcHJvYmxlbSB3aXRoIFwiYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlXCIgdGFibGUgc3R5bGUgYW5kIGJvcmRlciBoaWdobGlnaHRpbmcuXHJcbiAgICAgKiBJbiB0aGF0IGNhc2UgdHJ5IHdpdGhvdXQgY29sbGFwc2luZyBURCBib3JkZXJzIChlLmcgc2V0IFwiYm9yZGVyLXNwYWNpbmc6MFwiIGFuZCBzbWFsbGVyIFwidGQuYm9yZGVyLXdpZHRoXCIpLlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKiBAbmFtZSBSRURJUFMuZHJhZyNob3ZlclxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIC8vIHNldCBcIiM5QkIzREFcIiBhcyBob3ZlciBjb2xvciBmb3IgVERcclxuICAgICAqIFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVGQgPSAnIzlCQjNEQSc7XHJcbiAgICAgKlxyXG4gICAgICogLy8gb3Igc2V0IFwiTGltZVwiIGFzIGhvdmVyIGNvbG9yIGZvciBUUlxyXG4gICAgICogUkVESVBTLmRyYWcuaG92ZXIuY29sb3JUciA9ICdMaW1lJztcclxuICAgICAqXHJcbiAgICAgKiAvLyBzZXQgcmVkIGJvcmRlciBmb3IgaGlnaGxpZ2h0ZWQgVERcclxuICAgICAqIFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRkID0gJzJweCBzb2xpZCByZWQnO1xyXG4gICAgICovXHJcbiAgICBob3ZlciA6IGhvdmVyLFxyXG4gICAgLyoqXHJcbiAgICAgKiBTY3JvbGwgb2JqZWN0IGNvbnRhaW5zIHByb3BlcnRpZXMgbmVlZGVkIGZvciBhdXRvc2Nyb2xsIG9wdGlvbi5cclxuICAgICAqIDx1bD5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gc2Nyb2xsLmVuYWJsZSAtIEVuYWJsZSAvIGRpc2FibGUgYXV0b3Njcm9sbCBvcHRpb24uIEJ5IGRlZmF1bHQgYXV0b3Njcm9sbCBpcyBlbmFibGVkIGJ1dCBpdCBjYW4gYmUgdXNlZnVsbCBpbiBzb21lIGNhc2VzIHRvIGNvbXBsZXRlbHkgdHVybiBvZmYgYXV0b3Njcm9sbCAoaWYgYXBwbGljYXRpb24gZG9lc24ndCBuZWVkIGF1dG9zY3JvbGxpbmcgcGFnZSBub3IgYXV0b3Njcm9sbGluZyBESVYgY29udGFpbmVyKS4gVHVybmluZyBvZmYgYXV0b3Njcm9sbCB3aWxsIHNwZWVkIHVwIGFwcGxpY2F0aW9uIGJlY2F1c2UgZXh0cmEgY2FsY3VsYXRpb25zIHdpbGwgYmUgc2tpcHBlZC4gRGVmYXVsdCBpcyB0cnVlPC9saT5cclxuICAgICAqIDxsaT57SW50ZWdlcn0gc2Nyb2xsLmJvdW5kIC0gQm91bmQgc2l6ZSBmb3IgdHJpZ2dlcmluZyBwYWdlIGF1dG9TY3JvbGwgb3IgYXV0b1Njcm9sbCBvZiBzY3JvbGxhYmxlIERJViBjb250YWluZXIuIERlZmF1bHQgdmFsdWUgaXMgMjUgKHB4KS48L2xpPlxyXG4gICAgICogPGxpPntJbnRlZ2VyfSBzY3JvbGwuc3BlZWQgLSBBdXRvc2Nyb2xsIHBhdXNlIGluIG1pbGxpc2Vjb25kcy4gRGVmYXVsdCB2YWx1ZSBpcyAyMCAobWlsbGlzZWNvbmRzKS48L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBzY3JvbGwgOiBzY3JvbGwsXHJcbiAgICAvKipcclxuICAgICAqIE9iamVjdCBjb250YWlucyBzdHlsZXMgKGNvbG9ycywgb3BhY2l0eSBsZXZlbHMpIGZvciBESVYgZWxlbWVudHMgYW5kIHRhYmxlIHJvd3MuXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e1N0cmluZ30gc3R5bGUuYm9yZGVyRW5hYmxlZCAtIEJvcmRlciBzdHlsZSBmb3IgZW5hYmxlZCBESVYgZWxlbWVudHMuIERlZmF1bHQgaXMgXCJzb2xpZFwiLjwvbGk+XHJcbiAgICAgKiA8bGk+e1N0cmluZ30gc3R5bGUuYm9yZGVyRGlzYWJsZWQgLSBCb3JkZXIgc3R5bGUgZm9yIGRpc2FibGVkIERJViBlbGVtZW50cy4gRGVmYXVsdCBpcyBcImRvdHRlZFwiLjwvbGk+XHJcbiAgICAgKiA8bGk+e0ludGVnZXJ9IHN0eWxlLm9wYWNpdHlEaXNhYmxlZCAtIE9wYWNpdHkgbGV2ZWwgZm9yIGRpc2FibGVkIGVsZW1lbnRzLiBEZWZhdWx0IGlzIGVtcHR5IHN0cmluZy48L2xpPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLnJvd0VtcHR5Q29sb3IgLSBcIkVtcHR5IHJvd1wiIGNvbG9yLiBXaGVuIGxhc3Qgcm93IGZyb20gdGFibGUgaXMgbW92ZWQgdGhlbiB0aGlzIGNvbG9yIHdpbGwgYmUgc2V0IHRvIFwiZW1wdHkgcm93XCIuIERlZmF1bHQgaXMgXCJ3aGl0ZVwiLjwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIC8vIGRlZmluZSBib3JkZXIgc3R5bGUgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgKiBSRURJUFMuZHJhZy5zdHlsZS5ib3JkZXJEaXNhYmxlZCA9ICdkYXNoZWQnO1xyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHN0eWxlIDogc3R5bGUsXHJcbiAgICAvKipcclxuICAgICAqIE9iamVjdCBkZWZpbmVzIHNldmVyYWwgcnVsZXMgcmVsYXRlZCB0byBjbG9uaW5nIERJViBlbGVtZW50cyBsaWtlIGVuYWJsZSBjbG9uaW5nIHdpdGggc2hpZnQga2V5LCBlbmFibGUgcmV0dXJuaW5nIGNsb25lZCBESVYgZWxlbWVudCB0byBpdHMgc291cmNlIGFuZCBzbyBvbi5cclxuICAgICAqIEluc3RlYWQgb2YgbW92aW5nLCBESVYgZWxlbWVudCAvIHJvdyB3aWxsIGJlIGNsb25lZCBhbmQgcmVhZHkgZm9yIGRyYWdnaW5nLlxyXG4gICAgICogSnVzdCBwcmVzcyBTSElGVCBrZXkgYW5kIHRyeSB0byBkcmFnIERJViBlbGVtZW50IC8gcm93LlxyXG4gICAgICogaWYgY2xvbmUuc2VuZEJhY2sgcHJvcGVydHkgc2V0IHRvIHRydWUsIGNsb25lZCBESVYgZWxlbWVudCB3aWxsIGJlIGRlbGV0ZWQgd2hlbiBkcm9wcGVkIHRvIHRoZSBjZWxsIGNvbnRhaW5pbmcgaXRzIHNvdXJjZSBjbG9uZSBlbGVtZW50LlxyXG4gICAgICogSWYgZXhpc3RzLCBcImNsaW1pdFwiIGNsYXNzIHdpbGwgYmUgdXBkYXRlZCAoaW5jcmVhc2VkIGJ5IDEpLlxyXG4gICAgICogY2xvbmUuZHJvcCBwcm9wZXJ0eSBkZWZpbmVzIHBsYWNpbmcgY2xvbmVkIERJViBlbGVtZW50IChkcm9wcGVkIG91dHNpZGUgYW55IHRhYmxlKSB0byB0aGUgbGFzdCBtYXJrZWQgcG9zaXRpb24uXHJcbiAgICAgKiBJZiB0aGlzIHByb3BlcnR5IGlzIHNldCB0byB0cnVlLCB0aGUgY2xvbmVkIERJViBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIHBsYWNlZCB0byB0aGUgdGFibGUgY2VsbC5cclxuICAgICAqIDx1bD5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gY2xvbmUua2V5RGl2IC0gSWYgc2V0IHRvIHRydWUsIGFsbCBESVYgZWxlbWVudHMgb24gdGFibGVzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5LiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLmtleVJvdyAtIElmIHNldCB0byB0cnVlLCB0YWJsZSByb3dzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5LiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLnNlbmRCYWNrIC0gSWYgc2V0IHRvIHRydWUsIGNsb25lZCBlbGVtZW50IGNhbiBiZSByZXR1cm5lZCB0byBpdHMgc291cmNlLiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLmRyb3AgLSBJZiBzZXQgdG8gdHJ1ZSwgY2xvbmVkIGVsZW1lbnQgd2lsbCBiZSBhbHdheXMgcGxhY2VkIHRvIHRoZSB0YWJsZSAodG8gdGhlIGxhc3QgcG9zc2libGUgY2VsbCkgbm8gbWF0dGVyIGlmIGlzIGRyb3BwZWQgb3V0c2lkZSB0aGUgdGFibGUuIERlZmF1bHQgaXMgZmFsc2UuPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgY2xvbmUgOiBjbG9uZSxcclxuICAgIC8qIHB1YmxpYyBtZXRob2RzIChkb2N1bWVudGVkIGluIG1haW4gY29kZSkgKi9cclxuICAgIGluaXQgOiBpbml0LFxyXG4gICAgZW5hYmxlRHJhZyA6IGVuYWJsZURyYWcsXHJcbiAgICBlbmFibGVEaXZzIDogZW5hYmxlRGl2cyxcclxuICAgIHJvd09wYWNpdHkgOiByb3dPcGFjaXR5LFxyXG4gICAgZ2V0U2Nyb2xsUG9zaXRpb24gOiBnZXRTY3JvbGxQb3NpdGlvbixcclxuICAgIGdldFN0eWxlIDogZ2V0U3R5bGUsXHJcbiAgICBmaW5kUGFyZW50IDogZmluZFBhcmVudCxcclxuICAgIGV2ZW50IDogZXZlbnRcclxuICB9O1xyXG59KCkpO1xyXG5cclxuXHJcbmlmICghUkVESVBTLmV2ZW50KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBSRURJUFMuZXZlbnQgaXNuJ3QgYWxyZWFkeSBkZWZpbmVkIChmcm9tIG90aGVyIFJFRElQUyBmaWxlKVxyXG57XHJcbiAgUkVESVBTLmV2ZW50ID0gKGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHZhciBhZGQ7XHJcbiAgICB2YXIgcmVtb3ZlO1xyXG5cclxuICAgIGFkZCA9IGZ1bmN0aW9uIChvYmosIGV2ZW50TmFtZSwgaGFuZGxlcikgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBldmVudCBsaXN0ZW5lclxyXG4gICAge1xyXG4gICAgICBpZiAob2JqLmFkZEV2ZW50TGlzdGVuZXIpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCBmYWxzZSk7ICAgICAgICAvLyAoZmFsc2UpIHJlZ2lzdGVyIGV2ZW50IGluIGJ1YmJsZSBwaGFzZSAoZXZlbnQgcHJvcGFnYXRlcyBmcm9tIGZyb20gdGFyZ2V0IGVsZW1lbnQgdXAgdG8gdGhlIERPTSByb290KVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKG9iai5hdHRhY2hFdmVudCkgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmouYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgaGFuZGxlcik7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBcclxuICAgICAge1xyXG4gICAgICAgIG9ialsnb24nICsgZXZlbnROYW1lXSA9IGhhbmRsZXI7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gKG9iaiwgZXZlbnROYW1lLCBoYW5kbGVyKSAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVyXHJcbiAgICB7XHJcbiAgICAgIGlmIChvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcikgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChvYmouZGV0YWNoRXZlbnQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLmRldGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmpbJ29uJyArIGV2ZW50TmFtZV0gPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7IGFkZDogYWRkLCByZW1vdmU6IHJlbW92ZSB9O1xyXG4gIH0oKSk7XHJcbn0iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciByZWRpcHMgPSB7fTtcclxuXHJcbnJlZGlwcy5pbml0ID0gZnVuY3Rpb24gKCkgXHJcbntcclxuICB2YXIgcmQgPSBSRURJUFMuZHJhZzsgICAvLyByZWZlcmVuY2UgdG8gdGhlIFJFRElQUy5kcmFnIGxpYnJhcnlcclxuXHJcbiAgcmQuaW5pdCgpO1xyXG5cclxuICAvL3JkLmNsb25lLmtleURpdiA9IHJkLmNsb25lLmtleVJvdyA9IHRydWU7ICAgLy8gZW5hYmxlIGNsb25lIGVsZW1lbnQgYW5kIGNsb25lIHJvdyB3aXRoIHNoaWZ0IGtleVxyXG5cclxuICByZC5ldmVudC5yb3dEcm9wcGVkID0gZnVuY3Rpb24gKG5ld1BhcmVudFJvdylcclxuICB7XHJcbiAgICB2YXIgbW92ZWRJRCAgICAgICA9IHBhcnNlSW50KHJkLm9iak9sZC5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSk7XHJcbiAgICB2YXIgbW92ZWRSb3cgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHJkLm9iak9sZC5pZCk7XHJcbiAgICB2YXIgbmV3UGFyZW50SUQgICA9IHBhcnNlSW50KG5ld1BhcmVudFJvdy5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSk7XHJcbiAgICB2YXIgb2xkUGFyZW50SUQgICA9IGdldFBhcmVudElEKG1vdmVkUm93KTtcclxuXHJcbiAgICBtb3ZlQXNzZW1ibHkobW92ZWRJRCwgbmV3UGFyZW50SUQsIG9sZFBhcmVudElELCBuZXdQYXJlbnRSb3cpOyAgLy9tb3ZlIHRoZSBub2RlIGluIHRoZSBkYXRhLCBpbmNsdWRpbmcgYWxsIGRlc2NlbmRhbnQgbm9kZXNcclxuXHJcbiAgICAvL3Nob3cgdGhlIGV4cGFuZCBidXR0b24gZm9yIHRoZSBuZXcgcGFyZW50LCBpbiBjYXNlIGl0IHdhcyBwcmV2aW91c2x5IGNoaWxkbGVzc1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZElEJyArIG5ld1BhcmVudElEKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlLWV4cGFuZCcpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZElEJyArIG5ld1BhcmVudElEKS5jbGFzc0xpc3QuYWRkKCdzaG93LWV4cGFuZCcpO1xyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd0Ryb3BwZWRTb3VyY2UgPSBmdW5jdGlvbiAoKSAgICAgICAgIC8vIHJvdyB3YXMgZHJvcHBlZCB0byB0aGUgc291cmNlIC0gZXZlbnQgaGFuZGxlciwgbWluaSB0YWJsZSAoY2xvbmVkIHJvdykgd2lsbCBiZSBkZWxldGVkIGFuZCBzb3VyY2Ugcm93IHNob3VsZCByZXR1cm4gdG8gb3JpZ2luYWwgc3RhdGVcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iak9sZCwgMTAwKTsgICAgICAgICAgICAgICAgLy8gbWFrZSBzb3VyY2Ugcm93IGNvbXBsZXRlbHkgdmlzaWJsZSAobm8gb3BhY2l0eSlcclxuICB9O1xyXG5cclxuICByZC5ldmVudC5yb3dNb3ZlZCA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgcmQucm93T3BhY2l0eShyZC5vYmosIDg1KTsgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBtb3ZlZCByb3csIHJkLm9iaiBpcyByZWZlcmVuY2Ugb2YgY2xvbmVkIHJvdyAobWluaSB0YWJsZSlcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAyMCwgJ1doaXRlJyk7ICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3Igc291cmNlIHJvdyBhbmQgY2hhbmdlIHNvdXJjZSByb3cgYmFja2dyb3VuZCBjb2xvciwgb2JqLm9iak9sZCBpcyByZWZlcmVuY2Ugb2Ygc291cmNlIHJvd1xyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd0NsaWNrZWQgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd05vdE1vdmVkICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd0Nsb25lZCAgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd05vdENsb25lZCA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gIHJkLmV2ZW50LnJvd0RlbGV0ZWQgICA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICByZC5ldmVudC5yb3dVbmRlbGV0ZWQgPSBmdW5jdGlvbiAoKSAgICAgICAgICAgICAvLyByb3cgaXMgdW5kZWxldGVkIChyZXR1cm4gc291cmNlIHJvdyB0byBvcmlnaW5hbCBzdGF0ZSlcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iak9sZCwgMTAwKTtcclxuICB9O1xyXG59O1xyXG4iLCJ2YXIgc2Nyb2xsQmFyV2lkdGg7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpXHJcbntcclxuICBzY3JvbGxCYXJXaWR0aCA9IGdldFNjcm9sbEJhcldpZHRoKCk7XHJcbiAgXHJcbiAgZG9jdW1lbnQub25rZXlkb3duID0gY2hlY2tLZXk7IFxyXG4gIFxyXG4gICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvcHJvamVjdHMnfSkuZG9uZShmdW5jdGlvbihkYXRhKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZWFkIHByb2plY3RzIGZyb20gdGhlIHNlcnZlclxyXG4gIHsgXHJcbiAgICBwcm9qZWN0cyA9IGRhdGE7IFxyXG4gICAgXHJcbiAgICAvL1RPRE86IHJlYWQgZmllbGRzIGZyb20gdGhlIGRhdGFiYXNlIChwdXQgdGhlbSBpbiB0aGUgdHJlZT8pXHJcbiAgXHJcbiAgICAkKCcjaGVhZGVyJykuaHRtbChnZW5lcmF0ZUhlYWRlck1hcmt1cChwcm9qZWN0cy5wcm9qZWN0cykpO1xyXG4gICAgXHJcbiAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS5rZXl1cChmdW5jdGlvbihlKVxyXG4gICAge1xyXG4gICAgICBpZihlLmtleUNvZGUgPT0gRU5URVJfS0VZKVxyXG4gICAgICB7XHJcbiAgICAgICAgY3JlYXRlTmV3UHJvamVjdCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBpbml0UHJvamVjdEFjdGlvbnMoKVxyXG57XHJcbiAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLmtleXVwKGZ1bmN0aW9uKGUpXHJcbiAge1xyXG4gICAgaWYoZS5rZXlDb2RlID09IEVOVEVSX0tFWSlcclxuICAgIHtcclxuICAgICAgcHJvamVjdEFjdGlvbkVudGVyUHJlc3NlZCgpO1xyXG4gICAgfVxyXG4gIH0pOyBcclxufVxyXG5cclxudmFyIGdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24oKSBcclxue1xyXG4gIHZhciBkaXYsIHdpZHRoO1xyXG4gIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGRpdi5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT1cIndpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDotNTBweDt0b3A6LTUwcHg7b3ZlcmZsb3c6YXV0bztcIj48ZGl2IHN0eWxlPVwid2lkdGg6MXB4O2hlaWdodDoxMDBweDtcIj48L2Rpdj48L2Rpdj4nO1xyXG4gIGRpdiA9IGRpdi5maXJzdENoaWxkO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICB3aWR0aCA9IGRpdi5vZmZzZXRXaWR0aCAtIGRpdi5jbGllbnRXaWR0aDtcclxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XHJcbiAgcmV0dXJuIHdpZHRoO1xyXG59OyIsInZhciBLRVlfVVBfQVJST1cgPSAzODtcclxudmFyIEtFWV9ET1dOX0FSUk9XID0gNDA7XHJcbnZhciBLRVlfTEVGVF9BUlJPVyA9IDM3O1xyXG52YXIgS0VZX1JJR0hUX0FSUk9XID0gMzk7XHJcblxyXG5mdW5jdGlvbiBjaGVja0tleShlKSBcclxue1xyXG4gIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuXHJcbiAgaWYgKGUua2V5Q29kZSA9PSBLRVlfVVBfQVJST1cpIFxyXG4gIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBwcmV2Um93ID0gJChnZXRBbmNlc3RvclRhZyhkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndHInKSkucHJldigpWzBdO1xyXG4gICAgXHJcbiAgICBpZihwcmV2Um93KVxyXG4gICAge1xyXG4gICAgICAkKCcjJyArIGdldE5leHRFbGVtZW50SUQocHJldlJvdykpLmZvY3VzKCk7XHJcbiAgICB9ICAgICAgXHJcbiAgfVxyXG4gIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfRE9XTl9BUlJPVykgXHJcbiAge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIG5leHRSb3cgPSAkKGdldEFuY2VzdG9yVGFnKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0cicpKS5uZXh0KClbMF07XHJcbiAgICBcclxuICAgIGlmKG5leHRSb3cpXHJcbiAgICB7XHJcbiAgICAgICQoJyMnICsgZ2V0TmV4dEVsZW1lbnRJRChuZXh0Um93KSkuZm9jdXMoKTtcclxuICAgIH0gICAgICAgXHJcbiAgfVxyXG4gIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfUklHSFRfQVJST1cpIFxyXG4gIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoZ2V0QW5jZXN0b3JUYWcoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RkJykpLm5leHQoKS5maW5kKCdpbnB1dCcpLmZvY3VzKCk7ICBcclxuICB9XHJcbiAgZWxzZSBpZiAoZS5rZXlDb2RlID09IEtFWV9MRUZUX0FSUk9XKSBcclxuICB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKGdldEFuY2VzdG9yVGFnKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0ZCcpKS5wcmV2KCkuZmluZCgnaW5wdXQnKS5mb2N1cygpOyAgXHJcbiAgfSAgICBcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TmV4dEVsZW1lbnRJRChuZXdSb3cpXHJcbntcclxuICB2YXIgaWQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlkOyAgXHJcbiAgaWYoaWQuaW5kZXhPZignbm9kZUlucHV0JykgPiAtMSlcclxuICB7XHJcbiAgICByZXR1cm4gJ25vZGVJbnB1dCcgKyBuZXdSb3cuaWQucmVwbGFjZSgncm93aWQnLCcnKTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHZhciBjbGFzc2VzID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgdmFyIGMgPSBjbGFzc2VzW2ldO1xyXG5cclxuICAgICAgaWYoYy5pbmRleE9mKCdmaWVsZElucHV0JykgPiAtMSAmJiBjICE9ICdmaWVsZElucHV0JylcclxuICAgICAge1xyXG4gICAgICAgIHZhciBmaWVsZE5hbWUgPSBjLnJlcGxhY2UoJ2ZpZWxkSW5wdXQnLCAnJyk7XHJcbiAgICAgICAgcmV0dXJuIGZpZWxkTmFtZSArIG5ld1Jvdy5pZC5yZXBsYWNlKCdkYXRhcm93aWQnLCcnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gICBcclxufSIsInZhciBERUZBVUxUX05PREVfSU5QVVRfV0lEVEggPSA0MDA7XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVNwcmVhZFNoZWV0TWFya3VwKClcclxue1xyXG4gIHJldHVybiAnPGRpdiBpZD1cInNwcmVhZFNoZWV0Vmlld1wiPicgK1xyXG4gICAgICAgICAgJzxkaXYgaWQ9XCJwcm9qZWN0LWFjdGlvbi1jb250YWluZXJcIj48L2Rpdj4nICtcclxuICAgICAgICAgICc8ZGl2IGlkPVwiZmllbGRzLWhlYWRlci1yb3dcIj48L2Rpdj4nICtcclxuICAgICAgICAgICc8ZGl2IGlkPVwicmVkaXBzLWRyYWdcIj48L2Rpdj4nICtcclxuICAgICAgICAgICc8ZGl2IGlkPVwiZGF0YS1jb250YWluZXJcIiBvbnNjcm9sbD1cImhhbmRsZURhdGFTY3JvbGwoKVwiPjwvZGl2PicgK1xyXG4gICAgICAgICAnPC9kaXY+JztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVIZWFkZXJNYXJrdXAocHJvamVjdHMpXHJcbntcclxuICB2YXIgbWFya3VwID0gJzxzZWxlY3QgaWQ9XCJwcm9qZWN0U2VsZWN0b3JcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIG9uY2hhbmdlPVwic2VsZWN0UHJvamVjdCgpXCI+J1xyXG4gICsgJzxvcHRpb24gaWQ9XCJzZWxlY3RQcm9qZWN0T3B0aW9uXCIgdmFsdWU9XCIwXCI+U2VsZWN0IFByb2plY3QuLi48L29wdGlvbj4nO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgcHJvamVjdHMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgbWFya3VwICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIHByb2plY3RzW2ldLmlkICsgJ1wiPicgKyBwcm9qZWN0c1tpXS5uYW1lICsgJzwvb3B0aW9uPic7XHJcbiAgfVxyXG5cclxuICBtYXJrdXAgKz0gJzxvcHRpb24gaWQ9XCJuZXdQcm9qZWN0T3B0aW9uXCIgdmFsdWU9XCItMVwiPkNyZWF0ZSBOZXcgUHJvamVjdC4uLjwvb3B0aW9uPjwvc2VsZWN0PidcclxuICArICc8aW5wdXQgaWQ9XCJlZGl0TmV3UHJvamVjdE5hbWVJbnB1dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCI+PC9pbnB1dD4nXHJcbiAgKyAnPGEgaHJlZj1cIiNcIiBpZD1cInNhdmUtZGF0YWJhc2UtYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBvbmNsaWNrPVwiUHJvamVjdC5zYXZlVG9EYXRhYmFzZSgpXCI+U2F2ZSB0byBEYXRhYmFzZTwvYT4nXHJcbiAgKyAnPGEgaHJlZj1cIiNcIiBpZD1cInN3aXRjaFZpZXdCdXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIG9uY2xpY2s9XCJQcm9qZWN0LnN3aXRjaFZpZXcoKVwiPlN3aXRjaCBWaWV3PC9hPic7XHJcbiAgLy9tYXJrdXAgKz0gJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBpZD1cInNhdmUtZmlsZS1idXR0b25cIiBvbmNsaWNrPVwic2F2ZUxvY2FsbHkoKVwiPlNhdmUgYXMgRmlsZTwvYT4nO1xyXG4gIFxyXG4gIHJldHVybiBtYXJrdXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlUHJvamVjdFNlbGVjdG9yTWFya3VwKClcclxue1xyXG4gIHJldHVybiAnPHRhYmxlPjx0ciBpZD1cImhlYWRlclJvd1wiPjx0cj48ZGl2IGlkPVwicHJvamVjdC1zZWxlY3QtY29udGFpbmVyXCI+J1xyXG4gICsgJzxzZWxlY3QgaWQ9XCJwcm9qZWN0QWN0aW9uU2VsZWN0b3JcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIG9uY2hhbmdlPVwiaGFuZGxlUHJvamVjdEFjdGlvbigpXCI+PG9wdGlvbiB2YWx1ZT1cImJsYW5rXCI+PC9vcHRpb24+J1xyXG4gICsgJzxvcHRpb24gdmFsdWU9XCJhZGRGaWVsZFwiPkFkZCBGaWVsZDwvb3B0aW9uPidcclxuICArICc8L3NlbGVjdD4nXHJcbiAgKyAnPGlucHV0IGlkPVwicHJvamVjdEFjdGlvbklucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj48L2lucHV0PidcclxuICArICc8L2Rpdj48L3RyPjx0YWJsZT4nOyBcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVGaWVsZHNSb3dNYXJrdXAoKVxyXG57ICBcclxuICB2YXIgbWFya3VwID0gJzx0YWJsZSBpZD1cImZpZWxkSGVhZGVyVGFibGVcIj48dHIgaWQ9XCJmaWVsZEhlYWRlclJvd1wiPic7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLmZpZWxkcy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgIC8vYWRkIHRhYmxlIGhlYWRlcnMgd2l0aCB0aGUgZmllbGQgbmFtZXNcclxuICB7XHJcbiAgICBtYXJrdXAgKz0gZ2V0RmllbGRIZWFkZXJNYXJrdXAodHJlZS5maWVsZHNbaV0ubmFtZSwgaSk7XHJcbiAgfVxyXG5cclxuICBtYXJrdXAgKz0gJzwvdHI+PC90YWJsZT4nO1xyXG4gIHJldHVybiBtYXJrdXA7ICBcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVUcmVlTWFya3VwKClcclxue1xyXG4gIHZhciBtYXJrdXAgPSAnPHRhYmxlIGlkPVwidHJlZVRhYmxlXCI+JztcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUubm9kZXMubGVuZ3RoOyBpKyspICAgICAgICAvL2FkZCByb3cgZm9yIGVhY2ggbm9kZVxyXG4gIHtcclxuICAgIG1hcmt1cCArPSBhZGRSb3codHJlZS5ub2Rlc1tpXSwgMCwgJycsIDApO1xyXG4gIH1cclxuXHJcbiAgbWFya3VwICs9ICc8L3RhYmxlPic7XHJcbiAgcmV0dXJuIG1hcmt1cDtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkUm93KG5vZGUsIGRlcHRoLCBhbmNlc3RvcnMsIHBhcmVudCkgICAgICAgLy9hZGQgbm9kZSBhbmQgZGF0YSBpbnB1dCBmb3IgZWFjaCBmaWVsZFxyXG57XHJcbiAgdmFyIG1hcmt1cCA9ICcnO1xyXG4gIHZhciBjbGFzc2VzID0gJ25vZGVSb3cgZGVwdGgnICsgZGVwdGggKyAnIGV4cGFuZGVkIHBhcmVudCcgKyBwYXJlbnQgKyAnICcgKyBhbmNlc3RvcnM7XHJcbiAgdmFyIG5vZGVJRCA9IG5vZGUuaWQ7XHJcblxyXG4gIHZhciBkcmFnSGFuZGxlID0gJzxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyBwdWxsLXJpZ2h0XCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLW1vdmVcIj48L2k+PC9kaXY+JztcclxuICB2YXIgZGVsZXRlQnV0dG9uID0gJzxhIGhyZWY9XCIjXCIgY2xhc3M9XCJwdWxsLXJpZ2h0IGJ0biBidG4tZGFuZ2VyIGJ0bi14cyBkZWxldGUtYnV0dG9uXCIgb25jbGljaz1cImRlbGV0ZU5vZGUodGhpcylcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlXCI+PC9pPjwvYT4nO1xyXG4gIHZhciBjb3B5QnV0dG9uID0gJzxhIGhyZWY9XCIjXCIgIGNsYXNzPVwicHVsbC1yaWdodCBidG4gYnRuLWluZm8gYnRuLXhzIGNvcHktYnV0dG9uXCIgb25jbGljaz1cImNvcHlOb2RlKHRoaXMpXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXBsdXNcIj48L2k+PC9hPic7XHJcbiAgdmFyIHNob3dFeHBhbmRCdXR0b24gPSAnPGEgaWQ9XCJleHBhbmRJRCcgKyBub2RlSUQgKyAnXCIgaHJlZj1cIiNcIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OicgKyAoZGVwdGgqMTApICsgJ3B4XCIgb25jbGljaz1cInRvZ2dsZSh0aGlzKVwiIGNsYXNzPVwiYnRuIGJ0bi14cyBzaG93LWV4cGFuZFwiPjxzcGFuIGlkPVwiaWNvbicgKyBub2RlSUQgKyAnXCIgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93biBpY29ucCcgKyBwYXJlbnQgKyAnXCI+PC9zcGFuPjwvYT4nO1xyXG4gIHZhciBoaWRlRXhwYW5kQnV0dG9uID0gJzxhIGlkPVwiZXhwYW5kSUQnICsgbm9kZUlEICsgJ1wiIGhyZWY9XCIjXCIgc3R5bGU9XCJtYXJnaW4tbGVmdDonICsgKGRlcHRoKjEwKSArICdweFwiIG9uY2xpY2s9XCJ0b2dnbGUodGhpcylcIiBjbGFzcz1cImJ0biBidG4teHMgaGlkZS1leHBhbmRcIj48c3BhbiBpZD1cImljb24nICsgbm9kZUlEICsgJ1wiIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd24gaWNvbnAnICsgcGFyZW50ICsgJ1wiPjwvc3Bhbj48L2E+JztcclxuXHJcbiAgbWFya3VwICs9ICc8dHIgaWQ9XCJyb3dpZCcgKyBub2RlSUQgKyAnXCIgY2xhc3M9XCInICsgY2xhc3NlcyArICdcIj48dGQgY2xhc3M9XCJyZWRpcHMtcm93aGFuZGxlciBjZWxsXCI+PGRpdiBjbGFzcz1cIm5vZGUtY29udGFpbmVyXCI+JztcclxuICBtYXJrdXAgKz0gZGVsZXRlQnV0dG9uICsgY29weUJ1dHRvbiArIGRyYWdIYW5kbGU7XHJcblxyXG4gIGlmKG5vZGUubm9kZXMgJiYgbm9kZS5ub2Rlcy5sZW5ndGggPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgbm9kZSBpcyBhIHBhcmVudFxyXG4gIHtcclxuICAgIG1hcmt1cCArPSBzaG93RXhwYW5kQnV0dG9uOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Nob3cgdGhlIGV4cGFuc2lvbiBidXR0b25cclxuICB9XHJcbiAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiBub2RlIGlzIGEgbGVhZlxyXG4gIHtcclxuICAgIG1hcmt1cCArPSBoaWRlRXhwYW5kQnV0dG9uOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2hpZGUgdGhlIGV4cGFuc2lvbiBidXR0b25cclxuICB9XHJcblxyXG4gIG1hcmt1cCArPSAnPGlucHV0IGlkPVwibm9kZUlucHV0JyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJub2RlVGV4dElucHV0XCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIicgKyBub2RlLm5hbWUgKyAnXCIgc3R5bGU9XCJ3aWR0aDonICsgKERFRkFVTFRfTk9ERV9JTlBVVF9XSURUSC1kZXB0aCoxMCkgKyAncHhcIiBvbmlucHV0PVwidXBkYXRlTm9kZU5hbWUodGhpcylcIi8+PC9kaXY+PC90ZD48L3RyPic7XHJcblxyXG4gIGlmKG5vZGUubm9kZXMgJiYgbm9kZS5ub2Rlcy5sZW5ndGggPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIHRoZSBjaGlsZHJlbiBvZiB0aGlzIG5vZGUgYmVsb3cgdGhpcyBub2RlJ3Mgcm93XHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIG1hcmt1cCArPSBhZGRSb3cobm9kZS5ub2Rlc1tpXSwgZGVwdGgrMSwgYW5jZXN0b3JzICsgJyBhbmNlc3RvcicgKyBub2RlSUQsIG5vZGVJRCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbWFya3VwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZURhdGFNYXJrdXAoKVxyXG57XHJcbiAgdmFyIG1hcmt1cCA9ICc8dGFibGUgaWQ9XCJkYXRhVGFibGVcIj4nO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgdHJlZS5ub2Rlcy5sZW5ndGg7IGkrKykgICAgICAgIC8vYWRkIHJvdyBmb3IgZWFjaCBub2RlXHJcbiAge1xyXG4gICAgbWFya3VwICs9IGFkZERhdGFSb3codHJlZS5ub2Rlc1tpXSk7XHJcbiAgfVxyXG5cclxuICBtYXJrdXAgKz0gJzwvdGFibGU+JztcclxuICByZXR1cm4gbWFya3VwOyAgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZERhdGFSb3cobm9kZSlcclxue1xyXG4gIHZhciBtYXJrdXAgPSAnPHRyIGlkPVwiZGF0YXJvd2lkJyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJkYXRhUm93XCI+JztcclxuICBcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgdHJlZS5maWVsZHMubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIHRoZSBkYXRhIGlucHV0cyBmb3IgZWFjaCBmaWVsZHNcclxuICB7XHJcbiAgICB2YXIgZmllbGQgPSB0cmVlLmZpZWxkc1tpXTtcclxuXHJcbiAgICB2YXIgdmFsdWUgPSAnJztcclxuICAgIGlmKG5vZGUudmFsdWVzICYmIG5vZGUudmFsdWVzW2ZpZWxkLm5hbWVdKVxyXG4gICAge1xyXG4gICAgICB2YWx1ZSA9IEZpZWxkLmZvcm1hdFZhbHVlKGZpZWxkLCBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSBnZXRGaWVsZENlbGxNYXJrdXAoZmllbGQubmFtZSwgbm9kZS5pZCwgdmFsdWUpO1xyXG4gIH1cclxuICBcclxuICBtYXJrdXAgKz0gJzwvdHI+JztcclxuICBcclxuICBpZihub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCB0aGUgY2hpbGRyZW4gb2YgdGhpcyBub2RlIGJlbG93IHRoaXMgbm9kZSdzIHJvd1xyXG4gIHtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBtYXJrdXAgKz0gYWRkRGF0YVJvdyhub2RlLm5vZGVzW2ldKTtcclxuICAgIH1cclxuICB9ICBcclxuICBcclxuICByZXR1cm4gbWFya3VwOyAgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZENvbHVtbihmaWVsZE5hbWUpXHJcbntcclxuICAkKCcjZmllbGRIZWFkZXJSb3cnKS5hcHBlbmQoZ2V0RmllbGRIZWFkZXJNYXJrdXAoZmllbGROYW1lLCB0cmVlLmZpZWxkcy5sZW5ndGgpKTsgICAgLy9hZGQgZmllbGQgaGVhZGVyXHJcbiAgXHJcbiAgJCgnLmRhdGFSb3cnKS5lYWNoKGZ1bmN0aW9uKGksIGl0ZW0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIGNlbGwgZm9yIGVhY2ggbm9kZVxyXG4gIHtcclxuICAgICQoaXRlbSkuYXBwZW5kKGdldEZpZWxkQ2VsbE1hcmt1cChmaWVsZE5hbWUsIGl0ZW0uaWQucmVwbGFjZSgnZGF0YXJvd2lkJywgJycpKSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEZpZWxkSGVhZGVyTWFya3VwKGZpZWxkTmFtZSwgaW5kZXgpXHJcbntcclxuICByZXR1cm4gJzx0ZCBjbGFzcz1cImZpZWxkSGVhZGVyQ2VsbFwiPjxkaXYgY2xhc3M9XCJmaWVsZEhlYWRlckNvbnRhaW5lclwiPidcclxuICArICc8ZGl2IGNsYXNzPVwibW92ZUNvbEdyaXBcIj48L2Rpdj4nXHJcbiAgKyAnPGRpdiBjbGFzcz1cImZpZWxkTmFtZUlucHV0Q29udGFpbmVyXCI+PHRleHRhcmVhIGlkPVwiY29sSGVhZGVySW5wdXQnICsgZmllbGROYW1lICsgJ1wiIGNsYXNzPVwiZmllbGROYW1lSW5wdXRcIj4nICsgZmllbGROYW1lICsgJzwvdGV4dGFyZWE+PC9kaXY+J1xyXG4gICsgJzxkaXYgY2xhc3M9XCJmaWVsZEhlYWRlckJ1dHRvblwiPidcclxuICArICc8aW1nIHNyYz1cImltYWdlcy9kb3duLWFycm93LnBuZ1wiIG9uY2xpY2s9XCJzaG93TWVudShldmVudCwgXFwnJyArIGZpZWxkTmFtZSArICdcXCcpO1wiIHN0eWxlPVwiY3Vyc29yOnBvaW50ZXJcIi8+J1xyXG4gICsgJzwvZGl2PidcclxuICArICc8ZGl2IGlkPVwiZ3JpcCcgKyBpbmRleCArICdcIiBjbGFzcz1cInJlc2l6ZUNvbEdyaXBcIiBvbm1vdXNlZG93bj1cInN0YXJ0UmVzaXplKGV2ZW50LCB0aGlzKVwiPjwvZGl2PidcclxuICArICc8L2Rpdj48L3RkPic7XHJcbiAgLy9yZXR1cm4gJzx0aCBpZD1cImNvbEhlYWRlcicgKyBmaWVsZE5hbWUgKyAnXCIgY2xhc3M9XCJoZWFkZXJcIj48ZGl2IGNsYXNzPVwibW92ZUNvbEdyaXBcIj48L2Rpdj48aW5wdXQgaWQ9XCJjb2xIZWFkZXJJbnB1dCcgKyBmaWVsZE5hbWUgKyAnXCIgY2xhc3M9XCJmaWVsZE5hbWVJbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCInICsgZmllbGROYW1lICsgJ1wiLz48ZGl2IGlkPVwiZ3JpcCcgKyBpbmRleCArICdcIiBjbGFzcz1cInJlc2l6ZUNvbEdyaXBcIiBvbm1vdXNlZG93bj1cInN0YXJ0UmVzaXplKGV2ZW50LCB0aGlzKVwiPjwvZGl2PjwvdGg+JztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RmllbGRDZWxsTWFya3VwKGZpZWxkTmFtZSwgbm9kZUlELCB2YWx1ZSlcclxueyAgXHJcbiAgcmV0dXJuICc8dGQgY2xhc3M9XCJjZWxsXCI+PGlucHV0IGNsYXNzPVwiZmllbGRJbnB1dCBmaWVsZElucHV0JyArIGZpZWxkTmFtZSArICdcIiB0eXBlPVwidGV4dFwiIGlkPVwiJyArIGZpZWxkTmFtZSArIG5vZGVJRCArICdcIiB2YWx1ZT1cIicgKyB2YWx1ZSArICdcIiBvbmlucHV0PVwidXBkYXRlRmllbGRWYWx1ZShcXCcnICsgZmllbGROYW1lICsgJ1xcJywgXFwnJyArIG5vZGVJRCArICdcXCcpXCIgb25mb2N1cz1cImRpc3BsYXlSYXdWYWx1ZShcXCcnICsgZmllbGROYW1lICsgJ1xcJywgXFwnJyArIG5vZGVJRCArICdcXCcpXCIvPjwvdGQ+JztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0QXNzZW1ibHlNYXJrdXAobm9kZUlELCBuZXdOb2RlSUQsIGRlcHRoKVxyXG57XHJcbiAgdmFyIG5vZGUgICAgPSBmaW5kTm9kZUluVHJlZShub2RlSUQpO1xyXG4gIHZhciBwYXJlbnQgID0gZmluZFBhcmVudEluVHJlZShub2RlSUQpO1xyXG4gIHJldHVybiBhZGRSb3cobm9kZSwgZGVwdGgsICdhbmNlc3RvcicgKyBwYXJlbnQuaWQsIHBhcmVudC5pZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEZpZWxkTWVudU1hcmt1cChmaWVsZE5hbWUsIHgsIHkpXHJcbntcclxuICB2YXIgZmllbGQgPSBQcm9qZWN0LmdldEZpZWxkKGZpZWxkTmFtZSk7XHJcbiAgXHJcbiAgdmFyIG1lbnUgPSBuZXcgTWVudSgpO1xyXG5cclxuICB2YXIgbnVtYmVySXRlbSA9IG5ldyBNZW51SXRlbSgnTnVtYmVyJywgRmllbGQuTlVNQkVSLCAnZGF0YXR5cGUnLCBmaWVsZCk7XHJcbiAgdmFyIGZvcm1hdEl0ZW0gPSBuZXcgTWVudUl0ZW0oJ0Zvcm1hdCcpO1xyXG4gIFxyXG4gIHZhciBudW1iZXJGb3JtYXRJdGVtID0gbmV3IE1lbnVJdGVtKCdOdW1iZXInLCBGaWVsZC5OVU1CRVJfRk9STUFULCAnZm9ybWF0JywgZmllbGQpO1xyXG4gIG51bWJlckZvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJzAnLCAwLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB2YXIgZGlzcGxheVN0cmluZyA9ICcwLic7XHJcbiAgZm9yKHZhciBpID0gMTsgaSA8IDExOyBpKyspXHJcbiAge1xyXG4gICAgZGlzcGxheVN0cmluZyArPSAnMCc7XHJcbiAgICBudW1iZXJGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKGRpc3BsYXlTdHJpbmcsIGksICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIH1cclxuICBmb3JtYXRJdGVtLml0ZW1zLnB1c2gobnVtYmVyRm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIHBlcmNlbnRGb3JtYXRJdGVtID0gbmV3IE1lbnVJdGVtKCdQZXJjZW50JywgRmllbGQuUEVSQ0VOVF9GT1JNQVQsICdmb3JtYXQnLCBmaWVsZCk7XHJcbiAgcGVyY2VudEZvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJzAnLCAwLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB2YXIgZGlzcGxheVN0cmluZyA9ICcwLic7XHJcbiAgZm9yKHZhciBpID0gMTsgaSA8IDExOyBpKyspXHJcbiAge1xyXG4gICAgZGlzcGxheVN0cmluZyArPSAnMCc7XHJcbiAgICBwZXJjZW50Rm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbShkaXNwbGF5U3RyaW5nICsgJyUnLCBpLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB9XHJcbiAgZm9ybWF0SXRlbS5pdGVtcy5wdXNoKHBlcmNlbnRGb3JtYXRJdGVtKTtcclxuICBcclxuICB2YXIgc2NpZW50aWZpY0Zvcm1hdEl0ZW0gPSBuZXcgTWVudUl0ZW0oJ1NjaWVudGlmaWMnLCBGaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKTtcclxuICBzY2llbnRpZmljRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbSgnMCcsIDAsICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIHZhciBkaXNwbGF5U3RyaW5nID0gJzAuJztcclxuICBmb3IodmFyIGkgPSAxOyBpIDwgMTE7IGkrKylcclxuICB7XHJcbiAgICBkaXNwbGF5U3RyaW5nICs9ICcwJztcclxuICAgIHNjaWVudGlmaWNGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKGRpc3BsYXlTdHJpbmcgKyAnZSswJywgaSwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgfVxyXG4gIGZvcm1hdEl0ZW0uaXRlbXMucHVzaChzY2llbnRpZmljRm9ybWF0SXRlbSk7ICBcclxuICBcclxuICBudW1iZXJJdGVtLml0ZW1zLnB1c2goZm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIGFnZ3JlZ2F0aW9uSXRlbSA9IG5ldyBNZW51SXRlbSgnQWdncmVnYXRpb24nKTtcclxuICBhZ2dyZWdhdGlvbkl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJ05vIEFnZ3JlZ2F0aW9uJywgRmllbGQuTk9fQUdHUkVHQVRJT04sICdhZ2dfdHlwZScsIGZpZWxkKSk7XHJcbiAgXHJcbiAgdmFyIHN1bUFueUFnZ0l0ZW0gPSBuZXcgTWVudUl0ZW0oJ1N1bSBhbnkgZGVmaW5lZCBjaGlsZHJlbicsIEZpZWxkLlNVTV9BTllfQUdHUkVHQVRJT04sICdhZ2dfdHlwZScsIGZpZWxkKTtcclxuICBcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgdHJlZS5maWVsZHMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGYgPSB0cmVlLmZpZWxkc1tpXTtcclxuICAgIFxyXG4gICAgaWYoZi5uYW1lICE9IGZpZWxkLm5hbWUpXHJcbiAgICB7XHJcbiAgICAgIHN1bUFueUFnZ0l0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oZi5uYW1lLCBmLm5hbWUsICdhZ2dfcXR5X2ZpZWxkJywgZmllbGQpKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgYWdncmVnYXRpb25JdGVtLml0ZW1zLnB1c2goc3VtQW55QWdnSXRlbSk7XHJcbiAgbnVtYmVySXRlbS5pdGVtcy5wdXNoKGFnZ3JlZ2F0aW9uSXRlbSk7XHJcbiAgXHJcbiAgbWVudS5pdGVtcyA9IFtdO1xyXG4gIG1lbnUuaXRlbXMucHVzaChudW1iZXJJdGVtKTtcclxuICBtZW51Lml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKCdUZXh0JywgRmllbGQuU1RSSU5HLCAnZGF0YXR5cGUnLCBmaWVsZCkpO1xyXG4gIC8vVE9ETzogbWVudS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbSgnQ2hvaWNlJywgRmllbGQuQ0hPSUNFLCAnZGF0YXR5cGUnLCBmaWVsZCkpO1xyXG4gIFxyXG4gIHZhciBtYXJrdXAgPSAnPGRpdiBpZD1cImZpZWxkTWVudVwiIHN0eWxlPVwibGVmdDonICsgeCArICdweDt0b3A6JyArIHkgKyAncHg7XCI+JztcclxuICBcclxuICBtYXJrdXAgKz0gZ2VuZXJhdGVNZW51TWFya3VwKG1lbnUpO1xyXG4gIFxyXG4gIG1hcmt1cCArPSAnPC9kaXY+JztcclxuICByZXR1cm4gbWFya3VwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZU1lbnVNYXJrdXAobWVudSlcclxue1xyXG4gIHZhciBtYXJrdXAgPSAnPHVsPic7XHJcbiAgXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IG1lbnUuaXRlbXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGl0ZW0gPSBtZW51Lml0ZW1zW2ldO1xyXG4gICAgXHJcbiAgICBtYXJrdXAgKz0gJzxsaSBvbmNsaWNrPVwiTWVudS5oYW5kbGVDbGljaygnICsgaXRlbS5pZCArICcpO1wiPic7XHJcblxyXG4gICAgdmFyIGNoZWNrTWFya0NsYXNzID0gJ3VuY2hlY2tlZE1lbnVJdGVtJztcclxuICAgIGlmKGl0ZW0uZmllbGQgJiYgaXRlbS5jaGVja2VkKVxyXG4gICAge1xyXG4gICAgICBjaGVja01hcmtDbGFzcyA9ICdjaGVja2VkTWVudUl0ZW0nO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBtYXJrdXAgKz0gJzxpbWcgaWQ9XCJtZW51SXRlbScgKyBpdGVtLmlkICsgJ1wiIHNyYz1cIicgKyBDSEVDS19NQVJLX0lNQUdFX1BBVEggKyAnXCIgY2xhc3M9XCInICsgY2hlY2tNYXJrQ2xhc3MgKyAnXCIvPic7XHJcbiAgICBtYXJrdXAgKz0gaXRlbS5kaXNwbGF5O1xyXG4gICAgXHJcbiAgICBpZihpdGVtLml0ZW1zICYmIGl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9ICc8ZGl2IGNsYXNzPVwiYXJyb3dSaWdodFwiPjwvZGl2Pic7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoaXRlbS5pdGVtcyAmJiBpdGVtLml0ZW1zLmxlbmd0aCA+IDApXHJcbiAgICB7XHJcbiAgICAgIG1hcmt1cCArPSBnZW5lcmF0ZU1lbnVNYXJrdXAoaXRlbSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSAnPC9saT4nO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gbWFya3VwICsgJzwvdWw+JztcclxufSIsImZ1bmN0aW9uIGRpc3BsYXlTcHJlYWRTaGVldCgpXHJcbntcclxuICAkKCdib2R5JykuYXBwZW5kKGdlbmVyYXRlU3ByZWFkU2hlZXRNYXJrdXAoKSk7XHJcbiAgXHJcbiAgJCgnI3Byb2plY3QtYWN0aW9uLWNvbnRhaW5lcicpLmh0bWwoZ2VuZXJhdGVQcm9qZWN0U2VsZWN0b3JNYXJrdXAoKSk7XHJcbiAgJCgnI2ZpZWxkcy1oZWFkZXItcm93JykuaHRtbChnZW5lcmF0ZUZpZWxkc1Jvd01hcmt1cCgpKTtcclxuICAkKCcjZmllbGRzLWhlYWRlci1yb3cnKS5jc3MoJ3JpZ2h0Jywgc2Nyb2xsQmFyV2lkdGggKyAncHgnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2hvcnRlbiB0aGUgd2lkdGggb2YgdGhlIGZpZWxkc1JvdyBieSB0aGUgd2lkdGggb2YgdGhlIHNjcm9sbCBiYXJcclxuICAkKFwiI2RhdGEtY29udGFpbmVyXCIpLmh0bWwoZ2VuZXJhdGVEYXRhTWFya3VwKCkpOyBcclxuXHQkKFwiI3JlZGlwcy1kcmFnXCIpLmh0bWwoZ2VuZXJhdGVUcmVlTWFya3VwKCkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hcHBlbmQgdGhlIG1hcmt1cCB0byB0aGUgRE9NXHJcbiAgJCgnI3JlZGlwcy1kcmFnJykuY3NzKCdib3R0b20nLCBzY3JvbGxCYXJXaWR0aCArICdweCcpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Nob3J0ZW4gdGhlIGhlaWdodCBvZiB0aGUgdHJlZSBzZWN0aW9uIGJ5IHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsIGJhclxyXG5cdHJlZGlwcy5pbml0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pbml0aWFsaXplIHRyZWUgZHJhZy9kcm9wIGxpYnJhcnlcclxuXHRpbml0UHJvamVjdEFjdGlvbnMoKTtcdFxyXG59XHJcblxyXG52YXIgaGFuZGxlUHJvamVjdEFjdGlvbiA9IGZ1bmN0aW9uKClcclxue1xyXG5cdGlmKCQoJyNwcm9qZWN0QWN0aW9uU2VsZWN0b3InKS52YWwoKSA9PSAnYWRkRmllbGQnKVxyXG5cdHtcclxuICAgICQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS52YWwoXCJUeXBlIE5ldyBGaWVsZCBOYW1lIGFuZCBQcmVzcyBFbnRlciB0byBDcmVhdGVcIik7XHJcblx0XHQkKCcjcHJvamVjdEFjdGlvbklucHV0Jykuc2hvdygpLmZvY3VzKCkuc2VsZWN0KCk7XHJcblx0fVx0XHJcbn07XHJcblxyXG5mdW5jdGlvbiBwcm9qZWN0QWN0aW9uRW50ZXJQcmVzc2VkKClcclxue1xyXG5cdGlmKCQoJyNwcm9qZWN0QWN0aW9uU2VsZWN0b3InKS52YWwoKSA9PSAnYWRkRmllbGQnKVxyXG5cdHtcclxuXHRcdHZhciBmaWVsZE5hbWUgPSAkKCcjcHJvamVjdEFjdGlvbklucHV0JykudmFsKCk7XHJcblx0XHR0cmVlLmZpZWxkcy5wdXNoKG5ldyBGaWVsZChmaWVsZE5hbWUpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCBuZXcgZmllbGQgdG8gdGhlIG1vZGVsXHJcbiAgICBhZGRDb2x1bW4oZmllbGROYW1lKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCBjb2x1bW4gZm9yIG5ldyBmaWVsZCB0byB0aGUgdmlld1xyXG5cdFx0XHJcbiAgICAkKCcjcHJvamVjdEFjdGlvbklucHV0JykuaGlkZSgpO1xyXG4gICAgJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgnYmxhbmsnKTtcclxuXHR9XHRcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTmV3UHJvamVjdCgpXHJcbntcclxuXHQkKCcjc2VsZWN0UHJvamVjdE9wdGlvbicpLnJlbW92ZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIHRoZSBzZWxlY3QgcHJvamVjdCBvcHRpb24sIG9uY2UgdGhlIHVzZXIgc2VsZWN0cyBhIHByb2plY3QgXHJcblx0XHJcblx0dmFyIG5ld1Byb2plY3ROYW1lID0gJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0JykudmFsKCk7XHJcblx0JCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0JykuaGlkZSgpO1xyXG5cdFxyXG5cdC8vYWRkIGFuIG9wdGlvbiBmb3IgdGhlIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBsaXN0LCBzZWxlY3QgdGhhdCBvcHRpb25cclxuXHR2YXIgbmV3UHJvamVjdElEID0gcHJvamVjdHMubmV4dFByb2plY3RJRC50b1N0cmluZygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETzogbmVlZCB0byBnZXQgdGhpcyBmcm9tIHRoZSBkYXRhYmFzZSB0byBpbnN1cmUgd2UgZ2V0IHRoZSBjb3JyZWN0IGlkXHJcblx0dmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcblx0b3B0aW9uLnRleHQgPSBuZXdQcm9qZWN0TmFtZTtcclxuXHRvcHRpb24udmFsdWUgPSBuZXdQcm9qZWN0SUQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cdCQob3B0aW9uKS5pbnNlcnRCZWZvcmUoJyNwcm9qZWN0U2VsZWN0b3Igb3B0aW9uOm50aC1jaGlsZCgnICsgJCgnI3Byb2plY3RTZWxlY3RvcicpLmxlbmd0aCArICcpJyk7XHJcblx0JCgnI3Byb2plY3RTZWxlY3RvcicpLnZhbChuZXdQcm9qZWN0SUQpO1xyXG5cdFxyXG5cdCQuYWpheCh7IHR5cGU6ICdQT1NUJywgdXJsOiAnL2FwaS9hZGRQcm9qZWN0P3Byb2plY3ROYW1lPScgKyBuZXdQcm9qZWN0TmFtZSB9KTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBuZXcgcHJvamVjdCB0byB0aGUgcHJvamVjdHMgZG9jdW1lbnQgaW4gdGhlIGRhdGFiYXNlXHJcblx0XHJcblx0Ly9jcmVhdGUgYSB0b3Agbm9kZSBhbmQgdHJlZSBmb3IgdGhlIHByb2plY3RcclxuXHR0cmVlID0geyBcInByb2plY3RJRFwiOiBuZXdQcm9qZWN0SUQsIFwicHJvamVjdE5hbWVcIjogbmV3UHJvamVjdE5hbWUsIFwibmFtZVwiOiBuZXdQcm9qZWN0TmFtZSwgXCJ2ZXJzaW9uXCI6IDEsIFwibmV4dE5vZGVJRFwiOiAyLCBcImZpZWxkc1wiOiBbXSwgXCJub2Rlc1wiOiBbeyBcImlkXCI6IDEsIFwibmFtZVwiOiBuZXdQcm9qZWN0TmFtZSwgXCJub2Rlc1wiOiBbXSB9XSB9O1xyXG4gIGRpc3BsYXlTcHJlYWRTaGVldCgpO1xyXG5cdFxyXG5cdFByb2plY3Quc2F2ZVRvRGF0YWJhc2UoKTtcdFxyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93TWVudShlLCBmaWVsZE5hbWUpXHJcbntcclxuICBpZigkKCcjZmllbGRNZW51JykubGVuZ3RoID09PSAwKVxyXG4gIHtcclxuICAgICQoZ2V0RmllbGRNZW51TWFya3VwKGZpZWxkTmFtZSwgZS5jbGllbnRYLCBlLmNsaWVudFkpKS5hcHBlbmRUbygnYm9keScpO1xyXG4gICAgJCgnI2ZpZWxkTWVudScpLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7ICQoJyNmaWVsZE1lbnUnKS5yZW1vdmUoKTsgfSk7XHJcbiAgfVxyXG59IiwidmFyIHJlc2l6ZUNvbHVtbkxlZnQgPSAwO1xyXG52YXIgcmVzaXplRmllbGQgPSAnMCc7XHJcblxyXG52YXIgc3RhcnRSZXNpemUgPSBmdW5jdGlvbihlLCBncmlwKVxyXG57XHJcbiAgJChkb2N1bWVudCkuYmluZCgndG91Y2htb3ZlLnJlc2l6ZUNvbEdyaXAgbW91c2Vtb3ZlLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVEcmFnKS5iaW5kKCd0b3VjaGVuZC5yZXNpemVDb2xHcmlwIG1vdXNldXAucmVzaXplQ29sR3JpcCcsIHJlc2l6ZUVuZCk7XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLmxlZnQgPSBlLnBhZ2VYICsgJ3B4JztcclxuXHJcbiAgcmVzaXplQ29sdW1uTGVmdCA9ICQoZ3JpcC5wYXJlbnROb2RlKS5wb3NpdGlvbigpLmxlZnQ7ICAgICAgICAgICAgICAgICAgICAvL3NhdmUgdGhlIGxlZnQgcG9zaXRpb24gb2YgdGhlIGNvbHVtbiBiZWluZyByZXNpemVkXHJcbiAgcmVzaXplRmllbGQgPSBncmlwLnBhcmVudE5vZGUuaWQucmVwbGFjZSgnY29sSGVhZGVyJywgJycpOyAgICAgICAgICAgICAgICAvL3NhdmUgdGhlIGZpZWxkIG9mIHRoZSBjb2x1bW4gYmVpbmcgcmVzaXplZFxyXG59O1xyXG5cclxudmFyIHJlc2l6ZUVuZCA9IGZ1bmN0aW9uKGUpXHJcbntcclxuICAkKGRvY3VtZW50KS51bmJpbmQoJ3RvdWNobW92ZS5yZXNpemVDb2xHcmlwIG1vdXNlbW92ZS5yZXNpemVDb2xHcmlwJywgcmVzaXplRHJhZykudW5iaW5kKCd0b3VjaGVuZC5yZXNpemVDb2xHcmlwIG1vdXNldXAucmVzaXplQ29sR3JpcCcsIHJlc2l6ZUVuZCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcblxyXG4gIHZhciBuZXdXaWR0aCA9IGUucGFnZVggLSByZXNpemVDb2x1bW5MZWZ0IC0gR1JJUFNfV0lEVEg7XHJcblxyXG4gIGlmKG5ld1dpZHRoIDwgTUlOX0NPTFVNTl9XSURUSClcclxuICB7XHJcbiAgICBuZXdXaWR0aCA9IE1JTl9DT0xVTU5fV0lEVEg7XHJcbiAgfVxyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sSGVhZGVySW5wdXQnICsgcmVzaXplRmllbGQpLnN0eWxlLndpZHRoID0gbmV3V2lkdGggKyAncHgnOyAgICAvL3Jlc2l6ZSB0aGUgd2lkdGggb2YgdGhlIGNvbHVtbiBoZWFkZXJcclxuXHJcbiAgLy9yZXNpemUgdGhlIHdpZHRoIG9mIGV2ZXJ5IGNlbGwgaW4gdGhlIGNvbHVtblxyXG4gIHZhciBjb2x1bW5DZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWVsZElucHV0JyArIHJlc2l6ZUZpZWxkKTtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNvbHVtbkNlbGxzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIGNvbHVtbkNlbGxzW2ldLnN0eWxlLndpZHRoID0gKG5ld1dpZHRoICsgOCkgKyAncHgnO1xyXG4gIH1cclxufTtcclxuXHJcbnZhciByZXNpemVEcmFnID0gZnVuY3Rpb24oZSlcclxue1xyXG4gIGlmKGUucGFnZVggPiByZXNpemVDb2x1bW5MZWZ0ICsgTUlOX0NPTFVNTl9XSURUSCArIEdSSVBTX1dJRFRIKVxyXG4gIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUubGVmdCA9IGUucGFnZVggKyAncHgnOyAgICAgIC8vbW92ZSB0aGUgcmVzaXplIGxpbmUgYXMgdGhlIHVzZXIgZHJhZ3MgaXRcclxuICB9XHJcbn07IiwidmFyIHByb2plY3RzID0gbnVsbDtcclxudmFyIHRyZWU7XHJcblxyXG52YXIgRU5URVJfS0VZID0gMTM7XHJcbnZhciBNSU5fQ09MVU1OX1dJRFRIID0gNzA7XHJcbnZhciBHUklQU19XSURUSCA9IDE2O1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGF0YVNjcm9sbCgpXHJcbntcclxuICAkKCcjcmVkaXBzLWRyYWcnKS5zY3JvbGxUb3AoJCgnI2RhdGEtY29udGFpbmVyJykuc2Nyb2xsVG9wKCkpO1xyXG4gICQoJyNmaWVsZHMtaGVhZGVyLXJvdycpLnNjcm9sbExlZnQoJCgnI2RhdGEtY29udGFpbmVyJykuc2Nyb2xsTGVmdCgpKTtcclxufVxyXG5cclxudmFyIHNlbGVjdFByb2plY3QgPSBmdW5jdGlvbigpXHJcbntcclxuICB2YXIgcHJvamVjdFNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RTZWxlY3RvcicpO1xyXG4gIHZhciBzZWxlY3RlZE9wdGlvbiA9IHByb2plY3RTZWxlY3Rvci5vcHRpb25zW3Byb2plY3RTZWxlY3Rvci5zZWxlY3RlZEluZGV4XTtcclxuXHJcbiAgaWYoc2VsZWN0ZWRPcHRpb24uaWQgPT09IFwibmV3UHJvamVjdE9wdGlvblwiKVxyXG4gIHtcclxuICAgICQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLnZhbChcIlR5cGUgTmV3IFByb2plY3QgTmFtZSBhbmQgUHJlc3MgRW50ZXIgdG8gQ3JlYXRlXCIpO1xyXG4gICAgJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0Jykuc2hvdygpLmZvY3VzKCkuc2VsZWN0KCk7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBpZihwcm9qZWN0U2VsZWN0b3IudmFsdWUgPiAwICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3RQcm9qZWN0T3B0aW9uJykpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIHRoZSBzZWxlY3QgcHJvamVjdCBvcHRpb24sIG9uY2UgdGhlIHVzZXIgc2VsZWN0cyBhIHByb2plY3RcclxuICAgIHtcclxuICAgICAgJCgnI3NlbGVjdFByb2plY3RPcHRpb24nKS5yZW1vdmUoKTsgXHJcbiAgICB9XHJcblxyXG4gICAgJC5hamF4KHsgdHlwZTogJ0dFVCcsIHVybDogJ2FwaS90cmVlP3Byb2plY3RJRD0nICsgcHJvamVjdFNlbGVjdG9yLnZhbHVlIH0pLmRvbmUoZnVuY3Rpb24oZGF0YSkgICAgICAgICAgICAgICAvL3JlYWQgdHJlZSBmb3IgdGhlIHNlbGVjdGVkIHByb2plY3QgZnJvbSB0aGUgZGF0YWJhc2VcclxuICAgIHtcclxuICAgICAgdHJlZSA9IGRhdGE7XHJcbiAgICAgIGRpc3BsYXlTcHJlYWRTaGVldCgpO1xyXG4gICAgICAkKCcjdHJlZS1jb250YWluZXInKS5oaWRlKCk7XHJcbiAgICAgIC8vYnVpbGRUcmVlVmlldyh0cmVlKTtcclxuICAgIH0pOyAgXHJcbiAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxufTtcclxuXHJcbmZ1bmN0aW9uIHByaW50UHJvamVjdCgpXHJcbntcclxuICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh0cmVlLCBudWxsLCAnXFx0JykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNwbGF5UmF3VmFsdWUoZmllbGROYW1lLCBub2RlSUQpXHJcbntcclxuICB2YXIgZmllbGQgPSBQcm9qZWN0LmdldEZpZWxkKGZpZWxkTmFtZSk7XHJcbiAgdmFyIG5vZGUgPSBmaW5kTm9kZUluVHJlZShwYXJzZUludChub2RlSUQpKTtcclxuICBcclxuICBpZihub2RlLnZhbHVlcyAmJiBub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSlcclxuICB7XHJcbiAgICBjb25zb2xlLmxvZyhub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSk7XHJcbiAgICAkKCcjJyArIGZpZWxkTmFtZSArIG5vZGVJRCkudmFsKG5vZGUudmFsdWVzW2ZpZWxkLm5hbWVdKTtcclxuICB9ICBcclxuICBlbHNlXHJcbiAge1xyXG4gICAgJCgnIycgKyBmaWVsZE5hbWUgKyBub2RlSUQpLnZhbCgnJyk7XHJcbiAgfVxyXG59XHJcblxyXG52YXIgZ2V0RGVwdGggPSBmdW5jdGlvbihyb3cpXHJcbntcclxuICB2YXIgY2xhc3NlcyA9IHJvdy5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGMgPSBjbGFzc2VzW2ldO1xyXG5cclxuICAgIGlmKGMuaW5kZXhPZignZGVwdGgnKSA+IC0xKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gcGFyc2VJbnQoYy5yZXBsYWNlKCdkZXB0aCcsICcnKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIGdldFBhcmVudElEID0gZnVuY3Rpb24ocm93KVxyXG57XHJcbiAgdmFyIGNsYXNzZXMgPSByb3cuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIHZhciBjID0gY2xhc3Nlc1tpXTtcclxuXHJcbiAgICBpZihjLmluZGV4T2YoJ3BhcmVudCcpID4gLTEpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBwYXJzZUludChjLnJlcGxhY2UoJ3BhcmVudCcsICcnKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHJlbW92ZVBhcmVudCA9IGZ1bmN0aW9uKHJvdylcclxue1xyXG4gIHZhciBjbGFzc2VzID0gcm93LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgYyA9IGNsYXNzZXNbaV07XHJcblxyXG4gICAgaWYoYy5pbmRleE9mKCdwYXJlbnQnKSA+IC0xKVxyXG4gICAge1xyXG4gICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShjKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZ2V0QW5jZXN0b3JzID0gZnVuY3Rpb24ocm93KVxyXG57XHJcbiAgdmFyIGFuY2VzdG9ycyA9IFtdO1xyXG4gIHZhciBjbGFzc2VzID0gcm93LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgYyA9IGNsYXNzZXNbaV07XHJcblxyXG4gICAgaWYoYy5pbmRleE9mKCdhbmNlc3RvcicpID4gLTEpXHJcbiAgICB7XHJcbiAgICAgIGFuY2VzdG9ycy5wdXNoKGMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGFuY2VzdG9ycztcclxufTtcclxuXHJcbnZhciByZW1vdmVBbmNlc3RvcnMgPSBmdW5jdGlvbihyb3cpXHJcbntcclxuICB2YXIgY2xhc3NlcyA9IHJvdy5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGMgPSBjbGFzc2VzW2ldO1xyXG5cclxuICAgIGlmKGMuaW5kZXhPZignYW5jZXN0b3InKSA+IC0xKVxyXG4gICAge1xyXG4gICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShjKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgYWRkQW5jZXN0b3JzID0gZnVuY3Rpb24ocm93LCBhbmNlc3RvcnMpXHJcbntcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgYW5jZXN0b3JzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIHJvdy5jbGFzc0xpc3QuYWRkKGFuY2VzdG9yc1tpXSk7XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHNldE5ld0FuY2VzdG9ycyA9IGZ1bmN0aW9uKHJvdywgYW5jZXN0b3JzLCBwYXJlbnRJRClcclxue1xyXG4gIHJlbW92ZVBhcmVudChyb3cpO1xyXG4gIHJvdy5jbGFzc0xpc3QuYWRkKCdwYXJlbnQnICsgcGFyZW50SUQpO1xyXG4gIHJlbW92ZUFuY2VzdG9ycyhyb3cpO1xyXG4gIGFkZEFuY2VzdG9ycyhyb3csIGFuY2VzdG9ycyk7XHJcbn07XHJcblxyXG52YXIgbW92ZUFzc2VtYmx5ID0gZnVuY3Rpb24obW92ZWRJRCwgbmV3UGFyZW50SUQsIG9sZFBhcmVudElELCBuZXdQYXJlbnRSb3cpICAgICAgICAgICAgICAgICAgLy9tb3ZlIHRoZSBub2RlL2Fzc2VtYmx5IGluIHRoZSB2aWV3IGFuZCB0aGUgbW9kZWwsIGluY2x1ZGluZyBhbGwgZGVzY2VuZGFudCBub2Rlc1xyXG57XHJcbiAgdmFyIG9sZFBhcmVudE5vZGUgPSBmaW5kTm9kZUluVHJlZShvbGRQYXJlbnRJRCk7XHJcbiAgdmFyIG5ld1BhcmVudE5vZGUgPSBmaW5kTm9kZUluVHJlZShuZXdQYXJlbnRJRCk7XHJcbiAgdmFyIG1vdmVkTm9kZSAgICAgPSBmaW5kTm9kZUluVHJlZShtb3ZlZElEKTtcclxuXHJcbiAgaWYob2xkUGFyZW50Tm9kZSlcclxuICB7XHJcbiAgICBpZihvbGRQYXJlbnROb2RlLm5vZGVzICYmIG9sZFBhcmVudE5vZGUubm9kZXMubGVuZ3RoID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSB0aGUgbW92ZWQgbm9kZSBmcm9tIGl0J3Mgb2xkIHBhcmVudCBpbiB0aGUgbW9kZWxcclxuICAgIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGRQYXJlbnROb2RlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKG9sZFBhcmVudE5vZGUubm9kZXNbaV0uaWQgPT09IG1vdmVkSUQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgb2xkUGFyZW50Tm9kZS5ub2Rlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgaWYgKHRyZWUubm9kZXNbaV0uaWQgPT09IG1vdmVkSUQpXHJcbiAgICAgIHtcclxuICAgICAgICB0cmVlLm5vZGVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfSAgICBcclxuICB9XHJcbiAgXHJcbiAgLy9UT0RPOiBpZiB0aGUgb2xkIHBhcmVudCBpcyBjaGlsZGxlc3Mgbm93LCB0aGVuIGhpZGUgdGhlIG9sZCBwYXJlbnQncyBleHBhbmQvY29sbGFwc2UgaWNvblxyXG5cclxuICBuZXdQYXJlbnROb2RlLm5vZGVzLnB1c2gobW92ZWROb2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgbW92ZWQgbm9kZSB0byBpdCdzIG5ldyBwYXJlbnQgaW4gdGhlIG1vZGVsXHJcblxyXG4gIC8vZml4IHVwIHRoZSBhbmNlc3RvcnMgY2xhc3NlcyBmb3IgdGhlIG1vdmVkIHJvd1xyXG4gIHZhciBtb3ZlZFJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb3dpZCcgKyBtb3ZlZElEKTtcclxuICB2YXIgbW92ZWREYXRhUm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGFyb3dpZCcgKyBtb3ZlZElEKTtcclxuICB2YXIgcGFyZW50RGF0YVJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRhcm93aWQnICsgbmV3UGFyZW50SUQpO1xyXG4gIFxyXG4gIHZhciBhbmNlc3RvcnMgPSBnZXRBbmNlc3RvcnMobmV3UGFyZW50Um93KTtcclxuICBhbmNlc3RvcnMucHVzaCgnYW5jZXN0b3InICsgbmV3UGFyZW50SUQpO1xyXG4gIHNldE5ld0FuY2VzdG9ycyhtb3ZlZFJvdywgYW5jZXN0b3JzLCBuZXdQYXJlbnRJRCk7XHJcblxyXG4gIC8vZml4IHRoZSBkZXB0aCBmb3IgdGhlIG1vdmVkIHJvd1xyXG4gIHZhciBvbGREZXB0aCA9IGdldERlcHRoKG1vdmVkUm93KTtcclxuICB2YXIgbmV3RGVwdGggPSBnZXREZXB0aChuZXdQYXJlbnRSb3cpKzE7XHJcbiAgbW92ZWRSb3cuY2xhc3NMaXN0LnJlbW92ZSgnZGVwdGgnICsgb2xkRGVwdGgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIG9sZCBkZXB0aCBjbGFzc1xyXG4gIG1vdmVkUm93LmNsYXNzTGlzdC5hZGQoJ2RlcHRoJyArIG5ld0RlcHRoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCBuZXcgZGVwdGggY2xhc3NcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kSUQnICsgbW92ZWRJRCkuc3R5bGUubWFyZ2luTGVmdCA9ICgxMCAqIG5ld0RlcHRoKSArICdweCc7ICAgICAgICAgICAgICAgICAgICAgICAgLy9jaGFuZ2UgdGhlIGluZGVudCBvZiB0aGUgbW92ZWQgbm9kZVxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdub2RlSW5wdXQnICsgbW92ZWRJRCkuc3R5bGUud2lkdGggPSAoREVGQVVMVF9OT0RFX0lOUFVUX1dJRFRILW5ld0RlcHRoKjEwKSArICdweCc7ICAgICAvL2NoYW5nZSB0aGUgaW5kZW50IG9mIHRoZSBtb3ZlZCBub2RlXHJcblxyXG4gIC8vbW92ZSB0aGUgdGFibGUgcm93cyBpbiB0aGUgdmlld1xyXG4gICQobW92ZWREYXRhUm93KS5yZW1vdmUoKTtcclxuICAkKG1vdmVkRGF0YVJvdykuaW5zZXJ0QWZ0ZXIocGFyZW50RGF0YVJvdyk7ICAgXHJcbiAgXHJcbiAgaWYobW92ZWROb2RlLm5vZGVzICYmIG1vdmVkTm9kZS5ub2Rlcy5sZW5ndGggPiAwKVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSA9IG1vdmVkTm9kZS5ub2Rlcy5sZW5ndGgtMTsgaSA+PSAwOyBpLS0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0ZSBiYWNrd2FyZHMgdG8gcGVyc2VydmUgdGhlIG9yZGVyIG9mIHRoZSBjaGlsZCBub2Rlc1xyXG4gICAge1xyXG4gICAgICBtb3ZlTm9kZShtb3ZlZE5vZGUubm9kZXNbaV0sIG1vdmVkTm9kZS5ub2Rlc1tpXS5pZCwgbW92ZWRJRCwgbmV3RGVwdGgrMSwgYW5jZXN0b3JzKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgbW92ZU5vZGUgPSBmdW5jdGlvbihub2RlLCBub2RlSUQsIHBhcmVudElELCBuZXdEZXB0aCwgYW5jZXN0b3JzKVxyXG57XHJcbiAgdmFyIG5vZGVSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm93aWQnICsgbm9kZUlEKTtcclxuICB2YXIgbm9kZURhdGFSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YXJvd2lkJyArIG5vZGVJRCk7XHJcbiAgXHJcbiAgdmFyIHBhcmVudFJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb3dpZCcgKyBwYXJlbnRJRCk7XHJcbiAgdmFyIHBhcmVudERhdGFSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YXJvd2lkJyArIHBhcmVudElEKTtcclxuICBcclxuICB2YXIgb2xkRGVwdGggPSBnZXREZXB0aChub2RlUm93KTtcclxuXHJcbiAgdmFyIG5ld0FuY2VzdG9ycyA9IGFuY2VzdG9ycy5zbGljZSgwKTtcclxuICBuZXdBbmNlc3RvcnMucHVzaCgnYW5jZXN0b3InICsgcGFyZW50SUQpO1xyXG4gIHNldE5ld0FuY2VzdG9ycyhub2RlUm93LCBuZXdBbmNlc3RvcnMsIHBhcmVudElEKTtcclxuXHJcbiAgbm9kZVJvdy5jbGFzc0xpc3QucmVtb3ZlKCdkZXB0aCcgKyBvbGREZXB0aCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgb2xkIGRlcHRoIGNsYXNzXHJcbiAgbm9kZVJvdy5jbGFzc0xpc3QuYWRkKCdkZXB0aCcgKyBuZXdEZXB0aCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgbmV3IGRlcHRoIGNsYXNzXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZElEJyArIG5vZGVJRCkuc3R5bGUubWFyZ2luTGVmdCA9ICgxMCAqIG5ld0RlcHRoKSArICdweCc7ICAgLy9jaGFuZ2UgdGhlIGluZGVudCBvZiB0aGUgbW92ZWQgbm9kZVxyXG5cclxuICAkKG5vZGVSb3cpLnJlbW92ZSgpO1xyXG4gICQobm9kZVJvdykuaW5zZXJ0QWZ0ZXIocGFyZW50Um93KTtcclxuICBcclxuICAkKG5vZGVEYXRhUm93KS5yZW1vdmUoKTtcclxuICAkKG5vZGVEYXRhUm93KS5pbnNlcnRBZnRlcihwYXJlbnREYXRhUm93KTsgIFxyXG5cclxuICBpZihub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSBub2RlLm5vZGVzLmxlbmd0aC0xOyBpID49IDA7IGktLSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0ZSBiYWNrd2FyZHMgdG8gcGVyc2VydmUgdGhlIG9yZGVyIG9mIHRoZSBjaGlsZCBub2Rlc1xyXG4gICAge1xyXG4gICAgICBtb3ZlTm9kZShub2RlLm5vZGVzW2ldLCBub2RlLm5vZGVzW2ldLmlkLCBub2RlSUQsIG5ld0RlcHRoKzEsIG5ld0FuY2VzdG9ycyk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIGZpbmROb2RlSW5UcmVlID0gZnVuY3Rpb24obm9kZUlEKVxyXG57XHJcbiAgaWYodHJlZS5ub2RlcyAmJiB0cmVlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIHZhciBmb3VuZE5vZGUgPSBmaW5kTm9kZShub2RlSUQsIHRyZWUubm9kZXNbaV0pO1xyXG5cclxuICAgICAgaWYoZm91bmROb2RlKSB7IHJldHVybiBmb3VuZE5vZGU7IH1cclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZmluZE5vZGUgPSBmdW5jdGlvbihub2RlSUQsIG5vZGUpXHJcbntcclxuICBpZihub2RlLmlkID09PSBub2RlSUQpXHJcbiAge1xyXG4gICAgcmV0dXJuIG5vZGU7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBpZihub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMClcclxuICAgIHtcclxuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgZm91bmROb2RlID0gZmluZE5vZGUobm9kZUlELCBub2RlLm5vZGVzW2ldKTtcclxuXHJcbiAgICAgICAgaWYoZm91bmROb2RlKSB7IHJldHVybiBmb3VuZE5vZGU7IH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciBmaW5kUGFyZW50SW5UcmVlID0gZnVuY3Rpb24obm9kZUlEKVxyXG57XHJcbiAgaWYodHJlZS5ub2RlcyAmJiB0cmVlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kUGFyZW50ID0gZmluZFBhcmVudChub2RlSUQsIHRyZWUubm9kZXNbaV0sIG51bGwpO1xyXG5cclxuICAgICAgICBpZihmb3VuZFBhcmVudCkgeyByZXR1cm4gZm91bmRQYXJlbnQ7IH1cclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZmluZFBhcmVudCA9IGZ1bmN0aW9uKG5vZGVJRCwgbm9kZSwgcGFyZW50KVxyXG57XHJcbiAgaWYobm9kZS5pZCA9PT0gbm9kZUlEKVxyXG4gIHtcclxuICAgIHJldHVybiBwYXJlbnQ7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBpZihub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMClcclxuICAgIHtcclxuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgZm91bmRQYXJlbnQgPSBmaW5kUGFyZW50KG5vZGVJRCwgbm9kZS5ub2Rlc1tpXSwgbm9kZSk7XHJcblxyXG4gICAgICAgIGlmKGZvdW5kUGFyZW50KSB7IHJldHVybiBmb3VuZFBhcmVudDsgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIGRlbGV0ZU5vZGUgPSBmdW5jdGlvbihlbClcclxue1xyXG4gIHZhciByb3cgPSBnZXRBbmNlc3RvclRhZyhlbCwgJ3RyJyk7XHJcbiAgdmFyIG5vZGVJRCA9IHBhcnNlSW50KHJvdy5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSk7XHJcbiAgdmFyIG5vZGUgPSBmaW5kTm9kZUluVHJlZShub2RlSUQpO1xyXG4gIHZhciBwYXJlbnROb2RlID0gZmluZFBhcmVudEluVHJlZShub2RlSUQpO1xyXG4gIFxyXG4gIC8vcmVtb3ZlIHRoZSBub2RlIGZyb20gdGhlIHZpZXdcclxuICByZW1vdmVOb2RlUm93KG5vZGUpO1xyXG4gIFxyXG4gIC8vVE9ETzogaWYgcGFyZW50IGlzIGNoaWxkbGVzcyBub3csIHRoZW4gaGlkZSB0aGUgcGFyZW50J3MgZXhwYW5kL2NvbGxhcHNlIGljb24gXHJcbiAgXHJcbiAgLy9yZW1vdmUgdGhlIG5vZGUgZnJvbSB0aGUgbW9kZWxcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgcGFyZW50Tm9kZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICBpZihwYXJlbnROb2RlLm5vZGVzW2ldLmlkID09IG5vZGVJRClcclxuICAgIHtcclxuICAgICAgcGFyZW50Tm9kZS5ub2Rlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciByZW1vdmVOb2RlUm93ID0gZnVuY3Rpb24obm9kZSlcclxue1xyXG4gIHZhciByb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm93aWQnICsgbm9kZS5pZCk7XHJcbiAgJChyb3cpLnJlbW92ZSgpO1xyXG4gIFxyXG4gIGlmKG5vZGUubm9kZXMgJiYgbm9kZS5ub2Rlcy5sZW5ndGggPiAwKVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICByZW1vdmVOb2RlUm93KG5vZGUubm9kZXNbaV0pO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciBjb3B5Tm9kZSA9IGZ1bmN0aW9uKHNvdXJjZSlcclxue1xyXG4gIHZhciBub2RlSW5kZXg7XHJcbiAgdmFyIG5ld1Jvd01hcmt1cDtcclxuICB2YXIgc291cmNlUm93ID0gZ2V0QW5jZXN0b3JUYWcoc291cmNlLCAndHInKTtcclxuICB2YXIgbm9kZUlEID0gcGFyc2VJbnQoc291cmNlUm93LmlkLnJlcGxhY2UoJ3Jvd2lkJywgJycpKTtcclxuICBcclxuICB2YXIgc291cmNlTm9kZSA9IGZpbmROb2RlSW5UcmVlKG5vZGVJRCk7XHJcbiAgdmFyIHNvdXJjZVBhcmVudE5vZGUgPSBmaW5kUGFyZW50SW5UcmVlKG5vZGVJRCk7XHJcbiAgXHJcbiAgdmFyIG5ld05vZGUgPSBqUXVlcnkuZXh0ZW5kKHRydWUsIHt9LCBzb3VyY2VOb2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2xvbmUgdGhlIHNvdXJjZSBub2RlXHJcbiAgYXNzaWduTmV3Tm9kZUlEcyhuZXdOb2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYXNzaWduIHVuaXF1ZSBpZHMgdG8gZWFjaCBub2RlIGluIHRoZSBjbG9uZVxyXG4gIFxyXG4gIGlmKHNvdXJjZVBhcmVudE5vZGUgPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2hhbmRsZSBjYXNlIHdoZXJlIHRoZSB1c2VyIHRyaWVzIHRvIGNvcHkgYSB0b3AgbGV2ZWwgbm9kZVxyXG4gIHtcclxuICAgIG5vZGVJbmRleCA9IGdldE5vZGVJbmRleCh0cmVlLm5vZGVzLCBzb3VyY2VOb2RlLmlkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICB0cmVlLm5vZGVzLnNwbGljZShub2RlSW5kZXgsIDAsIG5ld05vZGUpO1xyXG4gICAgbmV3Um93TWFya3VwID0gYWRkUm93KG5ld05vZGUsIDAsICcnLCAwKTsgICAgXHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBub2RlSW5kZXggPSBnZXROb2RlSW5kZXgoc291cmNlUGFyZW50Tm9kZS5ub2Rlcywgc291cmNlTm9kZS5pZCk7XHJcbiAgICBzb3VyY2VQYXJlbnROb2RlLm5vZGVzLnNwbGljZShub2RlSW5kZXgsIDAsIG5ld05vZGUpO1xyXG4gICAgbmV3Um93TWFya3VwID0gZ2V0QXNzZW1ibHlNYXJrdXAobmV3Tm9kZS5pZCwgc291cmNlTm9kZS5pZCwgZ2V0RGVwdGgoc291cmNlUm93KSk7XHJcbiAgfVxyXG4gIFxyXG4gICQobmV3Um93TWFya3VwKS5pbnNlcnRCZWZvcmUoc291cmNlUm93KTtcclxuICB2YXIgbmV3Um93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvd2lkJyArIG5ld05vZGUuaWQpO1xyXG4gIFJFRElQUy5kcmFnLmVuYWJsZURpdnMoJ2luaXQnLCBuZXdSb3cuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpKTtcclxufTtcclxuXHJcbnZhciBhc3NpZ25OZXdOb2RlSURzID0gZnVuY3Rpb24obm9kZSlcclxue1xyXG4gIG5vZGUuaWQgPSB0cmVlLm5leHROb2RlSUQrKztcclxuICBcclxuICBpZihub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbm9kZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgYXNzaWduTmV3Tm9kZUlEcyhub2RlLm5vZGVzW2ldKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZ2V0Tm9kZUluZGV4ID0gZnVuY3Rpb24obm9kZXMsIGlkKVxyXG57XHJcbiAgdmFyIGluZGV4ZXMgPSAkLm1hcChub2RlcywgZnVuY3Rpb24ob2JqLCBpbmRleCkgXHJcbiAge1xyXG4gICAgaWYob2JqLmlkID09IGlkKSBcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBpbmRleGVzWzBdO1xyXG59O1xyXG5cclxudmFyIGdldEFuY2VzdG9yVGFnID0gZnVuY3Rpb24gdXBUbyhlbCwgdGFnTmFtZSkgXHJcbntcclxuICB0YWdOYW1lID0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICB3aGlsZSAoZWwgJiYgZWwucGFyZW50Tm9kZSkgXHJcbiAge1xyXG4gICAgZWwgPSBlbC5wYXJlbnROb2RlO1xyXG4gICAgaWYgKGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IHRhZ05hbWUpIFxyXG4gICAge1xyXG4gICAgICByZXR1cm4gZWw7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gdG9nZ2xlKGVsKVxyXG57XHJcbiAgdmFyIHJvdyA9IGdldEFuY2VzdG9yVGFnKGVsLCAndHInKTtcclxuICB2YXIgaWQgPSBwYXJzZUludChyb3cuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gIHZhciBpY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ljb24nICsgaWQpO1xyXG5cclxuICBpZihyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2xsYXBzZWQnKSlcclxuICB7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFyZW50JyArIGlkKTtcclxuICAgIHZhciBjaGlsZHJlbkljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmljb25wJyArIGlkKTtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgY2hpbGRyZW5baV0uY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuSWNvbnMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGlmKGNoaWxkcmVuSWNvbnNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdnbHlwaGljb24tY2hldnJvbi1kb3duJykpXHJcbiAgICAgIHtcclxuICAgICAgICBjaGlsZHJlbkljb25zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2dseXBoaWNvbi1jaGV2cm9uLWRvd24nKTtcclxuICAgICAgICBjaGlsZHJlbkljb25zW2ldLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Jyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2dseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Jyk7XHJcbiAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbi1jaGV2cm9uLWRvd24nKTtcclxuICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzZWQnKTtcclxuICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdmFyIGRlc2NlbmRhbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFuY2VzdG9yJyArIGlkKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlc2NlbmRhbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBkZXNjZW5kYW50c1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG5cclxuICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZ2x5cGhpY29uLWNoZXZyb24tZG93bicpO1xyXG4gICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdnbHlwaGljb24tY2hldnJvbi1yaWdodCcpO1xyXG4gICAgcm93LmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGVkJyk7XHJcbiAgICByb3cuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7XHJcbiAgfVxyXG59XHJcblxyXG52YXIgdXBkYXRlTm9kZU5hbWUgPSBmdW5jdGlvbihlbClcclxue1xyXG4gIHZhciByb3cgPSBnZXRBbmNlc3RvclRhZyhlbCwgJ3RyJyk7XHJcbiAgdmFyIG5vZGVJRCA9IHBhcnNlSW50KHJvdy5pZC5yZXBsYWNlKCdyb3dpZCcsJycpKTtcclxuICB2YXIgbm9kZSA9IGZpbmROb2RlSW5UcmVlKG5vZGVJRCk7XHJcbiAgXHJcbiAgbm9kZS5uYW1lID0gZWwudmFsdWU7XHJcbiAgJCgnI25vZGVJbnB1dCcgKyBub2RlSUQpLmF0dHIoJ3ZhbHVlJywgbm9kZS5uYW1lKTsgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBpbiB0aGUgRE9NLCBzbyB0aGF0IHdoZW4gd2UgZHJhZy9tb3ZlIHRoZSByb3csIHRoZSB2YWx1ZSBpcyBjb3JyZWN0XHJcbn07XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVGaWVsZFZhbHVlKGZpZWxkLCBpZClcclxue1xyXG4gIHVwZGF0ZU5vZGVWYWx1ZUluVHJlZShpZCwgZmllbGQsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkICsgaWQpLnZhbHVlKTtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgYWdncmVnYXRlX2FueSh0cmVlLm5vZGVzW2ldLCBmaWVsZCk7XHJcbiAgfSBcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlTm9kZVZhbHVlSW5UcmVlKGlkLCBmaWVsZCwgdmFsdWUpXHJcbntcclxuICB2YXIgbm9kZSA9IG51bGw7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIG5vZGUgPSB0cmVlLm5vZGVzW2ldO1xyXG4gICAgXHJcbiAgICBpZihub2RlLmlkID09IGlkKVxyXG4gICAge1xyXG4gICAgICBpZighbm9kZS52YWx1ZXMpIHsgbm9kZS52YWx1ZXMgPSB7fTsgfVxyXG4gICAgICBub2RlLnZhbHVlc1tmaWVsZF0gPSB2YWx1ZTsgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7ICAgIFxyXG4gICAgICB1cGRhdGVOb2RlVmFsdWUoaWQsIG5vZGUsIGZpZWxkLCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVOb2RlVmFsdWUoaWQsIG5vZGUsIGZpZWxkLCB2YWx1ZSlcclxue1xyXG4gIHZhciBmb3VuZCA9IG51bGw7XHJcblxyXG4gIGlmKG5vZGUgJiYgbm9kZS5pZCA9PSBpZClcclxuICB7XHJcbiAgICByZXR1cm4gbm9kZTtcclxuICB9XHJcblxyXG4gIGlmKG5vZGUgJiYgbm9kZS5ub2RlcyAmJiBub2RlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGZvdW5kID0gdXBkYXRlTm9kZVZhbHVlKGlkLCBub2RlLm5vZGVzW2ldLCBmaWVsZCwgdmFsdWUpO1xyXG5cclxuICAgICAgaWYoZm91bmQpXHJcbiAgICAgIHtcclxuICAgICAgICBpZighZm91bmQudmFsdWVzKSB7IGZvdW5kLnZhbHVlcyA9IHt9OyB9XHJcbiAgICAgICAgZm91bmQudmFsdWVzW2ZpZWxkXSA9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn0iLCJ2YXIgRmllbGQgPSBmdW5jdGlvbihuYW1lKVxyXG57XHJcbiAgdGhpcy5uYW1lID0gbmFtZTtcclxuICB0aGlzLmRhdGF0eXBlID0gRmllbGQuTlVNQkVSO1xyXG4gIHRoaXMuZm9ybWF0ID0gRmllbGQuTlVNQkVSX0ZPUk1BVDtcclxuICB0aGlzLnByZWNpc2lvbiA9IDI7XHJcbiAgdGhpcy5hZ2dfdHlwZSA9IEZpZWxkLk5PX0FHR1JFR0FUSU9OO1xyXG4gIHRoaXMuYWdnX3F0eV9maWVsZCA9IG51bGw7XHJcbn07XHJcblxyXG5GaWVsZC5OVU1CRVIgPSAnMCc7XHJcbkZpZWxkLlNUUklORyA9ICcxJztcclxuRmllbGQuQ0hPSUNFID0gJzInO1xyXG5cclxuRmllbGQuTk9fQUdHUkVHQVRJT04gPSAnMCc7XHJcbkZpZWxkLlNVTV9BTllfQUdHUkVHQVRJT04gPSAnMSc7XHJcblxyXG5GaWVsZC5OVU1CRVJfRk9STUFUID0gJzAnO1xyXG5GaWVsZC5QRVJDRU5UX0ZPUk1BVCA9ICcxJztcclxuRmllbGQuU0NJRU5USUZJQ19GT1JNQVQgPSAnMic7XHJcblxyXG5GaWVsZC5mb3JtYXRWYWx1ZSA9IGZ1bmN0aW9uKGZpZWxkLCB2YWx1ZSlcclxue1xyXG4gIGlmKGZpZWxkLmRhdGF0eXBlID09PSBGaWVsZC5OVU1CRVIpXHJcbiAge1xyXG4gICAgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5OVU1CRVJfRk9STUFUKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gdmFsdWUudG9GaXhlZChmaWVsZC5wcmVjaXNpb24pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihmaWVsZC5mb3JtYXQgPT09IEZpZWxkLlBFUkNFTlRfRk9STUFUKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gKDEwMC4wICogdmFsdWUpLnRvRml4ZWQoZmllbGQucHJlY2lzaW9uKSArICclJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkudG9FeHBvbmVudGlhbChmaWVsZC5wcmVjaXNpb24pO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlIGlmKGZpZWxkLmRhdGF0eXBlID09PSBGaWVsZC5TVFJJTkcpXHJcbiAge1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH0gXHJcbiAgZWxzZSBpZihmaWVsZC5kYXRhdHlwZSA9PT0gRmllbGQuQ0hPSUNFKVxyXG4gIHtcclxuICAgIC8vVE9ETzogaW1wbGVtZW50XHJcbiAgfSAgICAgIFxyXG59OyAgIiwidmFyIE1lbnUgPSBmdW5jdGlvbigpXHJcbntcclxuICB2YXIgaXRlbXMgPSBbXTtcclxuICBNZW51Lm1lbnUgPSB0aGlzO1xyXG59O1xyXG5cclxuTWVudS5tZW51O1xyXG5cclxuTWVudS5oYW5kbGVDbGljayA9IGZ1bmN0aW9uKGlkKVxyXG57XHJcbiAgdmFyIGNsaWNrZWQgPSBNZW51Lm1lbnUuZ2V0TWVudUl0ZW0oaWQsIE1lbnUubWVudSk7XHJcbiAgdmFyIHBhcmVudCA9IE1lbnUubWVudS5nZXRNZW51SXRlbVBhcmVudChpZCwgTWVudS5tZW51KTtcclxuXHJcbiAgaWYoY2xpY2tlZC5maWVsZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZSBtZW51IGl0ZW0gZG9lc24ndCBoYXZlIGEgZmllbGQgdGhlbiBpZ25vcmUgaXRcclxuICB7XHJcbiAgICB2YXIgZmllbGQgPSBQcm9qZWN0LmdldEZpZWxkKGNsaWNrZWQuZmllbGQubmFtZSk7XHJcbiAgICBmaWVsZFtjbGlja2VkLnZhck5hbWVdID0gY2xpY2tlZC52YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2V0IHZhbHVlIGZvciB0aGUgZmllbGQgaW4gdGhlIG1vZGVsIGJhc2VkIG9uIHRoZSBjbGlja2VkIG1lbnUgaXRlbVxyXG4gIFxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHBhcmVudC5pdGVtcy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jbGVhciB0aGUgY2hlY2ttYXJrcyBmb3IgYWxsIGl0ZW0gb24gdGhlIHNhbWUgbWVudSBsZXZlbFxyXG4gICAge1xyXG4gICAgICAkKCcjbWVudUl0ZW0nICsgcGFyZW50Lml0ZW1zW2ldLmlkKS5yZW1vdmVDbGFzcygnY2hlY2tlZE1lbnVJdGVtJykuYWRkQ2xhc3MoJ3VuY2hlY2tlZE1lbnVJdGVtJyk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAkKCcjbWVudUl0ZW0nICsgaWQpLnJlbW92ZUNsYXNzKCd1bmNoZWNrZWRNZW51SXRlbScpLmFkZENsYXNzKCdjaGVja2VkTWVudUl0ZW0nKTsgICAgICAgICAgICAgICAgICAgICAvL2NoZWNrIHRoZSBpdGVtIHRoYXQgd2FzIGNsaWNrZWRcclxuICAgIFxyXG4gICAgaWYocGFyZW50ID09PSBNZW51Lm1lbnUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGlzIGlzIGEgdG9wIGxldmVsIG1lbnUgaXRlbSB0aGVuIHVwZGF0ZSB0aGUgZm9ybWF0dGluZywgc2luY2Ugd2Ugb25seSB3YW50IHRvIGRvIHRoaXMgb25jZSBwZXIgY2xpY2tcclxuICAgIHtcclxuICAgICAgUHJvamVjdC51cGRhdGVGaWVsZEZvcm1hdHRpbmcoZmllbGQpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbk1lbnUucHJvdG90eXBlLmdldE1lbnVJdGVtID0gZnVuY3Rpb24oaWQsIG1lbnVJdGVtKVxyXG57XHJcbiAgaWYoaWQgPT09IG1lbnVJdGVtLmlkKVxyXG4gIHtcclxuICAgIHJldHVybiBtZW51SXRlbTtcclxuICB9XHJcbiAgZWxzZSBpZihtZW51SXRlbS5pdGVtcyAmJiBtZW51SXRlbS5pdGVtcy5sZW5ndGggPiAwKVxyXG4gIHtcclxuICAgIHZhciBmb3VuZDtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBtZW51SXRlbS5pdGVtcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgZm91bmQgPSB0aGlzLmdldE1lbnVJdGVtKGlkLCBtZW51SXRlbS5pdGVtc1tpXSk7XHJcbiAgICAgIFxyXG4gICAgICBpZihmb3VuZClcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbk1lbnUucHJvdG90eXBlLmdldE1lbnVJdGVtUGFyZW50ID0gZnVuY3Rpb24oaWQsIG1lbnVJdGVtKVxyXG57XHJcbiAgaWYobWVudUl0ZW0uaXRlbXMgJiYgbWVudUl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbWVudUl0ZW0uaXRlbXMubGVuZ3RoOyBpKyspXHJcbiAgICB7IFxyXG4gICAgICBpZihtZW51SXRlbS5pdGVtc1tpXS5pZCA9PT0gaWQpXHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gbWVudUl0ZW07XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kID0gdGhpcy5nZXRNZW51SXRlbVBhcmVudChpZCwgbWVudUl0ZW0uaXRlbXNbaV0pO1xyXG4gICAgICAgIGlmKGZvdW5kKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn07IiwidmFyIE1lbnVJdGVtID0gZnVuY3Rpb24oZGlzcGxheSwgdmFsdWUsIHZhck5hbWUsIGZpZWxkKVxyXG57XHJcbiAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTtcclxuICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgdGhpcy52YXJOYW1lID0gdmFyTmFtZTtcclxuICB0aGlzLmZpZWxkID0gZmllbGQ7XHJcbiAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gIHRoaXMuaWQgPSBNZW51SXRlbS5pZCsrO1xyXG4gIHRoaXMucGFyZW50ID0gLTE7XHJcblxyXG4gIGlmKGZpZWxkKVxyXG4gIHtcclxuICAgIHRoaXMuY2hlY2tlZCA9IGZpZWxkW3Zhck5hbWVdID09PSB2YWx1ZTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHRoaXMuY2hlY2tlZCA9IGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbk1lbnVJdGVtLmlkID0gMDsiLCJmdW5jdGlvbiBQcm9qZWN0KClcclxue1xyXG4gIFxyXG59XHJcblxyXG5Qcm9qZWN0LmdldEZpZWxkID0gZnVuY3Rpb24obmFtZSlcclxue1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLmZpZWxkcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgZmllbGQgPSB0cmVlLmZpZWxkc1tpXTtcclxuICAgIGlmKGZpZWxkLm5hbWUgPT09IG5hbWUpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBmaWVsZDtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcblByb2plY3Quc2F2ZVRvRGF0YWJhc2UgPSBmdW5jdGlvbigpXHJcbntcclxuICAkLmFqYXgoeyB0eXBlOiAnUE9TVCcsIHVybDogJy9hcGkvdHJlZScsIGRhdGFUeXBlOiAnanNvbicsIGRhdGE6IHsganNvbjpKU09OLnN0cmluZ2lmeSh0cmVlKSB9IH0pO1xyXG59O1xyXG5cclxuUHJvamVjdC51cGRhdGVGaWVsZEZvcm1hdHRpbmcgPSBmdW5jdGlvbihmaWVsZCkgICAgICAgICAgICAgICAgIC8vZm9ybWF0cyBhbGwgdGhlIHZhbHVlcyBmb3IgdGhlIGZpZWxkICh0aGUgZW50aXJlIGNvbHVtbilcclxue1xyXG4gICQoJy5maWVsZElucHV0JyArIGZpZWxkLm5hbWUpLmVhY2goZnVuY3Rpb24oaW5kZXgpIFxyXG4gIHtcclxuICAgIHZhciBub2RlSUQgPSAkKHRoaXMpLmF0dHIoJ2lkJykucmVwbGFjZShmaWVsZC5uYW1lLCAnJyk7XHJcbiAgICB2YXIgbm9kZSA9IGZpbmROb2RlSW5UcmVlKHBhcnNlSW50KG5vZGVJRCkpO1xyXG4gICAgXHJcbiAgICBpZihub2RlLnZhbHVlcylcclxuICAgIHtcclxuICAgICAgdmFyIHZhbHVlID0gTnVtYmVyKG5vZGUudmFsdWVzW2ZpZWxkLm5hbWVdKTsgICAgICAgICAgICAgIC8vZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBtb2RlbFxyXG4gICAgICAkKHRoaXMpLnZhbChGaWVsZC5mb3JtYXRWYWx1ZShmaWVsZCwgdmFsdWUpKTsgICAgICAgICAgICAgLy9mb3JtYXQgdGhlIHZhbHVlIGFuZCBkaXNwbGF5IGl0XHJcbiAgICB9XHJcbn0pO1xyXG59O1xyXG5cclxuUHJvamVjdC5nZXRUcmVlID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgcmV0dXJuIHRyZWU7XHJcbn1cclxuXHJcblByb2plY3Quc3dpdGNoVmlldyA9IGZ1bmN0aW9uKClcclxue1xyXG4gIGlmKCQoJyNzcHJlYWRTaGVldFZpZXcnKS5sZW5ndGgpXHJcbiAge1xyXG4gICAgJCgnI3NwcmVhZFNoZWV0VmlldycpLnJlbW92ZSgpO1xyXG4gICAgZGlzcGxheVRyZWVWaWV3KHRyZWUpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgJCgnI3RyZWUtY29udGFpbmVyJykucmVtb3ZlKCk7XHJcbiAgICBkaXNwbGF5U3ByZWFkU2hlZXQoKTtcclxuICB9XHJcbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9