function aggregate_any(e,a){if(e.children&&0!==e.children.length){for(var l=0,n=0;n<e.children.length;n++)l+=aggregate_any(e.children[n],a);return e.values||(e.values={}),e.values[a]=l,document.getElementById(a+e.id).value=l,l}return e.values&&e.values[a]?parseFloat(e.values[a]):0}
var DOWN_ARROW_IMAGE_PATH="images/down-arrow.png",CHECK_MARK_IMAGE_PATH="images/checkmark.png",BLANK_MARK_IMAGE_PATH="images/blankmark.png",ENTER_KEY=13,KEY_UP_ARROW=38,KEY_DOWN_ARROW=40,KEY_LEFT_ARROW=37,KEY_RIGHT_ARROW=39;
function Debug(){}Debug.print=function(n){console.log(JSON.stringify(n,null,"	"))},Debug.printTree=function(){console.log(JSON.stringify(project.tree,null,"	"))};
"use strict";var REDIPS=REDIPS||{};REDIPS.drag=function(){var e,o,t,n,r,d,l,i,a,s,c,f,p,g,u,v,y,m,h,w,E,b,D,I,S,R,P,x,N,T,C,B,j,k=null,L={width:0,height:0},M={width:null,height:null,container:[],obj:null},O={page:{x:0,y:0},div:{x:0,y:0},flag:{x:0,y:0}},Y=[],H=[],W=null,_=null,X={x:0,y:0},A={x:0,y:0,value:7,flag:!1},V=!1,z=!1,F=null,q=null,K=null,$=null,G=null,J=null,Q=!1,U=!1,Z={colorTd:"#FFCFAE",colorTr:"#9BB3DA"},ee={enable:!0,bound:25,speed:20},oe={borderDisabled:"dotted",opacityDisabled:"",rowEmptyColor:"white"},te={},ne={keyDiv:!1,keyRow:!1,sendBack:!1,drop:!1},re={cloned:function(){},clonedDropped:function(){},clonedEnd1:function(){},clonedEnd2:function(){},dropped:function(){},droppedBefore:function(){},finish:function(){},notCloned:function(){},notMoved:function(){},rowChanged:function(){},rowClicked:function(){},rowCloned:function(){},rowDropped:function(){},rowDroppedBefore:function(){},rowDroppedSource:function(){},rowMoved:function(){},rowNotCloned:function(){},rowNotMoved:function(){}};return e=function(){if(W=document.getElementById("redips-drag"),j=m(),!document.getElementById("redips_clone")){var e=document.createElement("div");e.id="redips_clone",e.style.width=e.style.height="1px",W.appendChild(e)}o("init",".redips-drag"),T=document.getElementById("treeTable"),T.redips={},c(),REDIPS.event.add(window,"resize",c),REDIPS.event.add(window,"scroll",y)},n=function(e){var o,t,n,l,i=e||window.event;if(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),V=i.shiftKey,window.getSelection)window.getSelection().removeAllRanges();else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(a){}return n=X.x=i.clientX,l=X.y=i.clientY,A.x=n,A.y=l,A.flag=!1,REDIPS.drag.objOld=U=Q||this,REDIPS.drag.obj=Q=this,z=Q.className.indexOf("redips-clone")>-1,REDIPS.drag.obj=Q=R(Q),y(),F=$=null,f(),K=q=F,J=G=$,REDIPS.drag.event.rowClicked(te.current),null!==F&&null!==$||(f(),K=q=F,J=G=$,null!==F&&null!==$)?(C=B=!1,REDIPS.event.add(document,"mousemove",d),REDIPS.event.add(document,"mouseup",r),null!==F&&(N=u(F)),t=D(T,"position"),"fixed"!==t&&(t=D(T.parentNode,"position")),o=v(Q,t),k=[l-o[0],o[1]-n,o[2]-l,n-o[3]],!1):!0},R=function(e){var o,t,n;return"DIV"===e.nodeName?(n=e,e=I("TR",e),void 0===e.redips&&(e.redips={}),e.redips.div=n,e):(t=e,o=document.createElement("table"),o.innerHTML='<tr id="'+t.id+'" class="'+t.classList+'">'+t.innerHTML+"</tr>",o.redips={},o.redips.sourceRow=t,E(t,o.rows[0]),document.getElementById("redips_clone").appendChild(o),o)},P=function(e){var o,t,n;n=function(e){var o;void 0!==e.redips&&e.redips.emptyRow?S(e,"empty",REDIPS.drag.style.rowEmptyColor):(o=I("TABLE",e),o.deleteRow(e.rowIndex))};var r=Q;e>T.rows.length-1&&(e=T.rows.length-1);var d=T.rows[e];t=r.getElementsByTagName("tr")[0],r.parentNode.removeChild(r),o=REDIPS.drag.event.rowDroppedBefore(T,r.redips.sourceRow.rowIndex),o!==!1&&(e<T.rows.length?d.parentNode.insertBefore(t,d.nextSibling):(d.parentNode.appendChild(t),d=T.rows[0]),B||n(r.redips.sourceRow),delete t.redips.emptyRow,REDIPS.drag.event.rowDropped(d))},r=function(e){var o,t,n,a,s,c,f=e||window.event;if(n=f.clientX,a=f.clientY,O.flag.x=O.flag.y=0,REDIPS.event.remove(document,"mousemove",d),REDIPS.event.remove(document,"mouseup",r),W.onselectstart=null,i(Q),M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,O.flag.x=O.flag.y=0,null===F||null===$)REDIPS.drag.event.notMoved();else{if(REDIPS.drag.td.target=te.target=T.rows[F].cells[$],g(F,N),o=F,C)if(K===o){for(t=Q.getElementsByTagName("tr")[0],U.style.backgroundColor=t.style.backgroundColor,s=0;s<t.cells.length;s++)U.cells[s].style.backgroundColor=t.cells[s].style.backgroundColor;Q.parentNode.removeChild(Q),delete U.redips.emptyRow,B?REDIPS.drag.event.rowNotCloned():REDIPS.drag.event.rowDroppedSource(te.target)}else P(o);else REDIPS.drag.event.rowNotMoved();B||A.flag?B&&K===F&&J===$?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):B&&REDIPS.drag.clone.drop===!1&&(n<T.redips.offset[3]||n>T.redips.offset[1]||a<T.redips.offset[0]||a>T.redips.offset[2])?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):(c=REDIPS.drag.event.droppedBefore(te.target),l(c)):REDIPS.drag.event.notMoved(),y(),REDIPS.drag.event.finish()}q=G=null},l=function(e){var o,t=null;if(e!==!1){if(ne.sendBack===!0){o=te.target.getElementsByTagName("DIV");for(var n=0;n<o.length;n++)if(Q!==o[n]&&0===Q.id.indexOf(o[n].id)){t=o[n];break}if(t)return b(t,1),void Q.parentNode.removeChild(Q)}te.target.appendChild(Q),a(Q),REDIPS.drag.event.dropped(te.target),B&&(REDIPS.drag.event.clonedDropped(te.target),b(U,-1))}else B&&Q.parentNode&&Q.parentNode.removeChild(Q)},a=function(e,o){e.onmousedown=o===!1?null:n},i=function(e){e.style.top="",e.style.left="",e.style.position="",e.style.zIndex=""},d=function(e){var o,t,n,r,d,l,i,a=e||window.event,c=REDIPS.drag.scroll.bound;if(t=X.x=a.clientX,n=X.y=a.clientY,r=Math.abs(A.x-t),d=Math.abs(A.y-n),C||((z||REDIPS.drag.clone.keyRow===!0&&V)&&(B=!0),REDIPS.drag.objOld=U=Q,REDIPS.drag.obj=Q=R(Q),Q.style.zIndex=999,Q.style.position="fixed",y(),f(),B?REDIPS.drag.event.rowCloned():REDIPS.drag.event.rowMoved(),p(),t>L.width-k[1]&&(Q.style.left=L.width-(k[1]+k[3])+"px"),n>L.height-k[2]&&(Q.style.top=L.height-(k[0]+k[2])+"px")),C=!0,t>k[3]&&t<L.width-k[1]&&(Q.style.left=t-k[3]+"px"),n>k[0]&&n<L.height-k[2]&&(Q.style.top=n-k[0]+"px"),t<_[1]&&t>_[3]&&n<_[2]&&n>_[0]&&0===O.flag.x&&0===O.flag.y&&(H.containTable||t<H[3]||t>H[1]||n<H[0]||n>H[2])&&(f(),s()),REDIPS.drag.scroll.enable)for(O.page.x=c-(L.width/2>t?t-k[3]:L.width-t-k[1]),O.page.x>0?(O.page.x>c&&(O.page.x=c),i=0,O.page.x*=t<L.width/2?-1:1,O.page.x<0&&0>=i||O.page.x>0&&i>=M.width-L.width||0===O.flag.x++&&(REDIPS.event.remove(window,"scroll",y),h(window))):O.page.x=0,O.page.y=c-(L.height/2>n?n-k[0]:L.height-n-k[2]),O.page.y>0?(O.page.y>c&&(O.page.y=c),i=window.pageYOffset||document.documentElement.scrollTop,O.page.y*=n<L.height/2?-1:1,O.page.y<0&&0>=i||O.page.y>0&&i>=M.height-L.height||0===O.flag.y++&&(REDIPS.event.remove(window,"scroll",y),w(window))):O.page.y=0,l=0;l<M.container.length;l++){if(o=M.container[l],o.autoscroll&&t<o.offset[1]&&t>o.offset[3]&&n<o.offset[2]&&n>o.offset[0]){O.div.x=c-(o.midstX>t?t-k[3]-o.offset[3]:o.offset[1]-t-k[1]),O.div.x>0?(O.div.x>c&&(O.div.x=c),O.div.x*=t<o.midstX?-1:1,0===O.flag.x++&&(REDIPS.event.remove(o.div,"scroll",y),h(o.div))):O.div.x=0,O.div.y=c-(o.midstY>n?n-k[0]-o.offset[0]:o.offset[2]-n-k[2]),O.div.y>0?(O.div.y>c&&(O.div.y=c),O.div.y*=n<o.midstY?-1:1,0===O.flag.y++&&(REDIPS.event.remove(o.div,"scroll",y),w(o.div))):O.div.y=0;break}O.div.x=O.div.y=0}a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},s=function(){(F!==q||$!==G)&&(null!==q&&null!==G&&(g(q,N),REDIPS.drag.td.previous=te.previous=T.rows[q].cells[G],REDIPS.drag.td.current=te.current=T.rows[F].cells[$],F!==q&&REDIPS.drag.event.rowChanged(te.current)),p())},c=function(){L.width=window.innerWidth,L.height=window.innerHeight,M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,y()},f=function(){var e,o,t,n,r,d,l=[];if(e=function(){null!==q&&null!==G&&(F=q,$=G)},n=X.x,r=X.y,l[0]=T.redips.offset[0],l[1]=T.redips.offset[1],l[2]=T.redips.offset[2],l[3]=T.redips.offset[3],void 0!==T.sca&&(l[0]=l[0]>T.sca.offset[0]?l[0]:T.sca.offset[0],l[1]=l[1]<T.sca.offset[1]?l[1]:T.sca.offset[1],l[2]=l[2]<T.sca.offset[2]?l[2]:T.sca.offset[2],l[3]=l[3]>T.sca.offset[3]?l[3]:T.sca.offset[3]),l[3]<n&&n<l[1]&&l[0]<r&&r<l[2]){for(o=T.redips.row_offset,F=0;F<o.length-1;F++)if(void 0!==o[F]){if(H[0]=o[F][0],void 0!==o[F+1])H[2]=o[F+1][0];else for(d=F+2;d<o.length;d++)if(void 0!==o[d]){H[2]=o[d][0];break}if(r<=H[2])break}t=F,F===o.length-1&&(H[0]=o[F][0],H[2]=T.redips.offset[2]),$=0,0>F||0>$?e():F!==t&&(H[0]=o[F][0],H[2]=H[0]+T.rows[F].cells[$].offsetHeight,(r<H[0]||r>H[2])&&e())}},p=function(){null!==F&&null!==$&&(N=u(F),g(F),q=F,G=$)},g=function(e,o){var t,n;t=T.rows[e];for(var r=0;r<t.cells.length;r++)n=t.cells[r].style,n.backgroundColor=void 0===o?REDIPS.drag.hover.colorTr:o.color[r].toString(),void 0!==REDIPS.drag.hover.borderTr&&(void 0===o?K>F?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:(n.borderTopWidth=o.top[r][0],n.borderTopStyle=o.top[r][1],n.borderTopColor=o.top[r][2],n.borderBottomWidth=o.bottom[r][0],n.borderBottomStyle=o.bottom[r][1],n.borderBottomColor=o.bottom[r][2]))},u=function(e){var o,t,n={color:[],top:[],right:[],bottom:[],left:[]},r=function(e,o){var t="border"+o+"Width",n="border"+o+"Style",r="border"+o+"Color";return[D(e,t),D(e,n),D(e,r)]};o=T.rows[e];for(var d=0;d<o.cells.length;d++)t=o.cells[d],n.color[d]=t.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTr&&(n.top[d]=r(t,"Top"),n.bottom[d]=r(t,"Bottom"));return n},v=function(e,o,t){var n=0,r=0,d=e;if("fixed"!==o&&(n=0-j[0],r=0-j[1]),void 0===t||t===!0){do n+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName)}else do n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName);return[r,n+d.offsetWidth,r+d.offsetHeight,n]},y=function(){var e,o,t;j=m(),e=[],o=D(T,"position"),"fixed"!==o&&(o=D(T.parentNode,"position"));for(var n=T.rows.length-1;n>=0;n--)"none"!==T.rows[n].style.display&&(e[n]=v(T.rows[n],o));T.redips.offset=v(T,o),T.redips.row_offset=e,_=v(W);for(var n=0;n<M.container.length;n++)o=D(M.container[n].div,"position"),t=v(M.container[n].div,o,!1),M.container[n].offset=t,M.container[n].midstX=(t[1]+t[3])/2,M.container[n].midstY=(t[0]+t[2])/2},m=function(){var e=window.pageYOffset||document.documentElement.scrollTop,o=0;return[o,e]},h=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.x>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[0],r=M.width-L.width,d=O.page.x):(n=M.obj.scrollLeft,r=M.obj.scrollWidth-M.obj.clientWidth,d=O.div.x),O.flag.x>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(d,0),n=m()[0],o=parseInt(Q.style.left,10),isNaN(o)&&(o=0)):M.obj.scrollLeft+=d,setTimeout(h,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.x=0,H=[0,0,0,0])},w=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.y>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[1],r=M.height-L.height,d=O.page.y):(n=M.obj.scrollTop,r=M.obj.scrollHeight-M.obj.clientHeight,d=O.div.y),O.flag.y>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(0,d),n=m()[1],o=parseInt(Q.style.top,10),isNaN(o)&&(o=0)):M.obj.scrollTop+=d,setTimeout(w,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.y=0,H=[0,0,0,0])},E=function(e,o){var t,n=[];n[0]=function(e,o){e.redips&&(o.redips={},o.redips.enabled=e.redips.enabled,o.redips.container=e.redips.container,e.redips.enabled&&a(o))},n[1]=function(e,o){e.redips&&(o.redips={},o.redips.emptyRow=e.redips.emptyRow)},t=function(t){var r,d,l=["DIV","TR"];r=e.getElementsByTagName(l[t]),d=o.getElementsByTagName(l[t]);for(var i=0;i<d.length;i++)n[t](r[i],d[i])},"DIV"===e.nodeName?n[0](e,o):"TR"===e.nodeName&&n[1](e,o),t(0),t(1)},b=function(e,t){var n,r,d,l;l=e.className,n=l.match(/climit(\d)_(\d+)/),null!==n&&(r=parseInt(n[1],10),d=parseInt(n[2],10),0===d&&1===t&&(l+=" redips-clone",2===r&&o(!0,e)),d+=t,l=l.replace(/climit\d_\d+/g,"climit"+r+"_"+d),0>=d&&(l=l.replace("redips-clone",""),2===r?(o(!1,e),REDIPS.drag.event.clonedEnd2()):REDIPS.drag.event.clonedEnd1()),e.className=x(l))},o=function(e,o){var n=[];void 0===o?n=W.getElementsByTagName("div"):"string"==typeof o?n=document.querySelectorAll(o):"object"!=typeof o||"DIV"===o.nodeName&&-1!==o.className.indexOf("redips-drag")?n[0]=o:n=o.getElementsByTagName("div"),t(e,n)},t=function(e,o){var t,n,r,d,l,i,s,c,f,p,g,u=[],m=/\bredips-drag\b/i,h=/\bredips-noautoscroll\b/i;for(l=REDIPS.drag.style.opacityDisabled,e===!0||"init"===e?(d=REDIPS.drag.style.borderEnabled,i="move",f=!0):(d=REDIPS.drag.style.borderDisabled,i="auto",f=!1),t=0,n=0;t<o.length;t++)if(m.test(o[t].className))"init"===e||void 0===o[t].redips?(o[t].redips={},o[t].redips.container=W):e===!0&&"number"==typeof l?(o[t].style.opacity="",o[t].style.filter=""):e===!1&&"number"==typeof l&&(o[t].style.opacity=l/100,o[t].style.filter="alpha(opacity="+l+")"),a(o[t],f),o[t].style.borderStyle=d,o[t].style.cursor=i,o[t].redips.enabled=f;else if("init"===e&&(s=D(o[t],"overflow"),"visible"!==s)){for(REDIPS.event.add(o[t],"scroll",y),g=D(o[t],"position"),p=v(o[t],g,!1),c=!h.test(o[t].className),M.container[n]={div:o[t],offset:p,midstX:(p[1]+p[3])/2,midstY:(p[0]+p[2])/2,autoscroll:c},u=o[t].getElementsByTagName("table"),r=0;r<u.length;r++)u[r].sca=M.container[n];n++}},D=function(e,o){return e&&e.currentStyle?e.currentStyle[o]:e&&window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[o]:void 0},I=function(e,o){for(o=o.parentNode;o&&o.nodeName!==e;)o=o.parentNode;return o},x=function(e){return void 0!==e&&(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ")),e},S=function(e,o,t){var n,r,d;if("string"==typeof e&&(e=document.getElementById(e),e=I("TABLE",e)),"TR"===e.nodeName)for(n=e.getElementsByTagName("td"),r=0;r<n.length;r++)if(n[r].style.backgroundColor=t?t:"","empty"===o)n[r].innerHTML="";else for(d=0;d<n[r].childNodes.length;d++)1===n[r].childNodes[d].nodeType&&(n[r].childNodes[d].style.opacity=o/100,n[r].childNodes[d].style.filter="alpha(opacity="+o+")");else e.style.opacity=o/100,e.style.filter="alpha(opacity="+o+")",e.style.backgroundColor=t?t:""},{obj:Q,objOld:U,td:te,hover:Z,scroll:ee,style:oe,clone:ne,init:e,enableDrag:o,enableDivs:t,rowOpacity:S,getScrollPosition:m,getStyle:D,findParent:I,event:re}}(),REDIPS.event||(REDIPS.event=function(){var e,o;return e=function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},o=function(e,o,t){e.removeEventListener?e.removeEventListener(o,t,!1):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=null},{add:e,remove:o}}());
"use strict";var redips={};redips.init=function(){var e=REDIPS.drag;e.init(),e.event.rowDropped=function(o){var n=parseInt(e.objOld.id.replace("rowid","")),t=parseInt(o.id.replace("rowid",""));spreadSheet.moveNode(n,t)},e.event.rowDroppedSource=function(){e.rowOpacity(e.objOld,100)},e.event.rowMoved=function(){e.rowOpacity(e.obj,85),e.rowOpacity(e.objOld,20,"White")},e.event.rowClicked=function(){},e.event.rowNotMoved=function(){},e.event.rowCloned=function(){},e.event.rowNotCloned=function(){},e.event.rowDeleted=function(){},e.event.rowUndeleted=function(){e.rowOpacity(e.objOld,100)}};
var Field=function(i){this.name=i,this.datatype=Field.NUMBER,this.format=Field.NUMBER_FORMAT,this.precision=2,this.agg_type=Field.NO_AGGREGATION,this.agg_qty_field=null};Field.NUMBER="0",Field.STRING="1",Field.CHOICE="2",Field.NO_AGGREGATION="0",Field.SUM_ANY_AGGREGATION="1",Field.NUMBER_FORMAT="0",Field.PERCENT_FORMAT="1",Field.SCIENTIFIC_FORMAT="2",Field.formatValue=function(i,e){if(i.datatype===Field.NUMBER){if(e=Number(e),i.format===Field.NUMBER_FORMAT)return e.toFixed(i.precision);if(i.format===Field.PERCENT_FORMAT)return(100*e).toFixed(i.precision)+"%";if(i.format===Field.SCIENTIFIC_FORMAT)return e.toExponential(i.precision)}else{if(i.datatype===Field.STRING)return e;i.datatype===Field.CHOICE}};
function getFieldMenuMarkup(e,n,t,i){var u=project.getField(e),m=new Menu,s=new MenuItem("Number",Field.NUMBER,"datatype",u),r=new MenuItem("Format"),a=new MenuItem("Number",Field.NUMBER_FORMAT,"format",u);a.items.push(new MenuItem("0",0,"precision",u));for(var M="0.",p=1;11>p;p++)M+="0",a.items.push(new MenuItem(M,p,"precision",u));r.items.push(a);var d=new MenuItem("Percent",Field.PERCENT_FORMAT,"format",u);d.items.push(new MenuItem("0",0,"precision",u));for(var M="0.",p=1;11>p;p++)M+="0",d.items.push(new MenuItem(M+"%",p,"precision",u));r.items.push(d);var l=new MenuItem("Scientific",Field.SCIENTIFIC_FORMAT,"format",u);l.items.push(new MenuItem("0",0,"precision",u));for(var M="0.",p=1;11>p;p++)M+="0",l.items.push(new MenuItem(M+"e+0",p,"precision",u));r.items.push(l),s.items.push(r);var I=new MenuItem("Aggregation");I.items.push(new MenuItem("No Aggregation",Field.NO_AGGREGATION,"agg_type",u));var c=new MenuItem("Sum any defined children",Field.SUM_ANY_AGGREGATION,"agg_type",u);for(var h in i){var o=i[h];o.name!=u.name&&c.items.push(new MenuItem(o.name,o.name,"agg_qty_field",u))}I.items.push(c),s.items.push(I),m.items=[],m.items.push(s),m.items.push(new MenuItem("Text",Field.STRING,"datatype",u));var g='<div id="fieldMenu" style="left:'+n+"px;top:"+t+'px;">';return g+=generateMenuMarkup(m),g+="</div>"}function generateMenuMarkup(e){for(var n="<ul>",t=0;t<e.items.length;t++){var i=e.items[t];n+='<li onclick="Menu.handleClick('+i.id+');">';var u="uncheckedMenuItem";i.field&&i.checked&&(u="checkedMenuItem"),n+='<img id="menuItem'+i.id+'" src="'+CHECK_MARK_IMAGE_PATH+'" class="'+u+'"/>',n+=i.display,i.items&&i.items.length>0&&(n+='<div class="arrowRight"></div>'),i.items&&i.items.length>0&&(n+=generateMenuMarkup(i)),n+="</li>"}return n+"</ul>"}var DEFAULT_NODE_INPUT_WIDTH=390;
var Menu=function(){Menu.menu=this};Menu.menu,Menu.handleClick=function(e){var n=Menu.menu.getMenuItem(e,Menu.menu),t=Menu.menu.getMenuItemParent(e,Menu.menu);if(n.field){var u=project.getField(n.field.name);u[n.varName]=n.value;for(var m in t.items)$("#menuItem"+t.items[m].id).removeClass("checkedMenuItem").addClass("uncheckedMenuItem");$("#menuItem"+e).removeClass("uncheckedMenuItem").addClass("checkedMenuItem"),t===Menu.menu&&spreadSheet.updateNumberFieldFormatting(u)}},Menu.prototype.getMenuItem=function(e,n){if(e===n.id)return n;if(n.items&&n.items.length>0)for(var t,u=0;u<n.items.length;u++)if(t=this.getMenuItem(e,n.items[u]))return t;return null},Menu.prototype.getMenuItemParent=function(e,n){if(n.items&&n.items.length>0)for(var t=0;t<n.items.length;t++){if(n.items[t].id===e)return n;var u=this.getMenuItemParent(e,n.items[t]);if(u)return u}return null};
var MenuItem=function(i,t,e,s){this.display=i,this.value=t,this.varName=e,this.field=s,this.items=[],this.id=MenuItem.id++,this.parent=-1,this.checked=s?s[e]===t:!1};MenuItem.id=0;
var resizeColumnLeft=0,resizeField="0",MIN_COLUMN_WIDTH=70,GRIPS_WIDTH=16,startResize=function(e,i){$(document).bind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).bind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="visible",document.getElementById("resizeLine").style.left=e.pageX+"px",resizeColumnLeft=$(i.parentNode).position().left,resizeField=i.parentNode.id.replace("colHeader","")},resizeEnd=function(e){$(document).unbind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).unbind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="hidden";var i=e.pageX-resizeColumnLeft-GRIPS_WIDTH;MIN_COLUMN_WIDTH>i&&(i=MIN_COLUMN_WIDTH),document.getElementById("colHeaderInput"+resizeField).style.width=i+"px";for(var t=document.querySelectorAll(".fieldInput"+resizeField),r=0;r<t.length;r++)t[r].style.width=i+8+"px"},resizeDrag=function(e){e.pageX>resizeColumnLeft+MIN_COLUMN_WIDTH+GRIPS_WIDTH&&(document.getElementById("resizeLine").style.left=e.pageX+"px")};
$(document).ready(function(){scrollBarWidth=getScrollBarWidth(),hms.init()});var hms={init:function(){projects.init(function(e){headerView.render(e)})},openProject:function(e){projects.openProject(e,function(e){project.tree=e,spreadSheet.display()}),this.view&&this.view.destroy(),this.view=spreadSheetView},saveToDatabase:function(){project.saveToDatabase()},switchView:function(){this.view===spreadSheetView?(this.view.destroy(),this.view=treeView):this.view===treeView&&(this.view.destroy(),this.view=spreadSheetView,spreadSheet.display())},createNewProject:function(e){projects.createNewProject(e),this.view.destroy(),this.view=spreadSheetView,spreadSheet.display()},nextProjectID:function(){return projects.nextProjectID++}},scrollBarWidth,getScrollBarWidth=function(){var e,t;return e=document.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t};
var spreadSheet={display:function(){project.cleanseData(),spreadSheetView.render(project.tree)},fields:function(){return project.fields()},tree:function(){return project.tree},updateFieldValue:function(e,d){var r=project.findNode(d);r&&(r.values||(r.values={}),r.values[e]=spreadSheetView.getFieldValue(e,d)),project.tree.children.forEach(function(d){aggregate_any(d,e)})},rawValue:function(e,d){var r=project.findNode(parseInt(d));return r.values&&r.values[e]?r.values[e]:""},formattedValue:function(e,d){return d.values&&d.values[e.name]?Field.formatValue(e,d.values[e.name]):""},addField:function(e){project.addField(e),spreadSheetView.addField(e)},hasChildren:function(e){return!project.isNodeChildless(e)},childrenHidden:function(e){return project.isNodeCollapsed(e)},moveNode:function(e,d){var r=project.findNode(d),o=project.findNode(e);spreadSheet.removeNode(o),project.addNode(o,r),spreadSheet.addNode(o,r)},removeNode:function(e){var d=project.findParent(e.id);project.traverse(project.getChildren,spreadSheetView.removeNode,e),project.removeNode(e),spreadSheetView.redrawNodeContent(d)},deleteNode:function(e){var d=project.findNode(e);spreadSheet.removeNode(d)},addNode:function(e,d){project.isNodeCollapsed(d)&&spreadSheet.expandNode(d),spreadSheetView.redrawNodeContent(d),spreadSheetView.insertNodeAfter(e,d)},copyNode:function(e){var d=project.findNode(e),r=project.cloneNode(d);project.insertNode(r,d),spreadSheetView.insertNodeBefore(r,d)},expandNode:function(e){project.expandNode(e),spreadSheetView.expandNode(e),spreadSheetView.redrawNodeContent(e)},collapseNode:function(e){project.traverseDescendants(project.getChildren,spreadSheetView.removeNode,e),project.collapseNode(e),spreadSheetView.redrawNodeContent(e)},toggleNode:function(e){var d=project.findNode(e);project.isNodeExpanded(d)?spreadSheet.collapseNode(d):project.isNodeCollapsed(d)&&spreadSheet.expandNode(d)},updateNodeName:function(e,d){project.findNode(e).name=d},updateNumberFieldFormatting:function(e){project.traverse(project.getChildren,function(d){if(d.values){var r=Field.formatValue(e,Number(d.values[e.name]));spreadSheetView.updateFieldValue(e.name,d.id,r)}})},enableDragging:function(e){project.traverse(project.getChildren,spreadSheetView.enableDragging,e)}};
var project={saveToDatabase:function(){$.ajax({type:"POST",url:"/api/tree",dataType:"json",data:{json:JSON.stringify(this.tree)}})},fields:function(){return this.tree.fields},cleanseData:function(){this.traverse(project.getChildren,function(e){e.children||(e.children=[]),delete e.parent})},addField:function(e){this.tree.fields.push(new Field(e))},getField:function(e){for(var n in this.tree.fields){var i=this.tree.fields[n];if(i.name===name)return i}},removeNode:function(e){var n=this.findParent(e.id);n?n.children.splice(n.children.indexOf(e),1):this.tree.children.splice(this.tree.children.indexOf(e),1)},addNode:function(e,n){n.children.push(e),project.setDepths(n)},setDepths:function(e){e.children.forEach(function(n,i){n.depth=e.depth+1,project.setDepths(n)})},insertNode:function(e,n){var i=this.findParent(n.id);i?i.children.splice(i.children.indexOf(n),0,e):this.tree.children.splice(this.tree.children.indexOf(n),0,e)},cloneNode:function(e){var n=$.extend(!0,{},e);return this.traverse(this.getChildren,function(e){e.id=project.tree.nextNodeID++},n),n},expandNode:function(e){e.children=e._children,e._children=[]},collapseNode:function(e){e._children=e.children,e.children=[]},isNodeChildless:function(e){return!(e.children&&0!==e.children.length||e._children&&0!==e._children.length)},isNodeCollapsed:function(e){return e._children&&e._children.length>0},isNodeExpanded:function(e){return e.children&&e.children.length>0},findNode:function(e,n){if(n||(n=this.tree),n.id===e)return n;for(var i in n.children){var r=this.findNode(e,n.children[i]);if(r)return r}},findParent:function(e,n,i){if(n||(n=this.tree),n.id===e)return i;for(var r in n.children){var t=this.findParent(e,n.children[r],n);if(t)return t}},traverse:function(e,n,i){i||(i=project.tree),n(i);var r=e(i);for(var t in r)project.traverse(e,n,r[t])},traverseDescendants:function(e,n,i){i||(i=project.tree),i.children.forEach(function(i){project.traverse(e,n,i)})},getChildren:function(e){return e.children&&e.children.length>0?e.children:null}};
var projects={init:function(e){$.ajax({type:"GET",url:"api/projects"}).done(function(t){this.data=t,e(t.projects)})},createNewProject:function(e){$.ajax({type:"POST",url:"/api/addProject?projectName="+e}),project.tree={projectID:project.nextProjectID,projectName:e,name:e,version:1,nextNodeID:2,depth:0,fields:[],children:[{id:1,name:e,depth:1,children:[]}]},project.saveToDatabase()},openProject:function(e,t){$.ajax({type:"GET",url:"api/tree?projectID="+e}).done(function(e){t(e)})}};
var headerView={render:function(e){var t='<select id="projectSelector" class="form-control"><option id="selectProjectOption" value="0">Select Project...</option>';e.forEach(function(e){t+='<option value="'+e.id+'">'+e.name+"</option>"}),t+='<option id="newProjectOption" value="-1">Create New Project...</option></select><input id="editNewProjectNameInput" class="form-control"></input><a href="#" id="save-database-button" class="btn btn-default">Save to Database</a><a href="#" id="switchViewButton" class="btn btn-default">Switch View</a>',$("#header").html(t),$("#projectSelector").change(function(){headerView.selectProject($(this))}),$("#save-database-button").click(function(){hms.saveToDatabase()}),$("#switchViewButton").click(function(){hms.switchView()}),$("#editNewProjectNameInput").keyup(function(e){headerView.createNewProject(e)})},selectProject:function(e){"newProjectOption"===e.find(":selected").attr("id")?($("#editNewProjectNameInput").val("Type New Project Name and Press Enter to Create"),$("#editNewProjectNameInput").show().focus().select()):($("#selectProjectOption").remove(),hms.openProject(e.val()))},createNewProject:function(e){if(e.keyCode==ENTER_KEY){$("#selectProjectOption").remove();var t=$("#editNewProjectNameInput").val();$("#editNewProjectNameInput").hide();var o=hms.nextProjectID(),c=document.createElement("option");c.text=t,c.value=o.toString(),$(c).insertBefore("#projectSelector option:nth-child("+$("#projectSelector").length+")"),$("#projectSelector").val(o),hms.createNewProject(t)}}};
var projectAction={init:function(){$("#project-action-container").html(projectAction.markup()),$("#projectActionInput").keyup(function(t){t.keyCode==ENTER_KEY&&projectAction.enterPressed()}),$("#projectActionSelector").change(projectAction.handle)},handle:function(){"addField"==$("#projectActionSelector").val()&&($("#projectActionInput").val("Type New Field Name and Press Enter to Create"),$("#projectActionInput").show().focus().select())},enterPressed:function(){"addField"==$("#projectActionSelector").val()&&(spreadSheet.addField($("#projectActionInput").val()),$("#projectActionInput").hide(),$("#projectActionSelector").val("blank"))},markup:function(){return'<table><tr id="headerRow"><tr><div id="project-select-container"><select id="projectActionSelector" class="form-control"><option value="blank"></option><option value="addField">Add Field</option></select><input id="projectActionInput" class="form-control"></input></div></tr><table>'}};
var spreadSheetKeyHandler={checkKey:function(e){if(e=e||window.event,e.keyCode==KEY_UP_ARROW){e.preventDefault();var t=$(spreadSheetKeyHandler.findAncestor(document.activeElement,"tr")).prev()[0];t&&$("#"+spreadSheetKeyHandler.getNextElementID(t)).focus()}else if(e.keyCode==KEY_DOWN_ARROW){e.preventDefault();var n=$(spreadSheetKeyHandler.findAncestor(document.activeElement,"tr")).next()[0];n&&$("#"+spreadSheetKeyHandler.getNextElementID(n)).focus()}else e.keyCode==KEY_RIGHT_ARROW?(e.preventDefault(),$(spreadSheetKeyHandler.findAncestor(document.activeElement,"td")).next().find("input").focus()):e.keyCode==KEY_LEFT_ARROW&&(e.preventDefault(),$(spreadSheetKeyHandler.findAncestor(document.activeElement,"td")).prev().find("input").focus())},getNextElementID:function(e){var t=document.activeElement.id;if(t.indexOf("nodeInput")>-1)return"nodeInput"+e.id.replace("rowid","");for(var n=document.activeElement.className.split(" "),r=0;r<n.length;r++){var d=n[r];if(d.indexOf("fieldInput")>-1&&"fieldInput"!=d){var a=d.replace("fieldInput","");return a+e.id.replace("datarowid","")}}},findAncestor:function(e,t){for(t=t.toLowerCase();e&&e.parentNode;)if(e=e.parentNode,e.tagName&&e.tagName.toLowerCase()===t)return e}};
var spreadSheetView={render:function(){$(document).on("keydown",spreadSheetKeyHandler.checkKey),$("body").append(this.spreadSheetMarkup()),projectAction.init(),this.renderFieldsRow(),this.renderDataTable(),this.renderNodeColumn()},destroy:function(){$("#spreadSheetView").remove(),$(document).off("keydown")},spreadSheetMarkup:function(){return'<div id="spreadSheetView"><div id="project-action-container"></div><div id="fields-header-row"></div><div id="redips-drag"></div><div id="data-container"></div></div>'},renderFieldsRow:function(){$("#fields-header-row").html('<table id="fieldHeaderTable"><tr id="fieldHeaderRow"></tr></table>'),spreadSheet.fields().forEach(function(e){$("#fieldHeaderRow").append(spreadSheetView.fieldHeader(e.name)),$("#fieldMenuButton"+e.name).click(function(d){spreadSheetView.showFieldMenu(d,e.name)})}),$("#fields-header-row").css("right",scrollBarWidth+"px")},fieldHeader:function(e){return'<td class="fieldHeaderCell"><div class="fieldHeaderContainer"><div class="moveColGrip"></div><div class="fieldNameInputContainer"><textarea id="colHeaderInput'+e+'" class="fieldNameInput">'+e+'</textarea></div><div class="fieldHeaderButton"><img id="fieldMenuButton'+e+'" src="images/down-arrow.png"/></div><div id="grip'+e+'" class="resizeColGrip" onmousedown="startResize(event, this)"></div></div></td>'},showFieldMenu:function(e,d){0===$("#fieldMenu").length&&($(getFieldMenuMarkup(d,e.clientX,e.clientY,spreadSheet.fields())).appendTo("body"),$("#fieldMenu").mouseleave(function(){$("#fieldMenu").remove()}))},renderDataTable:function(){$("#data-container").append('<table id="dataTable"></table>'),spreadSheet.tree().children.forEach(function(e){$("#dataTable").append(spreadSheetView.dataRowsMarkup(e))}),$("#data-container").scroll(function(){$("#redips-drag").scrollTop($("#data-container").scrollTop()),$("#fields-header-row").scrollLeft($("#data-container").scrollLeft())})},dataRowsMarkup:function(e){var d='<tr id="datarowid'+e.id+'" class="dataRow">';return spreadSheet.fields().forEach(function(t){d+='<td class="cell"><input class="fieldInput fieldInput'+t.name+'" type="text" id="'+t.name+e.id+'" value="'+spreadSheet.formattedValue(t,e)+'" oninput="spreadSheet.updateFieldValue(\''+t.name+"',"+e.id+')" onfocus="$(this).val(spreadSheet.rawValue(\''+t.name+"',"+e.id+'))"></td>'}),e.children.forEach(function(e){d+=spreadSheetView.dataRowsMarkup(e)}),d+"</tr>"},renderDataCell:function(e,d,t,n){$(e).append(spreadSheetView.fieldCell(d,t,n)),$("#"+d+t).on("input",function(){spreadSheet.updateFieldValue(d,t)}),$("#"+d+t).focus(function(){$(this).val(spreadSheet.rawValue(d,t))})},fieldCell:function(e,d,t){return'<td class="cell"><input class="fieldInput fieldInput'+e+'" type="text" id="'+e+d+'" value="'+t+'"></td>'},nodeRowMarkup:function(e){var d='<tr id="rowid'+e.id+'" class="nodeRow"><td class="redips-rowhandler cell"><div id="nodeContent'+e.id+'" class="node-container">';return d+=spreadSheetView.deleteButton(e.id)+spreadSheetView.copyButton(e.id)+spreadSheetView.dragHandle,d+=spreadSheetView.nodeContent(e),e.children.forEach(function(e){d+=spreadSheetView.nodeRowMarkup(e)}),d+"</div></td></tr>"},nodeContent:function(e){var d,t=10*(e.depth-1),n=t;return spreadSheet.hasChildren(e)?d=spreadSheet.childrenHidden(e)?'<span class="glyphicon glyphicon-chevron-right"></span>':'<span class="glyphicon glyphicon-chevron-down"></span>':(d="<span></span>",t+=12,n-=10),spreadSheetView.expandIcon(e.id,t,d)+spreadSheetView.nodeInput(e,DEFAULT_NODE_INPUT_WIDTH-n)},renderNodeColumn:function(){$("#redips-drag").html('<table id="treeTable"></table>'),spreadSheet.tree().children.forEach(function(e){$("#treeTable").append(spreadSheetView.nodeRowMarkup(e))}),$("#redips-drag").css("bottom",scrollBarWidth+"px"),redips.init()},dragHandle:'<div class="redips-drag pull-right"><i class="glyphicon glyphicon-move"></i></div>',copyButton:function(e){return'<a href="#"  class="pull-right btn btn-info btn-xs copy-button" onclick="spreadSheet.copyNode('+e+')"><i class="glyphicon glyphicon-plus"></i></a>'},deleteButton:function(e){return'<a href="#" class="pull-right btn btn-danger btn-xs delete-button" onclick="spreadSheet.deleteNode('+e+')"><i class="glyphicon glyphicon-remove"></i></a>'},expandIcon:function(e,d,t){return'<a href="#" id="icon'+e+'" class="btn btn-xs" style="margin-left:'+d+'px" onclick="spreadSheet.toggleNode('+e+')">'+t+"</a>"},nodeInput:function(e,d){return'<input id="nodeInput'+e.id+'" class="nodeTextInput" style="width:'+d+'px" type="text" value="'+e.name+'" oninput="spreadSheetView.updateNodeName('+e.id+')"/>'},expandNode:function(e){for(var d,t=e.children.length-1;t>=0;t--)d=e.children[t],$(spreadSheetView.dataRowsMarkup(d)).insertAfter($("#datarowid"+e.id)),$(spreadSheetView.nodeRowMarkup(d)).insertAfter($("#rowid"+e.id));spreadSheetView.enableDragging(e)},redrawNodeContent:function(e){$("#icon"+e.id).remove(),$("#nodeInput"+e.id).remove(),$("#nodeContent"+e.id).append(spreadSheetView.nodeContent(e))},addField:function(e){$("#fieldHeaderRow").append(this.fieldHeaderMarkup(e,spreadSheet.fields().length)),$("#fieldMenuButton"+e).click(function(d){spreadSheetView.showFieldMenu(d,e)}),$(".dataRow").each(function(d,t){spreadSheetView.renderDataCell(t,e,parseInt(t.id.replace("datarowid","")),"")})},updateNodeName:function(e){var d=$("#nodeInput"+e).val();spreadSheet.updateNodeName(e,d),$("#nodeInput"+e).attr("value",d)},removeNode:function(e){$("#rowid"+e.id).remove(),$("#datarowid"+e.id).remove()},insertNodeBefore:function(e,d){$(spreadSheetView.nodeRowMarkup(e)).insertBefore($("#rowid"+d.id)),$(spreadSheetView.dataRowsMarkup(e)).insertBefore($("#datarowid"+d.id)),spreadSheetView.enableDragging(e)},insertNodeAfter:function(e,d){$(spreadSheetView.nodeRowMarkup(e)).insertAfter($("#rowid"+d.id)),$(spreadSheetView.dataRowsMarkup(e)).insertAfter($("#datarowid"+d.id)),spreadSheetView.enableDragging(e)},enableDragging:function(e){REDIPS.drag.enableDivs("init",$("#rowid"+e.id).find("div"))},getFieldValue:function(e,d){return $("#"+e+d).val()},updateFieldValue:function(e,d,t){$("#"+e+d).val(t)}};
function TreeView(){}var treeView={render:function(){},destroy:function(){$("#tree-container").remove()}};TreeView.display=function(t){function e(t,n,r){if(t){n(t);var a=r(t);if(a)for(var l=a.length,i=0;l>i;i++)e(a[i],n,r)}}function n(){A.sort(function(t,e){return e.name.toLowerCase()<t.name.toLowerCase()?1:-1})}function r(t,e){var n=m;panTimer&&(clearTimeout(panTimer),translateCoords=d3.transform(z.attr("transform")),"left"==e||"right"==e?(translateX="left"==e?translateCoords.translate[0]+n:translateCoords.translate[0]-n,translateY=translateCoords.translate[1]):("up"==e||"down"==e)&&(translateX=translateCoords.translate[0],translateY="up"==e?translateCoords.translate[1]+n:translateCoords.translate[1]-n),scaleX=translateCoords.scale[0],scaleY=translateCoords.scale[1],scale=X.scale(),z.transition().attr("transform","translate("+translateX+","+translateY+")scale("+scale+")"),d3.select(t).select("g.node").attr("transform","translate("+translateX+","+translateY+")"),X.scale(X.scale()),X.translate([translateX,translateY]),panTimer=setTimeout(function(){r(t,n,e)},50))}function a(){z.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function l(t,e){p=t,d3.select(e).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(e).attr("class","node activeDrag"),z.selectAll("g.node").sort(function(t,e){return t.id!=p.id?1:-1}),nodes.length>1&&(links=A.links(nodes),nodePaths=z.selectAll("path.link").data(links,function(t){return t.target.id}).remove(),nodesExit=z.selectAll("g.node").data(nodes,function(t){return t.id}).filter(function(t,e){return t.id==p.id?!1:!0}).remove()),parentLink=A.links(A.nodes(p.parent)),z.selectAll("path.link").filter(function(t,e){return t.target.id==p.id?!0:!1}).remove(),dragStarted=null}function i(){g=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),N(),null!==p&&(u(f),s(p),p=null)}function o(t){t._children&&(t.children=t._children,t.children.forEach(o),t._children=[])}function s(t){scale=X.scale(),x=-t.y0,y=-t.x0,x=x*scale+k/2,y=y*scale+w/2,d3.select("g").transition().duration(T).attr("transform","translate("+x+","+y+")scale("+scale+")"),X.scale(scale),X.translate([x,y])}function c(t){return t.children?(t._children=t.children,t.children=[]):t._children&&(t.children=t._children,t._children=[]),t}function d(t){d3.event.defaultPrevented||(t=c(t),u(t),s(t))}function u(t){var e=function(t,e){return t.values&&t.values[e]&&t.values[e]>5?t.values[e]:5},n=[1],r=function(t,e){e.children&&e.children.length>0&&(n.length<=t+1&&n.push(0),n[t+1]+=e.children.length,e.children.forEach(function(e){r(t+1,e)}))};r(0,f);var a=25*d3.max(n);A=A.size([a,k]);var l=A.nodes(f).reverse(),i=A.links(l);l.forEach(function(t){t.y=10*t.depth*v}),node=z.selectAll("g.node").data(l,function(t){return t.id||(t.id=++_)});var o=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).on("click",d);o.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(t){return t._children?"lightsteelblue":"#fff"}),o.append("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}).style("fill-opacity",0),o.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(t){b(t)}).on("mouseout",function(t){L(t)}),node.select("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}),node.select("circle.nodeCircle").attr("r",function(t){return e(t)}).style("fill",function(t){return t._children?"lightsteelblue":"#fff"});var s=node.transition().duration(T).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});s.select("text").style("fill-opacity",1);var c=node.exit().transition().duration(T).attr("transform",function(e){return"translate("+t.y+","+t.x+")"}).remove();c.select("circle").attr("r",0),c.select("text").style("fill-opacity",0);var u=z.selectAll("path.link").data(i,function(t){return t.target.id});u.enter().insert("path","g").attr("class","link").attr("d",function(e){var n={x:t.x0,y:t.y0};return E({source:n,target:n})}),u.transition().duration(T).attr("d",E),u.exit().transition().duration(T).attr("d",function(e){var n={x:t.x,y:t.y};return E({source:n,target:n})}).remove(),l.forEach(function(t){t.x0=t.x,t.y0=t.y})}$("body").append('<div id="tree-container"></div>');var f,h=0,v=0,g=null,p=null,m=200,C=20,_=0,T=750,k=$("#tree-container").width(),w=$("#tree-container").height(),A=d3.layout.tree().size([w,k]),E=d3.svg.diagonal().projection(function(t){return[t.y,t.x]});e(t,function(t){h++,v=Math.max(t.name.length,v)},function(t){return t.children&&t.children.length>0?t.children:null}),n();var X=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",a),Y=d3.select("#tree-container").append("svg").attr("width",k).attr("height",w).attr("class","overlay").call(X);dragListener=d3.behavior.drag().on("dragstart",function(t){t!=f&&(dragStarted=!0,nodes=A.nodes(t),d3.event.sourceEvent.stopPropagation())}).on("drag",function(t){if(t!=f){if(dragStarted&&(domNode=this,l(t,domNode)),relCoords=d3.mouse($("svg").get(0)),relCoords[0]<C)panTimer=!0,r(this,"left");else if(relCoords[0]>$("svg").width()-C)panTimer=!0,r(this,"right");else if(relCoords[1]<C)panTimer=!0,r(this,"up");else if(relCoords[1]>$("svg").height()-C)panTimer=!0,r(this,"down");else try{clearTimeout(panTimer)}catch(e){}t.x0+=d3.event.dy,t.y0+=d3.event.dx;var n=d3.select(this);n.attr("transform","translate("+t.y0+","+t.x0+")"),N()}}).on("dragend",function(t){if(t!=f)if(domNode=this,g){var e=p.parent.children.indexOf(p);e>-1&&p.parent.children.splice(e,1),g.children||g._children?g.children?g.children.push(p):g._children.push(p):(g.children=[],g.children.push(p)),o(g),n(),i()}else i()});var b=function(t){g=t,N()},L=function(t){g=null,N()},N=function(){var t=[];null!==p&&null!==g&&(t=[{source:{x:g.y0,y:g.x0},target:{x:p.y0,y:p.x0}}]);var e=z.selectAll(".templink").data(t);e.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),e.attr("d",d3.svg.diagonal()),e.exit().remove()},z=Y.append("g");f=t,f.x0=w/2,f.y0=0,u(f),s(f)};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZy5qcyIsImNvbnN0YW50cy5qcyIsIkRlYnVnLmpzIiwiZHJhZy1saWIuanMiLCJkcmFnLmpzIiwiRmllbGQuanMiLCJtYXJrdXAuanMiLCJNZW51LmpzIiwiTWVudUl0ZW0uanMiLCJyZXNpemUtY29sdW1uLmpzIiwiY29udHJvbGxlci9obXMuanMiLCJjb250cm9sbGVyL3NwcmVhZFNoZWV0LmpzIiwibW9kZWwvcHJvamVjdC5qcyIsIm1vZGVsL3Byb2plY3RzLmpzIiwidmlldy9oZWFkZXJWaWV3LmpzIiwidmlldy9wcm9qZWN0QWN0aW9uLmpzIiwidmlldy9zcHJlYWRTaGVldEtleUhhbmRsZXIuanMiLCJ2aWV3L3NwcmVhZFNoZWV0Vmlldy5qcyIsInZpZXcvdHJlZVZpZXcuanMiXSwibmFtZXMiOlsiYWdncmVnYXRlX2FueSIsIm5vZGUiLCJmaWVsZCIsImNoaWxkcmVuIiwibGVuZ3RoIiwiY2hpbGRyZW5TdW0iLCJpIiwidmFsdWVzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlkIiwidmFsdWUiLCJwYXJzZUZsb2F0IiwiRE9XTl9BUlJPV19JTUFHRV9QQVRIIiwiQ0hFQ0tfTUFSS19JTUFHRV9QQVRIIiwiQkxBTktfTUFSS19JTUFHRV9QQVRIIiwiRU5URVJfS0VZIiwiS0VZX1VQX0FSUk9XIiwiS0VZX0RPV05fQVJST1ciLCJLRVlfTEVGVF9BUlJPVyIsIktFWV9SSUdIVF9BUlJPVyIsIkRlYnVnIiwicHJpbnQiLCJvIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcmludFRyZWUiLCJwcm9qZWN0IiwidHJlZSIsIlJFRElQUyIsImRyYWciLCJpbml0IiwiZW5hYmxlRHJhZyIsImVuYWJsZURpdnMiLCJoYW5kbGVyT25Nb3VzZURvd24iLCJoYW5kbGVyT25Nb3VzZVVwIiwiaGFuZGxlck9uTW91c2VNb3ZlIiwiZWxlbWVudERyb3AiLCJyZXNldFN0eWxlcyIsInJlZ2lzdGVyRXZlbnRzIiwiY2VsbENoYW5nZWQiLCJoYW5kbGVyT25SZXNpemUiLCJzZXRUYWJsZVJvd0NvbHVtbiIsInNldFBvc2l0aW9uIiwic2V0VGRTdHlsZSIsImdldFRkU3R5bGUiLCJib3hPZmZzZXQiLCJjYWxjdWxhdGVDZWxscyIsImdldFNjcm9sbFBvc2l0aW9uIiwiYXV0b1Njcm9sbFgiLCJhdXRvU2Nyb2xsWSIsImNvcHlQcm9wZXJ0aWVzIiwiY2xvbmVMaW1pdCIsImdldFN0eWxlIiwiZmluZFBhcmVudCIsInJvd09wYWNpdHkiLCJyb3dDbG9uZSIsInJvd0Ryb3AiLCJub3JtYWxpemUiLCJiZ1N0eWxlT2xkIiwidGFibGUiLCJtb3ZlZCIsImNsb25lZCIsIndpbmRvd1Njcm9sbFBvc2l0aW9uIiwib2JqTWFyZ2luIiwic2NyZWVuIiwid2lkdGgiLCJoZWlnaHQiLCJzY3JvbGxEYXRhIiwiY29udGFpbmVyIiwib2JqIiwiZWRnZSIsInBhZ2UiLCJ4IiwieSIsImRpdiIsImZsYWciLCJjbG9uZWRJZCIsImN1cnJlbnRDZWxsIiwiZHJhZ0NvbnRhaW5lciIsImRpdkJveCIsInBvaW50ZXIiLCJ0aHJlc2hvbGQiLCJzaGlmdEtleSIsImNsb25lQ2xhc3MiLCJyb3ciLCJyb3dfb2xkIiwicm93X3NvdXJjZSIsImNlbGwiLCJjZWxsX29sZCIsImNlbGxfc291cmNlIiwib2JqT2xkIiwiaG92ZXIiLCJjb2xvclRkIiwiY29sb3JUciIsInNjcm9sbCIsImVuYWJsZSIsImJvdW5kIiwic3BlZWQiLCJzdHlsZSIsImJvcmRlckRpc2FibGVkIiwib3BhY2l0eURpc2FibGVkIiwicm93RW1wdHlDb2xvciIsInRkIiwiY2xvbmUiLCJrZXlEaXYiLCJrZXlSb3ciLCJzZW5kQmFjayIsImRyb3AiLCJldmVudCIsImNsb25lZERyb3BwZWQiLCJjbG9uZWRFbmQxIiwiY2xvbmVkRW5kMiIsImRyb3BwZWQiLCJkcm9wcGVkQmVmb3JlIiwiZmluaXNoIiwibm90Q2xvbmVkIiwibm90TW92ZWQiLCJyb3dDaGFuZ2VkIiwicm93Q2xpY2tlZCIsInJvd0Nsb25lZCIsInJvd0Ryb3BwZWQiLCJyb3dEcm9wcGVkQmVmb3JlIiwicm93RHJvcHBlZFNvdXJjZSIsInJvd01vdmVkIiwicm93Tm90Q2xvbmVkIiwicm93Tm90TW92ZWQiLCJyZWRpcHNDbG9uZSIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsInJlZGlwcyIsImFkZCIsIndpbmRvdyIsImUiLCJvZmZzZXQiLCJwb3NpdGlvbiIsIlgiLCJZIiwiZXZ0IiwiY2FuY2VsQnViYmxlIiwic3RvcFByb3BhZ2F0aW9uIiwiZ2V0U2VsZWN0aW9uIiwicmVtb3ZlQWxsUmFuZ2VzIiwic2VsZWN0aW9uIiwidHlwZSIsImVtcHR5IiwiZXJyb3IiLCJjbGllbnRYIiwiY2xpZW50WSIsInRoaXMiLCJjbGFzc05hbWUiLCJpbmRleE9mIiwiY3VycmVudCIsInBhcmVudE5vZGUiLCJlbCIsInRhYmxlTWluaSIsInJvd09iaiIsIm5vZGVOYW1lIiwidW5kZWZpbmVkIiwiaW5uZXJIVE1MIiwiY2xhc3NMaXN0Iiwic291cmNlUm93Iiwicm93cyIsInJvd0lkeCIsInRyTWluaSIsImRlbGV0ZVRhYmxlUm93IiwidGJsIiwiZW1wdHlSb3ciLCJkZWxldGVSb3ciLCJyb3dJbmRleCIsInRhYmxlUm93IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwicl9yb3ciLCJtdF90ciIsInJlbW92ZSIsIm9uc2VsZWN0c3RhcnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxXaWR0aCIsInNjcm9sbEhlaWdodCIsInRhcmdldCIsImNlbGxzIiwiYmFja2dyb3VuZENvbG9yIiwiY2xvbmVTb3VyY2VEaXYiLCJvbm1vdXNlZG93biIsInRvcCIsImxlZnQiLCJ6SW5kZXgiLCJzY2EiLCJkZWx0YVgiLCJkZWx0YVkiLCJzY3JvbGxQb3NpdGlvbiIsIk1hdGgiLCJhYnMiLCJjb250YWluVGFibGUiLCJwYWdlWU9mZnNldCIsInNjcm9sbFRvcCIsImF1dG9zY3JvbGwiLCJtaWRzdFgiLCJtaWRzdFkiLCJwcmV2aW91cyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInJvd19vZmZzZXQiLCJyb3dfZm91bmQiLCJ0b3MiLCJvZmZzZXRIZWlnaHQiLCJyaSIsInQiLCJ0ciIsInMiLCJjb2xvciIsInRvU3RyaW5nIiwiYm9yZGVyVHIiLCJib3JkZXJUb3AiLCJib3JkZXJCb3R0b20iLCJib3JkZXJUb3BXaWR0aCIsImJvcmRlclRvcFN0eWxlIiwiYm9yZGVyVG9wQ29sb3IiLCJib3JkZXJCb3R0b21XaWR0aCIsImJvdHRvbSIsImJvcmRlckJvdHRvbVN0eWxlIiwiYm9yZGVyQm90dG9tQ29sb3IiLCJjIiwicmlnaHQiLCJib3JkZXIiLCJuYW1lIiwiYm94IiwiYm94X3Njcm9sbCIsIm9MZWZ0Iiwib1RvcCIsImJveE9sZCIsIm9mZnNldExlZnQiLCJzY3JvbGxMZWZ0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0UGFyZW50Iiwib2Zmc2V0V2lkdGgiLCJjYiIsImRpc3BsYXkiLCJzY3JvbGxZIiwic2Nyb2xsWCIsInNvIiwicG9zIiwib2xkIiwibWF4c3AiLCJlZGdlQ3Jvc3NlZCIsImNsaWVudFdpZHRoIiwic2Nyb2xsQnkiLCJwYXJzZUludCIsImlzTmFOIiwic2V0VGltZW91dCIsImNsaWVudEhlaWdodCIsInNyYyIsImNsbiIsImNoaWxkcyIsImNvcHkiLCJlMSIsImUyIiwiZW5hYmxlZCIsImVsMSIsImVsMiIsInRuIiwibWF0Y2hBcnJheSIsImxpbWl0VHlwZSIsImxpbWl0IiwiY2xhc3NlcyIsIm1hdGNoIiwicmVwbGFjZSIsImVuYWJsZV9mbGFnIiwicXVlcnlTZWxlY3RvckFsbCIsImoiLCJrIiwiYm9yZGVyU3R5bGUiLCJvcGFjaXR5IiwiY3Vyc29yIiwib3ZlcmZsb3ciLCJ0YmxzIiwicmVnZXhEcmFnIiwicmVnZXhOb0F1dG9zY3JvbGwiLCJib3JkZXJFbmFibGVkIiwidGVzdCIsImZpbHRlciIsInN0eWxlX25hbWUiLCJjdXJyZW50U3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwiZGVmYXVsdFZpZXciLCJ0YWdfbmFtZSIsInN0ciIsInRkTm9kZUxpc3QiLCJjaGlsZE5vZGVzIiwibm9kZVR5cGUiLCJldmVudE5hbWUiLCJoYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50IiwicmQiLCJuZXdQYXJlbnRSb3ciLCJtb3ZlZElEIiwibmV3UGFyZW50SUQiLCJzcHJlYWRTaGVldCIsIm1vdmVOb2RlIiwicm93RGVsZXRlZCIsInJvd1VuZGVsZXRlZCIsIkZpZWxkIiwiZGF0YXR5cGUiLCJOVU1CRVIiLCJmb3JtYXQiLCJOVU1CRVJfRk9STUFUIiwicHJlY2lzaW9uIiwiYWdnX3R5cGUiLCJOT19BR0dSRUdBVElPTiIsImFnZ19xdHlfZmllbGQiLCJTVFJJTkciLCJDSE9JQ0UiLCJTVU1fQU5ZX0FHR1JFR0FUSU9OIiwiUEVSQ0VOVF9GT1JNQVQiLCJTQ0lFTlRJRklDX0ZPUk1BVCIsImZvcm1hdFZhbHVlIiwiTnVtYmVyIiwidG9GaXhlZCIsInRvRXhwb25lbnRpYWwiLCJnZXRGaWVsZE1lbnVNYXJrdXAiLCJmaWVsZE5hbWUiLCJmaWVsZHMiLCJnZXRGaWVsZCIsIm1lbnUiLCJNZW51IiwibnVtYmVySXRlbSIsIk1lbnVJdGVtIiwiZm9ybWF0SXRlbSIsIm51bWJlckZvcm1hdEl0ZW0iLCJpdGVtcyIsInB1c2giLCJkaXNwbGF5U3RyaW5nIiwicGVyY2VudEZvcm1hdEl0ZW0iLCJzY2llbnRpZmljRm9ybWF0SXRlbSIsImFnZ3JlZ2F0aW9uSXRlbSIsInN1bUFueUFnZ0l0ZW0iLCJpbmRleCIsImYiLCJtYXJrdXAiLCJnZW5lcmF0ZU1lbnVNYXJrdXAiLCJpdGVtIiwiY2hlY2tNYXJrQ2xhc3MiLCJjaGVja2VkIiwiREVGQVVMVF9OT0RFX0lOUFVUX1dJRFRIIiwiaGFuZGxlQ2xpY2siLCJjbGlja2VkIiwiZ2V0TWVudUl0ZW0iLCJwYXJlbnQiLCJnZXRNZW51SXRlbVBhcmVudCIsInZhck5hbWUiLCIkIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInVwZGF0ZU51bWJlckZpZWxkRm9ybWF0dGluZyIsInByb3RvdHlwZSIsIm1lbnVJdGVtIiwiZm91bmQiLCJyZXNpemVDb2x1bW5MZWZ0IiwicmVzaXplRmllbGQiLCJNSU5fQ09MVU1OX1dJRFRIIiwiR1JJUFNfV0lEVEgiLCJzdGFydFJlc2l6ZSIsImdyaXAiLCJiaW5kIiwicmVzaXplRHJhZyIsInJlc2l6ZUVuZCIsInZpc2liaWxpdHkiLCJwYWdlWCIsInVuYmluZCIsIm5ld1dpZHRoIiwiY29sdW1uQ2VsbHMiLCJyZWFkeSIsInNjcm9sbEJhcldpZHRoIiwiZ2V0U2Nyb2xsQmFyV2lkdGgiLCJobXMiLCJwcm9qZWN0cyIsImhlYWRlclZpZXciLCJyZW5kZXIiLCJvcGVuUHJvamVjdCIsInByb2plY3RJRCIsInZpZXciLCJkZXN0cm95Iiwic3ByZWFkU2hlZXRWaWV3Iiwic2F2ZVRvRGF0YWJhc2UiLCJzd2l0Y2hWaWV3IiwidHJlZVZpZXciLCJjcmVhdGVOZXdQcm9qZWN0IiwibmV3UHJvamVjdE5hbWUiLCJuZXh0UHJvamVjdElEIiwiZmlyc3RDaGlsZCIsImJvZHkiLCJjbGVhbnNlRGF0YSIsInVwZGF0ZUZpZWxkVmFsdWUiLCJub2RlSUQiLCJmaW5kTm9kZSIsImdldEZpZWxkVmFsdWUiLCJmb3JFYWNoIiwiY2hpbGQiLCJyYXdWYWx1ZSIsImZvcm1hdHRlZFZhbHVlIiwiYWRkRmllbGQiLCJoYXNDaGlsZHJlbiIsImlzTm9kZUNoaWxkbGVzcyIsImNoaWxkcmVuSGlkZGVuIiwiaXNOb2RlQ29sbGFwc2VkIiwibmV3UGFyZW50Tm9kZSIsInJlbW92ZU5vZGUiLCJhZGROb2RlIiwidHJhdmVyc2UiLCJnZXRDaGlsZHJlbiIsInJlZHJhd05vZGVDb250ZW50IiwiZGVsZXRlTm9kZSIsImV4cGFuZE5vZGUiLCJpbnNlcnROb2RlQWZ0ZXIiLCJjb3B5Tm9kZSIsInNvdXJjZU5vZGUiLCJuZXdOb2RlIiwiY2xvbmVOb2RlIiwiaW5zZXJ0Tm9kZSIsImluc2VydE5vZGVCZWZvcmUiLCJjb2xsYXBzZU5vZGUiLCJ0cmF2ZXJzZURlc2NlbmRhbnRzIiwidG9nZ2xlTm9kZSIsImlzTm9kZUV4cGFuZGVkIiwidXBkYXRlTm9kZU5hbWUiLCJuZXdOYW1lIiwiZW5hYmxlRHJhZ2dpbmciLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJkYXRhIiwianNvbiIsInNwbGljZSIsInNldERlcHRocyIsImRlcHRoIiwiZXh0ZW5kIiwibmV4dE5vZGVJRCIsIl9jaGlsZHJlbiIsInNlYXJjaE5vZGUiLCJmb3VuZE5vZGUiLCJmb3VuZFBhcmVudCIsImNoaWxkcmVuRm4iLCJ2aXNpdEZuIiwiZmluaXNoRm4iLCJkb25lIiwicHJvamVjdE5hbWUiLCJ2ZXJzaW9uIiwiaHRtbCIsImNoYW5nZSIsInNlbGVjdFByb2plY3QiLCJjbGljayIsImtleXVwIiwicHJvamVjdFNlbGVjdG9yIiwiZmluZCIsImF0dHIiLCJ2YWwiLCJzaG93IiwiZm9jdXMiLCJzZWxlY3QiLCJrZXlDb2RlIiwiaGlkZSIsIm5ld1Byb2plY3RJRCIsIm9wdGlvbiIsInRleHQiLCJwcm9qZWN0QWN0aW9uIiwiZW50ZXJQcmVzc2VkIiwiaGFuZGxlIiwic3ByZWFkU2hlZXRLZXlIYW5kbGVyIiwiY2hlY2tLZXkiLCJwcmV2ZW50RGVmYXVsdCIsInByZXZSb3ciLCJmaW5kQW5jZXN0b3IiLCJhY3RpdmVFbGVtZW50IiwicHJldiIsImdldE5leHRFbGVtZW50SUQiLCJuZXh0Um93IiwibmV4dCIsIm5ld1JvdyIsInNwbGl0IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwib24iLCJhcHBlbmQiLCJzcHJlYWRTaGVldE1hcmt1cCIsInJlbmRlckZpZWxkc1JvdyIsInJlbmRlckRhdGFUYWJsZSIsInJlbmRlck5vZGVDb2x1bW4iLCJvZmYiLCJmaWVsZEhlYWRlciIsInNob3dGaWVsZE1lbnUiLCJjc3MiLCJhcHBlbmRUbyIsIm1vdXNlbGVhdmUiLCJkYXRhUm93c01hcmt1cCIsInJlbmRlckRhdGFDZWxsIiwiZmllbGRDZWxsIiwibm9kZVJvd01hcmt1cCIsImRlbGV0ZUJ1dHRvbiIsImNvcHlCdXR0b24iLCJkcmFnSGFuZGxlIiwibm9kZUNvbnRlbnQiLCJpY29uTWFya3VwIiwiZGVwdGhBZGp1c3RtZW50Iiwid2lkdGhBZGp1c3RtZW50IiwiZXhwYW5kSWNvbiIsIm5vZGVJbnB1dCIsImluc2VydEFmdGVyIiwiZmllbGRIZWFkZXJNYXJrdXAiLCJlYWNoIiwiaW5zZXJ0QmVmb3JlTm9kZSIsImluc2VydEFmdGVyTm9kZSIsIlRyZWVWaWV3IiwidHJlZURhdGEiLCJ2aXNpdCIsImNvdW50Iiwic29ydFRyZWUiLCJzb3J0IiwiYSIsImIiLCJwYW4iLCJkb21Ob2RlIiwiZGlyZWN0aW9uIiwicGFuU3BlZWQiLCJwYW5UaW1lciIsImNsZWFyVGltZW91dCIsInRyYW5zbGF0ZUNvb3JkcyIsImQzIiwidHJhbnNmb3JtIiwic3ZnR3JvdXAiLCJ0cmFuc2xhdGVYIiwidHJhbnNsYXRlIiwidHJhbnNsYXRlWSIsInNjYWxlWCIsInNjYWxlIiwic2NhbGVZIiwiem9vbUxpc3RlbmVyIiwidHJhbnNpdGlvbiIsInpvb20iLCJpbml0aWF0ZURyYWciLCJkIiwiZHJhZ2dpbmdOb2RlIiwic2VsZWN0QWxsIiwibm9kZXMiLCJsaW5rcyIsIm5vZGVQYXRocyIsIm5vZGVzRXhpdCIsInBhcmVudExpbmsiLCJkcmFnU3RhcnRlZCIsImVuZERyYWciLCJzZWxlY3RlZE5vZGUiLCJ1cGRhdGVUZW1wQ29ubmVjdG9yIiwidXBkYXRlIiwicm9vdCIsImNlbnRlck5vZGUiLCJleHBhbmQiLCJzb3VyY2UiLCJ5MCIsIngwIiwidmlld2VyV2lkdGgiLCJ2aWV3ZXJIZWlnaHQiLCJkdXJhdGlvbiIsInRvZ2dsZUNoaWxkcmVuIiwiZGVmYXVsdFByZXZlbnRlZCIsImNvbXB1dGVOb2RlU2l6ZSIsImxldmVsV2lkdGgiLCJjaGlsZENvdW50IiwibGV2ZWwiLCJuIiwibmV3SGVpZ2h0IiwibWF4Iiwic2l6ZSIsInJldmVyc2UiLCJtYXhMYWJlbExlbmd0aCIsIm5vZGVFbnRlciIsImVudGVyIiwiY2FsbCIsImRyYWdMaXN0ZW5lciIsIm92ZXJDaXJjbGUiLCJvdXRDaXJjbGUiLCJub2RlVXBkYXRlIiwibm9kZUV4aXQiLCJleGl0IiwibGluayIsImluc2VydCIsImRpYWdvbmFsIiwidG90YWxOb2RlcyIsInBhbkJvdW5kYXJ5IiwibGF5b3V0Iiwic3ZnIiwicHJvamVjdGlvbiIsImJlaGF2aW9yIiwic2NhbGVFeHRlbnQiLCJiYXNlU3ZnIiwic291cmNlRXZlbnQiLCJyZWxDb29yZHMiLCJtb3VzZSIsImdldCIsImR5IiwiZHgiXSwibWFwcGluZ3MiOiJBQUFBLFFBQVNBLGVBQWNDLEVBQU1DLEdBRTNCLEdBQUlELEVBQUtFLFVBQXFDLElBQXpCRixFQUFLRSxTQUFTQyxPQVluQyxDQUdFLElBQUksR0FGQUMsR0FBYyxFQUVWQyxFQUFJLEVBQUdBLEVBQUlMLEVBQUtFLFNBQVNDLE9BQVFFLElBRXZDRCxHQUFlTCxjQUFjQyxFQUFLRSxTQUFTRyxHQUFJSixFQVdqRCxPQVJJRCxHQUFLTSxTQUVQTixFQUFLTSxXQUdQTixFQUFLTSxPQUFPTCxHQUFTRyxFQUNyQkcsU0FBU0MsZUFBZVAsRUFBUUQsRUFBS1MsSUFBSUMsTUFBUU4sRUFFMUNBLEVBMUJQLE1BQUlKLEdBQUtNLFFBQVdOLEVBQUtNLE9BQU9MLEdBTXZCVSxXQUFXWCxFQUFLTSxPQUFPTCxJQUp2QjtBQ05iLEdBQUlXLHVCQUF3Qix3QkFDeEJDLHNCQUF3Qix1QkFDeEJDLHNCQUF3Qix1QkFFeEJDLFVBQVksR0FFWkMsYUFBZSxHQUNmQyxlQUFpQixHQUNqQkMsZUFBaUIsR0FDakJDLGdCQUFrQjtBQ1R0QixRQUFTQyxVQUVUQSxNQUFNQyxNQUFRLFNBQVNDLEdBRXJCQyxRQUFRQyxJQUFJQyxLQUFLQyxVQUFVSixFQUFHLEtBQU0sT0FHdENGLE1BQU1PLFVBQVksV0FFaEJKLFFBQVFDLElBQUlDLEtBQUtDLFVBQVVFLFFBQVFDLEtBQU0sS0FBTTtB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QnhlLEVBQUdpZSxFQUFhUSxJQUVwQjdYLFFBQ0k3RyxFQUFHeWQsRUFBYWdCLEdBQ2hCeGUsRUFBR3dkLEVBQWFpQixNQUk1QixJQUFJeUIsR0FBT3RELEVBQVNhLFVBQVUsYUFBYS9HLEtBQUtBLEVBRWhEd0osR0FBS1IsUUFBUTVGLE9BQU8sUUFDZjVCLEtBQUssUUFBUyxZQUNkQSxLQUFLLElBQUt3RSxHQUFHOEQsSUFBSUosWUFDakJsSSxLQUFLLGlCQUFrQixRQUU1QmdJLEVBQUtoSSxLQUFLLElBQUt3RSxHQUFHOEQsSUFBSUosWUFFdEJGLEVBQUtELE9BQU8xWixVQWtPWnFXLEVBQVdnRSxFQUFROUcsT0FBTyxJQUc5QnNFLEdBQU94QyxFQUNQd0MsRUFBS0ssR0FBS0UsRUFBZSxFQUN6QlAsRUFBS0ksR0FBSyxFQVFWTCxFQUFPQyxHQUNQQyxFQUFXRCIsImZpbGUiOiJobXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gYWdncmVnYXRlX2FueShub2RlLCBmaWVsZClcclxue1xyXG4gIGlmKCFub2RlLmNoaWxkcmVuIHx8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKVxyXG4gIHtcclxuICAgIGlmKCFub2RlLnZhbHVlcyB8fCAhbm9kZS52YWx1ZXNbZmllbGRdKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gMC4wO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChub2RlLnZhbHVlc1tmaWVsZF0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdmFyIGNoaWxkcmVuU3VtID0gMC4wO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBjaGlsZHJlblN1bSArPSBhZ2dyZWdhdGVfYW55KG5vZGUuY2hpbGRyZW5baV0sIGZpZWxkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZighbm9kZS52YWx1ZXMpXHJcbiAgICB7XHJcbiAgICAgIG5vZGUudmFsdWVzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgbm9kZS52YWx1ZXNbZmllbGRdID0gY2hpbGRyZW5TdW07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBtb2RlbFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGQgKyBub2RlLmlkKS52YWx1ZSA9IGNoaWxkcmVuU3VtOyAgICAgICAgIC8vdXBkYXRlIHRoZSB2aWV3XHJcblxyXG4gICAgcmV0dXJuIGNoaWxkcmVuU3VtO1xyXG4gIH1cclxufSIsInZhciBET1dOX0FSUk9XX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2Rvd24tYXJyb3cucG5nJztcclxudmFyIENIRUNLX01BUktfSU1BR0VfUEFUSCA9ICdpbWFnZXMvY2hlY2ttYXJrLnBuZyc7XHJcbnZhciBCTEFOS19NQVJLX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2JsYW5rbWFyay5wbmcnO1xyXG5cclxudmFyIEVOVEVSX0tFWSA9IDEzO1xyXG5cclxudmFyIEtFWV9VUF9BUlJPVyA9IDM4O1xyXG52YXIgS0VZX0RPV05fQVJST1cgPSA0MDtcclxudmFyIEtFWV9MRUZUX0FSUk9XID0gMzc7XHJcbnZhciBLRVlfUklHSFRfQVJST1cgPSAzOTsiLCJmdW5jdGlvbiBEZWJ1ZygpIHt9XHJcblxyXG5EZWJ1Zy5wcmludCA9IGZ1bmN0aW9uKG8pXHJcbntcclxuICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShvLCBudWxsLCAnXFx0JykpOyAgXHJcbn07XHJcblxyXG5EZWJ1Zy5wcmludFRyZWUgPSBmdW5jdGlvbigpXHJcbntcclxuICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShwcm9qZWN0LnRyZWUsIG51bGwsICdcXHQnKSk7XHJcbn07IiwiLypcclxuQ29weXJpZ2h0IChjKSAyMDA4LTIwMTEsIHd3dy5yZWRpcHMubmV0IEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkNvZGUgbGljZW5zZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlOiBodHRwOi8vd3d3LnJlZGlwcy5uZXQvbGljZW5zZS9cclxuaHR0cDovL3d3dy5yZWRpcHMubmV0L2phdmFzY3JpcHQvZHJhZy1hbmQtZHJvcC10YWJsZS1jb250ZW50L1xyXG4qL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgUkVESVBTID0gUkVESVBTIHx8IHt9OyAgICAgIC8vY3JlYXRlIFJFRElQUyBuYW1lc3BhY2UgKGlmIGlzIG5vdCBhbHJlYWR5IGRlZmluZWQgaW4gYW5vdGhlciBSRURJUFMgcGFja2FnZSlcclxuXHJcbi8vUkVESVBTLmRyYWcgaXMgYSBKYXZhU2NyaXB0IGRyYWcgYW5kIGRyb3AgbGlicmFyeSBmb2N1c2VkIG9uIGRyYWdnaW5nIHRhYmxlIGNvbnRlbnQgKERJViBlbGVtZW50cykgYW5kIHRhYmxlIHJvd3MuXHJcblJFRElQUy5kcmFnID0gKGZ1bmN0aW9uICgpXHJcbntcclxuICAgIC8vIG1ldGhvZHNcclxuICB2YXIgaW5pdCwgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uXHJcbiAgICBlbmFibGVEcmFnLCAgICAgICAgIC8vIG1ldGhvZCBhdHRhY2hlcyAvIGRldGFjaGVzIG9ubW91c2Vkb3duIGFuZCBvbnNjcm9sbCBldmVudCBoYW5kbGVycyBmb3IgRElWIGVsZW1lbnRzXHJcbiAgICBlbmFibGVEaXZzLFxyXG4gICAgaGFuZGxlck9uTW91c2VEb3duLCAgICAgLy8gb25tb3VzZWRvd24gaGFuZGxlclxyXG4gICAgaGFuZGxlck9uTW91c2VVcCwgICAgIC8vIG9ubW91c2V1cCBoYW5kbGVyXHJcbiAgICBoYW5kbGVyT25Nb3VzZU1vdmUsICAgICAvLyBvbm1vdXNlbW92ZSBoYW5kbGVyIGZvciB0aGUgZG9jdW1lbnQgbGV2ZWxcclxuICAgIGVsZW1lbnREcm9wLCAgICAgICAgLy8gZHJvcCBlbGVtZW50IHRvIHRoZSB0YWJsZSBjZWxsXHJcbiAgICByZXNldFN0eWxlcywgICAgICAgIC8vIHJlc2V0IG9iamVjdCBzdHlsZXMgYWZ0ZXIgZWxlbWVudCBpcyBkcm9wcGVkXHJcbiAgICByZWdpc3RlckV2ZW50cywgICAgICAgLy8gcmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIGZvciBESVYgZWxlbWVudFxyXG4gICAgY2VsbENoYW5nZWQsICAgICAgICAvLyBwcml2YXRlIG1ldGhvZCBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmUoKSwgYXV0b1Njcm9sbFgoKSwgYXV0b1Njcm9sbFkoKVxyXG4gICAgaGFuZGxlck9uUmVzaXplLCAgICAgIC8vIG9ucmVzaXplIHdpbmRvdyBldmVudCBoYW5kbGVyXHJcbiAgICBzZXRUYWJsZVJvd0NvbHVtbiwgICAgICAvLyBmdW5jdGlvbiBzZXRzIGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbFxyXG4gICAgc2V0UG9zaXRpb24sICAgICAgICAvLyBmdW5jdGlvbiBzZXRzIGNvbG9yIGZvciB0aGUgY3VycmVudCB0YWJsZSBjZWxsIGFuZCByZW1lbWJlcnMgcHJldmlvdXMgcG9zaXRpb24gYW5kIGNvbG9yXHJcbiAgICBzZXRUZFN0eWxlLCAgICAgICAgIC8vIG1ldGhvZCBzZXRzIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgZm9yIFREXHJcbiAgICBnZXRUZFN0eWxlLCAgICAgICAgIC8vIG1ldGhvZCByZXR1cm5zIG9iamVjdCBjb250YWluaW5nIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgZm9yIFREXHJcbiAgICBib3hPZmZzZXQsICAgICAgICAgIC8vIGNhbGN1bGF0ZXMgb2JqZWN0IChib3gpIG9mZnNldCAodG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KVxyXG4gICAgY2FsY3VsYXRlQ2VsbHMsICAgICAgIC8vIGNhbGN1bGF0ZXMgdGFibGUgY29sdW1ucyBhbmQgcm93IG9mZnNldHMgKGNlbGxzIGRpbWVuc2lvbnMpXHJcbiAgICBnZXRTY3JvbGxQb3NpdGlvbiwgICAgICAvLyByZXR1cm5zIHNjcm9sbCBwb3NpdGlvbnMgaW4gYXJyYXlcclxuICAgIGF1dG9TY3JvbGxYLCAgICAgICAgLy8gaG9yaXpvbnRhbCBhdXRvIHNjcm9sbCBmdW5jdGlvblxyXG4gICAgYXV0b1Njcm9sbFksICAgICAgICAvLyB2ZXJ0aWNhbCBhdXRvIHNjcm9sbCBmdW5jdGlvblxyXG4gICAgY29weVByb3BlcnRpZXMsICAgICAgIC8vIG1ldGhvZCBjb3BpZXMgY3VzdG9tIHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgZWxlbWVudCB0byB0aGUgY2xvbmVkIGVsZW1lbnQuXHJcbiAgICBjbG9uZUxpbWl0LCAgICAgICAgIC8vIGNsb25lIGxpbWl0IChhZnRlciBjbG9uaW5nIG9iamVjdCwgdGFrZSBjYXJlIGFib3V0IGNsaW1pdDFfWCBvciBjbGltaXQyX1ggY2xhc3NuYW1lcylcclxuICAgIGdldFN0eWxlLCAgICAgICAgIC8vIG1ldGhvZCByZXR1cm5zIHN0eWxlIHZhbHVlIG9mIHJlcXVlc3RlZCBvYmplY3QgYW5kIHN0eWxlIG5hbWVcclxuICAgIGZpbmRQYXJlbnQsICAgICAgICAgLy8gbWV0aG9kIHJldHVybnMgYSByZWZlcmVuY2Ugb2YgdGhlIHJlcXVpcmVkIHBhcmVudCBlbGVtZW50XHJcbiAgICByb3dPcGFjaXR5LCAgICAgICAgIC8vIG1ldGhvZCBzZXRzIG9wYWNpdHkgdG8gdGFibGUgcm93IChlbCwgb3BhY2l0eSwgY29sb3IpXHJcbiAgICByb3dDbG9uZSwgICAgICAgICAvLyBjbG9uZSB0YWJsZSByb3cgLSBpbnB1dCBwYXJhbWV0ZXIgaXMgRElWIHdpdGggY2xhc3MgbmFtZSBcInJlZGlwcy1yb3dcIiAtPiBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCJcclxuICAgIHJvd0Ryb3AsICAgICAgICAgIC8vIGZ1bmN0aW9uIGRyb3BzIChkZWxldGUgb2xkICYgaW5zZXJ0IG5ldykgdGFibGUgcm93IChpbnB1dCBwYXJhbWV0ZXJzIGFyZSBjdXJyZW50IHRhYmxlIGFuZCByb3cpXHJcbiAgICBub3JtYWxpemUsICAgICAgICAgIC8vIHByaXZhdGUgbWV0aG9kIHJldHVybnMgbm9ybWFsaXplZCBzcGFjZXMgZnJvbSBpbnB1dCBzdHJpbmdcclxuXHJcbiAgICAvLyBwcml2YXRlIHBhcmFtZXRlcnNcclxuICAgIG9iak1hcmdpbiA9IG51bGwsICAgICAvLyBzcGFjZSBmcm9tIGNsaWNrZWQgcG9pbnQgdG8gdGhlIG9iamVjdCBib3VuZHMgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdClcclxuXHJcbiAgICAvLyB3aW5kb3cgd2lkdGggYW5kIGhlaWdodCAocGFyYW1ldGVycyBhcmUgc2V0IGluIG9ubG9hZCBhbmQgb25yZXNpemUgZXZlbnQgaGFuZGxlciksIGp1c3QgZm9yIGEgbm90ZTogd2luZG93IGFuZCBXaW5kb3cgaXMgcmVzZXJ2ZWQgd29yZCBpbiBKUyBzbyBJIG5hbWVkIHZhcmlhYmxlIFwic2NyZWVuXCIpXHJcbiAgICBzY3JlZW4gPSB7d2lkdGg6IDAsIGhlaWdodDogMH0sXHJcblxyXG4gICAgLy8gZGVmaW5lIHNjcm9sbCBvYmplY3Qgd2l0aCBjb250YWluZWQgcHJvcGVydGllcyAodGhpcyBpcyBwcml2YXRlIHByb3BlcnR5KVxyXG4gICAgc2Nyb2xsRGF0YSA9IHt3aWR0aCA6IG51bGwsIC8vIHNjcm9sbCB3aWR0aCBvZiB0aGUgd2luZG93IChpdCBpcyB1c3VhbGx5IGdyZWF0ZXIgdGhlbiB3aW5kb3cpXHJcbiAgICAgICAgaGVpZ2h0IDogbnVsbCwgICAgLy8gc2Nyb2xsIGhlaWdodCBvZiB0aGUgd2luZG93IChpdCBpcyB1c3VhbGx5IGdyZWF0ZXIgdGhlbiB3aW5kb3cpXHJcbiAgICAgICAgY29udGFpbmVyIDogW10sICAgLy8gc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXMgKGNvbnRhaW5zIGF1dG9zY3JvbGwgYXJlYXMsIHJlZmVyZW5jZSB0byB0aGUgY29udGFpbmVyIGFuZCBzY3JvbGwgZGlyZWN0aW9uKVxyXG4gICAgICAgIG9iaiA6IG51bGx9LCAgICAvLyBzY3JvbGwgb2JqZWN0IChuZWVkZWQgaW4gYXV0b3Njcm9sbCBmb3IgcmVjdXJzaXZlIGNhbGxzKVxyXG5cclxuICAgIGVkZ2UgPSB7cGFnZToge3g6IDAsIHk6IDB9LCAvLyBhdXRvc2Nyb2xsIGJvdW5kIHZhbHVlcyBmb3IgcGFnZSBhbmQgZGl2IGFzIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgZGl2OiAge3g6IDAsIHk6IDB9LCAvLyBjbG9zZXIgdG8gdGhlIGVkZ2UsIGZhc3RlciBzY3JvbGxpbmdcclxuICAgICAgICBmbGFnOiB7eDogMCwgeTogMH19LC8vIGZsYWdzIGFyZSBuZWVkZWQgdG8gcHJldmVudCBtdWx0aXBsZSBjYWxscyBvZiBhdXRvU2Nyb2xsWCBhbmQgYXV0b1Njcm9sbFkgZnJvbSBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyXHJcblxyXG4gICAgYmdTdHlsZU9sZCwgICAgICAgICAvLyAob2JqZWN0KSBvbGQgdGQgc3R5bGVzIChiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzKVxyXG5cclxuICAgIHRhYmxlLCAgICAgICAgLy8gdGFibGUgb2Zmc2V0cyBhbmQgcm93IG9mZnNldHMgKGluaXRpYWxpemVkIGluIG9ubG9hZCBldmVudClcclxuICAgIG1vdmVkLCAgICAgICAgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIGVsZW1lbnQgaXMgbW92ZWRcclxuICAgIGNsb25lZCwgICAgICAgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIGVsZW1lbnQgaXMgY2xvbmVkXHJcbiAgICBjbG9uZWRJZCA9IFtdLCAgICAgICAgLy8gbmVlZGVkIGZvciBpbmNyZW1lbnQgSUQgb2YgY2xvbmVkIGVsZW1lbnRzXHJcbiAgICBjdXJyZW50Q2VsbCA9IFtdLCAgICAgLy8gY3VycmVudCBjZWxsIGJvdW5kcyAodG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KSBhbmQgXCJjb250YWluVGFibGVcIiBmbGFnIGZvciBuZXN0ZWQgdGFibGVzXHJcbiAgICBkcmFnQ29udGFpbmVyID0gbnVsbCwgICAvLyBkcmFnIGNvbnRhaW5lciByZWZlcmVuY2VcclxuICAgIGRpdkJveCA9IG51bGwsICAgICAgICAvLyBkaXYgZHJhZyBib3g6IHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdCBtYXJnaW4gKGRlY3JlYXNlIG51bWJlciBjYWxscyBvZiBzZXRUYWJsZVJvd0NvbHVtbilcclxuICAgIHBvaW50ZXIgPSB7eDogMCwgeTogMH0sICAgLy8gbW91c2UgcG9pbnRlciBwb3NpdGlvbiAodGhpcyBwcm9wZXJ0aWVzIGFyZSBzZXQgaW4gaGFuZGxlck9uTW91c2VNb3ZlKCkgLSBuZWVkZWQgZm9yIGF1dG9zY3JvbGwpXHJcbiAgICB0aHJlc2hvbGQgPSB7eDogMCwgICAgICAvLyBpbml0aWFsIHgsIHkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgICAgICAgeTogMCxcclxuICAgICAgICAgIHZhbHVlOiA3LCAgIC8vIHRocmVzaG9sZCBkaXN0YW5jZSB2YWx1ZVxyXG4gICAgICAgICAgZmxhZzogZmFsc2V9LCAvLyB0aHJlc2hvbGQgZmxhZ1xyXG4gICAgc2hpZnRLZXkgPSBmYWxzZSwgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIHNoaWZ0IGtleSBpcyBwcmVzc2VkIChzZXQgaW4gaGFuZGxlcl9tb3VzZWRvd24pXHJcbiAgICBjbG9uZUNsYXNzID0gZmFsc2UsICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBjbGlja2VkIGVsZW1lbnQgY29udGFpbnMgY2xvbmUgaW4gY2xhc3MgbmFtZSAoc2V0IGluIGhhbmRsZXJfbW91c2Vkb3duKVxyXG4gICAgd2luZG93U2Nyb2xsUG9zaXRpb24sICAgLy8gKGFycmF5KSB0b3AgYW5kIGxlZnQgd2luZG93IG9mZnNldCAoc2V0IGluIGNhbGN1bGF0ZUNlbGxzIGFuZCB1c2VkIGluIGJveE9mZnNldClcclxuXHJcbiAgICAvLyBzZWxlY3RlZCwgcHJldmlvdXMgYW5kIHNvdXJjZSByb3cgYW5kIGNlbGwgKHByaXZhdGUgcGFyYW1ldGVycyB0b28pXHJcbiAgICByb3cgPSBudWxsLFxyXG4gICAgcm93X29sZCA9IG51bGwsXHJcbiAgICByb3dfc291cmNlID0gbnVsbCxcclxuICAgIGNlbGwgPSBudWxsLFxyXG4gICAgY2VsbF9vbGQgPSBudWxsLFxyXG4gICAgY2VsbF9zb3VyY2UgPSBudWxsLFxyXG5cclxuICAgIC8vIHZhcmlhYmxlcyBpbiB0aGUgcHJpdmF0ZSBzY29wZSByZXZlYWxlZCBhcyBwdWJsaWMgKHNlZSBpbml0KCkgbWV0aG9kKVxyXG4gICAgb2JqID0gZmFsc2UsICAgICAgICAvLyAob2JqZWN0KSBtb3ZlZCBvYmplY3RcclxuICAgIG9iak9sZCA9IGZhbHNlLCAgICAgICAvLyAob2JqZWN0KSBwcmV2aW91c2x5IG1vdmVkIG9iamVjdCAoYmVmb3JlIGNsaWNrZWQgb3IgY2xvbmVkKVxyXG4gICAgaG92ZXIgPSB7Y29sb3JUZDogJyNGRkNGQUUnLCBjb2xvclRyOiAnIzlCQjNEQSd9LFxyXG4gICAgc2Nyb2xsID0ge2VuYWJsZSA6IHRydWUsICAvLyAoYm9vbGVhbikgZW5hYmxlL2Rpc2FibGUgYXV0b3Njcm9sbCBmdW5jdGlvbiAoZGVmYXVsdCBpcyB0cnVlKVxyXG4gICAgICAgIGJvdW5kIDogMjUsICAgICAvLyAoaW50ZWdlcikgYm91bmQgd2lkdGggZm9yIGF1dG9zY3JvbGxcclxuICAgICAgICBzcGVlZCA6IDIwfSwgICAgLy8gKGludGVnZXIpIHNjcm9sbCBzcGVlZCBpbiBtaWxsaXNlY29uZHNcclxuICAgIHN0eWxlID0gey8vYm9yZGVyRW5hYmxlZCA6ICdzb2xpZCcsIC8vIChzdHJpbmcpIGJvcmRlciBzdHlsZSBmb3IgZW5hYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIGJvcmRlckRpc2FibGVkIDogJ2RvdHRlZCcsICAvLyAoc3RyaW5nKSBib3JkZXIgc3R5bGUgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgICAgb3BhY2l0eURpc2FibGVkIDogJycsICAgLy8gKGludGVnZXIpIHNldCBvcGFjaXR5IGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIHJvd0VtcHR5Q29sb3IgOiAnd2hpdGUnfSwgLy8gKHN0cmluZykgY29sb3Igb2YgZW1wdHkgcm93XHJcbiAgICB0ZCA9IHt9LCAgICAgICAgICAgIC8vIChvYmplY3QpIGNvbnRhaW5zIHJlZmVyZW5jZSB0byBzb3VyY2UgKHNldCBpbiBvbm1vdXNlZG93biksIGN1cnJlbnQgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCksIHByZXZpb3VzIChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpIGFuZCB0YXJnZXQgY2VsbCAoc2V0IGluIG9ubW91c2V1cClcclxuICAgIGNsb25lID0ge2tleURpdiA6IGZhbHNlLCAgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgZWxlbWVudHMgY291bGQgYmUgY2xvbmVkIHdpdGggcHJlc3NlZCBTSElGVCBrZXlcclxuICAgICAgICBrZXlSb3cgOiBmYWxzZSwgICAgIC8vIChib29sZWFuKSBpZiB0cnVlLCByb3dzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5XHJcbiAgICAgICAgc2VuZEJhY2sgOiBmYWxzZSwgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgdGhlbiBjbG9uZWQgZWxlbWVudCBjYW4gYmUgcmV0dXJuZWQgdG8gaXRzIHNvdXJjZVxyXG4gICAgICAgIGRyb3AgOiBmYWxzZX0sICAgICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIHRoZW4gY2xvbmVkIGVsZW1lbnQgd2lsbCBiZSBhbHdheXMgZHJvcHBlZCB0byB0aGUgdGFibGUgbm8gbWF0dGVyIGlmIGRyb3BwZWQgb3V0c2lkZSBvZiB0aGUgdGFibGVcclxuICAgIFxyXG4gICAgZXZlbnQgPSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChvYmplY3QpIGV2ZW50IGhhbmRsZXJzXHJcbiAgICB7XHJcbiAgICAgIGNsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBjbG9uZWREcm9wcGVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGNsb25lZEVuZDEgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgY2xvbmVkRW5kMiA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBkcm9wcGVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGRyb3BwZWRCZWZvcmUgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgZmluaXNoIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIG5vdENsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBub3RNb3ZlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dDaGFuZ2VkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0NsaWNrZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Q2xvbmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Ryb3BwZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93RHJvcHBlZEJlZm9yZSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dEcm9wcGVkU291cmNlIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd01vdmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd05vdENsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dOb3RNb3ZlZCA6IGZ1bmN0aW9uICgpIHt9XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRHJhZyBjb250YWluZXIgaW5pdGlhbGl6YXRpb24uIEl0IHNob3VsZCBiZSBjYWxsZWQgYXQgbGVhc3Qgb25jZSBhbmQgaXQncyBwb3NzaWJsZSB0byBjYWxsIGEgbWV0aG9kIG1hbnkgdGltZXMuIEV2ZXJ5IHBhZ2Ugc2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIGRyYWcgY29udGFpbmVyLlxyXG4gICAqIElmIFJFRElQUy5kcmFnLmluaXQoKSBpcyBjYWxsZWQgd2l0aG91dCBpbnB1dCBwYXJhbWV0ZXIsIGxpYnJhcnkgd2lsbCBzZWFyY2ggZm9yIGRyYWcgY29udGFpbmVyIHdpdGggaWQ9XCJyZWRpcHMtZHJhZ1wiLlxyXG4gICAqIE9ubHkgdGFibGVzIGluc2lkZSBkcmFnIGNvbnRhaW5lciB3aWxsIGJlIHNjYW5uZWQuIEl0IGlzIHBvc3NpYmxlIHRvIGhhdmUgc2V2ZXJhbCBkcmFnIGNvbnRhaW5lcnMgdG90YWx5IHNlcGFyYXRlZCAoZWxlbWVudHMgZnJvbSBvbmUgY29udGFpbmVyIHdpbGwgbm90IGJlIHZpc2libGUgdG8gb3RoZXIgZHJhZyBjb250YWluZXJzKS5cclxuICAgKiBcImluaXRcIiBtZXRob2QgY2FsbHMgZW5hYmxlRHJhZy4gSWYgdGFibGVzIGFyZSBnZW5lcmF0ZWQgZHluYW1pY2FsbHkgdGhlbiBSRURJUFMuaW5pdCgpIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIHRvIHNldCBjdXN0b20gcHJvcGVydGllcyB0byB0YWJsZXMgKHRhYmxlIGluaXRpYWxpemF0aW9uKS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2RjXSBEcmFnIGNvbnRhaW5lciBJZCAoZGVmYXVsdCBpcyBcInJlZGlwcy1kcmFnXCIpLlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gaW5pdCBkcmFnIGNvbnRhaW5lciAod2l0aCBkZWZhdWx0IGlkPVwicmVkaXBzLWRyYWdcIilcclxuICAgKiBSRURJUFMuZHJhZy5pbml0KCk7XHJcbiAgICpcclxuICAgKiAvLyBpbml0IGRyYWcgY29udGFpbmVyIHdpdGggaWQ9XCJteS1kcmFnMVwiXHJcbiAgICogUkVESVBTLmRyYWcuaW5pdCgnbXktZHJhZzEnKTtcclxuICAgKi9cclxuICBpbml0ID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICBkcmFnQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZGlwcy1kcmFnJyk7ICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBkcmFnIGNvbnRhaW5lclxyXG5cclxuICAgIHdpbmRvd1Njcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHdpbmRvdyBzY3JvbGwgcG9zaXRpb25cclxuXHJcbiAgICAvLyBhcHBlbmQgRElWIGlkPVwicmVkaXBzX2Nsb25lXCIgaWYgRElWIGRvZXNuJ3QgZXhpc3QgKG5lZWRlZCBmb3IgY2xvbmluZyBESVYgZWxlbWVudHMpXHJcbiAgICAvLyBpZiBhdXRvbWF0aWMgY3JlYXRpb24gaXNuJ3QgcHJlY2lzZSBlbm91Z2gsIHVzZXIgY2FuIG1hbnVhbGx5IGNyZWF0ZSBhbmQgcGxhY2UgZWxlbWVudCB3aXRoIGlkPVwicmVkaXBzX2Nsb25lXCIgdG8gcHJldmVudCB3aW5kb3cgZXhwYW5kaW5nICh0aGVuIHRoaXMgY29kZSB3aWxsIGJlIHNraXBwZWQpXHJcbiAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWRpcHNfY2xvbmUnKSlcclxuICAgIHtcclxuICAgICAgdmFyIHJlZGlwc0Nsb25lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIHJlZGlwc0Nsb25lLmlkID0gJ3JlZGlwc19jbG9uZSc7XHJcbiAgICAgIHJlZGlwc0Nsb25lLnN0eWxlLndpZHRoID0gcmVkaXBzQ2xvbmUuc3R5bGUuaGVpZ2h0ID0gJzFweCc7XHJcbiAgICAgIGRyYWdDb250YWluZXIuYXBwZW5kQ2hpbGQocmVkaXBzQ2xvbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZURyYWcoJ2luaXQnLCAnLnJlZGlwcy1kcmFnJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0dGFjaCBvbm1vdXNlZG93biBldmVudCBoYW5kbGVyIHRvIHRoZSBESVYgZWxlbWVudHMsIGF0dGFjaCBvbnNjcm9sbD0nY2FsY3VsYXRlQ2VsbHMnIGZvciBESVYgZWxlbWVudHMgd2l0aCAnc2Nyb2xsJyBpbiBjbGFzcyBuYW1lIChwcmVwYXJlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzKVxyXG4gICAgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJlZVRhYmxlJyk7XHJcbiAgICB0YWJsZS5yZWRpcHMgPSB7fTtcclxuXHJcbiAgICBoYW5kbGVyT25SZXNpemUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCB3aW5kb3cgd2lkdGgvaGVpZ2h0LCBzY3JvbGwgd2lkdGgvaGVpZ2h0IGFuZCBkZWZpbmUgb25yZXNpemUgZXZlbnQgaGFuZGxlciwgb25yZXNpemUgZXZlbnQgaGFuZGxlciBjYWxscyBjYWxjdWxhdGUgY29sdW1uc1xyXG4gICAgUkVESVBTLmV2ZW50LmFkZCh3aW5kb3csICdyZXNpemUnLCBoYW5kbGVyT25SZXNpemUpO1xyXG4gICAgUkVESVBTLmV2ZW50LmFkZCh3aW5kb3csICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgICAgLy8gYXR0YWNoIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSB3aW5kb3cgKG5lZWRlZCBmb3IgcmVjYWxjdWxhdGluZyB0YWJsZSBjZWxscyBwb3NpdGlvbnMpXHJcbiAgfTtcclxuXHJcblxyXG4gIC8vIG9ubW91c2Vkb3duIGV2ZW50IGhhbmRsZXIuICBUaGlzIGV2ZW50IGhhbmRsZXIgaXMgYXR0YWNoZWQgdG8gZXZlcnkgRElWIGVsZW1lbnQgaW4gZHJhZyBjb250YWluZXIgKHBsZWFzZSBzZWUgXCJlbmFibGVEcmFnXCIpLlxyXG4gIGhhbmRsZXJPbk1vdXNlRG93biA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgICAgICAgLy8gZGVmaW5lIGV2ZW50IChjcm9zcyBicm93c2VyKVxyXG4gICAgdmFyIG9mZnNldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvYmplY3Qgb2Zmc2V0XHJcbiAgICB2YXIgcG9zaXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvc2l0aW9uIG9mIHRhYmxlIG9yIGNvbnRhaW5lciBib3ggb2YgdGFibGUgKGlmIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIGV4Y2x1ZGUgc2Nyb2xsIG9mZnNldClcclxuICAgIHZhciBYLCBZOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcblxyXG4gICAgZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7ICAgICAgICAgICAgICAvLyBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uIChvbmx5IGZpcnN0IGNsaWNrZWQgZWxlbWVudCB3aWxsIHJlZ2lzdGVyIG9ubW91c2Vkb3duIGV2ZW50KSwgbmVlZGVkIGluIGNhc2Ugb2YgcGxhY2luZyB0YWJsZSBpbnNpZGUgb2YgPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnXCI+IChhZnRlciBlbGVtZW50IHdhcyBkcm9wcGVkIHRvIHRoaXMgdGFibGUgaXQgY291bGRuJ3QgYmUgbW92ZWQgb3V0IGFueSBtb3JlIC0gdGFibGUgYW5kIGVsZW1lbnQgbW92ZWQgdG9nZXRoZXIgYmVjYXVzZSB0YWJsZSBjYXB0dXJlcyBtb3VzZWRvd24gZXZlbnQgYWxzbyBpbiBidWJibGluZyBwcm9jZXMpXHJcbiAgICBpZiAoZXZ0LnN0b3BQcm9wYWdhdGlvbilcclxuICAgIHtcclxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHNoaWZ0S2V5ID0gZXZ0LnNoaWZ0S2V5OyAgICAgICAgICAgICAgLy8gc2V0IHRydWUgb3IgZmFsc2UgaWYgc2hpZnQga2V5IGlzIHByZXNzZWRcclxuXHJcbiAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0ZXh0IHNlbGVjdGlvbiAoQ2hyb21lLCBGRiwgT3BlcmEsIFNhZmFyaSlcclxuICAgIHtcclxuICAgICAgd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uICYmIGRvY3VtZW50LnNlbGVjdGlvbi50eXBlID09PSBcIlRleHRcIikgIC8vIElFOFxyXG4gICAge1xyXG4gICAgICB0cnkgeyBkb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkoKTsgfSBjYXRjaCAoZXJyb3IpIHsgfSAgICAgICAgICAgICAvLyBpZ25vcmUgZXJyb3IgdG8gYXMgYSB3b3JrYXJvdW5kIGZvciBidWcgaW4gSUU4XHJcbiAgICB9XHJcblxyXG4gICAgWCA9IHBvaW50ZXIueCA9IGV2dC5jbGllbnRYO1xyXG4gICAgWSA9IHBvaW50ZXIueSA9IGV2dC5jbGllbnRZO1xyXG5cclxuICAgIHRocmVzaG9sZC54ID0gWDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGluaXRpYWwgdGhyZXNob2xkIHBvc2l0aW9uIChuZWVkZWQgZm9yIGNhbGN1bGF0aW5nIGRpc3RhbmNlKVxyXG4gICAgdGhyZXNob2xkLnkgPSBZO1xyXG4gICAgdGhyZXNob2xkLmZsYWcgPSBmYWxzZTtcclxuXHJcbiAgICBSRURJUFMuZHJhZy5vYmpPbGQgPSBvYmpPbGQgPSBvYmogfHwgdGhpczsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHByZXZpb3VzIG9iamVjdCBpZiBkZWZpbmVkIG9yIHNldCB0byB0aGUgY2xpY2tlZCBvYmplY3RcclxuICAgIFJFRElQUy5kcmFnLm9iaiA9IG9iaiA9IHRoaXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY2xpY2tlZCBvYmplY3RcclxuXHJcbiAgICBjbG9uZUNsYXNzID0gb2JqLmNsYXNzTmFtZS5pbmRleE9mKCdyZWRpcHMtY2xvbmUnKSA+IC0xOyAgICAgICAgICAgIC8vIHNldCB0cnVlIG9yIGZhbHNlIGlmIGNsaWNrZWQgZWxlbWVudCBjb250YWlucyBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIG5hbWUgKG5lZWRlZCBmb3IgY2xvbmUgZWxlbWVudCBhbmQgY2xvbmUgdGFibGUgcm93KVxyXG5cclxuICAgIFJFRElQUy5kcmFnLm9iaiA9IG9iaiA9IHJvd0Nsb25lKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ganVzdCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjdXJyZW50IHJvdyAoZG8gbm90IGNsb25lKVxyXG5cclxuICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHVzZXIgaGFzIHVzZWQgYSBtb3VzZSBldmVudCB0byBpbmNyZWFzZSB0aGUgZGltZW5zaW9ucyBvZiB0aGUgdGFibGUgLSBjYWxsIGNhbGN1bGF0ZUNlbGxzKClcclxuXHJcbiAgICByb3cgPSBjZWxsID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHJvdyBhbmQgY2VsbCBpbmRleGVzIChuZWVkZWQgaW4gY2FzZSBvZiBlbmFibGUgLyBkaXNhYmxlIHRhYmxlcylcclxuICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCBhbmQgcmVtZW1iZXIgc291cmNlIHBvc2l0aW9uIChvbGQgcG9zaXRpb24gaXMgaW5pdGlhbGx5IHRoZSBzYW1lIGFzIHNvdXJjZSBwb3NpdGlvbilcclxuICAgIHJvd19zb3VyY2UgPSByb3dfb2xkID0gcm93O1xyXG4gICAgY2VsbF9zb3VyY2UgPSBjZWxsX29sZCA9IGNlbGw7XHJcblxyXG4gICAgUkVESVBTLmRyYWcuZXZlbnQucm93Q2xpY2tlZCh0ZC5jdXJyZW50KTtcclxuXHJcbiAgICAvLyBpZiBzdGFydCBwb3NpdGlvbiBjYW5ub3QgYmUgZGVmaW5lZCB0aGVuIHVzZXIgcHJvYmFibHkgY2xpY2tlZCBvbiBlbGVtZW50IHRoYXQgYmVsb25ncyB0byB0aGUgZGlzYWJsZWQgdGFibGUgKG9yIHNvbWV0aGluZyBlbHNlIGhhcHBlbmVkIHRoYXQgd2FzIG5vdCBzdXBwb3NlZCB0byBoYXBwZW4gLSBldmVyeSBlbGVtZW50IHNob3VsZCBiZWxvbmcgdG8gdGhlIHRhYmxlKSB0aGlzIGNvZGUgbXVzdCBnbyBhZnRlciBleGVjdXRpb24gb2YgZXZlbnQgaGFuZGxlcnNcclxuICAgIGlmIChyb3cgPT09IG51bGwgfHwgY2VsbCA9PT0gbnVsbClcclxuICAgIHtcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVydW4gc2V0VGFibGVSb3dDb2x1bW4oKSBhZ2FpbiBiZWNhdXNlIHNvbWUgb2YgdGFibGVzIG1pZ2h0IGJlIGVuYWJsZWQgaW4gaGFuZGxlciBldmVudHMgYWJvdmVcclxuICAgICAgcm93X3NvdXJjZSA9IHJvd19vbGQgPSByb3c7XHJcbiAgICAgIGNlbGxfc291cmNlID0gY2VsbF9vbGQgPSBjZWxsO1xyXG5cclxuICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCBjZWxsID09PSBudWxsKSAgLy8gbm8sIGNsaWNrZWQgZWxlbWVudCBpcyBvbiB0aGUgZGlzYWJsZWQgdGFibGUgLSBzb3JyeVxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb3ZlZCA9IGNsb25lZCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IFwibW92ZWRcIiBmbGFnIChuZWVkZWQgZm9yIGNsb25lIG9iamVjdCBpbiBoYW5kbGVyT25Nb3VzZU1vdmUpIGFuZCBcImNsb25lZFwiIGZsYWdcclxuXHJcbiAgICBSRURJUFMuZXZlbnQuYWRkKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgaGFuZGxlck9uTW91c2VNb3ZlKTsgICAgICAgIC8vIGFjdGl2YXRlIG9ubW91c2Vtb3ZlIGV2ZW50IGhhbmRsZXIgb24gZG9jdW1lbnQgb2JqZWN0XHJcbiAgICBSRURJUFMuZXZlbnQuYWRkKGRvY3VtZW50LCAnbW91c2V1cCcsIGhhbmRsZXJPbk1vdXNlVXApOyAgICAgICAgICAgIC8vIGFjdGl2YXRlIG9ubW91c2V1cCBldmVudCBoYW5kbGVyIG9uIGRvY3VtZW50IG9iamVjdFxyXG5cclxuICAgIGlmIChyb3cgIT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgYmFja2dyb3VuZCBjb2xvciBpZiBpcyBwb3NzaWJsZVxyXG4gICAge1xyXG4gICAgICBiZ1N0eWxlT2xkID0gZ2V0VGRTdHlsZShyb3cpO1xyXG4gICAgfVxyXG5cclxuICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUsICdwb3NpdGlvbicpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRhYmxlIENTUyBwb3NpdGlvbiAobmVlZGVkIGZvciBleGNsdXNpb24gXCJzY3JvbGwgb2Zmc2V0XCIgaWYgdGFibGUgYm94IGhhcyBwb3NpdGlvbiBmaXhlZClcclxuXHJcbiAgICBpZiAocG9zaXRpb24gIT09ICdmaXhlZCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRhYmxlIGRvZXNuJ3QgaGF2ZSBzdHlsZSBwb3NpdGlvbjpmaXhlZCB0aGVuIHRhYmxlIGNvbnRhaW5lciBzaG91bGQgYmUgdGVzdGVkXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUucGFyZW50Tm9kZSwgJ3Bvc2l0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb2Zmc2V0ID0gYm94T2Zmc2V0KG9iaiwgcG9zaXRpb24pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvYmplY3Qgb2Zmc2V0XHJcbiAgICBvYmpNYXJnaW4gPSBbWSAtIG9mZnNldFswXSwgb2Zmc2V0WzFdIC0gWCwgb2Zmc2V0WzJdIC0gWSwgWCAtIG9mZnNldFszXV07ICAgLy8gY2FsY3VsYXRlIG9mZnNldCBmcm9tIHRoZSBjbGlja2VkIHBvaW50IGluc2lkZSBlbGVtZW50IHRvIHRoZSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgc2lkZSBvZiB0aGUgZWxlbWVudFxyXG5cclxuICAgIHJldHVybiBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHRleHQgc2VsZWN0aW9uIGZvciBub24gSUUgYnJvd3NlcnNcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kcyByZXR1cm5zIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IG9yIGNsb25lcyB0YWJsZSByb3cuXHJcbiAgICogSWYgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VEb3duOlxyXG4gICAqIDx1bD5cclxuICAgKiA8bGk+aW5wdXQgcGFyYW1ldGVyIGlzIERJViBjbGFzcz1cInJlZGlwcy1yb3dcIjwvbGk+XHJcbiAgICogPGxpPm1ldGhvZCB3aWxsIHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGN1cnJlbnQgcm93PC9saT5cclxuICAgKiA8L3VsPlxyXG4gICAqIElmIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZTpcclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmlucHV0IHBhcmFtZXRlciBpcyBUUiAoY3VycmVudCByb3cpIC0gcHJldmlvdXNseSByZXR1cm5lZCB3aXRoIHRoaXMgZnVuY3Rpb248L2xpPlxyXG4gICAqIDxsaT5tZXRob2Qgd2lsbCBjbG9uZSBjdXJyZW50IHJvdyBhbmQgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY2xvbmVkIHJvdzwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBESVYgY2xhc3M9XCJyZWRpcHMtcm93XCIgb3IgVFIgKGN1cnJlbnQgcm93KVxyXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBSZXR1cm5zIHJlZmVyZW5jZSBvZiB0aGUgY3VycmVudCByb3cgb3IgY2xvbmUgY3VycmVudCByb3cgYW5kIHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGNsb25lZCByb3cuXHJcbiAgICovXHJcbiAgcm93Q2xvbmUgPSBmdW5jdGlvbiAoZWwpXHJcbiAge1xyXG4gICAgdmFyIHRhYmxlTWluaTsgICAgICAvLyBvcmlnaW5hbCB0YWJsZSBpcyBjbG9uZWQgYW5kIGFsbCByb3dzIGV4Y2VwdCBwaWNrZWQgcm93IGFyZSBkZWxldGVkXHJcbiAgICB2YXIgcm93T2JqOyAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgcm93IG9iamVjdFxyXG4gICAgdmFyIGRpdjsgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIDxESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCI+IGVsZW1lbnRcclxuXHJcbiAgICBpZiAoZWwubm9kZU5hbWUgPT09ICdESVYnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxKSByb3dDbG9uZSBjYWxsIGluIG9ubW91c2Vkb3duIHdpbGwgcmV0dXJuIHJlZmVyZW5jZSBvZiBUUiBlbGVtZW50IChpbnB1dCBwYXJhbWV0ZXIgaXMgSFRNTEVsZW1lbnQgPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIj4pXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGVsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciByZWZlcmVuY2UgdG8gdGhlIDxESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCI+XHJcbiAgICAgIGVsID0gZmluZFBhcmVudCgnVFInLCBlbCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIHBhcmVudCBUUiBlbGVtZW50XHJcbiAgICAgIGlmIChlbC5yZWRpcHMgPT09IHVuZGVmaW5lZCkgeyBlbC5yZWRpcHMgPSB7fTsgfSAgICAvLyBjcmVhdGUgYSBcInByb3BlcnR5IG9iamVjdFwiIGluIHdoaWNoIGFsbCBjdXN0b20gcHJvcGVydGllcyB3aWxsIGJlIHNhdmVkIChpdCBpcyBvbmx5IG9uZSBwcm9wZXJ0eSBmb3Igbm93KVxyXG4gICAgICBlbC5yZWRpcHMuZGl2ID0gZGl2OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSByZWZlcmVuY2UgdG8gdGhlIERJViBlbGVtZW50IGFzIHJlZGlwcy5kaXYgdGhpcyB3aWxsIG1vc3RseSBiZSByZWZlcmVuY2VkIGFzIG9iak9sZC5yZWRpcHMuZGl2IChiZWNhdXNlIG9iak9sZCBpbiByb3cgZHJhZ2dpbmcgY29udGV4dCBpcyByZWZlcmVuY2UgdG8gdGhlIHNvdXJjZSByb3cpXHJcbiAgICAgIHJldHVybiBlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gcmVmZXJlbmNlIHRvIHRoZSBUUiBlbGVtZW50XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAyKSByb3dDbG9uZSBjYWxsIGluIG9ubW91c2Vtb3ZlIHdpbGwgY2xvbmUgY3VycmVudCByb3cgKGVsLm5vZGVOYW1lID09PSAnVFInKVxyXG4gICAge1xyXG4gICAgICByb3dPYmogPSBlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBzb3VyY2Ugcm93XHJcblxyXG4gICAgICB0YWJsZU1pbmkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xyXG4gICAgICB0YWJsZU1pbmkuaW5uZXJIVE1MID0gJzx0ciBpZD1cIicgKyByb3dPYmouaWQgKyAnXCIgY2xhc3M9XCInICsgcm93T2JqLmNsYXNzTGlzdCArICdcIj4nICsgcm93T2JqLmlubmVySFRNTCArICc8L3RyPic7XHJcbiAgICAgIC8vdGFibGVNaW5pLmlubmVySFRNTCA9IGdldEFzc2VtYmx5TWFya3VwKHBhcnNlSW50KHJvd09iai5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSkpOyAgIC8vY2FuIGJlIHVzZWQgdG8gc2hvdyB0aGUgZW50aXJlIGFzc2VtYmx5IHdoZW4gZHJhZ2dpbmcsIHRlbmRzIHRvIHNsb3cgdGhpbmdzIGRvd24gYW5kIGJlIGN1bWJlcnNvbWVcclxuXHJcbiAgICAgIHRhYmxlTWluaS5yZWRpcHMgPSB7fTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZFxyXG4gICAgICB0YWJsZU1pbmkucmVkaXBzLnNvdXJjZVJvdyA9IHJvd09iajsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgc291cmNlIHJvdyByZWZlcmVuY2UgKG5lZWRlZCBmb3Igc291cmNlIHJvdyBkZWxldGlvbiBpbiByb3dEcm9wIG1ldGhvZClcclxuXHJcbiAgICAgIGNvcHlQcm9wZXJ0aWVzKHJvd09iaiwgdGFibGVNaW5pLnJvd3NbMF0pOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBjdXN0b20gcHJvcGVydGllcyB0byBhbGwgY2hpbGQgRElWIGVsZW1lbnRzIGFuZCBzZXQgb25tb3VzZWRvd24vb25kYmxjbGljayBldmVudCBoYW5kbGVyc1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVkaXBzX2Nsb25lJykuYXBwZW5kQ2hpbGQodGFibGVNaW5pKTsgICAgIC8vIGFwcGVuZCBjbG9uZWQgbWluaSB0YWJsZSB0byB0aGUgRElWIGlkPVwicmVkaXBzX2Nsb25lXCJcclxuXHJcbiAgICAgIHJldHVybiB0YWJsZU1pbmk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBkcm9wcyB0YWJsZSByb3cgdG8gdGhlIHRhcmdldCByb3cgYW5kIGNhbGxzIHVzZXIgZXZlbnQgaGFuZGxlcnMuIFNvdXJjZSByb3cgaXMgZGVsZXRlZCBhbmQgY2xvbmVkIHJvdyBpcyBpbnNlcnRlZCBhdCB0aGUgbmV3IHBvc2l0aW9uLlxyXG4gICAqIE1ldGhvZCB0YWtlcyBjYXJlIGFib3V0IHRoZSBsYXN0IHJvdyBpbiB0aGUgdGFibGUgb25seSBpZiB1c2VyIGRyYWdzIGVsZW1lbnQuIEluIGNhc2Ugb2YgbW92aW5nIHJvd3Mgd2l0aCBtb3ZlT2JqZWN0KCksIGNvbnRyb2xcclxuICAgKiBhbmQgbG9naWMgZm9yIGxhc3Qgcm93IGlzIHR1cm5lZCBvZmYuIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlVXAoKVxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gdGFibGVJZHggVGFibGUgaW5kZXguXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSByb3dJZHggUm93IGluZGV4LlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IFt0YWJsZU1pbmldIFJlZmVyZW5jZSB0byB0aGUgbWluaSB0YWJsZSAodGFibGUgdGhhdCBjb250YWlucyBvbmx5IG9uZSByb3cpLiBUaGlzIGlzIGFjdHVhbGx5IGNsb25lIG9mIHNvdXJjZSByb3cuXHJcbiAgICovXHJcbiAgcm93RHJvcCA9IGZ1bmN0aW9uIChyb3dJZHgpXHJcbiAge1xyXG4gICAgdmFyIGRyb3A7ICAgICAgICAgICAgICAgLy8gKGJvb2xlYW4pIGlmIGZhbHNlIHRoZW4gZHJvcHBpbmcgcm93IHdpbGwgYmUgY2FuY2VsZWRcclxuICAgIHZhciB0ck1pbmk7ICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgVFIgaW4gbWluaSB0YWJsZVxyXG4gICAgdmFyIGRlbGV0ZVRhYmxlUm93OyAgICAgLy8gZGVsZXRlIHJvdyAocHJpdmF0ZSBtZXRob2QpXHJcblxyXG4gICAgZGVsZXRlVGFibGVSb3cgPSBmdW5jdGlvbiAoZWwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgdGFibGUgcm93IC0gaW5wdXQgcGFyZW1ldGVyIGlzIHJvdyByZWZlcmVuY2UgKHByaXZhdGUgbWV0aG9kKVxyXG4gICAge1xyXG4gICAgICB2YXIgdGJsO1xyXG5cclxuICAgICAgaWYgKGVsLnJlZGlwcyA9PT0gdW5kZWZpbmVkIHx8ICFlbC5yZWRpcHMuZW1wdHlSb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGRvZXNuJ3QgaGF2ZSBjdXN0b20gXCJyZWRpcHNcIiBwcm9wZXJ0eSBvciBpcyBub3QgbWFya2VkIGFzIGVtcHR5LCB0aGVuIGl0IGNhbiBiZSBkZWxldGVkXHJcbiAgICAgIHtcclxuICAgICAgICB0YmwgPSBmaW5kUGFyZW50KCdUQUJMRScsIGVsKTtcclxuICAgICAgICB0YmwuZGVsZXRlUm93KGVsLnJvd0luZGV4KTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlLCByb3cgaXMgbWFya2VkIGFzIFwiZW1wdHlcIiBhbmQgaXQgd2lsbCBiZSBvbmx5IGNvbG9yZWQgKG5vdCBkZWxldGVkKSwgY29udGVudCBvZiB0YWJsZSBjZWxscyB3aWxsIGJlIGRlbGV0ZWQgYW5kIGJhY2tncm91bmQgY29sb3Igd2lsbCBiZSBzZXQgdG8gZGVmYXVsdCBjb2xvclxyXG4gICAgICB7XHJcbiAgICAgICAgcm93T3BhY2l0eShlbCwgJ2VtcHR5JywgUkVESVBTLmRyYWcuc3R5bGUucm93RW1wdHlDb2xvcik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdmFyIHRhYmxlTWluaSA9IG9iajsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50bHkgZHJhZ2dlZCByb3cgLSBtaW5pIHRhYmxlXHJcblxyXG4gICAgaWYgKHJvd0lkeCA+IHRhYmxlLnJvd3MubGVuZ3RoIC0gMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaW5kZXggaXMgb3V0IG9mIGJvdW5kcywgdGhlbiBzZXQgbWF4IHJvdyBpbmRleCAocm93IHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhlIHRhYmxlIGJvdHRvbSlcclxuICAgIHtcclxuICAgICAgcm93SWR4ID0gdGFibGUucm93cy5sZW5ndGggLSAxO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB0YWJsZVJvdyA9IHRhYmxlLnJvd3Nbcm93SWR4XTtcclxuXHJcbiAgICB0ck1pbmkgPSB0YWJsZU1pbmkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RyJylbMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIFRSIGluIG1pbmkgdGFibGUgKG1pbmkgdGFibGUgaGFzIG9ubHkgb25lIHJvdyAtIGZpcnN0IHJvdylcclxuXHJcbiAgICB0YWJsZU1pbmkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YWJsZU1pbmkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlc3Ryb3kgbWluaSB0YWJsZSAobm9kZSBzdGlsbCBleGlzdHMgaW4gbWVtb3J5KVxyXG5cclxuICAgIGRyb3AgPSBSRURJUFMuZHJhZy5ldmVudC5yb3dEcm9wcGVkQmVmb3JlKHRhYmxlLCB0YWJsZU1pbmkucmVkaXBzLnNvdXJjZVJvdy5yb3dJbmRleCk7ICAgICAgLy8gY2FsbCBldmVudC5yb3dEcm9wcGVkQmVmb3JlKCkgLSB0aGlzIGhhbmRsZXIgY2FuIHJldHVybiBcImZhbHNlXCIgdmFsdWVcclxuXHJcbiAgICBpZiAoZHJvcCAhPT0gZmFsc2UpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGhhbmRsZXIgcmV0dXJuZWQgZmFsc2UgdGhlbiByb3cgZHJvcHBpbmcgd2lsbCBiZSBjYW5jZWxlZFxyXG4gICAge1xyXG4gICAgICBpZiAocm93SWR4IDwgdGFibGUucm93cy5sZW5ndGgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaXMgbm90IGRyb3BwZWQgdG8gdGhlIGxhc3Qgcm93IHBvc2l0aW9uXHJcbiAgICAgIHtcclxuICAgICAgICB0YWJsZVJvdy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0ck1pbmksIHRhYmxlUm93Lm5leHRTaWJsaW5nKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgaXMgZHJvcHBlZCB0byB0aGUgbGFzdCByb3cgcG9zaXRpb24sIGl0J3MgcG9zc2libGUgdG8gc2V0IHRhcmdldCByb3cgaW5kZXggZ3JlYXRlciB0aGVuIG51bWJlciBvZiByb3dzIC0gaW4gdGhpcyBjYXNlIHJvdyB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSB0YWJsZSBlbmRcclxuICAgICAge1xyXG4gICAgICAgIHRhYmxlUm93LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodHJNaW5pKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgc2hvdWxkIGJlIGFwcGVuZGVkXHJcbiAgICAgICAgdGFibGVSb3cgPSB0YWJsZS5yb3dzWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIHVwcGVyIHJvdywgYWZ0ZXIgcm93IGlzIGFwcGVuZGVkLCB1cHBlciByb3cgc2hvdWxkIGJlIHRlc3RlZCBpZiBjb250YWlucyBcImVtcHR5Um93XCIgc2V0IHRvIHRydWUsIHRoaXMgY291bGQgaGFwcGVuIGluIGNhc2Ugd2hlbiByb3cgaXMgbW92ZWQgdG8gdGhlIHRhYmxlIHdpdGggb25seSBvbmUgZW1wdHkgcm93XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBzb3VyY2Ugcm93IGlmIHJvdyBpcyBub3QgY2xvbmVkXHJcbiAgICAgIHtcclxuICAgICAgICBkZWxldGVUYWJsZVJvdyh0YWJsZU1pbmkucmVkaXBzLnNvdXJjZVJvdyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRlbGV0ZSB0ck1pbmkucmVkaXBzLmVtcHR5Um93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBlbXB0eVJvdyBwcm9wZXJ0eSBmcm9tIGluc2VydGVkL2FwcGVuZGVkIHJvdyBiZWNhdXNlIGVtcHR5Um93IHdpbGwgYmUgc2V0IG9uIG5leHQgbW92ZSwgY29weVByb3BlcnRpZXMoKSBpbiByb3dDbG9uZSgpIGNvcGllZCBlbXB0eVJvdyBwcm9wZXJ0eSB0byB0aGUgcm93IGluIHRhYmxlTWluaSwgb3RoZXJ3aXNlIHJvdyB3aWxsIGJlIG92ZXJ3cml0dGVuIGFuZCB0aGF0IGlzIG5vdCBnb29kXHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0Ryb3BwZWQodGFibGVSb3cpOyAgICAgICAgIC8vIGNhbGwgcm93RHJvcHBlZCBldmVudCBoYW5kbGVyXHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV2ZW50LnJvd0Ryb3BwZWRCZWZvcmUoKSByZXR1cm5lZCBcImZhbHNlXCIgKGl0J3MgdXAgdG8gdXNlciB0byByZXR1cm4gc291cmNlIHJvdyBvcGFjaXR5IHRvIGl0cyBvcmlnaW5hbCBzdGF0ZSlcclxuICAgIHtcclxuICAgICAgLy8gcm93T3BhY2l0eShvYmpPbGQsIDEwMCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIG9ubW91c2V1cCBldmVudCBoYW5kbGVyLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlVXAgaXMgYXR0YWNoZWQgdG8gdGhlIERJViBlbGVtZW50IGluIGEgbW9tZW50IHdoZW4gRElWIGVsZW1lbnQgaXMgY2xpY2tlZCAodGhpcyBoYXBwZW5zIGluIGhhbmRsZXJPbk1vdXNlRG93bikuXHJcbiAgICogVGhpcyBldmVudCBoYW5kbGVyIGRldGFjaGVzIG9ubW91c2Vtb3ZlIGFuZCBvbm1vdXNldXAgZXZlbnQgaGFuZGxlcnMuXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZSBFdmVudCBpbmZvcm1hdGlvbi5cclxuICAgKi9cclxuICBoYW5kbGVyT25Nb3VzZVVwID0gZnVuY3Rpb24gKGUpXHJcbiAge1xyXG4gICAgdmFyIGV2dCA9IGUgfHwgd2luZG93LmV2ZW50OyAgICAvLyBkZWZpbmUgZXZlbnQgKEZGICYgSUUpXHJcbiAgICB2YXIgcl9yb3c7ICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgbW9kZT1cInJvd1wiXHJcbiAgICB2YXIgbXRfdHI7ICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgcmV0dXJuaW5nIGNvbG9yIHRvIHRoZSB0YWJsZSBjZWxsIChtdF90ciAtIFwibWluaSB0YWJsZVwiIFwidGFibGVfcm93XCIpXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgdmFyIGk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VkIGluIGxvY2FsIGxvb3BcclxuICAgIHZhciBkcm9wOyAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZmFsc2UgdGhlbiBkcm9wcGVkIERJViBlbGVtZW50XHJcblxyXG4gICAgWCA9IGV2dC5jbGllbnRYO1xyXG4gICAgWSA9IGV2dC5jbGllbnRZO1xyXG5cclxuICAgIGVkZ2UuZmxhZy54ID0gZWRnZS5mbGFnLnkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0dXJuIG9mZiBhdXRvc2Nyb2xsIFwiY3VycmVudCBjZWxsXCIgaGFuZGxpbmcgKGlmIHVzZXIgbW91c2V1cCBpbiB0aGUgbWlkZGxlIG9mIGF1dG9zY3JvbGxpbmcpXHJcblxyXG4gICAgUkVESVBTLmV2ZW50LnJlbW92ZShkb2N1bWVudCwgJ21vdXNlbW92ZScsIGhhbmRsZXJPbk1vdXNlTW92ZSk7XHJcbiAgICBSRURJUFMuZXZlbnQucmVtb3ZlKGRvY3VtZW50LCAnbW91c2V1cCcsIGhhbmRsZXJPbk1vdXNlVXApO1xyXG5cclxuICAgIGRyYWdDb250YWluZXIub25zZWxlY3RzdGFydCA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXRhY2ggZHJhZ0NvbnRhaW5lci5vbnNlbGVjdHN0YXJ0IGhhbmRsZXIgdG8gZW5hYmxlIHNlbGVjdCBmb3IgSUU3L0lFOCBicm93c2VyXHJcblxyXG4gICAgcmVzZXRTdHlsZXMob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9iamVjdCBzdHlsZXNcclxuXHJcbiAgICBzY3JvbGxEYXRhLndpZHRoICA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDtcclxuICAgIHNjcm9sbERhdGEuaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodDtcclxuXHJcbiAgICBlZGdlLmZsYWcueCA9IGVkZ2UuZmxhZy55ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgYXV0b3Njcm9sbCBmbGFnc1xyXG5cclxuICAgIGlmIChyb3cgPT09IG51bGwgfHwgY2VsbCA9PT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgZWxlbWVudCB3YXMgY2xpY2tlZCBhbmQgbGVmdCBidXR0b24gd2FzIHJlbGVhc2VkLCBidXQgZWxlbWVudCBpcyBwbGFjZWQgaW5zaWRlIHVubW92YWJsZSB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdE1vdmVkKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIFJFRElQUy5kcmFnLnRkLnRhcmdldCA9IHRkLnRhcmdldCA9IHRhYmxlLnJvd3Nbcm93XS5jZWxsc1tjZWxsXTtcclxuXHJcbiAgICAgIHNldFRkU3R5bGUocm93LCBiZ1N0eWxlT2xkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJhY2tncm91bmQgY29sb3IgZm9yIGRlc3RpbmF0aW9uIHJvd1xyXG5cclxuICAgICAgcl9yb3cgPSByb3c7XHJcblxyXG4gICAgICBpZiAoIW1vdmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyB3YXMgY2xpY2tlZCBhbmQgbW91c2UgYnV0dG9uIHdhcyByZWxlYXNlZCByaWdodCBhd2F5IChyb3cgd2FzIG5vdCBtb3ZlZClcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd05vdE1vdmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgd2FzIG1vdmVkXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAocm93X3NvdXJjZSA9PT0gcl9yb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZHJvcHBlZCB0byB0aGUgc291cmNlIHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIG10X3RyID0gb2JqLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIFRSIGluIG1pbmkgdGFibGUgKG1pbmkgdGFibGUgaGFzIG9ubHkgb25lIHJvdylcclxuXHJcbiAgICAgICAgICBvYmpPbGQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbXRfdHIuc3R5bGUuYmFja2dyb3VuZENvbG9yOyAgICAgICAgICAgLy8gcmV0dXJuIGNvbG9yIHRvIHRoZSBzb3VyY2Ugcm93IGZyb20gdGhlIHJvdyBvZiBjbG9uZWQgbWluaSB0YWJsZSwgY29sb3Igb2YgdGhlIHNvdXJjZSByb3cgY2FuIGJlIGNoYW5nZWQgaW4gZXZlbnQucm93TW92ZWQoKSAod2hlbiB1c2VyIHdhbnRzIHRvIG1hcmsgc291cmNlIHJvdylcclxuXHJcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbXRfdHIuY2VsbHMubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGNvbG9yIHRvIHRoZSBlYWNoIHRhYmxlIGNlbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgb2JqT2xkLmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG10X3RyLmNlbGxzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvcjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGNsb25lZCBtaW5pIHRhYmxlXHJcbiAgICAgICAgICBkZWxldGUgb2JqT2xkLnJlZGlwcy5lbXB0eVJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGVtcHR5Um93IHByb3BlcnR5IGZyb20gc291cmNlIHJvdyBiZWNhdXNlIGVtcHR5Um93IHdpbGwgYmUgc2V0IG9uIG5leHQgbW92ZSwgb3RoZXJ3aXNlIHJvdyB3b3VsZCBiZSBvdmVyd3JpdHRlbiBhbmQgdGhhdCdzIG5vIGdvb2RcclxuXHJcbiAgICAgICAgICBpZiAoY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IHdhcyBjbG9uZWQgYW5kIGRyb3BwZWQgdG8gdGhlIHNvdXJjZSBsb2NhdGlvbiB0aGVuIGNhbGwgcm93Tm90Q2xvbmVkIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Tm90Q2xvbmVkKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5yb3dEcm9wcGVkU291cmNlKCkgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dEcm9wcGVkU291cmNlKHRkLnRhcmdldCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBkcm9wcGVkIHRvIHRoZSBuZXcgcm93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcm93RHJvcChyX3Jvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIWNsb25lZCAmJiAhdGhyZXNob2xkLmZsYWcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsaWNrZWQgZWxlbWVudCB3YXMgbm90IG1vdmVkIC0gRElWIGVsZW1lbnQgZGlkbid0IGNyb3NzIHRocmVzaG9sZCB2YWx1ZSwganVzdCBjYWxsIGV2ZW50Lm5vdE1vdmVkIGV2ZW50IGhhbmRsZXJcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdE1vdmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoY2xvbmVkICYmIHJvd19zb3VyY2UgPT09IHJvdyAmJiBjZWxsX3NvdXJjZSA9PT0gY2VsbCkgICAgICAgICAgICAvLyBkZWxldGUgY2xvbmVkIGVsZW1lbnQgaWYgZHJvcHBlZCBvbiB0aGUgc3RhcnQgcG9zaXRpb25cclxuICAgICAge1xyXG4gICAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7XHJcbiAgICAgICAgY2xvbmVkSWRbb2JqT2xkLmlkXSAtPSAxO1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdENsb25lZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGNsb25lZCAmJiBSRURJUFMuZHJhZy5jbG9uZS5kcm9wID09PSBmYWxzZSAmJiAoWCA8IHRhYmxlLnJlZGlwcy5vZmZzZXRbM10gfHwgWCA+IHRhYmxlLnJlZGlwcy5vZmZzZXRbMV0gfHwgWSA8IHRhYmxlLnJlZGlwcy5vZmZzZXRbMF0gfHwgWSA+IHRhYmxlLnJlZGlwcy5vZmZzZXRbMl0pKSAgICAvLyBkZWxldGUgY2xvbmVkIGVsZW1lbnQgaWYgZHJvcHBlZCBvdXRzaWRlIGN1cnJlbnQgdGFibGUgYW5kIGNsb25lLmRyb3AgaXMgc2V0IHRvIGZhbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopO1xyXG4gICAgICAgIGNsb25lZElkW29iak9sZC5pZF0gLT0gMTtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RDbG9uZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2UgY2FsbCBldmVudC5kcm9wcGVkQmVmb3JlKCksIGFwcGVuZCBvYmplY3QgdG8gdGhlIGNlbGwgYW5kIGNhbGwgZXZlbnQuZHJvcHBlZCgpXHJcbiAgICAgIHtcclxuICAgICAgICBkcm9wID0gUkVESVBTLmRyYWcuZXZlbnQuZHJvcHBlZEJlZm9yZSh0ZC50YXJnZXQpOyAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmRyb3BwZWRCZWZvcmUgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgIGVsZW1lbnREcm9wKGRyb3ApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRyb3AgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbCAob3IgZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3A9XCJmYWxzZVwiKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY2FsY3VsYXRlIHRhYmxlIGNlbGxzIGFuZCBzY3JvbGxlcnMgYmVjYXVzZSBjZWxsIGNvbnRlbnQgY291bGQgY2hhbmdlIHJvdyBkaW1lbnNpb25zXHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmZpbmlzaCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBsYXN0IGV2ZW50IGhhbmRsZXJcclxuICAgIH1cclxuXHJcbiAgICByb3dfb2xkID0gY2VsbF9vbGQgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgb2xkIHBvc2l0aW9uc1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBFbGVtZW50IGRyb3AuIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlVXAgYW5kIGFwcGVuZHMgZWxlbWVudCB0byB0aGUgdGFyZ2V0IHRhYmxlIGNlbGwuXHJcbiAgICogSWYgaW5wdXQgcGFyYW1ldGVyIFwiZHJvcFwiIGlzIHNldCB0byBcImZhbHNlXCIgKHRoaXMgaXMgYWN0dWFsbHkgcmV0dXJuIHZhbHVlIGZyb20gZXZlbnQuZHJvcHBlZEJlZm9yZSkgdGhlbiBESVYgZWxlbWVudHMgd2lsbCBub3QgYmUgZHJvcHBlZCAob25seSBjbG9uZWQgZWxlbWVudCB3aWxsIGJlIGRlbGV0ZWQpLlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2Ryb3BdIElmIG5vdCBcImZhbHNlXCIgdGhlbiBESVYgZWxlbWVudCB3aWxsIGJlIGRyb3BwZWQgdG8gdGhlIGNlbGwuXHJcbiAgICovXHJcbiAgZWxlbWVudERyb3AgPSBmdW5jdGlvbiAoZHJvcCkgXHJcbiAge1xyXG4gICAgdmFyIGNsb25lU291cmNlRGl2ID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmUgc291cmNlIGVsZW1lbnQgKG5lZWRlZCBpZiBjbG9uZS5zZW5kQmFjayBpcyBzZXQgdG8gdHJ1ZSlcclxuICAgIHZhciBkaXY7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vZGVMaXN0IG9mIERJViBlbGVtZW50cyBpbiB0YXJnZXQgY2VsbCAobmVlZGVkIGlmIGNsb25lLnNlbmRCYWNrIGlzIHNldCB0byB0cnVlKVxyXG4gICAgXHJcbiAgICBpZiAoZHJvcCAhPT0gZmFsc2UpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpbnB1dCBwYXJhbWV0ZXIgaXMgbm90IFwiZmFsc2VcIiB0aGVuIERJViBlbGVtZW50IHdpbGwgYmUgZHJvcHBlZCB0byB0aGUgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBpZiAoY2xvbmUuc2VuZEJhY2sgPT09IHRydWUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2xvbmUuc2VuZEJhY2sgaXMgc2V0IHRvIHRydWUgdGhlbiB0cnkgdG8gZmluZCBzb3VyY2UgZWxlbWVudCBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICB7XHJcbiAgICAgICAgZGl2ID0gdGQudGFyZ2V0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdESVYnKTsgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggYWxsIERJViBlbGVtZW50cyBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGFsbCBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAvLyBpZiBESVYgaW4gdGFyZ2V0IGNlbGwgaXMgc291cmNlIG9mIGRyb3BwZWQgRElWIGVsZW1lbnQgKGRyb3BwZWQgRElWIGlkIGFuZCBpZCBvZiBESVYgaW4gdGFyZ2V0IGNlbGwgaGFzIHRoZSBzYW1lIG5hbWUgYmVnaW5uaW5nIGxpa2UgXCJkMTJjMlwiIGFuZCBcImQxMlwiKVxyXG4gICAgICAgICAgLy8gb2YgY291cnNlLCB0aGUgY2FzZSB3aGVyZSBzb3VyY2UgRElWIGVsZW1lbnQgaXMgZHJvcHBlZCB0byB0aGUgY2VsbCB3aXRoIGNsb25lZCBESVYgZWxlbWVudCBzaG91bGQgYmUgZXhjbHVkZWQgKHBvc3NpYmxlIGluIGNsaW1pdDEgdHlwZSlcclxuICAgICAgICAgIGlmIChvYmogIT09IGRpdltpXSAmJiBvYmouaWQuaW5kZXhPZihkaXZbaV0uaWQpID09PSAwKSBcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgY2xvbmVTb3VyY2VEaXYgPSBkaXZbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gY2xvbmVTb3VyY2VEaXYgZWxlbWVudFxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGNsb25lU291cmNlRGl2KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjbG9uZSBzb3VyY2UgRElWIGVsZW1lbnQgZXhpc3RzIGluIHRhcmdldCBjZWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY2xvbmVMaW1pdChjbG9uZVNvdXJjZURpdiwgMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdCBjbGFzcyAoaW5jcmVtZW50IGJ5IDEpXHJcbiAgICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgZHJvcHBlZCBESVYgZWxlbWVudFxyXG4gICAgICAgICAgcmV0dXJuOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGZyb20gdGhlIG1ldGhvZCAoZXZlcnl0aGluZyBpcyBkb25lKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgdGQudGFyZ2V0LmFwcGVuZENoaWxkKG9iaik7XHJcbiAgICAgIFxyXG4gICAgICByZWdpc3RlckV2ZW50cyhvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyAoRklYIGZvciBTYWZhcmkgTW9iaWxlKVxyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5kcm9wcGVkKHRkLnRhcmdldCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQuZHJvcHBlZCBiZWNhdXNlIGNsb25lTGltaXQgY291bGQgY2FsbCBldmVudC5jbG9uZWRFbmQxIG9yIGV2ZW50LmNsb25lZEVuZDJcclxuICAgICAgXHJcbiAgICAgIGlmIChjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgb2JqZWN0IGlzIGNsb25lZFxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQuY2xvbmVkRHJvcHBlZCh0ZC50YXJnZXQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBjbG9uZWREcm9wcGVkIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICBjbG9uZUxpbWl0KG9iak9sZCwgLTEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY2xpbWl0MV9YIG9yIGNsaW1pdDJfWCBjbGFzc25hbWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoY2xvbmVkICYmIG9iai5wYXJlbnROb2RlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lZCBlbGVtZW50IHNob3VsZCBiZSBkZWxldGVkIChpZiBub3QgYWxyZWFkeSBkZWxldGVkKVxyXG4gICAge1xyXG4gICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3IgRElWIGVsZW1lbnQuXHJcbiAgICogRElWIGVsZW1lbnRzIHNob3VsZCBoYXZlIG9ubHkgb25tb3VzZWRvd24gKHVzaW5nIHRyYWRpdGlvbmFsIGV2ZW50IHJlZ2lzdHJhdGlvbiBtb2RlbCkuXHJcbiAgICogSSBoYWQgYSBwcm9ibGVtIHdpdGggYWR2YW5jZWQgZXZlbnQgcmVnaXN0cmF0aW9uIG1vZGVsLlxyXG4gICAqIEluIGNhc2Ugb2YgdXNpbmcgYWR2YW5jZWQgbW9kZWwsIHNlbGVjdGVkIHRleHQgYW5kIGRyYWdnZWQgRElWIGVsZW1lbnQgd2VyZSBpbiBjb2xsaXNpb24uXHJcbiAgICogSXQgbG9va3MgbGlrZSBzZWxlY3RlZCB0ZXh0IHdhcyBhYmxlIHRvIGRyYWcgaW5zdGVhZCBvZiBESVYgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBkaXYgUmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIGZvciBvbm1vdXNlZG93biwgb250b3VjaHN0YXJ0IGFuZCBvbmRibGNsaWNrIHRvIHRoZSBESVYgZWxlbWVudC5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmbGFnXSBJZiBzZXQgdG8gZmFsc2UgdGhlbiBldmVudCBsaXN0ZW5lcnMgd2lsbCBiZSBkZWxldGVkLlxyXG4gICAqL1xyXG4gIHJlZ2lzdGVyRXZlbnRzID0gZnVuY3Rpb24gKGRpdiwgZmxhZylcclxuICB7XHJcbiAgICBpZiAoZmxhZyA9PT0gZmFsc2UpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGZsYWcgaXMgc2UgdG8gZmFsc2UsIHRoZW4gcmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBvbiBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBkaXYub25tb3VzZWRvd24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBkaXYub25tb3VzZWRvd24gPSBoYW5kbGVyT25Nb3VzZURvd247XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIHJlc2V0U3R5bGVzID0gZnVuY3Rpb24gKGVsKSAgICAgICAgIC8vIEFmdGVyIGVsZW1lbnQgaXMgZHJvcHBlZCwgc3R5bGVzIG5lZWQgdG8gYmUgcmVzZXQuXHJcbiAge1xyXG4gICAgZWwuc3R5bGUudG9wICA9ICcnO1xyXG4gICAgZWwuc3R5bGUubGVmdCA9ICcnO1xyXG4gICAgZWwuc3R5bGUucG9zaXRpb24gPSAnJztcclxuICAgIGVsLnN0eWxlLnpJbmRleCA9ICcnO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIG9ubW91c2Vtb3ZlIGV2ZW50IGhhbmRsZXIuXHJcbiAgICogaGFuZGxlck9uTW91c2VNb3ZlIGlzIGF0dGFjaGVkIHRvIGRvY3VtZW50IGxldmVsIGluIGEgbW9tZW50IHdoZW4gRElWIGVsZW1lbnQgaXMgY2xpY2tlZCAodGhpcyBoYXBwZW5zIGluIGhhbmRsZXJPbk1vdXNlRG93bikuXHJcbiAgICogaGFuZGxlck9uTW91c2VVcCBkZXRhY2hlcyBvbm1vdXNlbW92ZSBhbmQgb25tb3VzZXVwIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGUgRXZlbnQgaW5mb3JtYXRpb24uXHJcbiAgICovXHJcbiAgaGFuZGxlck9uTW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpXHJcbiAge1xyXG4gICAgdmFyIGV2dCA9IGUgfHwgd2luZG93LmV2ZW50OyAgICAgICAgICAgIC8vIGRlZmluZSBldmVudCAoRkYgJiBJRSlcclxuICAgIHZhciBib3VuZCA9IFJFRElQUy5kcmFnLnNjcm9sbC5ib3VuZDsgICAvLyByZWFkIFwiYm91bmRcIiBwdWJsaWMgcHJvcGVydHkgKG1heWJlIGNvZGUgd2lsbCBiZSBmYXN0ZXIsIGFuZCBpdCB3aWxsIGJlIGVhc2llciB0byByZWZlcmVuY2UgaW4gb25tb3VzZW1vdmUgaGFuZGxlcilcclxuICAgIHZhciBzY2E7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50IHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFcclxuICAgIHZhciBYLCBZOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBkZWx0YVgsIGRlbHRhWTsgICAgICAgICAgICAgICAgICAgICAvLyBkZWx0YSBmcm9tIGluaXRpYWwgcG9zaXRpb25cclxuICAgIHZhciBpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIGxvY2FsIGxvb3BcclxuICAgIHZhciBzY3JvbGxQb3NpdGlvbjsgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgcG9zaXRpb24gdmFyaWFibGUgbmVlZGVkIGZvciBhdXRvc2Nyb2xsIGNhbGxcclxuXHJcbiAgICBYID0gcG9pbnRlci54ID0gZXZ0LmNsaWVudFg7XHJcbiAgICBZID0gcG9pbnRlci55ID0gZXZ0LmNsaWVudFk7XHJcblxyXG4gICAgZGVsdGFYID0gTWF0aC5hYnModGhyZXNob2xkLnggLSBYKTsgICAgICAgICAvLyBjYWxjdWxhdGUgZGVsdGEgZnJvbSBpbml0aWFsIHBvc2l0aW9uXHJcbiAgICBkZWx0YVkgPSBNYXRoLmFicyh0aHJlc2hvbGQueSAtIFkpO1xyXG5cclxuICAgIGlmICghbW92ZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgXCJtb3ZlZFwiIGZsYWcgaXNuJ3Qgc2V0ICh0aGlzIGlzIHRoZSBmaXJzdCBtb21lbnQgd2hlbiBvYmplY3QgaXMgbW92ZWQpXHJcbiAgICB7XHJcbiAgICAgIC8vcmVtZW1iZXIgcmVmZXJlbmNlIG9mIHRoZSBzb3VyY2Ugcm93LCBjbG9uZSBzb3VyY2Ugcm93IGFuZCBzZXQgb2JqIGFzIHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCByb3cgc2V0dGluZ3Mgb2YgXCJjbG9uZWRcIiBmbGFnIHNob3VsZCBnbyBiZWZvcmUgY2FsbGluZyByb3dDbG9uZSgpIGJlY2F1c2UgXCJjbG9uZWRcIiBpcyBuZWVkZWQgaW4gcm93Q2xvbmUoKSB0byBjdXQgb3V0IFwicmVkaXBzLWNsb25lXCIgY2xhc3MgbmFtZSBmcm9tIDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93IHJlZGlwcy1jbG9uZVwiPiBlbGVtZW50c1xyXG4gICAgICBpZiAoY2xvbmVDbGFzcyB8fCAoUkVESVBTLmRyYWcuY2xvbmUua2V5Um93ID09PSB0cnVlICYmIHNoaWZ0S2V5KSlcclxuICAgICAge1xyXG4gICAgICAgIGNsb25lZCA9IHRydWU7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIFJFRElQUy5kcmFnLm9iak9sZCA9IG9iak9sZCA9IG9iajsgICAgICAgIC8vIHJlbWVtYmVyIHJlZmVyZW5jZSB0byB0aGUgc291cmNlIHJvd1xyXG4gICAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSByb3dDbG9uZShvYmopOyAgICAvLyBjbG9uZSBzb3VyY2Ugcm93IGFuZCBzZXQgYXMgb2JqXHJcbiAgICAgIG9iai5zdHlsZS56SW5kZXggPSA5OTk7ICAgICAgICAgICAgICAgICAgIC8vIHNldCBoaWdoIHotaW5kZXggZm9yIGNsb25lZCBtaW5pIHRhYmxlXHJcblxyXG4gICAgICBvYmouc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOyAgICAgICAgICAgICAvLyBzZXQgc3R5bGUgdG8gZml4ZWQgdG8gYWxsb3cgZHJhZ2dpbmcgRElWIG9iamVjdFxyXG4gICAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBjYWxjdWxhdGUgY2VsbHMgZm9yIGNhc2Ugd2hlcmUgbW92ZWQgZWxlbWVudCBjaGFuZ2VkIGNlbGwgZGltZW5zaW9uLCBwbGFjZSAzIGVsZW1lbnRzIGluIHRoZSBzYW1lIGNlbGwgaW4gZXhhbXBsZTA4IGFuZCB0cnkgdG8gbW92ZSBvbmUgb3V0IG9mIHRoZSB0YWJsZSBjZWxsXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNvbHVtblxyXG5cclxuICAgICAgaWYgKGNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudCBoYW5kbGVyIChyb3cgY2xvbmVkL21vdmVkKVxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Q2xvbmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93TW92ZWQoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0UG9zaXRpb24oKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjb2xvciBmb3IgdGhlIGN1cnJlbnQgdGFibGUgY2VsbCBhbmQgcmVtZW1iZXIgcHJldmlvdXMgcG9zaXRpb24gYW5kIGNvbG9yLCBzZXRQb3NpdGlvbigpIG11c3QgZ28gYWZ0ZXIgY2FsbGluZyBldmVudC5tb3ZlZCgpIGFuZCBldmVudC5yb3dNb3ZlZCgpIGlmIHVzZXIgd2FudHMgdG8gY2hhbmdlIGNvbG9yIG9mIHNvdXJjZSByb3dcclxuXHJcbiAgICAgIGlmIChYID4gc2NyZWVuLndpZHRoIC0gb2JqTWFyZ2luWzFdKSAgICAvLyBpZiBlbGVtZW50IGlzIGZhciBhd2F5IG9uIHRoZSByaWdodCBzaWRlIG9mIHBhZ2UsIHNldCBwb3NzaWJsZSByaWdodCBwb3NpdGlvbiAoc2NyZWVuLndpZHRoIC0gb2JqZWN0IHdpZHRoKSwgb2JqTWFyZ2luWzFdICsgb2JqTWFyZ2luWzNdID0gb2JqZWN0IHdpZHRoXHJcbiAgICAgIHtcclxuICAgICAgICBvYmouc3R5bGUubGVmdCA9IChzY3JlZW4ud2lkdGggLSAob2JqTWFyZ2luWzFdICsgIG9iak1hcmdpblszXSkpICsgJ3B4JztcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKFkgPiBzY3JlZW4uaGVpZ2h0IC0gb2JqTWFyZ2luWzJdKSAgIC8vIGlmIGVsZW1lbnQgaXMgYmVsb3cgcGFnZSBib3R0b20sIHNldCBwb3NzaWJsZSBsb3dlciBwb3NpdGlvbiAoc2NyZWVuLndpZHRoIC0gb2JqZWN0IGhlaWdodCksIG9iak1hcmdpblswXSArIG9iak1hcmdpblsyXSA9IG9iamVjdCBoZWlnaHRcclxuICAgICAge1xyXG4gICAgICAgIG9iai5zdHlsZS50b3AgID0gKHNjcmVlbi5oZWlnaHQgLSAob2JqTWFyZ2luWzBdICsgb2JqTWFyZ2luWzJdKSkgKyAncHgnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZWQgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG1vdmVkX2ZsYWdcclxuXHJcbiAgICAvLyBzZXQgbGVmdCBhbmQgdG9wIHN0eWxlcyBmb3IgdGhlIG1vdmVkIGVsZW1lbnQgaWYgZWxlbWVudCBpcyBpbnNpZGUgd2luZG93LCB0aGlzIGNvbmRpdGlvbnMgd2lsbCBzdG9wIGVsZW1lbnQgb24gd2luZG93IGJvdW5kc1xyXG4gICAgaWYgKFggPiBvYmpNYXJnaW5bM10gJiYgWCA8IHNjcmVlbi53aWR0aCAtIG9iak1hcmdpblsxXSlcclxuICAgIHtcclxuICAgICAgb2JqLnN0eWxlLmxlZnQgPSAoWCAtIG9iak1hcmdpblszXSkgKyAncHgnO1xyXG4gICAgfVxyXG4gICAgaWYgKFkgPiBvYmpNYXJnaW5bMF0gJiYgWSA8IHNjcmVlbi5oZWlnaHQgLSBvYmpNYXJnaW5bMl0pXHJcbiAgICB7XHJcbiAgICAgIG9iai5zdHlsZS50b3AgID0gKFkgLSBvYmpNYXJnaW5bMF0pICsgJ3B4JztcclxuICAgIH1cclxuXHJcbiAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsICh0aGlzIGNvbmRpdGlvbiBzaG91bGQgc3BhcmUgQ1BVKTogMSkgaWYgbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgRElWIGlkPVwicmVkaXBzLWRyYWdcIiAyKSBhbmQgYXV0b3Njcm9sbCBpcyBub3Qgd29ya2luZyAzKSBhbmQgY3VycmVudCB0YWJsZSBjb250YWlucyBuZXN0ZWQgdGFibGUgb3IgY3Vyc29yIGlzIG91dHNpZGUgb2YgY3VycmVudCBjZWxsXHJcbiAgICBpZiAoWCA8IGRpdkJveFsxXSAmJiBYID4gZGl2Qm94WzNdICYmIFkgPCBkaXZCb3hbMl0gJiYgWSA+IGRpdkJveFswXSAmJlxyXG4gICAgICBlZGdlLmZsYWcueCA9PT0gMCAmJiBlZGdlLmZsYWcueSA9PT0gMCAmJlxyXG4gICAgICAoY3VycmVudENlbGwuY29udGFpblRhYmxlIHx8IChYIDwgY3VycmVudENlbGxbM10gfHwgWCA+IGN1cnJlbnRDZWxsWzFdIHx8IFkgPCBjdXJyZW50Q2VsbFswXSB8fCBZID4gY3VycmVudENlbGxbMl0pKSlcclxuICAgIHtcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlIHJvdyBhbmQgdGFibGUgY2VsbFxyXG4gICAgICBjZWxsQ2hhbmdlZCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbmV3IGxvY2F0aW9uIGlzIGluc2lkZSB0YWJsZSBhbmQgbmV3IGxvY2F0aW9uIGlzIGRpZmZlcmVudCB0aGVuIG9sZCBsb2NhdGlvblxyXG4gICAgfVxyXG5cclxuICAgIC8vIGlmIGF1dG9TY3JvbGwgb3B0aW9uIGlzIGVuYWJsZWQgKGJ5IGRlZmF1bHQgaXQgaXMgYnV0IGl0IGNhbiBiZSB0dXJuZWQgb2ZmKVxyXG4gICAgaWYgKFJFRElQUy5kcmFnLnNjcm9sbC5lbmFibGUpXHJcbiAgICB7XHJcbiAgICAgIGVkZ2UucGFnZS54ID0gYm91bmQgLSAoc2NyZWVuLndpZHRoIC8gMiAgPiBYID8gWCAtIG9iak1hcmdpblszXSA6IHNjcmVlbi53aWR0aCAtIFggLSBvYmpNYXJnaW5bMV0pOyAgICAgICAvLyBjYWxjdWxhdGUgaG9yaXpvbnRhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG5cclxuICAgICAgaWYgKGVkZ2UucGFnZS54ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kIHRoZW4gc2V0IHNjcm9sbCBkaXJlY3Rpb24gYW5kIGNhbGwgYXV0byBzY3JvbGxcclxuICAgICAge1xyXG4gICAgICAgIGlmIChlZGdlLnBhZ2UueCA+IGJvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3aGVuIG9iamVjdCBpcyBvbmx5IGhhbGYgdmlzaWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UucGFnZS54ID0gYm91bmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBnZXQgaG9yaXpvbnRhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgICAgLy9zY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IDA7ICAgLy9kaXNhYmxpbmcgYmVjYXVzZSB3ZSBzaG91bGRuJ3QgaGF2ZSB0aGUgdXNlciBzY3JvbGxpbmcgaG9yaXpvbnRhbGx5IGFuZCB0aGlzIGltcHJvdmVzIHBlcmZvcm1hbmNlIGZvciBsYXJnZSB0cmVlc1xyXG5cclxuICAgICAgICBlZGdlLnBhZ2UueCAqPSBYIDwgc2NyZWVuLndpZHRoIC8gMiA/IC0xIDogMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzY3JvbGwgZGlyZWN0aW9uXHJcblxyXG4gICAgICAgIC8vIGlmIHBhZ2UgYm91bmQgaXMgY3Jvc3NlZCBhbmQgdGhpcyB0d28gY2FzZXMgYXJlbid0IG1ldDogMSkgc2Nyb2xsYmFyIGlzIG9uIHRoZSBsZWZ0IGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCBsZWZ0IDIpIHNjcm9sbGJhciBpcyBvbiB0aGUgcmlnaHQgYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIHJpZ2h0XHJcbiAgICAgICAgaWYgKCEoKGVkZ2UucGFnZS54IDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA8PSAwKSB8fCAoZWRnZS5wYWdlLnggPiAwICYmIHNjcm9sbFBvc2l0aW9uID49IChzY3JvbGxEYXRhLndpZHRoIC0gc2NyZWVuLndpZHRoKSkpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChlZGdlLmZsYWcueCsrID09PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpcmUgYXV0b3Njcm9sbCBmdW5jdGlvbiAodGhpcyBzaG91bGQgaGFwcGVuIG9ubHkgb25jZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZSh3aW5kb3csICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgIC8vIHJlc2V0IG9uc2Nyb2xsIGV2ZW50XHJcbiAgICAgICAgICAgIGF1dG9TY3JvbGxYKHdpbmRvdyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHdpbmRvdyBhdXRvc2Nyb2xsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIGVkZ2UucGFnZS54ID0gMDtcclxuICAgICAgfVxyXG5cclxuICAgICAgZWRnZS5wYWdlLnkgPSBib3VuZCAtIChzY3JlZW4uaGVpZ2h0IC8gMiA+IFkgPyBZIC0gb2JqTWFyZ2luWzBdIDogc2NyZWVuLmhlaWdodCAtIFkgLSBvYmpNYXJnaW5bMl0pOyAgICAgIC8vIGNhbGN1bGF0ZSB2ZXJ0aWNhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICBcclxuICAgICAgaWYgKGVkZ2UucGFnZS55ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZWRnZS5wYWdlLnkgPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBtYXggY3Jvc3NlZCBib3VuZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UucGFnZS55ID0gYm91bmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHZlcnRpY2FsIHdpbmRvdyBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgICBlZGdlLnBhZ2UueSAqPSBZIDwgc2NyZWVuLmhlaWdodCAvIDIgPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzY3JvbGwgZGlyZWN0aW9uXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCEoKGVkZ2UucGFnZS55IDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA8PSAwKSB8fCAoZWRnZS5wYWdlLnkgPiAwICYmIHNjcm9sbFBvc2l0aW9uID49IChzY3JvbGxEYXRhLmhlaWdodCAtIHNjcmVlbi5oZWlnaHQpKSkpICAgIC8vIGlmIHBhZ2UgYm91bmQgaXMgY3Jvc3NlZCBhbmQgdGhpcyB0d28gY2FzZXMgYXJlbid0IG1ldDogMSkgc2Nyb2xsYmFyIGlzIG9uIHRoZSBwYWdlIHRvcCBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgdXAgMikgc2Nyb2xsYmFyIGlzIG9uIHRoZSBwYWdlIGJvdHRvbSBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgZG93blxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChlZGdlLmZsYWcueSsrID09PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpcmUgYXV0b3Njcm9sbCAodGhpcyBzaG91bGQgaGFwcGVuIG9ubHkgb25jZSlcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZSh3aW5kb3csICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9uc2Nyb2xsIGV2ZW50XHJcbiAgICAgICAgICAgIGF1dG9TY3JvbGxZKHdpbmRvdyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHdpbmRvdyBhdXRvc2Nyb2xsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgXHJcbiAgICAgIHtcclxuICAgICAgICBlZGdlLnBhZ2UueSA9IDA7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzY3JvbGxEYXRhLmNvbnRhaW5lci5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXN0IGlmIGRyYWdnZWQgb2JqZWN0IGlzIGluIHNjcm9sbGFibGUgY29udGFpbmVyLCB0aGlzIGNvZGUgd2lsbCBiZSBleGVjdXRlZCBvbmx5IGlmIHNjcm9sbGFibGUgY29udGFpbmVyIChESVYgd2l0aCBvdmVyZmxvdyBvdGhlciB0aGFuICd2aXNpYmxlKSBleGlzdHMgb24gcGFnZVxyXG4gICAgICB7XHJcbiAgICAgICAgc2NhID0gc2Nyb2xsRGF0YS5jb250YWluZXJbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHNjYS5hdXRvc2Nyb2xsICYmIFggPCBzY2Eub2Zmc2V0WzFdICYmIFggPiBzY2Eub2Zmc2V0WzNdICYmIFkgPCBzY2Eub2Zmc2V0WzJdICYmIFkgPiBzY2Eub2Zmc2V0WzBdKSAvLyBpZiBkcmFnZ2VkIG9iamVjdCBpcyBpbnNpZGUgc2Nyb2xsYWJsZSBjb250YWluZXIgYW5kIHNjcm9sbGFibGUgY29udGFpbmVyIGhhcyBlbmFibGVkIGF1dG9zY3JvbGwgb3B0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWRnZS5kaXYueCA9IGJvdW5kIC0gKHNjYS5taWRzdFggID4gWCA/IFggLSBvYmpNYXJnaW5bM10gLSBzY2Eub2Zmc2V0WzNdIDogc2NhLm9mZnNldFsxXSAtIFggLSBvYmpNYXJnaW5bMV0pOyAgIC8vIGNhbGN1bGF0ZSBob3Jpem9udGFsbHkgY3Jvc3NlZCBwYWdlIGJvdW5kXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChlZGdlLmRpdi54ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kIHRoZW4gc2V0IHNjcm9sbCBkaXJlY3Rpb24gYW5kIGNhbGwgYXV0byBzY3JvbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZGl2LnggPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2hlbiBvYmplY3QgaXMgb25seSBoYWxmIHZpc2libGUgKHBhZ2UgaXMgc2Nyb2xsZWQgb24gdGhhdCBvYmplY3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBlZGdlLmRpdi54ID0gYm91bmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnggKj0gWCA8IHNjYS5taWRzdFggPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvbjogbmVnYXRpdmUgLSBsZWZ0LCBwb3NpdGl2ZSAtIHJpZ2h0XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZWRnZS5mbGFnLngrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgYW5kIGNhbGwgYXV0b1Njcm9sbFkgZnVuY3Rpb24gb25seSBvbmNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBSRURJUFMuZXZlbnQucmVtb3ZlKHNjYS5kaXYsICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7XHJcbiAgICAgICAgICAgICAgYXV0b1Njcm9sbFgoc2NhLmRpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnggPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBlZGdlLmRpdi55ID0gYm91bmQgLSAoc2NhLm1pZHN0WSAgPiBZID8gWSAtIG9iak1hcmdpblswXSAtIHNjYS5vZmZzZXRbMF0gOiBzY2Eub2Zmc2V0WzJdIC0gWSAtIG9iak1hcmdpblsyXSk7ICAgLy8gY2FsY3VsYXRlIHZlcnRpY2FsbHkgY3Jvc3NlZCBwYWdlIGJvdW5kXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChlZGdlLmRpdi55ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgY3Jvc3NlcyBwYWdlIGJvdW5kIHRoZW4gc2V0IHNjcm9sbCBkaXJlY3Rpb24gYW5kIGNhbGwgYXV0byBzY3JvbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZGl2LnkgPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2hlbiBvYmplY3QgaXMgb25seSBoYWxmIHZpc2libGUgKHBhZ2UgaXMgc2Nyb2xsZWQgb24gdGhhdCBvYmplY3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBlZGdlLmRpdi55ID0gYm91bmQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnkgKj0gWSA8IHNjYS5taWRzdFkgPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvbjogbmVnYXRpdmUgLSB1cCwgcG9zaXRpdmUgLSBkb3duXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoZWRnZS5mbGFnLnkrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgYW5kIGNhbGwgYXV0b1Njcm9sbFkgZnVuY3Rpb24gb25seSBvbmNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBSRURJUFMuZXZlbnQucmVtb3ZlKHNjYS5kaXYsICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7XHJcbiAgICAgICAgICAgICAgYXV0b1Njcm9sbFkoc2NhLmRpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGVkZ2UuZGl2LnkgPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnJlYWsgdGhlIGxvb3AgKGNoZWNraW5nIGZvciBvdGhlciBzY3JvbGxhYmxlIGNvbnRhaW5lcnMgaXMgbm90IG5lZWRlZClcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIChJIG1lYW4gZHJhZ2dlZCBvYmplY3QgaXNuJ3QgaW5zaWRlIGFueSBvZiBzY3JvbGxhYmxlIGNvbnRhaW5lcikgcmVzZXQgY3Jvc3NlZCBlZGdlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWRnZS5kaXYueCA9IGVkZ2UuZGl2LnkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBzdG9wIGFsbCBwcm9wYWdhdGlvbiBvZiB0aGUgZXZlbnQgaW4gdGhlIGJ1YmJsaW5nIHBoYXNlLiAgKHNhdmUgc3lzdGVtIHJlc291cmNlcyBieSB0dXJuaW5nIG9mZiBldmVudCBidWJibGluZyAvIHByb3BhZ2F0aW9uKVxyXG4gICAgZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcbiAgICBpZiAoZXZ0LnN0b3BQcm9wYWdhdGlvbikgXHJcbiAgICB7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgKGZyb20gaGFuZGxlck9uTW91c2VNb3ZlLCBhdXRvU2Nyb2xsWCwgYXV0b1Njcm9sbFkpIGluIGNhc2Ugb2YgY2hhbmdlIG9mIGN1cnJlbnQgdGFibGUgY2VsbC5cclxuICAvLyBXaGVuIGNoYW5nZSBoYXBwZW5zLCB0aGVuIHJldHVybiBiYWNrZ3JvdW5kIGNvbG9yIHRvIG9sZCBwb3NpdGlvbiwgaGlnaGxpZ2h0IG5ldyBwb3NpdGlvbiwgY2FsY3VsYXRlIGNlbGwgYm91bmRhcmllcyBhbmQgY2FsbCBldmVudC5jaGFuZ2VkLlxyXG4gIGNlbGxDaGFuZ2VkID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgaWYgKChyb3cgIT09IHJvd19vbGQgfHwgY2VsbCAhPT0gY2VsbF9vbGQpKSBcclxuICAgIHtcclxuICAgICAgaWYgKHJvd19vbGQgIT09IG51bGwgJiYgY2VsbF9vbGQgIT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNlbGwgYmFja2dyb3VuZCBjb2xvciB0byB0aGUgcHJldmlvdXMgY2VsbFxyXG4gICAgICB7XHJcbiAgICAgICAgc2V0VGRTdHlsZShyb3dfb2xkLCBiZ1N0eWxlT2xkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIGZvciBwcmV2aW91cyB0YWJsZSByb3dcclxuICAgICAgICBSRURJUFMuZHJhZy50ZC5wcmV2aW91cyA9IHRkLnByZXZpb3VzID0gdGFibGUucm93c1tyb3dfb2xkXS5jZWxsc1tjZWxsX29sZF07ICAgICAgLy8gZGVmaW5lIHByZXZpb3VzIHRhYmxlIGNlbGxcclxuICAgICAgICBSRURJUFMuZHJhZy50ZC5jdXJyZW50ID0gdGQuY3VycmVudCA9IHRhYmxlLnJvd3Nbcm93XS5jZWxsc1tjZWxsXTsgICAgICAgICAgICAgICAgLy8gZGVmaW5lIGN1cnJlbnQgdGFibGUgY2VsbFxyXG5cclxuICAgICAgICBpZiAocm93ICE9PSByb3dfb2xkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHRhYmxlIG9yIHJvdyBzaG91bGQgY2hhbmdlIChjaGFuZ2luZyBjZWxsIGluIHRoZSBzYW1lIHJvdyB3aWxsIGJlIGlnbm9yZWQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Q2hhbmdlZCh0ZC5jdXJyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNldFBvc2l0aW9uKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gSW4gaW5pdGlhbGl6YXRpb24gcGhhc2UsIHRoaXMgbWV0aG9kIGlzIGF0dGFjaGVkIGFzIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIgZm9yIHdpbmRvdy4gIEl0IGFsc28gY2FsY3VsYXRlcyB3aW5kb3cgd2lkdGggYW5kIHdpbmRvdyBoZWlnaHQuIFJlc3VsdCBpcyBzYXZlZCBpbiB2YXJpYWJsZXMgc2NyZWVuLndpZHRoIGFuZCBzY3JlZW4uaGVpZ2h0IHZpc2libGUgaW5zaWRlIFJFRElQUy5kcmFnIHByaXZhdGUgc2NvcGUuXHJcbiAgaGFuZGxlck9uUmVzaXplID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgc2NyZWVuLndpZHRoICA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgc2NyZWVuLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIFxyXG4gICAgc2Nyb2xsRGF0YS53aWR0aCAgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg7ICAgICAvLyBzZXQgc2Nyb2xsIHNpemUgKG9ucmVzaXplLCBvbmxvYWQgYW5kIG9ubW91c2V1cCBldmVudClcclxuICAgIHNjcm9sbERhdGEuaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodDtcclxuICAgIFxyXG4gICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgY29sdW1zIGFuZCByb3dzIG9mZnNldCAoY2VsbHMgZGltZW5zaW9ucylcclxuICB9O1xyXG5cclxuICAvLyBNZXRob2Qgc2V0cyBjdXJyZW50IHJvdyBhbmQgY2VsbC4gIEN1cnJlbnQgY2VsbCBwb3NpdGlvbiBpcyBiYXNlZCBvbiBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyIGFuZCBjYWxjdWxhdGVkIGdyaWQgb2YgdGFibGVzIGluc2lkZSBkcmFnIGNvbnRhaW5lci5cclxuICAvLyBSb3dzIHdpdGggZGlzcGxheT0nbm9uZScgYXJlIG5vdCBjb250YWluZWQgaW4gcm93X29mZnNldCBhcnJheSBzbyByb3cgYm91bmRzIGNhbGN1bGF0aW9uIHNob3VsZCB0YWtlIGNhcmUgYWJvdXQgc3BhcnNlIGFycmF5cyAoc2luY2UgdmVyc2lvbiA0LjMuNikuXHJcbiAgc2V0VGFibGVSb3dDb2x1bW4gPSBmdW5jdGlvbiAoKVxyXG4gIHtcclxuICAgIHZhciBwcmV2aW91czsgICAgICAgLy8gc2V0IHByZXZpb3VzIHBvc2l0aW9uIChjdXJyZW50IGNlbGwgd2lsbCBub3QgYmUgaGlnaGxpZ2h0ZWQpXHJcbiAgICB2YXIgcm93X29mZnNldDsgICAgIC8vIHJvdyBvZmZzZXRzIGZvciB0aGUgc2VsZWN0ZWQgdGFibGUgKHJvdyBib3ggYm91bmRzKVxyXG4gICAgdmFyIHJvd19mb3VuZDsgICAgICAvLyByZW1lbWJlciBmb3VuZCByb3dcclxuICAgIHZhciB0b3MgPSBbXTsgICAgICAgLy8gdGFibGUgb2Zmc2V0XHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgdmFyIGk7ICAgICAgICAgICAgICAvLyB1c2VkIGluIGxvY2FsIGxvb3BcclxuXHJcbiAgICBwcmV2aW91cyA9IGZ1bmN0aW9uICgpICAgIC8vIHNldCBwcmV2aW91cyBwb3NpdGlvbiAoY3VycmVudCBjZWxsIHdpbGwgbm90IGJlIGhpZ2hsaWdodGVkKVxyXG4gICAge1xyXG4gICAgICBpZiAocm93X29sZCAhPT0gbnVsbCAmJiBjZWxsX29sZCAhPT0gbnVsbClcclxuICAgICAge1xyXG4gICAgICAgIHJvdyA9IHJvd19vbGQ7XHJcbiAgICAgICAgY2VsbCA9IGNlbGxfb2xkO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFggPSBwb2ludGVyLng7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICBZID0gcG9pbnRlci55O1xyXG5cclxuICAgIHRvc1swXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMF07IC8vIHRvcFxyXG4gICAgdG9zWzFdID0gdGFibGUucmVkaXBzLm9mZnNldFsxXTsgLy8gcmlnaHRcclxuICAgIHRvc1syXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMl07IC8vIGJvdHRvbVxyXG4gICAgdG9zWzNdID0gdGFibGUucmVkaXBzLm9mZnNldFszXTsgLy8gbGVmdFxyXG5cclxuICAgIC8vIGlmIHRhYmxlIGJlbG9uZ3MgdG8gdGhlIHNjcm9sbGFibGUgY29udGFpbmVyIHRoZW4gc2V0IHNjcm9sbGFibGUgY29udGFpbmVyIG9mZnNldCBpZiBuZWVkZWQgaW4gY2FzZSB3aGVuIHNvbWUgcGFydHMgb2YgdGFibGUgYXJlIGhpZGRlbiAoZm9yIGV4YW1wbGUgd2l0aCBcIm92ZXJmbG93OiBhdXRvXCIpXHJcbiAgICBpZiAodGFibGUuc2NhICE9PSB1bmRlZmluZWQpXHJcbiAgICB7XHJcbiAgICAgIHRvc1swXSA9IHRvc1swXSA+IHRhYmxlLnNjYS5vZmZzZXRbMF0gPyB0b3NbMF0gOiB0YWJsZS5zY2Eub2Zmc2V0WzBdOyAvLyB0b3BcclxuICAgICAgdG9zWzFdID0gdG9zWzFdIDwgdGFibGUuc2NhLm9mZnNldFsxXSA/IHRvc1sxXSA6IHRhYmxlLnNjYS5vZmZzZXRbMV07IC8vIHJpZ2h0XHJcbiAgICAgIHRvc1syXSA9IHRvc1syXSA8IHRhYmxlLnNjYS5vZmZzZXRbMl0gPyB0b3NbMl0gOiB0YWJsZS5zY2Eub2Zmc2V0WzJdOyAvLyBib3R0b21cclxuICAgICAgdG9zWzNdID0gdG9zWzNdID4gdGFibGUuc2NhLm9mZnNldFszXSA/IHRvc1szXSA6IHRhYmxlLnNjYS5vZmZzZXRbM107IC8vIGxlZnRcclxuICAgIH1cclxuXHJcbiAgICBpZiAodG9zWzNdIDwgWCAmJiBYIDwgdG9zWzFdICYmIHRvc1swXSA8IFkgJiYgWSA8IHRvc1syXSkgICAgICAgICAgICAgICAgIC8vIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIHRhYmxlIChvciBzY3JvbGxhYmxlIGNvbnRhaW5lcilcclxuICAgIHtcclxuICAgICAgcm93X29mZnNldCA9IHRhYmxlLnJlZGlwcy5yb3dfb2Zmc2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIHJvdyBvZmZzZXRzIGZvciB0aGUgc2VsZWN0ZWQgdGFibGUgKHJvdyBib3ggYm91bmRzKVxyXG5cclxuICAgICAgZm9yIChyb3cgPSAwOyByb3cgPCByb3dfb2Zmc2V0Lmxlbmd0aCAtIDE7IHJvdysrKSAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCB0aGUgY3VycmVudCByb3cgKGxvb3Agc2tpcHMgaGlkZGVuIHJvd3MpXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAocm93X29mZnNldFtyb3ddID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGRvZXNuJ3QgZXhpc3QgKGluIGNhc2Ugb2YgaGlkZGVuIHJvdykgLSBza2lwIGl0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdXJyZW50Q2VsbFswXSA9IHJvd19vZmZzZXRbcm93XVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRvcCBhbmQgYm90dG9tIGNlbGwgYm91bmRzXHJcblxyXG4gICAgICAgIGlmIChyb3dfb2Zmc2V0W3JvdyArIDFdICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYm90dG9tIGNlbGwgYm91bmQgKGlmIGlzIHBvc3NpYmxlKSAtIGhpZGRlbiByb3cgZG9lc24ndCBleGlzdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGN1cnJlbnRDZWxsWzJdID0gcm93X29mZnNldFtyb3cgKyAxXVswXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhpZGRlbiByb3cgKGxpa2Ugc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZvciAoaSA9IHJvdyArIDI7IGkgPCByb3dfb2Zmc2V0Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZvciBuZXh0IHZpc2libGUgcm93XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChyb3dfb2Zmc2V0W2ldICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHZpc2libGUgcm93IGZvdW5kXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IHJvd19vZmZzZXRbaV1bMF07XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChZIDw9IGN1cnJlbnRDZWxsWzJdKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0b3AgYm91bmQgb2YgdGhlIG5leHQgcm93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICByb3dfZm91bmQgPSByb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBmb3VuZCByb3dcclxuXHJcbiAgICAgIGlmIChyb3cgPT09IHJvd19vZmZzZXQubGVuZ3RoIC0gMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGxvb3AgZXhjZWVkcywgdGhlbiBzZXQgYm91bmRzIGZvciB0aGUgbGFzdCByb3cgKG9mZnNldCBmb3IgdGhlIGxhc3Qgcm93IGRvZXNuJ3Qgd29yayBpbiBJRTgsIHNvIHVzZSB0YWJsZSBib3VuZHMpXHJcbiAgICAgIHtcclxuICAgICAgICBjdXJyZW50Q2VsbFswXSA9IHJvd19vZmZzZXRbcm93XVswXTtcclxuICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMl07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNlbGwgPSAwO1xyXG5cclxuICAgICAgaWYgKHJvdyA8IDAgfHwgY2VsbCA8IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNlbGwgPCAwIG9yIHJvdyA8IDAgdGhlbiB1c2UgbGFzdCBwb3NzaWJsZSBsb2NhdGlvblxyXG4gICAgICB7XHJcbiAgICAgICAgcHJldmlvdXMoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChyb3cgIT09IHJvd19mb3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBjZWxsIGZvdW5kIGJ1dCBpZiBjdXJyZW50IHJvdyBkaWZmZXIgZnJvbSBwcmV2aW91c2x5IGZvdW5kIHJvdyAodGhhbmtzIHRvbyB3aGlsZSBsb29wIHdpdGggcm93LS0pIHRoZW4gdGVzdCBpZiBZIGlzIGluc2lkZSBjdXJyZW50IGNlbGwsICh0aGlzIHNob3VsZCBwcmV2ZW50IGNhc2Ugd2hlcmUgVEQgYm9yZGVyID4gMXB4IGFuZCB1cHBlciBjb2xzcGFuZWQgcm93IGxpa2UgaW4gZXhhbXBsZTE1KSBsb2dpYyB3aWxsIGVuZCBpbiB1cHBlciBjb2xzcGFuZWQgcm93IHdoaWxlIGN1cnJlbnQgcm93IHdpbGwgbm90IG1vdmUgLSBhbmQgdGhhdCB3YXMgd3JvbmdcclxuICAgICAge1xyXG5cclxuICAgICAgICBjdXJyZW50Q2VsbFswXSA9IHJvd19vZmZzZXRbcm93XVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY2FsY3VsYXRlIHRvcCBhbmQgYm90dG9tIHJvdyBvZmZzZXQgKGFnYWluKVxyXG4gICAgICAgIGN1cnJlbnRDZWxsWzJdID0gY3VycmVudENlbGxbMF0gKyB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF0ub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAoWSA8IGN1cnJlbnRDZWxsWzBdIHx8IFkgPiBjdXJyZW50Q2VsbFsyXSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIFkgaXMgb3V0c2lkZSBvZiB0aGUgY3VycmVudCByb3csIHJldHVybiBwcmV2aW91cyBsb2NhdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByZXZpb3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIHNldHMgYmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIGN1cnJlbnQgdGFibGUgY2VsbCBhbmQgcmVtZW1iZXJzIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBiYWNrZ3JvdW5kIGNvbG9yLiAgSXQgaXMgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlIGFuZCBjZWxsQ2hhbmdlZC5cclxuICBzZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgaWYgKHJvdyAhPT0gbnVsbCAmJiBjZWxsICE9PSBudWxsKSAgICAgIC8vIGluIGNhc2UgaWYgb3JkaW5hcnkgZWxlbWVudCBpcyBwbGFjZWQgaW5zaWRlICdkZW55JyB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIGJnU3R5bGVPbGQgPSBnZXRUZFN0eWxlKHJvdyk7ICAgICAgICAgLy8gcmVtZW1iZXIgYmFja2dyb3VuZCBjb2xvciBiZWZvcmUgc2V0dGluZyB0aGUgbmV3IGJhY2tncm91bmQgY29sb3JcclxuICAgICAgc2V0VGRTdHlsZShyb3cpOyAgICAgICAgICAgICAgICAgICAgICAvLyBoaWdobGlnaHQgY3VycmVudCBURCAvIFRSIChjb2xvcnMgYW5kIHN0eWxlcyBhcmUgcmVhZCBmcm9tIHB1YmxpYyBwcm9wZXJ0eSBcImhvdmVyXCJcclxuICAgICAgcm93X29sZCA9IHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBjdXJyZW50IHBvc2l0aW9uIChmb3Igcm93IGFuZCBjZWxsKVxyXG4gICAgICBjZWxsX29sZCA9IGNlbGw7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHNldHMgdGFibGUgY2VsbChzKSBiYWNrZ3JvdW5kIHN0eWxlcyAoYmFja2dyb3VuZCBjb2xvcnMgYW5kIGJvcmRlciBzdHlsZXMpLlxyXG4gICAqIElmIHRkU3R5bGUgaXMgdW5kZWZpbmVkIHRoZW4gY3VycmVudCB0ZC90ciB3aWxsIGJlIGhpZ2hsaWdodGVkIGZyb20gcHVibGljIHByb3BlcnR5IGhvdmVyLmNvbG9yX3RkLCBob3Zlci5jb2xvcl90ciAuLi5cclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHJpIFJvdyBpbmRleC5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gdCBPYmplY3QgY29udGFpbnMgYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcyAoXCJ0XCIgaXMgVEQgc3R5bGUgb2JqZWN0IGlzIHByZXBhcmVkIGluIGdldFRkU3R5bGUgbWV0aG9kKS5cclxuICAgKi9cclxuICBzZXRUZFN0eWxlID0gZnVuY3Rpb24gKHJpLCB0KSBcclxuICB7XHJcbiAgICB2YXIgdHIsIHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgYW5kIHRkLnN0eWxlXHJcblxyXG4gICAgdHIgPSB0YWJsZS5yb3dzW3JpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgdGFibGUgcm93XHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHIuY2VsbHMubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29sb3JzIHRvIHRhYmxlIGNlbGxzIChyZXNwZWN0aXZlbHkpIG9yIGZpcnN0IGNvbG9yIHRvIGFsbCBjZWxscyAoaW4gY2FzZSBvZiBzZXR0aW5ncyBob3ZlciB0byB0aGUgcm93KVxyXG4gICAge1xyXG4gICAgICBzID0gdHIuY2VsbHNbaV0uc3R5bGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gY3VycmVudCBURCBzdHlsZVxyXG4gICAgICBzLmJhY2tncm91bmRDb2xvciA9ICh0ID09PSB1bmRlZmluZWQpID8gUkVESVBTLmRyYWcuaG92ZXIuY29sb3JUciA6IHQuY29sb3JbaV0udG9TdHJpbmcoKTsgIC8vIFRSIGJhY2tncm91bmQgY29sb3IgLSB0ZFN0eWxlIGlzIHVuZGVmaW5lZCB0aGVuIGhpZ2hsaWdodCBURCBvdGhlcndpc2UgcmV0dXJuIHByZXZpb3VzIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgXHJcbiAgICAgIGlmIChSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUciAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVFIgYm9yZGVyIC0gaWYgaG92ZXIuYm9yZGVyVGQgaXMgc2V0IHRoZW4gdGFrZSBjYXJlIG9mIGJvcmRlciBzdHlsZVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJvcmRlciAoaGlnaGxpZ2h0KSAtIHNvdXJjZSByb3cgd2lsbCBub3QgaGF2ZSBhbnkgYm9yZGVyXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKHJvdyA8IHJvd19zb3VyY2UpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBpcyBtb3ZlZCBhYm92ZSBzb3VyY2Ugcm93IGluIGN1cnJlbnQgdGFibGVcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcy5ib3JkZXJUb3AgPSBSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaXMgbW92ZWQgYmVsb3cgc291cmNlIHJvdyBpbiBjdXJyZW50IHRhYmxlXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHMuYm9yZGVyQm90dG9tID0gUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBwcmV2aW91cyBzdGF0ZSBib3JkZXJUb3AgYW5kIGJvcmRlckJvdHRvbSAoZXhpdCBmcm9tIFREKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHMuYm9yZGVyVG9wV2lkdGggPSB0LnRvcFtpXVswXTtcclxuICAgICAgICAgIHMuYm9yZGVyVG9wU3R5bGUgPSB0LnRvcFtpXVsxXTtcclxuICAgICAgICAgIHMuYm9yZGVyVG9wQ29sb3IgPSB0LnRvcFtpXVsyXTtcclxuICAgICAgICAgIHMuYm9yZGVyQm90dG9tV2lkdGggPSB0LmJvdHRvbVtpXVswXTtcclxuICAgICAgICAgIHMuYm9yZGVyQm90dG9tU3R5bGUgPSB0LmJvdHRvbVtpXVsxXTtcclxuICAgICAgICAgIHMuYm9yZGVyQm90dG9tQ29sb3IgPSB0LmJvdHRvbVtpXVsyXTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLy8gTWV0aG9kIHJldHVybnMgYmFja2dyb3VuZCBhbmQgYm9yZGVyIHN0eWxlcyBhcyBvYmplY3QgZm9yIHRoZSBpbnB1dCBwYXJhbWV0ZXIgcm93IGluZGV4IChyaSkuICBAcmV0dXJuIHtPYmplY3R9IE9iamVjdCBjb250YWluaW5nIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgKGZvciB0aGUgcm93KS5cclxuICBnZXRUZFN0eWxlID0gZnVuY3Rpb24gKHJpKSBcclxuICB7XHJcbiAgICB2YXIgdHIsIGM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgYW5kIHRkIHJlZmVyZW5jZSAgIFxyXG4gICAgdmFyIHQgPSB7Y29sb3I6IFtdLCB0b3A6IFtdLCByaWdodDogW10sIGJvdHRvbTogW10sIGxlZnQ6IFtdfTsgICAgICAgIC8vIGRlZmluZSBURCBzdHlsZSBvYmplY3Qgd2l0aCBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzOiB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnRcclxuICAgICAgXHJcbiAgICB2YXIgYm9yZGVyID0gZnVuY3Rpb24gKGMsIG5hbWUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2QgZ2V0cyBib3JkZXIgc3R5bGVzOiB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRcclxuICAgIHtcclxuICAgICAgdmFyIHdpZHRoID0gJ2JvcmRlcicgKyBuYW1lICsgJ1dpZHRoJywgc3R5bGUgPSAnYm9yZGVyJyArIG5hbWUgKyAnU3R5bGUnLCBjb2xvciA9ICdib3JkZXInICsgbmFtZSArICdDb2xvcic7XHJcbiAgICAgIHJldHVybiBbZ2V0U3R5bGUoYywgd2lkdGgpLCBnZXRTdHlsZShjLCBzdHlsZSksIGdldFN0eWxlKGMsIGNvbG9yKV07XHJcbiAgICB9O1xyXG5cclxuICAgIHRyID0gdGFibGUucm93c1tyaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHRhYmxlIHJvd1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgc3R5bGVzIGZvciBlYWNoIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgYyA9IHRyLmNlbGxzW2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgVEQgcmVmZXJlbmNlXHJcbiAgICAgIHQuY29sb3JbaV0gPSBjLnN0eWxlLmJhY2tncm91bmRDb2xvcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICBcclxuICAgICAgaWYgKFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciB0b3AgYW5kIGJvdHRvbSBURCBib3JkZXIgc3R5bGVzIGlmIGhvdmVyLmJvcmRlclRyIHByb3BlcnR5IGlzIHNldFxyXG4gICAgICB7XHJcbiAgICAgICAgdC50b3BbaV0gPSBib3JkZXIoYywgJ1RvcCcpO1xyXG4gICAgICAgIHQuYm90dG9tW2ldID0gYm9yZGVyKGMsICdCb3R0b20nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0O1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCByZXR1cm5zIGFycmF5IG9mIGVsZW1lbnQgYm91bmRzIChvZmZzZXQpIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdCAobmVlZGVkIGZvciB0YWJsZSBncmlkIGNhbGN1bGF0aW9uKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBib3ggSFRNTEVsZW1lbnQgZm9yIGJveCBtZXRyaWNzLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcG9zaXRpb25dIEhUTUxFbGVtZW50IFwicG9zaXRpb25cIiBzdHlsZS4gRWxlbWVudHMgd2l0aCBzdHlsZSBcImZpeGVkXCIgd2lsbCBub3QgaGF2ZSBpbmNsdWRlZCBwYWdlIHNjcm9sbCBvZmZzZXQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYm94X3Njcm9sbF0gSWYgc2V0IHRvIFwiZmFsc2VcIiB0aGVuIGVsZW1lbnQgc2Nyb2xsIG9mZnNldCB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbiBjYWxjdWxhdGlvbiAoZGVmYXVsdCBpcyBcInRydWVcIikuXHJcbiAgICogQHJldHVybiB7QXJyYXl9IEJveCBvZmZzZXQgYXJyYXk6IFsgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0IF1cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGNhbGN1bGF0ZSBib3ggb2Zmc2V0IGZvciB0aGUgZGl2IGlkPVwicmVkaXBzLWRyYWdcIlxyXG4gICAqIGRpdmJveCA9IGJveE9mZnNldChkcmFnQ29udGFpbmVyKTtcclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGluY2x1ZGUgc2Nyb2xsIHBvc2l0aW9uIGluIG9mZnNldFxyXG4gICAqIG9mZnNldCA9IGJveE9mZnNldChyb3dPYmosICdmaXhlZCcpO1xyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gZ2V0IERJViBvZmZzZXQgd2l0aCBvciB3aXRob3V0IFwicGFnZSBzY3JvbGxcIiBhbmQgZXhjbHVkZWQgZWxlbWVudCBzY3JvbGwgb2Zmc2V0XHJcbiAgICogY2IgPSBib3hPZmZzZXQoZGl2LCBwb3NpdGlvbiwgZmFsc2UpO1xyXG4gICAqL1xyXG4gIGJveE9mZnNldCA9IGZ1bmN0aW9uIChib3gsIHBvc2l0aW9uLCBib3hfc2Nyb2xsKVxyXG4gIHtcclxuICAgIHZhciBvTGVmdCA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9mZnNldCBsZWZ0ICh0YWtlIGNhcmUgb2YgaG9yaXpvbnRhbCBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB2YXIgb1RvcCAgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgdG9wICh0YWtlIGNhcmUgb2QgdmVydGljYWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgdmFyIGJveE9sZCA9IGJveDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBib3ggb2JqZWN0XHJcblxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZV9wb3NpdGlvbiBpcyB1bmRlZmluZWQsICcnIG9yICdwYWdlX3Njcm9sbCcgdGhlbiBpbmNsdWRlIHBhZ2Ugc2Nyb2xsIG9mZnNldCwgd2luZG93U2Nyb2xsUG9zaXRpb24gaXMgc2V0IGluIGNhbGN1bGF0ZUNlbGxzKCksIGNhbGN1bGF0ZUNlbGxzKCkgaXMgY2FsbGVkIG9uIHdpbmRvdyBzY3JvbGwgZXZlbnRcclxuICAgIHtcclxuICAgICAgb0xlZnQgPSAwIC0gd2luZG93U2Nyb2xsUG9zaXRpb25bMF07ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9mZnNldCBsZWZ0ICh0YWtlIGNhcmUgb2YgaG9yaXpvbnRhbCBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICAgIG9Ub3AgID0gMCAtIHdpbmRvd1Njcm9sbFBvc2l0aW9uWzFdOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgdG9wICh0YWtlIGNhcmUgb2QgdmVydGljYWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChib3hfc2Nyb2xsID09PSB1bmRlZmluZWQgfHwgYm94X3Njcm9sbCA9PT0gdHJ1ZSkgICAgICAgICAgLy8gY2xpbWIgdXAgdGhyb3VnaCBET00gaGllcmFyY2h5IChnZXRTY3JvbGxQb3NpdGlvbigpIHRha2VzIGNhcmUgYWJvdXQgcGFnZSBzY3JvbGwgcG9zaXRpb25zKVxyXG4gICAge1xyXG4gICAgICBkb1xyXG4gICAgICB7XHJcbiAgICAgICAgb0xlZnQgKz0gYm94Lm9mZnNldExlZnQgLSBib3guc2Nyb2xsTGVmdDtcclxuICAgICAgICBvVG9wICs9IGJveC5vZmZzZXRUb3AgLSBib3guc2Nyb2xsVG9wO1xyXG4gICAgICAgIGJveCA9IGJveC5vZmZzZXRQYXJlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgd2hpbGUgKGJveCAmJiBib3gubm9kZU5hbWUgIT09ICdCT0RZJyk7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsaW1iIHVwIHRvIHRoZSBCT0RZIGVsZW1lbnQgYnV0IHdpdGhvdXQgc2Nyb2xsIHBvc2l0aW9uc1xyXG4gICAge1xyXG4gICAgICBkb1xyXG4gICAgICB7XHJcbiAgICAgICAgb0xlZnQgKz0gYm94Lm9mZnNldExlZnQ7XHJcbiAgICAgICAgb1RvcCArPSBib3gub2Zmc2V0VG9wO1xyXG4gICAgICAgIGJveCA9IGJveC5vZmZzZXRQYXJlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgd2hpbGUgKGJveCAmJiBib3gubm9kZU5hbWUgIT09ICdCT0RZJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gICAgICAgIHRvcCAgICAgICAgICAgICAgICAgcmlnaHQsICAgICAgICAgICAgICAgICAgICAgYm90dG9tICAgICAgICAgICBsZWZ0XHJcbiAgICByZXR1cm4gWyBvVG9wLCBvTGVmdCArIGJveE9sZC5vZmZzZXRXaWR0aCwgb1RvcCArIGJveE9sZC5vZmZzZXRIZWlnaHQsIG9MZWZ0IF07XHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIGlzIGNhbGxlZCBpbiBldmVyeSBwb3NzaWJsZSBjYXNlIHdoZW4gcG9zaXRpb24gb3Igc2l6ZSBvZiB0YWJsZSBncmlkIGNvdWxkIGNoYW5nZSBsaWtlOiBwYWdlIHNjcm9sbGluZywgZWxlbWVudCBkcm9wcGVkIHRvIHRoZSB0YWJsZSBjZWxsLCBlbGVtZW50IHN0YXJ0IGRyYWdnaW5nIGFuZCBzbyBvbi5cclxuICAvLyBJdCBjYWxjdWxhdGVzIHRhYmxlIHJvdyBvZmZzZXRzICh0YWJsZSBncmlkKSBhbmQgc2F2ZXMgdG8gdGhlIFwidGFibGVzXCIgYXJyYXkuXHJcbiAgLy8gVGFibGUgcm93cyB3aXRoIHN0eWxlIGRpc3BsYXk9J25vbmUnIGFyZSBza2lwcGVkLlxyXG4gIGNhbGN1bGF0ZUNlbGxzID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgdmFyIHJvd19vZmZzZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgYm94XHJcbiAgICB2YXIgcG9zaXRpb247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsZW1lbnQgKHRhYmxlIG9yIHRhYmxlIGNvbnRhaW5lcikgaGFzIHBvc2l0aW9uOmZpeGVkIHRoZW4gXCJwYWdlIHNjcm9sbFwiIG9mZnNldCBzaG91bGQgbm90IGJlIGFkZGVkXHJcbiAgICB2YXIgY2I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJveCBvZmZzZXQgZm9yIGNvbnRhaW5lciBib3ggKGNiKVxyXG5cclxuICAgIHdpbmRvd1Njcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlQ2VsbHMoKSBpcyBjYWxsZWQgb24gd2luZG93IHNjcm9sbCBldmVudCBzbyBoZXJlIGlzIHBlcmZlY3QgcGxhY2UgdG8gcmVmcmVzaCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICByb3dfb2Zmc2V0ID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgcm93X29mZnNldCBhcnJheVxyXG4gICAgXHJcbiAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLCAncG9zaXRpb24nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0YWJsZSBzdHlsZSBwb3NpdGlvbiAodG8gZXhjbHVkZSBcInBhZ2Ugc2Nyb2xsXCIgb2Zmc2V0IGZyb20gY2FsY3VsYXRpb24gaWYgbmVlZGVkKVxyXG4gICAgXHJcbiAgICBpZiAocG9zaXRpb24gIT09ICdmaXhlZCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRhYmxlIGRvZXNuJ3QgaGF2ZSBzdHlsZSBwb3NpdGlvbjpmaXhlZCB0aGVuIHRhYmxlIGNvbnRhaW5lciBzaG91bGQgYmUgdGVzdGVkXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUucGFyZW50Tm9kZSwgJ3Bvc2l0aW9uJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSB0YWJsZS5yb3dzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSAgICAgICAgICAgICAgICAgICAgLy8gYmFja3dhcmQgbG9vcCBoYXMgYmV0dGVyIHBlcmZvbWFuY2VcclxuICAgIHtcclxuICAgICAgaWYgKHRhYmxlLnJvd3NbaV0uc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKSAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHJvd3MgdG8gdGhlIG9mZnNldCBhcnJheSBpZiByb3cgaXMgbm90IGhpZGRlblxyXG4gICAgICB7XHJcbiAgICAgICAgcm93X29mZnNldFtpXSA9IGJveE9mZnNldCh0YWJsZS5yb3dzW2ldLCBwb3NpdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgdGFibGUucmVkaXBzLm9mZnNldCA9IGJveE9mZnNldCh0YWJsZSwgcG9zaXRpb24pOyAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHRhYmxlIGluZm9ybWF0aW9ucyAodGFibGUgb2Zmc2V0IGFuZCByb3cgb2Zmc2V0cylcclxuICAgIHRhYmxlLnJlZGlwcy5yb3dfb2Zmc2V0ID0gcm93X29mZnNldDtcclxuXHJcbiAgICBkaXZCb3ggPSBib3hPZmZzZXQoZHJhZ0NvbnRhaW5lcik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBib3ggb2Zmc2V0IGZvciB0aGUgZGl2IGlkPXJlZGlwcy1kcmFnXHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2Nyb2xsRGF0YS5jb250YWluZXIubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhcyBpZiBuZWVkZWRcclxuICAgIHtcclxuICAgICAgcG9zaXRpb24gPSBnZXRTdHlsZShzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5kaXYsICdwb3NpdGlvbicpOyAgICAgLy8gc2V0IGNvbnRhaW5lciBib3ggc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgcGFnZSBzY3JvbGwgb2Zmc2V0IGZyb20gY2FsY3VsYXRpb24gaWYgbmVlZGVkKVxyXG4gICAgICBjYiA9IGJveE9mZnNldChzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5kaXYsIHBvc2l0aW9uLCBmYWxzZSk7ICAgICAvLyBnZXQgRElWIGNvbnRhaW5lciBvZmZzZXQgd2l0aCBvciB3aXRob3V0IFwicGFnZSBzY3JvbGxcIiBhbmQgZXhjbHVkZWQgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBjb250ZW50XHJcbiAgICAgIFxyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5vZmZzZXQgPSBjYjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzXHJcbiAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2ldLm1pZHN0WCA9IChjYlsxXSArIGNiWzNdKSAvIDI7XHJcbiAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2ldLm1pZHN0WSA9IChjYlswXSArIGNiWzJdKSAvIDI7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIHJldHVybnMgY3VycmVudCBwYWdlIHNjcm9sbCB2YWx1ZXMgYXMgYXJyYXkgKFggYW5kIFkgYXhpcykuXHJcbiAgZ2V0U2Nyb2xsUG9zaXRpb24gPSBmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICB2YXIgc2Nyb2xsWSA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xyXG4gICAgLy92YXIgc2Nyb2xsWCA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcclxuICAgIHZhciBzY3JvbGxYID0gMDtcclxuXHJcbiAgICByZXR1cm4gWyBzY3JvbGxYLCBzY3JvbGxZIF07XHJcbiAgfTtcclxuXHJcbiAgLy8gSG9yaXpvbnRhbCBhdXRvIHNjcm9sbCBtZXRob2QuICBAcGFyYW0ge0hUTUxFbGVtZW50fSBzbyBXaW5kb3cgb3IgRElWIGVsZW1lbnQgKHNvIC0gc2Nyb2xsIG9iamVjdCkuXHJcbiAgYXV0b1Njcm9sbFggPSBmdW5jdGlvbiAoc28pIFxyXG4gIHtcclxuICAgIHZhciBwb3MsICAgICAgLy8gbGVmdCBzdHlsZSBwb3NpdGlvblxyXG4gICAgICBvbGQsICAgICAgLy8gb2xkIHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKG5lZWRlZCBmb3Igd2luZG93IHNjcm9sbGluZylcclxuICAgICAgc2Nyb2xsUG9zaXRpb24sIC8vIGRlZmluZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBtYXhzcCwgICAgICAvLyBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBlZGdlQ3Jvc3NlZCwgIC8vIGNyb3NzZWQgZWRnZSBmb3Igd2luZG93IGFuZCBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICBYID0gcG9pbnRlci54LCAgLy8gZGVmaW5lIHBvaW50ZXIgWCBwb3NpdGlvblxyXG4gICAgICBZID0gcG9pbnRlci55OyAgLy8gZGVmaW5lIHBvaW50ZXIgWSBwb3NpdGlvblxyXG4gICAgLy8gaWYgbW91c2V1cCB0aGVuIHN0b3AgaGFuZGxpbmcgXCJjdXJyZW50IGNlbGxcIlxyXG4gICAgaWYgKGVkZ2UuZmxhZy54ID4gMCkge1xyXG4gICAgICAvLyBjYWxjdWxhdGUgY2VsbCAoYXV0b3Njcm9sbCBpcyB3b3JraW5nKVxyXG4gICAgICBjYWxjdWxhdGVDZWxscygpO1xyXG4gICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSByb3cgYW5kIHRhYmxlIGNlbGxcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTtcclxuICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCBpZiBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSBESVYgaWQ9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICAgIGlmIChYIDwgZGl2Qm94WzFdICYmIFggPiBkaXZCb3hbM10gJiYgWSA8IGRpdkJveFsyXSAmJiBZID4gZGl2Qm94WzBdKSB7XHJcbiAgICAgICAgY2VsbENoYW5nZWQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gc2F2ZSBzY3JvbGwgb2JqZWN0IHRvIHRoZSBnbG9iYWwgdmFyaWFibGUgZm9yIHRoZSBmaXJzdCBjYWxsIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlXHJcbiAgICAvLyByZWN1cnNpdmUgY2FsbHMgd2lsbCBub3QgZW50ZXIgdGhpcyBjb2RlIGFuZCByZWZlcmVuY2UgdG8gdGhlIHNjcm9sbERhdGEub2JqIHdpbGwgYmUgcHJlc2VydmVkXHJcbiAgICBpZiAodHlwZW9mKHNvKSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgc2Nyb2xsRGF0YS5vYmogPSBzbztcclxuICAgIH1cclxuICAgIC8vIHdpbmRvdyBhdXRvc2Nyb2xsIChkZWZpbmUgY3VycmVudCwgb2xkIGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gb2xkID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVswXTtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLndpZHRoIC0gc2NyZWVuLndpZHRoO1xyXG4gICAgICBlZGdlQ3Jvc3NlZCA9IGVkZ2UucGFnZS54O1xyXG4gICAgfVxyXG4gICAgLy8gc2Nyb2xsYWJsZSBjb250YWluZXIgKGRlZmluZSBjdXJyZW50IGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIGVsc2Uge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IHNjcm9sbERhdGEub2JqLnNjcm9sbExlZnQ7XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsV2lkdGggLSBzY3JvbGxEYXRhLm9iai5jbGllbnRXaWR0aDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLmRpdi54O1xyXG4gICAgfVxyXG4gICAgLy8gaWYgc2Nyb2xsaW5nIGlzIHBvc3NpYmxlXHJcbiAgICBpZiAoZWRnZS5mbGFnLnggPiAwICYmICgoZWRnZUNyb3NzZWQgPCAwICYmIHNjcm9sbFBvc2l0aW9uID4gMCkgfHwgKGVkZ2VDcm9zc2VkID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA8IG1heHNwKSkpIHtcclxuICAgICAgLy8gaWYgb2JqZWN0IGlzIHdpbmRvd1xyXG4gICAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykge1xyXG4gICAgICAgIC8vIHNjcm9sbCB3aW5kb3dcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoZWRnZUNyb3NzZWQsIDApO1xyXG4gICAgICAgIC8vIGdldCBuZXcgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAoYWZ0ZXIgc2Nyb2xsaW5nKVxyXG4gICAgICAgIC8vIGJlY2F1c2UgYXQgcGFnZSB0b3Agb3IgYm90dG9tIGVkZ2VZIGNhbiBiZSBiaWdnZXIgdGhlbiB0aGUgcmVzdCBvZiBzY3JvbGxpbmcgYXJlYVxyXG4gICAgICAgIC8vIGl0IHdpbGwgYmUgbmljZSB0byBrbm93IGhvdyBtdWNoIHdhcyB3aW5kb3cgc2Nyb2xsZWQgYWZ0ZXIgc2Nyb2xsQnkgY29tbWFuZFxyXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVswXTtcclxuICAgICAgICAvLyBnZXQgY3VycmVudCBvYmplY3QgdG9wIHN0eWxlXHJcbiAgICAgICAgcG9zID0gcGFyc2VJbnQob2JqLnN0eWxlLmxlZnQsIDEwKTtcclxuICAgICAgICBpZiAoaXNOYU4ocG9zKSkge1xyXG4gICAgICAgICAgcG9zID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gb3Igc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgc2Nyb2xsRGF0YS5vYmouc2Nyb2xsTGVmdCArPSBlZGdlQ3Jvc3NlZDtcclxuICAgICAgfVxyXG4gICAgICAvLyByZWN1cnNpdmUgYXV0b3Njcm9sbCBjYWxsXHJcbiAgICAgIHNldFRpbWVvdXQoYXV0b1Njcm9sbFgsIFJFRElQUy5kcmFnLnNjcm9sbC5zcGVlZCk7XHJcbiAgICB9XHJcbiAgICAvLyBhdXRvc2Nyb2xsIGlzIGVuZGVkOiBlbGVtZW50IGlzIG91dCBvZiB0aGUgcGFnZSBlZGdlIG9yIG1heGltdW0gcG9zaXRpb24gaXMgcmVhY2hlZCAobGVmdCBvciByaWdodClcclxuICAgIGVsc2Uge1xyXG4gICAgICAvLyByZXR1cm4gb25zY3JvbGwgZXZlbnQgaGFuZGxlciAodG8gd2luZG93IG9yIGRpdiBlbGVtZW50KVxyXG4gICAgICBSRURJUFMuZXZlbnQuYWRkKHNjcm9sbERhdGEub2JqLCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAvLyByZXNldCBhdXRvIHNjcm9sbCBmbGFnIFhcclxuICAgICAgZWRnZS5mbGFnLnggPSAwO1xyXG4gICAgICAvLyByZXNldCBjdXJyZW50IGNlbGwgcG9zaXRpb25cclxuICAgICAgY3VycmVudENlbGwgPSBbMCwgMCwgMCwgMF07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gVmVydGljYWwgYXV0byBzY3JvbGwgbWV0aG9kLiAgQHBhcmFtIHtIVE1MRWxlbWVudH0gc28gV2luZG93IG9yIERJViBlbGVtZW50IChzbyAtIHNjcm9sbCBvYmplY3QpLlxyXG4gIGF1dG9TY3JvbGxZID0gZnVuY3Rpb24gKHNvKSBcclxuICB7XHJcbiAgICB2YXIgcG9zLCAgICAgIC8vIHRvcCBzdHlsZSBwb3NpdGlvblxyXG4gICAgICBvbGQsICAgICAgLy8gb2xkIHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKG5lZWRlZCBmb3Igd2luZG93IHNjcm9sbGluZylcclxuICAgICAgc2Nyb2xsUG9zaXRpb24sIC8vIGRlZmluZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBtYXhzcCwgICAgICAvLyBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICBlZGdlQ3Jvc3NlZCwgIC8vIGNyb3NzZWQgZWRnZSBmb3Igd2luZG93IGFuZCBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICBYID0gcG9pbnRlci54LCAgLy8gZGVmaW5lIHBvaW50ZXIgWCBwb3NpdGlvblxyXG4gICAgICBZID0gcG9pbnRlci55OyAgLy8gZGVmaW5lIHBvaW50ZXIgWSBwb3NpdGlvblxyXG4gICAgXHJcbiAgICBpZiAoZWRnZS5mbGFnLnkgPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG1vdXNldXAgdGhlbiBzdG9wIGhhbmRsaW5nIFwiY3VycmVudCBjZWxsXCJcclxuICAgIHtcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGNlbGwgKGF1dG9zY3JvbGwgaXMgd29ya2luZylcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUgcm93IGFuZCB0YWJsZSBjZWxsXHJcbiAgICAgIFxyXG4gICAgICBpZiAoWCA8IGRpdkJveFsxXSAmJiBYID4gZGl2Qm94WzNdICYmIFkgPCBkaXZCb3hbMl0gJiYgWSA+IGRpdkJveFswXSkgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsIGlmIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIERJViBpZD1cInJlZGlwcy1kcmFnXCJcclxuICAgICAge1xyXG4gICAgICAgIGNlbGxDaGFuZ2VkKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gc2F2ZSBzY3JvbGwgb2JqZWN0IHRvIHRoZSBnbG9iYWwgdmFyaWFibGUgZm9yIHRoZSBmaXJzdCBjYWxsIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlLCByZWN1cnNpdmUgY2FsbHMgd2lsbCBub3QgZW50ZXIgdGhpcyBjb2RlIGFuZCByZWZlcmVuY2UgdG8gdGhlIHNjcm9sbERhdGEub2JqIHdpbGwgYmUgcHJlc2VydmVkXHJcbiAgICBpZiAodHlwZW9mKHNvKSA9PT0gJ29iamVjdCcpIFxyXG4gICAge1xyXG4gICAgICBzY3JvbGxEYXRhLm9iaiA9IHNvO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpbmRvdyBhdXRvc2Nyb2xsIChkZWZpbmUgY3VycmVudCwgb2xkIGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBvbGQgPSBnZXRTY3JvbGxQb3NpdGlvbigpWzFdO1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEuaGVpZ2h0IC0gc2NyZWVuLmhlaWdodDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLnBhZ2UueTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsYWJsZSBjb250YWluZXIgKGRlZmluZSBjdXJyZW50IGFuZCBtYXhpbXVtIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxUb3A7XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsSGVpZ2h0IC0gc2Nyb2xsRGF0YS5vYmouY2xpZW50SGVpZ2h0O1xyXG4gICAgICBlZGdlQ3Jvc3NlZCA9IGVkZ2UuZGl2Lnk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIGlmIHNjcm9sbGluZyBpcyBwb3NzaWJsZVxyXG4gICAgaWYgKGVkZ2UuZmxhZy55ID4gMCAmJiAoKGVkZ2VDcm9zc2VkIDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA+IDApIHx8IChlZGdlQ3Jvc3NlZCA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPCBtYXhzcCkpKSBcclxuICAgIHtcclxuICAgICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgb2JqZWN0IGlzIHdpbmRvd1xyXG4gICAgICB7XHJcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KDAsIGVkZ2VDcm9zc2VkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjcm9sbCB3aW5kb3dcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKClbMV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IG5ldyB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChhZnRlciBzY3JvbGxpbmcpLCBiZWNhdXNlIGF0IHBhZ2UgdG9wIG9yIGJvdHRvbSBlZGdlWSBjYW4gYmUgYmlnZ2VyIHRoZW4gdGhlIHJlc3Qgb2Ygc2Nyb2xsaW5nIGFyZWEsIGl0IHdpbGwgYmUgbmljZSB0byBrbm93IGhvdyBtdWNoIHdhcyB3aW5kb3cgc2Nyb2xsZWQgYWZ0ZXIgc2Nyb2xsQnkgY29tbWFuZFxyXG4gICAgICAgIHBvcyA9IHBhcnNlSW50KG9iai5zdHlsZS50b3AsIDEwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgY3VycmVudCBvYmplY3QgdG9wIHN0eWxlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGlzTmFOKHBvcykpIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIHtcclxuICAgICAgICBzY3JvbGxEYXRhLm9iai5zY3JvbGxUb3AgKz0gZWRnZUNyb3NzZWQ7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHNldFRpbWVvdXQoYXV0b1Njcm9sbFksIFJFRElQUy5kcmFnLnNjcm9sbC5zcGVlZCk7ICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZSBhdXRvc2Nyb2xsIGNhbGxcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXV0b3Njcm9sbCBpcyBlbmRlZDogZWxlbWVudCBpcyBvdXQgb2YgdGhlIHBhZ2UgZWRnZSBvciBtYXhpbXVtIHBvc2l0aW9uIGlzIHJlYWNoZWQgKHRvcCBvciBib3R0b20pXHJcbiAgICB7XHJcbiAgICAgIFJFRElQUy5ldmVudC5hZGQoc2Nyb2xsRGF0YS5vYmosICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgIC8vIHJldHVybiBvbnNjcm9sbCBldmVudCBoYW5kbGVyICh0byB3aW5kb3cgb3IgZGl2IGVsZW1lbnQpXHJcbiAgICAgIGVkZ2UuZmxhZy55ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGF1dG8gc2Nyb2xsIGZsYWcgWVxyXG4gICAgICBjdXJyZW50Q2VsbCA9IFswLCAwLCAwLCAwXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBjdXJyZW50IGNlbGwgcG9zaXRpb25cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgY29waWVzIGN1c3RvbSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIGVsZW1lbnQgdG8gdGhlIGNsb25lZCBlbGVtZW50IGFuZCBzZXRzIGV2ZW50IGhhbmRsZXJzIChvbm1vdXNlZG93biBhbmQgb25kYmxjbGljaykuXHJcbiAgICogVGhpcyBhY3Rpb24gd2lsbCBiZSB0YWtlbiBvbiBESVYgZWxlbWVudCBpdHNlbGYgYW5kIGFsbCBjaGlsZCBESVYgZWxlbWVudHMuXHJcbiAgICogTmVlZGVkIGluIGNhc2Ugd2hlbiBESVYgZWxlbWVudCBpcyBjbG9uZWQgb3IgUk9XIGlzIGNsb25lZCAoZm9yIGRyYWdnaW5nIG1vZGU9XCJyb3dcIikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gc3JjIFNvdXJjZSBlbGVtZW50IChESVYgb3IgVFIgZWxlbWVudCkuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2xuIENsb25lZCBlbGVtZW50IChESVYgb3IgVFIgZWxlbWVudCkuXHJcbiAgICovXHJcbiAgY29weVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoc3JjLCBjbG4pIFxyXG4gIHtcclxuICAgIHZhciBjb3B5ID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IG1ldGhvZFxyXG4gICAgdmFyIGNoaWxkczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcHJvcGVydGllcyBmb3IgY2hpbGQgZWxlbWVudHMgKHRoaXMgbWV0aG9kIGNhbGxzIFwiY29weVwiIG1ldGhvZClcclxuICAgIFxyXG4gICAgY29weVswXSA9IGZ1bmN0aW9uIChlMSwgZTIpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjb3B5IG1ldGhvZCBmb3IgRElWIGVsZW1lbnRzIChlMSBzb3VyY2UgZWxlbWVudCwgZTIgY2xvbmVkIGVsZW1lbnQpLCBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQwOTQ4MTEvamF2YXNjcmlwdC1jbG9uZW5vZGUtYW5kLXByb3BlcnRpZXNcclxuICAgIHtcclxuICAgICAgaWYgKGUxLnJlZGlwcykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByZWRpcHMgcHJvcGVydHkgZXhpc3RzIGluIHNvdXJjZSBlbGVtZW50LCBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIChyZWRpcHMuZW5hYmxlZCwgIHJlZGlwcy5jb250YWluZXIgLi4uKVxyXG4gICAgICB7XHJcbiAgICAgICAgZTIucmVkaXBzID0ge307XHJcbiAgICAgICAgZTIucmVkaXBzLmVuYWJsZWQgPSBlMS5yZWRpcHMuZW5hYmxlZDtcclxuICAgICAgICBlMi5yZWRpcHMuY29udGFpbmVyID0gZTEucmVkaXBzLmNvbnRhaW5lcjtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZTEucmVkaXBzLmVuYWJsZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb25tb3VzZWRvd24gZXZlbnQgaGFuZGxlciBpZiBzb3VyY2UgZWxlbWVudCBpcyBlbmFibGVkXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcmVnaXN0ZXJFdmVudHMoZTIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29weVsxXSA9IGZ1bmN0aW9uIChlMSwgZTIpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjb3B5IG1ldGhvZCBmb3IgVFIgZWxlbWVudHMgXHJcbiAgICB7XHJcbiAgICAgIGlmIChlMS5yZWRpcHMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVkaXBzIHByb3BlcnR5IGV4aXN0cyBpbiBzb3VyY2UgZWxlbWVudCwgY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVtcHR5Um93IC4uLilcclxuICAgICAge1xyXG4gICAgICAgIGUyLnJlZGlwcyA9IHt9O1xyXG4gICAgICAgIGUyLnJlZGlwcy5lbXB0eVJvdyA9IGUxLnJlZGlwcy5lbXB0eVJvdztcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY2hpbGRzID0gZnVuY3Rpb24gKGUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBtZXRob2QgdG8gY29weSBwcm9wZXJ0aWVzIGZvciBjaGlsZCBlbGVtZW50cyAoaW5wdXQgcGFyYW1ldGVyIGlzIGVsZW1lbnQgaW5kZXggMCAtIERJViwgMSAtIFRSKVxyXG4gICAge1xyXG4gICAgICB2YXIgZWwxLCBlbDI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gb2YgRElWL1RSIGVsZW1lbnRzIGluIHNvdXJjZSBhbmQgY2xvbmVkIGVsZW1lbnRcclxuICAgICAgdmFyIHRuID0gWydESVYnLCAnVFInXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWcgbmFtZVxyXG4gICAgICBcclxuICAgICAgZWwxID0gc3JjLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRuW2VdKTsgICAgICAgICAgICAvLyBjb2xsZWN0IGNoaWxkIERJVi9UUiBlbGVtZW50cyBmcm9tIHRoZSBzb3VyY2UgZWxlbWVudCAocG9zc2libGUgaWYgZGl2IGVsZW1lbnQgY29udGFpbnMgdGFibGUpXHJcbiAgICAgIGVsMiA9IGNsbi5nZXRFbGVtZW50c0J5VGFnTmFtZSh0bltlXSk7ICAgICAgICAgICAgLy8gY29sbGVjdCBjaGlsZCBESVYvVFIgZWxlbWVudHMgZnJvbSBjbG9uZWQgZWxlbWVudFxyXG4gICAgICBcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbDIubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAvLyBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIChyZWRpcHMuZW5hYmxlZCwgIHJlZGlwcy5jb250YWluZXIgLi4uKSBhbmQgc2V0IGV2ZW50IGhhbmRsZXJzIHRvIGNoaWxkIERJViBlbGVtZW50c1xyXG4gICAgICB7XHJcbiAgICAgICAgY29weVtlXShlbDFbaV0sIGVsMltpXSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGlmIChzcmMubm9kZU5hbWUgPT09ICdESVYnKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBzb3VyY2UgZWxlbWVudCBpcyBESVYgZWxlbWVudCB0aGVuIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgZm9yIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGNvcHlbMF0oc3JjLCBjbG4pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoc3JjLm5vZGVOYW1lID09PSAnVFInKSAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHNvdXJjZSBlbGVtZW50IGlzIFRSIGVsZW1lbnQgdGhlbiBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIGZvciBUUiBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGNvcHlbMV0oc3JjLCBjbG4pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjaGlsZHMoMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIGZvciBESVYgY2hpbGQgZWxlbWVudHNcclxuICAgIGNoaWxkcygxKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHByb3BlcnRpZXMgZm9yIFRSIGNoaWxkIGVsZW1lbnRzXHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCB1cGRhdGVzIGNsaW1pdDFfWCBvciBjbGltaXQyX1ggY2xhc3MgbmFtZSAoWCBkZWZpbmVzIGNsb25pbmcgbGltaXQpLlxyXG4gICAqIDx1bD5cclxuICAgKiA8bGk+Y2xpbWl0MV9YIC0gYWZ0ZXIgY2xvbmluZyBYIGVsZW1lbnRzLCBsYXN0IGVsZW1lbnQgd2lsbCBiZSBub3JtYWwgZHJhZy1hYmxlIGVsZW1lbnQ8L2xpPlxyXG4gICAqIDxsaT5jbGltaXQyX1ggLSBhZnRlciBjbG9uaW5nIFggZWxlbWVudHMsIGxhc3QgZWxlbWVudCB3aWxsIHN0YXkgdW5tb3ZhYmxlPC9saT5cclxuICAgKiA8L3VsPlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIEVsZW1lbnQgb24gd2hpY2ggY25hbWUgY2xhc3Mgc2hvdWxkIGJlIHVwZGF0ZWQuXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSB2YWx1ZSBJbmNyZW1lbnQgb3IgZGVjcmVtZW50IGNsaW1pdCB2YWx1ZS5cclxuICAgKi9cclxuICBjbG9uZUxpbWl0ID0gZnVuY3Rpb24gKGVsLCB2YWx1ZSkgXHJcbiAge1xyXG4gICAgdmFyIG1hdGNoQXJyYXk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2ggYXJyYXlcclxuICAgIHZhciBsaW1pdFR5cGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpbWl0IHR5cGUgKDEgLSBjbG9uZSBiZWNvbWVzIFwibm9ybWFsXCIgZHJhZyBlbGVtZW50IGF0IGxhc3Q7IDIgLSBjbG9uZSBlbGVtZW50IHN0YXlzIGltbW92YWJsZSlcclxuICAgIHZhciBsaW1pdDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpbWl0IG51bWJlclxyXG4gICAgdmFyIGNsYXNzZXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xhc3MgbmFtZXMgb2YgY2xvbmUgZWxlbWVudFxyXG4gICAgXHJcbiAgICBjbGFzc2VzID0gZWwuY2xhc3NOYW1lOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWFkIGNsYXNzIG5hbWUgZnJvbSBlbGVtZW50XHJcbiAgICBtYXRjaEFycmF5ID0gY2xhc3Nlcy5tYXRjaCgvY2xpbWl0KFxcZClfKFxcZCspLyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoIGNsaW1pdCBjbGFzcyBuYW1lXHJcbiAgICBcclxuICAgIGlmIChtYXRjaEFycmF5ICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIERJViBjbGFzcyBjb250YWlucyBjbGltaXRcclxuICAgIHtcclxuICAgICAgbGltaXRUeXBlID0gcGFyc2VJbnQobWF0Y2hBcnJheVsxXSwgMTApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgbGltaXRUeXBlICgxIG9yIDIpIGFuZCBsaW1pdFxyXG4gICAgICBsaW1pdCA9IHBhcnNlSW50KG1hdGNoQXJyYXlbMl0sIDEwKTtcclxuICAgICAgXHJcbiAgICAgIGlmIChsaW1pdCA9PT0gMCAmJiB2YWx1ZSA9PT0gMSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjdXJyZW50IGxpbWl0IGlzIDAgYW5kIHNob3VsZCBiZSBzZXQgdG8gMSB0aGVuIHJldHVybiBcImNsb25pbmdcIiB0byB0aGUgRElWIGVsZW1lbnRcclxuICAgICAge1xyXG4gICAgICAgIGNsYXNzZXMgKz0gJyByZWRpcHMtY2xvbmUnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIFwicmVkaXBzLWNsb25lXCIgY2xhc3MgdG8gY2xhc3MgYXR0cmlidXRlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGxpbWl0VHlwZSA9PT0gMikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbmFibGUgRElWIGVsZW1lbnQgZm9yIGNsaW1pdDIgdHlwZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVuYWJsZURyYWcodHJ1ZSwgZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgbGltaXQgKz0gdmFsdWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBsaW1pdCB2YWx1ZVxyXG4gICAgICBjbGFzc2VzID0gY2xhc3Nlcy5yZXBsYWNlKC9jbGltaXRcXGRfXFxkKy9nLCAnY2xpbWl0JyArIGxpbWl0VHlwZSArICdfJyArIGxpbWl0KTsgICAgICAgICAvLyB1cGRhdGUgY2xpbWl0IGNsYXNzIG5hbWUgd2l0aCBuZXcgbGltaXQgdmFsdWVcclxuICAgICAgXHJcbiAgICAgIGlmIChsaW1pdCA8PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXN0IGlmIGxpbWl0IGRyb3BzIHRvIHplcm9cclxuICAgICAge1xyXG4gICAgICAgIGNsYXNzZXMgPSBjbGFzc2VzLnJlcGxhY2UoJ3JlZGlwcy1jbG9uZScsICcnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gbW9yZSBjbG9uaW5nLCBjdXQgb3V0IFwicmVkaXBzLWNsb25lXCIgZnJvbSBjbGFzcyBuYW1lXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGxpbWl0VHlwZSA9PT0gMikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBsaW1pdCB0eXBlIGlzIDIgdGhlbiBkaXNhYmxlIGNsb25lIGVsZW1lbnQgKGl0IHdpbGwgc3RheSBpbiBjZWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVuYWJsZURyYWcoZmFsc2UsIGVsKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgc291cmNlIERJViBlbGVtZW50XHJcbiAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5jbG9uZWRFbmQyKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmNsb25lZEVuZDIgaGFuZGxlclxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmNsb25lZEVuZDEoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQuY2xvbmVkRW5kMSBoYW5kbGVyXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBlbC5jbGFzc05hbWUgPSBub3JtYWxpemUoY2xhc3Nlcyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsaXplIHNwYWNlcyBhbmQgcmV0dXJuIGNsYXNzZXMgdG8gdGhlIGNsb25lIG9iamVjdFxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBhdHRhY2hlcyAvIGRldGFjaGVzIG9ubW91c2Vkb3duLCBvbnRvdWNoc3RhcnQgYW5kIG9uZGJsY2xpY2sgZXZlbnRzIHRvIERJViBlbGVtZW50cyBhbmQgYXR0YWNoZXMgb25zY3JvbGwgZXZlbnQgdG8gdGhlIHNjcm9sbCBjb250YWluZXJzIGluIGluaXRpYWxpemF0aW9uIHBoYXNlLlxyXG4gICAqIEl0IGFsc28gY2FuIGJlIHVzZWQgZm9yIGVsZW1lbnQgaW5pdGlhbGl6YXRpb24gYWZ0ZXIgRElWIGVsZW1lbnQgd2FzIG1hbnVhbGx5IGFkZGVkIHRvIHRoZSB0YWJsZS5cclxuICAgKiBJZiBjbGFzcyBhdHRyaWJ1dGUgb2YgRElWIGNvbnRhaW5lciBjb250YWlucyBcInJlZGlwcy1ub2F1dG9zY3JvbGxcIiBjbGFzcyBuYW1lIHRoZW4gYXV0b1Njcm9sbCBvcHRpb24gd2lsbCBiZSBkaXNhYmxlZC5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW58U3RyaW5nfSBlbmFibGVfZmxhZyBFbmFibGUgLyBkaXNhYmxlIGVsZW1lbnQgKG9yIGVsZW1lbnQgc3VidHJlZSBsaWtlIHRhYmxlLCBkcmFnZ2luZyBjb250YWluZXIgLi4uKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ30gW2VsXSBIVE1MIG5vZGUgb3IgQ1NTIHNlbGVjdG9yIHRvIGVuYWJsZSAvIGRpc2FibGUuIFBhcmFtZXRlciBkZWZpbmVzIGVsZW1lbnQgcmVmZXJlbmNlIG9yIENTUyBzZWxlY3RvciBvZiBESVYgZWxlbWVudHMgdG8gZW5hYmxlIC8gZGlzYWJsZS5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGVuYWJsZSBlbGVtZW50IHdpdGggaWQ9XCJpZDEyM1wiIChlbGVtZW50IGlkIHNob3VsZCBiZSBhIHN0cmluZyBhY2NvcmRpbmcgdG8gRE9NIGRvY3MpXHJcbiAgICogcmQuZW5hYmxlRHJhZyh0cnVlLCAnI2lkMTIzJyk7XHJcbiAgICpcclxuICAgKiAvLyBvciBpbml0IG1hbnVhbGx5IGFkZGVkIGVsZW1lbnQgd2l0aCBrbm93biBpZFxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcodHJ1ZSwgJyNpZDIzNCcpO1xyXG4gICAqXHJcbiAgICogLy8gZGlzYWJsZSBhbGwgRElWIGVsZW1lbnRzIGluIGRyYWcxIHN1YnRyZWVcclxuICAgKiByZC5lbmFibGVEcmFnKGZhbHNlLCAnI2RyYWcxIGRpdicpXHJcbiAgICpcclxuICAgKiAvLyBpbml0IERJViBlbGVtZW50cyBpbiBkcmFnZ2luZyBhcmVhIChpbmNsdWRpbmcgbmV3bHkgYWRkZWQgRElWIGVsZW1lbnQpXHJcbiAgICogLy8gRElWIGluaXRpYWxpemF0aW9uIHdpbGwgd29yayBpZiB0YWJsZSBub2RlIHN0YXlzIGludGFjdCAodGFibGUgaXMgbm90IGdlbmVyYXRlZCBkeW5hbWljYWxseSlcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKCdpbml0Jyk7XHJcbiAgICpcclxuICAgKiAvLyBpbml0IGFkZGVkIGVsZW1lbnQgd2l0aCByZWZlcmVuY2UgbXlFbGVtZW50XHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZyh0cnVlLCBteUVsZW1lbnQpO1xyXG4gICAqXHJcbiAgICogLy8gZGlzYWJsZSBhbGwgRElWIGVsZW1lbnRzIHdpdGhpbiBURCAodGQgaXMgcmVmZXJlbmNlIHRvIFREIG5vZGUpXHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZyhmYWxzZSwgdGQpO1xyXG4gICAqL1xyXG4gIGVuYWJsZURyYWcgPSBmdW5jdGlvbiAoZW5hYmxlX2ZsYWcsIGVsKSBcclxuICB7XHJcbiAgICB2YXIgZGl2ID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29sbGVjdGlvbiBvZiBkaXYgZWxlbWVudHMgY29udGFpbmVkIGluIHRhYmxlcyBvciBvbmUgZGl2IGVsZW1lbnRcclxuICAgIFxyXG4gICAgaWYgKGVsID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3QgRElWIGVsZW1lbnRzIGluc2lkZSBjdXJyZW50IGRyYWcgYXJlYSAoZHJhZyBlbGVtZW50cyBhbmQgc2Nyb2xsIGNvbnRhaW5lcnMpIGUuZy4gZW5hYmxlRHJhZyh0cnVlKVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBkcmFnQ29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKTtcclxuICAgIH0gICAgXHJcbiAgICBlbHNlIGlmICh0eXBlb2YoZWwpID09PSAnc3RyaW5nJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJlbFwiIGlzIHN0cmluZyAoQ1NTIHNlbGVjdG9yKSAtIGl0IGNhbiBjb2xsZWN0IG9uZSBESVYgZWxlbWVudCAobGlrZSBcIiNkMTJcIikgb3IgbWFueSBESVYgZWxlbWVudHMgKGxpa2UgXCIjZHJhZzEgZGl2XCIpXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWwpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mKGVsKSA9PT0gJ29iamVjdCcgJiYgKGVsLm5vZGVOYW1lICE9PSAnRElWJyB8fCBlbC5jbGFzc05hbWUuaW5kZXhPZigncmVkaXBzLWRyYWcnKSA9PT0gLTEpKSAgICAgIC8vIFwiZWxcIiBpcyBub2RlIHJlZmVyZW5jZSB0byBlbGVtZW50IHRoYXQgaXMgbm90IERJViBjbGFzcz1cInJlZGlwcy1kcmFnXCJcclxuICAgIHtcclxuICAgICAgZGl2ID0gZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpO1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vbmUgb2YgYWJvdmUsIGVsIGlzIERJViBjbGFzcz1cInJlZGlwcy1kcmFnXCIsIHNvIHByZXBhcmUgYXJyYXkgd2l0aCBvbmUgRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgZGl2WzBdID0gZWw7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGVuYWJsZURpdnMoZW5hYmxlX2ZsYWcsIGRpdik7XHJcbiAgfTtcclxuICBcclxuICBcclxuICBlbmFibGVEaXZzID0gZnVuY3Rpb24oZW5hYmxlX2ZsYWcsIGRpdilcclxuICB7XHJcbiAgICAgdmFyIGksIGosIGssICAgIC8vIGxvY2FsIHZhcmlhYmxlcyB1c2VkIGluIGxvb3BcclxuICAgICAgdGJscyA9IFtdLCAgICAvLyBjb2xsZWN0aW9uIG9mIHRhYmxlcyBpbnNpZGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgYm9yZGVyU3R5bGUsICAvLyBib3JkZXIgc3R5bGUgKHNvbGlkIG9yIGRvdHRlZClcclxuICAgICAgb3BhY2l0eSwgICAgLy8gKGludGVnZXIpIHNldCBvcGFjaXR5IGZvciBlbmFibGVkIC8gZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgY3Vyc29yLCAgICAgLy8gY3Vyc29yIHN0eWxlIChtb3ZlIG9yIGF1dG8pXHJcbiAgICAgIG92ZXJmbG93LCAgIC8vIGNzcyB2YWx1ZSBvZiBvdmVyZmxvdyBwcm9wZXJ0eVxyXG4gICAgICBhdXRvc2Nyb2xsLCAgIC8vIGJvb2xlYW4gLSBpZiBzY3JvbGxhYmxlIGNvbnRhaW5lciB3aWxsIGhhdmUgYXV0b3Njcm9sbCBvcHRpb24gKGRlZmF1bHQgaXMgdHJ1ZSlcclxuICAgICAgZW5hYmxlZCwgICAgLy8gZW5hYmxlZCBwcm9wZXJ0eSAodHJ1ZSBvciBmYWxzZSlcclxuICAgICAgY2IsICAgICAgIC8vIGJveCBvZmZzZXQgZm9yIGNvbnRhaW5lciBib3ggKGNiKVxyXG4gICAgICBwb3NpdGlvbiwgICAvLyBpZiB0YWJsZSBjb250YWluZXIgaGFzIHBvc2l0aW9uOmZpeGVkIHRoZW4gXCJwYWdlIHNjcm9sbFwiIG9mZnNldCBzaG91bGQgbm90IGJlIGFkZGVkXHJcbiAgICAgIHJlZ2V4RHJhZyA9IC9cXGJyZWRpcHMtZHJhZ1xcYi9pLCAvLyByZWd1bGFyIGV4cHJlc3Npb24gdG8gc2VhcmNoIFwicmVkaXBzLWRyYWdcIiBjbGFzcyBuYW1lXHJcbiAgICAgIHJlZ2V4Tm9BdXRvc2Nyb2xsID0gL1xcYnJlZGlwcy1ub2F1dG9zY3JvbGxcXGIvaTsgLy8gcmVndWxhciBleHByZXNzaW9uIHRvIHNlYXJjaCBcInJlZGlwcy1ub2F1dG9zY3JvbGxcIiBjbGFzcyBuYW1lICAgXHJcblxyXG4gICAgb3BhY2l0eSA9IFJFRElQUy5kcmFnLnN0eWxlLm9wYWNpdHlEaXNhYmxlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBkaXNhYmxlZCBlbGVtZW50cyBmcm9tIHB1YmxpYyBwcm9wZXJ0eSBcIm9wYWNpdHlEaXNhYmxlZFwiXHJcbiAgICBcclxuICAgIGlmIChlbmFibGVfZmxhZyA9PT0gdHJ1ZSB8fCBlbmFibGVfZmxhZyA9PT0gJ2luaXQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc3R5bGVzIGZvciBlbmFibGVkIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGJvcmRlclN0eWxlID0gUkVESVBTLmRyYWcuc3R5bGUuYm9yZGVyRW5hYmxlZDtcclxuICAgICAgY3Vyc29yID0gJ21vdmUnO1xyXG4gICAgICBlbmFibGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIHNldCBzdHlsZXMgZm9yIGRpc2FibGVkIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGJvcmRlclN0eWxlID0gUkVESVBTLmRyYWcuc3R5bGUuYm9yZGVyRGlzYWJsZWQ7XHJcbiAgICAgIGN1cnNvciA9ICdhdXRvJztcclxuICAgICAgZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgfSAgICBcclxuICAgIFxyXG4gICAgZm9yIChpID0gMCwgaiA9IDA7IGkgPCBkaXYubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1haW4gbG9vcCB0aGF0IGdvZXMgdGhyb3VnaCBhbGwgRElWIGVsZW1lbnRzXHJcbiAgICB7ICAgIFxyXG4gICAgICBpZiAocmVnZXhEcmFnLnRlc3QoZGl2W2ldLmNsYXNzTmFtZSkpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIERJViBlbGVtZW50IGNvbnRhaW5zIFwicmVkaXBzLWRyYWdcIiBjbGFzcyBuYW1lXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZW5hYmxlX2ZsYWcgPT09ICdpbml0JyB8fCBkaXZbaV0ucmVkaXBzID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAvLyBhZGQgcmVmZXJlbmNlIHRvIHRoZSBESVYgY29udGFpbmVyIChpbml0aWFsaXphdGlvbiBvciBuZXdseSBhZGRlZCBlbGVtZW50IHRvIHRoZSB0YWJsZSkgdGhpcyBwcm9wZXJ0eSBzaG91bGQgbm90IGJlIGNoYW5nZWQgaW4gbGF0ZXIgZWxlbWVudCBlbmFibGUvZGlzYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRpdltpXS5yZWRpcHMgPSB7fTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBcInByb3BlcnR5IG9iamVjdFwiIGluIHdoaWNoIGFsbCBjdXN0b20gcHJvcGVydGllcyB3aWxsIGJlIHNhdmVkXHJcbiAgICAgICAgICBkaXZbaV0ucmVkaXBzLmNvbnRhaW5lciA9IGRyYWdDb250YWluZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVuYWJsZV9mbGFnID09PSB0cnVlICYmIHR5cGVvZihvcGFjaXR5KSA9PT0gJ251bWJlcicpICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvcGFjaXR5IG1hc2tcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUub3BhY2l0eSA9ICcnO1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLmZpbHRlciA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbmFibGVfZmxhZyA9PT0gZmFsc2UgJiYgdHlwZW9mKG9wYWNpdHkpID09PSAnbnVtYmVyJykgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUuZmlsdGVyID0gJ2FscGhhKG9wYWNpdHk9JyArIG9wYWNpdHkgKyAnKSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJlZ2lzdGVyRXZlbnRzKGRpdltpXSwgZW5hYmxlZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVyIGZvciBESVYgZWxlbWVudFxyXG4gICAgICAgIFxyXG4gICAgICAgIGRpdltpXS5zdHlsZS5ib3JkZXJTdHlsZSA9IGJvcmRlclN0eWxlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzdHlsZXMgZm9yIERJViBlbGVtZW50XHJcbiAgICAgICAgZGl2W2ldLnN0eWxlLmN1cnNvciA9IGN1cnNvcjtcclxuICAgICAgICBkaXZbaV0ucmVkaXBzLmVuYWJsZWQgPSBlbmFibGVkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZW5hYmxlZCBwcm9wZXJ0eSB0byB0aGUgRElWIGVsZW1lbnQgKHRydWUgb3IgZmFsc2UpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoZW5hYmxlX2ZsYWcgPT09ICdpbml0JykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhdHRhY2ggb25zY3JvbGwgZXZlbnQgdG8gdGhlIERJViBlbGVtZW50IGluIGluaXQgcGhhc2Ugb25seSBpZiBESVYgZWxlbWVudCBoYXMgb3ZlcmZsb3cgb3RoZXIgdGhhbiBkZWZhdWx0IHZhbHVlICd2aXNpYmxlJyBhbmQgdGhhdCBtZWFucyBzY3JvbGxhYmxlIERJViBjb250YWluZXJcclxuICAgICAge1xyXG4gICAgICAgIG92ZXJmbG93ID0gZ2V0U3R5bGUoZGl2W2ldLCAnb3ZlcmZsb3cnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzayBmb3Igb3ZlcmZsb3cgc3R5bGVcclxuICAgICAgICBcclxuICAgICAgICBpZiAob3ZlcmZsb3cgIT09ICd2aXNpYmxlJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgaXMgc2Nyb2xsYWJsZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFJFRElQUy5ldmVudC5hZGQoZGl2W2ldLCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb25zY3JvbGwgZXZlbnQgaGFuZGxlciBmb3Igc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUoZGl2W2ldLCAncG9zaXRpb24nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29udGFpbmVyIGJveCBzdHlsZSBwb3NpdGlvbiAodG8gZXhjbHVkZSBwYWdlIHNjcm9sbCBvZmZzZXQgZnJvbSBjYWxjdWxhdGlvbiBpZiBuZWVkZWQpXHJcbiAgICAgICAgICBjYiA9IGJveE9mZnNldChkaXZbaV0sIHBvc2l0aW9uLCBmYWxzZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IERJViBjb250YWluZXIgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIHNjcm9sbCBwb3NpdGlvbiBvZiB0aGUgY29udGVudFxyXG4gICAgICAgICAgYXV0b3Njcm9sbCA9ICFyZWdleE5vQXV0b3Njcm9sbC50ZXN0KGRpdltpXS5jbGFzc05hbWUpOyAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgcmVkaXBzLW5vYXV0b3Njcm9sbCBvcHRpb25cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbal0gPSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXNcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZGl2IDogZGl2W2ldLCAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBvZmZzZXQgOiBjYiwgICAgICAgICAgICAgICAgICAvLyBib3ggb2Zmc2V0IG9mIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBtaWRzdFggOiAoY2JbMV0gKyBjYlszXSkgLyAyLCAvLyBtaWRkbGUgWFxyXG4gICAgICAgICAgICBtaWRzdFkgOiAoY2JbMF0gKyBjYlsyXSkgLyAyLCAvLyBtaWRkbGUgWVxyXG4gICAgICAgICAgICBhdXRvc2Nyb2xsIDogYXV0b3Njcm9sbCAgICAgICAvLyBhdXRvc2Nyb2xsIGVuYWJsZWQgb3IgZGlzYWJsZWQgKHRydWUgb3IgZmFsc2UpXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0YmxzID0gZGl2W2ldLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0YWJsZScpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZvciB0YWJsZXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGZvciAoayA9IDA7IGsgPCB0YmxzLmxlbmd0aDsgaysrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIGdvZXMgdGhyb3VnaCBmb3VuZCB0YWJsZXMgaW5zaWRlIHNjcm9sbGFibGUgYXJlYVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB0YmxzW2tdLnNjYSA9IHNjcm9sbERhdGEuY29udGFpbmVyW2pdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhIHJlZmVyZW5jZSB0byB0aGUgY29ycmVzcG9uZGluZyBzY3JvbGxhYmxlIGFyZWFcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaisrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluY3JlYXNlIHNjcm9sbGFibGUgY29udGFpbmVyIGNvdW50ZXJcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gICBcclxuICB9O1xyXG5cclxuICAvL01ldGhvZCByZXR1cm5zIHN0eWxlIHZhbHVlIGZvciByZXF1ZXN0ZWQgSFRNTCBlbGVtZW50IGFuZCBzdHlsZSBuYW1lLlxyXG4gIGdldFN0eWxlID0gZnVuY3Rpb24gKGVsLCBzdHlsZV9uYW1lKSBcclxuICB7XHJcbiAgICBpZiAoZWwgJiYgZWwuY3VycmVudFN0eWxlKSBcclxuICAgIHtcclxuICAgICAgcmV0dXJuIGVsLmN1cnJlbnRTdHlsZVtzdHlsZV9uYW1lXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGVsICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKSBcclxuICAgIHtcclxuICAgICAgcmV0dXJuIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpW3N0eWxlX25hbWVdO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIGZpbmQgdGhlIGZpcnN0IHBhcmVudCBlbGVtZW50IG9mIGVsIHdpdGggdGhlIHRhZyBuYW1lIHRhZ19uYW1lIFxyXG4gIGZpbmRQYXJlbnQgPSBmdW5jdGlvbiAodGFnX25hbWUsIGVsKSBcclxuICB7XHJcbiAgICBlbCA9IGVsLnBhcmVudE5vZGU7ICAgICAgICAgICAgICAgICAvLyBzZXQgXCJlbFwiIHRvIHRoZSBuZXh0IG5vZGUgKHRvIHByZXZlbnQgZmluZGluZyBub2RlIGl0c2VsZilcclxuICAgIFxyXG4gICAgd2hpbGUgKGVsKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnQgbG9vcFxyXG4gICAge1xyXG4gICAgICBpZiAoZWwubm9kZU5hbWUgPT09IHRhZ19uYW1lKSAgICAgLy8gbm9kZSBpcyBmb3VuZFxyXG4gICAgICB7XHJcbiAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAvLyBub2RlIGlzIGZvdW5kIGFuZCBsb29wIGNhbiBiZSBlbmRlZFxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBlbCA9IGVsLnBhcmVudE5vZGU7ICAgICAgICAgICAgICAgLy8gbW92ZSBvbiB0byB0aGUgcGFyZW50IG5vZGVcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGVsO1xyXG4gIH07XHJcblxyXG4gIC8vRnVuY3Rpb24gcmV0dXJucyBhIHN0cmluZyBpbiB3aGljaCBhbGwgb2YgdGhlIHByZWNlZGluZyBhbmQgdHJhaWxpbmcgd2hpdGUgc3BhY2UgaGFzIGJlZW4gcmVtb3ZlZCwgYW5kIGluIHdoaWNoIGFsbCBpbnRlcm5hbCBzZXF1ZW5jZXMgb2Ygd2hpdGUgaXMgcmVwbGFjZWQgd2l0aCBvbmUgd2hpdGUgc3BhY2UuXHJcbiAgbm9ybWFsaXplID0gZnVuY3Rpb24gKHN0cikgXHJcbiAge1xyXG4gICAgaWYgKHN0ciAhPT0gdW5kZWZpbmVkKSBcclxuICAgIHtcclxuICAgICAgc3RyID0gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKS5yZXBsYWNlKC9cXHN7Mix9L2csICcgJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBzdHI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBub3JtYWxpemVkIHN0cmluZyAod2l0aG91dCBwcmVjZWRpbmcgYW5kIHRyYWlsaW5nIHNwYWNlcylcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2Qgc2V0cyBvcGFjaXR5IHRvIHRhYmxlIHJvdyBvciBkZWxldGVzIHJvdyBjb250ZW50LlxyXG4gICAqIElucHV0IHBhcmFtZXRlciBcImVsXCIgaXMgcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgb3IgcmVmZXJlbmNlIHRvIHRoZSBjbG9uZWQgbWluaSB0YWJsZSAod2hlbiByb3cgaXMgbW92ZWQpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U3RyaW5nfSBlbCBJZCBvZiByb3cgaGFuZGxlciAoZGl2IGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiKSBvciByZWZlcmVuY2UgdG8gZWxlbWVudCAoc291cmNlIHJvdyBvciBtaW5pIHRhYmxlKS5cclxuICAgKiBAcGFyYW0ge0ludGVnZXJ8U3RyaW5nfSBvcGFjaXR5IE9wYWNpdHkgbGV2ZWwgKGZyb20gMCB0byAxMDApIG9yIFwiZW1wdHlcIiAodGhlbiBjb250ZW50IG9mIHRhYmxlIGNlbGxzIGluIHJvdyB3aWxsIGJlIGRlbGV0ZWQgLSBpbiB0aGF0IGNhc2UgZmlyc3QgcGFyYW1ldGVyIHNob3VsZCBiZSBUUikuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtjb2xvcl0gQmFja2dyb3VuZCBjb2xvci5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIFJFRElQUy5kcmFnIGxpYnJhcnlcclxuICAgKiByZCA9IFJFRElQUy5kcmFnO1xyXG4gICAqXHJcbiAgICogLy8gbWFrZSByb3cgc2VtaS10cmFuc3BhcmVudFxyXG4gICAqIHJkLnJvd09wYWNpdHkocm93T2JqLCA1MCk7XHJcbiAgICpcclxuICAgKiAvLyBzZXQgcm93IGFzIGVtcHR5IGFuZCB3aGl0ZSAoY29udGVudCBpbiB0YWJsZSBjZWxscyB3aWxsIGJlIGRlbGV0ZWQpXHJcbiAgICogcmQucm93T3BhY2l0eShyb3dPYmosICdlbXB0eScsICdXaGl0ZScpO1xyXG4gICAqL1xyXG4gIHJvd09wYWNpdHkgPSBmdW5jdGlvbiAoZWwsIG9wYWNpdHksIGNvbG9yKSBcclxuICB7XHJcbiAgICB2YXIgdGROb2RlTGlzdDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhYmxlIGNlbGxzXHJcbiAgICB2YXIgaSwgajsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgdmFyaWFibGVzXHJcbiAgICBcclxuICAgIGlmICh0eXBlb2YoZWwpID09PSAnc3RyaW5nJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaW5wdXQgcGFyYW1ldGVyIGlzIHN0cmluZyAodGhpcyBzaG91bGQgYmUgZWxlbWVudCBpZCksIHRoZW4gc2V0IGVsZW1lbnQgcmVmZXJlbmNlXHJcbiAgICB7XHJcbiAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpO1xyXG4gICAgICBlbCA9IGZpbmRQYXJlbnQoJ1RBQkxFJywgZWwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbCBjb3VsZCBiZSByZWZlcmVuY2Ugb2YgdGhlIERJViBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIiAocm93IGhhbmRsZXIpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChlbC5ub2RlTmFtZSA9PT0gJ1RSJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWwgaXMgVFIsIHRoZW4gc2V0IGJhY2tncm91bmQgY29sb3IgdG8gZWFjaCBjZWxsIChpZiBuZWVkZWQpIGFuZCBhcHBseSBvcGFjaXR5XHJcbiAgICB7XHJcbiAgICAgIHRkTm9kZUxpc3QgPSBlbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGQnKTsgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3QgdGFibGUgY2VsbCBmcm9tIHRoZSByb3dcclxuICAgICAgXHJcbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0ZE5vZGVMaXN0Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBESVYgZWxlbWVudFxyXG4gICAgICB7XHJcbiAgICAgICAgdGROb2RlTGlzdFtpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvciA/IGNvbG9yIDogJyc7IC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIHRhYmxlIGNlbGwgaWYgbmVlZGVkXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG9wYWNpdHkgPT09ICdlbXB0eScpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9wYWNpdHkgaXMgc2V0IHRvIFwiZW1wdHlcIiB0aGVuIGRlbGV0ZSBjZWxsIGNvbnRlbnRcclxuICAgICAgICB7XHJcbiAgICAgICAgICB0ZE5vZGVMaXN0W2ldLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHNldCBvcGFjaXR5IHRvIGV2ZXJ5IGNoaWxkIG5vZGUgaW4gdGFibGUgY2VsbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXMubGVuZ3RoOyBqKyspICAgLy8gbG9vcCB0aHJvdWdoIGNoaWxkIG5vZGVzIG9mIGV2ZXJ5IHRhYmxlIGNlbGxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgLy8gYXBwbHkgc3R5bGVzIG9ubHkgdG8gRWxlbWVudCBub2RlcyAobm90IHRleHQgbm9kZXMsIGF0dHJpYnV0ZXMgLi4uKSwgaHR0cDovL2NvZGUuc3RlcGhlbm1vcmxleS5vcmcvamF2YXNjcmlwdC9kb20tbm9kZXR5cGUtY29uc3RhbnRzL1xyXG4gICAgICAgICAgICBpZiAodGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzW2pdLm5vZGVUeXBlID09PSAxKSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlc1tqXS5zdHlsZS5vcGFjaXR5ID0gb3BhY2l0eSAvIDEwMDtcclxuICAgICAgICAgICAgICB0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXNbal0uc3R5bGUuZmlsdGVyID0gJ2FscGhhKG9wYWNpdHk9JyArIG9wYWNpdHkgKyAnKSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiByb3cgaXMgbW92ZWQgdGhlbiBSRURJUFMuZHJhZyB3aWxsIGNyZWF0ZSBtaW5pIHRhYmxlIHdpdGggb25lIHJvdywgYWxsIGJyb3dzZXJzIChJRTgsIE9wZXJhMTEsIEZGMy42LCBDaHJvbWUxMCkgY2FuIHNldCBvcGFjaXR5IHRvIHRoZSB0YWJsZVxyXG4gICAge1xyXG4gICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gb3BhY2l0eSAvIDEwMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgRkYsIENocm9tZSwgT3BlcmFcclxuICAgICAgZWwuc3R5bGUuZmlsdGVyID0gJ2FscGhhKG9wYWNpdHk9JyArIG9wYWNpdHkgKyAnKSc7ICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIElFXHJcbiAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yID8gY29sb3IgOiAnJzsgICAgICAgICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC8qIHB1YmxpYyBwcm9wZXJ0aWVzICovXHJcbiAgICBvYmogOiBvYmosICAgICAgICAgICAgICAgICAgLy9UeXBlOiBIVE1MRWxlbWVudCAtIEN1cnJlbnRseSBtb3ZlZCBESVYgZWxlbWVudC4gUmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZy5vYmogKGRyYWdnZWQgRElWIGVsZW1lbnQpIGlzIHZpc2libGUgYW5kIGNhbiBiZSB1c2VkIGluIGFwcHJvcHJpYXRlIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAgb2JqT2xkICA6IG9iak9sZCwgICAgICAgICAgIC8vVHlwZTogSFRNTEVsZW1lbnQgLSBQcmV2aW91c2x5IG1vdmVkIERJViBlbGVtZW50IChiZWZvcmUgY2xpY2tlZCBvciBjbG9uZWQpLiBJbiBjYXNlIHdoZW4gRElWIGVsZW1lbnQgaXMgY2xvbmVkLCBvYmogaXMgcmVmZXJlbmNlIG9mIGN1cnJlbnQgKGNsb25lZCkgRElWIGVsZW1lbnQgd2hpbGUgb2JqT2xkIGlzIHJlZmVyZW5jZSBvZiBib3R0b20gKG9yaWdpbikgRElWIGVsZW1lbnQuXHJcbiAgICAvKipcclxuICAgICAqIE9iamVjdCBjb250YWlucyByZWZlcmVuY2UgdG8gcHJldmlvdXMsIHNvdXJjZSwgY3VycmVudCBhbmQgdGFyZ2V0IHRhYmxlIGNlbGwuIFRkIHJlZmVyZW5jZXMgY2FuIGJlIHVzZWQgaW4gZXZlbnQgaGFuZGxlcnMuXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC5zb3VyY2UgLSByZWZlcmVuY2UgdG8gc291cmNlIHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlZG93bik8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQucHJldmlvdXMgLSByZWZlcmVuY2UgdG8gcHJldmlvdXMgdGFibGUgY2VsbCAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKTwvbGk+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC5jdXJyZW50IC0gcmVmZXJlbmNlIHRvIGN1cnJlbnQgdGFibGUgY2VsbCAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKTwvbGk+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC50YXJnZXQgLSByZWZlcmVuY2UgdG8gdGFyZ2V0IHRhYmxlIGNlbGwgKHRhcmdldCB0YWJsZSBjZWxsIGlzIHNldCBpbiBhIG1vbWVudCBvZiBkcm9wcGluZyBlbGVtZW50IHRvIHRoZSB0YWJsZSBjZWxsKTwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHRkIDogdGQsXHJcbiAgICAvKipcclxuICAgICAqIEhvdmVyIG9iamVjdCBjb250YWlucyA0IHByb3BlcnRpZXM6IGNvbG9yVGQsIGNvbG9yVHIsIGJvcmRlclRkIGFuZCBib3JkZXJUci4gY29sb3JUZCBhbmQgY29sb3JUciBkZWZpbmUgaG92ZXIgY29sb3IgZm9yIERJViBlbGVtZW50IGFuZCB0YWJsZSByb3cuXHJcbiAgICAgKiBJZiBib3JkZXJUZCBpcyBkZWZpbmVkLCB0aGVuIGhpZ2hsaWdodGVkIGNlbGwgd2lsbCBoYXZlIGJvcmRlci4gSWYgYm9yZGVyVHIgaXMgZGVmaW5lZCB0aGVuIGhpZ2hsaWdodGVkIHJvdyB3aWxsIGhhdmUgb25seSB0b3Agb3IgYm90dG9tIGJvcmRlci5cclxuICAgICAqIFRvcCBib3JkZXIgc2hvd3MgdGhhdCByb3cgd2lsbCBiZSBwbGFjZWQgYWJvdmUgY3VycmVudCByb3csIHdoaWxlIGJvdHRvbSBib3JkZXIgc2hvd3MgdGhhdCBjdXJyZW50IHJvdyB3aWxsIGJlIHBsYWNlZCBiZWxvdyBjdXJyZW50IHJvdy5cclxuICAgICAqIFNvbWUgYnJvd3NlcnMgbWF5IGhhdmUgcHJvYmxlbSB3aXRoIFwiYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlXCIgdGFibGUgc3R5bGUgYW5kIGJvcmRlciBoaWdobGlnaHRpbmcuXHJcbiAgICAgKiBJbiB0aGF0IGNhc2UgdHJ5IHdpdGhvdXQgY29sbGFwc2luZyBURCBib3JkZXJzIChlLmcgc2V0IFwiYm9yZGVyLXNwYWNpbmc6MFwiIGFuZCBzbWFsbGVyIFwidGQuYm9yZGVyLXdpZHRoXCIpLlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKiBAbmFtZSBSRURJUFMuZHJhZyNob3ZlclxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIC8vIHNldCBcIiM5QkIzREFcIiBhcyBob3ZlciBjb2xvciBmb3IgVERcclxuICAgICAqIFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVGQgPSAnIzlCQjNEQSc7XHJcbiAgICAgKlxyXG4gICAgICogLy8gb3Igc2V0IFwiTGltZVwiIGFzIGhvdmVyIGNvbG9yIGZvciBUUlxyXG4gICAgICogUkVESVBTLmRyYWcuaG92ZXIuY29sb3JUciA9ICdMaW1lJztcclxuICAgICAqXHJcbiAgICAgKiAvLyBzZXQgcmVkIGJvcmRlciBmb3IgaGlnaGxpZ2h0ZWQgVERcclxuICAgICAqIFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRkID0gJzJweCBzb2xpZCByZWQnO1xyXG4gICAgICovXHJcbiAgICBob3ZlciA6IGhvdmVyLFxyXG4gICAgLyoqXHJcbiAgICAgKiBTY3JvbGwgb2JqZWN0IGNvbnRhaW5zIHByb3BlcnRpZXMgbmVlZGVkIGZvciBhdXRvc2Nyb2xsIG9wdGlvbi5cclxuICAgICAqIDx1bD5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gc2Nyb2xsLmVuYWJsZSAtIEVuYWJsZSAvIGRpc2FibGUgYXV0b3Njcm9sbCBvcHRpb24uIEJ5IGRlZmF1bHQgYXV0b3Njcm9sbCBpcyBlbmFibGVkIGJ1dCBpdCBjYW4gYmUgdXNlZnVsbCBpbiBzb21lIGNhc2VzIHRvIGNvbXBsZXRlbHkgdHVybiBvZmYgYXV0b3Njcm9sbCAoaWYgYXBwbGljYXRpb24gZG9lc24ndCBuZWVkIGF1dG9zY3JvbGxpbmcgcGFnZSBub3IgYXV0b3Njcm9sbGluZyBESVYgY29udGFpbmVyKS4gVHVybmluZyBvZmYgYXV0b3Njcm9sbCB3aWxsIHNwZWVkIHVwIGFwcGxpY2F0aW9uIGJlY2F1c2UgZXh0cmEgY2FsY3VsYXRpb25zIHdpbGwgYmUgc2tpcHBlZC4gRGVmYXVsdCBpcyB0cnVlPC9saT5cclxuICAgICAqIDxsaT57SW50ZWdlcn0gc2Nyb2xsLmJvdW5kIC0gQm91bmQgc2l6ZSBmb3IgdHJpZ2dlcmluZyBwYWdlIGF1dG9TY3JvbGwgb3IgYXV0b1Njcm9sbCBvZiBzY3JvbGxhYmxlIERJViBjb250YWluZXIuIERlZmF1bHQgdmFsdWUgaXMgMjUgKHB4KS48L2xpPlxyXG4gICAgICogPGxpPntJbnRlZ2VyfSBzY3JvbGwuc3BlZWQgLSBBdXRvc2Nyb2xsIHBhdXNlIGluIG1pbGxpc2Vjb25kcy4gRGVmYXVsdCB2YWx1ZSBpcyAyMCAobWlsbGlzZWNvbmRzKS48L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBzY3JvbGwgOiBzY3JvbGwsXHJcbiAgICAvKipcclxuICAgICAqIE9iamVjdCBjb250YWlucyBzdHlsZXMgKGNvbG9ycywgb3BhY2l0eSBsZXZlbHMpIGZvciBESVYgZWxlbWVudHMgYW5kIHRhYmxlIHJvd3MuXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e1N0cmluZ30gc3R5bGUuYm9yZGVyRW5hYmxlZCAtIEJvcmRlciBzdHlsZSBmb3IgZW5hYmxlZCBESVYgZWxlbWVudHMuIERlZmF1bHQgaXMgXCJzb2xpZFwiLjwvbGk+XHJcbiAgICAgKiA8bGk+e1N0cmluZ30gc3R5bGUuYm9yZGVyRGlzYWJsZWQgLSBCb3JkZXIgc3R5bGUgZm9yIGRpc2FibGVkIERJViBlbGVtZW50cy4gRGVmYXVsdCBpcyBcImRvdHRlZFwiLjwvbGk+XHJcbiAgICAgKiA8bGk+e0ludGVnZXJ9IHN0eWxlLm9wYWNpdHlEaXNhYmxlZCAtIE9wYWNpdHkgbGV2ZWwgZm9yIGRpc2FibGVkIGVsZW1lbnRzLiBEZWZhdWx0IGlzIGVtcHR5IHN0cmluZy48L2xpPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLnJvd0VtcHR5Q29sb3IgLSBcIkVtcHR5IHJvd1wiIGNvbG9yLiBXaGVuIGxhc3Qgcm93IGZyb20gdGFibGUgaXMgbW92ZWQgdGhlbiB0aGlzIGNvbG9yIHdpbGwgYmUgc2V0IHRvIFwiZW1wdHkgcm93XCIuIERlZmF1bHQgaXMgXCJ3aGl0ZVwiLjwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIC8vIGRlZmluZSBib3JkZXIgc3R5bGUgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgKiBSRURJUFMuZHJhZy5zdHlsZS5ib3JkZXJEaXNhYmxlZCA9ICdkYXNoZWQnO1xyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHN0eWxlIDogc3R5bGUsXHJcbiAgICAvKipcclxuICAgICAqIE9iamVjdCBkZWZpbmVzIHNldmVyYWwgcnVsZXMgcmVsYXRlZCB0byBjbG9uaW5nIERJViBlbGVtZW50cyBsaWtlIGVuYWJsZSBjbG9uaW5nIHdpdGggc2hpZnQga2V5LCBlbmFibGUgcmV0dXJuaW5nIGNsb25lZCBESVYgZWxlbWVudCB0byBpdHMgc291cmNlIGFuZCBzbyBvbi5cclxuICAgICAqIEluc3RlYWQgb2YgbW92aW5nLCBESVYgZWxlbWVudCAvIHJvdyB3aWxsIGJlIGNsb25lZCBhbmQgcmVhZHkgZm9yIGRyYWdnaW5nLlxyXG4gICAgICogSnVzdCBwcmVzcyBTSElGVCBrZXkgYW5kIHRyeSB0byBkcmFnIERJViBlbGVtZW50IC8gcm93LlxyXG4gICAgICogaWYgY2xvbmUuc2VuZEJhY2sgcHJvcGVydHkgc2V0IHRvIHRydWUsIGNsb25lZCBESVYgZWxlbWVudCB3aWxsIGJlIGRlbGV0ZWQgd2hlbiBkcm9wcGVkIHRvIHRoZSBjZWxsIGNvbnRhaW5pbmcgaXRzIHNvdXJjZSBjbG9uZSBlbGVtZW50LlxyXG4gICAgICogSWYgZXhpc3RzLCBcImNsaW1pdFwiIGNsYXNzIHdpbGwgYmUgdXBkYXRlZCAoaW5jcmVhc2VkIGJ5IDEpLlxyXG4gICAgICogY2xvbmUuZHJvcCBwcm9wZXJ0eSBkZWZpbmVzIHBsYWNpbmcgY2xvbmVkIERJViBlbGVtZW50IChkcm9wcGVkIG91dHNpZGUgYW55IHRhYmxlKSB0byB0aGUgbGFzdCBtYXJrZWQgcG9zaXRpb24uXHJcbiAgICAgKiBJZiB0aGlzIHByb3BlcnR5IGlzIHNldCB0byB0cnVlLCB0aGUgY2xvbmVkIERJViBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIHBsYWNlZCB0byB0aGUgdGFibGUgY2VsbC5cclxuICAgICAqIDx1bD5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gY2xvbmUua2V5RGl2IC0gSWYgc2V0IHRvIHRydWUsIGFsbCBESVYgZWxlbWVudHMgb24gdGFibGVzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5LiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLmtleVJvdyAtIElmIHNldCB0byB0cnVlLCB0YWJsZSByb3dzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5LiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLnNlbmRCYWNrIC0gSWYgc2V0IHRvIHRydWUsIGNsb25lZCBlbGVtZW50IGNhbiBiZSByZXR1cm5lZCB0byBpdHMgc291cmNlLiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLmRyb3AgLSBJZiBzZXQgdG8gdHJ1ZSwgY2xvbmVkIGVsZW1lbnQgd2lsbCBiZSBhbHdheXMgcGxhY2VkIHRvIHRoZSB0YWJsZSAodG8gdGhlIGxhc3QgcG9zc2libGUgY2VsbCkgbm8gbWF0dGVyIGlmIGlzIGRyb3BwZWQgb3V0c2lkZSB0aGUgdGFibGUuIERlZmF1bHQgaXMgZmFsc2UuPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgY2xvbmUgOiBjbG9uZSxcclxuICAgIC8qIHB1YmxpYyBtZXRob2RzIChkb2N1bWVudGVkIGluIG1haW4gY29kZSkgKi9cclxuICAgIGluaXQgOiBpbml0LFxyXG4gICAgZW5hYmxlRHJhZyA6IGVuYWJsZURyYWcsXHJcbiAgICBlbmFibGVEaXZzIDogZW5hYmxlRGl2cyxcclxuICAgIHJvd09wYWNpdHkgOiByb3dPcGFjaXR5LFxyXG4gICAgZ2V0U2Nyb2xsUG9zaXRpb24gOiBnZXRTY3JvbGxQb3NpdGlvbixcclxuICAgIGdldFN0eWxlIDogZ2V0U3R5bGUsXHJcbiAgICBmaW5kUGFyZW50IDogZmluZFBhcmVudCxcclxuICAgIGV2ZW50IDogZXZlbnRcclxuICB9O1xyXG59KCkpO1xyXG5cclxuXHJcbmlmICghUkVESVBTLmV2ZW50KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBSRURJUFMuZXZlbnQgaXNuJ3QgYWxyZWFkeSBkZWZpbmVkIChmcm9tIG90aGVyIFJFRElQUyBmaWxlKVxyXG57XHJcbiAgUkVESVBTLmV2ZW50ID0gKGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHZhciBhZGQ7XHJcbiAgICB2YXIgcmVtb3ZlO1xyXG5cclxuICAgIGFkZCA9IGZ1bmN0aW9uIChvYmosIGV2ZW50TmFtZSwgaGFuZGxlcikgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBldmVudCBsaXN0ZW5lclxyXG4gICAge1xyXG4gICAgICBpZiAob2JqLmFkZEV2ZW50TGlzdGVuZXIpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCBmYWxzZSk7ICAgICAgICAvLyAoZmFsc2UpIHJlZ2lzdGVyIGV2ZW50IGluIGJ1YmJsZSBwaGFzZSAoZXZlbnQgcHJvcGFnYXRlcyBmcm9tIGZyb20gdGFyZ2V0IGVsZW1lbnQgdXAgdG8gdGhlIERPTSByb290KVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKG9iai5hdHRhY2hFdmVudCkgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmouYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgaGFuZGxlcik7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBcclxuICAgICAge1xyXG4gICAgICAgIG9ialsnb24nICsgZXZlbnROYW1lXSA9IGhhbmRsZXI7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gKG9iaiwgZXZlbnROYW1lLCBoYW5kbGVyKSAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVyXHJcbiAgICB7XHJcbiAgICAgIGlmIChvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcikgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChvYmouZGV0YWNoRXZlbnQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLmRldGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmpbJ29uJyArIGV2ZW50TmFtZV0gPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7IGFkZDogYWRkLCByZW1vdmU6IHJlbW92ZSB9O1xyXG4gIH0oKSk7XHJcbn0iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciByZWRpcHMgPSB7fTtcclxuXHJcbnJlZGlwcy5pbml0ID0gZnVuY3Rpb24gKCkgXHJcbntcclxuICB2YXIgcmQgPSBSRURJUFMuZHJhZzsgICAvLyByZWZlcmVuY2UgdG8gdGhlIFJFRElQUy5kcmFnIGxpYnJhcnlcclxuXHJcbiAgcmQuaW5pdCgpO1xyXG5cclxuICAvL3JkLmNsb25lLmtleURpdiA9IHJkLmNsb25lLmtleVJvdyA9IHRydWU7ICAgLy8gZW5hYmxlIGNsb25lIGVsZW1lbnQgYW5kIGNsb25lIHJvdyB3aXRoIHNoaWZ0IGtleVxyXG5cclxuICByZC5ldmVudC5yb3dEcm9wcGVkID0gZnVuY3Rpb24gKG5ld1BhcmVudFJvdylcclxuICB7XHJcbiAgICB2YXIgbW92ZWRJRCAgICAgICA9IHBhcnNlSW50KHJkLm9iak9sZC5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSk7XHJcbiAgICB2YXIgbmV3UGFyZW50SUQgICA9IHBhcnNlSW50KG5ld1BhcmVudFJvdy5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSk7XHJcbiAgICBzcHJlYWRTaGVldC5tb3ZlTm9kZShtb3ZlZElELCBuZXdQYXJlbnRJRCk7XHJcbiAgfTtcclxuXHJcbiAgcmQuZXZlbnQucm93RHJvcHBlZFNvdXJjZSA9IGZ1bmN0aW9uICgpICAgICAgICAgLy8gcm93IHdhcyBkcm9wcGVkIHRvIHRoZSBzb3VyY2UgLSBldmVudCBoYW5kbGVyLCBtaW5pIHRhYmxlIChjbG9uZWQgcm93KSB3aWxsIGJlIGRlbGV0ZWQgYW5kIHNvdXJjZSByb3cgc2hvdWxkIHJldHVybiB0byBvcmlnaW5hbCBzdGF0ZVxyXG4gIHtcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAxMDApOyAgICAgICAgICAgICAgICAvLyBtYWtlIHNvdXJjZSByb3cgY29tcGxldGVseSB2aXNpYmxlIChubyBvcGFjaXR5KVxyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd01vdmVkID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iaiwgODUpOyAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIG1vdmVkIHJvdywgcmQub2JqIGlzIHJlZmVyZW5jZSBvZiBjbG9uZWQgcm93IChtaW5pIHRhYmxlKVxyXG4gICAgcmQucm93T3BhY2l0eShyZC5vYmpPbGQsIDIwLCAnV2hpdGUnKTsgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBzb3VyY2Ugcm93IGFuZCBjaGFuZ2Ugc291cmNlIHJvdyBiYWNrZ3JvdW5kIGNvbG9yLCBvYmoub2JqT2xkIGlzIHJlZmVyZW5jZSBvZiBzb3VyY2Ugcm93XHJcbiAgfTtcclxuXHJcbiAgcmQuZXZlbnQucm93Q2xpY2tlZCAgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Tm90TW92ZWQgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Q2xvbmVkICAgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Tm90Q2xvbmVkID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93RGVsZXRlZCAgID0gZnVuY3Rpb24gKCkge307XHJcblxyXG4gIHJkLmV2ZW50LnJvd1VuZGVsZXRlZCA9IGZ1bmN0aW9uICgpICAgICAgICAgICAgIC8vIHJvdyBpcyB1bmRlbGV0ZWQgKHJldHVybiBzb3VyY2Ugcm93IHRvIG9yaWdpbmFsIHN0YXRlKVxyXG4gIHtcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAxMDApO1xyXG4gIH07XHJcbn07XHJcbiIsInZhciBGaWVsZCA9IGZ1bmN0aW9uKG5hbWUpXHJcbntcclxuICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gIHRoaXMuZGF0YXR5cGUgPSBGaWVsZC5OVU1CRVI7XHJcbiAgdGhpcy5mb3JtYXQgPSBGaWVsZC5OVU1CRVJfRk9STUFUO1xyXG4gIHRoaXMucHJlY2lzaW9uID0gMjtcclxuICB0aGlzLmFnZ190eXBlID0gRmllbGQuTk9fQUdHUkVHQVRJT047XHJcbiAgdGhpcy5hZ2dfcXR5X2ZpZWxkID0gbnVsbDtcclxufTtcclxuXHJcbkZpZWxkLk5VTUJFUiA9ICcwJztcclxuRmllbGQuU1RSSU5HID0gJzEnO1xyXG5GaWVsZC5DSE9JQ0UgPSAnMic7XHJcblxyXG5GaWVsZC5OT19BR0dSRUdBVElPTiA9ICcwJztcclxuRmllbGQuU1VNX0FOWV9BR0dSRUdBVElPTiA9ICcxJztcclxuXHJcbkZpZWxkLk5VTUJFUl9GT1JNQVQgPSAnMCc7XHJcbkZpZWxkLlBFUkNFTlRfRk9STUFUID0gJzEnO1xyXG5GaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVCA9ICcyJztcclxuXHJcbkZpZWxkLmZvcm1hdFZhbHVlID0gZnVuY3Rpb24oZmllbGQsIHZhbHVlKVxyXG57XHJcbiAgaWYoZmllbGQuZGF0YXR5cGUgPT09IEZpZWxkLk5VTUJFUilcclxuICB7XHJcbiAgICB2YWx1ZSA9IE51bWJlcih2YWx1ZSk7ICAgICAgLy9UT0RPOiBoYW5kbGUgY2FzZSB3aGVyZSB2YWx1ZSBkb2Vzbid0IHBhcnNlIHRvIGEgbnVtYmVyXHJcbiAgICBcclxuICAgIGlmKGZpZWxkLmZvcm1hdCA9PT0gRmllbGQuTlVNQkVSX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLnRvRml4ZWQoZmllbGQucHJlY2lzaW9uKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5QRVJDRU5UX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuICgxMDAuMCAqIHZhbHVlKS50b0ZpeGVkKGZpZWxkLnByZWNpc2lvbikgKyAnJSc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKGZpZWxkLmZvcm1hdCA9PT0gRmllbGQuU0NJRU5USUZJQ19GT1JNQVQpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiB2YWx1ZS50b0V4cG9uZW50aWFsKGZpZWxkLnByZWNpc2lvbik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVsc2UgaWYoZmllbGQuZGF0YXR5cGUgPT09IEZpZWxkLlNUUklORylcclxuICB7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbiAgfSBcclxuICBlbHNlIGlmKGZpZWxkLmRhdGF0eXBlID09PSBGaWVsZC5DSE9JQ0UpXHJcbiAge1xyXG4gICAgLy9UT0RPOiBpbXBsZW1lbnRcclxuICB9ICAgICAgXHJcbn07ICAiLCJ2YXIgREVGQVVMVF9OT0RFX0lOUFVUX1dJRFRIID0gMzkwO1xyXG5cclxuZnVuY3Rpb24gZ2V0RmllbGRNZW51TWFya3VwKGZpZWxkTmFtZSwgeCwgeSwgZmllbGRzKVxyXG57XHJcbiAgdmFyIGZpZWxkID0gcHJvamVjdC5nZXRGaWVsZChmaWVsZE5hbWUpO1xyXG4gIFxyXG4gIHZhciBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHJcbiAgdmFyIG51bWJlckl0ZW0gPSBuZXcgTWVudUl0ZW0oJ051bWJlcicsIEZpZWxkLk5VTUJFUiwgJ2RhdGF0eXBlJywgZmllbGQpO1xyXG4gIHZhciBmb3JtYXRJdGVtID0gbmV3IE1lbnVJdGVtKCdGb3JtYXQnKTtcclxuICBcclxuICB2YXIgbnVtYmVyRm9ybWF0SXRlbSA9IG5ldyBNZW51SXRlbSgnTnVtYmVyJywgRmllbGQuTlVNQkVSX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKTtcclxuICBudW1iZXJGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKCcwJywgMCwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgdmFyIGRpc3BsYXlTdHJpbmcgPSAnMC4nO1xyXG4gIGZvcih2YXIgaSA9IDE7IGkgPCAxMTsgaSsrKVxyXG4gIHtcclxuICAgIGRpc3BsYXlTdHJpbmcgKz0gJzAnO1xyXG4gICAgbnVtYmVyRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbShkaXNwbGF5U3RyaW5nLCBpLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB9XHJcbiAgZm9ybWF0SXRlbS5pdGVtcy5wdXNoKG51bWJlckZvcm1hdEl0ZW0pO1xyXG4gIFxyXG4gIHZhciBwZXJjZW50Rm9ybWF0SXRlbSA9IG5ldyBNZW51SXRlbSgnUGVyY2VudCcsIEZpZWxkLlBFUkNFTlRfRk9STUFULCAnZm9ybWF0JywgZmllbGQpO1xyXG4gIHBlcmNlbnRGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKCcwJywgMCwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgdmFyIGRpc3BsYXlTdHJpbmcgPSAnMC4nO1xyXG4gIGZvcih2YXIgaSA9IDE7IGkgPCAxMTsgaSsrKVxyXG4gIHtcclxuICAgIGRpc3BsYXlTdHJpbmcgKz0gJzAnO1xyXG4gICAgcGVyY2VudEZvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oZGlzcGxheVN0cmluZyArICclJywgaSwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgfVxyXG4gIGZvcm1hdEl0ZW0uaXRlbXMucHVzaChwZXJjZW50Rm9ybWF0SXRlbSk7XHJcbiAgXHJcbiAgdmFyIHNjaWVudGlmaWNGb3JtYXRJdGVtID0gbmV3IE1lbnVJdGVtKCdTY2llbnRpZmljJywgRmllbGQuU0NJRU5USUZJQ19GT1JNQVQsICdmb3JtYXQnLCBmaWVsZCk7XHJcbiAgc2NpZW50aWZpY0Zvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJzAnLCAwLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB2YXIgZGlzcGxheVN0cmluZyA9ICcwLic7XHJcbiAgZm9yKHZhciBpID0gMTsgaSA8IDExOyBpKyspXHJcbiAge1xyXG4gICAgZGlzcGxheVN0cmluZyArPSAnMCc7XHJcbiAgICBzY2llbnRpZmljRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbShkaXNwbGF5U3RyaW5nICsgJ2UrMCcsIGksICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIH1cclxuICBmb3JtYXRJdGVtLml0ZW1zLnB1c2goc2NpZW50aWZpY0Zvcm1hdEl0ZW0pOyAgXHJcbiAgXHJcbiAgbnVtYmVySXRlbS5pdGVtcy5wdXNoKGZvcm1hdEl0ZW0pO1xyXG4gIFxyXG4gIHZhciBhZ2dyZWdhdGlvbkl0ZW0gPSBuZXcgTWVudUl0ZW0oJ0FnZ3JlZ2F0aW9uJyk7XHJcbiAgYWdncmVnYXRpb25JdGVtLml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKCdObyBBZ2dyZWdhdGlvbicsIEZpZWxkLk5PX0FHR1JFR0FUSU9OLCAnYWdnX3R5cGUnLCBmaWVsZCkpO1xyXG4gIFxyXG4gIHZhciBzdW1BbnlBZ2dJdGVtID0gbmV3IE1lbnVJdGVtKCdTdW0gYW55IGRlZmluZWQgY2hpbGRyZW4nLCBGaWVsZC5TVU1fQU5ZX0FHR1JFR0FUSU9OLCAnYWdnX3R5cGUnLCBmaWVsZCk7XHJcbiAgXHJcbiAgZm9yKHZhciBpbmRleCBpbiBmaWVsZHMpXHJcbiAge1xyXG4gICAgdmFyIGYgPSBmaWVsZHNbaW5kZXhdO1xyXG4gICAgXHJcbiAgICBpZihmLm5hbWUgIT0gZmllbGQubmFtZSlcclxuICAgIHtcclxuICAgICAgc3VtQW55QWdnSXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbShmLm5hbWUsIGYubmFtZSwgJ2FnZ19xdHlfZmllbGQnLCBmaWVsZCkpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBhZ2dyZWdhdGlvbkl0ZW0uaXRlbXMucHVzaChzdW1BbnlBZ2dJdGVtKTtcclxuICBudW1iZXJJdGVtLml0ZW1zLnB1c2goYWdncmVnYXRpb25JdGVtKTtcclxuICBcclxuICBtZW51Lml0ZW1zID0gW107XHJcbiAgbWVudS5pdGVtcy5wdXNoKG51bWJlckl0ZW0pO1xyXG4gIG1lbnUuaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJ1RleHQnLCBGaWVsZC5TVFJJTkcsICdkYXRhdHlwZScsIGZpZWxkKSk7XHJcbiAgLy9UT0RPOiBtZW51Lml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKCdDaG9pY2UnLCBGaWVsZC5DSE9JQ0UsICdkYXRhdHlwZScsIGZpZWxkKSk7XHJcbiAgXHJcbiAgdmFyIG1hcmt1cCA9ICc8ZGl2IGlkPVwiZmllbGRNZW51XCIgc3R5bGU9XCJsZWZ0OicgKyB4ICsgJ3B4O3RvcDonICsgeSArICdweDtcIj4nO1xyXG4gIFxyXG4gIG1hcmt1cCArPSBnZW5lcmF0ZU1lbnVNYXJrdXAobWVudSk7XHJcbiAgXHJcbiAgbWFya3VwICs9ICc8L2Rpdj4nO1xyXG4gIHJldHVybiBtYXJrdXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlTWVudU1hcmt1cChtZW51KVxyXG57XHJcbiAgdmFyIG1hcmt1cCA9ICc8dWw+JztcclxuICBcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgbWVudS5pdGVtcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgaXRlbSA9IG1lbnUuaXRlbXNbaV07XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSAnPGxpIG9uY2xpY2s9XCJNZW51LmhhbmRsZUNsaWNrKCcgKyBpdGVtLmlkICsgJyk7XCI+JztcclxuXHJcbiAgICB2YXIgY2hlY2tNYXJrQ2xhc3MgPSAndW5jaGVja2VkTWVudUl0ZW0nO1xyXG4gICAgaWYoaXRlbS5maWVsZCAmJiBpdGVtLmNoZWNrZWQpXHJcbiAgICB7XHJcbiAgICAgIGNoZWNrTWFya0NsYXNzID0gJ2NoZWNrZWRNZW51SXRlbSc7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSAnPGltZyBpZD1cIm1lbnVJdGVtJyArIGl0ZW0uaWQgKyAnXCIgc3JjPVwiJyArIENIRUNLX01BUktfSU1BR0VfUEFUSCArICdcIiBjbGFzcz1cIicgKyBjaGVja01hcmtDbGFzcyArICdcIi8+JztcclxuICAgIG1hcmt1cCArPSBpdGVtLmRpc3BsYXk7XHJcbiAgICBcclxuICAgIGlmKGl0ZW0uaXRlbXMgJiYgaXRlbS5pdGVtcy5sZW5ndGggPiAwKVxyXG4gICAge1xyXG4gICAgICBtYXJrdXAgKz0gJzxkaXYgY2xhc3M9XCJhcnJvd1JpZ2h0XCI+PC9kaXY+JztcclxuICAgIH1cclxuXHJcbiAgICBpZihpdGVtLml0ZW1zICYmIGl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9IGdlbmVyYXRlTWVudU1hcmt1cChpdGVtKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgbWFya3VwICs9ICc8L2xpPic7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBtYXJrdXAgKyAnPC91bD4nO1xyXG59IiwidmFyIE1lbnUgPSBmdW5jdGlvbigpXHJcbntcclxuICB2YXIgaXRlbXMgPSBbXTtcclxuICBNZW51Lm1lbnUgPSB0aGlzO1xyXG59O1xyXG5cclxuTWVudS5tZW51O1xyXG5cclxuTWVudS5oYW5kbGVDbGljayA9IGZ1bmN0aW9uKGlkKVxyXG57XHJcbiAgdmFyIGNsaWNrZWQgPSBNZW51Lm1lbnUuZ2V0TWVudUl0ZW0oaWQsIE1lbnUubWVudSk7XHJcbiAgdmFyIHBhcmVudCA9IE1lbnUubWVudS5nZXRNZW51SXRlbVBhcmVudChpZCwgTWVudS5tZW51KTtcclxuXHJcbiAgaWYoY2xpY2tlZC5maWVsZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZSBtZW51IGl0ZW0gZG9lc24ndCBoYXZlIGEgZmllbGQgdGhlbiBpZ25vcmUgaXRcclxuICB7XHJcbiAgICB2YXIgZmllbGQgPSBwcm9qZWN0LmdldEZpZWxkKGNsaWNrZWQuZmllbGQubmFtZSk7XHJcbiAgICBmaWVsZFtjbGlja2VkLnZhck5hbWVdID0gY2xpY2tlZC52YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NldCB2YWx1ZSBmb3IgdGhlIGZpZWxkIGluIHRoZSBtb2RlbCBiYXNlZCBvbiB0aGUgY2xpY2tlZCBtZW51IGl0ZW1cclxuICBcclxuICAgIGZvcih2YXIgaSBpbiBwYXJlbnQuaXRlbXMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2xlYXIgdGhlIGNoZWNrbWFya3MgZm9yIGFsbCBpdGVtIG9uIHRoZSBzYW1lIG1lbnUgbGV2ZWxcclxuICAgIHtcclxuICAgICAgJCgnI21lbnVJdGVtJyArIHBhcmVudC5pdGVtc1tpXS5pZCkucmVtb3ZlQ2xhc3MoJ2NoZWNrZWRNZW51SXRlbScpLmFkZENsYXNzKCd1bmNoZWNrZWRNZW51SXRlbScpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgJCgnI21lbnVJdGVtJyArIGlkKS5yZW1vdmVDbGFzcygndW5jaGVja2VkTWVudUl0ZW0nKS5hZGRDbGFzcygnY2hlY2tlZE1lbnVJdGVtJyk7ICAgICAgICAgICAgICAgICAgICAgLy9jaGVjayB0aGUgaXRlbSB0aGF0IHdhcyBjbGlja2VkXHJcbiAgICBcclxuICAgIGlmKHBhcmVudCA9PT0gTWVudS5tZW51KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgdGhpcyBpcyBhIHRvcCBsZXZlbCBtZW51IGl0ZW0gdGhlbiB1cGRhdGUgdGhlIGZvcm1hdHRpbmcsIHNpbmNlIHdlIG9ubHkgd2FudCB0byBkbyB0aGlzIG9uY2UgcGVyIGNsaWNrXHJcbiAgICB7XHJcbiAgICAgIHNwcmVhZFNoZWV0LnVwZGF0ZU51bWJlckZpZWxkRm9ybWF0dGluZyhmaWVsZCk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuTWVudS5wcm90b3R5cGUuZ2V0TWVudUl0ZW0gPSBmdW5jdGlvbihpZCwgbWVudUl0ZW0pXHJcbntcclxuICBpZihpZCA9PT0gbWVudUl0ZW0uaWQpXHJcbiAge1xyXG4gICAgcmV0dXJuIG1lbnVJdGVtO1xyXG4gIH1cclxuICBlbHNlIGlmKG1lbnVJdGVtLml0ZW1zICYmIG1lbnVJdGVtLml0ZW1zLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgdmFyIGZvdW5kO1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG1lbnVJdGVtLml0ZW1zLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBmb3VuZCA9IHRoaXMuZ2V0TWVudUl0ZW0oaWQsIG1lbnVJdGVtLml0ZW1zW2ldKTtcclxuICAgICAgXHJcbiAgICAgIGlmKGZvdW5kKVxyXG4gICAgICB7XHJcbiAgICAgICAgcmV0dXJuIGZvdW5kO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuTWVudS5wcm90b3R5cGUuZ2V0TWVudUl0ZW1QYXJlbnQgPSBmdW5jdGlvbihpZCwgbWVudUl0ZW0pXHJcbntcclxuICBpZihtZW51SXRlbS5pdGVtcyAmJiBtZW51SXRlbS5pdGVtcy5sZW5ndGggPiAwKVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBtZW51SXRlbS5pdGVtcy5sZW5ndGg7IGkrKylcclxuICAgIHsgXHJcbiAgICAgIGlmKG1lbnVJdGVtLml0ZW1zW2ldLmlkID09PSBpZClcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiBtZW51SXRlbTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgZm91bmQgPSB0aGlzLmdldE1lbnVJdGVtUGFyZW50KGlkLCBtZW51SXRlbS5pdGVtc1tpXSk7XHJcbiAgICAgICAgaWYoZm91bmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcmV0dXJuIGZvdW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufTsiLCJ2YXIgTWVudUl0ZW0gPSBmdW5jdGlvbihkaXNwbGF5LCB2YWx1ZSwgdmFyTmFtZSwgZmllbGQpXHJcbntcclxuICB0aGlzLmRpc3BsYXkgPSBkaXNwbGF5O1xyXG4gIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICB0aGlzLnZhck5hbWUgPSB2YXJOYW1lO1xyXG4gIHRoaXMuZmllbGQgPSBmaWVsZDtcclxuICB0aGlzLml0ZW1zID0gW107XHJcbiAgdGhpcy5pZCA9IE1lbnVJdGVtLmlkKys7XHJcbiAgdGhpcy5wYXJlbnQgPSAtMTtcclxuXHJcbiAgaWYoZmllbGQpXHJcbiAge1xyXG4gICAgdGhpcy5jaGVja2VkID0gZmllbGRbdmFyTmFtZV0gPT09IHZhbHVlO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdGhpcy5jaGVja2VkID0gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG5cclxuTWVudUl0ZW0uaWQgPSAwOyIsInZhciByZXNpemVDb2x1bW5MZWZ0ID0gMDtcclxudmFyIHJlc2l6ZUZpZWxkID0gJzAnO1xyXG52YXIgTUlOX0NPTFVNTl9XSURUSCA9IDcwO1xyXG52YXIgR1JJUFNfV0lEVEggPSAxNjtcclxuXHJcbnZhciBzdGFydFJlc2l6ZSA9IGZ1bmN0aW9uKGUsIGdyaXApXHJcbntcclxuICAkKGRvY3VtZW50KS5iaW5kKCd0b3VjaG1vdmUucmVzaXplQ29sR3JpcCBtb3VzZW1vdmUucmVzaXplQ29sR3JpcCcsIHJlc2l6ZURyYWcpLmJpbmQoJ3RvdWNoZW5kLnJlc2l6ZUNvbEdyaXAgbW91c2V1cC5yZXNpemVDb2xHcmlwJywgcmVzaXplRW5kKTtcclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUubGVmdCA9IGUucGFnZVggKyAncHgnO1xyXG5cclxuICByZXNpemVDb2x1bW5MZWZ0ID0gJChncmlwLnBhcmVudE5vZGUpLnBvc2l0aW9uKCkubGVmdDsgICAgICAgICAgICAgICAgICAgIC8vc2F2ZSB0aGUgbGVmdCBwb3NpdGlvbiBvZiB0aGUgY29sdW1uIGJlaW5nIHJlc2l6ZWRcclxuICByZXNpemVGaWVsZCA9IGdyaXAucGFyZW50Tm9kZS5pZC5yZXBsYWNlKCdjb2xIZWFkZXInLCAnJyk7ICAgICAgICAgICAgICAgIC8vc2F2ZSB0aGUgZmllbGQgb2YgdGhlIGNvbHVtbiBiZWluZyByZXNpemVkXHJcbn07XHJcblxyXG52YXIgcmVzaXplRW5kID0gZnVuY3Rpb24oZSlcclxue1xyXG4gICQoZG9jdW1lbnQpLnVuYmluZCgndG91Y2htb3ZlLnJlc2l6ZUNvbEdyaXAgbW91c2Vtb3ZlLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVEcmFnKS51bmJpbmQoJ3RvdWNoZW5kLnJlc2l6ZUNvbEdyaXAgbW91c2V1cC5yZXNpemVDb2xHcmlwJywgcmVzaXplRW5kKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuXHJcbiAgdmFyIG5ld1dpZHRoID0gZS5wYWdlWCAtIHJlc2l6ZUNvbHVtbkxlZnQgLSBHUklQU19XSURUSDtcclxuXHJcbiAgaWYobmV3V2lkdGggPCBNSU5fQ09MVU1OX1dJRFRIKVxyXG4gIHtcclxuICAgIG5ld1dpZHRoID0gTUlOX0NPTFVNTl9XSURUSDtcclxuICB9XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xIZWFkZXJJbnB1dCcgKyByZXNpemVGaWVsZCkuc3R5bGUud2lkdGggPSBuZXdXaWR0aCArICdweCc7ICAgIC8vcmVzaXplIHRoZSB3aWR0aCBvZiB0aGUgY29sdW1uIGhlYWRlclxyXG5cclxuICAvL3Jlc2l6ZSB0aGUgd2lkdGggb2YgZXZlcnkgY2VsbCBpbiB0aGUgY29sdW1uXHJcbiAgdmFyIGNvbHVtbkNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpZWxkSW5wdXQnICsgcmVzaXplRmllbGQpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY29sdW1uQ2VsbHMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgY29sdW1uQ2VsbHNbaV0uc3R5bGUud2lkdGggPSAobmV3V2lkdGggKyA4KSArICdweCc7XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHJlc2l6ZURyYWcgPSBmdW5jdGlvbihlKVxyXG57XHJcbiAgaWYoZS5wYWdlWCA+IHJlc2l6ZUNvbHVtbkxlZnQgKyBNSU5fQ09MVU1OX1dJRFRIICsgR1JJUFNfV0lEVEgpXHJcbiAge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS5sZWZ0ID0gZS5wYWdlWCArICdweCc7ICAgICAgLy9tb3ZlIHRoZSByZXNpemUgbGluZSBhcyB0aGUgdXNlciBkcmFncyBpdFxyXG4gIH1cclxufTsiLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpXHJcbntcclxuICBzY3JvbGxCYXJXaWR0aCA9IGdldFNjcm9sbEJhcldpZHRoKCk7ICAvL2dldCB0aGUgc2Nyb2xsYmFyIHdpZHRoIGZvciB0aGUgYnJvd3NlciwgdG8gdXNlIGxhdGVyIGZvciBzaXppbmcgb3RoZXIgZWxlbWVudHMgXHJcbiAgaG1zLmluaXQoKTtcclxufSk7XHJcblxyXG52YXIgaG1zID0gXHJcbntcclxuICBpbml0OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcHJvamVjdHMuaW5pdChmdW5jdGlvbihwcm9qZWN0cykgeyBoZWFkZXJWaWV3LnJlbmRlcihwcm9qZWN0cyk7IH0pOyAgIFxyXG4gIH0sXHJcbiAgb3BlblByb2plY3Q6IGZ1bmN0aW9uKHByb2plY3RJRClcclxuICB7XHJcbiAgICBwcm9qZWN0cy5vcGVuUHJvamVjdChwcm9qZWN0SUQsIGZ1bmN0aW9uKHRyZWUpXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3QudHJlZSA9IHRyZWU7XHJcbiAgICAgIHNwcmVhZFNoZWV0LmRpc3BsYXkoKTsgICAgICBcclxuICAgIH0pO1xyXG4gICAgaWYodGhpcy52aWV3KSB7IHRoaXMudmlldy5kZXN0cm95KCk7IH1cclxuICAgIHRoaXMudmlldyA9IHNwcmVhZFNoZWV0VmlldzsgICAgICAgXHJcbiAgfSxcclxuICBzYXZlVG9EYXRhYmFzZTogZnVuY3Rpb24oKSB7IHByb2plY3Quc2F2ZVRvRGF0YWJhc2UoKTsgfSxcclxuICBzd2l0Y2hWaWV3OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgaWYodGhpcy52aWV3ID09PSBzcHJlYWRTaGVldFZpZXcpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMudmlldy5kZXN0cm95KCk7XHJcbiAgICAgIHRoaXMudmlldyA9IHRyZWVWaWV3O1xyXG4gICAgICAvL3RyZWUuZGlzcGxheSgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZih0aGlzLnZpZXcgPT09IHRyZWVWaWV3KVxyXG4gICAge1xyXG4gICAgICB0aGlzLnZpZXcuZGVzdHJveSgpO1xyXG4gICAgICB0aGlzLnZpZXcgPSBzcHJlYWRTaGVldFZpZXc7XHJcbiAgICAgIHNwcmVhZFNoZWV0LmRpc3BsYXkoKTsgICAgICBcclxuICAgIH1cclxuICB9LFxyXG4gIGNyZWF0ZU5ld1Byb2plY3Q6IGZ1bmN0aW9uKG5ld1Byb2plY3ROYW1lKVxyXG4gIHsgIFx0XHJcbiAgICBwcm9qZWN0cy5jcmVhdGVOZXdQcm9qZWN0KG5ld1Byb2plY3ROYW1lKTtcclxuICBcdFxyXG4gICAgdGhpcy52aWV3LmRlc3Ryb3koKTtcclxuICAgIHRoaXMudmlldyA9IHNwcmVhZFNoZWV0VmlldztcclxuICAgIHNwcmVhZFNoZWV0LmRpc3BsYXkoKTsgICAgICBcclxuICB9LFxyXG4gIG5leHRQcm9qZWN0SUQ6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdHMubmV4dFByb2plY3RJRCsrO1xyXG4gIH1cclxufTtcclxuXHJcbnZhciBzY3JvbGxCYXJXaWR0aDtcclxudmFyIGdldFNjcm9sbEJhcldpZHRoID0gZnVuY3Rpb24oKSBcclxue1xyXG4gIHZhciBkaXYsIHdpZHRoO1xyXG4gIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGRpdi5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT1cIndpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDotNTBweDt0b3A6LTUwcHg7b3ZlcmZsb3c6YXV0bztcIj48ZGl2IHN0eWxlPVwid2lkdGg6MXB4O2hlaWdodDoxMDBweDtcIj48L2Rpdj48L2Rpdj4nO1xyXG4gIGRpdiA9IGRpdi5maXJzdENoaWxkO1xyXG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICB3aWR0aCA9IGRpdi5vZmZzZXRXaWR0aCAtIGRpdi5jbGllbnRXaWR0aDtcclxuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XHJcbiAgcmV0dXJuIHdpZHRoO1xyXG59OyIsInZhciBzcHJlYWRTaGVldCA9IFxyXG57XHJcbiAgZGlzcGxheTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIHByb2plY3QuY2xlYW5zZURhdGEoKTsgICAgICAgICAgICAgICAgICAvL3JlcXVpcmVkIHRvIHJlbW92ZSBjaXJjdWxhciByZWZlcmVuY2VzIHRoYXQgb3RoZXIgdmlld3MgbWF5IGFkZFxyXG4gICAgc3ByZWFkU2hlZXRWaWV3LnJlbmRlcihwcm9qZWN0LnRyZWUpO1xyXG4gIH0sXHJcbiAgZmllbGRzOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuIHByb2plY3QuZmllbGRzKCk7XHJcbiAgfSxcclxuICB0cmVlOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuIHByb2plY3QudHJlZTtcclxuICB9LFxyXG4gIHVwZGF0ZUZpZWxkVmFsdWU6IGZ1bmN0aW9uKGZpZWxkTmFtZSwgbm9kZUlEKVxyXG4gIHtcclxuICAgIHZhciBub2RlID0gcHJvamVjdC5maW5kTm9kZShub2RlSUQpO1xyXG4gIFxyXG4gICAgaWYobm9kZSlcclxuICAgIHtcclxuICAgICAgaWYoIW5vZGUudmFsdWVzKSB7IG5vZGUudmFsdWVzID0ge307IH1cclxuICAgICAgbm9kZS52YWx1ZXNbZmllbGROYW1lXSA9IHNwcmVhZFNoZWV0Vmlldy5nZXRGaWVsZFZhbHVlKGZpZWxkTmFtZSwgbm9kZUlEKTsgICAgIFxyXG4gICAgfSAgXHJcbiAgXHJcbiAgICAvL1RPRE86IHNob3VsZCBwZXJmb3JtIHRoZSBhZ2dyZWdhdGlvbiBiYXNlZCBvbiB0aGUgZmllbGQgc2V0dGluZ3MgZm9yIGFnZ3JlZ2F0aW5nIHRoaXMgZmllbGRcclxuICAgIHByb2plY3QudHJlZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSBcclxuICAgIHtcclxuICAgICAgYWdncmVnYXRlX2FueShjaGlsZCwgZmllbGROYW1lKTtcclxuICAgIH0pOyAgICBcclxuICB9LFxyXG4gIHJhd1ZhbHVlOiBmdW5jdGlvbihmaWVsZE5hbWUsIG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgbm9kZSA9IHByb2plY3QuZmluZE5vZGUocGFyc2VJbnQobm9kZUlEKSk7XHJcbiAgICBcclxuICAgIGlmKG5vZGUudmFsdWVzICYmIG5vZGUudmFsdWVzW2ZpZWxkTmFtZV0pXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBub2RlLnZhbHVlc1tmaWVsZE5hbWVdO1xyXG4gICAgfSAgXHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiAnJztcclxuICAgIH0gICAgXHJcbiAgfSxcclxuICBmb3JtYXR0ZWRWYWx1ZTogZnVuY3Rpb24oZmllbGQsIG5vZGUpXHJcbiAge1xyXG4gICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbZmllbGQubmFtZV0pXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBGaWVsZC5mb3JtYXRWYWx1ZShmaWVsZCwgbm9kZS52YWx1ZXNbZmllbGQubmFtZV0pO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gJyc7XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgYWRkRmllbGQ6IGZ1bmN0aW9uKGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICBwcm9qZWN0LmFkZEZpZWxkKGZpZWxkTmFtZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuYWRkRmllbGQoZmllbGROYW1lKTtcclxuICB9LFxyXG4gIGhhc0NoaWxkcmVuOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiAhcHJvamVjdC5pc05vZGVDaGlsZGxlc3Mobm9kZSk7XHJcbiAgfSxcclxuICBjaGlsZHJlbkhpZGRlbjogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gcHJvamVjdC5pc05vZGVDb2xsYXBzZWQobm9kZSk7XHJcbiAgfSxcclxuICBtb3ZlTm9kZTogZnVuY3Rpb24obm9kZUlELCBuZXdQYXJlbnRJRClcclxuICB7XHJcbiAgICB2YXIgbmV3UGFyZW50Tm9kZSA9IHByb2plY3QuZmluZE5vZGUobmV3UGFyZW50SUQpO1xyXG4gICAgdmFyIG5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgXHJcbiAgICBzcHJlYWRTaGVldC5yZW1vdmVOb2RlKG5vZGUpO1xyXG4gICAgcHJvamVjdC5hZGROb2RlKG5vZGUsIG5ld1BhcmVudE5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXQuYWRkTm9kZShub2RlLCBuZXdQYXJlbnROb2RlKTsgICAgXHJcbiAgfSxcclxuICByZW1vdmVOb2RlOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBwYXJlbnROb2RlID0gcHJvamVjdC5maW5kUGFyZW50KG5vZGUuaWQpO1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZShwcm9qZWN0LmdldENoaWxkcmVuLCBzcHJlYWRTaGVldFZpZXcucmVtb3ZlTm9kZSwgbm9kZSk7XHJcbiAgICBwcm9qZWN0LnJlbW92ZU5vZGUobm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcucmVkcmF3Tm9kZUNvbnRlbnQocGFyZW50Tm9kZSk7ICAgICAgICAgIC8vaWYgdGhlIHBhcmVudCBpcyBjaGlsZGxlc3Mgbm93LCB0aGVuIGhpZGUgdGhlIG9sZCBwYXJlbnQncyBleHBhbmQvY29sbGFwc2UgaWNvbiAgICAgXHJcbiAgfSxcclxuICBkZWxldGVOb2RlOiBmdW5jdGlvbihub2RlSUQpXHJcbiAge1xyXG4gICAgdmFyIG5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgICBzcHJlYWRTaGVldC5yZW1vdmVOb2RlKG5vZGUpO1xyXG4gIH0sXHJcbiAgYWRkTm9kZTogZnVuY3Rpb24obm9kZSwgcGFyZW50Tm9kZSlcclxuICB7XHJcbiAgICBpZihwcm9qZWN0LmlzTm9kZUNvbGxhcHNlZChwYXJlbnROb2RlKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIHtcclxuICAgICAgc3ByZWFkU2hlZXQuZXhwYW5kTm9kZShwYXJlbnROb2RlKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgc3ByZWFkU2hlZXRWaWV3LnJlZHJhd05vZGVDb250ZW50KHBhcmVudE5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXRWaWV3Lmluc2VydE5vZGVBZnRlcihub2RlLCBwYXJlbnROb2RlKTsgICAgICAvL2FkZCB0aGUgbW92ZWQgbm9kZSBhbmQgaXRzIGRlc2NlbmRhbnRzIHRvIHRoZSBuZXcgcGFyZW50IGluIHRoZSB2aWV3ICBcclxuICB9LFxyXG4gIGNvcHlOb2RlOiBmdW5jdGlvbihub2RlSUQpXHJcbiAge1xyXG4gICAgdmFyIHNvdXJjZU5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgICB2YXIgbmV3Tm9kZSA9IHByb2plY3QuY2xvbmVOb2RlKHNvdXJjZU5vZGUpO1xyXG4gICAgcHJvamVjdC5pbnNlcnROb2RlKG5ld05vZGUsIHNvdXJjZU5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXRWaWV3Lmluc2VydE5vZGVCZWZvcmUobmV3Tm9kZSwgc291cmNlTm9kZSk7ICAgIFxyXG4gIH0sXHJcbiAgZXhwYW5kTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBwcm9qZWN0LmV4cGFuZE5vZGUobm9kZSk7XHJcbiAgICBzcHJlYWRTaGVldFZpZXcuZXhwYW5kTm9kZShub2RlKTtcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5yZWRyYXdOb2RlQ29udGVudChub2RlKTsgICAgICBcclxuICB9LFxyXG4gIGNvbGxhcHNlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlRGVzY2VuZGFudHMocHJvamVjdC5nZXRDaGlsZHJlbiwgc3ByZWFkU2hlZXRWaWV3LnJlbW92ZU5vZGUsIG5vZGUpOyAgICBcclxuICAgIHByb2plY3QuY29sbGFwc2VOb2RlKG5vZGUpO1xyXG4gICAgc3ByZWFkU2hlZXRWaWV3LnJlZHJhd05vZGVDb250ZW50KG5vZGUpOyAgICAgXHJcbiAgfSxcclxuICB0b2dnbGVOb2RlOiBmdW5jdGlvbihub2RlSUQpXHJcbiAge1xyXG4gICAgdmFyIG5vZGUgPSBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCk7XHJcbiAgICBcclxuICAgIGlmKHByb2plY3QuaXNOb2RlRXhwYW5kZWQobm9kZSkpXHJcbiAgICB7XHJcbiAgICAgIHNwcmVhZFNoZWV0LmNvbGxhcHNlTm9kZShub2RlKTsgICAgICAgICAgICAgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmKHByb2plY3QuaXNOb2RlQ29sbGFwc2VkKG5vZGUpKVxyXG4gICAge1xyXG4gICAgICBzcHJlYWRTaGVldC5leHBhbmROb2RlKG5vZGUpOyBcclxuICAgIH0gIFxyXG4gIH0sXHJcbiAgdXBkYXRlTm9kZU5hbWU6IGZ1bmN0aW9uKG5vZGVJRCwgbmV3TmFtZSlcclxuICB7XHJcbiAgICBwcm9qZWN0LmZpbmROb2RlKG5vZGVJRCkubmFtZSA9IG5ld05hbWU7ICAgIFxyXG4gIH0sXHJcbiAgdXBkYXRlTnVtYmVyRmllbGRGb3JtYXR0aW5nOiBmdW5jdGlvbihmaWVsZClcclxuICB7XHJcbiAgICBwcm9qZWN0LnRyYXZlcnNlKHByb2plY3QuZ2V0Q2hpbGRyZW4sIGZ1bmN0aW9uKG5vZGUpXHJcbiAgICB7ICAgICAgXHJcbiAgICAgIGlmKG5vZGUudmFsdWVzKVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gRmllbGQuZm9ybWF0VmFsdWUoZmllbGQsIE51bWJlcihub2RlLnZhbHVlc1tmaWVsZC5uYW1lXSkpOyAgICAgICAgICAgICAgICAvL2dldCB0aGUgdmFsdWUgZnJvbSB0aGUgbW9kZWxcclxuICAgICAgICBzcHJlYWRTaGVldFZpZXcudXBkYXRlRmllbGRWYWx1ZShmaWVsZC5uYW1lLCBub2RlLmlkLCB2YWx1ZSk7XHJcbiAgICAgIH0gICAgICBcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgZW5hYmxlRHJhZ2dpbmc6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgcHJvamVjdC50cmF2ZXJzZShwcm9qZWN0LmdldENoaWxkcmVuLCBzcHJlYWRTaGVldFZpZXcuZW5hYmxlRHJhZ2dpbmcsIG5vZGUpOyAgICBcclxuICB9ICBcclxufTsiLCJ2YXIgcHJvamVjdCA9XHJcbntcclxuICBzYXZlVG9EYXRhYmFzZTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQuYWpheCh7IHR5cGU6ICdQT1NUJywgdXJsOiAnL2FwaS90cmVlJywgZGF0YVR5cGU6ICdqc29uJywgZGF0YTogeyBqc29uOiBKU09OLnN0cmluZ2lmeSh0aGlzLnRyZWUpIH0gfSk7XHJcbiAgfSxcclxuICBmaWVsZHM6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gdGhpcy50cmVlLmZpZWxkcztcclxuICB9LFxyXG4gIGNsZWFuc2VEYXRhOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgdGhpcy50cmF2ZXJzZShwcm9qZWN0LmdldENoaWxkcmVuLCBmdW5jdGlvbihub2RlKVxyXG4gICAge1xyXG4gICAgICBpZighbm9kZS5jaGlsZHJlbikgeyBub2RlLmNoaWxkcmVuID0gW107IH1cclxuICAgICAgZGVsZXRlIG5vZGUucGFyZW50O1xyXG4gICAgfSk7ICAgIFxyXG4gIH0sXHJcbiAgYWRkRmllbGQ6IGZ1bmN0aW9uKGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICB0aGlzLnRyZWUuZmllbGRzLnB1c2gobmV3IEZpZWxkKGZpZWxkTmFtZSkpO1xyXG4gIH0sXHJcbiAgZ2V0RmllbGQ6IGZ1bmN0aW9uKGZpZWxkTmFtZSlcclxuICB7XHJcbiAgICBmb3IodmFyIGkgaW4gdGhpcy50cmVlLmZpZWxkcylcclxuICAgIHtcclxuICAgICAgdmFyIGZpZWxkID0gdGhpcy50cmVlLmZpZWxkc1tpXTtcclxuICAgICAgaWYoZmllbGQubmFtZSA9PT0gbmFtZSlcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiBmaWVsZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgcmVtb3ZlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICB2YXIgcGFyZW50Tm9kZSA9IHRoaXMuZmluZFBhcmVudChub2RlLmlkKTtcclxuICBcclxuICAgIGlmKHBhcmVudE5vZGUpXHJcbiAgICB7XHJcbiAgICAgIHBhcmVudE5vZGUuY2hpbGRyZW4uc3BsaWNlKHBhcmVudE5vZGUuY2hpbGRyZW4uaW5kZXhPZihub2RlKSwgMSk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIHRoaXMudHJlZS5jaGlsZHJlbi5zcGxpY2UodGhpcy50cmVlLmNoaWxkcmVuLmluZGV4T2Yobm9kZSksIDEpOyAgXHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgYWRkTm9kZTogZnVuY3Rpb24obm9kZSwgcGFyZW50Tm9kZSlcclxuICB7XHJcbiAgICBwYXJlbnROb2RlLmNoaWxkcmVuLnB1c2gobm9kZSk7ICAgICAgICAgLy9hZGQgdGhlIG1vdmVkIG5vZGUgdG8gaXQncyBuZXcgcGFyZW50IGluIHRoZSBtb2RlbFxyXG4gICAgcHJvamVjdC5zZXREZXB0aHMocGFyZW50Tm9kZSk7ICAgICAgICAgICAgIC8vc2V0IHRoZSBuZXcgZGVwdGggdmFsdWVzIGZvciB0aGUgbW92ZWQgbm9kZXMgICAgICAgXHJcbiAgfSxcclxuICBzZXREZXB0aHM6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkLCBpKVxyXG4gICAge1xyXG4gICAgICBjaGlsZC5kZXB0aCA9IG5vZGUuZGVwdGggKyAxO1xyXG4gICAgICBwcm9qZWN0LnNldERlcHRocyhjaGlsZCk7XHJcbiAgICB9KTtcclxuICB9LFxyXG4gIGluc2VydE5vZGU6IGZ1bmN0aW9uKG5vZGUsIHNvdXJjZU5vZGUpXHJcbiAge1xyXG4gICAgdmFyIHBhcmVudE5vZGUgPSB0aGlzLmZpbmRQYXJlbnQoc291cmNlTm9kZS5pZCk7XHJcbiAgICBpZihwYXJlbnROb2RlKVxyXG4gICAge1xyXG4gICAgICBwYXJlbnROb2RlLmNoaWxkcmVuLnNwbGljZShwYXJlbnROb2RlLmNoaWxkcmVuLmluZGV4T2Yoc291cmNlTm9kZSksIDAsIG5vZGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICB0aGlzLnRyZWUuY2hpbGRyZW4uc3BsaWNlKHRoaXMudHJlZS5jaGlsZHJlbi5pbmRleE9mKHNvdXJjZU5vZGUpLCAwLCBub2RlKTtcclxuICAgIH0gICAgIFxyXG4gIH0sXHJcbiAgY2xvbmVOb2RlOiBmdW5jdGlvbihzb3VyY2VOb2RlKVxyXG4gIHtcclxuICAgIHZhciBuZXdOb2RlID0gJC5leHRlbmQodHJ1ZSwge30sIHNvdXJjZU5vZGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2Nsb25lIHRoZSBzb3VyY2Ugbm9kZVxyXG4gICAgdGhpcy50cmF2ZXJzZSh0aGlzLmdldENoaWxkcmVuLCBmdW5jdGlvbihub2RlKSB7IG5vZGUuaWQgPSBwcm9qZWN0LnRyZWUubmV4dE5vZGVJRCsrOyB9LCBuZXdOb2RlKTsgIC8vYXNzaWduIHVuaXF1ZSBpZHMgdG8gZWFjaCBub2RlIGluIHRoZSBjbG9uZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICByZXR1cm4gbmV3Tm9kZTsgICAgIFxyXG4gIH0sXHJcbiAgZXhwYW5kTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBub2RlLmNoaWxkcmVuID0gbm9kZS5fY2hpbGRyZW47XHJcbiAgICBub2RlLl9jaGlsZHJlbiA9IFtdOyAgICBcclxuICB9LFxyXG4gIGNvbGxhcHNlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBub2RlLl9jaGlsZHJlbiA9IG5vZGUuY2hpbGRyZW47XHJcbiAgICBub2RlLmNoaWxkcmVuID0gW107ICAgIFxyXG4gIH0sXHJcbiAgaXNOb2RlQ2hpbGRsZXNzOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiAoIW5vZGUuY2hpbGRyZW4gfHwgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDApICYmICghbm9kZS5fY2hpbGRyZW4gfHwgbm9kZS5fY2hpbGRyZW4ubGVuZ3RoID09PSAwKTtcclxuICB9LFxyXG4gIGlzTm9kZUNvbGxhcHNlZDogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gbm9kZS5fY2hpbGRyZW4gJiYgbm9kZS5fY2hpbGRyZW4ubGVuZ3RoID4gMDtcclxuICB9LFxyXG4gIGlzTm9kZUV4cGFuZGVkOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHJldHVybiBub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMDtcclxuICB9LFxyXG4gIGZpbmROb2RlOiBmdW5jdGlvbihub2RlSUQsIHNlYXJjaE5vZGUpXHJcbiAge1xyXG4gICAgaWYoIXNlYXJjaE5vZGUpIHsgc2VhcmNoTm9kZSA9IHRoaXMudHJlZTsgfVxyXG4gICAgXHJcbiAgICBpZihzZWFyY2hOb2RlLmlkID09PSBub2RlSUQpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBzZWFyY2hOb2RlO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBmb3IodmFyIGkgaW4gc2VhcmNoTm9kZS5jaGlsZHJlbilcclxuICAgICAge1xyXG4gICAgICAgIHZhciBmb3VuZE5vZGUgPSB0aGlzLmZpbmROb2RlKG5vZGVJRCwgc2VhcmNoTm9kZS5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgaWYoZm91bmROb2RlKSB7IHJldHVybiBmb3VuZE5vZGU7IH1cclxuICAgICAgfVxyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIGZpbmRQYXJlbnQ6IGZ1bmN0aW9uKG5vZGVJRCwgc2VhcmNoTm9kZSwgcGFyZW50KVxyXG4gIHtcclxuICAgIGlmKCFzZWFyY2hOb2RlKSB7IHNlYXJjaE5vZGUgPSB0aGlzLnRyZWU7IH1cclxuICAgIFxyXG4gICAgaWYoc2VhcmNoTm9kZS5pZCA9PT0gbm9kZUlEKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gcGFyZW50O1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBmb3IodmFyIGkgaW4gc2VhcmNoTm9kZS5jaGlsZHJlbilcclxuICAgICAge1xyXG4gICAgICAgIHZhciBmb3VuZFBhcmVudCA9IHRoaXMuZmluZFBhcmVudChub2RlSUQsIHNlYXJjaE5vZGUuY2hpbGRyZW5baV0sIHNlYXJjaE5vZGUpO1xyXG4gICAgICAgIGlmKGZvdW5kUGFyZW50KSB7IHJldHVybiBmb3VuZFBhcmVudDsgfVxyXG4gICAgICB9XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgdHJhdmVyc2U6IGZ1bmN0aW9uKGNoaWxkcmVuRm4sIHZpc2l0Rm4sIHBhcmVudClcclxuICB7XHJcbiAgICBpZiAoIXBhcmVudCkgeyBwYXJlbnQgPSBwcm9qZWN0LnRyZWU7IH1cclxuICAgIHZpc2l0Rm4ocGFyZW50KTtcclxuICAgIFxyXG4gICAgdmFyIGNoaWxkcmVuID0gY2hpbGRyZW5GbihwYXJlbnQpO1xyXG4gICAgZm9yICh2YXIgaSBpbiBjaGlsZHJlbikgXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3QudHJhdmVyc2UoY2hpbGRyZW5GbiwgdmlzaXRGbiwgY2hpbGRyZW5baV0pO1xyXG4gICAgfSAgICBcclxuICB9LFxyXG4gIHRyYXZlcnNlRGVzY2VuZGFudHM6IGZ1bmN0aW9uKGNoaWxkcmVuRm4sIHZpc2l0Rm4sIHBhcmVudClcclxuICB7XHJcbiAgICBpZighcGFyZW50KSB7IHBhcmVudCA9IHByb2plY3QudHJlZTsgfVxyXG4gICAgcGFyZW50LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHsgcHJvamVjdC50cmF2ZXJzZShjaGlsZHJlbkZuLCB2aXNpdEZuLCBjaGlsZCk7IH0pOyAgXHJcbiAgfSxcclxuICBnZXRDaGlsZHJlbjogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICByZXR1cm4gbm9kZS5jaGlsZHJlbiAmJiBub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDAgPyBub2RlLmNoaWxkcmVuIDogbnVsbDsgICAgXHJcbiAgfSAgIFxyXG59OyIsInZhciBwcm9qZWN0cyA9XHJcbntcclxuICBpbml0OiBmdW5jdGlvbihmaW5pc2hGbilcclxuICB7ICBcdFxyXG4gICAgJC5hamF4KHsgdHlwZTogJ0dFVCcsIHVybDogJ2FwaS9wcm9qZWN0cyd9KS5kb25lKGZ1bmN0aW9uKGRhdGEpICAgLy9yZWFkIHByb2plY3RzIGZyb20gdGhlIHNlcnZlclxyXG4gICAgeyBcclxuICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgZmluaXNoRm4oZGF0YS5wcm9qZWN0cyk7XHJcbiAgICB9KTsgICAgIFxyXG4gIH0sXHJcbiAgY3JlYXRlTmV3UHJvamVjdDogZnVuY3Rpb24obmV3UHJvamVjdE5hbWUpXHJcbiAge1xyXG4gIFx0JC5hamF4KHsgdHlwZTogJ1BPU1QnLCB1cmw6ICcvYXBpL2FkZFByb2plY3Q/cHJvamVjdE5hbWU9JyArIG5ld1Byb2plY3ROYW1lIH0pOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBkb2N1bWVudCBpbiB0aGUgZGF0YWJhc2VcclxuICBcdFxyXG4gICAgcHJvamVjdC50cmVlID0geyBcInByb2plY3RJRFwiOiBwcm9qZWN0Lm5leHRQcm9qZWN0SUQsIFwicHJvamVjdE5hbWVcIjogbmV3UHJvamVjdE5hbWUsIFwibmFtZVwiOiBuZXdQcm9qZWN0TmFtZSwgXCJ2ZXJzaW9uXCI6IDEsIFwibmV4dE5vZGVJRFwiOiAyLCBcImRlcHRoXCI6IDAsIFwiZmllbGRzXCI6IFtdLCBcImNoaWxkcmVuXCI6IFt7IFwiaWRcIjogMSwgXCJuYW1lXCI6IG5ld1Byb2plY3ROYW1lLCBcImRlcHRoXCI6IDEsIFwiY2hpbGRyZW5cIjogW10gfV0gfTtcclxuICBcdHByb2plY3Quc2F2ZVRvRGF0YWJhc2UoKTsgIFxyXG4gIH0sXHJcbiAgb3BlblByb2plY3Q6IGZ1bmN0aW9uKHByb2plY3RJRCwgZmluaXNoRm4pXHJcbiAge1xyXG4gICAgJC5hamF4KHsgdHlwZTogJ0dFVCcsIHVybDogJ2FwaS90cmVlP3Byb2plY3RJRD0nICsgcHJvamVjdElEIH0pLmRvbmUoZnVuY3Rpb24oZGF0YSkgICAgICAgICAgICAgICAvL3JlYWQgdHJlZSBmb3IgdGhlIHNlbGVjdGVkIHByb2plY3QgZnJvbSB0aGUgZGF0YWJhc2VcclxuICAgIHtcclxuICAgICAgZmluaXNoRm4oZGF0YSk7XHJcbiAgICB9KTsgICAgIFxyXG4gIH0gXHJcbn07IiwidmFyIGhlYWRlclZpZXcgPSBcclxue1xyXG4gIHJlbmRlcjogZnVuY3Rpb24ocHJvamVjdHMpXHJcbiAge1xyXG4gICAgdmFyIG1hcmt1cCA9ICc8c2VsZWN0IGlkPVwicHJvamVjdFNlbGVjdG9yXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4nICtcclxuICAgICc8b3B0aW9uIGlkPVwic2VsZWN0UHJvamVjdE9wdGlvblwiIHZhbHVlPVwiMFwiPlNlbGVjdCBQcm9qZWN0Li4uPC9vcHRpb24+JztcclxuICBcclxuICAgIHByb2plY3RzLmZvckVhY2goZnVuY3Rpb24ocHJvamVjdClcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIHByb2plY3QuaWQgKyAnXCI+JyArIHByb2plY3QubmFtZSArICc8L29wdGlvbj4nO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBtYXJrdXAgKz0gJzxvcHRpb24gaWQ9XCJuZXdQcm9qZWN0T3B0aW9uXCIgdmFsdWU9XCItMVwiPkNyZWF0ZSBOZXcgUHJvamVjdC4uLjwvb3B0aW9uPjwvc2VsZWN0PidcclxuICAgICsgJzxpbnB1dCBpZD1cImVkaXROZXdQcm9qZWN0TmFtZUlucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj48L2lucHV0PidcclxuICAgICsgJzxhIGhyZWY9XCIjXCIgaWQ9XCJzYXZlLWRhdGFiYXNlLWJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCI+U2F2ZSB0byBEYXRhYmFzZTwvYT4nXHJcbiAgICArICc8YSBocmVmPVwiI1wiIGlkPVwic3dpdGNoVmlld0J1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCI+U3dpdGNoIFZpZXc8L2E+JztcclxuICAgIC8vbWFya3VwICs9ICc8YSBocmVmPVwiI1wiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgaWQ9XCJzYXZlLWZpbGUtYnV0dG9uXCIgb25jbGljaz1cInNhdmVMb2NhbGx5KClcIj5TYXZlIGFzIEZpbGU8L2E+JzsgICAgXHJcbiAgICBcclxuICAgICQoJyNoZWFkZXInKS5odG1sKG1hcmt1cCk7XHJcbiAgICBcclxuICAgIC8vZXZlbnQgaGFuZGxlcnNcclxuICAgICQoJyNwcm9qZWN0U2VsZWN0b3InKS5jaGFuZ2UoZnVuY3Rpb24oKSB7IGhlYWRlclZpZXcuc2VsZWN0UHJvamVjdCgkKHRoaXMpKTsgfSk7XHJcbiAgICAkKCcjc2F2ZS1kYXRhYmFzZS1idXR0b24nKS5jbGljayhmdW5jdGlvbigpIHsgaG1zLnNhdmVUb0RhdGFiYXNlKCk7IH0pO1xyXG4gICAgJCgnI3N3aXRjaFZpZXdCdXR0b24nKS5jbGljayhmdW5jdGlvbigpIHsgaG1zLnN3aXRjaFZpZXcoKTsgfSk7XHJcbiAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS5rZXl1cChmdW5jdGlvbihlKSB7IGhlYWRlclZpZXcuY3JlYXRlTmV3UHJvamVjdChlKTsgfSk7XHJcbiAgfSxcclxuICBzZWxlY3RQcm9qZWN0OiBmdW5jdGlvbihwcm9qZWN0U2VsZWN0b3IpXHJcbiAge1xyXG4gICAgaWYocHJvamVjdFNlbGVjdG9yLmZpbmQoXCI6c2VsZWN0ZWRcIikuYXR0cignaWQnKSA9PT0gXCJuZXdQcm9qZWN0T3B0aW9uXCIpXHJcbiAgICB7XHJcbiAgICAgICQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLnZhbChcIlR5cGUgTmV3IFByb2plY3QgTmFtZSBhbmQgUHJlc3MgRW50ZXIgdG8gQ3JlYXRlXCIpO1xyXG4gICAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS5zaG93KCkuZm9jdXMoKS5zZWxlY3QoKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgJCgnI3NlbGVjdFByb2plY3RPcHRpb24nKS5yZW1vdmUoKTsgICAgIC8vcmVtb3ZlIHRoZSBzZWxlY3QgcHJvamVjdCBvcHRpb24sIG9uY2UgdGhlIHVzZXIgc2VsZWN0cyBhIHByb2plY3QgICAgICBcclxuICAgICAgaG1zLm9wZW5Qcm9qZWN0KHByb2plY3RTZWxlY3Rvci52YWwoKSk7XHJcbiAgICB9ICAgICAgIFxyXG4gIH0sXHJcbiAgY3JlYXRlTmV3UHJvamVjdDogZnVuY3Rpb24oZSlcclxuICB7XHJcbiAgICBpZihlLmtleUNvZGUgPT0gRU5URVJfS0VZKVxyXG4gICAge1xyXG4gICAgXHQkKCcjc2VsZWN0UHJvamVjdE9wdGlvbicpLnJlbW92ZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIHRoZSBzZWxlY3QgcHJvamVjdCBvcHRpb24sIG9uY2UgdGhlIHVzZXIgc2VsZWN0cyBhIHByb2plY3QgXHJcbiAgICBcdFxyXG4gICAgXHR2YXIgbmV3UHJvamVjdE5hbWUgPSAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS52YWwoKTtcclxuICAgIFx0JCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0JykuaGlkZSgpO1xyXG4gICAgXHRcclxuICAgIFx0Ly9hZGQgYW4gb3B0aW9uIGZvciB0aGUgbmV3IHByb2plY3QgdG8gdGhlIHByb2plY3RzIGxpc3QsIHNlbGVjdCB0aGF0IG9wdGlvblxyXG4gICAgXHR2YXIgbmV3UHJvamVjdElEID0gaG1zLm5leHRQcm9qZWN0SUQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IG5lZWQgdG8gZ2V0IHRoaXMgZnJvbSB0aGUgZGF0YWJhc2UgdG8gaW5zdXJlIHdlIGdldCB0aGUgY29ycmVjdCBpZFxyXG4gICAgXHR2YXIgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIFx0b3B0aW9uLnRleHQgPSBuZXdQcm9qZWN0TmFtZTtcclxuICAgIFx0b3B0aW9uLnZhbHVlID0gbmV3UHJvamVjdElELnRvU3RyaW5nKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgXHQkKG9wdGlvbikuaW5zZXJ0QmVmb3JlKCcjcHJvamVjdFNlbGVjdG9yIG9wdGlvbjpudGgtY2hpbGQoJyArICQoJyNwcm9qZWN0U2VsZWN0b3InKS5sZW5ndGggKyAnKScpO1xyXG4gICAgXHQkKCcjcHJvamVjdFNlbGVjdG9yJykudmFsKG5ld1Byb2plY3RJRCk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgIGhtcy5jcmVhdGVOZXdQcm9qZWN0KG5ld1Byb2plY3ROYW1lKTtcclxuICAgIH0gICAgXHJcbiAgfVxyXG59OyIsInZhciBwcm9qZWN0QWN0aW9uID1cclxue1xyXG4gIGluaXQ6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICAkKCcjcHJvamVjdC1hY3Rpb24tY29udGFpbmVyJykuaHRtbChwcm9qZWN0QWN0aW9uLm1hcmt1cCgpKTtcclxuICAgIFxyXG4gICAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLmtleXVwKGZ1bmN0aW9uKGUpXHJcbiAgICB7XHJcbiAgICAgIGlmKGUua2V5Q29kZSA9PSBFTlRFUl9LRVkpXHJcbiAgICAgIHtcclxuICAgICAgICBwcm9qZWN0QWN0aW9uLmVudGVyUHJlc3NlZCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTsgXHJcbiAgICBcclxuICAgICQoXCIjcHJvamVjdEFjdGlvblNlbGVjdG9yXCIpLmNoYW5nZShwcm9qZWN0QWN0aW9uLmhhbmRsZSk7XHJcbiAgfSxcclxuICBoYW5kbGU6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgXHRpZigkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCkgPT0gJ2FkZEZpZWxkJylcclxuICBcdHtcclxuICAgICAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnZhbChcIlR5cGUgTmV3IEZpZWxkIE5hbWUgYW5kIFByZXNzIEVudGVyIHRvIENyZWF0ZVwiKTtcclxuICBcdFx0JCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnNob3coKS5mb2N1cygpLnNlbGVjdCgpO1xyXG4gIFx0fVx0XHJcbiAgfSxcclxuICBlbnRlclByZXNzZWQ6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgXHRpZigkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCkgPT0gJ2FkZEZpZWxkJylcclxuICBcdHtcclxuICAgICAgc3ByZWFkU2hlZXQuYWRkRmllbGQoJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnZhbCgpKTtcdFxyXG4gICAgICAkKCcjcHJvamVjdEFjdGlvbklucHV0JykuaGlkZSgpO1xyXG4gICAgICAkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCdibGFuaycpO1xyXG4gIFx0fVxyXG4gIH0sXHJcbiAgbWFya3VwOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgcmV0dXJuICc8dGFibGU+PHRyIGlkPVwiaGVhZGVyUm93XCI+PHRyPjxkaXYgaWQ9XCJwcm9qZWN0LXNlbGVjdC1jb250YWluZXJcIj4nXHJcbiAgICArICc8c2VsZWN0IGlkPVwicHJvamVjdEFjdGlvblNlbGVjdG9yXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj4nXHJcbiAgICArICc8b3B0aW9uIHZhbHVlPVwiYmxhbmtcIj48L29wdGlvbj4nXHJcbiAgICArICc8b3B0aW9uIHZhbHVlPVwiYWRkRmllbGRcIj5BZGQgRmllbGQ8L29wdGlvbj4nXHJcbiAgICArICc8L3NlbGVjdD4nXHJcbiAgICArICc8aW5wdXQgaWQ9XCJwcm9qZWN0QWN0aW9uSW5wdXRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPjwvaW5wdXQ+J1xyXG4gICAgKyAnPC9kaXY+PC90cj48dGFibGU+JzsgXHJcbiAgfVxyXG59OyIsInZhciBzcHJlYWRTaGVldEtleUhhbmRsZXIgPVxyXG57XHJcbiAgY2hlY2tLZXk6IGZ1bmN0aW9uKGUpIFxyXG4gIHtcclxuICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuICBcclxuICAgIGlmIChlLmtleUNvZGUgPT0gS0VZX1VQX0FSUk9XKSBcclxuICAgIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB2YXIgcHJldlJvdyA9ICQoc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmZpbmRBbmNlc3Rvcihkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndHInKSkucHJldigpWzBdO1xyXG4gICAgICBcclxuICAgICAgaWYocHJldlJvdykgeyAkKCcjJyArIHNwcmVhZFNoZWV0S2V5SGFuZGxlci5nZXROZXh0RWxlbWVudElEKHByZXZSb3cpKS5mb2N1cygpOyB9ICAgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChlLmtleUNvZGUgPT0gS0VZX0RPV05fQVJST1cpIFxyXG4gICAge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHZhciBuZXh0Um93ID0gJChzcHJlYWRTaGVldEtleUhhbmRsZXIuZmluZEFuY2VzdG9yKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0cicpKS5uZXh0KClbMF07XHJcbiAgICAgIFxyXG4gICAgICBpZihuZXh0Um93KSB7ICQoJyMnICsgc3ByZWFkU2hlZXRLZXlIYW5kbGVyLmdldE5leHRFbGVtZW50SUQobmV4dFJvdykpLmZvY3VzKCk7IH0gICAgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChlLmtleUNvZGUgPT0gS0VZX1JJR0hUX0FSUk9XKSBcclxuICAgIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0S2V5SGFuZGxlci5maW5kQW5jZXN0b3IoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RkJykpLm5leHQoKS5maW5kKCdpbnB1dCcpLmZvY3VzKCk7ICBcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfTEVGVF9BUlJPVykgXHJcbiAgICB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgJChzcHJlYWRTaGVldEtleUhhbmRsZXIuZmluZEFuY2VzdG9yKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0ZCcpKS5wcmV2KCkuZmluZCgnaW5wdXQnKS5mb2N1cygpOyAgXHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgZ2V0TmV4dEVsZW1lbnRJRDogZnVuY3Rpb24obmV3Um93KVxyXG4gIHtcclxuICAgIHZhciBpZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuaWQ7ICBcclxuICAgIGlmKGlkLmluZGV4T2YoJ25vZGVJbnB1dCcpID4gLTEpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiAnbm9kZUlucHV0JyArIG5ld1Jvdy5pZC5yZXBsYWNlKCdyb3dpZCcsJycpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICB2YXIgY2xhc3NlcyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcbiAgXHJcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGMgPSBjbGFzc2VzW2ldO1xyXG4gIFxyXG4gICAgICAgIGlmKGMuaW5kZXhPZignZmllbGRJbnB1dCcpID4gLTEgJiYgYyAhPSAnZmllbGRJbnB1dCcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGMucmVwbGFjZSgnZmllbGRJbnB1dCcsICcnKTtcclxuICAgICAgICAgIHJldHVybiBmaWVsZE5hbWUgKyBuZXdSb3cuaWQucmVwbGFjZSgnZGF0YXJvd2lkJywnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICAgXHJcbiAgfSxcclxuICBmaW5kQW5jZXN0b3I6IGZ1bmN0aW9uKGVsLCB0YWdOYW1lKSBcclxuICB7XHJcbiAgICB0YWdOYW1lID0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gIFxyXG4gICAgd2hpbGUgKGVsICYmIGVsLnBhcmVudE5vZGUpIFxyXG4gICAge1xyXG4gICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XHJcbiAgICAgIGlmIChlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnTmFtZSkgeyByZXR1cm4gZWw7IH1cclxuICAgIH1cclxuICB9XHJcbn07IiwiLy9UT0RPOiBhZGQgY29tbWVudHNcclxudmFyIHNwcmVhZFNoZWV0VmlldyA9IFxyXG57XHJcbiAgcmVuZGVyOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJChkb2N1bWVudCkub24oXCJrZXlkb3duXCIsIHNwcmVhZFNoZWV0S2V5SGFuZGxlci5jaGVja0tleSk7XHJcbiAgICBcclxuICAgICQoJ2JvZHknKS5hcHBlbmQodGhpcy5zcHJlYWRTaGVldE1hcmt1cCgpKTtcclxuICBcclxuICAgIHByb2plY3RBY3Rpb24uaW5pdCgpO1xyXG4gICAgdGhpcy5yZW5kZXJGaWVsZHNSb3coKTtcclxuICAgIHRoaXMucmVuZGVyRGF0YVRhYmxlKCk7XHJcbiAgICB0aGlzLnJlbmRlck5vZGVDb2x1bW4oKTtcclxuICB9LFxyXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uKCkgXHJcbiAgeyBcclxuICAgICQoJyNzcHJlYWRTaGVldFZpZXcnKS5yZW1vdmUoKTtcclxuICAgICQoZG9jdW1lbnQpLm9mZihcImtleWRvd25cIik7IFxyXG4gIH0sXHJcbiAgc3ByZWFkU2hlZXRNYXJrdXA6IGZ1bmN0aW9uKClcclxuICB7XHJcbiAgICByZXR1cm4gJzxkaXYgaWQ9XCJzcHJlYWRTaGVldFZpZXdcIj4nICtcclxuICAgICAgJzxkaXYgaWQ9XCJwcm9qZWN0LWFjdGlvbi1jb250YWluZXJcIj48L2Rpdj4nICtcclxuICAgICAgJzxkaXYgaWQ9XCJmaWVsZHMtaGVhZGVyLXJvd1wiPjwvZGl2PicgK1xyXG4gICAgICAnPGRpdiBpZD1cInJlZGlwcy1kcmFnXCI+PC9kaXY+JyArXHJcbiAgICAgICc8ZGl2IGlkPVwiZGF0YS1jb250YWluZXJcIj48L2Rpdj4nICtcclxuICAgICc8L2Rpdj4nO1xyXG4gIH0sXHJcbiAgcmVuZGVyRmllbGRzUm93OiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI2ZpZWxkcy1oZWFkZXItcm93JykuaHRtbCgnPHRhYmxlIGlkPVwiZmllbGRIZWFkZXJUYWJsZVwiPjx0ciBpZD1cImZpZWxkSGVhZGVyUm93XCI+PC90cj48L3RhYmxlPicpO1xyXG4gIFxyXG4gICAgc3ByZWFkU2hlZXQuZmllbGRzKCkuZm9yRWFjaChmdW5jdGlvbihmaWVsZClcclxuICAgIHsgXHJcbiAgICAgICQoJyNmaWVsZEhlYWRlclJvdycpLmFwcGVuZChzcHJlYWRTaGVldFZpZXcuZmllbGRIZWFkZXIoZmllbGQubmFtZSkpO1xyXG4gICAgICAkKCcjZmllbGRNZW51QnV0dG9uJyArIGZpZWxkLm5hbWUpLmNsaWNrKGZ1bmN0aW9uKGUpIHsgc3ByZWFkU2hlZXRWaWV3LnNob3dGaWVsZE1lbnUoZSwgZmllbGQubmFtZSk7IH0pO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgICAkKCcjZmllbGRzLWhlYWRlci1yb3cnKS5jc3MoJ3JpZ2h0Jywgc2Nyb2xsQmFyV2lkdGggKyAncHgnKTsgICAvL3Nob3J0ZW4gdGhlIHdpZHRoIG9mIHRoZSBmaWVsZHNSb3cgYnkgdGhlIHdpZHRoIG9mIHRoZSBzY3JvbGwgYmFyICAgXHJcbiAgfSxcclxuICBmaWVsZEhlYWRlcjogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgIHJldHVybiAnPHRkIGNsYXNzPVwiZmllbGRIZWFkZXJDZWxsXCI+PGRpdiBjbGFzcz1cImZpZWxkSGVhZGVyQ29udGFpbmVyXCI+J1xyXG4gICAgICArICc8ZGl2IGNsYXNzPVwibW92ZUNvbEdyaXBcIj48L2Rpdj4nXHJcbiAgICAgICsgJzxkaXYgY2xhc3M9XCJmaWVsZE5hbWVJbnB1dENvbnRhaW5lclwiPjx0ZXh0YXJlYSBpZD1cImNvbEhlYWRlcklucHV0JyArIGZpZWxkTmFtZSArICdcIiBjbGFzcz1cImZpZWxkTmFtZUlucHV0XCI+JyArIGZpZWxkTmFtZSArICc8L3RleHRhcmVhPjwvZGl2PidcclxuICAgICAgKyAnPGRpdiBjbGFzcz1cImZpZWxkSGVhZGVyQnV0dG9uXCI+J1xyXG4gICAgICArICc8aW1nIGlkPVwiZmllbGRNZW51QnV0dG9uJyArIGZpZWxkTmFtZSArICdcIiBzcmM9XCJpbWFnZXMvZG93bi1hcnJvdy5wbmdcIi8+J1xyXG4gICAgICArICc8L2Rpdj4nXHJcbiAgICAgICsgJzxkaXYgaWQ9XCJncmlwJyArIGZpZWxkTmFtZSArICdcIiBjbGFzcz1cInJlc2l6ZUNvbEdyaXBcIiBvbm1vdXNlZG93bj1cInN0YXJ0UmVzaXplKGV2ZW50LCB0aGlzKVwiPjwvZGl2PidcclxuICAgICAgKyAnPC9kaXY+PC90ZD4nO1xyXG4gIH0sXHJcbiAgc2hvd0ZpZWxkTWVudTogZnVuY3Rpb24oZSwgZmllbGROYW1lKVxyXG4gIHtcclxuICAgIGlmKCQoJyNmaWVsZE1lbnUnKS5sZW5ndGggPT09IDApXHJcbiAgICB7XHJcbiAgICAgICQoZ2V0RmllbGRNZW51TWFya3VwKGZpZWxkTmFtZSwgZS5jbGllbnRYLCBlLmNsaWVudFksIHNwcmVhZFNoZWV0LmZpZWxkcygpKSkuYXBwZW5kVG8oJ2JvZHknKTtcclxuICAgICAgJCgnI2ZpZWxkTWVudScpLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7ICQoJyNmaWVsZE1lbnUnKS5yZW1vdmUoKTsgfSk7XHJcbiAgICB9ICAgIFxyXG4gIH0sXHJcbiAgcmVuZGVyRGF0YVRhYmxlOiBmdW5jdGlvbigpXHJcbiAgeyAgICBcclxuICAgICQoJyNkYXRhLWNvbnRhaW5lcicpLmFwcGVuZCgnPHRhYmxlIGlkPVwiZGF0YVRhYmxlXCI+PC90YWJsZT4nKTtcclxuICAgIHNwcmVhZFNoZWV0LnRyZWUoKS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSBcclxuICAgIHsgXHJcbiAgICAgICQoJyNkYXRhVGFibGUnKS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmRhdGFSb3dzTWFya3VwKGNoaWxkKSk7IFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbChmdW5jdGlvbigpIFxyXG4gICAge1xyXG4gICAgICAkKCcjcmVkaXBzLWRyYWcnKS5zY3JvbGxUb3AoJCgnI2RhdGEtY29udGFpbmVyJykuc2Nyb2xsVG9wKCkpO1xyXG4gICAgICAkKCcjZmllbGRzLWhlYWRlci1yb3cnKS5zY3JvbGxMZWZ0KCQoJyNkYXRhLWNvbnRhaW5lcicpLnNjcm9sbExlZnQoKSk7ICAgICAgXHJcbiAgICB9KTsgICAgIFxyXG4gIH0sXHJcbiAgZGF0YVJvd3NNYXJrdXA6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgdmFyIG1hcmt1cCA9ICc8dHIgaWQ9XCJkYXRhcm93aWQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cImRhdGFSb3dcIj4nO1xyXG4gICAgXHJcbiAgICBzcHJlYWRTaGVldC5maWVsZHMoKS5mb3JFYWNoKGZ1bmN0aW9uKGZpZWxkKSBcclxuICAgIHsgIFxyXG4gICAgICBtYXJrdXAgKz0gJzx0ZCBjbGFzcz1cImNlbGxcIj4nXHJcbiAgICAgICAgICAgICArICc8aW5wdXQgY2xhc3M9XCJmaWVsZElucHV0IGZpZWxkSW5wdXQnICsgZmllbGQubmFtZSArICdcIiB0eXBlPVwidGV4dFwiIGlkPVwiJyArIGZpZWxkLm5hbWUgKyBub2RlLmlkICsgJ1wiIHZhbHVlPVwiJyArIHNwcmVhZFNoZWV0LmZvcm1hdHRlZFZhbHVlKGZpZWxkLCBub2RlKSArICdcIiAnXHJcbiAgICAgICAgICAgICArICdvbmlucHV0PVwic3ByZWFkU2hlZXQudXBkYXRlRmllbGRWYWx1ZShcXCcnICsgZmllbGQubmFtZSArICdcXCcsJyArIG5vZGUuaWQgKyAnKVwiIG9uZm9jdXM9XCIkKHRoaXMpLnZhbChzcHJlYWRTaGVldC5yYXdWYWx1ZShcXCcnICsgZmllbGQubmFtZSArICdcXCcsJyArIG5vZGUuaWQgKyAnKSlcIj4nXHJcbiAgICAgICAgICAgICArICc8L3RkPic7XHJcbiAgICB9KTtcclxuXHJcbiAgICBub2RlLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHsgbWFya3VwICs9IHNwcmVhZFNoZWV0Vmlldy5kYXRhUm93c01hcmt1cChjaGlsZCk7IH0pOyAgIFxyXG5cclxuICAgIHJldHVybiBtYXJrdXAgKyAnPC90cj4nO1xyXG4gIH0sXHJcbiAgcmVuZGVyRGF0YUNlbGw6IGZ1bmN0aW9uKHJvdywgZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG4gIHtcclxuICAgICQocm93KS5hcHBlbmQoc3ByZWFkU2hlZXRWaWV3LmZpZWxkQ2VsbChmaWVsZE5hbWUsIG5vZGVJRCwgdmFsdWUpKTtcclxuICAgICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS5vbignaW5wdXQnLCBmdW5jdGlvbigpIHsgc3ByZWFkU2hlZXQudXBkYXRlRmllbGRWYWx1ZShmaWVsZE5hbWUsIG5vZGVJRCk7IH0pO1xyXG4gICAgJCgnIycgKyBmaWVsZE5hbWUgKyBub2RlSUQpLmZvY3VzKGZ1bmN0aW9uKCkgeyAkKHRoaXMpLnZhbChzcHJlYWRTaGVldC5yYXdWYWx1ZShmaWVsZE5hbWUsIG5vZGVJRCkpOyB9KTsgICAgIFxyXG4gIH0sXHJcbiAgZmllbGRDZWxsOiBmdW5jdGlvbihmaWVsZE5hbWUsIG5vZGVJRCwgdmFsdWUpXHJcbiAge1xyXG4gICAgcmV0dXJuICc8dGQgY2xhc3M9XCJjZWxsXCI+PGlucHV0IGNsYXNzPVwiZmllbGRJbnB1dCBmaWVsZElucHV0JyArIGZpZWxkTmFtZSArICdcIiB0eXBlPVwidGV4dFwiIGlkPVwiJyArIGZpZWxkTmFtZSArIG5vZGVJRCArICdcIiB2YWx1ZT1cIicgKyB2YWx1ZSArICdcIj48L3RkPic7XHJcbiAgfSxcclxuICBub2RlUm93TWFya3VwOiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBtYXJrdXAgPSAnPHRyIGlkPVwicm93aWQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cIm5vZGVSb3dcIj48dGQgY2xhc3M9XCJyZWRpcHMtcm93aGFuZGxlciBjZWxsXCI+PGRpdiBpZD1cIm5vZGVDb250ZW50JyArIG5vZGUuaWQgKyAnXCIgY2xhc3M9XCJub2RlLWNvbnRhaW5lclwiPic7XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcuZGVsZXRlQnV0dG9uKG5vZGUuaWQpICsgc3ByZWFkU2hlZXRWaWV3LmNvcHlCdXR0b24obm9kZS5pZCkgKyBzcHJlYWRTaGVldFZpZXcuZHJhZ0hhbmRsZTtcclxuICAgIG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcubm9kZUNvbnRlbnQobm9kZSk7ICAgIFxyXG4gIFxyXG4gICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7IG1hcmt1cCArPSBzcHJlYWRTaGVldFZpZXcubm9kZVJvd01hcmt1cChjaGlsZCk7IH0pO1xyXG4gIFxyXG4gICAgcmV0dXJuIG1hcmt1cCArICc8L2Rpdj48L3RkPjwvdHI+JztcclxuICB9LFxyXG4gIG5vZGVDb250ZW50OiBmdW5jdGlvbihub2RlKVxyXG4gIHtcclxuICAgIHZhciBpY29uTWFya3VwO1xyXG4gICAgdmFyIGRlcHRoQWRqdXN0bWVudCA9IChub2RlLmRlcHRoLTEpICogMTA7XHJcbiAgICB2YXIgd2lkdGhBZGp1c3RtZW50ID0gZGVwdGhBZGp1c3RtZW50OyAgIFxyXG4gIFxyXG4gICAgaWYoc3ByZWFkU2hlZXQuaGFzQ2hpbGRyZW4obm9kZSkpXHJcbiAgICB7XHJcbiAgICAgIGlmKHNwcmVhZFNoZWV0LmNoaWxkcmVuSGlkZGVuKG5vZGUpKSB7IGljb25NYXJrdXAgPSAnPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L3NwYW4+JzsgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpY29uTWFya3VwID0gJzxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd25cIj48L3NwYW4+JzsgfVxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBpY29uTWFya3VwID0gJzxzcGFuPjwvc3Bhbj4nO1xyXG4gICAgICBkZXB0aEFkanVzdG1lbnQgKz0gMTI7XHJcbiAgICAgIHdpZHRoQWRqdXN0bWVudCAtPSAxMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHNwcmVhZFNoZWV0Vmlldy5leHBhbmRJY29uKG5vZGUuaWQsIGRlcHRoQWRqdXN0bWVudCwgaWNvbk1hcmt1cCkgKyBzcHJlYWRTaGVldFZpZXcubm9kZUlucHV0KG5vZGUsIERFRkFVTFRfTk9ERV9JTlBVVF9XSURUSC13aWR0aEFkanVzdG1lbnQpOyAgICAgXHJcbiAgfSxcclxuICByZW5kZXJOb2RlQ29sdW1uOiBmdW5jdGlvbigpXHJcbiAge1xyXG4gICAgJCgnI3JlZGlwcy1kcmFnJykuaHRtbCgnPHRhYmxlIGlkPVwidHJlZVRhYmxlXCI+PC90YWJsZT4nKTtcclxuICAgIHNwcmVhZFNoZWV0LnRyZWUoKS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSBcclxuICAgIHsgXHJcbiAgICAgICAkKCcjdHJlZVRhYmxlJykuYXBwZW5kKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKGNoaWxkKSk7XHJcbiAgICB9KTtcclxuICAgICQoJyNyZWRpcHMtZHJhZycpLmNzcygnYm90dG9tJywgc2Nyb2xsQmFyV2lkdGggKyAncHgnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zaG9ydGVuIHRoZSBoZWlnaHQgb2YgdGhlIHRyZWUgc2VjdGlvbiBieSB0aGUgd2lkdGggb2YgdGhlIHNjcm9sbCBiYXJcclxuICBcdHJlZGlwcy5pbml0KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pbml0aWFsaXplIHRyZWUgZHJhZy9kcm9wIGxpYnJhcnkgICAgXHJcbiAgfSxcclxuICBkcmFnSGFuZGxlOiAnPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHB1bGwtcmlnaHRcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tbW92ZVwiPjwvaT48L2Rpdj4nLFxyXG4gIGNvcHlCdXR0b246IGZ1bmN0aW9uKG5vZGVJRCkgeyByZXR1cm4gJzxhIGhyZWY9XCIjXCIgIGNsYXNzPVwicHVsbC1yaWdodCBidG4gYnRuLWluZm8gYnRuLXhzIGNvcHktYnV0dG9uXCIgb25jbGljaz1cInNwcmVhZFNoZWV0LmNvcHlOb2RlKCcgKyBub2RlSUQgKyAnKVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1wbHVzXCI+PC9pPjwvYT4nIH0sXHJcbiAgZGVsZXRlQnV0dG9uOiBmdW5jdGlvbihub2RlSUQpIHsgcmV0dXJuICc8YSBocmVmPVwiI1wiIGNsYXNzPVwicHVsbC1yaWdodCBidG4gYnRuLWRhbmdlciBidG4teHMgZGVsZXRlLWJ1dHRvblwiIG9uY2xpY2s9XCJzcHJlYWRTaGVldC5kZWxldGVOb2RlKCcgKyBub2RlSUQgKyAnKVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L2k+PC9hPicgfSxcclxuICBleHBhbmRJY29uOiBmdW5jdGlvbihub2RlSUQsIGRlcHRoQWRqdXN0bWVudCwgaWNvbk1hcmt1cCkgXHJcbiAgeyBcclxuICAgIHJldHVybiAnPGEgaHJlZj1cIiNcIiBpZD1cImljb24nICsgbm9kZUlEICsgJ1wiIGNsYXNzPVwiYnRuIGJ0bi14c1wiIHN0eWxlPVwibWFyZ2luLWxlZnQ6JyArIGRlcHRoQWRqdXN0bWVudCArICdweFwiICdcclxuICAgICAgICAgKyAnb25jbGljaz1cInNwcmVhZFNoZWV0LnRvZ2dsZU5vZGUoJyArIG5vZGVJRCArICcpXCI+JyArIGljb25NYXJrdXAgKyAnPC9hPic7IFxyXG4gIH0sXHJcbiAgbm9kZUlucHV0OiBmdW5jdGlvbihub2RlLCB3aWR0aClcclxuICB7IFxyXG4gICAgcmV0dXJuICc8aW5wdXQgaWQ9XCJub2RlSW5wdXQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cIm5vZGVUZXh0SW5wdXRcIiBzdHlsZT1cIndpZHRoOicgKyB3aWR0aCArICdweFwiIHR5cGU9XCJ0ZXh0XCIgJ1xyXG4gICAgICAgICArICd2YWx1ZT1cIicgKyBub2RlLm5hbWUgKyAnXCIgb25pbnB1dD1cInNwcmVhZFNoZWV0Vmlldy51cGRhdGVOb2RlTmFtZSgnICsgbm9kZS5pZCArICcpXCIvPic7IFxyXG4gIH0sXHJcbiAgZXhwYW5kTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICB2YXIgY2hpbGQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIGRlc2NlbmRhbnQgbm9kZSByb3dzIHRvIHRoZSBET01cclxuICAgIGZvcih2YXIgaSA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcHJlc2VydmUgdGhlIG5vZGUgb3JkZXJpbmdcclxuICAgIHtcclxuICAgICAgY2hpbGQgPSBub2RlLmNoaWxkcmVuW2ldO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0Vmlldy5kYXRhUm93c01hcmt1cChjaGlsZCkpLmluc2VydEFmdGVyKCQoJyNkYXRhcm93aWQnICsgbm9kZS5pZCkpO1xyXG4gICAgICAkKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKGNoaWxkKSkuaW5zZXJ0QWZ0ZXIoJCgnI3Jvd2lkJyArIG5vZGUuaWQpKTtcclxuICAgIH0gICAgIFxyXG5cclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgIFxyXG4gIH0sXHJcbiAgcmVkcmF3Tm9kZUNvbnRlbnQ6IGZ1bmN0aW9uKG5vZGUpXHJcbiAge1xyXG4gICAgJCgnI2ljb24nICsgbm9kZS5pZCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjbm9kZUlucHV0JyArIG5vZGUuaWQpLnJlbW92ZSgpO1xyXG4gICAgJCgnI25vZGVDb250ZW50JyArIG5vZGUuaWQpLmFwcGVuZChzcHJlYWRTaGVldFZpZXcubm9kZUNvbnRlbnQobm9kZSkpOyAgICAgXHJcbiAgfSxcclxuICBhZGRGaWVsZDogZnVuY3Rpb24oZmllbGROYW1lKVxyXG4gIHtcclxuICAgICQoJyNmaWVsZEhlYWRlclJvdycpLmFwcGVuZCh0aGlzLmZpZWxkSGVhZGVyTWFya3VwKGZpZWxkTmFtZSwgc3ByZWFkU2hlZXQuZmllbGRzKCkubGVuZ3RoKSk7XHJcbiAgICAkKCcjZmllbGRNZW51QnV0dG9uJyArIGZpZWxkTmFtZSkuY2xpY2soZnVuY3Rpb24oZSkgeyBzcHJlYWRTaGVldFZpZXcuc2hvd0ZpZWxkTWVudShlLCBmaWVsZE5hbWUpOyB9KTtcclxuICAgICQoJy5kYXRhUm93JykuZWFjaChmdW5jdGlvbihpLCBpdGVtKSB7IHNwcmVhZFNoZWV0Vmlldy5yZW5kZXJEYXRhQ2VsbChpdGVtLCBmaWVsZE5hbWUsIHBhcnNlSW50KGl0ZW0uaWQucmVwbGFjZSgnZGF0YXJvd2lkJywgJycpKSwgJycpOyB9KTsgICAgICAgIFxyXG4gIH0sXHJcbiAgdXBkYXRlTm9kZU5hbWU6IGZ1bmN0aW9uKG5vZGVJRClcclxuICB7XHJcbiAgICB2YXIgdmFsdWUgPSAkKCcjbm9kZUlucHV0JyArIG5vZGVJRCkudmFsKCk7XHJcbiAgICBzcHJlYWRTaGVldC51cGRhdGVOb2RlTmFtZShub2RlSUQsIHZhbHVlKTtcclxuICAgICQoJyNub2RlSW5wdXQnICsgbm9kZUlEKS5hdHRyKCd2YWx1ZScsIHZhbHVlKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBpbiB0aGUgRE9NLCBzbyB0aGF0IHdoZW4gd2UgZHJhZy9tb3ZlIHRoZSByb3csIHRoZSB2YWx1ZSBpcyBjb3JyZWN0ICAgIFxyXG4gIH0sXHJcbiAgcmVtb3ZlTm9kZTogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICAkKCcjcm93aWQnICsgbm9kZS5pZCkucmVtb3ZlKCk7XHJcbiAgICAkKCcjZGF0YXJvd2lkJyArIG5vZGUuaWQpLnJlbW92ZSgpOyAgICAgXHJcbiAgfSxcclxuICBpbnNlcnROb2RlQmVmb3JlOiBmdW5jdGlvbihub2RlLCBpbnNlcnRCZWZvcmVOb2RlKVxyXG4gIHtcclxuICAgICQoc3ByZWFkU2hlZXRWaWV3Lm5vZGVSb3dNYXJrdXAobm9kZSkpLmluc2VydEJlZm9yZSgkKCcjcm93aWQnICsgaW5zZXJ0QmVmb3JlTm9kZS5pZCkpOyAgICAgIC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgICQoc3ByZWFkU2hlZXRWaWV3LmRhdGFSb3dzTWFya3VwKG5vZGUpKS5pbnNlcnRCZWZvcmUoJCgnI2RhdGFyb3dpZCcgKyBpbnNlcnRCZWZvcmVOb2RlLmlkKSk7IC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgXHJcbiAgfSxcclxuICBpbnNlcnROb2RlQWZ0ZXI6IGZ1bmN0aW9uKG5vZGUsIGluc2VydEFmdGVyTm9kZSlcclxuICB7XHJcbiAgICAkKHNwcmVhZFNoZWV0Vmlldy5ub2RlUm93TWFya3VwKG5vZGUpKS5pbnNlcnRBZnRlcigkKCcjcm93aWQnICsgaW5zZXJ0QWZ0ZXJOb2RlLmlkKSk7ICAgICAgLy9pbnNlcnQgdGhlIG5ldyByb3dzIGJlZm9yZSB0aGUgc291cmNlIHJvd1xyXG4gICAgJChzcHJlYWRTaGVldFZpZXcuZGF0YVJvd3NNYXJrdXAobm9kZSkpLmluc2VydEFmdGVyKCQoJyNkYXRhcm93aWQnICsgaW5zZXJ0QWZ0ZXJOb2RlLmlkKSk7IC8vaW5zZXJ0IHRoZSBuZXcgcm93cyBiZWZvcmUgdGhlIHNvdXJjZSByb3dcclxuICAgIHNwcmVhZFNoZWV0Vmlldy5lbmFibGVEcmFnZ2luZyhub2RlKTsgICAgXHJcbiAgfSxcclxuICBlbmFibGVEcmFnZ2luZzogZnVuY3Rpb24obm9kZSlcclxuICB7XHJcbiAgICBSRURJUFMuZHJhZy5lbmFibGVEaXZzKCdpbml0JywgJCgnI3Jvd2lkJyArIG5vZGUuaWQpLmZpbmQoJ2RpdicpKTsgICAgICAgXHJcbiAgfSxcclxuICBnZXRGaWVsZFZhbHVlOiBmdW5jdGlvbihmaWVsZE5hbWUsIG5vZGVJRClcclxuICB7XHJcbiAgICByZXR1cm4gJCgnIycgKyBmaWVsZE5hbWUgKyBub2RlSUQpLnZhbCgpO1xyXG4gIH0sXHJcbiAgdXBkYXRlRmllbGRWYWx1ZTogZnVuY3Rpb24oZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG4gIHtcclxuICAgICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS52YWwodmFsdWUpO1xyXG4gIH1cclxufTsiLCJ2YXIgdHJlZVZpZXcgPSBcclxue1xyXG4gIHJlbmRlcjogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgIFxyXG4gIH0sXHJcbiAgZGVzdHJveTogZnVuY3Rpb24oKVxyXG4gIHtcclxuICAgICQoJyN0cmVlLWNvbnRhaW5lcicpLnJlbW92ZSgpO1xyXG4gIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIFRyZWVWaWV3KCkge31cclxuXHJcblRyZWVWaWV3LmRpc3BsYXkgPSBmdW5jdGlvbih0cmVlRGF0YSlcclxue1xyXG4gICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJ0cmVlLWNvbnRhaW5lclwiPjwvZGl2PicpO1xyXG5cclxuICAvLyBDYWxjdWxhdGUgdG90YWwgbm9kZXMsIG1heCBsYWJlbCBsZW5ndGhcclxuICB2YXIgdG90YWxOb2RlcyA9IDA7XHJcbiAgdmFyIG1heExhYmVsTGVuZ3RoID0gMDtcclxuICAvLyB2YXJpYWJsZXMgZm9yIGRyYWcvZHJvcFxyXG4gIHZhciBzZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gIHZhciBkcmFnZ2luZ05vZGUgPSBudWxsO1xyXG4gIC8vIHBhbm5pbmcgdmFyaWFibGVzXHJcbiAgdmFyIHBhblNwZWVkID0gMjAwO1xyXG4gIHZhciBwYW5Cb3VuZGFyeSA9IDIwOyAvLyBXaXRoaW4gMjBweCBmcm9tIGVkZ2VzIHdpbGwgcGFuIHdoZW4gZHJhZ2dpbmcuXHJcbiAgLy8gTWlzYy4gdmFyaWFibGVzXHJcbiAgdmFyIGkgPSAwO1xyXG4gIHZhciBkdXJhdGlvbiA9IDc1MDtcclxuICB2YXIgcm9vdDtcclxuXHJcbiAgLy8gc2l6ZSBvZiB0aGUgZGlhZ3JhbVxyXG4gIHZhciB2aWV3ZXJXaWR0aCA9ICQoJyN0cmVlLWNvbnRhaW5lcicpLndpZHRoKCk7XHJcbiAgdmFyIHZpZXdlckhlaWdodCA9ICQoJyN0cmVlLWNvbnRhaW5lcicpLmhlaWdodCgpO1xyXG5cclxuICB2YXIgdHJlZSA9IGQzLmxheW91dC50cmVlKClcclxuICAgICAgLnNpemUoW3ZpZXdlckhlaWdodCwgdmlld2VyV2lkdGhdKTtcclxuXHJcbiAgLy8gZGVmaW5lIGEgZDMgZGlhZ29uYWwgcHJvamVjdGlvbiBmb3IgdXNlIGJ5IHRoZSBub2RlIHBhdGhzIGxhdGVyIG9uLlxyXG4gIHZhciBkaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpXHJcbiAgICAgIC5wcm9qZWN0aW9uKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgIHJldHVybiBbZC55LCBkLnhdO1xyXG4gICAgICB9KTtcclxuXHJcbiAgLy8gQSByZWN1cnNpdmUgaGVscGVyIGZ1bmN0aW9uIGZvciBwZXJmb3JtaW5nIHNvbWUgc2V0dXAgYnkgd2Fsa2luZyB0aHJvdWdoIGFsbCBub2Rlc1xyXG5cclxuICBmdW5jdGlvbiB2aXNpdChwYXJlbnQsIHZpc2l0Rm4sIGNoaWxkcmVuRm4pIHtcclxuICAgICAgaWYgKCFwYXJlbnQpIHJldHVybjtcclxuXHJcbiAgICAgIHZpc2l0Rm4ocGFyZW50KTtcclxuXHJcbiAgICAgIHZhciBjaGlsZHJlbiA9IGNoaWxkcmVuRm4ocGFyZW50KTtcclxuICAgICAgaWYgKGNoaWxkcmVuKSB7XHJcbiAgICAgICAgICB2YXIgY291bnQgPSBjaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICB2aXNpdChjaGlsZHJlbltpXSwgdmlzaXRGbiwgY2hpbGRyZW5Gbik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIC8vIENhbGwgdmlzaXQgZnVuY3Rpb24gdG8gZXN0YWJsaXNoIG1heExhYmVsTGVuZ3RoXHJcbiAgdmlzaXQodHJlZURhdGEsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgdG90YWxOb2RlcysrO1xyXG4gICAgICBtYXhMYWJlbExlbmd0aCA9IE1hdGgubWF4KGQubmFtZS5sZW5ndGgsIG1heExhYmVsTGVuZ3RoKTtcclxuXHJcbiAgfSwgZnVuY3Rpb24oZCkge1xyXG4gICAgICByZXR1cm4gZC5jaGlsZHJlbiAmJiBkLmNoaWxkcmVuLmxlbmd0aCA+IDAgPyBkLmNoaWxkcmVuIDogbnVsbDtcclxuICB9KTtcclxuXHJcblxyXG4gIC8vIHNvcnQgdGhlIHRyZWUgYWNjb3JkaW5nIHRvIHRoZSBub2RlIG5hbWVzXHJcblxyXG4gIGZ1bmN0aW9uIHNvcnRUcmVlKCkge1xyXG4gICAgICB0cmVlLnNvcnQoZnVuY3Rpb24oYSwgYikge1xyXG4gICAgICAgICAgcmV0dXJuIGIubmFtZS50b0xvd2VyQ2FzZSgpIDwgYS5uYW1lLnRvTG93ZXJDYXNlKCkgPyAxIDogLTE7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICAvLyBTb3J0IHRoZSB0cmVlIGluaXRpYWxseSBpbmNhc2UgdGhlIEpTT04gaXNuJ3QgaW4gYSBzb3J0ZWQgb3JkZXIuXHJcbiAgc29ydFRyZWUoKTtcclxuXHJcbiAgLy8gVE9ETzogUGFuIGZ1bmN0aW9uLCBjYW4gYmUgYmV0dGVyIGltcGxlbWVudGVkLlxyXG5cclxuICBmdW5jdGlvbiBwYW4oZG9tTm9kZSwgZGlyZWN0aW9uKSB7XHJcbiAgICAgIHZhciBzcGVlZCA9IHBhblNwZWVkO1xyXG4gICAgICBpZiAocGFuVGltZXIpIHtcclxuICAgICAgICAgIGNsZWFyVGltZW91dChwYW5UaW1lcik7XHJcbiAgICAgICAgICB0cmFuc2xhdGVDb29yZHMgPSBkMy50cmFuc2Zvcm0oc3ZnR3JvdXAuYXR0cihcInRyYW5zZm9ybVwiKSk7XHJcbiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09ICdsZWZ0JyB8fCBkaXJlY3Rpb24gPT0gJ3JpZ2h0Jykge1xyXG4gICAgICAgICAgICAgIHRyYW5zbGF0ZVggPSBkaXJlY3Rpb24gPT0gJ2xlZnQnID8gdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVswXSArIHNwZWVkIDogdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVswXSAtIHNwZWVkO1xyXG4gICAgICAgICAgICAgIHRyYW5zbGF0ZVkgPSB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT0gJ3VwJyB8fCBkaXJlY3Rpb24gPT0gJ2Rvd24nKSB7XHJcbiAgICAgICAgICAgICAgdHJhbnNsYXRlWCA9IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF07XHJcbiAgICAgICAgICAgICAgdHJhbnNsYXRlWSA9IGRpcmVjdGlvbiA9PSAndXAnID8gdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVsxXSArIHNwZWVkIDogdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVsxXSAtIHNwZWVkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc2NhbGVYID0gdHJhbnNsYXRlQ29vcmRzLnNjYWxlWzBdO1xyXG4gICAgICAgICAgc2NhbGVZID0gdHJhbnNsYXRlQ29vcmRzLnNjYWxlWzFdO1xyXG4gICAgICAgICAgc2NhbGUgPSB6b29tTGlzdGVuZXIuc2NhbGUoKTtcclxuICAgICAgICAgIHN2Z0dyb3VwLnRyYW5zaXRpb24oKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgdHJhbnNsYXRlWCArIFwiLFwiICsgdHJhbnNsYXRlWSArIFwiKXNjYWxlKFwiICsgc2NhbGUgKyBcIilcIik7XHJcbiAgICAgICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCdnLm5vZGUnKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgdHJhbnNsYXRlWCArIFwiLFwiICsgdHJhbnNsYXRlWSArIFwiKVwiKTtcclxuICAgICAgICAgIHpvb21MaXN0ZW5lci5zY2FsZSh6b29tTGlzdGVuZXIuc2NhbGUoKSk7XHJcbiAgICAgICAgICB6b29tTGlzdGVuZXIudHJhbnNsYXRlKFt0cmFuc2xhdGVYLCB0cmFuc2xhdGVZXSk7XHJcbiAgICAgICAgICBwYW5UaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgcGFuKGRvbU5vZGUsIHNwZWVkLCBkaXJlY3Rpb24pO1xyXG4gICAgICAgICAgfSwgNTApO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBEZWZpbmUgdGhlIHpvb20gZnVuY3Rpb24gZm9yIHRoZSB6b29tYWJsZSB0cmVlXHJcblxyXG4gIGZ1bmN0aW9uIHpvb20oKSB7XHJcbiAgICAgIHN2Z0dyb3VwLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkMy5ldmVudC50cmFuc2xhdGUgKyBcIilzY2FsZShcIiArIGQzLmV2ZW50LnNjYWxlICsgXCIpXCIpO1xyXG4gIH1cclxuXHJcblxyXG4gIC8vIGRlZmluZSB0aGUgem9vbUxpc3RlbmVyIHdoaWNoIGNhbGxzIHRoZSB6b29tIGZ1bmN0aW9uIG9uIHRoZSBcInpvb21cIiBldmVudCBjb25zdHJhaW5lZCB3aXRoaW4gdGhlIHNjYWxlRXh0ZW50c1xyXG4gIHZhciB6b29tTGlzdGVuZXIgPSBkMy5iZWhhdmlvci56b29tKCkuc2NhbGVFeHRlbnQoWzAuMSwgM10pLm9uKFwiem9vbVwiLCB6b29tKTtcclxuXHJcbiAgZnVuY3Rpb24gaW5pdGlhdGVEcmFnKGQsIGRvbU5vZGUpIHtcclxuICAgICAgZHJhZ2dpbmdOb2RlID0gZDtcclxuICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdCgnLmdob3N0Q2lyY2xlJykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xyXG4gICAgICBkMy5zZWxlY3RBbGwoJy5naG9zdENpcmNsZScpLmF0dHIoJ2NsYXNzJywgJ2dob3N0Q2lyY2xlIHNob3cnKTtcclxuICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUgYWN0aXZlRHJhZycpO1xyXG5cclxuICAgICAgc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpLnNvcnQoZnVuY3Rpb24oYSwgYikgeyAvLyBzZWxlY3QgdGhlIHBhcmVudCBhbmQgc29ydCB0aGUgcGF0aCdzXHJcbiAgICAgICAgICBpZiAoYS5pZCAhPSBkcmFnZ2luZ05vZGUuaWQpIHJldHVybiAxOyAvLyBhIGlzIG5vdCB0aGUgaG92ZXJlZCBlbGVtZW50LCBzZW5kIFwiYVwiIHRvIHRoZSBiYWNrXHJcbiAgICAgICAgICBlbHNlIHJldHVybiAtMTsgLy8gYSBpcyB0aGUgaG92ZXJlZCBlbGVtZW50LCBicmluZyBcImFcIiB0byB0aGUgZnJvbnRcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIGlmIG5vZGVzIGhhcyBjaGlsZHJlbiwgcmVtb3ZlIHRoZSBsaW5rcyBhbmQgbm9kZXNcclxuICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgIC8vIHJlbW92ZSBsaW5rIHBhdGhzXHJcbiAgICAgICAgICBsaW5rcyA9IHRyZWUubGlua3Mobm9kZXMpO1xyXG4gICAgICAgICAgbm9kZVBhdGhzID0gc3ZnR3JvdXAuc2VsZWN0QWxsKFwicGF0aC5saW5rXCIpXHJcbiAgICAgICAgICAgICAgLmRhdGEobGlua3MsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgICAgIH0pLnJlbW92ZSgpO1xyXG4gICAgICAgICAgLy8gcmVtb3ZlIGNoaWxkIG5vZGVzXHJcbiAgICAgICAgICBub2Rlc0V4aXQgPSBzdmdHcm91cC5zZWxlY3RBbGwoXCJnLm5vZGVcIilcclxuICAgICAgICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZC5pZDtcclxuICAgICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZC5pZCA9PSBkcmFnZ2luZ05vZGUuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICB9KS5yZW1vdmUoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gcmVtb3ZlIHBhcmVudCBsaW5rXHJcbiAgICAgIHBhcmVudExpbmsgPSB0cmVlLmxpbmtzKHRyZWUubm9kZXMoZHJhZ2dpbmdOb2RlLnBhcmVudCkpO1xyXG4gICAgICBzdmdHcm91cC5zZWxlY3RBbGwoJ3BhdGgubGluaycpLmZpbHRlcihmdW5jdGlvbihkLCBpKSB7XHJcbiAgICAgICAgICBpZiAoZC50YXJnZXQuaWQgPT0gZHJhZ2dpbmdOb2RlLmlkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0pLnJlbW92ZSgpO1xyXG5cclxuICAgICAgZHJhZ1N0YXJ0ZWQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgLy8gZGVmaW5lIHRoZSBiYXNlU3ZnLCBhdHRhY2hpbmcgYSBjbGFzcyBmb3Igc3R5bGluZyBhbmQgdGhlIHpvb21MaXN0ZW5lclxyXG4gIHZhciBiYXNlU3ZnID0gZDMuc2VsZWN0KFwiI3RyZWUtY29udGFpbmVyXCIpLmFwcGVuZChcInN2Z1wiKVxyXG4gICAgICAuYXR0cihcIndpZHRoXCIsIHZpZXdlcldpZHRoKVxyXG4gICAgICAuYXR0cihcImhlaWdodFwiLCB2aWV3ZXJIZWlnaHQpXHJcbiAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJvdmVybGF5XCIpXHJcbiAgICAgIC5jYWxsKHpvb21MaXN0ZW5lcik7XHJcblxyXG5cclxuICAvLyBEZWZpbmUgdGhlIGRyYWcgbGlzdGVuZXJzIGZvciBkcmFnL2Ryb3AgYmVoYXZpb3VyIG9mIG5vZGVzLlxyXG4gIGRyYWdMaXN0ZW5lciA9IGQzLmJlaGF2aW9yLmRyYWcoKVxyXG4gICAgICAub24oXCJkcmFnc3RhcnRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgaWYgKGQgPT0gcm9vdCkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGRyYWdTdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICAgIG5vZGVzID0gdHJlZS5ub2RlcyhkKTtcclxuICAgICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgLy8gaXQncyBpbXBvcnRhbnQgdGhhdCB3ZSBzdXBwcmVzcyB0aGUgbW91c2VvdmVyIGV2ZW50IG9uIHRoZSBub2RlIGJlaW5nIGRyYWdnZWQuIE90aGVyd2lzZSBpdCB3aWxsIGFic29yYiB0aGUgbW91c2VvdmVyIGV2ZW50IGFuZCB0aGUgdW5kZXJseWluZyBub2RlIHdpbGwgbm90IGRldGVjdCBpdCBkMy5zZWxlY3QodGhpcykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xyXG4gICAgICB9KVxyXG4gICAgICAub24oXCJkcmFnXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgIGlmIChkID09IHJvb3QpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZHJhZ1N0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgICBkb21Ob2RlID0gdGhpcztcclxuICAgICAgICAgICAgICBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gZ2V0IGNvb3JkcyBvZiBtb3VzZUV2ZW50IHJlbGF0aXZlIHRvIHN2ZyBjb250YWluZXIgdG8gYWxsb3cgZm9yIHBhbm5pbmdcclxuICAgICAgICAgIHJlbENvb3JkcyA9IGQzLm1vdXNlKCQoJ3N2ZycpLmdldCgwKSk7XHJcbiAgICAgICAgICBpZiAocmVsQ29vcmRzWzBdIDwgcGFuQm91bmRhcnkpIHtcclxuICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgcGFuKHRoaXMsICdsZWZ0Jyk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHJlbENvb3Jkc1swXSA+ICgkKCdzdmcnKS53aWR0aCgpIC0gcGFuQm91bmRhcnkpKSB7XHJcblxyXG4gICAgICAgICAgICAgIHBhblRpbWVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICBwYW4odGhpcywgJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHJlbENvb3Jkc1sxXSA8IHBhbkJvdW5kYXJ5KSB7XHJcbiAgICAgICAgICAgICAgcGFuVGltZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIHBhbih0aGlzLCAndXAnKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzFdID4gKCQoJ3N2ZycpLmhlaWdodCgpIC0gcGFuQm91bmRhcnkpKSB7XHJcbiAgICAgICAgICAgICAgcGFuVGltZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIHBhbih0aGlzLCAnZG93bicpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocGFuVGltZXIpO1xyXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGQueDAgKz0gZDMuZXZlbnQuZHk7XHJcbiAgICAgICAgICBkLnkwICs9IGQzLmV2ZW50LmR4O1xyXG4gICAgICAgICAgdmFyIG5vZGUgPSBkMy5zZWxlY3QodGhpcyk7XHJcbiAgICAgICAgICBub2RlLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBkLnkwICsgXCIsXCIgKyBkLngwICsgXCIpXCIpO1xyXG4gICAgICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gICAgICB9KS5vbihcImRyYWdlbmRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgaWYgKGQgPT0gcm9vdCkge1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGRvbU5vZGUgPSB0aGlzO1xyXG4gICAgICAgICAgaWYgKHNlbGVjdGVkTm9kZSkge1xyXG4gICAgICAgICAgICAgIC8vIG5vdyByZW1vdmUgdGhlIGVsZW1lbnQgZnJvbSB0aGUgcGFyZW50LCBhbmQgaW5zZXJ0IGl0IGludG8gdGhlIG5ldyBlbGVtZW50cyBjaGlsZHJlblxyXG4gICAgICAgICAgICAgIHZhciBpbmRleCA9IGRyYWdnaW5nTm9kZS5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZihkcmFnZ2luZ05vZGUpO1xyXG4gICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgIGRyYWdnaW5nTm9kZS5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkTm9kZS5jaGlsZHJlbiB8fCBzZWxlY3RlZE5vZGUuX2NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWROb2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlLmNoaWxkcmVuLnB1c2goZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlLl9jaGlsZHJlbi5wdXNoKGRyYWdnaW5nTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9ICBcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUuY2hpbGRyZW4gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlLmNoaWxkcmVuLnB1c2goZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIG5vZGUgYmVpbmcgYWRkZWQgdG8gaXMgZXhwYW5kZWQgc28gdXNlciBjYW4gc2VlIGFkZGVkIG5vZGUgaXMgY29ycmVjdGx5IG1vdmVkXHJcbiAgICAgICAgICAgICAgZXhwYW5kKHNlbGVjdGVkTm9kZSk7XHJcbiAgICAgICAgICAgICAgc29ydFRyZWUoKTtcclxuICAgICAgICAgICAgICBlbmREcmFnKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGVuZERyYWcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIGVuZERyYWcoKSB7XHJcbiAgICAgIHNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICAgIGQzLnNlbGVjdEFsbCgnLmdob3N0Q2lyY2xlJykuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUnKTtcclxuICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUnKTtcclxuICAgICAgLy8gbm93IHJlc3RvcmUgdGhlIG1vdXNlb3ZlciBldmVudCBvciB3ZSB3b24ndCBiZSBhYmxlIHRvIGRyYWcgYSAybmQgdGltZVxyXG4gICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICcnKTtcclxuICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gICAgICBpZiAoZHJhZ2dpbmdOb2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICB1cGRhdGUocm9vdCk7XHJcbiAgICAgICAgICBjZW50ZXJOb2RlKGRyYWdnaW5nTm9kZSk7XHJcbiAgICAgICAgICBkcmFnZ2luZ05vZGUgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBIZWxwZXIgZnVuY3Rpb25zIGZvciBjb2xsYXBzaW5nIGFuZCBleHBhbmRpbmcgbm9kZXMuXHJcblxyXG4gIGZ1bmN0aW9uIGNvbGxhcHNlKGQpIHtcclxuICAgICAgaWYgKGQuY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGQuX2NoaWxkcmVuID0gZC5jaGlsZHJlbjtcclxuICAgICAgICAgIGQuX2NoaWxkcmVuLmZvckVhY2goY29sbGFwc2UpO1xyXG4gICAgICAgICAgZC5jaGlsZHJlbiA9IFtdO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBleHBhbmQoZCkge1xyXG4gICAgICBpZiAoZC5fY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGQuY2hpbGRyZW4gPSBkLl9jaGlsZHJlbjtcclxuICAgICAgICAgIGQuY2hpbGRyZW4uZm9yRWFjaChleHBhbmQpO1xyXG4gICAgICAgICAgZC5fY2hpbGRyZW4gPSBbXTtcclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgdmFyIG92ZXJDaXJjbGUgPSBmdW5jdGlvbihkKSB7XHJcbiAgICAgIHNlbGVjdGVkTm9kZSA9IGQ7XHJcbiAgICAgIHVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICB9O1xyXG4gIHZhciBvdXRDaXJjbGUgPSBmdW5jdGlvbihkKSB7XHJcbiAgICAgIHNlbGVjdGVkTm9kZSA9IG51bGw7XHJcbiAgICAgIHVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICB9O1xyXG5cclxuICAvLyBGdW5jdGlvbiB0byB1cGRhdGUgdGhlIHRlbXBvcmFyeSBjb25uZWN0b3IgaW5kaWNhdGluZyBkcmFnZ2luZyBhZmZpbGlhdGlvblxyXG4gIHZhciB1cGRhdGVUZW1wQ29ubmVjdG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICAgIGlmIChkcmFnZ2luZ05vZGUgIT09IG51bGwgJiYgc2VsZWN0ZWROb2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAvLyBoYXZlIHRvIGZsaXAgdGhlIHNvdXJjZSBjb29yZGluYXRlcyBzaW5jZSB3ZSBkaWQgdGhpcyBmb3IgdGhlIGV4aXN0aW5nIGNvbm5lY3RvcnMgb24gdGhlIG9yaWdpbmFsIHRyZWVcclxuICAgICAgICAgIGRhdGEgPSBbe1xyXG4gICAgICAgICAgICAgIHNvdXJjZToge1xyXG4gICAgICAgICAgICAgICAgICB4OiBzZWxlY3RlZE5vZGUueTAsXHJcbiAgICAgICAgICAgICAgICAgIHk6IHNlbGVjdGVkTm9kZS54MFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgICAgICAgICAgICAgIHg6IGRyYWdnaW5nTm9kZS55MCxcclxuICAgICAgICAgICAgICAgICAgeTogZHJhZ2dpbmdOb2RlLngwXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfV07XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGxpbmsgPSBzdmdHcm91cC5zZWxlY3RBbGwoXCIudGVtcGxpbmtcIikuZGF0YShkYXRhKTtcclxuXHJcbiAgICAgIGxpbmsuZW50ZXIoKS5hcHBlbmQoXCJwYXRoXCIpXHJcbiAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwidGVtcGxpbmtcIilcclxuICAgICAgICAgIC5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSlcclxuICAgICAgICAgIC5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcblxyXG4gICAgICBsaW5rLmF0dHIoXCJkXCIsIGQzLnN2Zy5kaWFnb25hbCgpKTtcclxuXHJcbiAgICAgIGxpbmsuZXhpdCgpLnJlbW92ZSgpO1xyXG4gIH07XHJcblxyXG4gIC8vIEZ1bmN0aW9uIHRvIGNlbnRlciBub2RlIHdoZW4gY2xpY2tlZC9kcm9wcGVkIHNvIG5vZGUgZG9lc24ndCBnZXQgbG9zdCB3aGVuIGNvbGxhcHNpbmcvbW92aW5nIHdpdGggbGFyZ2UgYW1vdW50IG9mIGNoaWxkcmVuLlxyXG5cclxuICBmdW5jdGlvbiBjZW50ZXJOb2RlKHNvdXJjZSkge1xyXG4gICAgICBzY2FsZSA9IHpvb21MaXN0ZW5lci5zY2FsZSgpO1xyXG4gICAgICB4ID0gLXNvdXJjZS55MDtcclxuICAgICAgeSA9IC1zb3VyY2UueDA7XHJcbiAgICAgIHggPSB4ICogc2NhbGUgKyB2aWV3ZXJXaWR0aCAvIDI7XHJcbiAgICAgIHkgPSB5ICogc2NhbGUgKyB2aWV3ZXJIZWlnaHQgLyAyO1xyXG4gICAgICBkMy5zZWxlY3QoJ2cnKS50cmFuc2l0aW9uKClcclxuICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcclxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgeCArIFwiLFwiICsgeSArIFwiKXNjYWxlKFwiICsgc2NhbGUgKyBcIilcIik7XHJcbiAgICAgIHpvb21MaXN0ZW5lci5zY2FsZShzY2FsZSk7XHJcbiAgICAgIHpvb21MaXN0ZW5lci50cmFuc2xhdGUoW3gsIHldKTtcclxuICB9XHJcblxyXG4gIC8vIFRvZ2dsZSBjaGlsZHJlbiBmdW5jdGlvblxyXG5cclxuICBmdW5jdGlvbiB0b2dnbGVDaGlsZHJlbihkKSB7XHJcbiAgICAgIGlmIChkLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICBkLl9jaGlsZHJlbiA9IGQuY2hpbGRyZW47XHJcbiAgICAgICAgICBkLmNoaWxkcmVuID0gW107XHJcbiAgICAgIH0gZWxzZSBpZiAoZC5fY2hpbGRyZW4pIHtcclxuICAgICAgICAgIGQuY2hpbGRyZW4gPSBkLl9jaGlsZHJlbjtcclxuICAgICAgICAgIGQuX2NoaWxkcmVuID0gW107XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGQ7XHJcbiAgfVxyXG5cclxuICAvLyBUb2dnbGUgY2hpbGRyZW4gb24gY2xpY2suXHJcblxyXG4gIGZ1bmN0aW9uIGNsaWNrKGQpIHtcclxuICAgICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjsgLy8gY2xpY2sgc3VwcHJlc3NlZFxyXG4gICAgICBkID0gdG9nZ2xlQ2hpbGRyZW4oZCk7XHJcbiAgICAgIHVwZGF0ZShkKTtcclxuICAgICAgY2VudGVyTm9kZShkKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHVwZGF0ZShzb3VyY2UpIHtcclxuICAgIHZhciBjb21wdXRlTm9kZVNpemUgPSBmdW5jdGlvbihub2RlLCBmaWVsZClcclxuICAgIHtcclxuICAgICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbZmllbGRdICYmIG5vZGUudmFsdWVzW2ZpZWxkXSA+IDUpXHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gbm9kZS52YWx1ZXNbZmllbGRdO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiA1O1xyXG4gICAgICB9ICAgICAgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgICAgLy8gQ29tcHV0ZSB0aGUgbmV3IGhlaWdodCwgZnVuY3Rpb24gY291bnRzIHRvdGFsIGNoaWxkcmVuIG9mIHJvb3Qgbm9kZSBhbmQgc2V0cyB0cmVlIGhlaWdodCBhY2NvcmRpbmdseS5cclxuICAgICAgLy8gVGhpcyBwcmV2ZW50cyB0aGUgbGF5b3V0IGxvb2tpbmcgc3F1YXNoZWQgd2hlbiBuZXcgbm9kZXMgYXJlIG1hZGUgdmlzaWJsZSBvciBsb29raW5nIHNwYXJzZSB3aGVuIG5vZGVzIGFyZSByZW1vdmVkXHJcbiAgICAgIC8vIFRoaXMgbWFrZXMgdGhlIGxheW91dCBtb3JlIGNvbnNpc3RlbnQuXHJcbiAgICAgIHZhciBsZXZlbFdpZHRoID0gWzFdO1xyXG4gICAgICB2YXIgY2hpbGRDb3VudCA9IGZ1bmN0aW9uKGxldmVsLCBuKSB7XHJcblxyXG4gICAgICAgICAgaWYgKG4uY2hpbGRyZW4gJiYgbi5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGxldmVsV2lkdGgubGVuZ3RoIDw9IGxldmVsICsgMSkgbGV2ZWxXaWR0aC5wdXNoKDApO1xyXG5cclxuICAgICAgICAgICAgICBsZXZlbFdpZHRoW2xldmVsICsgMV0gKz0gbi5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgbi5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgY2hpbGRDb3VudChsZXZlbCArIDEsIGQpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBjaGlsZENvdW50KDAsIHJvb3QpO1xyXG4gICAgICB2YXIgbmV3SGVpZ2h0ID0gZDMubWF4KGxldmVsV2lkdGgpICogMjU7IC8vIDI1IHBpeGVscyBwZXIgbGluZSAgXHJcbiAgICAgIHRyZWUgPSB0cmVlLnNpemUoW25ld0hlaWdodCwgdmlld2VyV2lkdGhdKTtcclxuXHJcbiAgICAgIC8vIENvbXB1dGUgdGhlIG5ldyB0cmVlIGxheW91dC5cclxuICAgICAgdmFyIG5vZGVzID0gdHJlZS5ub2Rlcyhyb290KS5yZXZlcnNlKCksXHJcbiAgICAgICAgICBsaW5rcyA9IHRyZWUubGlua3Mobm9kZXMpO1xyXG5cclxuICAgICAgLy8gU2V0IHdpZHRocyBiZXR3ZWVuIGxldmVscyBiYXNlZCBvbiBtYXhMYWJlbExlbmd0aC5cclxuICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICBkLnkgPSAoZC5kZXB0aCAqIChtYXhMYWJlbExlbmd0aCAqIDEwKSk7IC8vbWF4TGFiZWxMZW5ndGggKiAxMHB4XHJcbiAgICAgICAgICAvLyBhbHRlcm5hdGl2ZWx5IHRvIGtlZXAgYSBmaXhlZCBzY2FsZSBvbmUgY2FuIHNldCBhIGZpeGVkIGRlcHRoIHBlciBsZXZlbFxyXG4gICAgICAgICAgLy8gTm9ybWFsaXplIGZvciBmaXhlZC1kZXB0aCBieSBjb21tZW50aW5nIG91dCBiZWxvdyBsaW5lXHJcbiAgICAgICAgICAvLyBkLnkgPSAoZC5kZXB0aCAqIDUwMCk7IC8vNTAwcHggcGVyIGxldmVsLlxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgbm9kZXPigKZcclxuICAgICAgbm9kZSA9IHN2Z0dyb3VwLnNlbGVjdEFsbChcImcubm9kZVwiKVxyXG4gICAgICAgICAgLmRhdGEobm9kZXMsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZC5pZCB8fCAoZC5pZCA9ICsraSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEVudGVyIGFueSBuZXcgbm9kZXMgYXQgdGhlIHBhcmVudCdzIHByZXZpb3VzIHBvc2l0aW9uLlxyXG4gICAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcImdcIilcclxuICAgICAgICAgIC5jYWxsKGRyYWdMaXN0ZW5lcilcclxuICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlXCIpXHJcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgc291cmNlLnkwICsgXCIsXCIgKyBzb3VyY2UueDAgKyBcIilcIjtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAub24oJ2NsaWNrJywgY2xpY2spO1xyXG5cclxuICAgICAgbm9kZUVudGVyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ25vZGVDaXJjbGUnKVxyXG4gICAgICAgICAgLmF0dHIoXCJyXCIsIDApXHJcbiAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZC5fY2hpbGRyZW4gPyBcImxpZ2h0c3RlZWxibHVlXCIgOiBcIiNmZmZcIjtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgbm9kZUVudGVyLmFwcGVuZChcInRleHRcIilcclxuICAgICAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAtMTAgOiAxMDtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcclxuICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdub2RlVGV4dCcpXHJcbiAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBkLm5hbWU7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDApO1xyXG5cclxuICAgICAgLy8gcGhhbnRvbSBub2RlIHRvIGdpdmUgdXMgbW91c2VvdmVyIGluIGEgcmFkaXVzIGFyb3VuZCBpdFxyXG4gICAgICBub2RlRW50ZXIuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZ2hvc3RDaXJjbGUnKVxyXG4gICAgICAgICAgLmF0dHIoXCJyXCIsIDMwKVxyXG4gICAgICAgICAgLmF0dHIoXCJvcGFjaXR5XCIsIDAuMikgLy8gY2hhbmdlIHRoaXMgdG8gemVybyB0byBoaWRlIHRoZSB0YXJnZXQgYXJlYVxyXG4gICAgICAuc3R5bGUoXCJmaWxsXCIsIFwicmVkXCIpXHJcbiAgICAgICAgICAuYXR0cigncG9pbnRlci1ldmVudHMnLCAnbW91c2VvdmVyJylcclxuICAgICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgb3ZlckNpcmNsZShub2RlKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgb3V0Q2lyY2xlKG5vZGUpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgdGhlIHRleHQgdG8gcmVmbGVjdCB3aGV0aGVyIG5vZGUgaGFzIGNoaWxkcmVuIG9yIG5vdC5cclxuICAgICAgbm9kZS5zZWxlY3QoJ3RleHQnKVxyXG4gICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IC0xMCA6IDEwO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gXCJlbmRcIiA6IFwic3RhcnRcIjtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQubmFtZTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQ2hhbmdlIHRoZSBjaXJjbGUgZmlsbCBkZXBlbmRpbmcgb24gd2hldGhlciBpdCBoYXMgY2hpbGRyZW4gYW5kIGlzIGNvbGxhcHNlZFxyXG4gICAgICBub2RlLnNlbGVjdChcImNpcmNsZS5ub2RlQ2lyY2xlXCIpXHJcbiAgICAgICAgICAuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gY29tcHV0ZU5vZGVTaXplKGQpOyB9KVxyXG4gICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQuX2NoaWxkcmVuID8gXCJsaWdodHN0ZWVsYmx1ZVwiIDogXCIjZmZmXCI7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFRyYW5zaXRpb24gbm9kZXMgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxyXG4gICAgICB2YXIgbm9kZVVwZGF0ZSA9IG5vZGUudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAuZHVyYXRpb24oZHVyYXRpb24pXHJcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC55ICsgXCIsXCIgKyBkLnggKyBcIilcIjtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gRmFkZSB0aGUgdGV4dCBpblxyXG4gICAgICBub2RlVXBkYXRlLnNlbGVjdChcInRleHRcIilcclxuICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAxKTtcclxuXHJcbiAgICAgIC8vIFRyYW5zaXRpb24gZXhpdGluZyBub2RlcyB0byB0aGUgcGFyZW50J3MgbmV3IHBvc2l0aW9uLlxyXG4gICAgICB2YXIgbm9kZUV4aXQgPSBub2RlLmV4aXQoKS50cmFuc2l0aW9uKClcclxuICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcclxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueSArIFwiLFwiICsgc291cmNlLnggKyBcIilcIjtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICBub2RlRXhpdC5zZWxlY3QoXCJjaXJjbGVcIilcclxuICAgICAgICAgIC5hdHRyKFwiclwiLCAwKTtcclxuXHJcbiAgICAgIG5vZGVFeGl0LnNlbGVjdChcInRleHRcIilcclxuICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgbGlua3PigKZcclxuICAgICAgdmFyIGxpbmsgPSBzdmdHcm91cC5zZWxlY3RBbGwoXCJwYXRoLmxpbmtcIilcclxuICAgICAgICAgIC5kYXRhKGxpbmtzLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGQudGFyZ2V0LmlkO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBFbnRlciBhbnkgbmV3IGxpbmtzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cclxuICAgICAgbGluay5lbnRlcigpLmluc2VydChcInBhdGhcIiwgXCJnXCIpXHJcbiAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGlua1wiKVxyXG4gICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICB2YXIgbyA9IHtcclxuICAgICAgICAgICAgICAgICAgeDogc291cmNlLngwLFxyXG4gICAgICAgICAgICAgICAgICB5OiBzb3VyY2UueTBcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIHJldHVybiBkaWFnb25hbCh7XHJcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogbyxcclxuICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBvXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFRyYW5zaXRpb24gbGlua3MgdG8gdGhlaXIgbmV3IHBvc2l0aW9uLlxyXG4gICAgICBsaW5rLnRyYW5zaXRpb24oKVxyXG4gICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgLmF0dHIoXCJkXCIsIGRpYWdvbmFsKTtcclxuXHJcbiAgICAgIC8vIFRyYW5zaXRpb24gZXhpdGluZyBub2RlcyB0byB0aGUgcGFyZW50J3MgbmV3IHBvc2l0aW9uLlxyXG4gICAgICBsaW5rLmV4aXQoKS50cmFuc2l0aW9uKClcclxuICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcclxuICAgICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgdmFyIG8gPSB7XHJcbiAgICAgICAgICAgICAgICAgIHg6IHNvdXJjZS54LFxyXG4gICAgICAgICAgICAgICAgICB5OiBzb3VyY2UueVxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGRpYWdvbmFsKHtcclxuICAgICAgICAgICAgICAgICAgc291cmNlOiBvLFxyXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ6IG9cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAvLyBTdGFzaCB0aGUgb2xkIHBvc2l0aW9ucyBmb3IgdHJhbnNpdGlvbi5cclxuICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICBkLngwID0gZC54O1xyXG4gICAgICAgICAgZC55MCA9IGQueTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBBcHBlbmQgYSBncm91cCB3aGljaCBob2xkcyBhbGwgbm9kZXMgYW5kIHdoaWNoIHRoZSB6b29tIExpc3RlbmVyIGNhbiBhY3QgdXBvbi5cclxuICB2YXIgc3ZnR3JvdXAgPSBiYXNlU3ZnLmFwcGVuZChcImdcIik7XHJcblxyXG4gIC8vIERlZmluZSB0aGUgcm9vdFxyXG4gIHJvb3QgPSB0cmVlRGF0YTtcclxuICByb290LngwID0gdmlld2VySGVpZ2h0IC8gMjtcclxuICByb290LnkwID0gMDtcclxuXHJcbiAgLy8gQ29sbGFwc2UgYWxsIGNoaWxkcmVuIG9mIHJvb3RzIGNoaWxkcmVuIGJlZm9yZSByZW5kZXJpbmcuXHJcbiAgLy9yb290LmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpe1xyXG4gIC8vXHRjb2xsYXBzZShjaGlsZCk7XHJcbiAgLy99KTtcclxuXHJcbiAgLy8gTGF5b3V0IHRoZSB0cmVlIGluaXRpYWxseSBhbmQgY2VudGVyIG9uIHRoZSByb290IG5vZGUuXHJcbiAgdXBkYXRlKHJvb3QpO1xyXG4gIGNlbnRlck5vZGUocm9vdCk7XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=