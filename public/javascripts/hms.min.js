function aggregate_any(e,a){if(e.nodes&&0!==e.nodes.length){for(var n=0,l=0;l<e.nodes.length;l++)n+=aggregate_any(e.nodes[l],a);return e.values||(e.values={}),e.values[a]=n,document.getElementById(a+e.id).value=n,n}return e.values&&e.values[a]?parseFloat(e.values[a]):0}
var DOWN_ARROW_IMAGE_PATH="images/down-arrow.png",CHECK_MARK_IMAGE_PATH="images/checkmark.png",BLANK_MARK_IMAGE_PATH="images/blankmark.png";
function displayTreeView(t){function e(t,n,r){if(t){n(t);var a=r(t);if(a)for(var l=a.length,o=0;l>o;o++)e(a[o],n,r)}}function n(){A.sort(function(t,e){return e.name.toLowerCase()<t.name.toLowerCase()?1:-1})}function r(t,e){var n=m;panTimer&&(clearTimeout(panTimer),translateCoords=d3.transform(z.attr("transform")),"left"==e||"right"==e?(translateX="left"==e?translateCoords.translate[0]+n:translateCoords.translate[0]-n,translateY=translateCoords.translate[1]):("up"==e||"down"==e)&&(translateX=translateCoords.translate[0],translateY="up"==e?translateCoords.translate[1]+n:translateCoords.translate[1]-n),scaleX=translateCoords.scale[0],scaleY=translateCoords.scale[1],scale=X.scale(),z.transition().attr("transform","translate("+translateX+","+translateY+")scale("+scale+")"),d3.select(t).select("g.node").attr("transform","translate("+translateX+","+translateY+")"),X.scale(X.scale()),X.translate([translateX,translateY]),panTimer=setTimeout(function(){r(t,n,e)},50))}function a(){z.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function l(t,e){v=t,d3.select(e).select(".ghostCircle").attr("pointer-events","none"),d3.selectAll(".ghostCircle").attr("class","ghostCircle show"),d3.select(e).attr("class","node activeDrag"),z.selectAll("g.node").sort(function(t,e){return t.id!=v.id?1:-1}),nodes.length>1&&(links=A.links(nodes),nodePaths=z.selectAll("path.link").data(links,function(t){return t.target.id}).remove(),nodesExit=z.selectAll("g.node").data(nodes,function(t){return t.id}).filter(function(t,e){return t.id==v.id?!1:!0}).remove()),parentLink=A.links(A.nodes(v.parent)),z.selectAll("path.link").filter(function(t,e){return t.target.id==v.id?!0:!1}).remove(),dragStarted=null}function o(){g=null,d3.selectAll(".ghostCircle").attr("class","ghostCircle"),d3.select(domNode).attr("class","node"),d3.select(domNode).select(".ghostCircle").attr("pointer-events",""),N(),null!==v&&(u(f),i(v),v=null)}function s(t){t._children&&(t.children=t._children,t.children.forEach(s),t._children=null)}function i(t){scale=X.scale(),x=-t.y0,y=-t.x0,x=x*scale+T/2,y=y*scale+w/2,d3.select("g").transition().duration(k).attr("transform","translate("+x+","+y+")scale("+scale+")"),X.scale(scale),X.translate([x,y])}function d(t){return t.children?(t._children=t.children,t.children=null):t._children&&(t.children=t._children,t._children=null),t}function c(t){d3.event.defaultPrevented||(t=d(t),u(t),i(t))}function u(t){var e=[1],n=function(t,r){r.nodes&&r.nodes.length>0&&(e.length<=t+1&&e.push(0),e[t+1]+=r.nodes.length,r.nodes.forEach(function(e){n(t+1,e)}))};n(0,f);var r=25*d3.max(e);A=A.size([r,T]);var a=A.nodes(f).reverse(),l=A.links(a);a.forEach(function(t){t.y=10*t.depth*p}),node=z.selectAll("g.node").data(a,function(t){return t.id||(t.id=++_)});var o=node.enter().append("g").call(dragListener).attr("class","node").attr("transform",function(e){return"translate("+t.y0+","+t.x0+")"}).on("click",c);o.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(t){return t._children?"lightsteelblue":"#fff"}),o.append("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}).style("fill-opacity",0),o.append("circle").attr("class","ghostCircle").attr("r",30).attr("opacity",.2).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(t){b(t)}).on("mouseout",function(t){L(t)}),node.select("text").attr("x",function(t){return t.children||t._children?-10:10}).attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){return t.name}),node.select("circle.nodeCircle").attr("r",4.5).style("fill",function(t){return t._children?"lightsteelblue":"#fff"});var s=node.transition().duration(k).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});s.select("text").style("fill-opacity",1);var i=node.exit().transition().duration(k).attr("transform",function(e){return"translate("+t.y+","+t.x+")"}).remove();i.select("circle").attr("r",0),i.select("text").style("fill-opacity",0);var d=z.selectAll("path.link").data(l,function(t){return t.target.id});d.enter().insert("path","g").attr("class","link").attr("d",function(e){var n={x:t.x0,y:t.y0};return E({source:n,target:n})}),d.transition().duration(k).attr("d",E),d.exit().transition().duration(k).attr("d",function(e){var n={x:t.x,y:t.y};return E({source:n,target:n})}).remove(),a.forEach(function(t){t.x0=t.x,t.y0=t.y})}$("body").append('<div id="tree-container"></div>');var f,h=0,p=0,g=null,v=null,m=200,C=20,_=0,k=750,T=$("#tree-container").width(),w=$("#tree-container").height(),A=d3.layout.tree().size([w,T]);A.children(function(t){return t.nodes});var E=d3.svg.diagonal().projection(function(t){return[t.y,t.x]});e(t,function(t){h++,p=Math.max(t.name.length,p)},function(t){return t.nodes&&t.nodes.length>0?t.nodes:null}),n();var X=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",a),Y=d3.select("#tree-container").append("svg").attr("width",T).attr("height",w).attr("class","overlay").call(X);dragListener=d3.behavior.drag().on("dragstart",function(t){t!=f&&(dragStarted=!0,nodes=A.nodes(t),d3.event.sourceEvent.stopPropagation())}).on("drag",function(t){if(t!=f){if(dragStarted&&(domNode=this,l(t,domNode)),relCoords=d3.mouse($("svg").get(0)),relCoords[0]<C)panTimer=!0,r(this,"left");else if(relCoords[0]>$("svg").width()-C)panTimer=!0,r(this,"right");else if(relCoords[1]<C)panTimer=!0,r(this,"up");else if(relCoords[1]>$("svg").height()-C)panTimer=!0,r(this,"down");else try{clearTimeout(panTimer)}catch(e){}t.x0+=d3.event.dy,t.y0+=d3.event.dx;var n=d3.select(this);n.attr("transform","translate("+t.y0+","+t.x0+")"),N()}}).on("dragend",function(t){if(t!=f)if(domNode=this,g){var e=v.parent.children.indexOf(v);e>-1&&v.parent.children.splice(e,1),"undefined"!=typeof g.children||"undefined"!=typeof g._children?"undefined"!=typeof g.children?g.children.push(v):g._children.push(v):(g.children=[],g.children.push(v)),s(g),n(),o()}else o()});var b=function(t){g=t,N()},L=function(t){g=null,N()},N=function(){var t=[];null!==v&&null!==g&&(t=[{source:{x:g.y0,y:g.x0},target:{x:v.y0,y:v.x0}}]);var e=z.selectAll(".templink").data(t);e.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),e.attr("d",d3.svg.diagonal()),e.exit().remove()},z=Y.append("g");f=t,f.x0=w/2,f.y0=0,u(f),i(f)}
"use strict";var REDIPS=REDIPS||{};REDIPS.drag=function(){var e,o,t,n,r,d,l,i,a,s,c,f,p,g,u,v,y,m,h,w,E,b,D,I,S,R,P,x,N,T,C,B,j,k=null,L={width:0,height:0},M={width:null,height:null,container:[],obj:null},O={page:{x:0,y:0},div:{x:0,y:0},flag:{x:0,y:0}},Y=[],H=[],W=null,_=null,X={x:0,y:0},A={x:0,y:0,value:7,flag:!1},V=!1,z=!1,F=null,q=null,K=null,$=null,G=null,J=null,Q=!1,U=!1,Z={colorTd:"#FFCFAE",colorTr:"#9BB3DA"},ee={enable:!0,bound:25,speed:20},oe={borderDisabled:"dotted",opacityDisabled:"",rowEmptyColor:"white"},te={},ne={keyDiv:!1,keyRow:!1,sendBack:!1,drop:!1},re={cloned:function(){},clonedDropped:function(){},clonedEnd1:function(){},clonedEnd2:function(){},dropped:function(){},droppedBefore:function(){},finish:function(){},notCloned:function(){},notMoved:function(){},rowChanged:function(){},rowClicked:function(){},rowCloned:function(){},rowDropped:function(){},rowDroppedBefore:function(){},rowDroppedSource:function(){},rowMoved:function(){},rowNotCloned:function(){},rowNotMoved:function(){}};return e=function(){if(W=document.getElementById("redips-drag"),j=m(),!document.getElementById("redips_clone")){var e=document.createElement("div");e.id="redips_clone",e.style.width=e.style.height="1px",W.appendChild(e)}o("init",".redips-drag"),T=document.getElementById("treeTable"),T.redips={},c(),REDIPS.event.add(window,"resize",c),REDIPS.event.add(window,"scroll",y)},n=function(e){var o,t,n,l,i=e||window.event;if(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),V=i.shiftKey,window.getSelection)window.getSelection().removeAllRanges();else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(a){}return n=X.x=i.clientX,l=X.y=i.clientY,A.x=n,A.y=l,A.flag=!1,REDIPS.drag.objOld=U=Q||this,REDIPS.drag.obj=Q=this,z=Q.className.indexOf("redips-clone")>-1,REDIPS.drag.obj=Q=R(Q),y(),F=$=null,f(),K=q=F,J=G=$,REDIPS.drag.event.rowClicked(te.current),null!==F&&null!==$||(f(),K=q=F,J=G=$,null!==F&&null!==$)?(C=B=!1,REDIPS.event.add(document,"mousemove",d),REDIPS.event.add(document,"mouseup",r),null!==F&&(N=u(F)),t=D(T,"position"),"fixed"!==t&&(t=D(T.parentNode,"position")),o=v(Q,t),k=[l-o[0],o[1]-n,o[2]-l,n-o[3]],!1):!0},R=function(e){var o,t,n;return"DIV"===e.nodeName?(n=e,e=I("TR",e),void 0===e.redips&&(e.redips={}),e.redips.div=n,e):(t=e,o=document.createElement("table"),o.innerHTML='<tr id="'+t.id+'" class="'+t.classList+'">'+t.innerHTML+"</tr>",o.redips={},o.redips.sourceRow=t,E(t,o.rows[0]),document.getElementById("redips_clone").appendChild(o),o)},P=function(e){var o,t,n;n=function(e){var o;void 0!==e.redips&&e.redips.emptyRow?S(e,"empty",REDIPS.drag.style.rowEmptyColor):(o=I("TABLE",e),o.deleteRow(e.rowIndex))};var r=Q;e>T.rows.length-1&&(e=T.rows.length-1);var d=T.rows[e];t=r.getElementsByTagName("tr")[0],r.parentNode.removeChild(r),o=REDIPS.drag.event.rowDroppedBefore(T,r.redips.sourceRow.rowIndex),o!==!1&&(e<T.rows.length?d.parentNode.insertBefore(t,d.nextSibling):(d.parentNode.appendChild(t),d=T.rows[0]),B||n(r.redips.sourceRow),delete t.redips.emptyRow,REDIPS.drag.event.rowDropped(d))},r=function(e){var o,t,n,a,s,c,f=e||window.event;if(n=f.clientX,a=f.clientY,O.flag.x=O.flag.y=0,REDIPS.event.remove(document,"mousemove",d),REDIPS.event.remove(document,"mouseup",r),W.onselectstart=null,i(Q),M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,O.flag.x=O.flag.y=0,null===F||null===$)REDIPS.drag.event.notMoved();else{if(REDIPS.drag.td.target=te.target=T.rows[F].cells[$],g(F,N),o=F,C)if(K===o){for(t=Q.getElementsByTagName("tr")[0],U.style.backgroundColor=t.style.backgroundColor,s=0;s<t.cells.length;s++)U.cells[s].style.backgroundColor=t.cells[s].style.backgroundColor;Q.parentNode.removeChild(Q),delete U.redips.emptyRow,B?REDIPS.drag.event.rowNotCloned():REDIPS.drag.event.rowDroppedSource(te.target)}else P(o);else REDIPS.drag.event.rowNotMoved();B||A.flag?B&&K===F&&J===$?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):B&&REDIPS.drag.clone.drop===!1&&(n<T.redips.offset[3]||n>T.redips.offset[1]||a<T.redips.offset[0]||a>T.redips.offset[2])?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):(c=REDIPS.drag.event.droppedBefore(te.target),l(c)):REDIPS.drag.event.notMoved(),y(),REDIPS.drag.event.finish()}q=G=null},l=function(e){var o,t=null;if(e!==!1){if(ne.sendBack===!0){o=te.target.getElementsByTagName("DIV");for(var n=0;n<o.length;n++)if(Q!==o[n]&&0===Q.id.indexOf(o[n].id)){t=o[n];break}if(t)return b(t,1),void Q.parentNode.removeChild(Q)}te.target.appendChild(Q),a(Q),REDIPS.drag.event.dropped(te.target),B&&(REDIPS.drag.event.clonedDropped(te.target),b(U,-1))}else B&&Q.parentNode&&Q.parentNode.removeChild(Q)},a=function(e,o){e.onmousedown=o===!1?null:n},i=function(e){e.style.top="",e.style.left="",e.style.position="",e.style.zIndex=""},d=function(e){var o,t,n,r,d,l,i,a=e||window.event,c=REDIPS.drag.scroll.bound;if(t=X.x=a.clientX,n=X.y=a.clientY,r=Math.abs(A.x-t),d=Math.abs(A.y-n),C||((z||REDIPS.drag.clone.keyRow===!0&&V)&&(B=!0),REDIPS.drag.objOld=U=Q,REDIPS.drag.obj=Q=R(Q),Q.style.zIndex=999,Q.style.position="fixed",y(),f(),B?REDIPS.drag.event.rowCloned():REDIPS.drag.event.rowMoved(),p(),t>L.width-k[1]&&(Q.style.left=L.width-(k[1]+k[3])+"px"),n>L.height-k[2]&&(Q.style.top=L.height-(k[0]+k[2])+"px")),C=!0,t>k[3]&&t<L.width-k[1]&&(Q.style.left=t-k[3]+"px"),n>k[0]&&n<L.height-k[2]&&(Q.style.top=n-k[0]+"px"),t<_[1]&&t>_[3]&&n<_[2]&&n>_[0]&&0===O.flag.x&&0===O.flag.y&&(H.containTable||t<H[3]||t>H[1]||n<H[0]||n>H[2])&&(f(),s()),REDIPS.drag.scroll.enable)for(O.page.x=c-(L.width/2>t?t-k[3]:L.width-t-k[1]),O.page.x>0?(O.page.x>c&&(O.page.x=c),i=0,O.page.x*=t<L.width/2?-1:1,O.page.x<0&&0>=i||O.page.x>0&&i>=M.width-L.width||0===O.flag.x++&&(REDIPS.event.remove(window,"scroll",y),h(window))):O.page.x=0,O.page.y=c-(L.height/2>n?n-k[0]:L.height-n-k[2]),O.page.y>0?(O.page.y>c&&(O.page.y=c),i=window.pageYOffset||document.documentElement.scrollTop,O.page.y*=n<L.height/2?-1:1,O.page.y<0&&0>=i||O.page.y>0&&i>=M.height-L.height||0===O.flag.y++&&(REDIPS.event.remove(window,"scroll",y),w(window))):O.page.y=0,l=0;l<M.container.length;l++){if(o=M.container[l],o.autoscroll&&t<o.offset[1]&&t>o.offset[3]&&n<o.offset[2]&&n>o.offset[0]){O.div.x=c-(o.midstX>t?t-k[3]-o.offset[3]:o.offset[1]-t-k[1]),O.div.x>0?(O.div.x>c&&(O.div.x=c),O.div.x*=t<o.midstX?-1:1,0===O.flag.x++&&(REDIPS.event.remove(o.div,"scroll",y),h(o.div))):O.div.x=0,O.div.y=c-(o.midstY>n?n-k[0]-o.offset[0]:o.offset[2]-n-k[2]),O.div.y>0?(O.div.y>c&&(O.div.y=c),O.div.y*=n<o.midstY?-1:1,0===O.flag.y++&&(REDIPS.event.remove(o.div,"scroll",y),w(o.div))):O.div.y=0;break}O.div.x=O.div.y=0}a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},s=function(){(F!==q||$!==G)&&(null!==q&&null!==G&&(g(q,N),REDIPS.drag.td.previous=te.previous=T.rows[q].cells[G],REDIPS.drag.td.current=te.current=T.rows[F].cells[$],F!==q&&REDIPS.drag.event.rowChanged(te.current)),p())},c=function(){L.width=window.innerWidth,L.height=window.innerHeight,M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,y()},f=function(){var e,o,t,n,r,d,l=[];if(e=function(){null!==q&&null!==G&&(F=q,$=G)},n=X.x,r=X.y,l[0]=T.redips.offset[0],l[1]=T.redips.offset[1],l[2]=T.redips.offset[2],l[3]=T.redips.offset[3],void 0!==T.sca&&(l[0]=l[0]>T.sca.offset[0]?l[0]:T.sca.offset[0],l[1]=l[1]<T.sca.offset[1]?l[1]:T.sca.offset[1],l[2]=l[2]<T.sca.offset[2]?l[2]:T.sca.offset[2],l[3]=l[3]>T.sca.offset[3]?l[3]:T.sca.offset[3]),l[3]<n&&n<l[1]&&l[0]<r&&r<l[2]){for(o=T.redips.row_offset,F=0;F<o.length-1;F++)if(void 0!==o[F]){if(H[0]=o[F][0],void 0!==o[F+1])H[2]=o[F+1][0];else for(d=F+2;d<o.length;d++)if(void 0!==o[d]){H[2]=o[d][0];break}if(r<=H[2])break}t=F,F===o.length-1&&(H[0]=o[F][0],H[2]=T.redips.offset[2]),$=0,0>F||0>$?e():F!==t&&(H[0]=o[F][0],H[2]=H[0]+T.rows[F].cells[$].offsetHeight,(r<H[0]||r>H[2])&&e())}},p=function(){null!==F&&null!==$&&(N=u(F),g(F),q=F,G=$)},g=function(e,o){var t,n;t=T.rows[e];for(var r=0;r<t.cells.length;r++)n=t.cells[r].style,n.backgroundColor=void 0===o?REDIPS.drag.hover.colorTr:o.color[r].toString(),void 0!==REDIPS.drag.hover.borderTr&&(void 0===o?K>F?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:(n.borderTopWidth=o.top[r][0],n.borderTopStyle=o.top[r][1],n.borderTopColor=o.top[r][2],n.borderBottomWidth=o.bottom[r][0],n.borderBottomStyle=o.bottom[r][1],n.borderBottomColor=o.bottom[r][2]))},u=function(e){var o,t,n={color:[],top:[],right:[],bottom:[],left:[]},r=function(e,o){var t="border"+o+"Width",n="border"+o+"Style",r="border"+o+"Color";return[D(e,t),D(e,n),D(e,r)]};o=T.rows[e];for(var d=0;d<o.cells.length;d++)t=o.cells[d],n.color[d]=t.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTr&&(n.top[d]=r(t,"Top"),n.bottom[d]=r(t,"Bottom"));return n},v=function(e,o,t){var n=0,r=0,d=e;if("fixed"!==o&&(n=0-j[0],r=0-j[1]),void 0===t||t===!0){do n+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName)}else do n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName);return[r,n+d.offsetWidth,r+d.offsetHeight,n]},y=function(){var e,o,t;j=m(),e=[],o=D(T,"position"),"fixed"!==o&&(o=D(T.parentNode,"position"));for(var n=T.rows.length-1;n>=0;n--)"none"!==T.rows[n].style.display&&(e[n]=v(T.rows[n],o));T.redips.offset=v(T,o),T.redips.row_offset=e,_=v(W);for(var n=0;n<M.container.length;n++)o=D(M.container[n].div,"position"),t=v(M.container[n].div,o,!1),M.container[n].offset=t,M.container[n].midstX=(t[1]+t[3])/2,M.container[n].midstY=(t[0]+t[2])/2},m=function(){var e=window.pageYOffset||document.documentElement.scrollTop,o=0;return[o,e]},h=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.x>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[0],r=M.width-L.width,d=O.page.x):(n=M.obj.scrollLeft,r=M.obj.scrollWidth-M.obj.clientWidth,d=O.div.x),O.flag.x>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(d,0),n=m()[0],o=parseInt(Q.style.left,10),isNaN(o)&&(o=0)):M.obj.scrollLeft+=d,setTimeout(h,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.x=0,H=[0,0,0,0])},w=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.y>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[1],r=M.height-L.height,d=O.page.y):(n=M.obj.scrollTop,r=M.obj.scrollHeight-M.obj.clientHeight,d=O.div.y),O.flag.y>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(0,d),n=m()[1],o=parseInt(Q.style.top,10),isNaN(o)&&(o=0)):M.obj.scrollTop+=d,setTimeout(w,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.y=0,H=[0,0,0,0])},E=function(e,o){var t,n=[];n[0]=function(e,o){e.redips&&(o.redips={},o.redips.enabled=e.redips.enabled,o.redips.container=e.redips.container,e.redips.enabled&&a(o))},n[1]=function(e,o){e.redips&&(o.redips={},o.redips.emptyRow=e.redips.emptyRow)},t=function(t){var r,d,l=["DIV","TR"];r=e.getElementsByTagName(l[t]),d=o.getElementsByTagName(l[t]);for(var i=0;i<d.length;i++)n[t](r[i],d[i])},"DIV"===e.nodeName?n[0](e,o):"TR"===e.nodeName&&n[1](e,o),t(0),t(1)},b=function(e,t){var n,r,d,l;l=e.className,n=l.match(/climit(\d)_(\d+)/),null!==n&&(r=parseInt(n[1],10),d=parseInt(n[2],10),0===d&&1===t&&(l+=" redips-clone",2===r&&o(!0,e)),d+=t,l=l.replace(/climit\d_\d+/g,"climit"+r+"_"+d),0>=d&&(l=l.replace("redips-clone",""),2===r?(o(!1,e),REDIPS.drag.event.clonedEnd2()):REDIPS.drag.event.clonedEnd1()),e.className=x(l))},o=function(e,o){var n=[];void 0===o?n=W.getElementsByTagName("div"):"string"==typeof o?n=document.querySelectorAll(o):"object"!=typeof o||"DIV"===o.nodeName&&-1!==o.className.indexOf("redips-drag")?n[0]=o:n=o.getElementsByTagName("div"),t(e,n)},t=function(e,o){var t,n,r,d,l,i,s,c,f,p,g,u=[],m=/\bredips-drag\b/i,h=/\bredips-noautoscroll\b/i;for(l=REDIPS.drag.style.opacityDisabled,e===!0||"init"===e?(d=REDIPS.drag.style.borderEnabled,i="move",f=!0):(d=REDIPS.drag.style.borderDisabled,i="auto",f=!1),t=0,n=0;t<o.length;t++)if(m.test(o[t].className))"init"===e||void 0===o[t].redips?(o[t].redips={},o[t].redips.container=W):e===!0&&"number"==typeof l?(o[t].style.opacity="",o[t].style.filter=""):e===!1&&"number"==typeof l&&(o[t].style.opacity=l/100,o[t].style.filter="alpha(opacity="+l+")"),a(o[t],f),o[t].style.borderStyle=d,o[t].style.cursor=i,o[t].redips.enabled=f;else if("init"===e&&(s=D(o[t],"overflow"),"visible"!==s)){for(REDIPS.event.add(o[t],"scroll",y),g=D(o[t],"position"),p=v(o[t],g,!1),c=!h.test(o[t].className),M.container[n]={div:o[t],offset:p,midstX:(p[1]+p[3])/2,midstY:(p[0]+p[2])/2,autoscroll:c},u=o[t].getElementsByTagName("table"),r=0;r<u.length;r++)u[r].sca=M.container[n];n++}},D=function(e,o){return e&&e.currentStyle?e.currentStyle[o]:e&&window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[o]:void 0},I=function(e,o){for(o=o.parentNode;o&&o.nodeName!==e;)o=o.parentNode;return o},x=function(e){return void 0!==e&&(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ")),e},S=function(e,o,t){var n,r,d;if("string"==typeof e&&(e=document.getElementById(e),e=I("TABLE",e)),"TR"===e.nodeName)for(n=e.getElementsByTagName("td"),r=0;r<n.length;r++)if(n[r].style.backgroundColor=t?t:"","empty"===o)n[r].innerHTML="";else for(d=0;d<n[r].childNodes.length;d++)1===n[r].childNodes[d].nodeType&&(n[r].childNodes[d].style.opacity=o/100,n[r].childNodes[d].style.filter="alpha(opacity="+o+")");else e.style.opacity=o/100,e.style.filter="alpha(opacity="+o+")",e.style.backgroundColor=t?t:""},{obj:Q,objOld:U,td:te,hover:Z,scroll:ee,style:oe,clone:ne,init:e,enableDrag:o,enableDivs:t,rowOpacity:S,getScrollPosition:m,getStyle:D,findParent:I,event:re}}(),REDIPS.event||(REDIPS.event=function(){var e,o;return e=function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},o=function(e,o,t){e.removeEventListener?e.removeEventListener(o,t,!1):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=null},{add:e,remove:o}}());
"use strict";var redips={};redips.init=function(){var e=REDIPS.drag;e.init(),e.event.rowDropped=function(n){var t=parseInt(e.objOld.id.replace("rowid","")),o=document.getElementById(e.objOld.id),d=parseInt(n.id.replace("rowid","")),i=getParentID(o);moveAssembly(t,d,i,n),document.getElementById("expandID"+d).classList.remove("hide-expand"),document.getElementById("expandID"+d).classList.add("show-expand")},e.event.rowDroppedSource=function(){e.rowOpacity(e.objOld,100)},e.event.rowMoved=function(){e.rowOpacity(e.obj,85),e.rowOpacity(e.objOld,20,"White")},e.event.rowClicked=function(){},e.event.rowNotMoved=function(){},e.event.rowCloned=function(){},e.event.rowNotCloned=function(){},e.event.rowDeleted=function(){},e.event.rowUndeleted=function(){e.rowOpacity(e.objOld,100)}};
function initProjectActions(){$("#projectActionInput").keyup(function(e){e.keyCode==ENTER_KEY&&projectActionEnterPressed()})}var scrollBarWidth;$(document).ready(function(){scrollBarWidth=getScrollBarWidth(),document.onkeydown=checkKey,$.ajax({type:"GET",url:"api/projects"}).done(function(e){projects=e,$("#header").html(generateHeaderMarkup(projects.projects)),$("#editNewProjectNameInput").keyup(function(e){e.keyCode==ENTER_KEY&&createNewProject()})})});var getScrollBarWidth=function(){var e,t;return e=document.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t};
function checkKey(e){if(e=e||window.event,e.keyCode==KEY_UP_ARROW){e.preventDefault();var t=$(getAncestorTag(document.activeElement,"tr")).prev()[0];t&&$("#"+getNextElementID(t)).focus()}else if(e.keyCode==KEY_DOWN_ARROW){e.preventDefault();var n=$(getAncestorTag(document.activeElement,"tr")).next()[0];n&&$("#"+getNextElementID(n)).focus()}else e.keyCode==KEY_RIGHT_ARROW?(e.preventDefault(),$(getAncestorTag(document.activeElement,"td")).next().find("input").focus()):e.keyCode==KEY_LEFT_ARROW&&(e.preventDefault(),$(getAncestorTag(document.activeElement,"td")).prev().find("input").focus())}function getNextElementID(e){var t=document.activeElement.id;if(t.indexOf("nodeInput")>-1)return"nodeInput"+e.id.replace("rowid","");for(var n=document.activeElement.className.split(" "),r=0;r<n.length;r++){var a=n[r];if(a.indexOf("fieldInput")>-1&&"fieldInput"!=a){var c=a.replace("fieldInput","");return c+e.id.replace("datarowid","")}}}var KEY_UP_ARROW=38,KEY_DOWN_ARROW=40,KEY_LEFT_ARROW=37,KEY_RIGHT_ARROW=39;
function generateSpreadSheetMarkup(){return'<div id="spreadSheetView"><div id="project-action-container"></div><div id="fields-header-row"></div><div id="redips-drag"></div><div id="data-container" onscroll="handleDataScroll()"></div></div>'}function generateHeaderMarkup(e){for(var t='<select id="projectSelector" class="form-control" onchange="selectProject()"><option id="selectProjectOption" value="0">Select Project...</option>',n=0;n<e.length;n++)t+='<option value="'+e[n].id+'">'+e[n].name+"</option>";return t+='<option id="newProjectOption" value="-1">Create New Project...</option></select><input id="editNewProjectNameInput" class="form-control"></input><a href="#" id="save-database-button" class="btn btn-default" onclick="Project.saveToDatabase()">Save to Database</a><a href="#" id="switchViewButton" class="btn btn-default" onclick="Project.switchView()">Switch View</a>'}function generateProjectSelectorMarkup(){return'<table><tr id="headerRow"><tr><div id="project-select-container"><select id="projectActionSelector" class="form-control" onchange="handleProjectAction()"><option value="blank"></option><option value="addField">Add Field</option></select><input id="projectActionInput" class="form-control"></input></div></tr><table>'}function generateFieldsRowMarkup(){for(var e='<table id="fieldHeaderTable"><tr id="fieldHeaderRow">',t=0;t<tree.fields.length;t++)e+=getFieldHeaderMarkup(tree.fields[t].name,t);return e+="</tr></table>"}function generateTreeMarkup(){for(var e='<table id="treeTable">',t=0;t<tree.nodes.length;t++)e+=addRow(tree.nodes[t],0,"",0);return e+="</table>"}function addRow(e,t,n,i){var a="",d="nodeRow depth"+t+" expanded parent"+i+" "+n,r=e.id,o='<div class="redips-drag pull-right"><i class="glyphicon glyphicon-move"></i></div>',l='<a href="#" class="pull-right btn btn-danger btn-xs delete-button" onclick="deleteNode(this)"><i class="glyphicon glyphicon-remove"></i></a>',s='<a href="#"  class="pull-right btn btn-info btn-xs copy-button" onclick="copyNode(this)"><i class="glyphicon glyphicon-plus"></i></a>',c='<a id="expandID'+r+'" href="#" style="margin-left:'+10*t+'px" onclick="toggle(this)" class="btn btn-xs show-expand"><span id="icon'+r+'" class="glyphicon glyphicon-chevron-down iconp'+i+'"></span></a>',u='<a id="expandID'+r+'" href="#" style="margin-left:'+10*t+'px" onclick="toggle(this)" class="btn btn-xs hide-expand"><span id="icon'+r+'" class="glyphicon glyphicon-chevron-down iconp'+i+'"></span></a>';if(a+='<tr id="rowid'+r+'" class="'+d+'"><td class="redips-rowhandler cell"><div class="node-container">',a+=l+s+o,a+=e.nodes&&e.nodes.length>0?c:u,a+='<input id="nodeInput'+e.id+'" class="node" type="text" value="'+e.name+'" style="width:'+(DEFAULT_NODE_INPUT_WIDTH-10*t)+'px" oninput="updateNodeName(this)"/></div></td></tr>',e.nodes&&e.nodes.length>0)for(var p=0;p<e.nodes.length;p++)a+=addRow(e.nodes[p],t+1,n+" ancestor"+r,r);return a}function generateDataMarkup(){for(var e='<table id="dataTable">',t=0;t<tree.nodes.length;t++)e+=addDataRow(tree.nodes[t]);return e+="</table>"}function addDataRow(e){for(var t='<tr id="datarowid'+e.id+'" class="dataRow">',n=0;n<tree.fields.length;n++){var i=tree.fields[n],a="";e.values&&e.values[i.name]&&(a=Field.formatValue(i,e.values[i.name])),t+=getFieldCellMarkup(i.name,e.id,a)}if(t+="</tr>",e.nodes&&e.nodes.length>0)for(var n=0;n<e.nodes.length;n++)t+=addDataRow(e.nodes[n]);return t}function addColumn(e){$("#fieldHeaderRow").append(getFieldHeaderMarkup(e,tree.fields.length)),$(".dataRow").each(function(t,n){$(n).append(getFieldCellMarkup(e,n.id.replace("datarowid","")))})}function getFieldHeaderMarkup(e,t){return'<td class="fieldHeaderCell"><div class="fieldHeaderContainer"><div class="moveColGrip"></div><div class="fieldNameInputContainer"><textarea id="colHeaderInput'+e+'" class="fieldNameInput">'+e+'</textarea></div><div class="fieldHeaderButton"><img src="images/down-arrow.png" onclick="showMenu(event, \''+e+'\');" style="cursor:pointer"/></div><div id="grip'+t+'" class="resizeColGrip" onmousedown="startResize(event, this)"></div></div></td>'}function getFieldCellMarkup(e,t,n){return'<td class="cell"><input class="fieldInput fieldInput'+e+'" type="text" id="'+e+t+'" value="'+n+'" oninput="updateFieldValue(\''+e+"', '"+t+"')\" onfocus=\"displayRawValue('"+e+"', '"+t+"')\"/></td>"}function getAssemblyMarkup(e,t,n){var i=findNodeInTree(e),a=findParentInTree(e);return addRow(i,n,"ancestor"+a.id,a.id)}function getFieldMenuMarkup(e,t,n){var i=Project.getField(e),a=new Menu,d=new MenuItem("Number",Field.NUMBER,"datatype",i),r=new MenuItem("Format"),o=new MenuItem("Number",Field.NUMBER_FORMAT,"format",i);o.items.push(new MenuItem("0",0,"precision",i));for(var l="0.",s=1;11>s;s++)l+="0",o.items.push(new MenuItem(l,s,"precision",i));r.items.push(o);var c=new MenuItem("Percent",Field.PERCENT_FORMAT,"format",i);c.items.push(new MenuItem("0",0,"precision",i));for(var l="0.",s=1;11>s;s++)l+="0",c.items.push(new MenuItem(l+"%",s,"precision",i));r.items.push(c);var u=new MenuItem("Scientific",Field.SCIENTIFIC_FORMAT,"format",i);u.items.push(new MenuItem("0",0,"precision",i));for(var l="0.",s=1;11>s;s++)l+="0",u.items.push(new MenuItem(l+"e+0",s,"precision",i));r.items.push(u),d.items.push(r);var p=new MenuItem("Aggregation");p.items.push(new MenuItem("No Aggregation",Field.NO_AGGREGATION,"agg_type",i));for(var h=new MenuItem("Sum any defined children",Field.SUM_ANY_AGGREGATION,"agg_type",i),s=0;s<tree.fields.length;s++){var m=tree.fields[s];m.name!=i.name&&h.items.push(new MenuItem(m.name,m.name,"agg_qty_field",i))}p.items.push(h),d.items.push(p),a.items=[],a.items.push(d),a.items.push(new MenuItem("Text",Field.STRING,"datatype",i));var f='<div id="fieldMenu" style="left:'+t+"px;top:"+n+'px;">';return f+=generateMenuMarkup(a),f+="</div>"}function generateMenuMarkup(e){for(var t="<ul>",n=0;n<e.items.length;n++){var i=e.items[n];t+='<li onclick="Menu.handleClick('+i.id+');">';var a="uncheckedMenuItem";i.field&&i.checked&&(a="checkedMenuItem"),t+='<img id="menuItem'+i.id+'" src="'+CHECK_MARK_IMAGE_PATH+'" class="'+a+'"/>',t+=i.display,i.items&&i.items.length>0&&(t+='<div class="arrowRight"></div>'),i.items&&i.items.length>0&&(t+=generateMenuMarkup(i)),t+="</li>"}return t+"</ul>"}var DEFAULT_NODE_INPUT_WIDTH=400;
function displaySpreadSheet(){$("body").append(generateSpreadSheetMarkup()),$("#project-action-container").html(generateProjectSelectorMarkup()),$("#fields-header-row").html(generateFieldsRowMarkup()),$("#fields-header-row").css("right",scrollBarWidth+"px"),$("#data-container").html(generateDataMarkup()),$("#redips-drag").html(generateTreeMarkup()),$("#redips-drag").css("bottom",scrollBarWidth+"px"),redips.init(),initProjectActions()}function projectActionEnterPressed(){if("addField"==$("#projectActionSelector").val()){var e=$("#projectActionInput").val();tree.fields.push(new Field(e)),addColumn(e),$("#projectActionInput").hide(),$("#projectActionSelector").val("blank")}}function createNewProject(){$("#selectProjectOption").remove();var e=$("#editNewProjectNameInput").val();$("#editNewProjectNameInput").hide();var t=projects.nextProjectID.toString(),r=document.createElement("option");r.text=e,r.value=t,$(r).insertBefore("#projectSelector option:nth-child("+$("#projectSelector").length+")"),$("#projectSelector").val(t),$.ajax({type:"POST",url:"/api/addProject?projectName="+e}),tree={projectID:t,projectName:e,name:e,version:1,nextNodeID:2,fields:[],nodes:[{id:1,name:e,nodes:[]}]},displaySpreadSheet(),Project.saveToDatabase()}function showMenu(e,t){0===$("#fieldMenu").length&&($(getFieldMenuMarkup(t,e.clientX,e.clientY)).appendTo("body"),$("#fieldMenu").mouseleave(function(){$("#fieldMenu").remove()}))}var handleProjectAction=function(){"addField"==$("#projectActionSelector").val()&&($("#projectActionInput").val("Type New Field Name and Press Enter to Create"),$("#projectActionInput").show().focus().select())};
var resizeColumnLeft=0,resizeField="0",startResize=function(e,i){$(document).bind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).bind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="visible",document.getElementById("resizeLine").style.left=e.pageX+"px",resizeColumnLeft=$(i.parentNode).position().left,resizeField=i.parentNode.id.replace("colHeader","")},resizeEnd=function(e){$(document).unbind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).unbind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="hidden";var i=e.pageX-resizeColumnLeft-GRIPS_WIDTH;i<MIN_COLUMN_WIDTH&&(i=MIN_COLUMN_WIDTH),document.getElementById("colHeaderInput"+resizeField).style.width=i+"px";for(var t=document.querySelectorAll(".fieldInput"+resizeField),r=0;r<t.length;r++)t[r].style.width=i+8+"px"},resizeDrag=function(e){e.pageX>resizeColumnLeft+MIN_COLUMN_WIDTH+GRIPS_WIDTH&&(document.getElementById("resizeLine").style.left=e.pageX+"px")};
function handleDataScroll(){$("#redips-drag").scrollTop($("#data-container").scrollTop()),$("#fields-header-row").scrollLeft($("#data-container").scrollLeft())}function printProject(){console.log(JSON.stringify(tree,null,"	"))}function displayRawValue(e,n){var t=Project.getField(e),o=findNodeInTree(parseInt(n));o.values&&o.values[t.name]?(console.log(o.values[t.name]),$("#"+e+n).val(o.values[t.name])):$("#"+e+n).val("")}function toggle(e){var n=getAncestorTag(e,"tr"),t=parseInt(n.id.replace("rowid","")),o=document.getElementById("icon"+t);if(n.classList.contains("collapsed")){for(var r=document.querySelectorAll(".parent"+t),d=document.querySelectorAll(".iconp"+t),s=0;s<r.length;s++)r[s].style.display="",r[s].classList.add("collapsed");for(var s=0;s<d.length;s++)d[s].classList.contains("glyphicon-chevron-down")&&(d[s].classList.remove("glyphicon-chevron-down"),d[s].classList.add("glyphicon-chevron-right"));o.classList.remove("glyphicon-chevron-right"),o.classList.add("glyphicon-chevron-down"),n.classList.remove("collapsed"),n.classList.add("expanded")}else{for(var a=document.querySelectorAll(".ancestor"+t),s=0;s<a.length;s++)a[s].style.display="none";o.classList.remove("glyphicon-chevron-down"),o.classList.add("glyphicon-chevron-right"),n.classList.remove("expanded"),n.classList.add("collapsed")}}function updateFieldValue(e,n){updateNodeValueInTree(n,e,document.getElementById(e+n).value);for(var t=0;t<tree.nodes.length;t++)aggregate_any(tree.nodes[t],e)}function updateNodeValueInTree(e,n,t){for(var o=null,r=0;r<tree.nodes.length;r++)o=tree.nodes[r],o.id==e?(o.values||(o.values={}),o.values[n]=t):updateNodeValue(e,o,n,t)}function updateNodeValue(e,n,t,o){var r=null;if(n&&n.id==e)return n;if(n&&n.nodes&&n.nodes.length>0)for(var d=0;d<n.nodes.length;d++)if(r=updateNodeValue(e,n.nodes[d],t,o))return r.values||(r.values={}),r.values[t]=o,r;return null}var projects=null,tree,ENTER_KEY=13,MIN_COLUMN_WIDTH=70,GRIPS_WIDTH=16,selectProject=function(){var e=document.getElementById("projectSelector"),n=e.options[e.selectedIndex];"newProjectOption"===n.id?($("#editNewProjectNameInput").val("Type New Project Name and Press Enter to Create"),$("#editNewProjectNameInput").show().focus().select()):(e.value>0&&document.getElementById("selectProjectOption")&&$("#selectProjectOption").remove(),$.ajax({type:"GET",url:"api/tree?projectID="+e.value}).done(function(e){tree=e,displaySpreadSheet(),$("#tree-container").hide()}))},getDepth=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];if(o.indexOf("depth")>-1)return parseInt(o.replace("depth",""))}},getParentID=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];if(o.indexOf("parent")>-1)return parseInt(o.replace("parent",""))}},removeParent=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];o.indexOf("parent")>-1&&e.classList.remove(o)}},getAncestors=function(e){for(var n=[],t=e.className.split(" "),o=0;o<t.length;o++){var r=t[o];r.indexOf("ancestor")>-1&&n.push(r)}return n},removeAncestors=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];o.indexOf("ancestor")>-1&&e.classList.remove(o)}},addAncestors=function(e,n){for(var t=0;t<n.length;t++)e.classList.add(n[t])},setNewAncestors=function(e,n,t){removeParent(e),e.classList.add("parent"+t),removeAncestors(e),addAncestors(e,n)},moveAssembly=function(e,n,t,o){var r=findNodeInTree(t),d=findNodeInTree(n),s=findNodeInTree(e);if(r){if(r.nodes&&r.nodes.length>0)for(var a=0;a<r.nodes.length;a++)if(r.nodes[a].id===e){r.nodes.splice(a,1);break}}else for(var a=0;a<tree.nodes.length;a++)if(tree.nodes[a].id===e){tree.nodes.splice(a,1);break}d.nodes.push(s);var i=document.getElementById("rowid"+e),l=document.getElementById("datarowid"+e),c=document.getElementById("datarowid"+n),u=getAncestors(o);u.push("ancestor"+n),setNewAncestors(i,u,n);var f=getDepth(i),g=getDepth(o)+1;if(i.classList.remove("depth"+f),i.classList.add("depth"+g),document.getElementById("expandID"+e).style.marginLeft=10*g+"px",document.getElementById("nodeInput"+e).style.width=DEFAULT_NODE_INPUT_WIDTH-10*g+"px",$(l).remove(),$(l).insertAfter(c),s.nodes&&s.nodes.length>0)for(var a=s.nodes.length-1;a>=0;a--)moveNode(s.nodes[a],s.nodes[a].id,e,g+1,u)},moveNode=function(e,n,t,o,r){var d=document.getElementById("rowid"+n),s=document.getElementById("datarowid"+n),a=document.getElementById("rowid"+t),i=document.getElementById("datarowid"+t),l=getDepth(d),c=r.slice(0);if(c.push("ancestor"+t),setNewAncestors(d,c,t),d.classList.remove("depth"+l),d.classList.add("depth"+o),document.getElementById("expandID"+n).style.marginLeft=10*o+"px",$(d).remove(),$(d).insertAfter(a),$(s).remove(),$(s).insertAfter(i),e.nodes&&e.nodes.length>0)for(var u=e.nodes.length-1;u>=0;u--)moveNode(e.nodes[u],e.nodes[u].id,n,o+1,c)},findNodeInTree=function(e){if(tree.nodes&&tree.nodes.length>0)for(var n=0;n<tree.nodes.length;n++){var t=findNode(e,tree.nodes[n]);if(t)return t}},findNode=function(e,n){if(n.id===e)return n;if(n.nodes&&n.nodes.length>0)for(var t=0;t<n.nodes.length;t++){var o=findNode(e,n.nodes[t]);if(o)return o}},findParentInTree=function(e){if(tree.nodes&&tree.nodes.length>0)for(var n=0;n<tree.nodes.length;n++){var t=findParent(e,tree.nodes[n],null);if(t)return t}},findParent=function(e,n,t){if(n.id===e)return t;if(n.nodes&&n.nodes.length>0)for(var o=0;o<n.nodes.length;o++){var r=findParent(e,n.nodes[o],n);if(r)return r}},deleteNode=function(e){var n=getAncestorTag(e,"tr"),t=parseInt(n.id.replace("rowid","")),o=findNodeInTree(t),r=findParentInTree(t);removeNodeRow(o);for(var d=0;d<r.nodes.length;d++)if(r.nodes[d].id==t){r.nodes.splice(d,1);break}},removeNodeRow=function(e){var n=document.getElementById("rowid"+e.id);if($(n).remove(),e.nodes&&e.nodes.length>0)for(var t=0;t<e.nodes.length;t++)removeNodeRow(e.nodes[t])},copyNode=function(e){var n,t,o=getAncestorTag(e,"tr"),r=parseInt(o.id.replace("rowid","")),d=findNodeInTree(r),s=findParentInTree(r),a=jQuery.extend(!0,{},d);assignNewNodeIDs(a),void 0===s?(n=getNodeIndex(tree.nodes,d.id),tree.nodes.splice(n,0,a),t=addRow(a,0,"",0)):(n=getNodeIndex(s.nodes,d.id),s.nodes.splice(n,0,a),t=getAssemblyMarkup(a.id,d.id,getDepth(o))),$(t).insertBefore(o);var i=document.getElementById("rowid"+a.id);REDIPS.drag.enableDivs("init",i.getElementsByTagName("div"))},assignNewNodeIDs=function(e){if(e.id=tree.nextNodeID++,e.nodes&&e.nodes.length>0)for(var n=0;n<e.nodes.length;n++)assignNewNodeIDs(e.nodes[n])},getNodeIndex=function(e,n){var t=$.map(e,function(e,t){return e.id==n?t:void 0});return t[0]},getAncestorTag=function(e,n){for(n=n.toLowerCase();e&&e.parentNode;)if(e=e.parentNode,e.tagName&&e.tagName.toLowerCase()==n)return e},updateNodeName=function(e){var n=getAncestorTag(e,"tr"),t=parseInt(n.id.replace("rowid","")),o=findNodeInTree(t);o.name=e.value,$("#nodeInput"+t).attr("value",o.name)};
var Field=function(i){this.name=i,this.datatype=Field.NUMBER,this.format=Field.NUMBER_FORMAT,this.precision=2,this.agg_type=Field.NO_AGGREGATION,this.agg_qty_field=null};Field.NUMBER="0",Field.STRING="1",Field.CHOICE="2",Field.NO_AGGREGATION="0",Field.SUM_ANY_AGGREGATION="1",Field.NUMBER_FORMAT="0",Field.PERCENT_FORMAT="1",Field.SCIENTIFIC_FORMAT="2",Field.formatValue=function(i,e){if(i.datatype===Field.NUMBER){if(i.format===Field.NUMBER_FORMAT)return e.toFixed(i.precision);if(i.format===Field.PERCENT_FORMAT)return(100*e).toFixed(i.precision)+"%";if(i.format===Field.SCIENTIFIC_FORMAT)return Number(e).toExponential(i.precision)}else{if(i.datatype===Field.STRING)return e;i.datatype===Field.CHOICE}};
var Menu=function(){Menu.menu=this};Menu.menu,Menu.handleClick=function(e){var t=Menu.menu.getMenuItem(e,Menu.menu),n=Menu.menu.getMenuItemParent(e,Menu.menu);if(t.field){var u=Project.getField(t.field.name);u[t.varName]=t.value;for(var m=0;m<n.items.length;m++)$("#menuItem"+n.items[m].id).removeClass("checkedMenuItem").addClass("uncheckedMenuItem");$("#menuItem"+e).removeClass("uncheckedMenuItem").addClass("checkedMenuItem"),n===Menu.menu&&Project.updateFieldFormatting(u)}},Menu.prototype.getMenuItem=function(e,t){if(e===t.id)return t;if(t.items&&t.items.length>0)for(var n,u=0;u<t.items.length;u++)if(n=this.getMenuItem(e,t.items[u]))return n;return null},Menu.prototype.getMenuItemParent=function(e,t){if(t.items&&t.items.length>0)for(var n=0;n<t.items.length;n++){if(t.items[n].id===e)return t;var u=this.getMenuItemParent(e,t.items[n]);if(u)return u}return null};
var MenuItem=function(i,t,e,s){this.display=i,this.value=t,this.varName=e,this.field=s,this.items=[],this.id=MenuItem.id++,this.parent=-1,this.checked=s?s[e]===t:!1};MenuItem.id=0;
function Project(){}Project.getField=function(e){for(var t=0;t<tree.fields.length;t++){var a=tree.fields[t];if(a.name===e)return a}return null},Project.saveToDatabase=function(){$.ajax({type:"POST",url:"/api/tree",dataType:"json",data:{json:JSON.stringify(tree)}})},Project.updateFieldFormatting=function(e){$(".fieldInput"+e.name).each(function(t){var a=$(this).attr("id").replace(e.name,""),r=findNodeInTree(parseInt(a));if(r.values){var n=Number(r.values[e.name]);$(this).val(Field.formatValue(e,n))}})},Project.switchView=function(){$("#spreadSheetView").length?($("#spreadSheetView").remove(),displayTreeView(tree)):($("#tree-container").remove(),displaySpreadSheet())};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZy5qcyIsImNvbnN0YW50cy5qcyIsImRuZFRyZWUuanMiLCJkcmFnLWxpYi5qcyIsImRyYWcuanMiLCJpbml0LmpzIiwia2V5cy5qcyIsIm1hcmt1cC5qcyIsInByb2plY3QuanMiLCJyZXNpemUtY29sdW1uLmpzIiwidHJlZS5qcyIsIm1vZGVsL0ZpZWxkLmpzIiwibW9kZWwvTWVudS5qcyIsIm1vZGVsL01lbnVJdGVtLmpzIiwibW9kZWwvUHJvamVjdC5qcyJdLCJuYW1lcyI6WyJhZ2dyZWdhdGVfYW55Iiwibm9kZSIsImZpZWxkIiwibm9kZXMiLCJsZW5ndGgiLCJjaGlsZHJlblN1bSIsImkiLCJ2YWx1ZXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJET1dOX0FSUk9XX0lNQUdFX1BBVEgiLCJDSEVDS19NQVJLX0lNQUdFX1BBVEgiLCJCTEFOS19NQVJLX0lNQUdFX1BBVEgiLCJkaXNwbGF5VHJlZVZpZXciLCJ0cmVlRGF0YSIsInZpc2l0IiwicGFyZW50IiwidmlzaXRGbiIsImNoaWxkcmVuRm4iLCJjaGlsZHJlbiIsImNvdW50Iiwic29ydFRyZWUiLCJ0cmVlIiwic29ydCIsImEiLCJiIiwibmFtZSIsInRvTG93ZXJDYXNlIiwicGFuIiwiZG9tTm9kZSIsImRpcmVjdGlvbiIsInNwZWVkIiwicGFuU3BlZWQiLCJwYW5UaW1lciIsImNsZWFyVGltZW91dCIsInRyYW5zbGF0ZUNvb3JkcyIsImQzIiwidHJhbnNmb3JtIiwic3ZnR3JvdXAiLCJhdHRyIiwidHJhbnNsYXRlWCIsInRyYW5zbGF0ZSIsInRyYW5zbGF0ZVkiLCJzY2FsZVgiLCJzY2FsZSIsInNjYWxlWSIsInpvb21MaXN0ZW5lciIsInRyYW5zaXRpb24iLCJzZWxlY3QiLCJzZXRUaW1lb3V0Iiwiem9vbSIsImV2ZW50IiwiaW5pdGlhdGVEcmFnIiwiZCIsImRyYWdnaW5nTm9kZSIsInNlbGVjdEFsbCIsImxpbmtzIiwibm9kZVBhdGhzIiwiZGF0YSIsInRhcmdldCIsInJlbW92ZSIsIm5vZGVzRXhpdCIsImZpbHRlciIsInBhcmVudExpbmsiLCJkcmFnU3RhcnRlZCIsImVuZERyYWciLCJzZWxlY3RlZE5vZGUiLCJ1cGRhdGVUZW1wQ29ubmVjdG9yIiwidXBkYXRlIiwicm9vdCIsImNlbnRlck5vZGUiLCJleHBhbmQiLCJfY2hpbGRyZW4iLCJmb3JFYWNoIiwic291cmNlIiwieCIsInkwIiwieSIsIngwIiwidmlld2VyV2lkdGgiLCJ2aWV3ZXJIZWlnaHQiLCJkdXJhdGlvbiIsInRvZ2dsZUNoaWxkcmVuIiwiY2xpY2siLCJkZWZhdWx0UHJldmVudGVkIiwibGV2ZWxXaWR0aCIsImNoaWxkQ291bnQiLCJsZXZlbCIsIm4iLCJwdXNoIiwibmV3SGVpZ2h0IiwibWF4Iiwic2l6ZSIsInJldmVyc2UiLCJkZXB0aCIsIm1heExhYmVsTGVuZ3RoIiwibm9kZUVudGVyIiwiZW50ZXIiLCJhcHBlbmQiLCJjYWxsIiwiZHJhZ0xpc3RlbmVyIiwib24iLCJzdHlsZSIsInRleHQiLCJvdmVyQ2lyY2xlIiwib3V0Q2lyY2xlIiwibm9kZVVwZGF0ZSIsIm5vZGVFeGl0IiwiZXhpdCIsImxpbmsiLCJpbnNlcnQiLCJvIiwiZGlhZ29uYWwiLCIkIiwidG90YWxOb2RlcyIsInBhbkJvdW5kYXJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJsYXlvdXQiLCJzdmciLCJwcm9qZWN0aW9uIiwiTWF0aCIsImJlaGF2aW9yIiwic2NhbGVFeHRlbnQiLCJiYXNlU3ZnIiwiZHJhZyIsInNvdXJjZUV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwidGhpcyIsInJlbENvb3JkcyIsIm1vdXNlIiwiZ2V0IiwiZSIsImR5IiwiZHgiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJSRURJUFMiLCJpbml0IiwiZW5hYmxlRHJhZyIsImVuYWJsZURpdnMiLCJoYW5kbGVyT25Nb3VzZURvd24iLCJoYW5kbGVyT25Nb3VzZVVwIiwiaGFuZGxlck9uTW91c2VNb3ZlIiwiZWxlbWVudERyb3AiLCJyZXNldFN0eWxlcyIsInJlZ2lzdGVyRXZlbnRzIiwiY2VsbENoYW5nZWQiLCJoYW5kbGVyT25SZXNpemUiLCJzZXRUYWJsZVJvd0NvbHVtbiIsInNldFBvc2l0aW9uIiwic2V0VGRTdHlsZSIsImdldFRkU3R5bGUiLCJib3hPZmZzZXQiLCJjYWxjdWxhdGVDZWxscyIsImdldFNjcm9sbFBvc2l0aW9uIiwiYXV0b1Njcm9sbFgiLCJhdXRvU2Nyb2xsWSIsImNvcHlQcm9wZXJ0aWVzIiwiY2xvbmVMaW1pdCIsImdldFN0eWxlIiwiZmluZFBhcmVudCIsInJvd09wYWNpdHkiLCJyb3dDbG9uZSIsInJvd0Ryb3AiLCJub3JtYWxpemUiLCJiZ1N0eWxlT2xkIiwidGFibGUiLCJtb3ZlZCIsImNsb25lZCIsIndpbmRvd1Njcm9sbFBvc2l0aW9uIiwib2JqTWFyZ2luIiwic2NyZWVuIiwic2Nyb2xsRGF0YSIsImNvbnRhaW5lciIsIm9iaiIsImVkZ2UiLCJwYWdlIiwiZGl2IiwiZmxhZyIsImNsb25lZElkIiwiY3VycmVudENlbGwiLCJkcmFnQ29udGFpbmVyIiwiZGl2Qm94IiwicG9pbnRlciIsInRocmVzaG9sZCIsInNoaWZ0S2V5IiwiY2xvbmVDbGFzcyIsInJvdyIsInJvd19vbGQiLCJyb3dfc291cmNlIiwiY2VsbCIsImNlbGxfb2xkIiwiY2VsbF9zb3VyY2UiLCJvYmpPbGQiLCJob3ZlciIsImNvbG9yVGQiLCJjb2xvclRyIiwic2Nyb2xsIiwiZW5hYmxlIiwiYm91bmQiLCJib3JkZXJEaXNhYmxlZCIsIm9wYWNpdHlEaXNhYmxlZCIsInJvd0VtcHR5Q29sb3IiLCJ0ZCIsImNsb25lIiwia2V5RGl2Iiwia2V5Um93Iiwic2VuZEJhY2siLCJkcm9wIiwiY2xvbmVkRHJvcHBlZCIsImNsb25lZEVuZDEiLCJjbG9uZWRFbmQyIiwiZHJvcHBlZCIsImRyb3BwZWRCZWZvcmUiLCJmaW5pc2giLCJub3RDbG9uZWQiLCJub3RNb3ZlZCIsInJvd0NoYW5nZWQiLCJyb3dDbGlja2VkIiwicm93Q2xvbmVkIiwicm93RHJvcHBlZCIsInJvd0Ryb3BwZWRCZWZvcmUiLCJyb3dEcm9wcGVkU291cmNlIiwicm93TW92ZWQiLCJyb3dOb3RDbG9uZWQiLCJyb3dOb3RNb3ZlZCIsInJlZGlwc0Nsb25lIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwicmVkaXBzIiwiYWRkIiwid2luZG93Iiwib2Zmc2V0IiwicG9zaXRpb24iLCJYIiwiWSIsImV2dCIsImNhbmNlbEJ1YmJsZSIsImdldFNlbGVjdGlvbiIsInJlbW92ZUFsbFJhbmdlcyIsInNlbGVjdGlvbiIsInR5cGUiLCJlbXB0eSIsImVycm9yIiwiY2xpZW50WCIsImNsaWVudFkiLCJjbGFzc05hbWUiLCJjdXJyZW50IiwicGFyZW50Tm9kZSIsImVsIiwidGFibGVNaW5pIiwicm93T2JqIiwibm9kZU5hbWUiLCJ1bmRlZmluZWQiLCJpbm5lckhUTUwiLCJjbGFzc0xpc3QiLCJzb3VyY2VSb3ciLCJyb3dzIiwicm93SWR4IiwidHJNaW5pIiwiZGVsZXRlVGFibGVSb3ciLCJ0YmwiLCJlbXB0eVJvdyIsImRlbGV0ZVJvdyIsInJvd0luZGV4IiwidGFibGVSb3ciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJyX3JvdyIsIm10X3RyIiwib25zZWxlY3RzdGFydCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFdpZHRoIiwic2Nyb2xsSGVpZ2h0IiwiY2VsbHMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjbG9uZVNvdXJjZURpdiIsIm9ubW91c2Vkb3duIiwidG9wIiwibGVmdCIsInpJbmRleCIsInNjYSIsImRlbHRhWCIsImRlbHRhWSIsInNjcm9sbFBvc2l0aW9uIiwiYWJzIiwiY29udGFpblRhYmxlIiwicGFnZVlPZmZzZXQiLCJzY3JvbGxUb3AiLCJhdXRvc2Nyb2xsIiwibWlkc3RYIiwibWlkc3RZIiwicHJldmlvdXMiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJyb3dfb2Zmc2V0Iiwicm93X2ZvdW5kIiwidG9zIiwib2Zmc2V0SGVpZ2h0IiwicmkiLCJ0IiwidHIiLCJzIiwiY29sb3IiLCJ0b1N0cmluZyIsImJvcmRlclRyIiwiYm9yZGVyVG9wIiwiYm9yZGVyQm90dG9tIiwiYm9yZGVyVG9wV2lkdGgiLCJib3JkZXJUb3BTdHlsZSIsImJvcmRlclRvcENvbG9yIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJib3R0b20iLCJib3JkZXJCb3R0b21TdHlsZSIsImJvcmRlckJvdHRvbUNvbG9yIiwiYyIsInJpZ2h0IiwiYm9yZGVyIiwiYm94IiwiYm94X3Njcm9sbCIsIm9MZWZ0Iiwib1RvcCIsImJveE9sZCIsIm9mZnNldExlZnQiLCJzY3JvbGxMZWZ0Iiwib2Zmc2V0VG9wIiwib2Zmc2V0UGFyZW50Iiwib2Zmc2V0V2lkdGgiLCJjYiIsImRpc3BsYXkiLCJzY3JvbGxZIiwic2Nyb2xsWCIsInNvIiwicG9zIiwib2xkIiwibWF4c3AiLCJlZGdlQ3Jvc3NlZCIsImNsaWVudFdpZHRoIiwic2Nyb2xsQnkiLCJwYXJzZUludCIsImlzTmFOIiwiY2xpZW50SGVpZ2h0Iiwic3JjIiwiY2xuIiwiY2hpbGRzIiwiY29weSIsImUxIiwiZTIiLCJlbmFibGVkIiwiZWwxIiwiZWwyIiwidG4iLCJtYXRjaEFycmF5IiwibGltaXRUeXBlIiwibGltaXQiLCJjbGFzc2VzIiwibWF0Y2giLCJyZXBsYWNlIiwiZW5hYmxlX2ZsYWciLCJxdWVyeVNlbGVjdG9yQWxsIiwiaiIsImsiLCJib3JkZXJTdHlsZSIsIm9wYWNpdHkiLCJjdXJzb3IiLCJvdmVyZmxvdyIsInRibHMiLCJyZWdleERyYWciLCJyZWdleE5vQXV0b3Njcm9sbCIsImJvcmRlckVuYWJsZWQiLCJ0ZXN0Iiwic3R5bGVfbmFtZSIsImN1cnJlbnRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJkZWZhdWx0VmlldyIsInRhZ19uYW1lIiwic3RyIiwidGROb2RlTGlzdCIsImNoaWxkTm9kZXMiLCJub2RlVHlwZSIsImV2ZW50TmFtZSIsImhhbmRsZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJyZCIsIm5ld1BhcmVudFJvdyIsIm1vdmVkSUQiLCJtb3ZlZFJvdyIsIm5ld1BhcmVudElEIiwib2xkUGFyZW50SUQiLCJnZXRQYXJlbnRJRCIsIm1vdmVBc3NlbWJseSIsInJvd0RlbGV0ZWQiLCJyb3dVbmRlbGV0ZWQiLCJpbml0UHJvamVjdEFjdGlvbnMiLCJrZXl1cCIsImtleUNvZGUiLCJFTlRFUl9LRVkiLCJwcm9qZWN0QWN0aW9uRW50ZXJQcmVzc2VkIiwic2Nyb2xsQmFyV2lkdGgiLCJyZWFkeSIsImdldFNjcm9sbEJhcldpZHRoIiwib25rZXlkb3duIiwiY2hlY2tLZXkiLCJhamF4IiwidXJsIiwiZG9uZSIsInByb2plY3RzIiwiaHRtbCIsImdlbmVyYXRlSGVhZGVyTWFya3VwIiwiY3JlYXRlTmV3UHJvamVjdCIsImZpcnN0Q2hpbGQiLCJib2R5IiwiS0VZX1VQX0FSUk9XIiwicHJldmVudERlZmF1bHQiLCJwcmV2Um93IiwiZ2V0QW5jZXN0b3JUYWciLCJhY3RpdmVFbGVtZW50IiwicHJldiIsImdldE5leHRFbGVtZW50SUQiLCJmb2N1cyIsIktFWV9ET1dOX0FSUk9XIiwibmV4dFJvdyIsIm5leHQiLCJLRVlfUklHSFRfQVJST1ciLCJmaW5kIiwiS0VZX0xFRlRfQVJST1ciLCJuZXdSb3ciLCJzcGxpdCIsImZpZWxkTmFtZSIsImdlbmVyYXRlU3ByZWFkU2hlZXRNYXJrdXAiLCJtYXJrdXAiLCJnZW5lcmF0ZVByb2plY3RTZWxlY3Rvck1hcmt1cCIsImdlbmVyYXRlRmllbGRzUm93TWFya3VwIiwiZmllbGRzIiwiZ2V0RmllbGRIZWFkZXJNYXJrdXAiLCJnZW5lcmF0ZVRyZWVNYXJrdXAiLCJhZGRSb3ciLCJhbmNlc3RvcnMiLCJub2RlSUQiLCJkcmFnSGFuZGxlIiwiZGVsZXRlQnV0dG9uIiwiY29weUJ1dHRvbiIsInNob3dFeHBhbmRCdXR0b24iLCJoaWRlRXhwYW5kQnV0dG9uIiwiREVGQVVMVF9OT0RFX0lOUFVUX1dJRFRIIiwiZ2VuZXJhdGVEYXRhTWFya3VwIiwiYWRkRGF0YVJvdyIsIkZpZWxkIiwiZm9ybWF0VmFsdWUiLCJnZXRGaWVsZENlbGxNYXJrdXAiLCJhZGRDb2x1bW4iLCJlYWNoIiwiaXRlbSIsImdldEFzc2VtYmx5TWFya3VwIiwibmV3Tm9kZUlEIiwiZmluZE5vZGVJblRyZWUiLCJmaW5kUGFyZW50SW5UcmVlIiwiZ2V0RmllbGRNZW51TWFya3VwIiwiUHJvamVjdCIsImdldEZpZWxkIiwibWVudSIsIk1lbnUiLCJudW1iZXJJdGVtIiwiTWVudUl0ZW0iLCJOVU1CRVIiLCJmb3JtYXRJdGVtIiwibnVtYmVyRm9ybWF0SXRlbSIsIk5VTUJFUl9GT1JNQVQiLCJpdGVtcyIsImRpc3BsYXlTdHJpbmciLCJwZXJjZW50Rm9ybWF0SXRlbSIsIlBFUkNFTlRfRk9STUFUIiwic2NpZW50aWZpY0Zvcm1hdEl0ZW0iLCJTQ0lFTlRJRklDX0ZPUk1BVCIsImFnZ3JlZ2F0aW9uSXRlbSIsIk5PX0FHR1JFR0FUSU9OIiwic3VtQW55QWdnSXRlbSIsIlNVTV9BTllfQUdHUkVHQVRJT04iLCJmIiwiU1RSSU5HIiwiZ2VuZXJhdGVNZW51TWFya3VwIiwiY2hlY2tNYXJrQ2xhc3MiLCJjaGVja2VkIiwiZGlzcGxheVNwcmVhZFNoZWV0IiwiY3NzIiwidmFsIiwiaGlkZSIsIm5ld1Byb2plY3ROYW1lIiwibmV3UHJvamVjdElEIiwibmV4dFByb2plY3RJRCIsIm9wdGlvbiIsInByb2plY3RJRCIsInByb2plY3ROYW1lIiwidmVyc2lvbiIsIm5leHROb2RlSUQiLCJzYXZlVG9EYXRhYmFzZSIsInNob3dNZW51IiwiYXBwZW5kVG8iLCJtb3VzZWxlYXZlIiwiaGFuZGxlUHJvamVjdEFjdGlvbiIsInNob3ciLCJyZXNpemVDb2x1bW5MZWZ0IiwicmVzaXplRmllbGQiLCJzdGFydFJlc2l6ZSIsImdyaXAiLCJiaW5kIiwicmVzaXplRHJhZyIsInJlc2l6ZUVuZCIsInZpc2liaWxpdHkiLCJwYWdlWCIsInVuYmluZCIsIm5ld1dpZHRoIiwiR1JJUFNfV0lEVEgiLCJNSU5fQ09MVU1OX1dJRFRIIiwiY29sdW1uQ2VsbHMiLCJoYW5kbGVEYXRhU2Nyb2xsIiwicHJpbnRQcm9qZWN0IiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJkaXNwbGF5UmF3VmFsdWUiLCJ0b2dnbGUiLCJpY29uIiwiY29udGFpbnMiLCJjaGlsZHJlbkljb25zIiwiZGVzY2VuZGFudHMiLCJ1cGRhdGVGaWVsZFZhbHVlIiwidXBkYXRlTm9kZVZhbHVlSW5UcmVlIiwidXBkYXRlTm9kZVZhbHVlIiwiZm91bmQiLCJzZWxlY3RQcm9qZWN0IiwicHJvamVjdFNlbGVjdG9yIiwic2VsZWN0ZWRPcHRpb24iLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCIsImdldERlcHRoIiwicmVtb3ZlUGFyZW50IiwiZ2V0QW5jZXN0b3JzIiwicmVtb3ZlQW5jZXN0b3JzIiwiYWRkQW5jZXN0b3JzIiwic2V0TmV3QW5jZXN0b3JzIiwicGFyZW50SUQiLCJvbGRQYXJlbnROb2RlIiwibmV3UGFyZW50Tm9kZSIsIm1vdmVkTm9kZSIsIm1vdmVkRGF0YVJvdyIsInBhcmVudERhdGFSb3ciLCJvbGREZXB0aCIsIm5ld0RlcHRoIiwibWFyZ2luTGVmdCIsImluc2VydEFmdGVyIiwibW92ZU5vZGUiLCJub2RlUm93Iiwibm9kZURhdGFSb3ciLCJwYXJlbnRSb3ciLCJuZXdBbmNlc3RvcnMiLCJzbGljZSIsImZvdW5kTm9kZSIsImZpbmROb2RlIiwiZm91bmRQYXJlbnQiLCJkZWxldGVOb2RlIiwicmVtb3ZlTm9kZVJvdyIsImNvcHlOb2RlIiwibm9kZUluZGV4IiwibmV3Um93TWFya3VwIiwic291cmNlTm9kZSIsInNvdXJjZVBhcmVudE5vZGUiLCJuZXdOb2RlIiwialF1ZXJ5IiwiZXh0ZW5kIiwiYXNzaWduTmV3Tm9kZUlEcyIsImdldE5vZGVJbmRleCIsImluZGV4ZXMiLCJtYXAiLCJ0YWdOYW1lIiwidXBkYXRlTm9kZU5hbWUiLCJkYXRhdHlwZSIsImZvcm1hdCIsInByZWNpc2lvbiIsImFnZ190eXBlIiwiYWdnX3F0eV9maWVsZCIsIkNIT0lDRSIsInRvRml4ZWQiLCJOdW1iZXIiLCJ0b0V4cG9uZW50aWFsIiwiaGFuZGxlQ2xpY2siLCJjbGlja2VkIiwiZ2V0TWVudUl0ZW0iLCJnZXRNZW51SXRlbVBhcmVudCIsInZhck5hbWUiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwidXBkYXRlRmllbGRGb3JtYXR0aW5nIiwicHJvdG90eXBlIiwibWVudUl0ZW0iLCJkYXRhVHlwZSIsImpzb24iLCJzd2l0Y2hWaWV3Il0sIm1hcHBpbmdzIjoiQUFBQSxRQUFTQSxlQUFjQyxFQUFNQyxHQUUzQixHQUFJRCxFQUFLRSxPQUErQixJQUF0QkYsRUFBS0UsTUFBTUMsT0FZN0IsQ0FHRSxJQUFJLEdBRkFDLEdBQWMsRUFFVkMsRUFBSSxFQUFHQSxFQUFJTCxFQUFLRSxNQUFNQyxPQUFRRSxJQUVwQ0QsR0FBZUwsY0FBY0MsRUFBS0UsTUFBTUcsR0FBSUosRUFXOUMsT0FSSUQsR0FBS00sU0FFUE4sRUFBS00sV0FHUE4sRUFBS00sT0FBT0wsR0FBU0csRUFDckJHLFNBQVNDLGVBQWVQLEVBQVFELEVBQUtTLElBQUlDLE1BQVFOLEVBRTFDQSxFQTFCUCxNQUFJSixHQUFLTSxRQUFXTixFQUFLTSxPQUFPTCxHQU12QlUsV0FBV1gsRUFBS00sT0FBT0wsSUFKdkI7QUNOYixHQUFJVyx1QkFBd0Isd0JBQ3hCQyxzQkFBd0IsdUJBQ3hCQyxzQkFBd0I7QUNENUIsUUFBU0MsaUJBQWdCQyxHQW9DckIsUUFBU0MsR0FBTUMsRUFBUUMsRUFBU0MsR0FDNUIsR0FBS0YsRUFBTCxDQUVBQyxFQUFRRCxFQUVSLElBQUlHLEdBQVdELEVBQVdGLEVBQzFCLElBQUlHLEVBRUEsSUFBSyxHQUREQyxHQUFRRCxFQUFTbEIsT0FDWkUsRUFBSSxFQUFPaUIsRUFBSmpCLEVBQVdBLElBQ3ZCWSxFQUFNSSxFQUFTaEIsR0FB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QUUsb0JBQW9CaEgsUUFFdkJnSCxFQUFFLG9CQUFvQnJELFNBQ3RCL0MsZ0JBQWdCUyxRQUloQjJGLEVBQUUsbUJBQW1CckQsU0FDckI4YSIsImZpbGUiOiJobXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gYWdncmVnYXRlX2FueShub2RlLCBmaWVsZClcclxue1xyXG4gIGlmKCFub2RlLm5vZGVzIHx8IG5vZGUubm9kZXMubGVuZ3RoID09PSAwKVxyXG4gIHtcclxuICAgIGlmKCFub2RlLnZhbHVlcyB8fCAhbm9kZS52YWx1ZXNbZmllbGRdKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gMC4wO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChub2RlLnZhbHVlc1tmaWVsZF0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdmFyIGNoaWxkcmVuU3VtID0gMC4wO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBjaGlsZHJlblN1bSArPSBhZ2dyZWdhdGVfYW55KG5vZGUubm9kZXNbaV0sIGZpZWxkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZighbm9kZS52YWx1ZXMpXHJcbiAgICB7XHJcbiAgICAgIG5vZGUudmFsdWVzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgbm9kZS52YWx1ZXNbZmllbGRdID0gY2hpbGRyZW5TdW07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBtb2RlbFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGQgKyBub2RlLmlkKS52YWx1ZSA9IGNoaWxkcmVuU3VtOyAgICAgICAgIC8vdXBkYXRlIHRoZSB2aWV3XHJcblxyXG4gICAgcmV0dXJuIGNoaWxkcmVuU3VtO1xyXG4gIH1cclxufSIsInZhciBET1dOX0FSUk9XX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2Rvd24tYXJyb3cucG5nJztcclxudmFyIENIRUNLX01BUktfSU1BR0VfUEFUSCA9ICdpbWFnZXMvY2hlY2ttYXJrLnBuZyc7XHJcbnZhciBCTEFOS19NQVJLX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2JsYW5rbWFyay5wbmcnOyIsIi8vIEdldCBKU09OIGRhdGFcclxuZnVuY3Rpb24gZGlzcGxheVRyZWVWaWV3KHRyZWVEYXRhKVxyXG57XHJcbiAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwidHJlZS1jb250YWluZXJcIj48L2Rpdj4nKTtcclxuICAgIC8vdHJlZUpTT04gPSBkMy5qc29uKGpzb24sIGZ1bmN0aW9uKGVycm9yLCB0cmVlRGF0YSkge1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBub2RlcywgbWF4IGxhYmVsIGxlbmd0aFxyXG4gICAgdmFyIHRvdGFsTm9kZXMgPSAwO1xyXG4gICAgdmFyIG1heExhYmVsTGVuZ3RoID0gMDtcclxuICAgIC8vIHZhcmlhYmxlcyBmb3IgZHJhZy9kcm9wXHJcbiAgICB2YXIgc2VsZWN0ZWROb2RlID0gbnVsbDtcclxuICAgIHZhciBkcmFnZ2luZ05vZGUgPSBudWxsO1xyXG4gICAgLy8gcGFubmluZyB2YXJpYWJsZXNcclxuICAgIHZhciBwYW5TcGVlZCA9IDIwMDtcclxuICAgIHZhciBwYW5Cb3VuZGFyeSA9IDIwOyAvLyBXaXRoaW4gMjBweCBmcm9tIGVkZ2VzIHdpbGwgcGFuIHdoZW4gZHJhZ2dpbmcuXHJcbiAgICAvLyBNaXNjLiB2YXJpYWJsZXNcclxuICAgIHZhciBpID0gMDtcclxuICAgIHZhciBkdXJhdGlvbiA9IDc1MDtcclxuICAgIHZhciByb290O1xyXG5cclxuICAgIC8vIHNpemUgb2YgdGhlIGRpYWdyYW1cclxuICAgIHZhciB2aWV3ZXJXaWR0aCA9ICQoJyN0cmVlLWNvbnRhaW5lcicpLndpZHRoKCk7XHJcbiAgICB2YXIgdmlld2VySGVpZ2h0ID0gJCgnI3RyZWUtY29udGFpbmVyJykuaGVpZ2h0KCk7XHJcblxyXG4gICAgdmFyIHRyZWUgPSBkMy5sYXlvdXQudHJlZSgpXHJcbiAgICAgICAgLnNpemUoW3ZpZXdlckhlaWdodCwgdmlld2VyV2lkdGhdKTtcclxuICAgIFxyXG4gICAgdHJlZS5jaGlsZHJlbihmdW5jdGlvbihkKXsgcmV0dXJuIGQubm9kZXM7IH0pO1xyXG5cclxuICAgIC8vIGRlZmluZSBhIGQzIGRpYWdvbmFsIHByb2plY3Rpb24gZm9yIHVzZSBieSB0aGUgbm9kZSBwYXRocyBsYXRlciBvbi5cclxuICAgIHZhciBkaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpXHJcbiAgICAgICAgLnByb2plY3Rpb24oZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW2QueSwgZC54XTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyBBIHJlY3Vyc2l2ZSBoZWxwZXIgZnVuY3Rpb24gZm9yIHBlcmZvcm1pbmcgc29tZSBzZXR1cCBieSB3YWxraW5nIHRocm91Z2ggYWxsIG5vZGVzXHJcblxyXG4gICAgZnVuY3Rpb24gdmlzaXQocGFyZW50LCB2aXNpdEZuLCBjaGlsZHJlbkZuKSB7XHJcbiAgICAgICAgaWYgKCFwYXJlbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgdmlzaXRGbihwYXJlbnQpO1xyXG5cclxuICAgICAgICB2YXIgY2hpbGRyZW4gPSBjaGlsZHJlbkZuKHBhcmVudCk7XHJcbiAgICAgICAgaWYgKGNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IGNoaWxkcmVuLmxlbmd0aDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2aXNpdChjaGlsZHJlbltpXSwgdmlzaXRGbiwgY2hpbGRyZW5Gbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsbCB2aXNpdCBmdW5jdGlvbiB0byBlc3RhYmxpc2ggbWF4TGFiZWxMZW5ndGhcclxuICAgIHZpc2l0KHRyZWVEYXRhLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgdG90YWxOb2RlcysrO1xyXG4gICAgICAgIG1heExhYmVsTGVuZ3RoID0gTWF0aC5tYXgoZC5uYW1lLmxlbmd0aCwgbWF4TGFiZWxMZW5ndGgpO1xyXG5cclxuICAgIH0sIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICByZXR1cm4gZC5ub2RlcyAmJiBkLm5vZGVzLmxlbmd0aCA+IDAgPyBkLm5vZGVzIDogbnVsbDtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvLyBzb3J0IHRoZSB0cmVlIGFjY29yZGluZyB0byB0aGUgbm9kZSBuYW1lc1xyXG5cclxuICAgIGZ1bmN0aW9uIHNvcnRUcmVlKCkge1xyXG4gICAgICAgIHRyZWUuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiLm5hbWUudG9Mb3dlckNhc2UoKSA8IGEubmFtZS50b0xvd2VyQ2FzZSgpID8gMSA6IC0xO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gU29ydCB0aGUgdHJlZSBpbml0aWFsbHkgaW5jYXNlIHRoZSBKU09OIGlzbid0IGluIGEgc29ydGVkIG9yZGVyLlxyXG4gICAgc29ydFRyZWUoKTtcclxuXHJcbiAgICAvLyBUT0RPOiBQYW4gZnVuY3Rpb24sIGNhbiBiZSBiZXR0ZXIgaW1wbGVtZW50ZWQuXHJcblxyXG4gICAgZnVuY3Rpb24gcGFuKGRvbU5vZGUsIGRpcmVjdGlvbikge1xyXG4gICAgICAgIHZhciBzcGVlZCA9IHBhblNwZWVkO1xyXG4gICAgICAgIGlmIChwYW5UaW1lcikge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQocGFuVGltZXIpO1xyXG4gICAgICAgICAgICB0cmFuc2xhdGVDb29yZHMgPSBkMy50cmFuc2Zvcm0oc3ZnR3JvdXAuYXR0cihcInRyYW5zZm9ybVwiKSk7XHJcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT0gJ2xlZnQnIHx8IGRpcmVjdGlvbiA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVYID0gZGlyZWN0aW9uID09ICdsZWZ0JyA/IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF0gKyBzcGVlZCA6IHRyYW5zbGF0ZUNvb3Jkcy50cmFuc2xhdGVbMF0gLSBzcGVlZDtcclxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVkgPSB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzFdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSAndXAnIHx8IGRpcmVjdGlvbiA9PSAnZG93bicpIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVggPSB0cmFuc2xhdGVDb29yZHMudHJhbnNsYXRlWzBdO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNsYXRlWSA9IGRpcmVjdGlvbiA9PSAndXAnID8gdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVsxXSArIHNwZWVkIDogdHJhbnNsYXRlQ29vcmRzLnRyYW5zbGF0ZVsxXSAtIHNwZWVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNjYWxlWCA9IHRyYW5zbGF0ZUNvb3Jkcy5zY2FsZVswXTtcclxuICAgICAgICAgICAgc2NhbGVZID0gdHJhbnNsYXRlQ29vcmRzLnNjYWxlWzFdO1xyXG4gICAgICAgICAgICBzY2FsZSA9IHpvb21MaXN0ZW5lci5zY2FsZSgpO1xyXG4gICAgICAgICAgICBzdmdHcm91cC50cmFuc2l0aW9uKCkuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHRyYW5zbGF0ZVggKyBcIixcIiArIHRyYW5zbGF0ZVkgKyBcIilzY2FsZShcIiArIHNjYWxlICsgXCIpXCIpO1xyXG4gICAgICAgICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCdnLm5vZGUnKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgdHJhbnNsYXRlWCArIFwiLFwiICsgdHJhbnNsYXRlWSArIFwiKVwiKTtcclxuICAgICAgICAgICAgem9vbUxpc3RlbmVyLnNjYWxlKHpvb21MaXN0ZW5lci5zY2FsZSgpKTtcclxuICAgICAgICAgICAgem9vbUxpc3RlbmVyLnRyYW5zbGF0ZShbdHJhbnNsYXRlWCwgdHJhbnNsYXRlWV0pO1xyXG4gICAgICAgICAgICBwYW5UaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBwYW4oZG9tTm9kZSwgc3BlZWQsIGRpcmVjdGlvbik7XHJcbiAgICAgICAgICAgIH0sIDUwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSB6b29tIGZ1bmN0aW9uIGZvciB0aGUgem9vbWFibGUgdHJlZVxyXG5cclxuICAgIGZ1bmN0aW9uIHpvb20oKSB7XHJcbiAgICAgICAgc3ZnR3JvdXAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQzLmV2ZW50LnRyYW5zbGF0ZSArIFwiKXNjYWxlKFwiICsgZDMuZXZlbnQuc2NhbGUgKyBcIilcIik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIGRlZmluZSB0aGUgem9vbUxpc3RlbmVyIHdoaWNoIGNhbGxzIHRoZSB6b29tIGZ1bmN0aW9uIG9uIHRoZSBcInpvb21cIiBldmVudCBjb25zdHJhaW5lZCB3aXRoaW4gdGhlIHNjYWxlRXh0ZW50c1xyXG4gICAgdmFyIHpvb21MaXN0ZW5lciA9IGQzLmJlaGF2aW9yLnpvb20oKS5zY2FsZUV4dGVudChbMC4xLCAzXSkub24oXCJ6b29tXCIsIHpvb20pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGluaXRpYXRlRHJhZyhkLCBkb21Ob2RlKSB7XHJcbiAgICAgICAgZHJhZ2dpbmdOb2RlID0gZDtcclxuICAgICAgICBkMy5zZWxlY3QoZG9tTm9kZSkuc2VsZWN0KCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcbiAgICAgICAgZDMuc2VsZWN0QWxsKCcuZ2hvc3RDaXJjbGUnKS5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZSBzaG93Jyk7XHJcbiAgICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUgYWN0aXZlRHJhZycpO1xyXG5cclxuICAgICAgICBzdmdHcm91cC5zZWxlY3RBbGwoXCJnLm5vZGVcIikuc29ydChmdW5jdGlvbihhLCBiKSB7IC8vIHNlbGVjdCB0aGUgcGFyZW50IGFuZCBzb3J0IHRoZSBwYXRoJ3NcclxuICAgICAgICAgICAgaWYgKGEuaWQgIT0gZHJhZ2dpbmdOb2RlLmlkKSByZXR1cm4gMTsgLy8gYSBpcyBub3QgdGhlIGhvdmVyZWQgZWxlbWVudCwgc2VuZCBcImFcIiB0byB0aGUgYmFja1xyXG4gICAgICAgICAgICBlbHNlIHJldHVybiAtMTsgLy8gYSBpcyB0aGUgaG92ZXJlZCBlbGVtZW50LCBicmluZyBcImFcIiB0byB0aGUgZnJvbnRcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBpZiBub2RlcyBoYXMgY2hpbGRyZW4sIHJlbW92ZSB0aGUgbGlua3MgYW5kIG5vZGVzXHJcbiAgICAgICAgaWYgKG5vZGVzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGxpbmsgcGF0aHNcclxuICAgICAgICAgICAgbGlua3MgPSB0cmVlLmxpbmtzKG5vZGVzKTtcclxuICAgICAgICAgICAgbm9kZVBhdGhzID0gc3ZnR3JvdXAuc2VsZWN0QWxsKFwicGF0aC5saW5rXCIpXHJcbiAgICAgICAgICAgICAgICAuZGF0YShsaW5rcywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRhcmdldC5pZDtcclxuICAgICAgICAgICAgICAgIH0pLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgY2hpbGQgbm9kZXNcclxuICAgICAgICAgICAgbm9kZXNFeGl0ID0gc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpXHJcbiAgICAgICAgICAgICAgICAuZGF0YShub2RlcywgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmlkO1xyXG4gICAgICAgICAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZC5pZCA9PSBkcmFnZ2luZ05vZGUuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0pLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmVtb3ZlIHBhcmVudCBsaW5rXHJcbiAgICAgICAgcGFyZW50TGluayA9IHRyZWUubGlua3ModHJlZS5ub2RlcyhkcmFnZ2luZ05vZGUucGFyZW50KSk7XHJcbiAgICAgICAgc3ZnR3JvdXAuc2VsZWN0QWxsKCdwYXRoLmxpbmsnKS5maWx0ZXIoZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICBpZiAoZC50YXJnZXQuaWQgPT0gZHJhZ2dpbmdOb2RlLmlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSkucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIGRyYWdTdGFydGVkID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBkZWZpbmUgdGhlIGJhc2VTdmcsIGF0dGFjaGluZyBhIGNsYXNzIGZvciBzdHlsaW5nIGFuZCB0aGUgem9vbUxpc3RlbmVyXHJcbiAgICB2YXIgYmFzZVN2ZyA9IGQzLnNlbGVjdChcIiN0cmVlLWNvbnRhaW5lclwiKS5hcHBlbmQoXCJzdmdcIilcclxuICAgICAgICAuYXR0cihcIndpZHRoXCIsIHZpZXdlcldpZHRoKVxyXG4gICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHZpZXdlckhlaWdodClcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwib3ZlcmxheVwiKVxyXG4gICAgICAgIC5jYWxsKHpvb21MaXN0ZW5lcik7XHJcblxyXG5cclxuICAgIC8vIERlZmluZSB0aGUgZHJhZyBsaXN0ZW5lcnMgZm9yIGRyYWcvZHJvcCBiZWhhdmlvdXIgb2Ygbm9kZXMuXHJcbiAgICBkcmFnTGlzdGVuZXIgPSBkMy5iZWhhdmlvci5kcmFnKClcclxuICAgICAgICAub24oXCJkcmFnc3RhcnRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICBpZiAoZCA9PSByb290KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZHJhZ1N0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBub2RlcyA9IHRyZWUubm9kZXMoZCk7XHJcbiAgICAgICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAvLyBpdCdzIGltcG9ydGFudCB0aGF0IHdlIHN1cHByZXNzIHRoZSBtb3VzZW92ZXIgZXZlbnQgb24gdGhlIG5vZGUgYmVpbmcgZHJhZ2dlZC4gT3RoZXJ3aXNlIGl0IHdpbGwgYWJzb3JiIHRoZSBtb3VzZW92ZXIgZXZlbnQgYW5kIHRoZSB1bmRlcmx5aW5nIG5vZGUgd2lsbCBub3QgZGV0ZWN0IGl0IGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oXCJkcmFnXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgaWYgKGQgPT0gcm9vdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkcmFnU3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgZG9tTm9kZSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBpbml0aWF0ZURyYWcoZCwgZG9tTm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGdldCBjb29yZHMgb2YgbW91c2VFdmVudCByZWxhdGl2ZSB0byBzdmcgY29udGFpbmVyIHRvIGFsbG93IGZvciBwYW5uaW5nXHJcbiAgICAgICAgICAgIHJlbENvb3JkcyA9IGQzLm1vdXNlKCQoJ3N2ZycpLmdldCgwKSk7XHJcbiAgICAgICAgICAgIGlmIChyZWxDb29yZHNbMF0gPCBwYW5Cb3VuZGFyeSkge1xyXG4gICAgICAgICAgICAgICAgcGFuVGltZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFuKHRoaXMsICdsZWZ0Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzBdID4gKCQoJ3N2ZycpLndpZHRoKCkgLSBwYW5Cb3VuZGFyeSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBwYW5UaW1lciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBwYW4odGhpcywgJ3JpZ2h0Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVsQ29vcmRzWzFdIDwgcGFuQm91bmRhcnkpIHtcclxuICAgICAgICAgICAgICAgIHBhblRpbWVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhbih0aGlzLCAndXAnKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWxDb29yZHNbMV0gPiAoJCgnc3ZnJykuaGVpZ2h0KCkgLSBwYW5Cb3VuZGFyeSkpIHtcclxuICAgICAgICAgICAgICAgIHBhblRpbWVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhbih0aGlzLCAnZG93bicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocGFuVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZC54MCArPSBkMy5ldmVudC5keTtcclxuICAgICAgICAgICAgZC55MCArPSBkMy5ldmVudC5keDtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBkMy5zZWxlY3QodGhpcyk7XHJcbiAgICAgICAgICAgIG5vZGUuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQueTAgKyBcIixcIiArIGQueDAgKyBcIilcIik7XHJcbiAgICAgICAgICAgIHVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICAgICAgICB9KS5vbihcImRyYWdlbmRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICBpZiAoZCA9PSByb290KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZG9tTm9kZSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZE5vZGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIG5vdyByZW1vdmUgdGhlIGVsZW1lbnQgZnJvbSB0aGUgcGFyZW50LCBhbmQgaW5zZXJ0IGl0IGludG8gdGhlIG5ldyBlbGVtZW50cyBjaGlsZHJlblxyXG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZHJhZ2dpbmdOb2RlLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKGRyYWdnaW5nTm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyYWdnaW5nTm9kZS5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0ZWROb2RlLmNoaWxkcmVuICE9PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygc2VsZWN0ZWROb2RlLl9jaGlsZHJlbiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNlbGVjdGVkTm9kZS5jaGlsZHJlbiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWROb2RlLmNoaWxkcmVuLnB1c2goZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE5vZGUuX2NoaWxkcmVuLnB1c2goZHJhZ2dpbmdOb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZS5jaGlsZHJlbiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkTm9kZS5jaGlsZHJlbi5wdXNoKGRyYWdnaW5nTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgbm9kZSBiZWluZyBhZGRlZCB0byBpcyBleHBhbmRlZCBzbyB1c2VyIGNhbiBzZWUgYWRkZWQgbm9kZSBpcyBjb3JyZWN0bHkgbW92ZWRcclxuICAgICAgICAgICAgICAgIGV4cGFuZChzZWxlY3RlZE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgc29ydFRyZWUoKTtcclxuICAgICAgICAgICAgICAgIGVuZERyYWcoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVuZERyYWcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGVuZERyYWcoKSB7XHJcbiAgICAgICAgc2VsZWN0ZWROb2RlID0gbnVsbDtcclxuICAgICAgICBkMy5zZWxlY3RBbGwoJy5naG9zdENpcmNsZScpLmF0dHIoJ2NsYXNzJywgJ2dob3N0Q2lyY2xlJyk7XHJcbiAgICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLmF0dHIoJ2NsYXNzJywgJ25vZGUnKTtcclxuICAgICAgICAvLyBub3cgcmVzdG9yZSB0aGUgbW91c2VvdmVyIGV2ZW50IG9yIHdlIHdvbid0IGJlIGFibGUgdG8gZHJhZyBhIDJuZCB0aW1lXHJcbiAgICAgICAgZDMuc2VsZWN0KGRvbU5vZGUpLnNlbGVjdCgnLmdob3N0Q2lyY2xlJykuYXR0cigncG9pbnRlci1ldmVudHMnLCAnJyk7XHJcbiAgICAgICAgdXBkYXRlVGVtcENvbm5lY3RvcigpO1xyXG4gICAgICAgIGlmIChkcmFnZ2luZ05vZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdXBkYXRlKHJvb3QpO1xyXG4gICAgICAgICAgICBjZW50ZXJOb2RlKGRyYWdnaW5nTm9kZSk7XHJcbiAgICAgICAgICAgIGRyYWdnaW5nTm9kZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIGNvbGxhcHNpbmcgYW5kIGV4cGFuZGluZyBub2Rlcy5cclxuXHJcbiAgICBmdW5jdGlvbiBjb2xsYXBzZShkKSB7XHJcbiAgICAgICAgaWYgKGQuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgZC5fY2hpbGRyZW4gPSBkLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICBkLl9jaGlsZHJlbi5mb3JFYWNoKGNvbGxhcHNlKTtcclxuICAgICAgICAgICAgZC5jaGlsZHJlbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGV4cGFuZChkKSB7XHJcbiAgICAgICAgaWYgKGQuX2NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBkLl9jaGlsZHJlbjtcclxuICAgICAgICAgICAgZC5jaGlsZHJlbi5mb3JFYWNoKGV4cGFuZCk7XHJcbiAgICAgICAgICAgIGQuX2NoaWxkcmVuID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG92ZXJDaXJjbGUgPSBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgc2VsZWN0ZWROb2RlID0gZDtcclxuICAgICAgICB1cGRhdGVUZW1wQ29ubmVjdG9yKCk7XHJcbiAgICB9O1xyXG4gICAgdmFyIG91dENpcmNsZSA9IGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICBzZWxlY3RlZE5vZGUgPSBudWxsO1xyXG4gICAgICAgIHVwZGF0ZVRlbXBDb25uZWN0b3IoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIHRoZSB0ZW1wb3JhcnkgY29ubmVjdG9yIGluZGljYXRpbmcgZHJhZ2dpbmcgYWZmaWxpYXRpb25cclxuICAgIHZhciB1cGRhdGVUZW1wQ29ubmVjdG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuICAgICAgICBpZiAoZHJhZ2dpbmdOb2RlICE9PSBudWxsICYmIHNlbGVjdGVkTm9kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBoYXZlIHRvIGZsaXAgdGhlIHNvdXJjZSBjb29yZGluYXRlcyBzaW5jZSB3ZSBkaWQgdGhpcyBmb3IgdGhlIGV4aXN0aW5nIGNvbm5lY3RvcnMgb24gdGhlIG9yaWdpbmFsIHRyZWVcclxuICAgICAgICAgICAgZGF0YSA9IFt7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHtcclxuICAgICAgICAgICAgICAgICAgICB4OiBzZWxlY3RlZE5vZGUueTAsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogc2VsZWN0ZWROb2RlLngwXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogZHJhZ2dpbmdOb2RlLnkwLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IGRyYWdnaW5nTm9kZS54MFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGxpbmsgPSBzdmdHcm91cC5zZWxlY3RBbGwoXCIudGVtcGxpbmtcIikuZGF0YShkYXRhKTtcclxuXHJcbiAgICAgICAgbGluay5lbnRlcigpLmFwcGVuZChcInBhdGhcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInRlbXBsaW5rXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSlcclxuICAgICAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuXHJcbiAgICAgICAgbGluay5hdHRyKFwiZFwiLCBkMy5zdmcuZGlhZ29uYWwoKSk7XHJcblxyXG4gICAgICAgIGxpbmsuZXhpdCgpLnJlbW92ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBGdW5jdGlvbiB0byBjZW50ZXIgbm9kZSB3aGVuIGNsaWNrZWQvZHJvcHBlZCBzbyBub2RlIGRvZXNuJ3QgZ2V0IGxvc3Qgd2hlbiBjb2xsYXBzaW5nL21vdmluZyB3aXRoIGxhcmdlIGFtb3VudCBvZiBjaGlsZHJlbi5cclxuXHJcbiAgICBmdW5jdGlvbiBjZW50ZXJOb2RlKHNvdXJjZSkge1xyXG4gICAgICAgIHNjYWxlID0gem9vbUxpc3RlbmVyLnNjYWxlKCk7XHJcbiAgICAgICAgeCA9IC1zb3VyY2UueTA7XHJcbiAgICAgICAgeSA9IC1zb3VyY2UueDA7XHJcbiAgICAgICAgeCA9IHggKiBzY2FsZSArIHZpZXdlcldpZHRoIC8gMjtcclxuICAgICAgICB5ID0geSAqIHNjYWxlICsgdmlld2VySGVpZ2h0IC8gMjtcclxuICAgICAgICBkMy5zZWxlY3QoJ2cnKS50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHggKyBcIixcIiArIHkgKyBcIilzY2FsZShcIiArIHNjYWxlICsgXCIpXCIpO1xyXG4gICAgICAgIHpvb21MaXN0ZW5lci5zY2FsZShzY2FsZSk7XHJcbiAgICAgICAgem9vbUxpc3RlbmVyLnRyYW5zbGF0ZShbeCwgeV0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRvZ2dsZSBjaGlsZHJlbiBmdW5jdGlvblxyXG5cclxuICAgIGZ1bmN0aW9uIHRvZ2dsZUNoaWxkcmVuKGQpIHtcclxuICAgICAgICBpZiAoZC5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICBkLl9jaGlsZHJlbiA9IGQuY2hpbGRyZW47XHJcbiAgICAgICAgICAgIGQuY2hpbGRyZW4gPSBudWxsO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZC5fY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgZC5jaGlsZHJlbiA9IGQuX2NoaWxkcmVuO1xyXG4gICAgICAgICAgICBkLl9jaGlsZHJlbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRvZ2dsZSBjaGlsZHJlbiBvbiBjbGljay5cclxuXHJcbiAgICBmdW5jdGlvbiBjbGljayhkKSB7XHJcbiAgICAgICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjsgLy8gY2xpY2sgc3VwcHJlc3NlZFxyXG4gICAgICAgIGQgPSB0b2dnbGVDaGlsZHJlbihkKTtcclxuICAgICAgICB1cGRhdGUoZCk7XHJcbiAgICAgICAgY2VudGVyTm9kZShkKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGUoc291cmNlKSB7XHJcbiAgICAgICAgLy8gQ29tcHV0ZSB0aGUgbmV3IGhlaWdodCwgZnVuY3Rpb24gY291bnRzIHRvdGFsIGNoaWxkcmVuIG9mIHJvb3Qgbm9kZSBhbmQgc2V0cyB0cmVlIGhlaWdodCBhY2NvcmRpbmdseS5cclxuICAgICAgICAvLyBUaGlzIHByZXZlbnRzIHRoZSBsYXlvdXQgbG9va2luZyBzcXVhc2hlZCB3aGVuIG5ldyBub2RlcyBhcmUgbWFkZSB2aXNpYmxlIG9yIGxvb2tpbmcgc3BhcnNlIHdoZW4gbm9kZXMgYXJlIHJlbW92ZWRcclxuICAgICAgICAvLyBUaGlzIG1ha2VzIHRoZSBsYXlvdXQgbW9yZSBjb25zaXN0ZW50LlxyXG4gICAgICAgIHZhciBsZXZlbFdpZHRoID0gWzFdO1xyXG4gICAgICAgIHZhciBjaGlsZENvdW50ID0gZnVuY3Rpb24obGV2ZWwsIG4pIHtcclxuICAgICAgICAgICAgaWYgKG4ubm9kZXMgJiYgbi5ub2Rlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWxXaWR0aC5sZW5ndGggPD0gbGV2ZWwgKyAxKSBsZXZlbFdpZHRoLnB1c2goMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV2ZWxXaWR0aFtsZXZlbCArIDFdICs9IG4ubm9kZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgbi5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZENvdW50KGxldmVsICsgMSwgZCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2hpbGRDb3VudCgwLCByb290KTtcclxuICAgICAgICB2YXIgbmV3SGVpZ2h0ID0gZDMubWF4KGxldmVsV2lkdGgpICogMjU7IC8vIDI1IHBpeGVscyBwZXIgbGluZSAgXHJcbiAgICAgICAgdHJlZSA9IHRyZWUuc2l6ZShbbmV3SGVpZ2h0LCB2aWV3ZXJXaWR0aF0pO1xyXG5cclxuICAgICAgICAvLyBDb21wdXRlIHRoZSBuZXcgdHJlZSBsYXlvdXQuXHJcbiAgICAgICAgdmFyIG5vZGVzID0gdHJlZS5ub2Rlcyhyb290KS5yZXZlcnNlKCksXHJcbiAgICAgICAgICAgIGxpbmtzID0gdHJlZS5saW5rcyhub2Rlcyk7XHJcblxyXG4gICAgICAgIC8vIFNldCB3aWR0aHMgYmV0d2VlbiBsZXZlbHMgYmFzZWQgb24gbWF4TGFiZWxMZW5ndGguXHJcbiAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIGQueSA9IChkLmRlcHRoICogKG1heExhYmVsTGVuZ3RoICogMTApKTsgLy9tYXhMYWJlbExlbmd0aCAqIDEwcHhcclxuICAgICAgICAgICAgLy8gYWx0ZXJuYXRpdmVseSB0byBrZWVwIGEgZml4ZWQgc2NhbGUgb25lIGNhbiBzZXQgYSBmaXhlZCBkZXB0aCBwZXIgbGV2ZWxcclxuICAgICAgICAgICAgLy8gTm9ybWFsaXplIGZvciBmaXhlZC1kZXB0aCBieSBjb21tZW50aW5nIG91dCBiZWxvdyBsaW5lXHJcbiAgICAgICAgICAgIC8vIGQueSA9IChkLmRlcHRoICogNTAwKTsgLy81MDBweCBwZXIgbGV2ZWwuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgbm9kZXPigKZcclxuICAgICAgICBub2RlID0gc3ZnR3JvdXAuc2VsZWN0QWxsKFwiZy5ub2RlXCIpXHJcbiAgICAgICAgICAgIC5kYXRhKG5vZGVzLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5pZCB8fCAoZC5pZCA9ICsraSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBFbnRlciBhbnkgbmV3IG5vZGVzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cclxuICAgICAgICB2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcImdcIilcclxuICAgICAgICAgICAgLmNhbGwoZHJhZ0xpc3RlbmVyKVxyXG4gICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibm9kZVwiKVxyXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueTAgKyBcIixcIiArIHNvdXJjZS54MCArIFwiKVwiO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oJ2NsaWNrJywgY2xpY2spO1xyXG5cclxuICAgICAgICBub2RlRW50ZXIuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdub2RlQ2lyY2xlJylcclxuICAgICAgICAgICAgLmF0dHIoXCJyXCIsIDApXHJcbiAgICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuX2NoaWxkcmVuID8gXCJsaWdodHN0ZWVsYmx1ZVwiIDogXCIjZmZmXCI7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBub2RlRW50ZXIuYXBwZW5kKFwidGV4dFwiKVxyXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyAtMTAgOiAxMDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdub2RlVGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuY2hpbGRyZW4gfHwgZC5fY2hpbGRyZW4gPyBcImVuZFwiIDogXCJzdGFydFwiO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMCk7XHJcblxyXG4gICAgICAgIC8vIHBoYW50b20gbm9kZSB0byBnaXZlIHVzIG1vdXNlb3ZlciBpbiBhIHJhZGl1cyBhcm91bmQgaXRcclxuICAgICAgICBub2RlRW50ZXIuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdnaG9zdENpcmNsZScpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiclwiLCAzMClcclxuICAgICAgICAgICAgLmF0dHIoXCJvcGFjaXR5XCIsIDAuMikgLy8gY2hhbmdlIHRoaXMgdG8gemVybyB0byBoaWRlIHRoZSB0YXJnZXQgYXJlYVxyXG4gICAgICAgIC5zdHlsZShcImZpbGxcIiwgXCJyZWRcIilcclxuICAgICAgICAgICAgLmF0dHIoJ3BvaW50ZXItZXZlbnRzJywgJ21vdXNlb3ZlcicpXHJcbiAgICAgICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBvdmVyQ2lyY2xlKG5vZGUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRDaXJjbGUobm9kZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIHRleHQgdG8gcmVmbGVjdCB3aGV0aGVyIG5vZGUgaGFzIGNoaWxkcmVuIG9yIG5vdC5cclxuICAgICAgICBub2RlLnNlbGVjdCgndGV4dCcpXHJcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5jaGlsZHJlbiB8fCBkLl9jaGlsZHJlbiA/IC0xMCA6IDEwO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkLmNoaWxkcmVuIHx8IGQuX2NoaWxkcmVuID8gXCJlbmRcIiA6IFwic3RhcnRcIjtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQubmFtZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIENoYW5nZSB0aGUgY2lyY2xlIGZpbGwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgaXQgaGFzIGNoaWxkcmVuIGFuZCBpcyBjb2xsYXBzZWRcclxuICAgICAgICBub2RlLnNlbGVjdChcImNpcmNsZS5ub2RlQ2lyY2xlXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiclwiLCA0LjUpXHJcbiAgICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQuX2NoaWxkcmVuID8gXCJsaWdodHN0ZWVsYmx1ZVwiIDogXCIjZmZmXCI7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBUcmFuc2l0aW9uIG5vZGVzIHRvIHRoZWlyIG5ldyBwb3NpdGlvbi5cclxuICAgICAgICB2YXIgbm9kZVVwZGF0ZSA9IG5vZGUudHJhbnNpdGlvbigpXHJcbiAgICAgICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcclxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC55ICsgXCIsXCIgKyBkLnggKyBcIilcIjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEZhZGUgdGhlIHRleHQgaW5cclxuICAgICAgICBub2RlVXBkYXRlLnNlbGVjdChcInRleHRcIilcclxuICAgICAgICAgICAgLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIDEpO1xyXG5cclxuICAgICAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgICAgICB2YXIgbm9kZUV4aXQgPSBub2RlLmV4aXQoKS50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBzb3VyY2UueSArIFwiLFwiICsgc291cmNlLnggKyBcIilcIjtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICBub2RlRXhpdC5zZWxlY3QoXCJjaXJjbGVcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJyXCIsIDApO1xyXG5cclxuICAgICAgICBub2RlRXhpdC5zZWxlY3QoXCJ0ZXh0XCIpXHJcbiAgICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCAwKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBsaW5rc+KAplxyXG4gICAgICAgIHZhciBsaW5rID0gc3ZnR3JvdXAuc2VsZWN0QWxsKFwicGF0aC5saW5rXCIpXHJcbiAgICAgICAgICAgIC5kYXRhKGxpbmtzLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZC50YXJnZXQuaWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBFbnRlciBhbnkgbmV3IGxpbmtzIGF0IHRoZSBwYXJlbnQncyBwcmV2aW91cyBwb3NpdGlvbi5cclxuICAgICAgICBsaW5rLmVudGVyKCkuaW5zZXJ0KFwicGF0aFwiLCBcImdcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHNvdXJjZS54MCxcclxuICAgICAgICAgICAgICAgICAgICB5OiBzb3VyY2UueTBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlhZ29uYWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbyxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IG9cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVHJhbnNpdGlvbiBsaW5rcyB0byB0aGVpciBuZXcgcG9zaXRpb24uXHJcbiAgICAgICAgbGluay50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgICAuYXR0cihcImRcIiwgZGlhZ29uYWwpO1xyXG5cclxuICAgICAgICAvLyBUcmFuc2l0aW9uIGV4aXRpbmcgbm9kZXMgdG8gdGhlIHBhcmVudCdzIG5ldyBwb3NpdGlvbi5cclxuICAgICAgICBsaW5rLmV4aXQoKS50cmFuc2l0aW9uKClcclxuICAgICAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxyXG4gICAgICAgICAgICAuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogc291cmNlLngsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogc291cmNlLnlcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlhZ29uYWwoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbyxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IG9cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIC8vIFN0YXNoIHRoZSBvbGQgcG9zaXRpb25zIGZvciB0cmFuc2l0aW9uLlxyXG4gICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICBkLngwID0gZC54O1xyXG4gICAgICAgICAgICBkLnkwID0gZC55O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwcGVuZCBhIGdyb3VwIHdoaWNoIGhvbGRzIGFsbCBub2RlcyBhbmQgd2hpY2ggdGhlIHpvb20gTGlzdGVuZXIgY2FuIGFjdCB1cG9uLlxyXG4gICAgdmFyIHN2Z0dyb3VwID0gYmFzZVN2Zy5hcHBlbmQoXCJnXCIpO1xyXG5cclxuICAgIC8vIERlZmluZSB0aGUgcm9vdFxyXG4gICAgcm9vdCA9IHRyZWVEYXRhO1xyXG4gICAgcm9vdC54MCA9IHZpZXdlckhlaWdodCAvIDI7XHJcbiAgICByb290LnkwID0gMDtcclxuXHJcbiAgICAvLyBMYXlvdXQgdGhlIHRyZWUgaW5pdGlhbGx5IGFuZCBjZW50ZXIgb24gdGhlIHJvb3Qgbm9kZS5cclxuICAgIHVwZGF0ZShyb290KTtcclxuICAgIGNlbnRlck5vZGUocm9vdCk7XHJcbi8vfSk7XHJcbn0iLCIvKlxyXG5Db3B5cmlnaHQgKGMpIDIwMDgtMjAxMSwgd3d3LnJlZGlwcy5uZXQgQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuQ29kZSBsaWNlbnNlZCB1bmRlciB0aGUgQlNEIExpY2Vuc2U6IGh0dHA6Ly93d3cucmVkaXBzLm5ldC9saWNlbnNlL1xyXG5odHRwOi8vd3d3LnJlZGlwcy5uZXQvamF2YXNjcmlwdC9kcmFnLWFuZC1kcm9wLXRhYmxlLWNvbnRlbnQvXHJcbiovXHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBSRURJUFMgPSBSRURJUFMgfHwge307ICAgICAgLy9jcmVhdGUgUkVESVBTIG5hbWVzcGFjZSAoaWYgaXMgbm90IGFscmVhZHkgZGVmaW5lZCBpbiBhbm90aGVyIFJFRElQUyBwYWNrYWdlKVxyXG5cclxuLy9SRURJUFMuZHJhZyBpcyBhIEphdmFTY3JpcHQgZHJhZyBhbmQgZHJvcCBsaWJyYXJ5IGZvY3VzZWQgb24gZHJhZ2dpbmcgdGFibGUgY29udGVudCAoRElWIGVsZW1lbnRzKSBhbmQgdGFibGUgcm93cy5cclxuUkVESVBTLmRyYWcgPSAoZnVuY3Rpb24gKClcclxue1xyXG4gICAgLy8gbWV0aG9kc1xyXG4gIHZhciBpbml0LCAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb25cclxuICAgIGVuYWJsZURyYWcsICAgICAgICAgLy8gbWV0aG9kIGF0dGFjaGVzIC8gZGV0YWNoZXMgb25tb3VzZWRvd24gYW5kIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXJzIGZvciBESVYgZWxlbWVudHNcclxuICAgIGVuYWJsZURpdnMsXHJcbiAgICBoYW5kbGVyT25Nb3VzZURvd24sICAgICAvLyBvbm1vdXNlZG93biBoYW5kbGVyXHJcbiAgICBoYW5kbGVyT25Nb3VzZVVwLCAgICAgLy8gb25tb3VzZXVwIGhhbmRsZXJcclxuICAgIGhhbmRsZXJPbk1vdXNlTW92ZSwgICAgIC8vIG9ubW91c2Vtb3ZlIGhhbmRsZXIgZm9yIHRoZSBkb2N1bWVudCBsZXZlbFxyXG4gICAgZWxlbWVudERyb3AsICAgICAgICAvLyBkcm9wIGVsZW1lbnQgdG8gdGhlIHRhYmxlIGNlbGxcclxuICAgIHJlc2V0U3R5bGVzLCAgICAgICAgLy8gcmVzZXQgb2JqZWN0IHN0eWxlcyBhZnRlciBlbGVtZW50IGlzIGRyb3BwZWRcclxuICAgIHJlZ2lzdGVyRXZlbnRzLCAgICAgICAvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgZm9yIERJViBlbGVtZW50XHJcbiAgICBjZWxsQ2hhbmdlZCwgICAgICAgIC8vIHByaXZhdGUgbWV0aG9kIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSgpLCBhdXRvU2Nyb2xsWCgpLCBhdXRvU2Nyb2xsWSgpXHJcbiAgICBoYW5kbGVyT25SZXNpemUsICAgICAgLy8gb25yZXNpemUgd2luZG93IGV2ZW50IGhhbmRsZXJcclxuICAgIHNldFRhYmxlUm93Q29sdW1uLCAgICAgIC8vIGZ1bmN0aW9uIHNldHMgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsXHJcbiAgICBzZXRQb3NpdGlvbiwgICAgICAgIC8vIGZ1bmN0aW9uIHNldHMgY29sb3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlIGNlbGwgYW5kIHJlbWVtYmVycyBwcmV2aW91cyBwb3NpdGlvbiBhbmQgY29sb3JcclxuICAgIHNldFRkU3R5bGUsICAgICAgICAgLy8gbWV0aG9kIHNldHMgYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcyBmb3IgVERcclxuICAgIGdldFRkU3R5bGUsICAgICAgICAgLy8gbWV0aG9kIHJldHVybnMgb2JqZWN0IGNvbnRhaW5pbmcgYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcyBmb3IgVERcclxuICAgIGJveE9mZnNldCwgICAgICAgICAgLy8gY2FsY3VsYXRlcyBvYmplY3QgKGJveCkgb2Zmc2V0ICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpXHJcbiAgICBjYWxjdWxhdGVDZWxscywgICAgICAgLy8gY2FsY3VsYXRlcyB0YWJsZSBjb2x1bW5zIGFuZCByb3cgb2Zmc2V0cyAoY2VsbHMgZGltZW5zaW9ucylcclxuICAgIGdldFNjcm9sbFBvc2l0aW9uLCAgICAgIC8vIHJldHVybnMgc2Nyb2xsIHBvc2l0aW9ucyBpbiBhcnJheVxyXG4gICAgYXV0b1Njcm9sbFgsICAgICAgICAvLyBob3Jpem9udGFsIGF1dG8gc2Nyb2xsIGZ1bmN0aW9uXHJcbiAgICBhdXRvU2Nyb2xsWSwgICAgICAgIC8vIHZlcnRpY2FsIGF1dG8gc2Nyb2xsIGZ1bmN0aW9uXHJcbiAgICBjb3B5UHJvcGVydGllcywgICAgICAgLy8gbWV0aG9kIGNvcGllcyBjdXN0b20gcHJvcGVydGllcyBmcm9tIHNvdXJjZSBlbGVtZW50IHRvIHRoZSBjbG9uZWQgZWxlbWVudC5cclxuICAgIGNsb25lTGltaXQsICAgICAgICAgLy8gY2xvbmUgbGltaXQgKGFmdGVyIGNsb25pbmcgb2JqZWN0LCB0YWtlIGNhcmUgYWJvdXQgY2xpbWl0MV9YIG9yIGNsaW1pdDJfWCBjbGFzc25hbWVzKVxyXG4gICAgZ2V0U3R5bGUsICAgICAgICAgLy8gbWV0aG9kIHJldHVybnMgc3R5bGUgdmFsdWUgb2YgcmVxdWVzdGVkIG9iamVjdCBhbmQgc3R5bGUgbmFtZVxyXG4gICAgZmluZFBhcmVudCwgICAgICAgICAvLyBtZXRob2QgcmV0dXJucyBhIHJlZmVyZW5jZSBvZiB0aGUgcmVxdWlyZWQgcGFyZW50IGVsZW1lbnRcclxuICAgIHJvd09wYWNpdHksICAgICAgICAgLy8gbWV0aG9kIHNldHMgb3BhY2l0eSB0byB0YWJsZSByb3cgKGVsLCBvcGFjaXR5LCBjb2xvcilcclxuICAgIHJvd0Nsb25lLCAgICAgICAgIC8vIGNsb25lIHRhYmxlIHJvdyAtIGlucHV0IHBhcmFtZXRlciBpcyBESVYgd2l0aCBjbGFzcyBuYW1lIFwicmVkaXBzLXJvd1wiIC0+IERJViBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIlxyXG4gICAgcm93RHJvcCwgICAgICAgICAgLy8gZnVuY3Rpb24gZHJvcHMgKGRlbGV0ZSBvbGQgJiBpbnNlcnQgbmV3KSB0YWJsZSByb3cgKGlucHV0IHBhcmFtZXRlcnMgYXJlIGN1cnJlbnQgdGFibGUgYW5kIHJvdylcclxuICAgIG5vcm1hbGl6ZSwgICAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2QgcmV0dXJucyBub3JtYWxpemVkIHNwYWNlcyBmcm9tIGlucHV0IHN0cmluZ1xyXG5cclxuICAgIC8vIHByaXZhdGUgcGFyYW1ldGVyc1xyXG4gICAgb2JqTWFyZ2luID0gbnVsbCwgICAgIC8vIHNwYWNlIGZyb20gY2xpY2tlZCBwb2ludCB0byB0aGUgb2JqZWN0IGJvdW5kcyAodG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KVxyXG5cclxuICAgIC8vIHdpbmRvdyB3aWR0aCBhbmQgaGVpZ2h0IChwYXJhbWV0ZXJzIGFyZSBzZXQgaW4gb25sb2FkIGFuZCBvbnJlc2l6ZSBldmVudCBoYW5kbGVyKSwganVzdCBmb3IgYSBub3RlOiB3aW5kb3cgYW5kIFdpbmRvdyBpcyByZXNlcnZlZCB3b3JkIGluIEpTIHNvIEkgbmFtZWQgdmFyaWFibGUgXCJzY3JlZW5cIilcclxuICAgIHNjcmVlbiA9IHt3aWR0aDogMCwgaGVpZ2h0OiAwfSxcclxuXHJcbiAgICAvLyBkZWZpbmUgc2Nyb2xsIG9iamVjdCB3aXRoIGNvbnRhaW5lZCBwcm9wZXJ0aWVzICh0aGlzIGlzIHByaXZhdGUgcHJvcGVydHkpXHJcbiAgICBzY3JvbGxEYXRhID0ge3dpZHRoIDogbnVsbCwgLy8gc2Nyb2xsIHdpZHRoIG9mIHRoZSB3aW5kb3cgKGl0IGlzIHVzdWFsbHkgZ3JlYXRlciB0aGVuIHdpbmRvdylcclxuICAgICAgICBoZWlnaHQgOiBudWxsLCAgICAvLyBzY3JvbGwgaGVpZ2h0IG9mIHRoZSB3aW5kb3cgKGl0IGlzIHVzdWFsbHkgZ3JlYXRlciB0aGVuIHdpbmRvdylcclxuICAgICAgICBjb250YWluZXIgOiBbXSwgICAvLyBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhcyAoY29udGFpbnMgYXV0b3Njcm9sbCBhcmVhcywgcmVmZXJlbmNlIHRvIHRoZSBjb250YWluZXIgYW5kIHNjcm9sbCBkaXJlY3Rpb24pXHJcbiAgICAgICAgb2JqIDogbnVsbH0sICAgIC8vIHNjcm9sbCBvYmplY3QgKG5lZWRlZCBpbiBhdXRvc2Nyb2xsIGZvciByZWN1cnNpdmUgY2FsbHMpXHJcblxyXG4gICAgZWRnZSA9IHtwYWdlOiB7eDogMCwgeTogMH0sIC8vIGF1dG9zY3JvbGwgYm91bmQgdmFsdWVzIGZvciBwYWdlIGFuZCBkaXYgYXMgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICBkaXY6ICB7eDogMCwgeTogMH0sIC8vIGNsb3NlciB0byB0aGUgZWRnZSwgZmFzdGVyIHNjcm9sbGluZ1xyXG4gICAgICAgIGZsYWc6IHt4OiAwLCB5OiAwfX0sLy8gZmxhZ3MgYXJlIG5lZWRlZCB0byBwcmV2ZW50IG11bHRpcGxlIGNhbGxzIG9mIGF1dG9TY3JvbGxYIGFuZCBhdXRvU2Nyb2xsWSBmcm9tIG9ubW91c2Vtb3ZlIGV2ZW50IGhhbmRsZXJcclxuXHJcbiAgICBiZ1N0eWxlT2xkLCAgICAgICAgIC8vIChvYmplY3QpIG9sZCB0ZCBzdHlsZXMgKGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMpXHJcblxyXG4gICAgdGFibGUsICAgICAgICAvLyB0YWJsZSBvZmZzZXRzIGFuZCByb3cgb2Zmc2V0cyAoaW5pdGlhbGl6ZWQgaW4gb25sb2FkIGV2ZW50KVxyXG4gICAgbW92ZWQsICAgICAgICAgICAgLy8gKGJvb2xlYW4pIHRydWUgaWYgZWxlbWVudCBpcyBtb3ZlZFxyXG4gICAgY2xvbmVkLCAgICAgICAgICAgLy8gKGJvb2xlYW4pIHRydWUgaWYgZWxlbWVudCBpcyBjbG9uZWRcclxuICAgIGNsb25lZElkID0gW10sICAgICAgICAvLyBuZWVkZWQgZm9yIGluY3JlbWVudCBJRCBvZiBjbG9uZWQgZWxlbWVudHNcclxuICAgIGN1cnJlbnRDZWxsID0gW10sICAgICAvLyBjdXJyZW50IGNlbGwgYm91bmRzICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpIGFuZCBcImNvbnRhaW5UYWJsZVwiIGZsYWcgZm9yIG5lc3RlZCB0YWJsZXNcclxuICAgIGRyYWdDb250YWluZXIgPSBudWxsLCAgIC8vIGRyYWcgY29udGFpbmVyIHJlZmVyZW5jZVxyXG4gICAgZGl2Qm94ID0gbnVsbCwgICAgICAgIC8vIGRpdiBkcmFnIGJveDogdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0IG1hcmdpbiAoZGVjcmVhc2UgbnVtYmVyIGNhbGxzIG9mIHNldFRhYmxlUm93Q29sdW1uKVxyXG4gICAgcG9pbnRlciA9IHt4OiAwLCB5OiAwfSwgICAvLyBtb3VzZSBwb2ludGVyIHBvc2l0aW9uICh0aGlzIHByb3BlcnRpZXMgYXJlIHNldCBpbiBoYW5kbGVyT25Nb3VzZU1vdmUoKSAtIG5lZWRlZCBmb3IgYXV0b3Njcm9sbClcclxuICAgIHRocmVzaG9sZCA9IHt4OiAwLCAgICAgIC8vIGluaXRpYWwgeCwgeSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgdmFsdWU6IDcsICAgLy8gdGhyZXNob2xkIGRpc3RhbmNlIHZhbHVlXHJcbiAgICAgICAgICBmbGFnOiBmYWxzZX0sIC8vIHRocmVzaG9sZCBmbGFnXHJcbiAgICBzaGlmdEtleSA9IGZhbHNlLCAgICAgLy8gKGJvb2xlYW4pIHRydWUgaWYgc2hpZnQga2V5IGlzIHByZXNzZWQgKHNldCBpbiBoYW5kbGVyX21vdXNlZG93bilcclxuICAgIGNsb25lQ2xhc3MgPSBmYWxzZSwgICAgIC8vIChib29sZWFuKSB0cnVlIGlmIGNsaWNrZWQgZWxlbWVudCBjb250YWlucyBjbG9uZSBpbiBjbGFzcyBuYW1lIChzZXQgaW4gaGFuZGxlcl9tb3VzZWRvd24pXHJcbiAgICB3aW5kb3dTY3JvbGxQb3NpdGlvbiwgICAvLyAoYXJyYXkpIHRvcCBhbmQgbGVmdCB3aW5kb3cgb2Zmc2V0IChzZXQgaW4gY2FsY3VsYXRlQ2VsbHMgYW5kIHVzZWQgaW4gYm94T2Zmc2V0KVxyXG5cclxuICAgIC8vIHNlbGVjdGVkLCBwcmV2aW91cyBhbmQgc291cmNlIHJvdyBhbmQgY2VsbCAocHJpdmF0ZSBwYXJhbWV0ZXJzIHRvbylcclxuICAgIHJvdyA9IG51bGwsXHJcbiAgICByb3dfb2xkID0gbnVsbCxcclxuICAgIHJvd19zb3VyY2UgPSBudWxsLFxyXG4gICAgY2VsbCA9IG51bGwsXHJcbiAgICBjZWxsX29sZCA9IG51bGwsXHJcbiAgICBjZWxsX3NvdXJjZSA9IG51bGwsXHJcblxyXG4gICAgLy8gdmFyaWFibGVzIGluIHRoZSBwcml2YXRlIHNjb3BlIHJldmVhbGVkIGFzIHB1YmxpYyAoc2VlIGluaXQoKSBtZXRob2QpXHJcbiAgICBvYmogPSBmYWxzZSwgICAgICAgIC8vIChvYmplY3QpIG1vdmVkIG9iamVjdFxyXG4gICAgb2JqT2xkID0gZmFsc2UsICAgICAgIC8vIChvYmplY3QpIHByZXZpb3VzbHkgbW92ZWQgb2JqZWN0IChiZWZvcmUgY2xpY2tlZCBvciBjbG9uZWQpXHJcbiAgICBob3ZlciA9IHtjb2xvclRkOiAnI0ZGQ0ZBRScsIGNvbG9yVHI6ICcjOUJCM0RBJ30sXHJcbiAgICBzY3JvbGwgPSB7ZW5hYmxlIDogdHJ1ZSwgIC8vIChib29sZWFuKSBlbmFibGUvZGlzYWJsZSBhdXRvc2Nyb2xsIGZ1bmN0aW9uIChkZWZhdWx0IGlzIHRydWUpXHJcbiAgICAgICAgYm91bmQgOiAyNSwgICAgIC8vIChpbnRlZ2VyKSBib3VuZCB3aWR0aCBmb3IgYXV0b3Njcm9sbFxyXG4gICAgICAgIHNwZWVkIDogMjB9LCAgICAvLyAoaW50ZWdlcikgc2Nyb2xsIHNwZWVkIGluIG1pbGxpc2Vjb25kc1xyXG4gICAgc3R5bGUgPSB7Ly9ib3JkZXJFbmFibGVkIDogJ3NvbGlkJywgLy8gKHN0cmluZykgYm9yZGVyIHN0eWxlIGZvciBlbmFibGVkIGVsZW1lbnRzXHJcbiAgICAgICAgYm9yZGVyRGlzYWJsZWQgOiAnZG90dGVkJywgIC8vIChzdHJpbmcpIGJvcmRlciBzdHlsZSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgICBvcGFjaXR5RGlzYWJsZWQgOiAnJywgICAvLyAoaW50ZWdlcikgc2V0IG9wYWNpdHkgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgICAgcm93RW1wdHlDb2xvciA6ICd3aGl0ZSd9LCAvLyAoc3RyaW5nKSBjb2xvciBvZiBlbXB0eSByb3dcclxuICAgIHRkID0ge30sICAgICAgICAgICAgLy8gKG9iamVjdCkgY29udGFpbnMgcmVmZXJlbmNlIHRvIHNvdXJjZSAoc2V0IGluIG9ubW91c2Vkb3duKSwgY3VycmVudCAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKSwgcHJldmlvdXMgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCkgYW5kIHRhcmdldCBjZWxsIChzZXQgaW4gb25tb3VzZXVwKVxyXG4gICAgY2xvbmUgPSB7a2V5RGl2IDogZmFsc2UsICAgIC8vIChib29sZWFuKSBpZiB0cnVlLCBlbGVtZW50cyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleVxyXG4gICAgICAgIGtleVJvdyA6IGZhbHNlLCAgICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIHJvd3MgY291bGQgYmUgY2xvbmVkIHdpdGggcHJlc3NlZCBTSElGVCBrZXlcclxuICAgICAgICBzZW5kQmFjayA6IGZhbHNlLCAgIC8vIChib29sZWFuKSBpZiB0cnVlLCB0aGVuIGNsb25lZCBlbGVtZW50IGNhbiBiZSByZXR1cm5lZCB0byBpdHMgc291cmNlXHJcbiAgICAgICAgZHJvcCA6IGZhbHNlfSwgICAgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgdGhlbiBjbG9uZWQgZWxlbWVudCB3aWxsIGJlIGFsd2F5cyBkcm9wcGVkIHRvIHRoZSB0YWJsZSBubyBtYXR0ZXIgaWYgZHJvcHBlZCBvdXRzaWRlIG9mIHRoZSB0YWJsZVxyXG4gICAgXHJcbiAgICBldmVudCA9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKG9iamVjdCkgZXZlbnQgaGFuZGxlcnNcclxuICAgIHtcclxuICAgICAgY2xvbmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGNsb25lZERyb3BwZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgY2xvbmVkRW5kMSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBjbG9uZWRFbmQyIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGRyb3BwZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgZHJvcHBlZEJlZm9yZSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBmaW5pc2ggOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgbm90Q2xvbmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIG5vdE1vdmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0NoYW5nZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Q2xpY2tlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dDbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93RHJvcHBlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dEcm9wcGVkQmVmb3JlIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Ryb3BwZWRTb3VyY2UgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93TW92ZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Tm90Q2xvbmVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd05vdE1vdmVkIDogZnVuY3Rpb24gKCkge31cclxuICAgIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBEcmFnIGNvbnRhaW5lciBpbml0aWFsaXphdGlvbi4gSXQgc2hvdWxkIGJlIGNhbGxlZCBhdCBsZWFzdCBvbmNlIGFuZCBpdCdzIHBvc3NpYmxlIHRvIGNhbGwgYSBtZXRob2QgbWFueSB0aW1lcy4gRXZlcnkgcGFnZSBzaG91bGQgaGF2ZSBhdCBsZWFzdCBvbmUgZHJhZyBjb250YWluZXIuXHJcbiAgICogSWYgUkVESVBTLmRyYWcuaW5pdCgpIGlzIGNhbGxlZCB3aXRob3V0IGlucHV0IHBhcmFtZXRlciwgbGlicmFyeSB3aWxsIHNlYXJjaCBmb3IgZHJhZyBjb250YWluZXIgd2l0aCBpZD1cInJlZGlwcy1kcmFnXCIuXHJcbiAgICogT25seSB0YWJsZXMgaW5zaWRlIGRyYWcgY29udGFpbmVyIHdpbGwgYmUgc2Nhbm5lZC4gSXQgaXMgcG9zc2libGUgdG8gaGF2ZSBzZXZlcmFsIGRyYWcgY29udGFpbmVycyB0b3RhbHkgc2VwYXJhdGVkIChlbGVtZW50cyBmcm9tIG9uZSBjb250YWluZXIgd2lsbCBub3QgYmUgdmlzaWJsZSB0byBvdGhlciBkcmFnIGNvbnRhaW5lcnMpLlxyXG4gICAqIFwiaW5pdFwiIG1ldGhvZCBjYWxscyBlbmFibGVEcmFnLiBJZiB0YWJsZXMgYXJlIGdlbmVyYXRlZCBkeW5hbWljYWxseSB0aGVuIFJFRElQUy5pbml0KCkgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgdG8gc2V0IGN1c3RvbSBwcm9wZXJ0aWVzIHRvIHRhYmxlcyAodGFibGUgaW5pdGlhbGl6YXRpb24pLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbZGNdIERyYWcgY29udGFpbmVyIElkIChkZWZhdWx0IGlzIFwicmVkaXBzLWRyYWdcIikuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBpbml0IGRyYWcgY29udGFpbmVyICh3aXRoIGRlZmF1bHQgaWQ9XCJyZWRpcHMtZHJhZ1wiKVxyXG4gICAqIFJFRElQUy5kcmFnLmluaXQoKTtcclxuICAgKlxyXG4gICAqIC8vIGluaXQgZHJhZyBjb250YWluZXIgd2l0aCBpZD1cIm15LWRyYWcxXCJcclxuICAgKiBSRURJUFMuZHJhZy5pbml0KCdteS1kcmFnMScpO1xyXG4gICAqL1xyXG4gIGluaXQgPSBmdW5jdGlvbiAoKVxyXG4gIHtcclxuICAgIGRyYWdDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVkaXBzLWRyYWcnKTsgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGRyYWcgY29udGFpbmVyXHJcblxyXG4gICAgd2luZG93U2Nyb2xsUG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGluaXRpYWwgd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG5cclxuICAgIC8vIGFwcGVuZCBESVYgaWQ9XCJyZWRpcHNfY2xvbmVcIiBpZiBESVYgZG9lc24ndCBleGlzdCAobmVlZGVkIGZvciBjbG9uaW5nIERJViBlbGVtZW50cylcclxuICAgIC8vIGlmIGF1dG9tYXRpYyBjcmVhdGlvbiBpc24ndCBwcmVjaXNlIGVub3VnaCwgdXNlciBjYW4gbWFudWFsbHkgY3JlYXRlIGFuZCBwbGFjZSBlbGVtZW50IHdpdGggaWQ9XCJyZWRpcHNfY2xvbmVcIiB0byBwcmV2ZW50IHdpbmRvdyBleHBhbmRpbmcgKHRoZW4gdGhpcyBjb2RlIHdpbGwgYmUgc2tpcHBlZClcclxuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZGlwc19jbG9uZScpKVxyXG4gICAge1xyXG4gICAgICB2YXIgcmVkaXBzQ2xvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgcmVkaXBzQ2xvbmUuaWQgPSAncmVkaXBzX2Nsb25lJztcclxuICAgICAgcmVkaXBzQ2xvbmUuc3R5bGUud2lkdGggPSByZWRpcHNDbG9uZS5zdHlsZS5oZWlnaHQgPSAnMXB4JztcclxuICAgICAgZHJhZ0NvbnRhaW5lci5hcHBlbmRDaGlsZChyZWRpcHNDbG9uZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlRHJhZygnaW5pdCcsICcucmVkaXBzLWRyYWcnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXR0YWNoIG9ubW91c2Vkb3duIGV2ZW50IGhhbmRsZXIgdG8gdGhlIERJViBlbGVtZW50cywgYXR0YWNoIG9uc2Nyb2xsPSdjYWxjdWxhdGVDZWxscycgZm9yIERJViBlbGVtZW50cyB3aXRoICdzY3JvbGwnIGluIGNsYXNzIG5hbWUgKHByZXBhcmUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXMpXHJcbiAgICB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cmVlVGFibGUnKTtcclxuICAgIHRhYmxlLnJlZGlwcyA9IHt9O1xyXG5cclxuICAgIGhhbmRsZXJPblJlc2l6ZSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHdpbmRvdyB3aWR0aC9oZWlnaHQsIHNjcm9sbCB3aWR0aC9oZWlnaHQgYW5kIGRlZmluZSBvbnJlc2l6ZSBldmVudCBoYW5kbGVyLCBvbnJlc2l6ZSBldmVudCBoYW5kbGVyIGNhbGxzIGNhbGN1bGF0ZSBjb2x1bW5zXHJcbiAgICBSRURJUFMuZXZlbnQuYWRkKHdpbmRvdywgJ3Jlc2l6ZScsIGhhbmRsZXJPblJlc2l6ZSk7XHJcbiAgICBSRURJUFMuZXZlbnQuYWRkKHdpbmRvdywgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgICAgICAgICAgICAvLyBhdHRhY2ggb25zY3JvbGwgZXZlbnQgdG8gdGhlIHdpbmRvdyAobmVlZGVkIGZvciByZWNhbGN1bGF0aW5nIHRhYmxlIGNlbGxzIHBvc2l0aW9ucylcclxuICB9O1xyXG5cclxuXHJcbiAgLy8gb25tb3VzZWRvd24gZXZlbnQgaGFuZGxlci4gIFRoaXMgZXZlbnQgaGFuZGxlciBpcyBhdHRhY2hlZCB0byBldmVyeSBESVYgZWxlbWVudCBpbiBkcmFnIGNvbnRhaW5lciAocGxlYXNlIHNlZSBcImVuYWJsZURyYWdcIikuXHJcbiAgaGFuZGxlck9uTW91c2VEb3duID0gZnVuY3Rpb24gKGUpXHJcbiAge1xyXG4gICAgdmFyIGV2dCA9IGUgfHwgd2luZG93LmV2ZW50OyAgICAgICAgICAvLyBkZWZpbmUgZXZlbnQgKGNyb3NzIGJyb3dzZXIpXHJcbiAgICB2YXIgb2Zmc2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9iamVjdCBvZmZzZXRcclxuICAgIHZhciBwb3NpdGlvbjsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9zaXRpb24gb2YgdGFibGUgb3IgY29udGFpbmVyIGJveCBvZiB0YWJsZSAoaWYgaGFzIHBvc2l0aW9uOmZpeGVkIHRoZW4gZXhjbHVkZSBzY3JvbGwgb2Zmc2V0KVxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuXHJcbiAgICBldnQuY2FuY2VsQnViYmxlID0gdHJ1ZTsgICAgICAgICAgICAgIC8vIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24gKG9ubHkgZmlyc3QgY2xpY2tlZCBlbGVtZW50IHdpbGwgcmVnaXN0ZXIgb25tb3VzZWRvd24gZXZlbnQpLCBuZWVkZWQgaW4gY2FzZSBvZiBwbGFjaW5nIHRhYmxlIGluc2lkZSBvZiA8ZGl2IGNsYXNzPVwicmVkaXBzLWRyYWdcIj4gKGFmdGVyIGVsZW1lbnQgd2FzIGRyb3BwZWQgdG8gdGhpcyB0YWJsZSBpdCBjb3VsZG4ndCBiZSBtb3ZlZCBvdXQgYW55IG1vcmUgLSB0YWJsZSBhbmQgZWxlbWVudCBtb3ZlZCB0b2dldGhlciBiZWNhdXNlIHRhYmxlIGNhcHR1cmVzIG1vdXNlZG93biBldmVudCBhbHNvIGluIGJ1YmJsaW5nIHByb2NlcylcclxuICAgIGlmIChldnQuc3RvcFByb3BhZ2F0aW9uKVxyXG4gICAge1xyXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hpZnRLZXkgPSBldnQuc2hpZnRLZXk7ICAgICAgICAgICAgICAvLyBzZXQgdHJ1ZSBvciBmYWxzZSBpZiBzaGlmdCBrZXkgaXMgcHJlc3NlZFxyXG5cclxuICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRleHQgc2VsZWN0aW9uIChDaHJvbWUsIEZGLCBPcGVyYSwgU2FmYXJpKVxyXG4gICAge1xyXG4gICAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkucmVtb3ZlQWxsUmFuZ2VzKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24gJiYgZG9jdW1lbnQuc2VsZWN0aW9uLnR5cGUgPT09IFwiVGV4dFwiKSAgLy8gSUU4XHJcbiAgICB7XHJcbiAgICAgIHRyeSB7IGRvY3VtZW50LnNlbGVjdGlvbi5lbXB0eSgpOyB9IGNhdGNoIChlcnJvcikgeyB9ICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvciB0byBhcyBhIHdvcmthcm91bmQgZm9yIGJ1ZyBpbiBJRThcclxuICAgIH1cclxuXHJcbiAgICBYID0gcG9pbnRlci54ID0gZXZ0LmNsaWVudFg7XHJcbiAgICBZID0gcG9pbnRlci55ID0gZXZ0LmNsaWVudFk7XHJcblxyXG4gICAgdGhyZXNob2xkLnggPSBYOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCB0aHJlc2hvbGQgcG9zaXRpb24gKG5lZWRlZCBmb3IgY2FsY3VsYXRpbmcgZGlzdGFuY2UpXHJcbiAgICB0aHJlc2hvbGQueSA9IFk7XHJcbiAgICB0aHJlc2hvbGQuZmxhZyA9IGZhbHNlO1xyXG5cclxuICAgIFJFRElQUy5kcmFnLm9iak9sZCA9IG9iak9sZCA9IG9iaiB8fCB0aGlzOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgcHJldmlvdXMgb2JqZWN0IGlmIGRlZmluZWQgb3Igc2V0IHRvIHRoZSBjbGlja2VkIG9iamVjdFxyXG4gICAgUkVESVBTLmRyYWcub2JqID0gb2JqID0gdGhpczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjbGlja2VkIG9iamVjdFxyXG5cclxuICAgIGNsb25lQ2xhc3MgPSBvYmouY2xhc3NOYW1lLmluZGV4T2YoJ3JlZGlwcy1jbG9uZScpID4gLTE7ICAgICAgICAgICAgLy8gc2V0IHRydWUgb3IgZmFsc2UgaWYgY2xpY2tlZCBlbGVtZW50IGNvbnRhaW5zIFwicmVkaXBzLWNsb25lXCIgY2xhc3MgbmFtZSAobmVlZGVkIGZvciBjbG9uZSBlbGVtZW50IGFuZCBjbG9uZSB0YWJsZSByb3cpXHJcblxyXG4gICAgUkVESVBTLmRyYWcub2JqID0gb2JqID0gcm93Q2xvbmUob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBqdXN0IHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGN1cnJlbnQgcm93IChkbyBub3QgY2xvbmUpXHJcblxyXG4gICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdXNlciBoYXMgdXNlZCBhIG1vdXNlIGV2ZW50IHRvIGluY3JlYXNlIHRoZSBkaW1lbnNpb25zIG9mIHRoZSB0YWJsZSAtIGNhbGwgY2FsY3VsYXRlQ2VsbHMoKVxyXG5cclxuICAgIHJvdyA9IGNlbGwgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgcm93IGFuZCBjZWxsIGluZGV4ZXMgKG5lZWRlZCBpbiBjYXNlIG9mIGVuYWJsZSAvIGRpc2FibGUgdGFibGVzKVxyXG4gICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsIGFuZCByZW1lbWJlciBzb3VyY2UgcG9zaXRpb24gKG9sZCBwb3NpdGlvbiBpcyBpbml0aWFsbHkgdGhlIHNhbWUgYXMgc291cmNlIHBvc2l0aW9uKVxyXG4gICAgcm93X3NvdXJjZSA9IHJvd19vbGQgPSByb3c7XHJcbiAgICBjZWxsX3NvdXJjZSA9IGNlbGxfb2xkID0gY2VsbDtcclxuXHJcbiAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dDbGlja2VkKHRkLmN1cnJlbnQpO1xyXG5cclxuICAgIC8vIGlmIHN0YXJ0IHBvc2l0aW9uIGNhbm5vdCBiZSBkZWZpbmVkIHRoZW4gdXNlciBwcm9iYWJseSBjbGlja2VkIG9uIGVsZW1lbnQgdGhhdCBiZWxvbmdzIHRvIHRoZSBkaXNhYmxlZCB0YWJsZSAob3Igc29tZXRoaW5nIGVsc2UgaGFwcGVuZWQgdGhhdCB3YXMgbm90IHN1cHBvc2VkIHRvIGhhcHBlbiAtIGV2ZXJ5IGVsZW1lbnQgc2hvdWxkIGJlbG9uZyB0byB0aGUgdGFibGUpIHRoaXMgY29kZSBtdXN0IGdvIGFmdGVyIGV4ZWN1dGlvbiBvZiBldmVudCBoYW5kbGVyc1xyXG4gICAgaWYgKHJvdyA9PT0gbnVsbCB8fCBjZWxsID09PSBudWxsKVxyXG4gICAge1xyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXJ1biBzZXRUYWJsZVJvd0NvbHVtbigpIGFnYWluIGJlY2F1c2Ugc29tZSBvZiB0YWJsZXMgbWlnaHQgYmUgZW5hYmxlZCBpbiBoYW5kbGVyIGV2ZW50cyBhYm92ZVxyXG4gICAgICByb3dfc291cmNlID0gcm93X29sZCA9IHJvdztcclxuICAgICAgY2VsbF9zb3VyY2UgPSBjZWxsX29sZCA9IGNlbGw7XHJcblxyXG4gICAgICBpZiAocm93ID09PSBudWxsIHx8IGNlbGwgPT09IG51bGwpICAvLyBubywgY2xpY2tlZCBlbGVtZW50IGlzIG9uIHRoZSBkaXNhYmxlZCB0YWJsZSAtIHNvcnJ5XHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vdmVkID0gY2xvbmVkID0gZmFsc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgXCJtb3ZlZFwiIGZsYWcgKG5lZWRlZCBmb3IgY2xvbmUgb2JqZWN0IGluIGhhbmRsZXJPbk1vdXNlTW92ZSkgYW5kIFwiY2xvbmVkXCIgZmxhZ1xyXG5cclxuICAgIFJFRElQUy5ldmVudC5hZGQoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBoYW5kbGVyT25Nb3VzZU1vdmUpOyAgICAgICAgLy8gYWN0aXZhdGUgb25tb3VzZW1vdmUgZXZlbnQgaGFuZGxlciBvbiBkb2N1bWVudCBvYmplY3RcclxuICAgIFJFRElQUy5ldmVudC5hZGQoZG9jdW1lbnQsICdtb3VzZXVwJywgaGFuZGxlck9uTW91c2VVcCk7ICAgICAgICAgICAgLy8gYWN0aXZhdGUgb25tb3VzZXVwIGV2ZW50IGhhbmRsZXIgb24gZG9jdW1lbnQgb2JqZWN0XHJcblxyXG4gICAgaWYgKHJvdyAhPT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBiYWNrZ3JvdW5kIGNvbG9yIGlmIGlzIHBvc3NpYmxlXHJcbiAgICB7XHJcbiAgICAgIGJnU3R5bGVPbGQgPSBnZXRUZFN0eWxlKHJvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zaXRpb24gPSBnZXRTdHlsZSh0YWJsZSwgJ3Bvc2l0aW9uJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGFibGUgQ1NTIHBvc2l0aW9uIChuZWVkZWQgZm9yIGV4Y2x1c2lvbiBcInNjcm9sbCBvZmZzZXRcIiBpZiB0YWJsZSBib3ggaGFzIHBvc2l0aW9uIGZpeGVkKVxyXG5cclxuICAgIGlmIChwb3NpdGlvbiAhPT0gJ2ZpeGVkJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGFibGUgZG9lc24ndCBoYXZlIHN0eWxlIHBvc2l0aW9uOmZpeGVkIHRoZW4gdGFibGUgY29udGFpbmVyIHNob3VsZCBiZSB0ZXN0ZWRcclxuICAgIHtcclxuICAgICAgcG9zaXRpb24gPSBnZXRTdHlsZSh0YWJsZS5wYXJlbnROb2RlLCAncG9zaXRpb24nKTtcclxuICAgIH1cclxuXHJcbiAgICBvZmZzZXQgPSBib3hPZmZzZXQob2JqLCBwb3NpdGlvbik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9iamVjdCBvZmZzZXRcclxuICAgIG9iak1hcmdpbiA9IFtZIC0gb2Zmc2V0WzBdLCBvZmZzZXRbMV0gLSBYLCBvZmZzZXRbMl0gLSBZLCBYIC0gb2Zmc2V0WzNdXTsgICAvLyBjYWxjdWxhdGUgb2Zmc2V0IGZyb20gdGhlIGNsaWNrZWQgcG9pbnQgaW5zaWRlIGVsZW1lbnQgdG8gdGhlIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdCBzaWRlIG9mIHRoZSBlbGVtZW50XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGUgdGV4dCBzZWxlY3Rpb24gZm9yIG5vbiBJRSBicm93c2Vyc1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2RzIHJldHVybnMgcmVmZXJlbmNlIHRvIHRoZSB0YWJsZSByb3cgb3IgY2xvbmVzIHRhYmxlIHJvdy5cclxuICAgKiBJZiBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZURvd246XHJcbiAgICogPHVsPlxyXG4gICAqIDxsaT5pbnB1dCBwYXJhbWV0ZXIgaXMgRElWIGNsYXNzPVwicmVkaXBzLXJvd1wiPC9saT5cclxuICAgKiA8bGk+bWV0aG9kIHdpbGwgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY3VycmVudCByb3c8L2xpPlxyXG4gICAqIDwvdWw+XHJcbiAgICogSWYgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlOlxyXG4gICAqIDx1bD5cclxuICAgKiA8bGk+aW5wdXQgcGFyYW1ldGVyIGlzIFRSIChjdXJyZW50IHJvdykgLSBwcmV2aW91c2x5IHJldHVybmVkIHdpdGggdGhpcyBmdW5jdGlvbjwvbGk+XHJcbiAgICogPGxpPm1ldGhvZCB3aWxsIGNsb25lIGN1cnJlbnQgcm93IGFuZCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjbG9uZWQgcm93PC9saT5cclxuICAgKiA8L3VsPlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIERJViBjbGFzcz1cInJlZGlwcy1yb3dcIiBvciBUUiAoY3VycmVudCByb3cpXHJcbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFJldHVybnMgcmVmZXJlbmNlIG9mIHRoZSBjdXJyZW50IHJvdyBvciBjbG9uZSBjdXJyZW50IHJvdyBhbmQgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY2xvbmVkIHJvdy5cclxuICAgKi9cclxuICByb3dDbG9uZSA9IGZ1bmN0aW9uIChlbClcclxuICB7XHJcbiAgICB2YXIgdGFibGVNaW5pOyAgICAgIC8vIG9yaWdpbmFsIHRhYmxlIGlzIGNsb25lZCBhbmQgYWxsIHJvd3MgZXhjZXB0IHBpY2tlZCByb3cgYXJlIGRlbGV0ZWRcclxuICAgIHZhciByb3dPYmo7ICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSByb3cgb2JqZWN0XHJcbiAgICB2YXIgZGl2OyAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgPERJViBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIj4gZWxlbWVudFxyXG5cclxuICAgIGlmIChlbC5ub2RlTmFtZSA9PT0gJ0RJVicpICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEpIHJvd0Nsb25lIGNhbGwgaW4gb25tb3VzZWRvd24gd2lsbCByZXR1cm4gcmVmZXJlbmNlIG9mIFRSIGVsZW1lbnQgKGlucHV0IHBhcmFtZXRlciBpcyBIVE1MRWxlbWVudCA8ZGl2IGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiPilcclxuICAgIHtcclxuICAgICAgZGl2ID0gZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHJlZmVyZW5jZSB0byB0aGUgPERJViBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIj5cclxuICAgICAgZWwgPSBmaW5kUGFyZW50KCdUUicsIGVsKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgcGFyZW50IFRSIGVsZW1lbnRcclxuICAgICAgaWYgKGVsLnJlZGlwcyA9PT0gdW5kZWZpbmVkKSB7IGVsLnJlZGlwcyA9IHt9OyB9ICAgIC8vIGNyZWF0ZSBhIFwicHJvcGVydHkgb2JqZWN0XCIgaW4gd2hpY2ggYWxsIGN1c3RvbSBwcm9wZXJ0aWVzIHdpbGwgYmUgc2F2ZWQgKGl0IGlzIG9ubHkgb25lIHByb3BlcnR5IGZvciBub3cpXHJcbiAgICAgIGVsLnJlZGlwcy5kaXYgPSBkaXY7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHJlZmVyZW5jZSB0byB0aGUgRElWIGVsZW1lbnQgYXMgcmVkaXBzLmRpdiB0aGlzIHdpbGwgbW9zdGx5IGJlIHJlZmVyZW5jZWQgYXMgb2JqT2xkLnJlZGlwcy5kaXYgKGJlY2F1c2Ugb2JqT2xkIGluIHJvdyBkcmFnZ2luZyBjb250ZXh0IGlzIHJlZmVyZW5jZSB0byB0aGUgc291cmNlIHJvdylcclxuICAgICAgcmV0dXJuIGVsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiByZWZlcmVuY2UgdG8gdGhlIFRSIGVsZW1lbnRcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIpIHJvd0Nsb25lIGNhbGwgaW4gb25tb3VzZW1vdmUgd2lsbCBjbG9uZSBjdXJyZW50IHJvdyAoZWwubm9kZU5hbWUgPT09ICdUUicpXHJcbiAgICB7XHJcbiAgICAgIHJvd09iaiA9IGVsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHNvdXJjZSByb3dcclxuXHJcbiAgICAgIHRhYmxlTWluaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XHJcbiAgICAgIHRhYmxlTWluaS5pbm5lckhUTUwgPSAnPHRyIGlkPVwiJyArIHJvd09iai5pZCArICdcIiBjbGFzcz1cIicgKyByb3dPYmouY2xhc3NMaXN0ICsgJ1wiPicgKyByb3dPYmouaW5uZXJIVE1MICsgJzwvdHI+JztcclxuICAgICAgLy90YWJsZU1pbmkuaW5uZXJIVE1MID0gZ2V0QXNzZW1ibHlNYXJrdXAocGFyc2VJbnQocm93T2JqLmlkLnJlcGxhY2UoJ3Jvd2lkJywgJycpKSk7ICAgLy9jYW4gYmUgdXNlZCB0byBzaG93IHRoZSBlbnRpcmUgYXNzZW1ibHkgd2hlbiBkcmFnZ2luZywgdGVuZHMgdG8gc2xvdyB0aGluZ3MgZG93biBhbmQgYmUgY3VtYmVyc29tZVxyXG5cclxuICAgICAgdGFibGVNaW5pLnJlZGlwcyA9IHt9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYSBcInByb3BlcnR5IG9iamVjdFwiIGluIHdoaWNoIGFsbCBjdXN0b20gcHJvcGVydGllcyB3aWxsIGJlIHNhdmVkXHJcbiAgICAgIHRhYmxlTWluaS5yZWRpcHMuc291cmNlUm93ID0gcm93T2JqOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSBzb3VyY2Ugcm93IHJlZmVyZW5jZSAobmVlZGVkIGZvciBzb3VyY2Ugcm93IGRlbGV0aW9uIGluIHJvd0Ryb3AgbWV0aG9kKVxyXG5cclxuICAgICAgY29weVByb3BlcnRpZXMocm93T2JqLCB0YWJsZU1pbmkucm93c1swXSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGFsbCBjaGlsZCBESVYgZWxlbWVudHMgYW5kIHNldCBvbm1vdXNlZG93bi9vbmRibGNsaWNrIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWRpcHNfY2xvbmUnKS5hcHBlbmRDaGlsZCh0YWJsZU1pbmkpOyAgICAgLy8gYXBwZW5kIGNsb25lZCBtaW5pIHRhYmxlIHRvIHRoZSBESVYgaWQ9XCJyZWRpcHNfY2xvbmVcIlxyXG5cclxuICAgICAgcmV0dXJuIHRhYmxlTWluaTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIGRyb3BzIHRhYmxlIHJvdyB0byB0aGUgdGFyZ2V0IHJvdyBhbmQgY2FsbHMgdXNlciBldmVudCBoYW5kbGVycy4gU291cmNlIHJvdyBpcyBkZWxldGVkIGFuZCBjbG9uZWQgcm93IGlzIGluc2VydGVkIGF0IHRoZSBuZXcgcG9zaXRpb24uXHJcbiAgICogTWV0aG9kIHRha2VzIGNhcmUgYWJvdXQgdGhlIGxhc3Qgcm93IGluIHRoZSB0YWJsZSBvbmx5IGlmIHVzZXIgZHJhZ3MgZWxlbWVudC4gSW4gY2FzZSBvZiBtb3Zpbmcgcm93cyB3aXRoIG1vdmVPYmplY3QoKSwgY29udHJvbFxyXG4gICAqIGFuZCBsb2dpYyBmb3IgbGFzdCByb3cgaXMgdHVybmVkIG9mZi4gVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VVcCgpXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSB0YWJsZUlkeCBUYWJsZSBpbmRleC5cclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHJvd0lkeCBSb3cgaW5kZXguXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gW3RhYmxlTWluaV0gUmVmZXJlbmNlIHRvIHRoZSBtaW5pIHRhYmxlICh0YWJsZSB0aGF0IGNvbnRhaW5zIG9ubHkgb25lIHJvdykuIFRoaXMgaXMgYWN0dWFsbHkgY2xvbmUgb2Ygc291cmNlIHJvdy5cclxuICAgKi9cclxuICByb3dEcm9wID0gZnVuY3Rpb24gKHJvd0lkeClcclxuICB7XHJcbiAgICB2YXIgZHJvcDsgICAgICAgICAgICAgICAvLyAoYm9vbGVhbikgaWYgZmFsc2UgdGhlbiBkcm9wcGluZyByb3cgd2lsbCBiZSBjYW5jZWxlZFxyXG4gICAgdmFyIHRyTWluaTsgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBUUiBpbiBtaW5pIHRhYmxlXHJcbiAgICB2YXIgZGVsZXRlVGFibGVSb3c7ICAgICAvLyBkZWxldGUgcm93IChwcml2YXRlIG1ldGhvZClcclxuXHJcbiAgICBkZWxldGVUYWJsZVJvdyA9IGZ1bmN0aW9uIChlbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSB0YWJsZSByb3cgLSBpbnB1dCBwYXJlbWV0ZXIgaXMgcm93IHJlZmVyZW5jZSAocHJpdmF0ZSBtZXRob2QpXHJcbiAgICB7XHJcbiAgICAgIHZhciB0Ymw7XHJcblxyXG4gICAgICBpZiAoZWwucmVkaXBzID09PSB1bmRlZmluZWQgfHwgIWVsLnJlZGlwcy5lbXB0eVJvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgZG9lc24ndCBoYXZlIGN1c3RvbSBcInJlZGlwc1wiIHByb3BlcnR5IG9yIGlzIG5vdCBtYXJrZWQgYXMgZW1wdHksIHRoZW4gaXQgY2FuIGJlIGRlbGV0ZWRcclxuICAgICAge1xyXG4gICAgICAgIHRibCA9IGZpbmRQYXJlbnQoJ1RBQkxFJywgZWwpO1xyXG4gICAgICAgIHRibC5kZWxldGVSb3coZWwucm93SW5kZXgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2UsIHJvdyBpcyBtYXJrZWQgYXMgXCJlbXB0eVwiIGFuZCBpdCB3aWxsIGJlIG9ubHkgY29sb3JlZCAobm90IGRlbGV0ZWQpLCBjb250ZW50IG9mIHRhYmxlIGNlbGxzIHdpbGwgYmUgZGVsZXRlZCBhbmQgYmFja2dyb3VuZCBjb2xvciB3aWxsIGJlIHNldCB0byBkZWZhdWx0IGNvbG9yXHJcbiAgICAgIHtcclxuICAgICAgICByb3dPcGFjaXR5KGVsLCAnZW1wdHknLCBSRURJUFMuZHJhZy5zdHlsZS5yb3dFbXB0eUNvbG9yKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgdGFibGVNaW5pID0gb2JqOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnRseSBkcmFnZ2VkIHJvdyAtIG1pbmkgdGFibGVcclxuXHJcbiAgICBpZiAocm93SWR4ID4gdGFibGUucm93cy5sZW5ndGggLSAxKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBpbmRleCBpcyBvdXQgb2YgYm91bmRzLCB0aGVuIHNldCBtYXggcm93IGluZGV4IChyb3cgd2lsbCBiZSBhcHBlbmRlZCB0byB0aGUgdGFibGUgYm90dG9tKVxyXG4gICAge1xyXG4gICAgICByb3dJZHggPSB0YWJsZS5yb3dzLmxlbmd0aCAtIDE7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHRhYmxlUm93ID0gdGFibGUucm93c1tyb3dJZHhdO1xyXG5cclxuICAgIHRyTWluaSA9IHRhYmxlTWluaS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndHInKVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgVFIgaW4gbWluaSB0YWJsZSAobWluaSB0YWJsZSBoYXMgb25seSBvbmUgcm93IC0gZmlyc3Qgcm93KVxyXG5cclxuICAgIHRhYmxlTWluaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRhYmxlTWluaSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVzdHJveSBtaW5pIHRhYmxlIChub2RlIHN0aWxsIGV4aXN0cyBpbiBtZW1vcnkpXHJcblxyXG4gICAgZHJvcCA9IFJFRElQUy5kcmFnLmV2ZW50LnJvd0Ryb3BwZWRCZWZvcmUodGFibGUsIHRhYmxlTWluaS5yZWRpcHMuc291cmNlUm93LnJvd0luZGV4KTsgICAgICAvLyBjYWxsIGV2ZW50LnJvd0Ryb3BwZWRCZWZvcmUoKSAtIHRoaXMgaGFuZGxlciBjYW4gcmV0dXJuIFwiZmFsc2VcIiB2YWx1ZVxyXG5cclxuICAgIGlmIChkcm9wICE9PSBmYWxzZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaGFuZGxlciByZXR1cm5lZCBmYWxzZSB0aGVuIHJvdyBkcm9wcGluZyB3aWxsIGJlIGNhbmNlbGVkXHJcbiAgICB7XHJcbiAgICAgIGlmIChyb3dJZHggPCB0YWJsZS5yb3dzLmxlbmd0aCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBpcyBub3QgZHJvcHBlZCB0byB0aGUgbGFzdCByb3cgcG9zaXRpb25cclxuICAgICAge1xyXG4gICAgICAgIHRhYmxlUm93LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRyTWluaSwgdGFibGVSb3cubmV4dFNpYmxpbmcpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyBpcyBkcm9wcGVkIHRvIHRoZSBsYXN0IHJvdyBwb3NpdGlvbiwgaXQncyBwb3NzaWJsZSB0byBzZXQgdGFyZ2V0IHJvdyBpbmRleCBncmVhdGVyIHRoZW4gbnVtYmVyIG9mIHJvd3MgLSBpbiB0aGlzIGNhc2Ugcm93IHdpbGwgYmUgYXBwZW5kZWQgdG8gdGhlIHRhYmxlIGVuZFxyXG4gICAgICB7XHJcbiAgICAgICAgdGFibGVSb3cucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0ck1pbmkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyBzaG91bGQgYmUgYXBwZW5kZWRcclxuICAgICAgICB0YWJsZVJvdyA9IHRhYmxlLnJvd3NbMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgdXBwZXIgcm93LCBhZnRlciByb3cgaXMgYXBwZW5kZWQsIHVwcGVyIHJvdyBzaG91bGQgYmUgdGVzdGVkIGlmIGNvbnRhaW5zIFwiZW1wdHlSb3dcIiBzZXQgdG8gdHJ1ZSwgdGhpcyBjb3VsZCBoYXBwZW4gaW4gY2FzZSB3aGVuIHJvdyBpcyBtb3ZlZCB0byB0aGUgdGFibGUgd2l0aCBvbmx5IG9uZSBlbXB0eSByb3dcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIHNvdXJjZSByb3cgaWYgcm93IGlzIG5vdCBjbG9uZWRcclxuICAgICAge1xyXG4gICAgICAgIGRlbGV0ZVRhYmxlUm93KHRhYmxlTWluaS5yZWRpcHMuc291cmNlUm93KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZGVsZXRlIHRyTWluaS5yZWRpcHMuZW1wdHlSb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGVtcHR5Um93IHByb3BlcnR5IGZyb20gaW5zZXJ0ZWQvYXBwZW5kZWQgcm93IGJlY2F1c2UgZW1wdHlSb3cgd2lsbCBiZSBzZXQgb24gbmV4dCBtb3ZlLCBjb3B5UHJvcGVydGllcygpIGluIHJvd0Nsb25lKCkgY29waWVkIGVtcHR5Um93IHByb3BlcnR5IHRvIHRoZSByb3cgaW4gdGFibGVNaW5pLCBvdGhlcndpc2Ugcm93IHdpbGwgYmUgb3ZlcndyaXR0ZW4gYW5kIHRoYXQgaXMgbm90IGdvb2RcclxuICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93RHJvcHBlZCh0YWJsZVJvdyk7ICAgICAgICAgLy8gY2FsbCByb3dEcm9wcGVkIGV2ZW50IGhhbmRsZXJcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnQucm93RHJvcHBlZEJlZm9yZSgpIHJldHVybmVkIFwiZmFsc2VcIiAoaXQncyB1cCB0byB1c2VyIHRvIHJldHVybiBzb3VyY2Ugcm93IG9wYWNpdHkgdG8gaXRzIG9yaWdpbmFsIHN0YXRlKVxyXG4gICAge1xyXG4gICAgICAvLyByb3dPcGFjaXR5KG9iak9sZCwgMTAwKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogb25tb3VzZXVwIGV2ZW50IGhhbmRsZXIuXHJcbiAgICogaGFuZGxlck9uTW91c2VVcCBpcyBhdHRhY2hlZCB0byB0aGUgRElWIGVsZW1lbnQgaW4gYSBtb21lbnQgd2hlbiBESVYgZWxlbWVudCBpcyBjbGlja2VkICh0aGlzIGhhcHBlbnMgaW4gaGFuZGxlck9uTW91c2VEb3duKS5cclxuICAgKiBUaGlzIGV2ZW50IGhhbmRsZXIgZGV0YWNoZXMgb25tb3VzZW1vdmUgYW5kIG9ubW91c2V1cCBldmVudCBoYW5kbGVycy5cclxuICAgKiBAcGFyYW0ge0V2ZW50fSBlIEV2ZW50IGluZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIGhhbmRsZXJPbk1vdXNlVXAgPSBmdW5jdGlvbiAoZSlcclxuICB7XHJcbiAgICB2YXIgZXZ0ID0gZSB8fCB3aW5kb3cuZXZlbnQ7ICAgIC8vIGRlZmluZSBldmVudCAoRkYgJiBJRSlcclxuICAgIHZhciByX3JvdzsgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciBtb2RlPVwicm93XCJcclxuICAgIHZhciBtdF90cjsgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciByZXR1cm5pbmcgY29sb3IgdG8gdGhlIHRhYmxlIGNlbGwgKG10X3RyIC0gXCJtaW5pIHRhYmxlXCIgXCJ0YWJsZV9yb3dcIilcclxuICAgIHZhciBYLCBZOyAgICAgICAgICAgICAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICB2YXIgaTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZWQgaW4gbG9jYWwgbG9vcFxyXG4gICAgdmFyIGRyb3A7ICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBmYWxzZSB0aGVuIGRyb3BwZWQgRElWIGVsZW1lbnRcclxuXHJcbiAgICBYID0gZXZ0LmNsaWVudFg7XHJcbiAgICBZID0gZXZ0LmNsaWVudFk7XHJcblxyXG4gICAgZWRnZS5mbGFnLnggPSBlZGdlLmZsYWcueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHR1cm4gb2ZmIGF1dG9zY3JvbGwgXCJjdXJyZW50IGNlbGxcIiBoYW5kbGluZyAoaWYgdXNlciBtb3VzZXVwIGluIHRoZSBtaWRkbGUgb2YgYXV0b3Njcm9sbGluZylcclxuXHJcbiAgICBSRURJUFMuZXZlbnQucmVtb3ZlKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgaGFuZGxlck9uTW91c2VNb3ZlKTtcclxuICAgIFJFRElQUy5ldmVudC5yZW1vdmUoZG9jdW1lbnQsICdtb3VzZXVwJywgaGFuZGxlck9uTW91c2VVcCk7XHJcblxyXG4gICAgZHJhZ0NvbnRhaW5lci5vbnNlbGVjdHN0YXJ0ID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRldGFjaCBkcmFnQ29udGFpbmVyLm9uc2VsZWN0c3RhcnQgaGFuZGxlciB0byBlbmFibGUgc2VsZWN0IGZvciBJRTcvSUU4IGJyb3dzZXJcclxuXHJcbiAgICByZXNldFN0eWxlcyhvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgb2JqZWN0IHN0eWxlc1xyXG5cclxuICAgIHNjcm9sbERhdGEud2lkdGggID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoO1xyXG4gICAgc2Nyb2xsRGF0YS5oZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xyXG5cclxuICAgIGVkZ2UuZmxhZy54ID0gZWRnZS5mbGFnLnkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBhdXRvc2Nyb2xsIGZsYWdzXHJcblxyXG4gICAgaWYgKHJvdyA9PT0gbnVsbCB8fCBjZWxsID09PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIERJViBlbGVtZW50IHdhcyBjbGlja2VkIGFuZCBsZWZ0IGJ1dHRvbiB3YXMgcmVsZWFzZWQsIGJ1dCBlbGVtZW50IGlzIHBsYWNlZCBpbnNpZGUgdW5tb3ZhYmxlIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgUkVESVBTLmRyYWcuZXZlbnQubm90TW92ZWQoKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgUkVESVBTLmRyYWcudGQudGFyZ2V0ID0gdGQudGFyZ2V0ID0gdGFibGUucm93c1tyb3ddLmNlbGxzW2NlbGxdO1xyXG5cclxuICAgICAgc2V0VGRTdHlsZShyb3csIGJnU3R5bGVPbGQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciBmb3IgZGVzdGluYXRpb24gcm93XHJcblxyXG4gICAgICByX3JvdyA9IHJvdztcclxuXHJcbiAgICAgIGlmICghbW92ZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IHdhcyBjbGlja2VkIGFuZCBtb3VzZSBidXR0b24gd2FzIHJlbGVhc2VkIHJpZ2h0IGF3YXkgKHJvdyB3YXMgbm90IG1vdmVkKVxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93Tm90TW92ZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyB3YXMgbW92ZWRcclxuICAgICAge1xyXG4gICAgICAgIGlmIChyb3dfc291cmNlID09PSByX3JvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBkcm9wcGVkIHRvIHRoZSBzb3VyY2Ugcm93XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbXRfdHIgPSBvYmouZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RyJylbMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgVFIgaW4gbWluaSB0YWJsZSAobWluaSB0YWJsZSBoYXMgb25seSBvbmUgcm93KVxyXG5cclxuICAgICAgICAgIG9iak9sZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBtdF90ci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7ICAgICAgICAgICAvLyByZXR1cm4gY29sb3IgdG8gdGhlIHNvdXJjZSByb3cgZnJvbSB0aGUgcm93IG9mIGNsb25lZCBtaW5pIHRhYmxlLCBjb2xvciBvZiB0aGUgc291cmNlIHJvdyBjYW4gYmUgY2hhbmdlZCBpbiBldmVudC5yb3dNb3ZlZCgpICh3aGVuIHVzZXIgd2FudHMgdG8gbWFyayBzb3VyY2Ugcm93KVxyXG5cclxuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBtdF90ci5jZWxscy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gY29sb3IgdG8gdGhlIGVhY2ggdGFibGUgY2VsbFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBvYmpPbGQuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gbXRfdHIuY2VsbHNbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgY2xvbmVkIG1pbmkgdGFibGVcclxuICAgICAgICAgIGRlbGV0ZSBvYmpPbGQucmVkaXBzLmVtcHR5Um93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgZW1wdHlSb3cgcHJvcGVydHkgZnJvbSBzb3VyY2Ugcm93IGJlY2F1c2UgZW1wdHlSb3cgd2lsbCBiZSBzZXQgb24gbmV4dCBtb3ZlLCBvdGhlcndpc2Ugcm93IHdvdWxkIGJlIG92ZXJ3cml0dGVuIGFuZCB0aGF0J3Mgbm8gZ29vZFxyXG5cclxuICAgICAgICAgIGlmIChjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgd2FzIGNsb25lZCBhbmQgZHJvcHBlZCB0byB0aGUgc291cmNlIGxvY2F0aW9uIHRoZW4gY2FsbCByb3dOb3RDbG9uZWQgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dOb3RDbG9uZWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LnJvd0Ryb3BwZWRTb3VyY2UoKSBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0Ryb3BwZWRTb3VyY2UodGQudGFyZ2V0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGRyb3BwZWQgdG8gdGhlIG5ldyByb3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICByb3dEcm9wKHJfcm93KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICghY2xvbmVkICYmICF0aHJlc2hvbGQuZmxhZykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xpY2tlZCBlbGVtZW50IHdhcyBub3QgbW92ZWQgLSBESVYgZWxlbWVudCBkaWRuJ3QgY3Jvc3MgdGhyZXNob2xkIHZhbHVlLCBqdXN0IGNhbGwgZXZlbnQubm90TW92ZWQgZXZlbnQgaGFuZGxlclxyXG4gICAgICB7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQubm90TW92ZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChjbG9uZWQgJiYgcm93X3NvdXJjZSA9PT0gcm93ICYmIGNlbGxfc291cmNlID09PSBjZWxsKSAgICAgICAgICAgIC8vIGRlbGV0ZSBjbG9uZWQgZWxlbWVudCBpZiBkcm9wcGVkIG9uIHRoZSBzdGFydCBwb3NpdGlvblxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTtcclxuICAgICAgICBjbG9uZWRJZFtvYmpPbGQuaWRdIC09IDE7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQubm90Q2xvbmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAoY2xvbmVkICYmIFJFRElQUy5kcmFnLmNsb25lLmRyb3AgPT09IGZhbHNlICYmIChYIDwgdGFibGUucmVkaXBzLm9mZnNldFszXSB8fCBYID4gdGFibGUucmVkaXBzLm9mZnNldFsxXSB8fCBZIDwgdGFibGUucmVkaXBzLm9mZnNldFswXSB8fCBZID4gdGFibGUucmVkaXBzLm9mZnNldFsyXSkpICAgIC8vIGRlbGV0ZSBjbG9uZWQgZWxlbWVudCBpZiBkcm9wcGVkIG91dHNpZGUgY3VycmVudCB0YWJsZSBhbmQgY2xvbmUuZHJvcCBpcyBzZXQgdG8gZmFsc2VcclxuICAgICAge1xyXG4gICAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7XHJcbiAgICAgICAgY2xvbmVkSWRbb2JqT2xkLmlkXSAtPSAxO1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50Lm5vdENsb25lZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBjYWxsIGV2ZW50LmRyb3BwZWRCZWZvcmUoKSwgYXBwZW5kIG9iamVjdCB0byB0aGUgY2VsbCBhbmQgY2FsbCBldmVudC5kcm9wcGVkKClcclxuICAgICAge1xyXG4gICAgICAgIGRyb3AgPSBSRURJUFMuZHJhZy5ldmVudC5kcm9wcGVkQmVmb3JlKHRkLnRhcmdldCk7ICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQuZHJvcHBlZEJlZm9yZSBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgZWxlbWVudERyb3AoZHJvcCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZHJvcCBlbGVtZW50IHRvIHRoZSB0YWJsZSBjZWxsIChvciBkZWxldGUgY2xvbmVkIGVsZW1lbnQgaWYgZHJvcD1cImZhbHNlXCIpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjYWxjdWxhdGUgdGFibGUgY2VsbHMgYW5kIHNjcm9sbGVycyBiZWNhdXNlIGNlbGwgY29udGVudCBjb3VsZCBjaGFuZ2Ugcm93IGRpbWVuc2lvbnNcclxuICAgICAgUkVESVBTLmRyYWcuZXZlbnQuZmluaXNoKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGxhc3QgZXZlbnQgaGFuZGxlclxyXG4gICAgfVxyXG5cclxuICAgIHJvd19vbGQgPSBjZWxsX29sZCA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvbGQgcG9zaXRpb25zXHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIEVsZW1lbnQgZHJvcC4gVGhpcyBtZXRob2QgaXMgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VVcCBhbmQgYXBwZW5kcyBlbGVtZW50IHRvIHRoZSB0YXJnZXQgdGFibGUgY2VsbC5cclxuICAgKiBJZiBpbnB1dCBwYXJhbWV0ZXIgXCJkcm9wXCIgaXMgc2V0IHRvIFwiZmFsc2VcIiAodGhpcyBpcyBhY3R1YWxseSByZXR1cm4gdmFsdWUgZnJvbSBldmVudC5kcm9wcGVkQmVmb3JlKSB0aGVuIERJViBlbGVtZW50cyB3aWxsIG5vdCBiZSBkcm9wcGVkIChvbmx5IGNsb25lZCBlbGVtZW50IHdpbGwgYmUgZGVsZXRlZCkuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbZHJvcF0gSWYgbm90IFwiZmFsc2VcIiB0aGVuIERJViBlbGVtZW50IHdpbGwgYmUgZHJvcHBlZCB0byB0aGUgY2VsbC5cclxuICAgKi9cclxuICBlbGVtZW50RHJvcCA9IGZ1bmN0aW9uIChkcm9wKSBcclxuICB7XHJcbiAgICB2YXIgY2xvbmVTb3VyY2VEaXYgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZSBzb3VyY2UgZWxlbWVudCAobmVlZGVkIGlmIGNsb25lLnNlbmRCYWNrIGlzIHNldCB0byB0cnVlKVxyXG4gICAgdmFyIGRpdjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9kZUxpc3Qgb2YgRElWIGVsZW1lbnRzIGluIHRhcmdldCBjZWxsIChuZWVkZWQgaWYgY2xvbmUuc2VuZEJhY2sgaXMgc2V0IHRvIHRydWUpXHJcbiAgICBcclxuICAgIGlmIChkcm9wICE9PSBmYWxzZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGlucHV0IHBhcmFtZXRlciBpcyBub3QgXCJmYWxzZVwiIHRoZW4gRElWIGVsZW1lbnQgd2lsbCBiZSBkcm9wcGVkIHRvIHRoZSB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIGlmIChjbG9uZS5zZW5kQmFjayA9PT0gdHJ1ZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjbG9uZS5zZW5kQmFjayBpcyBzZXQgdG8gdHJ1ZSB0aGVuIHRyeSB0byBmaW5kIHNvdXJjZSBlbGVtZW50IGluIHRhcmdldCBjZWxsXHJcbiAgICAgIHtcclxuICAgICAgICBkaXYgPSB0ZC50YXJnZXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0RJVicpOyAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBhbGwgRElWIGVsZW1lbnRzIGluIHRhcmdldCBjZWxsXHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXYubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggYWxsIERJViBlbGVtZW50cyBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIC8vIGlmIERJViBpbiB0YXJnZXQgY2VsbCBpcyBzb3VyY2Ugb2YgZHJvcHBlZCBESVYgZWxlbWVudCAoZHJvcHBlZCBESVYgaWQgYW5kIGlkIG9mIERJViBpbiB0YXJnZXQgY2VsbCBoYXMgdGhlIHNhbWUgbmFtZSBiZWdpbm5pbmcgbGlrZSBcImQxMmMyXCIgYW5kIFwiZDEyXCIpXHJcbiAgICAgICAgICAvLyBvZiBjb3Vyc2UsIHRoZSBjYXNlIHdoZXJlIHNvdXJjZSBESVYgZWxlbWVudCBpcyBkcm9wcGVkIHRvIHRoZSBjZWxsIHdpdGggY2xvbmVkIERJViBlbGVtZW50IHNob3VsZCBiZSBleGNsdWRlZCAocG9zc2libGUgaW4gY2xpbWl0MSB0eXBlKVxyXG4gICAgICAgICAgaWYgKG9iaiAhPT0gZGl2W2ldICYmIG9iai5pZC5pbmRleE9mKGRpdltpXS5pZCkgPT09IDApIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBjbG9uZVNvdXJjZURpdiA9IGRpdltpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byBjbG9uZVNvdXJjZURpdiBlbGVtZW50XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoY2xvbmVTb3VyY2VEaXYpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNsb25lIHNvdXJjZSBESVYgZWxlbWVudCBleGlzdHMgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjbG9uZUxpbWl0KGNsb25lU291cmNlRGl2LCAxKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgY2xpbWl0IGNsYXNzIChpbmNyZW1lbnQgYnkgMSlcclxuICAgICAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkcm9wcGVkIERJViBlbGVtZW50XHJcbiAgICAgICAgICByZXR1cm47ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZnJvbSB0aGUgbWV0aG9kIChldmVyeXRoaW5nIGlzIGRvbmUpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICB0ZC50YXJnZXQuYXBwZW5kQ2hpbGQob2JqKTtcclxuICAgICAgXHJcbiAgICAgIHJlZ2lzdGVyRXZlbnRzKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIChGSVggZm9yIFNhZmFyaSBNb2JpbGUpXHJcbiAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmRyb3BwZWQodGQudGFyZ2V0KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5kcm9wcGVkIGJlY2F1c2UgY2xvbmVMaW1pdCBjb3VsZCBjYWxsIGV2ZW50LmNsb25lZEVuZDEgb3IgZXZlbnQuY2xvbmVkRW5kMlxyXG4gICAgICBcclxuICAgICAgaWYgKGNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBvYmplY3QgaXMgY2xvbmVkXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5jbG9uZWREcm9wcGVkKHRkLnRhcmdldCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGNsb25lZERyb3BwZWQgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgIGNsb25lTGltaXQob2JqT2xkLCAtMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjbGltaXQxX1ggb3IgY2xpbWl0Ml9YIGNsYXNzbmFtZVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChjbG9uZWQgJiYgb2JqLnBhcmVudE5vZGUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvbmVkIGVsZW1lbnQgc2hvdWxkIGJlIGRlbGV0ZWQgKGlmIG5vdCBhbHJlYWR5IGRlbGV0ZWQpXHJcbiAgICB7XHJcbiAgICAgIG9iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iaik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIGZvciBESVYgZWxlbWVudC5cclxuICAgKiBESVYgZWxlbWVudHMgc2hvdWxkIGhhdmUgb25seSBvbm1vdXNlZG93biAodXNpbmcgdHJhZGl0aW9uYWwgZXZlbnQgcmVnaXN0cmF0aW9uIG1vZGVsKS5cclxuICAgKiBJIGhhZCBhIHByb2JsZW0gd2l0aCBhZHZhbmNlZCBldmVudCByZWdpc3RyYXRpb24gbW9kZWwuXHJcbiAgICogSW4gY2FzZSBvZiB1c2luZyBhZHZhbmNlZCBtb2RlbCwgc2VsZWN0ZWQgdGV4dCBhbmQgZHJhZ2dlZCBESVYgZWxlbWVudCB3ZXJlIGluIGNvbGxpc2lvbi5cclxuICAgKiBJdCBsb29rcyBsaWtlIHNlbGVjdGVkIHRleHQgd2FzIGFibGUgdG8gZHJhZyBpbnN0ZWFkIG9mIERJViBlbGVtZW50LlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGRpdiBSZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgZm9yIG9ubW91c2Vkb3duLCBvbnRvdWNoc3RhcnQgYW5kIG9uZGJsY2xpY2sgdG8gdGhlIERJViBlbGVtZW50LlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2ZsYWddIElmIHNldCB0byBmYWxzZSB0aGVuIGV2ZW50IGxpc3RlbmVycyB3aWxsIGJlIGRlbGV0ZWQuXHJcbiAgICovXHJcbiAgcmVnaXN0ZXJFdmVudHMgPSBmdW5jdGlvbiAoZGl2LCBmbGFnKVxyXG4gIHtcclxuICAgIGlmIChmbGFnID09PSBmYWxzZSkgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZmxhZyBpcyBzZSB0byBmYWxzZSwgdGhlbiByZW1vdmUgZXZlbnQgbGlzdGVuZXJzIG9uIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGRpdi5vbm1vdXNlZG93biA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIGRpdi5vbm1vdXNlZG93biA9IGhhbmRsZXJPbk1vdXNlRG93bjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuXHJcbiAgcmVzZXRTdHlsZXMgPSBmdW5jdGlvbiAoZWwpICAgICAgICAgLy8gQWZ0ZXIgZWxlbWVudCBpcyBkcm9wcGVkLCBzdHlsZXMgbmVlZCB0byBiZSByZXNldC5cclxuICB7XHJcbiAgICBlbC5zdHlsZS50b3AgID0gJyc7XHJcbiAgICBlbC5zdHlsZS5sZWZ0ID0gJyc7XHJcbiAgICBlbC5zdHlsZS5wb3NpdGlvbiA9ICcnO1xyXG4gICAgZWwuc3R5bGUuekluZGV4ID0gJyc7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogb25tb3VzZW1vdmUgZXZlbnQgaGFuZGxlci5cclxuICAgKiBoYW5kbGVyT25Nb3VzZU1vdmUgaXMgYXR0YWNoZWQgdG8gZG9jdW1lbnQgbGV2ZWwgaW4gYSBtb21lbnQgd2hlbiBESVYgZWxlbWVudCBpcyBjbGlja2VkICh0aGlzIGhhcHBlbnMgaW4gaGFuZGxlck9uTW91c2VEb3duKS5cclxuICAgKiBoYW5kbGVyT25Nb3VzZVVwIGRldGFjaGVzIG9ubW91c2Vtb3ZlIGFuZCBvbm1vdXNldXAgZXZlbnQgaGFuZGxlcnMuXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZSBFdmVudCBpbmZvcm1hdGlvbi5cclxuICAgKi9cclxuICBoYW5kbGVyT25Nb3VzZU1vdmUgPSBmdW5jdGlvbiAoZSlcclxuICB7XHJcbiAgICB2YXIgZXZ0ID0gZSB8fCB3aW5kb3cuZXZlbnQ7ICAgICAgICAgICAgLy8gZGVmaW5lIGV2ZW50IChGRiAmIElFKVxyXG4gICAgdmFyIGJvdW5kID0gUkVESVBTLmRyYWcuc2Nyb2xsLmJvdW5kOyAgIC8vIHJlYWQgXCJib3VuZFwiIHB1YmxpYyBwcm9wZXJ0eSAobWF5YmUgY29kZSB3aWxsIGJlIGZhc3RlciwgYW5kIGl0IHdpbGwgYmUgZWFzaWVyIHRvIHJlZmVyZW5jZSBpbiBvbm1vdXNlbW92ZSBoYW5kbGVyKVxyXG4gICAgdmFyIHNjYTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYVxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgdmFyIGRlbHRhWCwgZGVsdGFZOyAgICAgICAgICAgICAgICAgICAgIC8vIGRlbHRhIGZyb20gaW5pdGlhbCBwb3NpdGlvblxyXG4gICAgdmFyIGk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWRlZCBmb3IgbG9jYWwgbG9vcFxyXG4gICAgdmFyIHNjcm9sbFBvc2l0aW9uOyAgICAgICAgICAgICAgICAgICAgIC8vIHNjcm9sbCBwb3NpdGlvbiB2YXJpYWJsZSBuZWVkZWQgZm9yIGF1dG9zY3JvbGwgY2FsbFxyXG5cclxuICAgIFggPSBwb2ludGVyLnggPSBldnQuY2xpZW50WDtcclxuICAgIFkgPSBwb2ludGVyLnkgPSBldnQuY2xpZW50WTtcclxuXHJcbiAgICBkZWx0YVggPSBNYXRoLmFicyh0aHJlc2hvbGQueCAtIFgpOyAgICAgICAgIC8vIGNhbGN1bGF0ZSBkZWx0YSBmcm9tIGluaXRpYWwgcG9zaXRpb25cclxuICAgIGRlbHRhWSA9IE1hdGguYWJzKHRocmVzaG9sZC55IC0gWSk7XHJcblxyXG4gICAgaWYgKCFtb3ZlZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBcIm1vdmVkXCIgZmxhZyBpc24ndCBzZXQgKHRoaXMgaXMgdGhlIGZpcnN0IG1vbWVudCB3aGVuIG9iamVjdCBpcyBtb3ZlZClcclxuICAgIHtcclxuICAgICAgLy9yZW1lbWJlciByZWZlcmVuY2Ugb2YgdGhlIHNvdXJjZSByb3csIGNsb25lIHNvdXJjZSByb3cgYW5kIHNldCBvYmogYXMgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHJvdyBzZXR0aW5ncyBvZiBcImNsb25lZFwiIGZsYWcgc2hvdWxkIGdvIGJlZm9yZSBjYWxsaW5nIHJvd0Nsb25lKCkgYmVjYXVzZSBcImNsb25lZFwiIGlzIG5lZWRlZCBpbiByb3dDbG9uZSgpIHRvIGN1dCBvdXQgXCJyZWRpcHMtY2xvbmVcIiBjbGFzcyBuYW1lIGZyb20gPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3cgcmVkaXBzLWNsb25lXCI+IGVsZW1lbnRzXHJcbiAgICAgIGlmIChjbG9uZUNsYXNzIHx8IChSRURJUFMuZHJhZy5jbG9uZS5rZXlSb3cgPT09IHRydWUgJiYgc2hpZnRLZXkpKVxyXG4gICAgICB7XHJcbiAgICAgICAgY2xvbmVkID0gdHJ1ZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgUkVESVBTLmRyYWcub2JqT2xkID0gb2JqT2xkID0gb2JqOyAgICAgICAgLy8gcmVtZW1iZXIgcmVmZXJlbmNlIHRvIHRoZSBzb3VyY2Ugcm93XHJcbiAgICAgIFJFRElQUy5kcmFnLm9iaiA9IG9iaiA9IHJvd0Nsb25lKG9iaik7ICAgIC8vIGNsb25lIHNvdXJjZSByb3cgYW5kIHNldCBhcyBvYmpcclxuICAgICAgb2JqLnN0eWxlLnpJbmRleCA9IDk5OTsgICAgICAgICAgICAgICAgICAgLy8gc2V0IGhpZ2ggei1pbmRleCBmb3IgY2xvbmVkIG1pbmkgdGFibGVcclxuXHJcbiAgICAgIG9iai5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7ICAgICAgICAgICAgIC8vIHNldCBzdHlsZSB0byBmaXhlZCB0byBhbGxvdyBkcmFnZ2luZyBESVYgb2JqZWN0XHJcbiAgICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGNhbGN1bGF0ZSBjZWxscyBmb3IgY2FzZSB3aGVyZSBtb3ZlZCBlbGVtZW50IGNoYW5nZWQgY2VsbCBkaW1lbnNpb24sIHBsYWNlIDMgZWxlbWVudHMgaW4gdGhlIHNhbWUgY2VsbCBpbiBleGFtcGxlMDggYW5kIHRyeSB0byBtb3ZlIG9uZSBvdXQgb2YgdGhlIHRhYmxlIGNlbGxcclxuICAgICAgc2V0VGFibGVSb3dDb2x1bW4oKTsgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY29sdW1uXHJcblxyXG4gICAgICBpZiAoY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50IGhhbmRsZXIgKHJvdyBjbG9uZWQvbW92ZWQpXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dDbG9uZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dNb3ZlZCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRQb3NpdGlvbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbG9yIGZvciB0aGUgY3VycmVudCB0YWJsZSBjZWxsIGFuZCByZW1lbWJlciBwcmV2aW91cyBwb3NpdGlvbiBhbmQgY29sb3IsIHNldFBvc2l0aW9uKCkgbXVzdCBnbyBhZnRlciBjYWxsaW5nIGV2ZW50Lm1vdmVkKCkgYW5kIGV2ZW50LnJvd01vdmVkKCkgaWYgdXNlciB3YW50cyB0byBjaGFuZ2UgY29sb3Igb2Ygc291cmNlIHJvd1xyXG5cclxuICAgICAgaWYgKFggPiBzY3JlZW4ud2lkdGggLSBvYmpNYXJnaW5bMV0pICAgIC8vIGlmIGVsZW1lbnQgaXMgZmFyIGF3YXkgb24gdGhlIHJpZ2h0IHNpZGUgb2YgcGFnZSwgc2V0IHBvc3NpYmxlIHJpZ2h0IHBvc2l0aW9uIChzY3JlZW4ud2lkdGggLSBvYmplY3Qgd2lkdGgpLCBvYmpNYXJnaW5bMV0gKyBvYmpNYXJnaW5bM10gPSBvYmplY3Qgd2lkdGhcclxuICAgICAge1xyXG4gICAgICAgIG9iai5zdHlsZS5sZWZ0ID0gKHNjcmVlbi53aWR0aCAtIChvYmpNYXJnaW5bMV0gKyAgb2JqTWFyZ2luWzNdKSkgKyAncHgnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoWSA+IHNjcmVlbi5oZWlnaHQgLSBvYmpNYXJnaW5bMl0pICAgLy8gaWYgZWxlbWVudCBpcyBiZWxvdyBwYWdlIGJvdHRvbSwgc2V0IHBvc3NpYmxlIGxvd2VyIHBvc2l0aW9uIChzY3JlZW4ud2lkdGggLSBvYmplY3QgaGVpZ2h0KSwgb2JqTWFyZ2luWzBdICsgb2JqTWFyZ2luWzJdID0gb2JqZWN0IGhlaWdodFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnN0eWxlLnRvcCAgPSAoc2NyZWVuLmhlaWdodCAtIChvYmpNYXJnaW5bMF0gKyBvYmpNYXJnaW5bMl0pKSArICdweCc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb3ZlZCA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgbW92ZWRfZmxhZ1xyXG5cclxuICAgIC8vIHNldCBsZWZ0IGFuZCB0b3Agc3R5bGVzIGZvciB0aGUgbW92ZWQgZWxlbWVudCBpZiBlbGVtZW50IGlzIGluc2lkZSB3aW5kb3csIHRoaXMgY29uZGl0aW9ucyB3aWxsIHN0b3AgZWxlbWVudCBvbiB3aW5kb3cgYm91bmRzXHJcbiAgICBpZiAoWCA+IG9iak1hcmdpblszXSAmJiBYIDwgc2NyZWVuLndpZHRoIC0gb2JqTWFyZ2luWzFdKVxyXG4gICAge1xyXG4gICAgICBvYmouc3R5bGUubGVmdCA9IChYIC0gb2JqTWFyZ2luWzNdKSArICdweCc7XHJcbiAgICB9XHJcbiAgICBpZiAoWSA+IG9iak1hcmdpblswXSAmJiBZIDwgc2NyZWVuLmhlaWdodCAtIG9iak1hcmdpblsyXSlcclxuICAgIHtcclxuICAgICAgb2JqLnN0eWxlLnRvcCAgPSAoWSAtIG9iak1hcmdpblswXSkgKyAncHgnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgKHRoaXMgY29uZGl0aW9uIHNob3VsZCBzcGFyZSBDUFUpOiAxKSBpZiBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSBESVYgaWQ9XCJyZWRpcHMtZHJhZ1wiIDIpIGFuZCBhdXRvc2Nyb2xsIGlzIG5vdCB3b3JraW5nIDMpIGFuZCBjdXJyZW50IHRhYmxlIGNvbnRhaW5zIG5lc3RlZCB0YWJsZSBvciBjdXJzb3IgaXMgb3V0c2lkZSBvZiBjdXJyZW50IGNlbGxcclxuICAgIGlmIChYIDwgZGl2Qm94WzFdICYmIFggPiBkaXZCb3hbM10gJiYgWSA8IGRpdkJveFsyXSAmJiBZID4gZGl2Qm94WzBdICYmXHJcbiAgICAgIGVkZ2UuZmxhZy54ID09PSAwICYmIGVkZ2UuZmxhZy55ID09PSAwICYmXHJcbiAgICAgIChjdXJyZW50Q2VsbC5jb250YWluVGFibGUgfHwgKFggPCBjdXJyZW50Q2VsbFszXSB8fCBYID4gY3VycmVudENlbGxbMV0gfHwgWSA8IGN1cnJlbnRDZWxsWzBdIHx8IFkgPiBjdXJyZW50Q2VsbFsyXSkpKVxyXG4gICAge1xyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUgcm93IGFuZCB0YWJsZSBjZWxsXHJcbiAgICAgIGNlbGxDaGFuZ2VkKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBuZXcgbG9jYXRpb24gaXMgaW5zaWRlIHRhYmxlIGFuZCBuZXcgbG9jYXRpb24gaXMgZGlmZmVyZW50IHRoZW4gb2xkIGxvY2F0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgYXV0b1Njcm9sbCBvcHRpb24gaXMgZW5hYmxlZCAoYnkgZGVmYXVsdCBpdCBpcyBidXQgaXQgY2FuIGJlIHR1cm5lZCBvZmYpXHJcbiAgICBpZiAoUkVESVBTLmRyYWcuc2Nyb2xsLmVuYWJsZSlcclxuICAgIHtcclxuICAgICAgZWRnZS5wYWdlLnggPSBib3VuZCAtIChzY3JlZW4ud2lkdGggLyAyICA+IFggPyBYIC0gb2JqTWFyZ2luWzNdIDogc2NyZWVuLndpZHRoIC0gWCAtIG9iak1hcmdpblsxXSk7ICAgICAgIC8vIGNhbGN1bGF0ZSBob3Jpem9udGFsbHkgY3Jvc3NlZCBwYWdlIGJvdW5kXHJcblxyXG4gICAgICBpZiAoZWRnZS5wYWdlLnggPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWxlbWVudCBjcm9zc2VzIHBhZ2UgYm91bmQgdGhlbiBzZXQgc2Nyb2xsIGRpcmVjdGlvbiBhbmQgY2FsbCBhdXRvIHNjcm9sbFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGVkZ2UucGFnZS54ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdoZW4gb2JqZWN0IGlzIG9ubHkgaGFsZiB2aXNpYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWRnZS5wYWdlLnggPSBib3VuZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGdldCBob3Jpem9udGFsIHdpbmRvdyBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgICAvL3Njcm9sbFBvc2l0aW9uID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xyXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uID0gMDsgICAvL2Rpc2FibGluZyBiZWNhdXNlIHdlIHNob3VsZG4ndCBoYXZlIHRoZSB1c2VyIHNjcm9sbGluZyBob3Jpem9udGFsbHkgYW5kIHRoaXMgaW1wcm92ZXMgcGVyZm9ybWFuY2UgZm9yIGxhcmdlIHRyZWVzXHJcblxyXG4gICAgICAgIGVkZ2UucGFnZS54ICo9IFggPCBzY3JlZW4ud2lkdGggLyAyID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb25cclxuXHJcbiAgICAgICAgLy8gaWYgcGFnZSBib3VuZCBpcyBjcm9zc2VkIGFuZCB0aGlzIHR3byBjYXNlcyBhcmVuJ3QgbWV0OiAxKSBzY3JvbGxiYXIgaXMgb24gdGhlIGxlZnQgYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIGxlZnQgMikgc2Nyb2xsYmFyIGlzIG9uIHRoZSByaWdodCBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgcmlnaHRcclxuICAgICAgICBpZiAoISgoZWRnZS5wYWdlLnggPCAwICYmIHNjcm9sbFBvc2l0aW9uIDw9IDApIHx8IChlZGdlLnBhZ2UueCA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPj0gKHNjcm9sbERhdGEud2lkdGggLSBzY3JlZW4ud2lkdGgpKSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKGVkZ2UuZmxhZy54KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyZSBhdXRvc2Nyb2xsIGZ1bmN0aW9uICh0aGlzIHNob3VsZCBoYXBwZW4gb25seSBvbmNlKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBSRURJUFMuZXZlbnQucmVtb3ZlKHdpbmRvdywgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgLy8gcmVzZXQgb25zY3JvbGwgZXZlbnRcclxuICAgICAgICAgICAgYXV0b1Njcm9sbFgod2luZG93KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgd2luZG93IGF1dG9zY3JvbGxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgZWRnZS5wYWdlLnggPSAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBlZGdlLnBhZ2UueSA9IGJvdW5kIC0gKHNjcmVlbi5oZWlnaHQgLyAyID4gWSA/IFkgLSBvYmpNYXJnaW5bMF0gOiBzY3JlZW4uaGVpZ2h0IC0gWSAtIG9iak1hcmdpblsyXSk7ICAgICAgLy8gY2FsY3VsYXRlIHZlcnRpY2FsbHkgY3Jvc3NlZCBwYWdlIGJvdW5kXHJcbiAgICAgIFxyXG4gICAgICBpZiAoZWRnZS5wYWdlLnkgPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWxlbWVudCBjcm9zc2VzIHBhZ2UgYm91bmRcclxuICAgICAge1xyXG4gICAgICAgIGlmIChlZGdlLnBhZ2UueSA+IGJvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG1heCBjcm9zc2VkIGJvdW5kXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZWRnZS5wYWdlLnkgPSBib3VuZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdmVydGljYWwgd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICAgIGVkZ2UucGFnZS55ICo9IFkgPCBzY3JlZW4uaGVpZ2h0IC8gMiA/IC0xIDogMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb25cclxuICAgICAgICBcclxuICAgICAgICBpZiAoISgoZWRnZS5wYWdlLnkgPCAwICYmIHNjcm9sbFBvc2l0aW9uIDw9IDApIHx8IChlZGdlLnBhZ2UueSA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPj0gKHNjcm9sbERhdGEuaGVpZ2h0IC0gc2NyZWVuLmhlaWdodCkpKSkgICAgLy8gaWYgcGFnZSBib3VuZCBpcyBjcm9zc2VkIGFuZCB0aGlzIHR3byBjYXNlcyBhcmVuJ3QgbWV0OiAxKSBzY3JvbGxiYXIgaXMgb24gdGhlIHBhZ2UgdG9wIGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCB1cCAyKSBzY3JvbGxiYXIgaXMgb24gdGhlIHBhZ2UgYm90dG9tIGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCBkb3duXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWYgKGVkZ2UuZmxhZy55KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyZSBhdXRvc2Nyb2xsICh0aGlzIHNob3VsZCBoYXBwZW4gb25seSBvbmNlKVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBSRURJUFMuZXZlbnQucmVtb3ZlKHdpbmRvdywgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgb25zY3JvbGwgZXZlbnRcclxuICAgICAgICAgICAgYXV0b1Njcm9sbFkod2luZG93KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgd2luZG93IGF1dG9zY3JvbGxcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBcclxuICAgICAge1xyXG4gICAgICAgIGVkZ2UucGFnZS55ID0gMDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZm9yIChpID0gMDsgaSA8IHNjcm9sbERhdGEuY29udGFpbmVyLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlc3QgaWYgZHJhZ2dlZCBvYmplY3QgaXMgaW4gc2Nyb2xsYWJsZSBjb250YWluZXIsIHRoaXMgY29kZSB3aWxsIGJlIGV4ZWN1dGVkIG9ubHkgaWYgc2Nyb2xsYWJsZSBjb250YWluZXIgKERJViB3aXRoIG92ZXJmbG93IG90aGVyIHRoYW4gJ3Zpc2libGUpIGV4aXN0cyBvbiBwYWdlXHJcbiAgICAgIHtcclxuICAgICAgICBzY2EgPSBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFcclxuICAgICAgICBcclxuICAgICAgICBpZiAoc2NhLmF1dG9zY3JvbGwgJiYgWCA8IHNjYS5vZmZzZXRbMV0gJiYgWCA+IHNjYS5vZmZzZXRbM10gJiYgWSA8IHNjYS5vZmZzZXRbMl0gJiYgWSA+IHNjYS5vZmZzZXRbMF0pIC8vIGlmIGRyYWdnZWQgb2JqZWN0IGlzIGluc2lkZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhbmQgc2Nyb2xsYWJsZSBjb250YWluZXIgaGFzIGVuYWJsZWQgYXV0b3Njcm9sbCBvcHRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLmRpdi54ID0gYm91bmQgLSAoc2NhLm1pZHN0WCAgPiBYID8gWCAtIG9iak1hcmdpblszXSAtIHNjYS5vZmZzZXRbM10gOiBzY2Eub2Zmc2V0WzFdIC0gWCAtIG9iak1hcmdpblsxXSk7ICAgLy8gY2FsY3VsYXRlIGhvcml6b250YWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGVkZ2UuZGl2LnggPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWxlbWVudCBjcm9zc2VzIHBhZ2UgYm91bmQgdGhlbiBzZXQgc2Nyb2xsIGRpcmVjdGlvbiBhbmQgY2FsbCBhdXRvIHNjcm9sbFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZWRnZS5kaXYueCA+IGJvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3aGVuIG9iamVjdCBpcyBvbmx5IGhhbGYgdmlzaWJsZSAocGFnZSBpcyBzY3JvbGxlZCBvbiB0aGF0IG9iamVjdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGVkZ2UuZGl2LnggPSBib3VuZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZWRnZS5kaXYueCAqPSBYIDwgc2NhLm1pZHN0WCA/IC0xIDogMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzY3JvbGwgZGlyZWN0aW9uOiBuZWdhdGl2ZSAtIGxlZnQsIHBvc2l0aXZlIC0gcmlnaHRcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChlZGdlLmZsYWcueCsrID09PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgb25zY3JvbGwgZXZlbnQgaGFuZGxlciBhbmQgY2FsbCBhdXRvU2Nyb2xsWSBmdW5jdGlvbiBvbmx5IG9uY2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUoc2NhLmRpdiwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTtcclxuICAgICAgICAgICAgICBhdXRvU2Nyb2xsWChzY2EuZGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZWRnZS5kaXYueCA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGVkZ2UuZGl2LnkgPSBib3VuZCAtIChzY2EubWlkc3RZICA+IFkgPyBZIC0gb2JqTWFyZ2luWzBdIC0gc2NhLm9mZnNldFswXSA6IHNjYS5vZmZzZXRbMl0gLSBZIC0gb2JqTWFyZ2luWzJdKTsgICAvLyBjYWxjdWxhdGUgdmVydGljYWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGVkZ2UuZGl2LnkgPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWxlbWVudCBjcm9zc2VzIHBhZ2UgYm91bmQgdGhlbiBzZXQgc2Nyb2xsIGRpcmVjdGlvbiBhbmQgY2FsbCBhdXRvIHNjcm9sbFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZWRnZS5kaXYueSA+IGJvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3aGVuIG9iamVjdCBpcyBvbmx5IGhhbGYgdmlzaWJsZSAocGFnZSBpcyBzY3JvbGxlZCBvbiB0aGF0IG9iamVjdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGVkZ2UuZGl2LnkgPSBib3VuZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZWRnZS5kaXYueSAqPSBZIDwgc2NhLm1pZHN0WSA/IC0xIDogMTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzY3JvbGwgZGlyZWN0aW9uOiBuZWdhdGl2ZSAtIHVwLCBwb3NpdGl2ZSAtIGRvd25cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChlZGdlLmZsYWcueSsrID09PSAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgb25zY3JvbGwgZXZlbnQgaGFuZGxlciBhbmQgY2FsbCBhdXRvU2Nyb2xsWSBmdW5jdGlvbiBvbmx5IG9uY2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUoc2NhLmRpdiwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTtcclxuICAgICAgICAgICAgICBhdXRvU2Nyb2xsWShzY2EuZGl2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZWRnZS5kaXYueSA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBicmVhayB0aGUgbG9vcCAoY2hlY2tpbmcgZm9yIG90aGVyIHNjcm9sbGFibGUgY29udGFpbmVycyBpcyBub3QgbmVlZGVkKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgKEkgbWVhbiBkcmFnZ2VkIG9iamVjdCBpc24ndCBpbnNpZGUgYW55IG9mIHNjcm9sbGFibGUgY29udGFpbmVyKSByZXNldCBjcm9zc2VkIGVkZ2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLmRpdi54ID0gZWRnZS5kaXYueSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIHN0b3AgYWxsIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudCBpbiB0aGUgYnViYmxpbmcgcGhhc2UuICAoc2F2ZSBzeXN0ZW0gcmVzb3VyY2VzIGJ5IHR1cm5pbmcgb2ZmIGV2ZW50IGJ1YmJsaW5nIC8gcHJvcGFnYXRpb24pXHJcbiAgICBldnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuICAgIGlmIChldnQuc3RvcFByb3BhZ2F0aW9uKSBcclxuICAgIHtcclxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCAoZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmUsIGF1dG9TY3JvbGxYLCBhdXRvU2Nyb2xsWSkgaW4gY2FzZSBvZiBjaGFuZ2Ugb2YgY3VycmVudCB0YWJsZSBjZWxsLlxyXG4gIC8vIFdoZW4gY2hhbmdlIGhhcHBlbnMsIHRoZW4gcmV0dXJuIGJhY2tncm91bmQgY29sb3IgdG8gb2xkIHBvc2l0aW9uLCBoaWdobGlnaHQgbmV3IHBvc2l0aW9uLCBjYWxjdWxhdGUgY2VsbCBib3VuZGFyaWVzIGFuZCBjYWxsIGV2ZW50LmNoYW5nZWQuXHJcbiAgY2VsbENoYW5nZWQgPSBmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICBpZiAoKHJvdyAhPT0gcm93X29sZCB8fCBjZWxsICE9PSBjZWxsX29sZCkpIFxyXG4gICAge1xyXG4gICAgICBpZiAocm93X29sZCAhPT0gbnVsbCAmJiBjZWxsX29sZCAhPT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY2VsbCBiYWNrZ3JvdW5kIGNvbG9yIHRvIHRoZSBwcmV2aW91cyBjZWxsXHJcbiAgICAgIHtcclxuICAgICAgICBzZXRUZFN0eWxlKHJvd19vbGQsIGJnU3R5bGVPbGQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJhY2tncm91bmQgY29sb3IgZm9yIHByZXZpb3VzIHRhYmxlIHJvd1xyXG4gICAgICAgIFJFRElQUy5kcmFnLnRkLnByZXZpb3VzID0gdGQucHJldmlvdXMgPSB0YWJsZS5yb3dzW3Jvd19vbGRdLmNlbGxzW2NlbGxfb2xkXTsgICAgICAvLyBkZWZpbmUgcHJldmlvdXMgdGFibGUgY2VsbFxyXG4gICAgICAgIFJFRElQUy5kcmFnLnRkLmN1cnJlbnQgPSB0ZC5jdXJyZW50ID0gdGFibGUucm93c1tyb3ddLmNlbGxzW2NlbGxdOyAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY3VycmVudCB0YWJsZSBjZWxsXHJcblxyXG4gICAgICAgIGlmIChyb3cgIT09IHJvd19vbGQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgdGFibGUgb3Igcm93IHNob3VsZCBjaGFuZ2UgKGNoYW5naW5nIGNlbGwgaW4gdGhlIHNhbWUgcm93IHdpbGwgYmUgaWdub3JlZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dDaGFuZ2VkKHRkLmN1cnJlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0UG9zaXRpb24oKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBJbiBpbml0aWFsaXphdGlvbiBwaGFzZSwgdGhpcyBtZXRob2QgaXMgYXR0YWNoZWQgYXMgb25yZXNpemUgZXZlbnQgaGFuZGxlciBmb3Igd2luZG93LiAgSXQgYWxzbyBjYWxjdWxhdGVzIHdpbmRvdyB3aWR0aCBhbmQgd2luZG93IGhlaWdodC4gUmVzdWx0IGlzIHNhdmVkIGluIHZhcmlhYmxlcyBzY3JlZW4ud2lkdGggYW5kIHNjcmVlbi5oZWlnaHQgdmlzaWJsZSBpbnNpZGUgUkVESVBTLmRyYWcgcHJpdmF0ZSBzY29wZS5cclxuICBoYW5kbGVyT25SZXNpemUgPSBmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICBzY3JlZW4ud2lkdGggID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBzY3JlZW4uaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgXHJcbiAgICBzY3JvbGxEYXRhLndpZHRoICA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDsgICAgIC8vIHNldCBzY3JvbGwgc2l6ZSAob25yZXNpemUsIG9ubG9hZCBhbmQgb25tb3VzZXVwIGV2ZW50KVxyXG4gICAgc2Nyb2xsRGF0YS5oZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgXHJcbiAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBjb2x1bXMgYW5kIHJvd3Mgb2Zmc2V0IChjZWxscyBkaW1lbnNpb25zKVxyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCBzZXRzIGN1cnJlbnQgcm93IGFuZCBjZWxsLiAgQ3VycmVudCBjZWxsIHBvc2l0aW9uIGlzIGJhc2VkIG9uIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXIgYW5kIGNhbGN1bGF0ZWQgZ3JpZCBvZiB0YWJsZXMgaW5zaWRlIGRyYWcgY29udGFpbmVyLlxyXG4gIC8vIFJvd3Mgd2l0aCBkaXNwbGF5PSdub25lJyBhcmUgbm90IGNvbnRhaW5lZCBpbiByb3dfb2Zmc2V0IGFycmF5IHNvIHJvdyBib3VuZHMgY2FsY3VsYXRpb24gc2hvdWxkIHRha2UgY2FyZSBhYm91dCBzcGFyc2UgYXJyYXlzIChzaW5jZSB2ZXJzaW9uIDQuMy42KS5cclxuICBzZXRUYWJsZVJvd0NvbHVtbiA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgdmFyIHByZXZpb3VzOyAgICAgICAvLyBzZXQgcHJldmlvdXMgcG9zaXRpb24gKGN1cnJlbnQgY2VsbCB3aWxsIG5vdCBiZSBoaWdobGlnaHRlZClcclxuICAgIHZhciByb3dfb2Zmc2V0OyAgICAgLy8gcm93IG9mZnNldHMgZm9yIHRoZSBzZWxlY3RlZCB0YWJsZSAocm93IGJveCBib3VuZHMpXHJcbiAgICB2YXIgcm93X2ZvdW5kOyAgICAgIC8vIHJlbWVtYmVyIGZvdW5kIHJvd1xyXG4gICAgdmFyIHRvcyA9IFtdOyAgICAgICAvLyB0YWJsZSBvZmZzZXRcclxuICAgIHZhciBYLCBZOyAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICB2YXIgaTsgICAgICAgICAgICAgIC8vIHVzZWQgaW4gbG9jYWwgbG9vcFxyXG5cclxuICAgIHByZXZpb3VzID0gZnVuY3Rpb24gKCkgICAgLy8gc2V0IHByZXZpb3VzIHBvc2l0aW9uIChjdXJyZW50IGNlbGwgd2lsbCBub3QgYmUgaGlnaGxpZ2h0ZWQpXHJcbiAgICB7XHJcbiAgICAgIGlmIChyb3dfb2xkICE9PSBudWxsICYmIGNlbGxfb2xkICE9PSBudWxsKVxyXG4gICAgICB7XHJcbiAgICAgICAgcm93ID0gcm93X29sZDtcclxuICAgICAgICBjZWxsID0gY2VsbF9vbGQ7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgWCA9IHBvaW50ZXIueDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIFkgPSBwb2ludGVyLnk7XHJcblxyXG4gICAgdG9zWzBdID0gdGFibGUucmVkaXBzLm9mZnNldFswXTsgLy8gdG9wXHJcbiAgICB0b3NbMV0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzFdOyAvLyByaWdodFxyXG4gICAgdG9zWzJdID0gdGFibGUucmVkaXBzLm9mZnNldFsyXTsgLy8gYm90dG9tXHJcbiAgICB0b3NbM10gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzNdOyAvLyBsZWZ0XHJcblxyXG4gICAgLy8gaWYgdGFibGUgYmVsb25ncyB0byB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXIgdGhlbiBzZXQgc2Nyb2xsYWJsZSBjb250YWluZXIgb2Zmc2V0IGlmIG5lZWRlZCBpbiBjYXNlIHdoZW4gc29tZSBwYXJ0cyBvZiB0YWJsZSBhcmUgaGlkZGVuIChmb3IgZXhhbXBsZSB3aXRoIFwib3ZlcmZsb3c6IGF1dG9cIilcclxuICAgIGlmICh0YWJsZS5zY2EgIT09IHVuZGVmaW5lZClcclxuICAgIHtcclxuICAgICAgdG9zWzBdID0gdG9zWzBdID4gdGFibGUuc2NhLm9mZnNldFswXSA/IHRvc1swXSA6IHRhYmxlLnNjYS5vZmZzZXRbMF07IC8vIHRvcFxyXG4gICAgICB0b3NbMV0gPSB0b3NbMV0gPCB0YWJsZS5zY2Eub2Zmc2V0WzFdID8gdG9zWzFdIDogdGFibGUuc2NhLm9mZnNldFsxXTsgLy8gcmlnaHRcclxuICAgICAgdG9zWzJdID0gdG9zWzJdIDwgdGFibGUuc2NhLm9mZnNldFsyXSA/IHRvc1syXSA6IHRhYmxlLnNjYS5vZmZzZXRbMl07IC8vIGJvdHRvbVxyXG4gICAgICB0b3NbM10gPSB0b3NbM10gPiB0YWJsZS5zY2Eub2Zmc2V0WzNdID8gdG9zWzNdIDogdGFibGUuc2NhLm9mZnNldFszXTsgLy8gbGVmdFxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0b3NbM10gPCBYICYmIFggPCB0b3NbMV0gJiYgdG9zWzBdIDwgWSAmJiBZIDwgdG9zWzJdKSAgICAgICAgICAgICAgICAgLy8gbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgdGFibGUgKG9yIHNjcm9sbGFibGUgY29udGFpbmVyKVxyXG4gICAge1xyXG4gICAgICByb3dfb2Zmc2V0ID0gdGFibGUucmVkaXBzLnJvd19vZmZzZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgcm93IG9mZnNldHMgZm9yIHRoZSBzZWxlY3RlZCB0YWJsZSAocm93IGJveCBib3VuZHMpXHJcblxyXG4gICAgICBmb3IgKHJvdyA9IDA7IHJvdyA8IHJvd19vZmZzZXQubGVuZ3RoIC0gMTsgcm93KyspICAgICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSBjdXJyZW50IHJvdyAobG9vcCBza2lwcyBoaWRkZW4gcm93cylcclxuICAgICAge1xyXG4gICAgICAgIGlmIChyb3dfb2Zmc2V0W3Jvd10gPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgZG9lc24ndCBleGlzdCAoaW4gY2FzZSBvZiBoaWRkZW4gcm93KSAtIHNraXAgaXRcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN1cnJlbnRDZWxsWzBdID0gcm93X29mZnNldFtyb3ddWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdG9wIGFuZCBib3R0b20gY2VsbCBib3VuZHNcclxuXHJcbiAgICAgICAgaWYgKHJvd19vZmZzZXRbcm93ICsgMV0gIT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBib3R0b20gY2VsbCBib3VuZCAoaWYgaXMgcG9zc2libGUpIC0gaGlkZGVuIHJvdyBkb2Vzbid0IGV4aXN0XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY3VycmVudENlbGxbMl0gPSByb3dfb2Zmc2V0W3JvdyArIDFdWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGlkZGVuIHJvdyAobGlrZSBzdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZm9yIChpID0gcm93ICsgMjsgaSA8IHJvd19vZmZzZXQubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggZm9yIG5leHQgdmlzaWJsZSByb3dcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHJvd19vZmZzZXRbaV0gIT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmlzaWJsZSByb3cgZm91bmRcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGN1cnJlbnRDZWxsWzJdID0gcm93X29mZnNldFtpXVswXTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFkgPD0gY3VycmVudENlbGxbMl0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvcCBib3VuZCBvZiB0aGUgbmV4dCByb3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJvd19mb3VuZCA9IHJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGZvdW5kIHJvd1xyXG5cclxuICAgICAgaWYgKHJvdyA9PT0gcm93X29mZnNldC5sZW5ndGggLSAxKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbG9vcCBleGNlZWRzLCB0aGVuIHNldCBib3VuZHMgZm9yIHRoZSBsYXN0IHJvdyAob2Zmc2V0IGZvciB0aGUgbGFzdCByb3cgZG9lc24ndCB3b3JrIGluIElFOCwgc28gdXNlIHRhYmxlIGJvdW5kcylcclxuICAgICAge1xyXG4gICAgICAgIGN1cnJlbnRDZWxsWzBdID0gcm93X29mZnNldFtyb3ddWzBdO1xyXG4gICAgICAgIGN1cnJlbnRDZWxsWzJdID0gdGFibGUucmVkaXBzLm9mZnNldFsyXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2VsbCA9IDA7XHJcblxyXG4gICAgICBpZiAocm93IDwgMCB8fCBjZWxsIDwgMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2VsbCA8IDAgb3Igcm93IDwgMCB0aGVuIHVzZSBsYXN0IHBvc3NpYmxlIGxvY2F0aW9uXHJcbiAgICAgIHtcclxuICAgICAgICBwcmV2aW91cygpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKHJvdyAhPT0gcm93X2ZvdW5kKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50IGNlbGwgZm91bmQgYnV0IGlmIGN1cnJlbnQgcm93IGRpZmZlciBmcm9tIHByZXZpb3VzbHkgZm91bmQgcm93ICh0aGFua3MgdG9vIHdoaWxlIGxvb3Agd2l0aCByb3ctLSkgdGhlbiB0ZXN0IGlmIFkgaXMgaW5zaWRlIGN1cnJlbnQgY2VsbCwgKHRoaXMgc2hvdWxkIHByZXZlbnQgY2FzZSB3aGVyZSBURCBib3JkZXIgPiAxcHggYW5kIHVwcGVyIGNvbHNwYW5lZCByb3cgbGlrZSBpbiBleGFtcGxlMTUpIGxvZ2ljIHdpbGwgZW5kIGluIHVwcGVyIGNvbHNwYW5lZCByb3cgd2hpbGUgY3VycmVudCByb3cgd2lsbCBub3QgbW92ZSAtIGFuZCB0aGF0IHdhcyB3cm9uZ1xyXG4gICAgICB7XHJcblxyXG4gICAgICAgIGN1cnJlbnRDZWxsWzBdID0gcm93X29mZnNldFtyb3ddWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjYWxjdWxhdGUgdG9wIGFuZCBib3R0b20gcm93IG9mZnNldCAoYWdhaW4pXHJcbiAgICAgICAgY3VycmVudENlbGxbMl0gPSBjdXJyZW50Q2VsbFswXSArIHRhYmxlLnJvd3Nbcm93XS5jZWxsc1tjZWxsXS5vZmZzZXRIZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChZIDwgY3VycmVudENlbGxbMF0gfHwgWSA+IGN1cnJlbnRDZWxsWzJdKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgWSBpcyBvdXRzaWRlIG9mIHRoZSBjdXJyZW50IHJvdywgcmV0dXJuIHByZXZpb3VzIGxvY2F0aW9uXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJldmlvdXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBNZXRob2Qgc2V0cyBiYWNrZ3JvdW5kIGNvbG9yIGZvciB0aGUgY3VycmVudCB0YWJsZSBjZWxsIGFuZCByZW1lbWJlcnMgcHJldmlvdXMgcG9zaXRpb24gYW5kIGJhY2tncm91bmQgY29sb3IuICBJdCBpcyBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmUgYW5kIGNlbGxDaGFuZ2VkLlxyXG4gIHNldFBvc2l0aW9uID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICBpZiAocm93ICE9PSBudWxsICYmIGNlbGwgIT09IG51bGwpICAgICAgLy8gaW4gY2FzZSBpZiBvcmRpbmFyeSBlbGVtZW50IGlzIHBsYWNlZCBpbnNpZGUgJ2RlbnknIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgYmdTdHlsZU9sZCA9IGdldFRkU3R5bGUocm93KTsgICAgICAgICAvLyByZW1lbWJlciBiYWNrZ3JvdW5kIGNvbG9yIGJlZm9yZSBzZXR0aW5nIHRoZSBuZXcgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICBzZXRUZFN0eWxlKHJvdyk7ICAgICAgICAgICAgICAgICAgICAgIC8vIGhpZ2hsaWdodCBjdXJyZW50IFREIC8gVFIgKGNvbG9ycyBhbmQgc3R5bGVzIGFyZSByZWFkIGZyb20gcHVibGljIHByb3BlcnR5IFwiaG92ZXJcIlxyXG4gICAgICByb3dfb2xkID0gcm93OyAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGN1cnJlbnQgcG9zaXRpb24gKGZvciByb3cgYW5kIGNlbGwpXHJcbiAgICAgIGNlbGxfb2xkID0gY2VsbDtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2Qgc2V0cyB0YWJsZSBjZWxsKHMpIGJhY2tncm91bmQgc3R5bGVzIChiYWNrZ3JvdW5kIGNvbG9ycyBhbmQgYm9yZGVyIHN0eWxlcykuXHJcbiAgICogSWYgdGRTdHlsZSBpcyB1bmRlZmluZWQgdGhlbiBjdXJyZW50IHRkL3RyIHdpbGwgYmUgaGlnaGxpZ2h0ZWQgZnJvbSBwdWJsaWMgcHJvcGVydHkgaG92ZXIuY29sb3JfdGQsIGhvdmVyLmNvbG9yX3RyIC4uLlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gcmkgUm93IGluZGV4LlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0IE9iamVjdCBjb250YWlucyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIChcInRcIiBpcyBURCBzdHlsZSBvYmplY3QgaXMgcHJlcGFyZWQgaW4gZ2V0VGRTdHlsZSBtZXRob2QpLlxyXG4gICAqL1xyXG4gIHNldFRkU3R5bGUgPSBmdW5jdGlvbiAocmksIHQpIFxyXG4gIHtcclxuICAgIHZhciB0ciwgczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIHJvdyBhbmQgdGQuc3R5bGVcclxuXHJcbiAgICB0ciA9IHRhYmxlLnJvd3NbcmldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCB0YWJsZSByb3dcclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ci5jZWxscy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjb2xvcnMgdG8gdGFibGUgY2VsbHMgKHJlc3BlY3RpdmVseSkgb3IgZmlyc3QgY29sb3IgdG8gYWxsIGNlbGxzIChpbiBjYXNlIG9mIHNldHRpbmdzIGhvdmVyIHRvIHRoZSByb3cpXHJcbiAgICB7XHJcbiAgICAgIHMgPSB0ci5jZWxsc1tpXS5zdHlsZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byBjdXJyZW50IFREIHN0eWxlXHJcbiAgICAgIHMuYmFja2dyb3VuZENvbG9yID0gKHQgPT09IHVuZGVmaW5lZCkgPyBSRURJUFMuZHJhZy5ob3Zlci5jb2xvclRyIDogdC5jb2xvcltpXS50b1N0cmluZygpOyAgLy8gVFIgYmFja2dyb3VuZCBjb2xvciAtIHRkU3R5bGUgaXMgdW5kZWZpbmVkIHRoZW4gaGlnaGxpZ2h0IFREIG90aGVyd2lzZSByZXR1cm4gcHJldmlvdXMgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgICBcclxuICAgICAgaWYgKFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyICE9PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUUiBib3JkZXIgLSBpZiBob3Zlci5ib3JkZXJUZCBpcyBzZXQgdGhlbiB0YWtlIGNhcmUgb2YgYm9yZGVyIHN0eWxlXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAodCA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYm9yZGVyIChoaWdobGlnaHQpIC0gc291cmNlIHJvdyB3aWxsIG5vdCBoYXZlIGFueSBib3JkZXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAocm93IDwgcm93X3NvdXJjZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGlzIG1vdmVkIGFib3ZlIHNvdXJjZSByb3cgaW4gY3VycmVudCB0YWJsZVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBzLmJvcmRlclRvcCA9IFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBpcyBtb3ZlZCBiZWxvdyBzb3VyY2Ugcm93IGluIGN1cnJlbnQgdGFibGVcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgcy5ib3JkZXJCb3R0b20gPSBSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHByZXZpb3VzIHN0YXRlIGJvcmRlclRvcCBhbmQgYm9yZGVyQm90dG9tIChleGl0IGZyb20gVEQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcy5ib3JkZXJUb3BXaWR0aCA9IHQudG9wW2ldWzBdO1xyXG4gICAgICAgICAgcy5ib3JkZXJUb3BTdHlsZSA9IHQudG9wW2ldWzFdO1xyXG4gICAgICAgICAgcy5ib3JkZXJUb3BDb2xvciA9IHQudG9wW2ldWzJdO1xyXG4gICAgICAgICAgcy5ib3JkZXJCb3R0b21XaWR0aCA9IHQuYm90dG9tW2ldWzBdO1xyXG4gICAgICAgICAgcy5ib3JkZXJCb3R0b21TdHlsZSA9IHQuYm90dG9tW2ldWzFdO1xyXG4gICAgICAgICAgcy5ib3JkZXJCb3R0b21Db2xvciA9IHQuYm90dG9tW2ldWzJdO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvLyBNZXRob2QgcmV0dXJucyBiYWNrZ3JvdW5kIGFuZCBib3JkZXIgc3R5bGVzIGFzIG9iamVjdCBmb3IgdGhlIGlucHV0IHBhcmFtZXRlciByb3cgaW5kZXggKHJpKS4gIEByZXR1cm4ge09iamVjdH0gT2JqZWN0IGNvbnRhaW5pbmcgYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcyAoZm9yIHRoZSByb3cpLlxyXG4gIGdldFRkU3R5bGUgPSBmdW5jdGlvbiAocmkpIFxyXG4gIHtcclxuICAgIHZhciB0ciwgYzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIHJvdyBhbmQgdGQgcmVmZXJlbmNlICAgXHJcbiAgICB2YXIgdCA9IHtjb2xvcjogW10sIHRvcDogW10sIHJpZ2h0OiBbXSwgYm90dG9tOiBbXSwgbGVmdDogW119OyAgICAgICAgLy8gZGVmaW5lIFREIHN0eWxlIG9iamVjdCB3aXRoIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXM6IHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdFxyXG4gICAgICBcclxuICAgIHZhciBib3JkZXIgPSBmdW5jdGlvbiAoYywgbmFtZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcml2YXRlIG1ldGhvZCBnZXRzIGJvcmRlciBzdHlsZXM6IHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdFxyXG4gICAge1xyXG4gICAgICB2YXIgd2lkdGggPSAnYm9yZGVyJyArIG5hbWUgKyAnV2lkdGgnLCBzdHlsZSA9ICdib3JkZXInICsgbmFtZSArICdTdHlsZScsIGNvbG9yID0gJ2JvcmRlcicgKyBuYW1lICsgJ0NvbG9yJztcclxuICAgICAgcmV0dXJuIFtnZXRTdHlsZShjLCB3aWR0aCksIGdldFN0eWxlKGMsIHN0eWxlKSwgZ2V0U3R5bGUoYywgY29sb3IpXTtcclxuICAgIH07XHJcblxyXG4gICAgdHIgPSB0YWJsZS5yb3dzW3JpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgdGFibGUgcm93XHJcbiAgICBcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHIuY2VsbHMubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBzdHlsZXMgZm9yIGVhY2ggdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBjID0gdHIuY2VsbHNbaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBURCByZWZlcmVuY2VcclxuICAgICAgdC5jb2xvcltpXSA9IGMuc3R5bGUuYmFja2dyb3VuZENvbG9yOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgIFxyXG4gICAgICBpZiAoUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHIgIT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHRvcCBhbmQgYm90dG9tIFREIGJvcmRlciBzdHlsZXMgaWYgaG92ZXIuYm9yZGVyVHIgcHJvcGVydHkgaXMgc2V0XHJcbiAgICAgIHtcclxuICAgICAgICB0LnRvcFtpXSA9IGJvcmRlcihjLCAnVG9wJyk7XHJcbiAgICAgICAgdC5ib3R0b21baV0gPSBib3JkZXIoYywgJ0JvdHRvbScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHQ7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHJldHVybnMgYXJyYXkgb2YgZWxlbWVudCBib3VuZHMgKG9mZnNldCkgdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0IChuZWVkZWQgZm9yIHRhYmxlIGdyaWQgY2FsY3VsYXRpb24pLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGJveCBIVE1MRWxlbWVudCBmb3IgYm94IG1ldHJpY3MuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtwb3NpdGlvbl0gSFRNTEVsZW1lbnQgXCJwb3NpdGlvblwiIHN0eWxlLiBFbGVtZW50cyB3aXRoIHN0eWxlIFwiZml4ZWRcIiB3aWxsIG5vdCBoYXZlIGluY2x1ZGVkIHBhZ2Ugc2Nyb2xsIG9mZnNldC5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtib3hfc2Nyb2xsXSBJZiBzZXQgdG8gXCJmYWxzZVwiIHRoZW4gZWxlbWVudCBzY3JvbGwgb2Zmc2V0IHdpbGwgbm90IGJlIGluY2x1ZGVkIGluIGNhbGN1bGF0aW9uIChkZWZhdWx0IGlzIFwidHJ1ZVwiKS5cclxuICAgKiBAcmV0dXJuIHtBcnJheX0gQm94IG9mZnNldCBhcnJheTogWyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQgXVxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gY2FsY3VsYXRlIGJveCBvZmZzZXQgZm9yIHRoZSBkaXYgaWQ9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICogZGl2Ym94ID0gYm94T2Zmc2V0KGRyYWdDb250YWluZXIpO1xyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gaW5jbHVkZSBzY3JvbGwgcG9zaXRpb24gaW4gb2Zmc2V0XHJcbiAgICogb2Zmc2V0ID0gYm94T2Zmc2V0KHJvd09iaiwgJ2ZpeGVkJyk7XHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBnZXQgRElWIG9mZnNldCB3aXRoIG9yIHdpdGhvdXQgXCJwYWdlIHNjcm9sbFwiIGFuZCBleGNsdWRlZCBlbGVtZW50IHNjcm9sbCBvZmZzZXRcclxuICAgKiBjYiA9IGJveE9mZnNldChkaXYsIHBvc2l0aW9uLCBmYWxzZSk7XHJcbiAgICovXHJcbiAgYm94T2Zmc2V0ID0gZnVuY3Rpb24gKGJveCwgcG9zaXRpb24sIGJveF9zY3JvbGwpXHJcbiAge1xyXG4gICAgdmFyIG9MZWZ0ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IGxlZnQgKHRha2UgY2FyZSBvZiBob3Jpem9udGFsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHZhciBvVG9wICA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9mZnNldCB0b3AgKHRha2UgY2FyZSBvZCB2ZXJ0aWNhbCBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB2YXIgYm94T2xkID0gYm94OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGJveCBvYmplY3RcclxuXHJcbiAgICBpZiAocG9zaXRpb24gIT09ICdmaXhlZCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRhYmxlX3Bvc2l0aW9uIGlzIHVuZGVmaW5lZCwgJycgb3IgJ3BhZ2Vfc2Nyb2xsJyB0aGVuIGluY2x1ZGUgcGFnZSBzY3JvbGwgb2Zmc2V0LCB3aW5kb3dTY3JvbGxQb3NpdGlvbiBpcyBzZXQgaW4gY2FsY3VsYXRlQ2VsbHMoKSwgY2FsY3VsYXRlQ2VsbHMoKSBpcyBjYWxsZWQgb24gd2luZG93IHNjcm9sbCBldmVudFxyXG4gICAge1xyXG4gICAgICBvTGVmdCA9IDAgLSB3aW5kb3dTY3JvbGxQb3NpdGlvblswXTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IGxlZnQgKHRha2UgY2FyZSBvZiBob3Jpem9udGFsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgICAgb1RvcCAgPSAwIC0gd2luZG93U2Nyb2xsUG9zaXRpb25bMV07ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9mZnNldCB0b3AgKHRha2UgY2FyZSBvZCB2ZXJ0aWNhbCBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGJveF9zY3JvbGwgPT09IHVuZGVmaW5lZCB8fCBib3hfc2Nyb2xsID09PSB0cnVlKSAgICAgICAgICAvLyBjbGltYiB1cCB0aHJvdWdoIERPTSBoaWVyYXJjaHkgKGdldFNjcm9sbFBvc2l0aW9uKCkgdGFrZXMgY2FyZSBhYm91dCBwYWdlIHNjcm9sbCBwb3NpdGlvbnMpXHJcbiAgICB7XHJcbiAgICAgIGRvXHJcbiAgICAgIHtcclxuICAgICAgICBvTGVmdCArPSBib3gub2Zmc2V0TGVmdCAtIGJveC5zY3JvbGxMZWZ0O1xyXG4gICAgICAgIG9Ub3AgKz0gYm94Lm9mZnNldFRvcCAtIGJveC5zY3JvbGxUb3A7XHJcbiAgICAgICAgYm94ID0gYm94Lm9mZnNldFBhcmVudDtcclxuICAgICAgfVxyXG4gICAgICB3aGlsZSAoYm94ICYmIGJveC5ub2RlTmFtZSAhPT0gJ0JPRFknKTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xpbWIgdXAgdG8gdGhlIEJPRFkgZWxlbWVudCBidXQgd2l0aG91dCBzY3JvbGwgcG9zaXRpb25zXHJcbiAgICB7XHJcbiAgICAgIGRvXHJcbiAgICAgIHtcclxuICAgICAgICBvTGVmdCArPSBib3gub2Zmc2V0TGVmdDtcclxuICAgICAgICBvVG9wICs9IGJveC5vZmZzZXRUb3A7XHJcbiAgICAgICAgYm94ID0gYm94Lm9mZnNldFBhcmVudDtcclxuICAgICAgfVxyXG4gICAgICB3aGlsZSAoYm94ICYmIGJveC5ub2RlTmFtZSAhPT0gJ0JPRFknKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAgICAgICAgdG9wICAgICAgICAgICAgICAgICByaWdodCwgICAgICAgICAgICAgICAgICAgICBib3R0b20gICAgICAgICAgIGxlZnRcclxuICAgIHJldHVybiBbIG9Ub3AsIG9MZWZ0ICsgYm94T2xkLm9mZnNldFdpZHRoLCBvVG9wICsgYm94T2xkLm9mZnNldEhlaWdodCwgb0xlZnQgXTtcclxuICB9O1xyXG5cclxuICAvLyBNZXRob2QgaXMgY2FsbGVkIGluIGV2ZXJ5IHBvc3NpYmxlIGNhc2Ugd2hlbiBwb3NpdGlvbiBvciBzaXplIG9mIHRhYmxlIGdyaWQgY291bGQgY2hhbmdlIGxpa2U6IHBhZ2Ugc2Nyb2xsaW5nLCBlbGVtZW50IGRyb3BwZWQgdG8gdGhlIHRhYmxlIGNlbGwsIGVsZW1lbnQgc3RhcnQgZHJhZ2dpbmcgYW5kIHNvIG9uLlxyXG4gIC8vIEl0IGNhbGN1bGF0ZXMgdGFibGUgcm93IG9mZnNldHMgKHRhYmxlIGdyaWQpIGFuZCBzYXZlcyB0byB0aGUgXCJ0YWJsZXNcIiBhcnJheS5cclxuICAvLyBUYWJsZSByb3dzIHdpdGggc3R5bGUgZGlzcGxheT0nbm9uZScgYXJlIHNraXBwZWQuXHJcbiAgY2FsY3VsYXRlQ2VsbHMgPSBmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICB2YXIgcm93X29mZnNldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvdyBib3hcclxuICAgIHZhciBwb3NpdGlvbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgZWxlbWVudCAodGFibGUgb3IgdGFibGUgY29udGFpbmVyKSBoYXMgcG9zaXRpb246Zml4ZWQgdGhlbiBcInBhZ2Ugc2Nyb2xsXCIgb2Zmc2V0IHNob3VsZCBub3QgYmUgYWRkZWRcclxuICAgIHZhciBjYjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYm94IG9mZnNldCBmb3IgY29udGFpbmVyIGJveCAoY2IpXHJcblxyXG4gICAgd2luZG93U2Nyb2xsUG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGVDZWxscygpIGlzIGNhbGxlZCBvbiB3aW5kb3cgc2Nyb2xsIGV2ZW50IHNvIGhlcmUgaXMgcGVyZmVjdCBwbGFjZSB0byByZWZyZXNoIHdpbmRvdyBzY3JvbGwgcG9zaXRpb25cclxuICAgIHJvd19vZmZzZXQgPSBbXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSByb3dfb2Zmc2V0IGFycmF5XHJcbiAgICBcclxuICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUodGFibGUsICdwb3NpdGlvbicpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRhYmxlIHN0eWxlIHBvc2l0aW9uICh0byBleGNsdWRlIFwicGFnZSBzY3JvbGxcIiBvZmZzZXQgZnJvbSBjYWxjdWxhdGlvbiBpZiBuZWVkZWQpXHJcbiAgICBcclxuICAgIGlmIChwb3NpdGlvbiAhPT0gJ2ZpeGVkJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGFibGUgZG9lc24ndCBoYXZlIHN0eWxlIHBvc2l0aW9uOmZpeGVkIHRoZW4gdGFibGUgY29udGFpbmVyIHNob3VsZCBiZSB0ZXN0ZWRcclxuICAgIHtcclxuICAgICAgcG9zaXRpb24gPSBnZXRTdHlsZSh0YWJsZS5wYXJlbnROb2RlLCAncG9zaXRpb24nKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IHRhYmxlLnJvd3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pICAgICAgICAgICAgICAgICAgICAvLyBiYWNrd2FyZCBsb29wIGhhcyBiZXR0ZXIgcGVyZm9tYW5jZVxyXG4gICAge1xyXG4gICAgICBpZiAodGFibGUucm93c1tpXS5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgcm93cyB0byB0aGUgb2Zmc2V0IGFycmF5IGlmIHJvdyBpcyBub3QgaGlkZGVuXHJcbiAgICAgIHtcclxuICAgICAgICByb3dfb2Zmc2V0W2ldID0gYm94T2Zmc2V0KHRhYmxlLnJvd3NbaV0sIHBvc2l0aW9uKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB0YWJsZS5yZWRpcHMub2Zmc2V0ID0gYm94T2Zmc2V0KHRhYmxlLCBwb3NpdGlvbik7ICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgdGFibGUgaW5mb3JtYXRpb25zICh0YWJsZSBvZmZzZXQgYW5kIHJvdyBvZmZzZXRzKVxyXG4gICAgdGFibGUucmVkaXBzLnJvd19vZmZzZXQgPSByb3dfb2Zmc2V0O1xyXG5cclxuICAgIGRpdkJveCA9IGJveE9mZnNldChkcmFnQ29udGFpbmVyKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGJveCBvZmZzZXQgZm9yIHRoZSBkaXYgaWQ9cmVkaXBzLWRyYWdcclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzY3JvbGxEYXRhLmNvbnRhaW5lci5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzIGlmIG5lZWRlZFxyXG4gICAge1xyXG4gICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHNjcm9sbERhdGEuY29udGFpbmVyW2ldLmRpdiwgJ3Bvc2l0aW9uJyk7ICAgICAvLyBzZXQgY29udGFpbmVyIGJveCBzdHlsZSBwb3NpdGlvbiAodG8gZXhjbHVkZSBwYWdlIHNjcm9sbCBvZmZzZXQgZnJvbSBjYWxjdWxhdGlvbiBpZiBuZWVkZWQpXHJcbiAgICAgIGNiID0gYm94T2Zmc2V0KHNjcm9sbERhdGEuY29udGFpbmVyW2ldLmRpdiwgcG9zaXRpb24sIGZhbHNlKTsgICAgIC8vIGdldCBESVYgY29udGFpbmVyIG9mZnNldCB3aXRoIG9yIHdpdGhvdXQgXCJwYWdlIHNjcm9sbFwiIGFuZCBleGNsdWRlZCBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGNvbnRlbnRcclxuICAgICAgXHJcbiAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2ldLm9mZnNldCA9IGNiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXBhcmUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXNcclxuICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbaV0ubWlkc3RYID0gKGNiWzFdICsgY2JbM10pIC8gMjtcclxuICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbaV0ubWlkc3RZID0gKGNiWzBdICsgY2JbMl0pIC8gMjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBNZXRob2QgcmV0dXJucyBjdXJyZW50IHBhZ2Ugc2Nyb2xsIHZhbHVlcyBhcyBhcnJheSAoWCBhbmQgWSBheGlzKS5cclxuICBnZXRTY3JvbGxQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHZhciBzY3JvbGxZID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICAvL3ZhciBzY3JvbGxYID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xyXG4gICAgdmFyIHNjcm9sbFggPSAwO1xyXG5cclxuICAgIHJldHVybiBbIHNjcm9sbFgsIHNjcm9sbFkgXTtcclxuICB9O1xyXG5cclxuICAvLyBIb3Jpem9udGFsIGF1dG8gc2Nyb2xsIG1ldGhvZC4gIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNvIFdpbmRvdyBvciBESVYgZWxlbWVudCAoc28gLSBzY3JvbGwgb2JqZWN0KS5cclxuICBhdXRvU2Nyb2xsWCA9IGZ1bmN0aW9uIChzbykgXHJcbiAge1xyXG4gICAgdmFyIHBvcywgICAgICAvLyBsZWZ0IHN0eWxlIHBvc2l0aW9uXHJcbiAgICAgIG9sZCwgICAgICAvLyBvbGQgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAobmVlZGVkIGZvciB3aW5kb3cgc2Nyb2xsaW5nKVxyXG4gICAgICBzY3JvbGxQb3NpdGlvbiwgLy8gZGVmaW5lIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgIG1heHNwLCAgICAgIC8vIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgIGVkZ2VDcm9zc2VkLCAgLy8gY3Jvc3NlZCBlZGdlIGZvciB3aW5kb3cgYW5kIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIFggPSBwb2ludGVyLngsICAvLyBkZWZpbmUgcG9pbnRlciBYIHBvc2l0aW9uXHJcbiAgICAgIFkgPSBwb2ludGVyLnk7ICAvLyBkZWZpbmUgcG9pbnRlciBZIHBvc2l0aW9uXHJcbiAgICAvLyBpZiBtb3VzZXVwIHRoZW4gc3RvcCBoYW5kbGluZyBcImN1cnJlbnQgY2VsbFwiXHJcbiAgICBpZiAoZWRnZS5mbGFnLnggPiAwKSB7XHJcbiAgICAgIC8vIGNhbGN1bGF0ZSBjZWxsIChhdXRvc2Nyb2xsIGlzIHdvcmtpbmcpXHJcbiAgICAgIGNhbGN1bGF0ZUNlbGxzKCk7XHJcbiAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlIHJvdyBhbmQgdGFibGUgY2VsbFxyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpO1xyXG4gICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjZWxsIGlmIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIERJViBpZD1cInJlZGlwcy1kcmFnXCJcclxuICAgICAgaWYgKFggPCBkaXZCb3hbMV0gJiYgWCA+IGRpdkJveFszXSAmJiBZIDwgZGl2Qm94WzJdICYmIFkgPiBkaXZCb3hbMF0pIHtcclxuICAgICAgICBjZWxsQ2hhbmdlZCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBzYXZlIHNjcm9sbCBvYmplY3QgdG8gdGhlIGdsb2JhbCB2YXJpYWJsZSBmb3IgdGhlIGZpcnN0IGNhbGwgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmVcclxuICAgIC8vIHJlY3Vyc2l2ZSBjYWxscyB3aWxsIG5vdCBlbnRlciB0aGlzIGNvZGUgYW5kIHJlZmVyZW5jZSB0byB0aGUgc2Nyb2xsRGF0YS5vYmogd2lsbCBiZSBwcmVzZXJ2ZWRcclxuICAgIGlmICh0eXBlb2Yoc28pID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBzY3JvbGxEYXRhLm9iaiA9IHNvO1xyXG4gICAgfVxyXG4gICAgLy8gd2luZG93IGF1dG9zY3JvbGwgKGRlZmluZSBjdXJyZW50LCBvbGQgYW5kIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBvbGQgPSBnZXRTY3JvbGxQb3NpdGlvbigpWzBdO1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEud2lkdGggLSBzY3JlZW4ud2lkdGg7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5wYWdlLng7XHJcbiAgICB9XHJcbiAgICAvLyBzY3JvbGxhYmxlIGNvbnRhaW5lciAoZGVmaW5lIGN1cnJlbnQgYW5kIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsTGVmdDtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxXaWR0aCAtIHNjcm9sbERhdGEub2JqLmNsaWVudFdpZHRoO1xyXG4gICAgICBlZGdlQ3Jvc3NlZCA9IGVkZ2UuZGl2Lng7XHJcbiAgICB9XHJcbiAgICAvLyBpZiBzY3JvbGxpbmcgaXMgcG9zc2libGVcclxuICAgIGlmIChlZGdlLmZsYWcueCA+IDAgJiYgKChlZGdlQ3Jvc3NlZCA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPiAwKSB8fCAoZWRnZUNyb3NzZWQgPiAwICYmIHNjcm9sbFBvc2l0aW9uIDwgbWF4c3ApKSkge1xyXG4gICAgICAvLyBpZiBvYmplY3QgaXMgd2luZG93XHJcbiAgICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSB7XHJcbiAgICAgICAgLy8gc2Nyb2xsIHdpbmRvd1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxCeShlZGdlQ3Jvc3NlZCwgMCk7XHJcbiAgICAgICAgLy8gZ2V0IG5ldyB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChhZnRlciBzY3JvbGxpbmcpXHJcbiAgICAgICAgLy8gYmVjYXVzZSBhdCBwYWdlIHRvcCBvciBib3R0b20gZWRnZVkgY2FuIGJlIGJpZ2dlciB0aGVuIHRoZSByZXN0IG9mIHNjcm9sbGluZyBhcmVhXHJcbiAgICAgICAgLy8gaXQgd2lsbCBiZSBuaWNlIHRvIGtub3cgaG93IG11Y2ggd2FzIHdpbmRvdyBzY3JvbGxlZCBhZnRlciBzY3JvbGxCeSBjb21tYW5kXHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpWzBdO1xyXG4gICAgICAgIC8vIGdldCBjdXJyZW50IG9iamVjdCB0b3Agc3R5bGVcclxuICAgICAgICBwb3MgPSBwYXJzZUludChvYmouc3R5bGUubGVmdCwgMTApO1xyXG4gICAgICAgIGlmIChpc05hTihwb3MpKSB7XHJcbiAgICAgICAgICBwb3MgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBvciBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBzY3JvbGxEYXRhLm9iai5zY3JvbGxMZWZ0ICs9IGVkZ2VDcm9zc2VkO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHJlY3Vyc2l2ZSBhdXRvc2Nyb2xsIGNhbGxcclxuICAgICAgc2V0VGltZW91dChhdXRvU2Nyb2xsWCwgUkVESVBTLmRyYWcuc2Nyb2xsLnNwZWVkKTtcclxuICAgIH1cclxuICAgIC8vIGF1dG9zY3JvbGwgaXMgZW5kZWQ6IGVsZW1lbnQgaXMgb3V0IG9mIHRoZSBwYWdlIGVkZ2Ugb3IgbWF4aW11bSBwb3NpdGlvbiBpcyByZWFjaGVkIChsZWZ0IG9yIHJpZ2h0KVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIC8vIHJldHVybiBvbnNjcm9sbCBldmVudCBoYW5kbGVyICh0byB3aW5kb3cgb3IgZGl2IGVsZW1lbnQpXHJcbiAgICAgIFJFRElQUy5ldmVudC5hZGQoc2Nyb2xsRGF0YS5vYmosICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7XHJcbiAgICAgIC8vIHJlc2V0IGF1dG8gc2Nyb2xsIGZsYWcgWFxyXG4gICAgICBlZGdlLmZsYWcueCA9IDA7XHJcbiAgICAgIC8vIHJlc2V0IGN1cnJlbnQgY2VsbCBwb3NpdGlvblxyXG4gICAgICBjdXJyZW50Q2VsbCA9IFswLCAwLCAwLCAwXTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBWZXJ0aWNhbCBhdXRvIHNjcm9sbCBtZXRob2QuICBAcGFyYW0ge0hUTUxFbGVtZW50fSBzbyBXaW5kb3cgb3IgRElWIGVsZW1lbnQgKHNvIC0gc2Nyb2xsIG9iamVjdCkuXHJcbiAgYXV0b1Njcm9sbFkgPSBmdW5jdGlvbiAoc28pIFxyXG4gIHtcclxuICAgIHZhciBwb3MsICAgICAgLy8gdG9wIHN0eWxlIHBvc2l0aW9uXHJcbiAgICAgIG9sZCwgICAgICAvLyBvbGQgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAobmVlZGVkIGZvciB3aW5kb3cgc2Nyb2xsaW5nKVxyXG4gICAgICBzY3JvbGxQb3NpdGlvbiwgLy8gZGVmaW5lIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgIG1heHNwLCAgICAgIC8vIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgIGVkZ2VDcm9zc2VkLCAgLy8gY3Jvc3NlZCBlZGdlIGZvciB3aW5kb3cgYW5kIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIFggPSBwb2ludGVyLngsICAvLyBkZWZpbmUgcG9pbnRlciBYIHBvc2l0aW9uXHJcbiAgICAgIFkgPSBwb2ludGVyLnk7ICAvLyBkZWZpbmUgcG9pbnRlciBZIHBvc2l0aW9uXHJcbiAgICBcclxuICAgIGlmIChlZGdlLmZsYWcueSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbW91c2V1cCB0aGVuIHN0b3AgaGFuZGxpbmcgXCJjdXJyZW50IGNlbGxcIlxyXG4gICAge1xyXG4gICAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgY2VsbCAoYXV0b3Njcm9sbCBpcyB3b3JraW5nKVxyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSByb3cgYW5kIHRhYmxlIGNlbGxcclxuICAgICAgXHJcbiAgICAgIGlmIChYIDwgZGl2Qm94WzFdICYmIFggPiBkaXZCb3hbM10gJiYgWSA8IGRpdkJveFsyXSAmJiBZID4gZGl2Qm94WzBdKSAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgaWYgbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgRElWIGlkPVwicmVkaXBzLWRyYWdcIlxyXG4gICAgICB7XHJcbiAgICAgICAgY2VsbENoYW5nZWQoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBzYXZlIHNjcm9sbCBvYmplY3QgdG8gdGhlIGdsb2JhbCB2YXJpYWJsZSBmb3IgdGhlIGZpcnN0IGNhbGwgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmUsIHJlY3Vyc2l2ZSBjYWxscyB3aWxsIG5vdCBlbnRlciB0aGlzIGNvZGUgYW5kIHJlZmVyZW5jZSB0byB0aGUgc2Nyb2xsRGF0YS5vYmogd2lsbCBiZSBwcmVzZXJ2ZWRcclxuICAgIGlmICh0eXBlb2Yoc28pID09PSAnb2JqZWN0JykgXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbERhdGEub2JqID0gc287XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2luZG93IGF1dG9zY3JvbGwgKGRlZmluZSBjdXJyZW50LCBvbGQgYW5kIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IG9sZCA9IGdldFNjcm9sbFBvc2l0aW9uKClbMV07XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS5oZWlnaHQgLSBzY3JlZW4uaGVpZ2h0O1xyXG4gICAgICBlZGdlQ3Jvc3NlZCA9IGVkZ2UucGFnZS55O1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGxhYmxlIGNvbnRhaW5lciAoZGVmaW5lIGN1cnJlbnQgYW5kIG1heGltdW0gc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IHNjcm9sbERhdGEub2JqLnNjcm9sbFRvcDtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxIZWlnaHQgLSBzY3JvbGxEYXRhLm9iai5jbGllbnRIZWlnaHQ7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5kaXYueTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gaWYgc2Nyb2xsaW5nIGlzIHBvc3NpYmxlXHJcbiAgICBpZiAoZWRnZS5mbGFnLnkgPiAwICYmICgoZWRnZUNyb3NzZWQgPCAwICYmIHNjcm9sbFBvc2l0aW9uID4gMCkgfHwgKGVkZ2VDcm9zc2VkID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA8IG1heHNwKSkpIFxyXG4gICAge1xyXG4gICAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBvYmplY3QgaXMgd2luZG93XHJcbiAgICAgIHtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsQnkoMCwgZWRnZUNyb3NzZWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHdpbmRvd1xyXG4gICAgICAgIHNjcm9sbFBvc2l0aW9uID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVsxXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgbmV3IHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKGFmdGVyIHNjcm9sbGluZyksIGJlY2F1c2UgYXQgcGFnZSB0b3Agb3IgYm90dG9tIGVkZ2VZIGNhbiBiZSBiaWdnZXIgdGhlbiB0aGUgcmVzdCBvZiBzY3JvbGxpbmcgYXJlYSwgaXQgd2lsbCBiZSBuaWNlIHRvIGtub3cgaG93IG11Y2ggd2FzIHdpbmRvdyBzY3JvbGxlZCBhZnRlciBzY3JvbGxCeSBjb21tYW5kXHJcbiAgICAgICAgcG9zID0gcGFyc2VJbnQob2JqLnN0eWxlLnRvcCwgMTApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBjdXJyZW50IG9iamVjdCB0b3Agc3R5bGVcclxuICAgICAgICBcclxuICAgICAgICBpZiAoaXNOYU4ocG9zKSkgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcG9zID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3Igc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAge1xyXG4gICAgICAgIHNjcm9sbERhdGEub2JqLnNjcm9sbFRvcCArPSBlZGdlQ3Jvc3NlZDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgc2V0VGltZW91dChhdXRvU2Nyb2xsWSwgUkVESVBTLmRyYWcuc2Nyb2xsLnNwZWVkKTsgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjdXJzaXZlIGF1dG9zY3JvbGwgY2FsbFxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhdXRvc2Nyb2xsIGlzIGVuZGVkOiBlbGVtZW50IGlzIG91dCBvZiB0aGUgcGFnZSBlZGdlIG9yIG1heGltdW0gcG9zaXRpb24gaXMgcmVhY2hlZCAodG9wIG9yIGJvdHRvbSlcclxuICAgIHtcclxuICAgICAgUkVESVBTLmV2ZW50LmFkZChzY3JvbGxEYXRhLm9iaiwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgICAgICAgICAgLy8gcmV0dXJuIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgKHRvIHdpbmRvdyBvciBkaXYgZWxlbWVudClcclxuICAgICAgZWRnZS5mbGFnLnkgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgYXV0byBzY3JvbGwgZmxhZyBZXHJcbiAgICAgIGN1cnJlbnRDZWxsID0gWzAsIDAsIDAsIDBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGN1cnJlbnQgY2VsbCBwb3NpdGlvblxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBjb3BpZXMgY3VzdG9tIHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgZWxlbWVudCB0byB0aGUgY2xvbmVkIGVsZW1lbnQgYW5kIHNldHMgZXZlbnQgaGFuZGxlcnMgKG9ubW91c2Vkb3duIGFuZCBvbmRibGNsaWNrKS5cclxuICAgKiBUaGlzIGFjdGlvbiB3aWxsIGJlIHRha2VuIG9uIERJViBlbGVtZW50IGl0c2VsZiBhbmQgYWxsIGNoaWxkIERJViBlbGVtZW50cy5cclxuICAgKiBOZWVkZWQgaW4gY2FzZSB3aGVuIERJViBlbGVtZW50IGlzIGNsb25lZCBvciBST1cgaXMgY2xvbmVkIChmb3IgZHJhZ2dpbmcgbW9kZT1cInJvd1wiKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBzcmMgU291cmNlIGVsZW1lbnQgKERJViBvciBUUiBlbGVtZW50KS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjbG4gQ2xvbmVkIGVsZW1lbnQgKERJViBvciBUUiBlbGVtZW50KS5cclxuICAgKi9cclxuICBjb3B5UHJvcGVydGllcyA9IGZ1bmN0aW9uIChzcmMsIGNsbikgXHJcbiAge1xyXG4gICAgdmFyIGNvcHkgPSBbXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgbWV0aG9kXHJcbiAgICB2YXIgY2hpbGRzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIGZvciBjaGlsZCBlbGVtZW50cyAodGhpcyBtZXRob2QgY2FsbHMgXCJjb3B5XCIgbWV0aG9kKVxyXG4gICAgXHJcbiAgICBjb3B5WzBdID0gZnVuY3Rpb24gKGUxLCBlMikgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIGNvcHkgbWV0aG9kIGZvciBESVYgZWxlbWVudHMgKGUxIHNvdXJjZSBlbGVtZW50LCBlMiBjbG9uZWQgZWxlbWVudCksIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDA5NDgxMS9qYXZhc2NyaXB0LWNsb25lbm9kZS1hbmQtcHJvcGVydGllc1xyXG4gICAge1xyXG4gICAgICBpZiAoZTEucmVkaXBzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJlZGlwcyBwcm9wZXJ0eSBleGlzdHMgaW4gc291cmNlIGVsZW1lbnQsIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgKHJlZGlwcy5lbmFibGVkLCAgcmVkaXBzLmNvbnRhaW5lciAuLi4pXHJcbiAgICAgIHtcclxuICAgICAgICBlMi5yZWRpcHMgPSB7fTtcclxuICAgICAgICBlMi5yZWRpcHMuZW5hYmxlZCA9IGUxLnJlZGlwcy5lbmFibGVkO1xyXG4gICAgICAgIGUyLnJlZGlwcy5jb250YWluZXIgPSBlMS5yZWRpcHMuY29udGFpbmVyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChlMS5yZWRpcHMuZW5hYmxlZCkgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvbm1vdXNlZG93biBldmVudCBoYW5kbGVyIGlmIHNvdXJjZSBlbGVtZW50IGlzIGVuYWJsZWRcclxuICAgICAgICB7XHJcbiAgICAgICAgICByZWdpc3RlckV2ZW50cyhlMik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjb3B5WzFdID0gZnVuY3Rpb24gKGUxLCBlMikgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIGNvcHkgbWV0aG9kIGZvciBUUiBlbGVtZW50cyBcclxuICAgIHtcclxuICAgICAgaWYgKGUxLnJlZGlwcykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByZWRpcHMgcHJvcGVydHkgZXhpc3RzIGluIHNvdXJjZSBlbGVtZW50LCBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIChyZWRpcHMuZW1wdHlSb3cgLi4uKVxyXG4gICAgICB7XHJcbiAgICAgICAgZTIucmVkaXBzID0ge307XHJcbiAgICAgICAgZTIucmVkaXBzLmVtcHR5Um93ID0gZTEucmVkaXBzLmVtcHR5Um93O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBjaGlsZHMgPSBmdW5jdGlvbiAoZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG1ldGhvZCB0byBjb3B5IHByb3BlcnRpZXMgZm9yIGNoaWxkIGVsZW1lbnRzIChpbnB1dCBwYXJhbWV0ZXIgaXMgZWxlbWVudCBpbmRleCAwIC0gRElWLCAxIC0gVFIpXHJcbiAgICB7XHJcbiAgICAgIHZhciBlbDEsIGVsMjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29sbGVjdGlvbiBvZiBESVYvVFIgZWxlbWVudHMgaW4gc291cmNlIGFuZCBjbG9uZWQgZWxlbWVudFxyXG4gICAgICB2YXIgdG4gPSBbJ0RJVicsICdUUiddOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRhZyBuYW1lXHJcbiAgICAgIFxyXG4gICAgICBlbDEgPSBzcmMuZ2V0RWxlbWVudHNCeVRhZ05hbWUodG5bZV0pOyAgICAgICAgICAgIC8vIGNvbGxlY3QgY2hpbGQgRElWL1RSIGVsZW1lbnRzIGZyb20gdGhlIHNvdXJjZSBlbGVtZW50IChwb3NzaWJsZSBpZiBkaXYgZWxlbWVudCBjb250YWlucyB0YWJsZSlcclxuICAgICAgZWwyID0gY2xuLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRuW2VdKTsgICAgICAgICAgICAvLyBjb2xsZWN0IGNoaWxkIERJVi9UUiBlbGVtZW50cyBmcm9tIGNsb25lZCBlbGVtZW50XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsMi5sZW5ndGg7IGkrKykgICAgICAgICAgICAgIC8vIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgKHJlZGlwcy5lbmFibGVkLCAgcmVkaXBzLmNvbnRhaW5lciAuLi4pIGFuZCBzZXQgZXZlbnQgaGFuZGxlcnMgdG8gY2hpbGQgRElWIGVsZW1lbnRzXHJcbiAgICAgIHtcclxuICAgICAgICBjb3B5W2VdKGVsMVtpXSwgZWwyW2ldKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgaWYgKHNyYy5ub2RlTmFtZSA9PT0gJ0RJVicpICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHNvdXJjZSBlbGVtZW50IGlzIERJViBlbGVtZW50IHRoZW4gY29weSBjdXN0b20gcHJvcGVydGllcyBmb3IgRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgY29weVswXShzcmMsIGNsbik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChzcmMubm9kZU5hbWUgPT09ICdUUicpICAgICAgICAgICAgICAgICAgICAgLy8gaWYgc291cmNlIGVsZW1lbnQgaXMgVFIgZWxlbWVudCB0aGVuIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgZm9yIFRSIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgY29weVsxXShzcmMsIGNsbik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNoaWxkcygwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHByb3BlcnRpZXMgZm9yIERJViBjaGlsZCBlbGVtZW50c1xyXG4gICAgY2hpbGRzKDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcHJvcGVydGllcyBmb3IgVFIgY2hpbGQgZWxlbWVudHNcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHVwZGF0ZXMgY2xpbWl0MV9YIG9yIGNsaW1pdDJfWCBjbGFzcyBuYW1lIChYIGRlZmluZXMgY2xvbmluZyBsaW1pdCkuXHJcbiAgICogPHVsPlxyXG4gICAqIDxsaT5jbGltaXQxX1ggLSBhZnRlciBjbG9uaW5nIFggZWxlbWVudHMsIGxhc3QgZWxlbWVudCB3aWxsIGJlIG5vcm1hbCBkcmFnLWFibGUgZWxlbWVudDwvbGk+XHJcbiAgICogPGxpPmNsaW1pdDJfWCAtIGFmdGVyIGNsb25pbmcgWCBlbGVtZW50cywgbGFzdCBlbGVtZW50IHdpbGwgc3RheSB1bm1vdmFibGU8L2xpPlxyXG4gICAqIDwvdWw+XHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgRWxlbWVudCBvbiB3aGljaCBjbmFtZSBjbGFzcyBzaG91bGQgYmUgdXBkYXRlZC5cclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHZhbHVlIEluY3JlbWVudCBvciBkZWNyZW1lbnQgY2xpbWl0IHZhbHVlLlxyXG4gICAqL1xyXG4gIGNsb25lTGltaXQgPSBmdW5jdGlvbiAoZWwsIHZhbHVlKSBcclxuICB7XHJcbiAgICB2YXIgbWF0Y2hBcnJheTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaCBhcnJheVxyXG4gICAgdmFyIGxpbWl0VHlwZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGltaXQgdHlwZSAoMSAtIGNsb25lIGJlY29tZXMgXCJub3JtYWxcIiBkcmFnIGVsZW1lbnQgYXQgbGFzdDsgMiAtIGNsb25lIGVsZW1lbnQgc3RheXMgaW1tb3ZhYmxlKVxyXG4gICAgdmFyIGxpbWl0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGltaXQgbnVtYmVyXHJcbiAgICB2YXIgY2xhc3NlczsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGFzcyBuYW1lcyBvZiBjbG9uZSBlbGVtZW50XHJcbiAgICBcclxuICAgIGNsYXNzZXMgPSBlbC5jbGFzc05hbWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlYWQgY2xhc3MgbmFtZSBmcm9tIGVsZW1lbnRcclxuICAgIG1hdGNoQXJyYXkgPSBjbGFzc2VzLm1hdGNoKC9jbGltaXQoXFxkKV8oXFxkKykvKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2ggY2xpbWl0IGNsYXNzIG5hbWVcclxuICAgIFxyXG4gICAgaWYgKG1hdGNoQXJyYXkgIT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGNsYXNzIGNvbnRhaW5zIGNsaW1pdFxyXG4gICAge1xyXG4gICAgICBsaW1pdFR5cGUgPSBwYXJzZUludChtYXRjaEFycmF5WzFdLCAxMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBsaW1pdFR5cGUgKDEgb3IgMikgYW5kIGxpbWl0XHJcbiAgICAgIGxpbWl0ID0gcGFyc2VJbnQobWF0Y2hBcnJheVsyXSwgMTApO1xyXG4gICAgICBcclxuICAgICAgaWYgKGxpbWl0ID09PSAwICYmIHZhbHVlID09PSAxKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGN1cnJlbnQgbGltaXQgaXMgMCBhbmQgc2hvdWxkIGJlIHNldCB0byAxIHRoZW4gcmV0dXJuIFwiY2xvbmluZ1wiIHRvIHRoZSBESVYgZWxlbWVudFxyXG4gICAgICB7XHJcbiAgICAgICAgY2xhc3NlcyArPSAnIHJlZGlwcy1jbG9uZSc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgXCJyZWRpcHMtY2xvbmVcIiBjbGFzcyB0byBjbGFzcyBhdHRyaWJ1dGVcclxuICAgICAgICBcclxuICAgICAgICBpZiAobGltaXRUeXBlID09PSAyKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZSBESVYgZWxlbWVudCBmb3IgY2xpbWl0MiB0eXBlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZW5hYmxlRHJhZyh0cnVlLCBlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBsaW1pdCArPSB2YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGxpbWl0IHZhbHVlXHJcbiAgICAgIGNsYXNzZXMgPSBjbGFzc2VzLnJlcGxhY2UoL2NsaW1pdFxcZF9cXGQrL2csICdjbGltaXQnICsgbGltaXRUeXBlICsgJ18nICsgbGltaXQpOyAgICAgICAgIC8vIHVwZGF0ZSBjbGltaXQgY2xhc3MgbmFtZSB3aXRoIG5ldyBsaW1pdCB2YWx1ZVxyXG4gICAgICBcclxuICAgICAgaWYgKGxpbWl0IDw9IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlc3QgaWYgbGltaXQgZHJvcHMgdG8gemVyb1xyXG4gICAgICB7XHJcbiAgICAgICAgY2xhc3NlcyA9IGNsYXNzZXMucmVwbGFjZSgncmVkaXBzLWNsb25lJywgJycpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBubyBtb3JlIGNsb25pbmcsIGN1dCBvdXQgXCJyZWRpcHMtY2xvbmVcIiBmcm9tIGNsYXNzIG5hbWVcclxuICAgICAgICBcclxuICAgICAgICBpZiAobGltaXRUeXBlID09PSAyKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGxpbWl0IHR5cGUgaXMgMiB0aGVuIGRpc2FibGUgY2xvbmUgZWxlbWVudCAoaXQgd2lsbCBzdGF5IGluIGNlbGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZW5hYmxlRHJhZyhmYWxzZSwgZWwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZSBzb3VyY2UgRElWIGVsZW1lbnRcclxuICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmNsb25lZEVuZDIoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQuY2xvbmVkRW5kMiBoYW5kbGVyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQuY2xvbmVkRW5kMSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5jbG9uZWRFbmQxIGhhbmRsZXJcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGVsLmNsYXNzTmFtZSA9IG5vcm1hbGl6ZShjbGFzc2VzKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub3JtYWxpemUgc3BhY2VzIGFuZCByZXR1cm4gY2xhc3NlcyB0byB0aGUgY2xvbmUgb2JqZWN0XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIGF0dGFjaGVzIC8gZGV0YWNoZXMgb25tb3VzZWRvd24sIG9udG91Y2hzdGFydCBhbmQgb25kYmxjbGljayBldmVudHMgdG8gRElWIGVsZW1lbnRzIGFuZCBhdHRhY2hlcyBvbnNjcm9sbCBldmVudCB0byB0aGUgc2Nyb2xsIGNvbnRhaW5lcnMgaW4gaW5pdGlhbGl6YXRpb24gcGhhc2UuXHJcbiAgICogSXQgYWxzbyBjYW4gYmUgdXNlZCBmb3IgZWxlbWVudCBpbml0aWFsaXphdGlvbiBhZnRlciBESVYgZWxlbWVudCB3YXMgbWFudWFsbHkgYWRkZWQgdG8gdGhlIHRhYmxlLlxyXG4gICAqIElmIGNsYXNzIGF0dHJpYnV0ZSBvZiBESVYgY29udGFpbmVyIGNvbnRhaW5zIFwicmVkaXBzLW5vYXV0b3Njcm9sbFwiIGNsYXNzIG5hbWUgdGhlbiBhdXRvU2Nyb2xsIG9wdGlvbiB3aWxsIGJlIGRpc2FibGVkLlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbnxTdHJpbmd9IGVuYWJsZV9mbGFnIEVuYWJsZSAvIGRpc2FibGUgZWxlbWVudCAob3IgZWxlbWVudCBzdWJ0cmVlIGxpa2UgdGFibGUsIGRyYWdnaW5nIGNvbnRhaW5lciAuLi4pLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U3RyaW5nfSBbZWxdIEhUTUwgbm9kZSBvciBDU1Mgc2VsZWN0b3IgdG8gZW5hYmxlIC8gZGlzYWJsZS4gUGFyYW1ldGVyIGRlZmluZXMgZWxlbWVudCByZWZlcmVuY2Ugb3IgQ1NTIHNlbGVjdG9yIG9mIERJViBlbGVtZW50cyB0byBlbmFibGUgLyBkaXNhYmxlLlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gZW5hYmxlIGVsZW1lbnQgd2l0aCBpZD1cImlkMTIzXCIgKGVsZW1lbnQgaWQgc2hvdWxkIGJlIGEgc3RyaW5nIGFjY29yZGluZyB0byBET00gZG9jcylcclxuICAgKiByZC5lbmFibGVEcmFnKHRydWUsICcjaWQxMjMnKTtcclxuICAgKlxyXG4gICAqIC8vIG9yIGluaXQgbWFudWFsbHkgYWRkZWQgZWxlbWVudCB3aXRoIGtub3duIGlkXHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZyh0cnVlLCAnI2lkMjM0Jyk7XHJcbiAgICpcclxuICAgKiAvLyBkaXNhYmxlIGFsbCBESVYgZWxlbWVudHMgaW4gZHJhZzEgc3VidHJlZVxyXG4gICAqIHJkLmVuYWJsZURyYWcoZmFsc2UsICcjZHJhZzEgZGl2JylcclxuICAgKlxyXG4gICAqIC8vIGluaXQgRElWIGVsZW1lbnRzIGluIGRyYWdnaW5nIGFyZWEgKGluY2x1ZGluZyBuZXdseSBhZGRlZCBESVYgZWxlbWVudClcclxuICAgKiAvLyBESVYgaW5pdGlhbGl6YXRpb24gd2lsbCB3b3JrIGlmIHRhYmxlIG5vZGUgc3RheXMgaW50YWN0ICh0YWJsZSBpcyBub3QgZ2VuZXJhdGVkIGR5bmFtaWNhbGx5KVxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcoJ2luaXQnKTtcclxuICAgKlxyXG4gICAqIC8vIGluaXQgYWRkZWQgZWxlbWVudCB3aXRoIHJlZmVyZW5jZSBteUVsZW1lbnRcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKHRydWUsIG15RWxlbWVudCk7XHJcbiAgICpcclxuICAgKiAvLyBkaXNhYmxlIGFsbCBESVYgZWxlbWVudHMgd2l0aGluIFREICh0ZCBpcyByZWZlcmVuY2UgdG8gVEQgbm9kZSlcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKGZhbHNlLCB0ZCk7XHJcbiAgICovXHJcbiAgZW5hYmxlRHJhZyA9IGZ1bmN0aW9uIChlbmFibGVfZmxhZywgZWwpIFxyXG4gIHtcclxuICAgIHZhciBkaXYgPSBbXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0aW9uIG9mIGRpdiBlbGVtZW50cyBjb250YWluZWQgaW4gdGFibGVzIG9yIG9uZSBkaXYgZWxlbWVudFxyXG4gICAgXHJcbiAgICBpZiAoZWwgPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29sbGVjdCBESVYgZWxlbWVudHMgaW5zaWRlIGN1cnJlbnQgZHJhZyBhcmVhIChkcmFnIGVsZW1lbnRzIGFuZCBzY3JvbGwgY29udGFpbmVycykgZS5nLiBlbmFibGVEcmFnKHRydWUpXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGRyYWdDb250YWluZXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpO1xyXG4gICAgfSAgICBcclxuICAgIGVsc2UgaWYgKHR5cGVvZihlbCkgPT09ICdzdHJpbmcnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcImVsXCIgaXMgc3RyaW5nIChDU1Mgc2VsZWN0b3IpIC0gaXQgY2FuIGNvbGxlY3Qgb25lIERJViBlbGVtZW50IChsaWtlIFwiI2QxMlwiKSBvciBtYW55IERJViBlbGVtZW50cyAobGlrZSBcIiNkcmFnMSBkaXZcIilcclxuICAgIHtcclxuICAgICAgZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2YoZWwpID09PSAnb2JqZWN0JyAmJiAoZWwubm9kZU5hbWUgIT09ICdESVYnIHx8IGVsLmNsYXNzTmFtZS5pbmRleE9mKCdyZWRpcHMtZHJhZycpID09PSAtMSkpICAgICAgLy8gXCJlbFwiIGlzIG5vZGUgcmVmZXJlbmNlIHRvIGVsZW1lbnQgdGhhdCBpcyBub3QgRElWIGNsYXNzPVwicmVkaXBzLWRyYWdcIlxyXG4gICAge1xyXG4gICAgICBkaXYgPSBlbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2Jyk7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9uZSBvZiBhYm92ZSwgZWwgaXMgRElWIGNsYXNzPVwicmVkaXBzLWRyYWdcIiwgc28gcHJlcGFyZSBhcnJheSB3aXRoIG9uZSBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBkaXZbMF0gPSBlbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZW5hYmxlRGl2cyhlbmFibGVfZmxhZywgZGl2KTtcclxuICB9O1xyXG4gIFxyXG4gIFxyXG4gIGVuYWJsZURpdnMgPSBmdW5jdGlvbihlbmFibGVfZmxhZywgZGl2KVxyXG4gIHtcclxuICAgICB2YXIgaSwgaiwgaywgICAgLy8gbG9jYWwgdmFyaWFibGVzIHVzZWQgaW4gbG9vcFxyXG4gICAgICB0YmxzID0gW10sICAgIC8vIGNvbGxlY3Rpb24gb2YgdGFibGVzIGluc2lkZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICBib3JkZXJTdHlsZSwgIC8vIGJvcmRlciBzdHlsZSAoc29saWQgb3IgZG90dGVkKVxyXG4gICAgICBvcGFjaXR5LCAgICAvLyAoaW50ZWdlcikgc2V0IG9wYWNpdHkgZm9yIGVuYWJsZWQgLyBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICBjdXJzb3IsICAgICAvLyBjdXJzb3Igc3R5bGUgKG1vdmUgb3IgYXV0bylcclxuICAgICAgb3ZlcmZsb3csICAgLy8gY3NzIHZhbHVlIG9mIG92ZXJmbG93IHByb3BlcnR5XHJcbiAgICAgIGF1dG9zY3JvbGwsICAgLy8gYm9vbGVhbiAtIGlmIHNjcm9sbGFibGUgY29udGFpbmVyIHdpbGwgaGF2ZSBhdXRvc2Nyb2xsIG9wdGlvbiAoZGVmYXVsdCBpcyB0cnVlKVxyXG4gICAgICBlbmFibGVkLCAgICAvLyBlbmFibGVkIHByb3BlcnR5ICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICBjYiwgICAgICAgLy8gYm94IG9mZnNldCBmb3IgY29udGFpbmVyIGJveCAoY2IpXHJcbiAgICAgIHBvc2l0aW9uLCAgIC8vIGlmIHRhYmxlIGNvbnRhaW5lciBoYXMgcG9zaXRpb246Zml4ZWQgdGhlbiBcInBhZ2Ugc2Nyb2xsXCIgb2Zmc2V0IHNob3VsZCBub3QgYmUgYWRkZWRcclxuICAgICAgcmVnZXhEcmFnID0gL1xcYnJlZGlwcy1kcmFnXFxiL2ksIC8vIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggXCJyZWRpcHMtZHJhZ1wiIGNsYXNzIG5hbWVcclxuICAgICAgcmVnZXhOb0F1dG9zY3JvbGwgPSAvXFxicmVkaXBzLW5vYXV0b3Njcm9sbFxcYi9pOyAvLyByZWd1bGFyIGV4cHJlc3Npb24gdG8gc2VhcmNoIFwicmVkaXBzLW5vYXV0b3Njcm9sbFwiIGNsYXNzIG5hbWUgICBcclxuXHJcbiAgICBvcGFjaXR5ID0gUkVESVBTLmRyYWcuc3R5bGUub3BhY2l0eURpc2FibGVkOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIGRpc2FibGVkIGVsZW1lbnRzIGZyb20gcHVibGljIHByb3BlcnR5IFwib3BhY2l0eURpc2FibGVkXCJcclxuICAgIFxyXG4gICAgaWYgKGVuYWJsZV9mbGFnID09PSB0cnVlIHx8IGVuYWJsZV9mbGFnID09PSAnaW5pdCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBzdHlsZXMgZm9yIGVuYWJsZWQgRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgYm9yZGVyU3R5bGUgPSBSRURJUFMuZHJhZy5zdHlsZS5ib3JkZXJFbmFibGVkO1xyXG4gICAgICBjdXJzb3IgPSAnbW92ZSc7XHJcbiAgICAgIGVuYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2Ugc2V0IHN0eWxlcyBmb3IgZGlzYWJsZWQgRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgYm9yZGVyU3R5bGUgPSBSRURJUFMuZHJhZy5zdHlsZS5ib3JkZXJEaXNhYmxlZDtcclxuICAgICAgY3Vyc29yID0gJ2F1dG8nO1xyXG4gICAgICBlbmFibGVkID0gZmFsc2U7XHJcbiAgICB9ICAgIFxyXG4gICAgXHJcbiAgICBmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGRpdi5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFpbiBsb29wIHRoYXQgZ29lcyB0aHJvdWdoIGFsbCBESVYgZWxlbWVudHNcclxuICAgIHsgICAgXHJcbiAgICAgIGlmIChyZWdleERyYWcudGVzdChkaXZbaV0uY2xhc3NOYW1lKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGVsZW1lbnQgY29udGFpbnMgXCJyZWRpcHMtZHJhZ1wiIGNsYXNzIG5hbWVcclxuICAgICAge1xyXG4gICAgICAgIGlmIChlbmFibGVfZmxhZyA9PT0gJ2luaXQnIHx8IGRpdltpXS5yZWRpcHMgPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgIC8vIGFkZCByZWZlcmVuY2UgdG8gdGhlIERJViBjb250YWluZXIgKGluaXRpYWxpemF0aW9uIG9yIG5ld2x5IGFkZGVkIGVsZW1lbnQgdG8gdGhlIHRhYmxlKSB0aGlzIHByb3BlcnR5IHNob3VsZCBub3QgYmUgY2hhbmdlZCBpbiBsYXRlciBlbGVtZW50IGVuYWJsZS9kaXNhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGl2W2ldLnJlZGlwcyA9IHt9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIFwicHJvcGVydHkgb2JqZWN0XCIgaW4gd2hpY2ggYWxsIGN1c3RvbSBwcm9wZXJ0aWVzIHdpbGwgYmUgc2F2ZWRcclxuICAgICAgICAgIGRpdltpXS5yZWRpcHMuY29udGFpbmVyID0gZHJhZ0NvbnRhaW5lcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZW5hYmxlX2ZsYWcgPT09IHRydWUgJiYgdHlwZW9mKG9wYWNpdHkpID09PSAnbnVtYmVyJykgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG9wYWNpdHkgbWFza1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRpdltpXS5zdHlsZS5vcGFjaXR5ID0gJyc7XHJcbiAgICAgICAgICBkaXZbaV0uc3R5bGUuZmlsdGVyID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVuYWJsZV9mbGFnID09PSBmYWxzZSAmJiB0eXBlb2Yob3BhY2l0eSkgPT09ICdudW1iZXInKSAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRpdltpXS5zdHlsZS5vcGFjaXR5ID0gb3BhY2l0eSAvIDEwMDtcclxuICAgICAgICAgIGRpdltpXS5zdHlsZS5maWx0ZXIgPSAnYWxwaGEob3BhY2l0eT0nICsgb3BhY2l0eSArICcpJztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmVnaXN0ZXJFdmVudHMoZGl2W2ldLCBlbmFibGVkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXIgZm9yIERJViBlbGVtZW50XHJcbiAgICAgICAgXHJcbiAgICAgICAgZGl2W2ldLnN0eWxlLmJvcmRlclN0eWxlID0gYm9yZGVyU3R5bGU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHN0eWxlcyBmb3IgRElWIGVsZW1lbnRcclxuICAgICAgICBkaXZbaV0uc3R5bGUuY3Vyc29yID0gY3Vyc29yO1xyXG4gICAgICAgIGRpdltpXS5yZWRpcHMuZW5hYmxlZCA9IGVuYWJsZWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBlbmFibGVkIHByb3BlcnR5IHRvIHRoZSBESVYgZWxlbWVudCAodHJ1ZSBvciBmYWxzZSlcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChlbmFibGVfZmxhZyA9PT0gJ2luaXQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF0dGFjaCBvbnNjcm9sbCBldmVudCB0byB0aGUgRElWIGVsZW1lbnQgaW4gaW5pdCBwaGFzZSBvbmx5IGlmIERJViBlbGVtZW50IGhhcyBvdmVyZmxvdyBvdGhlciB0aGFuIGRlZmF1bHQgdmFsdWUgJ3Zpc2libGUnIGFuZCB0aGF0IG1lYW5zIHNjcm9sbGFibGUgRElWIGNvbnRhaW5lclxyXG4gICAgICB7XHJcbiAgICAgICAgb3ZlcmZsb3cgPSBnZXRTdHlsZShkaXZbaV0sICdvdmVyZmxvdycpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNrIGZvciBvdmVyZmxvdyBzdHlsZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChvdmVyZmxvdyAhPT0gJ3Zpc2libGUnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIERJViBpcyBzY3JvbGxhYmxlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgUkVESVBTLmV2ZW50LmFkZChkaXZbaV0sICdzY3JvbGwnLCBjYWxjdWxhdGVDZWxscyk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvbnNjcm9sbCBldmVudCBoYW5kbGVyIGZvciBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgcG9zaXRpb24gPSBnZXRTdHlsZShkaXZbaV0sICdwb3NpdGlvbicpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjb250YWluZXIgYm94IHN0eWxlIHBvc2l0aW9uICh0byBleGNsdWRlIHBhZ2Ugc2Nyb2xsIG9mZnNldCBmcm9tIGNhbGN1bGF0aW9uIGlmIG5lZWRlZClcclxuICAgICAgICAgIGNiID0gYm94T2Zmc2V0KGRpdltpXSwgcG9zaXRpb24sIGZhbHNlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBnZXQgRElWIGNvbnRhaW5lciBvZmZzZXQgd2l0aCBvciB3aXRob3V0IFwicGFnZSBzY3JvbGxcIiBhbmQgZXhjbHVkZWQgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBjb250ZW50XHJcbiAgICAgICAgICBhdXRvc2Nyb2xsID0gIXJlZ2V4Tm9BdXRvc2Nyb2xsLnRlc3QoZGl2W2ldLmNsYXNzTmFtZSk7ICAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGZvciByZWRpcHMtbm9hdXRvc2Nyb2xsIG9wdGlvblxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltqXSA9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhc1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkaXYgOiBkaXZbaV0sICAgICAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgIG9mZnNldCA6IGNiLCAgICAgICAgICAgICAgICAgIC8vIGJveCBvZmZzZXQgb2YgdGhlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICAgIG1pZHN0WCA6IChjYlsxXSArIGNiWzNdKSAvIDIsIC8vIG1pZGRsZSBYXHJcbiAgICAgICAgICAgIG1pZHN0WSA6IChjYlswXSArIGNiWzJdKSAvIDIsIC8vIG1pZGRsZSBZXHJcbiAgICAgICAgICAgIGF1dG9zY3JvbGwgOiBhdXRvc2Nyb2xsICAgICAgIC8vIGF1dG9zY3JvbGwgZW5hYmxlZCBvciBkaXNhYmxlZCAodHJ1ZSBvciBmYWxzZSlcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHRibHMgPSBkaXZbaV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RhYmxlJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggZm9yIHRhYmxlcyBpbnNpZGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgZm9yIChrID0gMDsgayA8IHRibHMubGVuZ3RoOyBrKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgZ29lcyB0aHJvdWdoIGZvdW5kIHRhYmxlcyBpbnNpZGUgc2Nyb2xsYWJsZSBhcmVhXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHRibHNba10uc2NhID0gc2Nyb2xsRGF0YS5jb250YWluZXJbal07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGEgcmVmZXJlbmNlIHRvIHRoZSBjb3JyZXNwb25kaW5nIHNjcm9sbGFibGUgYXJlYVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBqKys7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW5jcmVhc2Ugc2Nyb2xsYWJsZSBjb250YWluZXIgY291bnRlclxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSAgIFxyXG4gIH07XHJcblxyXG4gIC8vTWV0aG9kIHJldHVybnMgc3R5bGUgdmFsdWUgZm9yIHJlcXVlc3RlZCBIVE1MIGVsZW1lbnQgYW5kIHN0eWxlIG5hbWUuXHJcbiAgZ2V0U3R5bGUgPSBmdW5jdGlvbiAoZWwsIHN0eWxlX25hbWUpIFxyXG4gIHtcclxuICAgIGlmIChlbCAmJiBlbC5jdXJyZW50U3R5bGUpIFxyXG4gICAge1xyXG4gICAgICByZXR1cm4gZWwuY3VycmVudFN0eWxlW3N0eWxlX25hbWVdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZWwgJiYgd2luZG93LmdldENvbXB1dGVkU3R5bGUpIFxyXG4gICAge1xyXG4gICAgICByZXR1cm4gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbCwgbnVsbClbc3R5bGVfbmFtZV07XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gZmluZCB0aGUgZmlyc3QgcGFyZW50IGVsZW1lbnQgb2YgZWwgd2l0aCB0aGUgdGFnIG5hbWUgdGFnX25hbWUgXHJcbiAgZmluZFBhcmVudCA9IGZ1bmN0aW9uICh0YWdfbmFtZSwgZWwpIFxyXG4gIHtcclxuICAgIGVsID0gZWwucGFyZW50Tm9kZTsgICAgICAgICAgICAgICAgIC8vIHNldCBcImVsXCIgdG8gdGhlIG5leHQgbm9kZSAodG8gcHJldmVudCBmaW5kaW5nIG5vZGUgaXRzZWxmKVxyXG4gICAgXHJcbiAgICB3aGlsZSAoZWwpICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydCBsb29wXHJcbiAgICB7XHJcbiAgICAgIGlmIChlbC5ub2RlTmFtZSA9PT0gdGFnX25hbWUpICAgICAvLyBub2RlIGlzIGZvdW5kXHJcbiAgICAgIHtcclxuICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vZGUgaXMgZm91bmQgYW5kIGxvb3AgY2FuIGJlIGVuZGVkXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGVsID0gZWwucGFyZW50Tm9kZTsgICAgICAgICAgICAgICAvLyBtb3ZlIG9uIHRvIHRoZSBwYXJlbnQgbm9kZVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gZWw7XHJcbiAgfTtcclxuXHJcbiAgLy9GdW5jdGlvbiByZXR1cm5zIGEgc3RyaW5nIGluIHdoaWNoIGFsbCBvZiB0aGUgcHJlY2VkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZSBzcGFjZSBoYXMgYmVlbiByZW1vdmVkLCBhbmQgaW4gd2hpY2ggYWxsIGludGVybmFsIHNlcXVlbmNlcyBvZiB3aGl0ZSBpcyByZXBsYWNlZCB3aXRoIG9uZSB3aGl0ZSBzcGFjZS5cclxuICBub3JtYWxpemUgPSBmdW5jdGlvbiAoc3RyKSBcclxuICB7XHJcbiAgICBpZiAoc3RyICE9PSB1bmRlZmluZWQpIFxyXG4gICAge1xyXG4gICAgICBzdHIgPSBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpLnJlcGxhY2UoL1xcc3syLH0vZywgJyAnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHN0cjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIG5vcm1hbGl6ZWQgc3RyaW5nICh3aXRob3V0IHByZWNlZGluZyBhbmQgdHJhaWxpbmcgc3BhY2VzKVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBzZXRzIG9wYWNpdHkgdG8gdGFibGUgcm93IG9yIGRlbGV0ZXMgcm93IGNvbnRlbnQuXHJcbiAgICogSW5wdXQgcGFyYW1ldGVyIFwiZWxcIiBpcyByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIHJvdyBvciByZWZlcmVuY2UgdG8gdGhlIGNsb25lZCBtaW5pIHRhYmxlICh3aGVuIHJvdyBpcyBtb3ZlZCkuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxTdHJpbmd9IGVsIElkIG9mIHJvdyBoYW5kbGVyIChkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCIpIG9yIHJlZmVyZW5jZSB0byBlbGVtZW50IChzb3VyY2Ugcm93IG9yIG1pbmkgdGFibGUpLlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcnxTdHJpbmd9IG9wYWNpdHkgT3BhY2l0eSBsZXZlbCAoZnJvbSAwIHRvIDEwMCkgb3IgXCJlbXB0eVwiICh0aGVuIGNvbnRlbnQgb2YgdGFibGUgY2VsbHMgaW4gcm93IHdpbGwgYmUgZGVsZXRlZCAtIGluIHRoYXQgY2FzZSBmaXJzdCBwYXJhbWV0ZXIgc2hvdWxkIGJlIFRSKS5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2NvbG9yXSBCYWNrZ3JvdW5kIGNvbG9yLlxyXG4gICAqIEBleGFtcGxlXHJcbiAgICogLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgUkVESVBTLmRyYWcgbGlicmFyeVxyXG4gICAqIHJkID0gUkVESVBTLmRyYWc7XHJcbiAgICpcclxuICAgKiAvLyBtYWtlIHJvdyBzZW1pLXRyYW5zcGFyZW50XHJcbiAgICogcmQucm93T3BhY2l0eShyb3dPYmosIDUwKTtcclxuICAgKlxyXG4gICAqIC8vIHNldCByb3cgYXMgZW1wdHkgYW5kIHdoaXRlIChjb250ZW50IGluIHRhYmxlIGNlbGxzIHdpbGwgYmUgZGVsZXRlZClcclxuICAgKiByZC5yb3dPcGFjaXR5KHJvd09iaiwgJ2VtcHR5JywgJ1doaXRlJyk7XHJcbiAgICovXHJcbiAgcm93T3BhY2l0eSA9IGZ1bmN0aW9uIChlbCwgb3BhY2l0eSwgY29sb3IpIFxyXG4gIHtcclxuICAgIHZhciB0ZE5vZGVMaXN0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFibGUgY2VsbHNcclxuICAgIHZhciBpLCBqOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCB2YXJpYWJsZXNcclxuICAgIFxyXG4gICAgaWYgKHR5cGVvZihlbCkgPT09ICdzdHJpbmcnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBpbnB1dCBwYXJhbWV0ZXIgaXMgc3RyaW5nICh0aGlzIHNob3VsZCBiZSBlbGVtZW50IGlkKSwgdGhlbiBzZXQgZWxlbWVudCByZWZlcmVuY2VcclxuICAgIHtcclxuICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCk7XHJcbiAgICAgIGVsID0gZmluZFBhcmVudCgnVEFCTEUnLCBlbCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsIGNvdWxkIGJlIHJlZmVyZW5jZSBvZiB0aGUgRElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiIChyb3cgaGFuZGxlcilcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGVsLm5vZGVOYW1lID09PSAnVFInKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbCBpcyBUUiwgdGhlbiBzZXQgYmFja2dyb3VuZCBjb2xvciB0byBlYWNoIGNlbGwgKGlmIG5lZWRlZCkgYW5kIGFwcGx5IG9wYWNpdHlcclxuICAgIHtcclxuICAgICAgdGROb2RlTGlzdCA9IGVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0ZCcpOyAgICAgICAgICAgICAgICAgLy8gY29sbGVjdCB0YWJsZSBjZWxsIGZyb20gdGhlIHJvd1xyXG4gICAgICBcclxuICAgICAgZm9yIChpID0gMDsgaSA8IHRkTm9kZUxpc3QubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIERJViBlbGVtZW50XHJcbiAgICAgIHtcclxuICAgICAgICB0ZE5vZGVMaXN0W2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yID8gY29sb3IgOiAnJzsgLy8gc2V0IGJhY2tncm91bmQgY29sb3IgdG8gdGFibGUgY2VsbCBpZiBuZWVkZWRcclxuICAgICAgICBcclxuICAgICAgICBpZiAob3BhY2l0eSA9PT0gJ2VtcHR5JykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgb3BhY2l0eSBpcyBzZXQgdG8gXCJlbXB0eVwiIHRoZW4gZGVsZXRlIGNlbGwgY29udGVudFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHRkTm9kZUxpc3RbaV0uaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2Ugc2V0IG9wYWNpdHkgdG8gZXZlcnkgY2hpbGQgbm9kZSBpbiB0YWJsZSBjZWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlcy5sZW5ndGg7IGorKykgICAvLyBsb29wIHRocm91Z2ggY2hpbGQgbm9kZXMgb2YgZXZlcnkgdGFibGUgY2VsbFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBhcHBseSBzdHlsZXMgb25seSB0byBFbGVtZW50IG5vZGVzIChub3QgdGV4dCBub2RlcywgYXR0cmlidXRlcyAuLi4pLCBodHRwOi8vY29kZS5zdGVwaGVubW9ybGV5Lm9yZy9qYXZhc2NyaXB0L2RvbS1ub2RldHlwZS1jb25zdGFudHMvXHJcbiAgICAgICAgICAgIGlmICh0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXNbal0ubm9kZVR5cGUgPT09IDEpIFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgdGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzW2pdLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5IC8gMTAwO1xyXG4gICAgICAgICAgICAgIHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlc1tqXS5zdHlsZS5maWx0ZXIgPSAnYWxwaGEob3BhY2l0eT0nICsgb3BhY2l0eSArICcpJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHJvdyBpcyBtb3ZlZCB0aGVuIFJFRElQUy5kcmFnIHdpbGwgY3JlYXRlIG1pbmkgdGFibGUgd2l0aCBvbmUgcm93LCBhbGwgYnJvd3NlcnMgKElFOCwgT3BlcmExMSwgRkYzLjYsIENocm9tZTEwKSBjYW4gc2V0IG9wYWNpdHkgdG8gdGhlIHRhYmxlXHJcbiAgICB7XHJcbiAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5IC8gMTAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBGRiwgQ2hyb21lLCBPcGVyYVxyXG4gICAgICBlbC5zdHlsZS5maWx0ZXIgPSAnYWxwaGEob3BhY2l0eT0nICsgb3BhY2l0eSArICcpJzsgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgSUVcclxuICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3IgPyBjb2xvciA6ICcnOyAgICAgICAgICAgICAgLy8gc2V0IGJhY2tncm91bmQgY29sb3JcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgLyogcHVibGljIHByb3BlcnRpZXMgKi9cclxuICAgIG9iaiA6IG9iaiwgICAgICAgICAgICAgICAgICAvL1R5cGU6IEhUTUxFbGVtZW50IC0gQ3VycmVudGx5IG1vdmVkIERJViBlbGVtZW50LiBSZWZlcmVuY2UgdG8gdGhlIFJFRElQUy5kcmFnLm9iaiAoZHJhZ2dlZCBESVYgZWxlbWVudCkgaXMgdmlzaWJsZSBhbmQgY2FuIGJlIHVzZWQgaW4gYXBwcm9wcmlhdGUgZXZlbnQgaGFuZGxlcnMuXHJcbiAgICBvYmpPbGQgIDogb2JqT2xkLCAgICAgICAgICAgLy9UeXBlOiBIVE1MRWxlbWVudCAtIFByZXZpb3VzbHkgbW92ZWQgRElWIGVsZW1lbnQgKGJlZm9yZSBjbGlja2VkIG9yIGNsb25lZCkuIEluIGNhc2Ugd2hlbiBESVYgZWxlbWVudCBpcyBjbG9uZWQsIG9iaiBpcyByZWZlcmVuY2Ugb2YgY3VycmVudCAoY2xvbmVkKSBESVYgZWxlbWVudCB3aGlsZSBvYmpPbGQgaXMgcmVmZXJlbmNlIG9mIGJvdHRvbSAob3JpZ2luKSBESVYgZWxlbWVudC5cclxuICAgIC8qKlxyXG4gICAgICogT2JqZWN0IGNvbnRhaW5zIHJlZmVyZW5jZSB0byBwcmV2aW91cywgc291cmNlLCBjdXJyZW50IGFuZCB0YXJnZXQgdGFibGUgY2VsbC4gVGQgcmVmZXJlbmNlcyBjYW4gYmUgdXNlZCBpbiBldmVudCBoYW5kbGVycy5cclxuICAgICAqIDx1bD5cclxuICAgICAqIDxsaT57SFRNTEVsZW1lbnR9IHRkLnNvdXJjZSAtIHJlZmVyZW5jZSB0byBzb3VyY2UgdGFibGUgY2VsbCAoc2V0IGluIG9ubW91c2Vkb3duKTwvbGk+XHJcbiAgICAgKiA8bGk+e0hUTUxFbGVtZW50fSB0ZC5wcmV2aW91cyAtIHJlZmVyZW5jZSB0byBwcmV2aW91cyB0YWJsZSBjZWxsIChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpPC9saT5cclxuICAgICAqIDxsaT57SFRNTEVsZW1lbnR9IHRkLmN1cnJlbnQgLSByZWZlcmVuY2UgdG8gY3VycmVudCB0YWJsZSBjZWxsIChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpPC9saT5cclxuICAgICAqIDxsaT57SFRNTEVsZW1lbnR9IHRkLnRhcmdldCAtIHJlZmVyZW5jZSB0byB0YXJnZXQgdGFibGUgY2VsbCAodGFyZ2V0IHRhYmxlIGNlbGwgaXMgc2V0IGluIGEgbW9tZW50IG9mIGRyb3BwaW5nIGVsZW1lbnQgdG8gdGhlIHRhYmxlIGNlbGwpPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgdGQgOiB0ZCxcclxuICAgIC8qKlxyXG4gICAgICogSG92ZXIgb2JqZWN0IGNvbnRhaW5zIDQgcHJvcGVydGllczogY29sb3JUZCwgY29sb3JUciwgYm9yZGVyVGQgYW5kIGJvcmRlclRyLiBjb2xvclRkIGFuZCBjb2xvclRyIGRlZmluZSBob3ZlciBjb2xvciBmb3IgRElWIGVsZW1lbnQgYW5kIHRhYmxlIHJvdy5cclxuICAgICAqIElmIGJvcmRlclRkIGlzIGRlZmluZWQsIHRoZW4gaGlnaGxpZ2h0ZWQgY2VsbCB3aWxsIGhhdmUgYm9yZGVyLiBJZiBib3JkZXJUciBpcyBkZWZpbmVkIHRoZW4gaGlnaGxpZ2h0ZWQgcm93IHdpbGwgaGF2ZSBvbmx5IHRvcCBvciBib3R0b20gYm9yZGVyLlxyXG4gICAgICogVG9wIGJvcmRlciBzaG93cyB0aGF0IHJvdyB3aWxsIGJlIHBsYWNlZCBhYm92ZSBjdXJyZW50IHJvdywgd2hpbGUgYm90dG9tIGJvcmRlciBzaG93cyB0aGF0IGN1cnJlbnQgcm93IHdpbGwgYmUgcGxhY2VkIGJlbG93IGN1cnJlbnQgcm93LlxyXG4gICAgICogU29tZSBicm93c2VycyBtYXkgaGF2ZSBwcm9ibGVtIHdpdGggXCJib3JkZXItY29sbGFwc2U6Y29sbGFwc2VcIiB0YWJsZSBzdHlsZSBhbmQgYm9yZGVyIGhpZ2hsaWdodGluZy5cclxuICAgICAqIEluIHRoYXQgY2FzZSB0cnkgd2l0aG91dCBjb2xsYXBzaW5nIFREIGJvcmRlcnMgKGUuZyBzZXQgXCJib3JkZXItc3BhY2luZzowXCIgYW5kIHNtYWxsZXIgXCJ0ZC5ib3JkZXItd2lkdGhcIikuXHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqIEBuYW1lIFJFRElQUy5kcmFnI2hvdmVyXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogLy8gc2V0IFwiIzlCQjNEQVwiIGFzIGhvdmVyIGNvbG9yIGZvciBURFxyXG4gICAgICogUkVESVBTLmRyYWcuaG92ZXIuY29sb3JUZCA9ICcjOUJCM0RBJztcclxuICAgICAqXHJcbiAgICAgKiAvLyBvciBzZXQgXCJMaW1lXCIgYXMgaG92ZXIgY29sb3IgZm9yIFRSXHJcbiAgICAgKiBSRURJUFMuZHJhZy5ob3Zlci5jb2xvclRyID0gJ0xpbWUnO1xyXG4gICAgICpcclxuICAgICAqIC8vIHNldCByZWQgYm9yZGVyIGZvciBoaWdobGlnaHRlZCBURFxyXG4gICAgICogUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVGQgPSAnMnB4IHNvbGlkIHJlZCc7XHJcbiAgICAgKi9cclxuICAgIGhvdmVyIDogaG92ZXIsXHJcbiAgICAvKipcclxuICAgICAqIFNjcm9sbCBvYmplY3QgY29udGFpbnMgcHJvcGVydGllcyBuZWVkZWQgZm9yIGF1dG9zY3JvbGwgb3B0aW9uLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntCb29sZWFufSBzY3JvbGwuZW5hYmxlIC0gRW5hYmxlIC8gZGlzYWJsZSBhdXRvc2Nyb2xsIG9wdGlvbi4gQnkgZGVmYXVsdCBhdXRvc2Nyb2xsIGlzIGVuYWJsZWQgYnV0IGl0IGNhbiBiZSB1c2VmdWxsIGluIHNvbWUgY2FzZXMgdG8gY29tcGxldGVseSB0dXJuIG9mZiBhdXRvc2Nyb2xsIChpZiBhcHBsaWNhdGlvbiBkb2Vzbid0IG5lZWQgYXV0b3Njcm9sbGluZyBwYWdlIG5vciBhdXRvc2Nyb2xsaW5nIERJViBjb250YWluZXIpLiBUdXJuaW5nIG9mZiBhdXRvc2Nyb2xsIHdpbGwgc3BlZWQgdXAgYXBwbGljYXRpb24gYmVjYXVzZSBleHRyYSBjYWxjdWxhdGlvbnMgd2lsbCBiZSBza2lwcGVkLiBEZWZhdWx0IGlzIHRydWU8L2xpPlxyXG4gICAgICogPGxpPntJbnRlZ2VyfSBzY3JvbGwuYm91bmQgLSBCb3VuZCBzaXplIGZvciB0cmlnZ2VyaW5nIHBhZ2UgYXV0b1Njcm9sbCBvciBhdXRvU2Nyb2xsIG9mIHNjcm9sbGFibGUgRElWIGNvbnRhaW5lci4gRGVmYXVsdCB2YWx1ZSBpcyAyNSAocHgpLjwvbGk+XHJcbiAgICAgKiA8bGk+e0ludGVnZXJ9IHNjcm9sbC5zcGVlZCAtIEF1dG9zY3JvbGwgcGF1c2UgaW4gbWlsbGlzZWNvbmRzLiBEZWZhdWx0IHZhbHVlIGlzIDIwIChtaWxsaXNlY29uZHMpLjwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHNjcm9sbCA6IHNjcm9sbCxcclxuICAgIC8qKlxyXG4gICAgICogT2JqZWN0IGNvbnRhaW5zIHN0eWxlcyAoY29sb3JzLCBvcGFjaXR5IGxldmVscykgZm9yIERJViBlbGVtZW50cyBhbmQgdGFibGUgcm93cy5cclxuICAgICAqIDx1bD5cclxuICAgICAqIDxsaT57U3RyaW5nfSBzdHlsZS5ib3JkZXJFbmFibGVkIC0gQm9yZGVyIHN0eWxlIGZvciBlbmFibGVkIERJViBlbGVtZW50cy4gRGVmYXVsdCBpcyBcInNvbGlkXCIuPC9saT5cclxuICAgICAqIDxsaT57U3RyaW5nfSBzdHlsZS5ib3JkZXJEaXNhYmxlZCAtIEJvcmRlciBzdHlsZSBmb3IgZGlzYWJsZWQgRElWIGVsZW1lbnRzLiBEZWZhdWx0IGlzIFwiZG90dGVkXCIuPC9saT5cclxuICAgICAqIDxsaT57SW50ZWdlcn0gc3R5bGUub3BhY2l0eURpc2FibGVkIC0gT3BhY2l0eSBsZXZlbCBmb3IgZGlzYWJsZWQgZWxlbWVudHMuIERlZmF1bHQgaXMgZW1wdHkgc3RyaW5nLjwvbGk+XHJcbiAgICAgKiA8bGk+e1N0cmluZ30gc3R5bGUucm93RW1wdHlDb2xvciAtIFwiRW1wdHkgcm93XCIgY29sb3IuIFdoZW4gbGFzdCByb3cgZnJvbSB0YWJsZSBpcyBtb3ZlZCB0aGVuIHRoaXMgY29sb3Igd2lsbCBiZSBzZXQgdG8gXCJlbXB0eSByb3dcIi4gRGVmYXVsdCBpcyBcIndoaXRlXCIuPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogLy8gZGVmaW5lIGJvcmRlciBzdHlsZSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAqIFJFRElQUy5kcmFnLnN0eWxlLmJvcmRlckRpc2FibGVkID0gJ2Rhc2hlZCc7XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgc3R5bGUgOiBzdHlsZSxcclxuICAgIC8qKlxyXG4gICAgICogT2JqZWN0IGRlZmluZXMgc2V2ZXJhbCBydWxlcyByZWxhdGVkIHRvIGNsb25pbmcgRElWIGVsZW1lbnRzIGxpa2UgZW5hYmxlIGNsb25pbmcgd2l0aCBzaGlmdCBrZXksIGVuYWJsZSByZXR1cm5pbmcgY2xvbmVkIERJViBlbGVtZW50IHRvIGl0cyBzb3VyY2UgYW5kIHNvIG9uLlxyXG4gICAgICogSW5zdGVhZCBvZiBtb3ZpbmcsIERJViBlbGVtZW50IC8gcm93IHdpbGwgYmUgY2xvbmVkIGFuZCByZWFkeSBmb3IgZHJhZ2dpbmcuXHJcbiAgICAgKiBKdXN0IHByZXNzIFNISUZUIGtleSBhbmQgdHJ5IHRvIGRyYWcgRElWIGVsZW1lbnQgLyByb3cuXHJcbiAgICAgKiBpZiBjbG9uZS5zZW5kQmFjayBwcm9wZXJ0eSBzZXQgdG8gdHJ1ZSwgY2xvbmVkIERJViBlbGVtZW50IHdpbGwgYmUgZGVsZXRlZCB3aGVuIGRyb3BwZWQgdG8gdGhlIGNlbGwgY29udGFpbmluZyBpdHMgc291cmNlIGNsb25lIGVsZW1lbnQuXHJcbiAgICAgKiBJZiBleGlzdHMsIFwiY2xpbWl0XCIgY2xhc3Mgd2lsbCBiZSB1cGRhdGVkIChpbmNyZWFzZWQgYnkgMSkuXHJcbiAgICAgKiBjbG9uZS5kcm9wIHByb3BlcnR5IGRlZmluZXMgcGxhY2luZyBjbG9uZWQgRElWIGVsZW1lbnQgKGRyb3BwZWQgb3V0c2lkZSBhbnkgdGFibGUpIHRvIHRoZSBsYXN0IG1hcmtlZCBwb3NpdGlvbi5cclxuICAgICAqIElmIHRoaXMgcHJvcGVydHkgaXMgc2V0IHRvIHRydWUsIHRoZSBjbG9uZWQgRElWIGVsZW1lbnQgd2lsbCBiZSBhbHdheXMgcGxhY2VkIHRvIHRoZSB0YWJsZSBjZWxsLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5rZXlEaXYgLSBJZiBzZXQgdG8gdHJ1ZSwgYWxsIERJViBlbGVtZW50cyBvbiB0YWJsZXMgY291bGQgYmUgY2xvbmVkIHdpdGggcHJlc3NlZCBTSElGVCBrZXkuIERlZmF1bHQgaXMgZmFsc2UuPC9saT5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gY2xvbmUua2V5Um93IC0gSWYgc2V0IHRvIHRydWUsIHRhYmxlIHJvd3MgY291bGQgYmUgY2xvbmVkIHdpdGggcHJlc3NlZCBTSElGVCBrZXkuIERlZmF1bHQgaXMgZmFsc2UuPC9saT5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gY2xvbmUuc2VuZEJhY2sgLSBJZiBzZXQgdG8gdHJ1ZSwgY2xvbmVkIGVsZW1lbnQgY2FuIGJlIHJldHVybmVkIHRvIGl0cyBzb3VyY2UuIERlZmF1bHQgaXMgZmFsc2UuPC9saT5cclxuICAgICAqIDxsaT57Qm9vbGVhbn0gY2xvbmUuZHJvcCAtIElmIHNldCB0byB0cnVlLCBjbG9uZWQgZWxlbWVudCB3aWxsIGJlIGFsd2F5cyBwbGFjZWQgdG8gdGhlIHRhYmxlICh0byB0aGUgbGFzdCBwb3NzaWJsZSBjZWxsKSBubyBtYXR0ZXIgaWYgaXMgZHJvcHBlZCBvdXRzaWRlIHRoZSB0YWJsZS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBjbG9uZSA6IGNsb25lLFxyXG4gICAgLyogcHVibGljIG1ldGhvZHMgKGRvY3VtZW50ZWQgaW4gbWFpbiBjb2RlKSAqL1xyXG4gICAgaW5pdCA6IGluaXQsXHJcbiAgICBlbmFibGVEcmFnIDogZW5hYmxlRHJhZyxcclxuICAgIGVuYWJsZURpdnMgOiBlbmFibGVEaXZzLFxyXG4gICAgcm93T3BhY2l0eSA6IHJvd09wYWNpdHksXHJcbiAgICBnZXRTY3JvbGxQb3NpdGlvbiA6IGdldFNjcm9sbFBvc2l0aW9uLFxyXG4gICAgZ2V0U3R5bGUgOiBnZXRTdHlsZSxcclxuICAgIGZpbmRQYXJlbnQgOiBmaW5kUGFyZW50LFxyXG4gICAgZXZlbnQgOiBldmVudFxyXG4gIH07XHJcbn0oKSk7XHJcblxyXG5cclxuaWYgKCFSRURJUFMuZXZlbnQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIFJFRElQUy5ldmVudCBpc24ndCBhbHJlYWR5IGRlZmluZWQgKGZyb20gb3RoZXIgUkVESVBTIGZpbGUpXHJcbntcclxuICBSRURJUFMuZXZlbnQgPSAoZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgdmFyIGFkZDtcclxuICAgIHZhciByZW1vdmU7XHJcblxyXG4gICAgYWRkID0gZnVuY3Rpb24gKG9iaiwgZXZlbnROYW1lLCBoYW5kbGVyKSAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGV2ZW50IGxpc3RlbmVyXHJcbiAgICB7XHJcbiAgICAgIGlmIChvYmouYWRkRXZlbnRMaXN0ZW5lcikgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmouYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIGZhbHNlKTsgICAgICAgIC8vIChmYWxzZSkgcmVnaXN0ZXIgZXZlbnQgaW4gYnViYmxlIHBoYXNlIChldmVudCBwcm9wYWdhdGVzIGZyb20gZnJvbSB0YXJnZXQgZWxlbWVudCB1cCB0byB0aGUgRE9NIHJvb3QpXHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAob2JqLmF0dGFjaEV2ZW50KSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5hdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBoYW5kbGVyKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqWydvbicgKyBldmVudE5hbWVdID0gaGFuZGxlcjtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZW1vdmUgPSBmdW5jdGlvbiAob2JqLCBldmVudE5hbWUsIGhhbmRsZXIpICAgICAgICAgICAgICAgICAvLyByZW1vdmUgZXZlbnQgbGlzdGVuZXJcclxuICAgIHtcclxuICAgICAgaWYgKG9iai5yZW1vdmVFdmVudExpc3RlbmVyKSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKG9iai5kZXRhY2hFdmVudCkgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmouZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50TmFtZSwgaGFuZGxlcik7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBcclxuICAgICAge1xyXG4gICAgICAgIG9ialsnb24nICsgZXZlbnROYW1lXSA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHsgYWRkOiBhZGQsIHJlbW92ZTogcmVtb3ZlIH07XHJcbiAgfSgpKTtcclxufSIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHJlZGlwcyA9IHt9O1xyXG5cclxucmVkaXBzLmluaXQgPSBmdW5jdGlvbiAoKSBcclxue1xyXG4gIHZhciByZCA9IFJFRElQUy5kcmFnOyAgIC8vIHJlZmVyZW5jZSB0byB0aGUgUkVESVBTLmRyYWcgbGlicmFyeVxyXG5cclxuICByZC5pbml0KCk7XHJcblxyXG4gIC8vcmQuY2xvbmUua2V5RGl2ID0gcmQuY2xvbmUua2V5Um93ID0gdHJ1ZTsgICAvLyBlbmFibGUgY2xvbmUgZWxlbWVudCBhbmQgY2xvbmUgcm93IHdpdGggc2hpZnQga2V5XHJcblxyXG4gIHJkLmV2ZW50LnJvd0Ryb3BwZWQgPSBmdW5jdGlvbiAobmV3UGFyZW50Um93KVxyXG4gIHtcclxuICAgIHZhciBtb3ZlZElEICAgICAgID0gcGFyc2VJbnQocmQub2JqT2xkLmlkLnJlcGxhY2UoJ3Jvd2lkJywgJycpKTtcclxuICAgIHZhciBtb3ZlZFJvdyAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocmQub2JqT2xkLmlkKTtcclxuICAgIHZhciBuZXdQYXJlbnRJRCAgID0gcGFyc2VJbnQobmV3UGFyZW50Um93LmlkLnJlcGxhY2UoJ3Jvd2lkJywgJycpKTtcclxuICAgIHZhciBvbGRQYXJlbnRJRCAgID0gZ2V0UGFyZW50SUQobW92ZWRSb3cpO1xyXG5cclxuICAgIG1vdmVBc3NlbWJseShtb3ZlZElELCBuZXdQYXJlbnRJRCwgb2xkUGFyZW50SUQsIG5ld1BhcmVudFJvdyk7ICAvL21vdmUgdGhlIG5vZGUgaW4gdGhlIGRhdGEsIGluY2x1ZGluZyBhbGwgZGVzY2VuZGFudCBub2Rlc1xyXG5cclxuICAgIC8vc2hvdyB0aGUgZXhwYW5kIGJ1dHRvbiBmb3IgdGhlIG5ldyBwYXJlbnQsIGluIGNhc2UgaXQgd2FzIHByZXZpb3VzbHkgY2hpbGRsZXNzXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kSUQnICsgbmV3UGFyZW50SUQpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUtZXhwYW5kJyk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kSUQnICsgbmV3UGFyZW50SUQpLmNsYXNzTGlzdC5hZGQoJ3Nob3ctZXhwYW5kJyk7XHJcbiAgfTtcclxuXHJcbiAgcmQuZXZlbnQucm93RHJvcHBlZFNvdXJjZSA9IGZ1bmN0aW9uICgpICAgICAgICAgLy8gcm93IHdhcyBkcm9wcGVkIHRvIHRoZSBzb3VyY2UgLSBldmVudCBoYW5kbGVyLCBtaW5pIHRhYmxlIChjbG9uZWQgcm93KSB3aWxsIGJlIGRlbGV0ZWQgYW5kIHNvdXJjZSByb3cgc2hvdWxkIHJldHVybiB0byBvcmlnaW5hbCBzdGF0ZVxyXG4gIHtcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAxMDApOyAgICAgICAgICAgICAgICAvLyBtYWtlIHNvdXJjZSByb3cgY29tcGxldGVseSB2aXNpYmxlIChubyBvcGFjaXR5KVxyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd01vdmVkID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iaiwgODUpOyAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIG1vdmVkIHJvdywgcmQub2JqIGlzIHJlZmVyZW5jZSBvZiBjbG9uZWQgcm93IChtaW5pIHRhYmxlKVxyXG4gICAgcmQucm93T3BhY2l0eShyZC5vYmpPbGQsIDIwLCAnV2hpdGUnKTsgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBzb3VyY2Ugcm93IGFuZCBjaGFuZ2Ugc291cmNlIHJvdyBiYWNrZ3JvdW5kIGNvbG9yLCBvYmoub2JqT2xkIGlzIHJlZmVyZW5jZSBvZiBzb3VyY2Ugcm93XHJcbiAgfTtcclxuXHJcbiAgcmQuZXZlbnQucm93Q2xpY2tlZCAgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Tm90TW92ZWQgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Q2xvbmVkICAgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Tm90Q2xvbmVkID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93RGVsZXRlZCAgID0gZnVuY3Rpb24gKCkge307XHJcblxyXG4gIHJkLmV2ZW50LnJvd1VuZGVsZXRlZCA9IGZ1bmN0aW9uICgpICAgICAgICAgICAgIC8vIHJvdyBpcyB1bmRlbGV0ZWQgKHJldHVybiBzb3VyY2Ugcm93IHRvIG9yaWdpbmFsIHN0YXRlKVxyXG4gIHtcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAxMDApO1xyXG4gIH07XHJcbn07XHJcbiIsInZhciBzY3JvbGxCYXJXaWR0aDtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKClcclxue1xyXG4gIHNjcm9sbEJhcldpZHRoID0gZ2V0U2Nyb2xsQmFyV2lkdGgoKTtcclxuICBcclxuICBkb2N1bWVudC5vbmtleWRvd24gPSBjaGVja0tleTsgXHJcbiAgXHJcbiAgJC5hamF4KHsgdHlwZTogJ0dFVCcsIHVybDogJ2FwaS9wcm9qZWN0cyd9KS5kb25lKGZ1bmN0aW9uKGRhdGEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlYWQgcHJvamVjdHMgZnJvbSB0aGUgc2VydmVyXHJcbiAgeyBcclxuICAgIHByb2plY3RzID0gZGF0YTsgXHJcbiAgICBcclxuICAgIC8vVE9ETzogcmVhZCBmaWVsZHMgZnJvbSB0aGUgZGF0YWJhc2UgKHB1dCB0aGVtIGluIHRoZSB0cmVlPylcclxuICBcclxuICAgICQoJyNoZWFkZXInKS5odG1sKGdlbmVyYXRlSGVhZGVyTWFya3VwKHByb2plY3RzLnByb2plY3RzKSk7XHJcbiAgICBcclxuICAgICQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLmtleXVwKGZ1bmN0aW9uKGUpXHJcbiAgICB7XHJcbiAgICAgIGlmKGUua2V5Q29kZSA9PSBFTlRFUl9LRVkpXHJcbiAgICAgIHtcclxuICAgICAgICBjcmVhdGVOZXdQcm9qZWN0KCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGluaXRQcm9qZWN0QWN0aW9ucygpXHJcbntcclxuICAkKCcjcHJvamVjdEFjdGlvbklucHV0Jykua2V5dXAoZnVuY3Rpb24oZSlcclxuICB7XHJcbiAgICBpZihlLmtleUNvZGUgPT0gRU5URVJfS0VZKVxyXG4gICAge1xyXG4gICAgICBwcm9qZWN0QWN0aW9uRW50ZXJQcmVzc2VkKCk7XHJcbiAgICB9XHJcbiAgfSk7IFxyXG59XHJcblxyXG52YXIgZ2V0U2Nyb2xsQmFyV2lkdGggPSBmdW5jdGlvbigpIFxyXG57XHJcbiAgdmFyIGRpdiwgd2lkdGg7XHJcbiAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZGl2LmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPVwid2lkdGg6NTBweDtoZWlnaHQ6NTBweDtwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi01MHB4O3RvcDotNTBweDtvdmVyZmxvdzphdXRvO1wiPjxkaXYgc3R5bGU9XCJ3aWR0aDoxcHg7aGVpZ2h0OjEwMHB4O1wiPjwvZGl2PjwvZGl2Pic7XHJcbiAgZGl2ID0gZGl2LmZpcnN0Q2hpbGQ7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xyXG4gIHdpZHRoID0gZGl2Lm9mZnNldFdpZHRoIC0gZGl2LmNsaWVudFdpZHRoO1xyXG4gIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZGl2KTtcclxuICByZXR1cm4gd2lkdGg7XHJcbn07IiwidmFyIEtFWV9VUF9BUlJPVyA9IDM4O1xyXG52YXIgS0VZX0RPV05fQVJST1cgPSA0MDtcclxudmFyIEtFWV9MRUZUX0FSUk9XID0gMzc7XHJcbnZhciBLRVlfUklHSFRfQVJST1cgPSAzOTtcclxuXHJcbmZ1bmN0aW9uIGNoZWNrS2V5KGUpIFxyXG57XHJcbiAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xyXG5cclxuICBpZiAoZS5rZXlDb2RlID09IEtFWV9VUF9BUlJPVykgXHJcbiAge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIHByZXZSb3cgPSAkKGdldEFuY2VzdG9yVGFnKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0cicpKS5wcmV2KClbMF07XHJcbiAgICBcclxuICAgIGlmKHByZXZSb3cpXHJcbiAgICB7XHJcbiAgICAgICQoJyMnICsgZ2V0TmV4dEVsZW1lbnRJRChwcmV2Um93KSkuZm9jdXMoKTtcclxuICAgIH0gICAgICBcclxuICB9XHJcbiAgZWxzZSBpZiAoZS5rZXlDb2RlID09IEtFWV9ET1dOX0FSUk9XKSBcclxuICB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgbmV4dFJvdyA9ICQoZ2V0QW5jZXN0b3JUYWcoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RyJykpLm5leHQoKVswXTtcclxuICAgIFxyXG4gICAgaWYobmV4dFJvdylcclxuICAgIHtcclxuICAgICAgJCgnIycgKyBnZXROZXh0RWxlbWVudElEKG5leHRSb3cpKS5mb2N1cygpO1xyXG4gICAgfSAgICAgICBcclxuICB9XHJcbiAgZWxzZSBpZiAoZS5rZXlDb2RlID09IEtFWV9SSUdIVF9BUlJPVykgXHJcbiAge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJChnZXRBbmNlc3RvclRhZyhkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndGQnKSkubmV4dCgpLmZpbmQoJ2lucHV0JykuZm9jdXMoKTsgIFxyXG4gIH1cclxuICBlbHNlIGlmIChlLmtleUNvZGUgPT0gS0VZX0xFRlRfQVJST1cpIFxyXG4gIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoZ2V0QW5jZXN0b3JUYWcoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RkJykpLnByZXYoKS5maW5kKCdpbnB1dCcpLmZvY3VzKCk7ICBcclxuICB9ICAgIFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXROZXh0RWxlbWVudElEKG5ld1Jvdylcclxue1xyXG4gIHZhciBpZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuaWQ7ICBcclxuICBpZihpZC5pbmRleE9mKCdub2RlSW5wdXQnKSA+IC0xKVxyXG4gIHtcclxuICAgIHJldHVybiAnbm9kZUlucHV0JyArIG5ld1Jvdy5pZC5yZXBsYWNlKCdyb3dpZCcsJycpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdmFyIGNsYXNzZXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICB2YXIgYyA9IGNsYXNzZXNbaV07XHJcblxyXG4gICAgICBpZihjLmluZGV4T2YoJ2ZpZWxkSW5wdXQnKSA+IC0xICYmIGMgIT0gJ2ZpZWxkSW5wdXQnKVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGMucmVwbGFjZSgnZmllbGRJbnB1dCcsICcnKTtcclxuICAgICAgICByZXR1cm4gZmllbGROYW1lICsgbmV3Um93LmlkLnJlcGxhY2UoJ2RhdGFyb3dpZCcsJycpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSAgIFxyXG59IiwidmFyIERFRkFVTFRfTk9ERV9JTlBVVF9XSURUSCA9IDQwMDtcclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlU3ByZWFkU2hlZXRNYXJrdXAoKVxyXG57XHJcbiAgcmV0dXJuICc8ZGl2IGlkPVwic3ByZWFkU2hlZXRWaWV3XCI+JyArXHJcbiAgICAgICAgICAnPGRpdiBpZD1cInByb2plY3QtYWN0aW9uLWNvbnRhaW5lclwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgJzxkaXYgaWQ9XCJmaWVsZHMtaGVhZGVyLXJvd1wiPjwvZGl2PicgK1xyXG4gICAgICAgICAgJzxkaXYgaWQ9XCJyZWRpcHMtZHJhZ1wiPjwvZGl2PicgK1xyXG4gICAgICAgICAgJzxkaXYgaWQ9XCJkYXRhLWNvbnRhaW5lclwiIG9uc2Nyb2xsPVwiaGFuZGxlRGF0YVNjcm9sbCgpXCI+PC9kaXY+JyArXHJcbiAgICAgICAgICc8L2Rpdj4nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUhlYWRlck1hcmt1cChwcm9qZWN0cylcclxue1xyXG4gIHZhciBtYXJrdXAgPSAnPHNlbGVjdCBpZD1cInByb2plY3RTZWxlY3RvclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgb25jaGFuZ2U9XCJzZWxlY3RQcm9qZWN0KClcIj4nXHJcbiAgKyAnPG9wdGlvbiBpZD1cInNlbGVjdFByb2plY3RPcHRpb25cIiB2YWx1ZT1cIjBcIj5TZWxlY3QgUHJvamVjdC4uLjwvb3B0aW9uPic7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBwcm9qZWN0cy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICBtYXJrdXAgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgcHJvamVjdHNbaV0uaWQgKyAnXCI+JyArIHByb2plY3RzW2ldLm5hbWUgKyAnPC9vcHRpb24+JztcclxuICB9XHJcblxyXG4gIG1hcmt1cCArPSAnPG9wdGlvbiBpZD1cIm5ld1Byb2plY3RPcHRpb25cIiB2YWx1ZT1cIi0xXCI+Q3JlYXRlIE5ldyBQcm9qZWN0Li4uPC9vcHRpb24+PC9zZWxlY3Q+J1xyXG4gICsgJzxpbnB1dCBpZD1cImVkaXROZXdQcm9qZWN0TmFtZUlucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj48L2lucHV0PidcclxuICArICc8YSBocmVmPVwiI1wiIGlkPVwic2F2ZS1kYXRhYmFzZS1idXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIG9uY2xpY2s9XCJQcm9qZWN0LnNhdmVUb0RhdGFiYXNlKClcIj5TYXZlIHRvIERhdGFiYXNlPC9hPidcclxuICArICc8YSBocmVmPVwiI1wiIGlkPVwic3dpdGNoVmlld0J1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25jbGljaz1cIlByb2plY3Quc3dpdGNoVmlldygpXCI+U3dpdGNoIFZpZXc8L2E+JztcclxuICAvL21hcmt1cCArPSAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGlkPVwic2F2ZS1maWxlLWJ1dHRvblwiIG9uY2xpY2s9XCJzYXZlTG9jYWxseSgpXCI+U2F2ZSBhcyBGaWxlPC9hPic7XHJcbiAgXHJcbiAgcmV0dXJuIG1hcmt1cDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVQcm9qZWN0U2VsZWN0b3JNYXJrdXAoKVxyXG57XHJcbiAgcmV0dXJuICc8dGFibGU+PHRyIGlkPVwiaGVhZGVyUm93XCI+PHRyPjxkaXYgaWQ9XCJwcm9qZWN0LXNlbGVjdC1jb250YWluZXJcIj4nXHJcbiAgKyAnPHNlbGVjdCBpZD1cInByb2plY3RBY3Rpb25TZWxlY3RvclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgb25jaGFuZ2U9XCJoYW5kbGVQcm9qZWN0QWN0aW9uKClcIj48b3B0aW9uIHZhbHVlPVwiYmxhbmtcIj48L29wdGlvbj4nXHJcbiAgKyAnPG9wdGlvbiB2YWx1ZT1cImFkZEZpZWxkXCI+QWRkIEZpZWxkPC9vcHRpb24+J1xyXG4gICsgJzwvc2VsZWN0PidcclxuICArICc8aW5wdXQgaWQ9XCJwcm9qZWN0QWN0aW9uSW5wdXRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPjwvaW5wdXQ+J1xyXG4gICsgJzwvZGl2PjwvdHI+PHRhYmxlPic7IFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUZpZWxkc1Jvd01hcmt1cCgpXHJcbnsgIFxyXG4gIHZhciBtYXJrdXAgPSAnPHRhYmxlIGlkPVwiZmllbGRIZWFkZXJUYWJsZVwiPjx0ciBpZD1cImZpZWxkSGVhZGVyUm93XCI+JztcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUuZmllbGRzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgLy9hZGQgdGFibGUgaGVhZGVycyB3aXRoIHRoZSBmaWVsZCBuYW1lc1xyXG4gIHtcclxuICAgIG1hcmt1cCArPSBnZXRGaWVsZEhlYWRlck1hcmt1cCh0cmVlLmZpZWxkc1tpXS5uYW1lLCBpKTtcclxuICB9XHJcblxyXG4gIG1hcmt1cCArPSAnPC90cj48L3RhYmxlPic7XHJcbiAgcmV0dXJuIG1hcmt1cDsgIFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVRyZWVNYXJrdXAoKVxyXG57XHJcbiAgdmFyIG1hcmt1cCA9ICc8dGFibGUgaWQ9XCJ0cmVlVGFibGVcIj4nO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgdHJlZS5ub2Rlcy5sZW5ndGg7IGkrKykgICAgICAgIC8vYWRkIHJvdyBmb3IgZWFjaCBub2RlXHJcbiAge1xyXG4gICAgbWFya3VwICs9IGFkZFJvdyh0cmVlLm5vZGVzW2ldLCAwLCAnJywgMCk7XHJcbiAgfVxyXG5cclxuICBtYXJrdXAgKz0gJzwvdGFibGU+JztcclxuICByZXR1cm4gbWFya3VwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRSb3cobm9kZSwgZGVwdGgsIGFuY2VzdG9ycywgcGFyZW50KSAgICAgICAvL2FkZCBub2RlIGFuZCBkYXRhIGlucHV0IGZvciBlYWNoIGZpZWxkXHJcbntcclxuICB2YXIgbWFya3VwID0gJyc7XHJcbiAgdmFyIGNsYXNzZXMgPSAnbm9kZVJvdyBkZXB0aCcgKyBkZXB0aCArICcgZXhwYW5kZWQgcGFyZW50JyArIHBhcmVudCArICcgJyArIGFuY2VzdG9ycztcclxuICB2YXIgbm9kZUlEID0gbm9kZS5pZDtcclxuXHJcbiAgdmFyIGRyYWdIYW5kbGUgPSAnPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHB1bGwtcmlnaHRcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tbW92ZVwiPjwvaT48L2Rpdj4nO1xyXG4gIHZhciBkZWxldGVCdXR0b24gPSAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cInB1bGwtcmlnaHQgYnRuIGJ0bi1kYW5nZXIgYnRuLXhzIGRlbGV0ZS1idXR0b25cIiBvbmNsaWNrPVwiZGVsZXRlTm9kZSh0aGlzKVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L2k+PC9hPic7XHJcbiAgdmFyIGNvcHlCdXR0b24gPSAnPGEgaHJlZj1cIiNcIiAgY2xhc3M9XCJwdWxsLXJpZ2h0IGJ0biBidG4taW5mbyBidG4teHMgY29weS1idXR0b25cIiBvbmNsaWNrPVwiY29weU5vZGUodGhpcylcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1c1wiPjwvaT48L2E+JztcclxuICB2YXIgc2hvd0V4cGFuZEJ1dHRvbiA9ICc8YSBpZD1cImV4cGFuZElEJyArIG5vZGVJRCArICdcIiBocmVmPVwiI1wiIHN0eWxlPVwibWFyZ2luLWxlZnQ6JyArIChkZXB0aCoxMCkgKyAncHhcIiBvbmNsaWNrPVwidG9nZ2xlKHRoaXMpXCIgY2xhc3M9XCJidG4gYnRuLXhzIHNob3ctZXhwYW5kXCI+PHNwYW4gaWQ9XCJpY29uJyArIG5vZGVJRCArICdcIiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duIGljb25wJyArIHBhcmVudCArICdcIj48L3NwYW4+PC9hPic7XHJcbiAgdmFyIGhpZGVFeHBhbmRCdXR0b24gPSAnPGEgaWQ9XCJleHBhbmRJRCcgKyBub2RlSUQgKyAnXCIgaHJlZj1cIiNcIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OicgKyAoZGVwdGgqMTApICsgJ3B4XCIgb25jbGljaz1cInRvZ2dsZSh0aGlzKVwiIGNsYXNzPVwiYnRuIGJ0bi14cyBoaWRlLWV4cGFuZFwiPjxzcGFuIGlkPVwiaWNvbicgKyBub2RlSUQgKyAnXCIgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93biBpY29ucCcgKyBwYXJlbnQgKyAnXCI+PC9zcGFuPjwvYT4nO1xyXG5cclxuICBtYXJrdXAgKz0gJzx0ciBpZD1cInJvd2lkJyArIG5vZGVJRCArICdcIiBjbGFzcz1cIicgKyBjbGFzc2VzICsgJ1wiPjx0ZCBjbGFzcz1cInJlZGlwcy1yb3doYW5kbGVyIGNlbGxcIj48ZGl2IGNsYXNzPVwibm9kZS1jb250YWluZXJcIj4nO1xyXG4gIG1hcmt1cCArPSBkZWxldGVCdXR0b24gKyBjb3B5QnV0dG9uICsgZHJhZ0hhbmRsZTtcclxuXHJcbiAgaWYobm9kZS5ub2RlcyAmJiBub2RlLm5vZGVzLmxlbmd0aCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiBub2RlIGlzIGEgcGFyZW50XHJcbiAge1xyXG4gICAgbWFya3VwICs9IHNob3dFeHBhbmRCdXR0b247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2hvdyB0aGUgZXhwYW5zaW9uIGJ1dHRvblxyXG4gIH1cclxuICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIG5vZGUgaXMgYSBsZWFmXHJcbiAge1xyXG4gICAgbWFya3VwICs9IGhpZGVFeHBhbmRCdXR0b247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaGlkZSB0aGUgZXhwYW5zaW9uIGJ1dHRvblxyXG4gIH1cclxuXHJcbiAgbWFya3VwICs9ICc8aW5wdXQgaWQ9XCJub2RlSW5wdXQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cIm5vZGVcIiB0eXBlPVwidGV4dFwiIHZhbHVlPVwiJyArIG5vZGUubmFtZSArICdcIiBzdHlsZT1cIndpZHRoOicgKyAoREVGQVVMVF9OT0RFX0lOUFVUX1dJRFRILWRlcHRoKjEwKSArICdweFwiIG9uaW5wdXQ9XCJ1cGRhdGVOb2RlTmFtZSh0aGlzKVwiLz48L2Rpdj48L3RkPjwvdHI+JztcclxuXHJcbiAgaWYobm9kZS5ub2RlcyAmJiBub2RlLm5vZGVzLmxlbmd0aCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgdGhlIGNoaWxkcmVuIG9mIHRoaXMgbm9kZSBiZWxvdyB0aGlzIG5vZGUncyByb3dcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbm9kZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9IGFkZFJvdyhub2RlLm5vZGVzW2ldLCBkZXB0aCsxLCBhbmNlc3RvcnMgKyAnIGFuY2VzdG9yJyArIG5vZGVJRCwgbm9kZUlEKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBtYXJrdXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlRGF0YU1hcmt1cCgpXHJcbntcclxuICB2YXIgbWFya3VwID0gJzx0YWJsZSBpZD1cImRhdGFUYWJsZVwiPic7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLm5vZGVzLmxlbmd0aDsgaSsrKSAgICAgICAgLy9hZGQgcm93IGZvciBlYWNoIG5vZGVcclxuICB7XHJcbiAgICBtYXJrdXAgKz0gYWRkRGF0YVJvdyh0cmVlLm5vZGVzW2ldKTtcclxuICB9XHJcblxyXG4gIG1hcmt1cCArPSAnPC90YWJsZT4nO1xyXG4gIHJldHVybiBtYXJrdXA7ICBcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkRGF0YVJvdyhub2RlKVxyXG57XHJcbiAgdmFyIG1hcmt1cCA9ICc8dHIgaWQ9XCJkYXRhcm93aWQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cImRhdGFSb3dcIj4nO1xyXG4gIFxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLmZpZWxkcy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgdGhlIGRhdGEgaW5wdXRzIGZvciBlYWNoIGZpZWxkc1xyXG4gIHtcclxuICAgIHZhciBmaWVsZCA9IHRyZWUuZmllbGRzW2ldO1xyXG5cclxuICAgIHZhciB2YWx1ZSA9ICcnO1xyXG4gICAgaWYobm9kZS52YWx1ZXMgJiYgbm9kZS52YWx1ZXNbZmllbGQubmFtZV0pXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlID0gRmllbGQuZm9ybWF0VmFsdWUoZmllbGQsIG5vZGUudmFsdWVzW2ZpZWxkLm5hbWVdKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgbWFya3VwICs9IGdldEZpZWxkQ2VsbE1hcmt1cChmaWVsZC5uYW1lLCBub2RlLmlkLCB2YWx1ZSk7XHJcbiAgfVxyXG4gIFxyXG4gIG1hcmt1cCArPSAnPC90cj4nO1xyXG4gIFxyXG4gIGlmKG5vZGUubm9kZXMgJiYgbm9kZS5ub2Rlcy5sZW5ndGggPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIHRoZSBjaGlsZHJlbiBvZiB0aGlzIG5vZGUgYmVsb3cgdGhpcyBub2RlJ3Mgcm93XHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIG1hcmt1cCArPSBhZGREYXRhUm93KG5vZGUubm9kZXNbaV0pO1xyXG4gICAgfVxyXG4gIH0gIFxyXG4gIFxyXG4gIHJldHVybiBtYXJrdXA7ICBcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQ29sdW1uKGZpZWxkTmFtZSlcclxue1xyXG4gICQoJyNmaWVsZEhlYWRlclJvdycpLmFwcGVuZChnZXRGaWVsZEhlYWRlck1hcmt1cChmaWVsZE5hbWUsIHRyZWUuZmllbGRzLmxlbmd0aCkpOyAgICAvL2FkZCBmaWVsZCBoZWFkZXJcclxuICBcclxuICAkKCcuZGF0YVJvdycpLmVhY2goZnVuY3Rpb24oaSwgaXRlbSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgY2VsbCBmb3IgZWFjaCBub2RlXHJcbiAge1xyXG4gICAgJChpdGVtKS5hcHBlbmQoZ2V0RmllbGRDZWxsTWFya3VwKGZpZWxkTmFtZSwgaXRlbS5pZC5yZXBsYWNlKCdkYXRhcm93aWQnLCAnJykpKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RmllbGRIZWFkZXJNYXJrdXAoZmllbGROYW1lLCBpbmRleClcclxue1xyXG4gIHJldHVybiAnPHRkIGNsYXNzPVwiZmllbGRIZWFkZXJDZWxsXCI+PGRpdiBjbGFzcz1cImZpZWxkSGVhZGVyQ29udGFpbmVyXCI+J1xyXG4gICsgJzxkaXYgY2xhc3M9XCJtb3ZlQ29sR3JpcFwiPjwvZGl2PidcclxuICArICc8ZGl2IGNsYXNzPVwiZmllbGROYW1lSW5wdXRDb250YWluZXJcIj48dGV4dGFyZWEgaWQ9XCJjb2xIZWFkZXJJbnB1dCcgKyBmaWVsZE5hbWUgKyAnXCIgY2xhc3M9XCJmaWVsZE5hbWVJbnB1dFwiPicgKyBmaWVsZE5hbWUgKyAnPC90ZXh0YXJlYT48L2Rpdj4nXHJcbiAgKyAnPGRpdiBjbGFzcz1cImZpZWxkSGVhZGVyQnV0dG9uXCI+J1xyXG4gICsgJzxpbWcgc3JjPVwiaW1hZ2VzL2Rvd24tYXJyb3cucG5nXCIgb25jbGljaz1cInNob3dNZW51KGV2ZW50LCBcXCcnICsgZmllbGROYW1lICsgJ1xcJyk7XCIgc3R5bGU9XCJjdXJzb3I6cG9pbnRlclwiLz4nXHJcbiAgKyAnPC9kaXY+J1xyXG4gICsgJzxkaXYgaWQ9XCJncmlwJyArIGluZGV4ICsgJ1wiIGNsYXNzPVwicmVzaXplQ29sR3JpcFwiIG9ubW91c2Vkb3duPVwic3RhcnRSZXNpemUoZXZlbnQsIHRoaXMpXCI+PC9kaXY+J1xyXG4gICsgJzwvZGl2PjwvdGQ+JztcclxuICAvL3JldHVybiAnPHRoIGlkPVwiY29sSGVhZGVyJyArIGZpZWxkTmFtZSArICdcIiBjbGFzcz1cImhlYWRlclwiPjxkaXYgY2xhc3M9XCJtb3ZlQ29sR3JpcFwiPjwvZGl2PjxpbnB1dCBpZD1cImNvbEhlYWRlcklucHV0JyArIGZpZWxkTmFtZSArICdcIiBjbGFzcz1cImZpZWxkTmFtZUlucHV0XCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIicgKyBmaWVsZE5hbWUgKyAnXCIvPjxkaXYgaWQ9XCJncmlwJyArIGluZGV4ICsgJ1wiIGNsYXNzPVwicmVzaXplQ29sR3JpcFwiIG9ubW91c2Vkb3duPVwic3RhcnRSZXNpemUoZXZlbnQsIHRoaXMpXCI+PC9kaXY+PC90aD4nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGaWVsZENlbGxNYXJrdXAoZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG57ICBcclxuICByZXR1cm4gJzx0ZCBjbGFzcz1cImNlbGxcIj48aW5wdXQgY2xhc3M9XCJmaWVsZElucHV0IGZpZWxkSW5wdXQnICsgZmllbGROYW1lICsgJ1wiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCInICsgZmllbGROYW1lICsgbm9kZUlEICsgJ1wiIHZhbHVlPVwiJyArIHZhbHVlICsgJ1wiIG9uaW5wdXQ9XCJ1cGRhdGVGaWVsZFZhbHVlKFxcJycgKyBmaWVsZE5hbWUgKyAnXFwnLCBcXCcnICsgbm9kZUlEICsgJ1xcJylcIiBvbmZvY3VzPVwiZGlzcGxheVJhd1ZhbHVlKFxcJycgKyBmaWVsZE5hbWUgKyAnXFwnLCBcXCcnICsgbm9kZUlEICsgJ1xcJylcIi8+PC90ZD4nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRBc3NlbWJseU1hcmt1cChub2RlSUQsIG5ld05vZGVJRCwgZGVwdGgpXHJcbntcclxuICB2YXIgbm9kZSAgICA9IGZpbmROb2RlSW5UcmVlKG5vZGVJRCk7XHJcbiAgdmFyIHBhcmVudCAgPSBmaW5kUGFyZW50SW5UcmVlKG5vZGVJRCk7XHJcbiAgcmV0dXJuIGFkZFJvdyhub2RlLCBkZXB0aCwgJ2FuY2VzdG9yJyArIHBhcmVudC5pZCwgcGFyZW50LmlkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RmllbGRNZW51TWFya3VwKGZpZWxkTmFtZSwgeCwgeSlcclxue1xyXG4gIHZhciBmaWVsZCA9IFByb2plY3QuZ2V0RmllbGQoZmllbGROYW1lKTtcclxuICBcclxuICB2YXIgbWVudSA9IG5ldyBNZW51KCk7XHJcblxyXG4gIHZhciBudW1iZXJJdGVtID0gbmV3IE1lbnVJdGVtKCdOdW1iZXInLCBGaWVsZC5OVU1CRVIsICdkYXRhdHlwZScsIGZpZWxkKTtcclxuICB2YXIgZm9ybWF0SXRlbSA9IG5ldyBNZW51SXRlbSgnRm9ybWF0Jyk7XHJcbiAgXHJcbiAgdmFyIG51bWJlckZvcm1hdEl0ZW0gPSBuZXcgTWVudUl0ZW0oJ051bWJlcicsIEZpZWxkLk5VTUJFUl9GT1JNQVQsICdmb3JtYXQnLCBmaWVsZCk7XHJcbiAgbnVtYmVyRm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbSgnMCcsIDAsICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIHZhciBkaXNwbGF5U3RyaW5nID0gJzAuJztcclxuICBmb3IodmFyIGkgPSAxOyBpIDwgMTE7IGkrKylcclxuICB7XHJcbiAgICBkaXNwbGF5U3RyaW5nICs9ICcwJztcclxuICAgIG51bWJlckZvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oZGlzcGxheVN0cmluZywgaSwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgfVxyXG4gIGZvcm1hdEl0ZW0uaXRlbXMucHVzaChudW1iZXJGb3JtYXRJdGVtKTtcclxuICBcclxuICB2YXIgcGVyY2VudEZvcm1hdEl0ZW0gPSBuZXcgTWVudUl0ZW0oJ1BlcmNlbnQnLCBGaWVsZC5QRVJDRU5UX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKTtcclxuICBwZXJjZW50Rm9ybWF0SXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbSgnMCcsIDAsICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIHZhciBkaXNwbGF5U3RyaW5nID0gJzAuJztcclxuICBmb3IodmFyIGkgPSAxOyBpIDwgMTE7IGkrKylcclxuICB7XHJcbiAgICBkaXNwbGF5U3RyaW5nICs9ICcwJztcclxuICAgIHBlcmNlbnRGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKGRpc3BsYXlTdHJpbmcgKyAnJScsIGksICdwcmVjaXNpb24nLCBmaWVsZCkpO1xyXG4gIH1cclxuICBmb3JtYXRJdGVtLml0ZW1zLnB1c2gocGVyY2VudEZvcm1hdEl0ZW0pO1xyXG4gIFxyXG4gIHZhciBzY2llbnRpZmljRm9ybWF0SXRlbSA9IG5ldyBNZW51SXRlbSgnU2NpZW50aWZpYycsIEZpZWxkLlNDSUVOVElGSUNfRk9STUFULCAnZm9ybWF0JywgZmllbGQpO1xyXG4gIHNjaWVudGlmaWNGb3JtYXRJdGVtLml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKCcwJywgMCwgJ3ByZWNpc2lvbicsIGZpZWxkKSk7XHJcbiAgdmFyIGRpc3BsYXlTdHJpbmcgPSAnMC4nO1xyXG4gIGZvcih2YXIgaSA9IDE7IGkgPCAxMTsgaSsrKVxyXG4gIHtcclxuICAgIGRpc3BsYXlTdHJpbmcgKz0gJzAnO1xyXG4gICAgc2NpZW50aWZpY0Zvcm1hdEl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oZGlzcGxheVN0cmluZyArICdlKzAnLCBpLCAncHJlY2lzaW9uJywgZmllbGQpKTtcclxuICB9XHJcbiAgZm9ybWF0SXRlbS5pdGVtcy5wdXNoKHNjaWVudGlmaWNGb3JtYXRJdGVtKTsgIFxyXG4gIFxyXG4gIG51bWJlckl0ZW0uaXRlbXMucHVzaChmb3JtYXRJdGVtKTtcclxuICBcclxuICB2YXIgYWdncmVnYXRpb25JdGVtID0gbmV3IE1lbnVJdGVtKCdBZ2dyZWdhdGlvbicpO1xyXG4gIGFnZ3JlZ2F0aW9uSXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbSgnTm8gQWdncmVnYXRpb24nLCBGaWVsZC5OT19BR0dSRUdBVElPTiwgJ2FnZ190eXBlJywgZmllbGQpKTtcclxuICBcclxuICB2YXIgc3VtQW55QWdnSXRlbSA9IG5ldyBNZW51SXRlbSgnU3VtIGFueSBkZWZpbmVkIGNoaWxkcmVuJywgRmllbGQuU1VNX0FOWV9BR0dSRUdBVElPTiwgJ2FnZ190eXBlJywgZmllbGQpO1xyXG4gIFxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLmZpZWxkcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgZiA9IHRyZWUuZmllbGRzW2ldO1xyXG4gICAgXHJcbiAgICBpZihmLm5hbWUgIT0gZmllbGQubmFtZSlcclxuICAgIHtcclxuICAgICAgc3VtQW55QWdnSXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbShmLm5hbWUsIGYubmFtZSwgJ2FnZ19xdHlfZmllbGQnLCBmaWVsZCkpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBhZ2dyZWdhdGlvbkl0ZW0uaXRlbXMucHVzaChzdW1BbnlBZ2dJdGVtKTtcclxuICBudW1iZXJJdGVtLml0ZW1zLnB1c2goYWdncmVnYXRpb25JdGVtKTtcclxuICBcclxuICBtZW51Lml0ZW1zID0gW107XHJcbiAgbWVudS5pdGVtcy5wdXNoKG51bWJlckl0ZW0pO1xyXG4gIG1lbnUuaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJ1RleHQnLCBGaWVsZC5TVFJJTkcsICdkYXRhdHlwZScsIGZpZWxkKSk7XHJcbiAgLy9UT0RPOiBtZW51Lml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKCdDaG9pY2UnLCBGaWVsZC5DSE9JQ0UsICdkYXRhdHlwZScsIGZpZWxkKSk7XHJcbiAgXHJcbiAgdmFyIG1hcmt1cCA9ICc8ZGl2IGlkPVwiZmllbGRNZW51XCIgc3R5bGU9XCJsZWZ0OicgKyB4ICsgJ3B4O3RvcDonICsgeSArICdweDtcIj4nO1xyXG4gIFxyXG4gIG1hcmt1cCArPSBnZW5lcmF0ZU1lbnVNYXJrdXAobWVudSk7XHJcbiAgXHJcbiAgbWFya3VwICs9ICc8L2Rpdj4nO1xyXG4gIHJldHVybiBtYXJrdXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlTWVudU1hcmt1cChtZW51KVxyXG57XHJcbiAgdmFyIG1hcmt1cCA9ICc8dWw+JztcclxuICBcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgbWVudS5pdGVtcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgaXRlbSA9IG1lbnUuaXRlbXNbaV07XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSAnPGxpIG9uY2xpY2s9XCJNZW51LmhhbmRsZUNsaWNrKCcgKyBpdGVtLmlkICsgJyk7XCI+JztcclxuXHJcbiAgICB2YXIgY2hlY2tNYXJrQ2xhc3MgPSAndW5jaGVja2VkTWVudUl0ZW0nO1xyXG4gICAgaWYoaXRlbS5maWVsZCAmJiBpdGVtLmNoZWNrZWQpXHJcbiAgICB7XHJcbiAgICAgIGNoZWNrTWFya0NsYXNzID0gJ2NoZWNrZWRNZW51SXRlbSc7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSAnPGltZyBpZD1cIm1lbnVJdGVtJyArIGl0ZW0uaWQgKyAnXCIgc3JjPVwiJyArIENIRUNLX01BUktfSU1BR0VfUEFUSCArICdcIiBjbGFzcz1cIicgKyBjaGVja01hcmtDbGFzcyArICdcIi8+JztcclxuICAgIG1hcmt1cCArPSBpdGVtLmRpc3BsYXk7XHJcbiAgICBcclxuICAgIGlmKGl0ZW0uaXRlbXMgJiYgaXRlbS5pdGVtcy5sZW5ndGggPiAwKVxyXG4gICAge1xyXG4gICAgICBtYXJrdXAgKz0gJzxkaXYgY2xhc3M9XCJhcnJvd1JpZ2h0XCI+PC9kaXY+JztcclxuICAgIH1cclxuXHJcbiAgICBpZihpdGVtLml0ZW1zICYmIGl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9IGdlbmVyYXRlTWVudU1hcmt1cChpdGVtKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgbWFya3VwICs9ICc8L2xpPic7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBtYXJrdXAgKyAnPC91bD4nO1xyXG59IiwiZnVuY3Rpb24gZGlzcGxheVNwcmVhZFNoZWV0KClcclxue1xyXG4gICQoJ2JvZHknKS5hcHBlbmQoZ2VuZXJhdGVTcHJlYWRTaGVldE1hcmt1cCgpKTtcclxuICBcclxuICAkKCcjcHJvamVjdC1hY3Rpb24tY29udGFpbmVyJykuaHRtbChnZW5lcmF0ZVByb2plY3RTZWxlY3Rvck1hcmt1cCgpKTtcclxuICAkKCcjZmllbGRzLWhlYWRlci1yb3cnKS5odG1sKGdlbmVyYXRlRmllbGRzUm93TWFya3VwKCkpO1xyXG4gICQoJyNmaWVsZHMtaGVhZGVyLXJvdycpLmNzcygncmlnaHQnLCBzY3JvbGxCYXJXaWR0aCArICdweCcpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zaG9ydGVuIHRoZSB3aWR0aCBvZiB0aGUgZmllbGRzUm93IGJ5IHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsIGJhclxyXG4gICQoXCIjZGF0YS1jb250YWluZXJcIikuaHRtbChnZW5lcmF0ZURhdGFNYXJrdXAoKSk7IFxyXG5cdCQoXCIjcmVkaXBzLWRyYWdcIikuaHRtbChnZW5lcmF0ZVRyZWVNYXJrdXAoKSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FwcGVuZCB0aGUgbWFya3VwIHRvIHRoZSBET01cclxuICAkKCcjcmVkaXBzLWRyYWcnKS5jc3MoJ2JvdHRvbScsIHNjcm9sbEJhcldpZHRoICsgJ3B4Jyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2hvcnRlbiB0aGUgaGVpZ2h0IG9mIHRoZSB0cmVlIHNlY3Rpb24gYnkgdGhlIHdpZHRoIG9mIHRoZSBzY3JvbGwgYmFyXHJcblx0cmVkaXBzLmluaXQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2luaXRpYWxpemUgdHJlZSBkcmFnL2Ryb3AgbGlicmFyeVxyXG5cdGluaXRQcm9qZWN0QWN0aW9ucygpO1x0XHJcbn1cclxuXHJcbnZhciBoYW5kbGVQcm9qZWN0QWN0aW9uID0gZnVuY3Rpb24oKVxyXG57XHJcblx0aWYoJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgpID09ICdhZGRGaWVsZCcpXHJcblx0e1xyXG4gICAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnZhbChcIlR5cGUgTmV3IEZpZWxkIE5hbWUgYW5kIFByZXNzIEVudGVyIHRvIENyZWF0ZVwiKTtcclxuXHRcdCQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS5zaG93KCkuZm9jdXMoKS5zZWxlY3QoKTtcclxuXHR9XHRcclxufTtcclxuXHJcbmZ1bmN0aW9uIHByb2plY3RBY3Rpb25FbnRlclByZXNzZWQoKVxyXG57XHJcblx0aWYoJCgnI3Byb2plY3RBY3Rpb25TZWxlY3RvcicpLnZhbCgpID09ICdhZGRGaWVsZCcpXHJcblx0e1xyXG5cdFx0dmFyIGZpZWxkTmFtZSA9ICQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS52YWwoKTtcclxuXHRcdHRyZWUuZmllbGRzLnB1c2gobmV3IEZpZWxkKGZpZWxkTmFtZSkpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIG5ldyBmaWVsZCB0byB0aGUgbW9kZWxcclxuICAgIGFkZENvbHVtbihmaWVsZE5hbWUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIGNvbHVtbiBmb3IgbmV3IGZpZWxkIHRvIHRoZSB2aWV3XHJcblx0XHRcclxuICAgICQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS5oaWRlKCk7XHJcbiAgICAkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCdibGFuaycpO1xyXG5cdH1cdFxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVOZXdQcm9qZWN0KClcclxue1xyXG5cdCQoJyNzZWxlY3RQcm9qZWN0T3B0aW9uJykucmVtb3ZlKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgdGhlIHNlbGVjdCBwcm9qZWN0IG9wdGlvbiwgb25jZSB0aGUgdXNlciBzZWxlY3RzIGEgcHJvamVjdCBcclxuXHRcclxuXHR2YXIgbmV3UHJvamVjdE5hbWUgPSAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS52YWwoKTtcclxuXHQkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS5oaWRlKCk7XHJcblx0XHJcblx0Ly9hZGQgYW4gb3B0aW9uIGZvciB0aGUgbmV3IHByb2plY3QgdG8gdGhlIHByb2plY3RzIGxpc3QsIHNlbGVjdCB0aGF0IG9wdGlvblxyXG5cdHZhciBuZXdQcm9qZWN0SUQgPSBwcm9qZWN0cy5uZXh0UHJvamVjdElELnRvU3RyaW5nKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBuZWVkIHRvIGdldCB0aGlzIGZyb20gdGhlIGRhdGFiYXNlIHRvIGluc3VyZSB3ZSBnZXQgdGhlIGNvcnJlY3QgaWRcclxuXHR2YXIgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuXHRvcHRpb24udGV4dCA9IG5ld1Byb2plY3ROYW1lO1xyXG5cdG9wdGlvbi52YWx1ZSA9IG5ld1Byb2plY3RJRDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcblx0JChvcHRpb24pLmluc2VydEJlZm9yZSgnI3Byb2plY3RTZWxlY3RvciBvcHRpb246bnRoLWNoaWxkKCcgKyAkKCcjcHJvamVjdFNlbGVjdG9yJykubGVuZ3RoICsgJyknKTtcclxuXHQkKCcjcHJvamVjdFNlbGVjdG9yJykudmFsKG5ld1Byb2plY3RJRCk7XHJcblx0XHJcblx0JC5hamF4KHsgdHlwZTogJ1BPU1QnLCB1cmw6ICcvYXBpL2FkZFByb2plY3Q/cHJvamVjdE5hbWU9JyArIG5ld1Byb2plY3ROYW1lIH0pOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBkb2N1bWVudCBpbiB0aGUgZGF0YWJhc2VcclxuXHRcclxuXHQvL2NyZWF0ZSBhIHRvcCBub2RlIGFuZCB0cmVlIGZvciB0aGUgcHJvamVjdFxyXG5cdHRyZWUgPSB7IFwicHJvamVjdElEXCI6IG5ld1Byb2plY3RJRCwgXCJwcm9qZWN0TmFtZVwiOiBuZXdQcm9qZWN0TmFtZSwgXCJuYW1lXCI6IG5ld1Byb2plY3ROYW1lLCBcInZlcnNpb25cIjogMSwgXCJuZXh0Tm9kZUlEXCI6IDIsIFwiZmllbGRzXCI6IFtdLCBcIm5vZGVzXCI6IFt7IFwiaWRcIjogMSwgXCJuYW1lXCI6IG5ld1Byb2plY3ROYW1lLCBcIm5vZGVzXCI6IFtdIH1dIH07XHJcbiAgZGlzcGxheVNwcmVhZFNoZWV0KCk7XHJcblx0XHJcblx0UHJvamVjdC5zYXZlVG9EYXRhYmFzZSgpO1x0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dNZW51KGUsIGZpZWxkTmFtZSlcclxue1xyXG4gIGlmKCQoJyNmaWVsZE1lbnUnKS5sZW5ndGggPT09IDApXHJcbiAge1xyXG4gICAgJChnZXRGaWVsZE1lbnVNYXJrdXAoZmllbGROYW1lLCBlLmNsaWVudFgsIGUuY2xpZW50WSkpLmFwcGVuZFRvKCdib2R5Jyk7XHJcbiAgICAkKCcjZmllbGRNZW51JykubW91c2VsZWF2ZShmdW5jdGlvbigpIHsgJCgnI2ZpZWxkTWVudScpLnJlbW92ZSgpOyB9KTtcclxuICB9XHJcbn0iLCJ2YXIgcmVzaXplQ29sdW1uTGVmdCA9IDA7XHJcbnZhciByZXNpemVGaWVsZCA9ICcwJztcclxuXHJcbnZhciBzdGFydFJlc2l6ZSA9IGZ1bmN0aW9uKGUsIGdyaXApXHJcbntcclxuICAkKGRvY3VtZW50KS5iaW5kKCd0b3VjaG1vdmUucmVzaXplQ29sR3JpcCBtb3VzZW1vdmUucmVzaXplQ29sR3JpcCcsIHJlc2l6ZURyYWcpLmJpbmQoJ3RvdWNoZW5kLnJlc2l6ZUNvbEdyaXAgbW91c2V1cC5yZXNpemVDb2xHcmlwJywgcmVzaXplRW5kKTtcclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUubGVmdCA9IGUucGFnZVggKyAncHgnO1xyXG5cclxuICByZXNpemVDb2x1bW5MZWZ0ID0gJChncmlwLnBhcmVudE5vZGUpLnBvc2l0aW9uKCkubGVmdDsgICAgICAgICAgICAgICAgICAgIC8vc2F2ZSB0aGUgbGVmdCBwb3NpdGlvbiBvZiB0aGUgY29sdW1uIGJlaW5nIHJlc2l6ZWRcclxuICByZXNpemVGaWVsZCA9IGdyaXAucGFyZW50Tm9kZS5pZC5yZXBsYWNlKCdjb2xIZWFkZXInLCAnJyk7ICAgICAgICAgICAgICAgIC8vc2F2ZSB0aGUgZmllbGQgb2YgdGhlIGNvbHVtbiBiZWluZyByZXNpemVkXHJcbn07XHJcblxyXG52YXIgcmVzaXplRW5kID0gZnVuY3Rpb24oZSlcclxue1xyXG4gICQoZG9jdW1lbnQpLnVuYmluZCgndG91Y2htb3ZlLnJlc2l6ZUNvbEdyaXAgbW91c2Vtb3ZlLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVEcmFnKS51bmJpbmQoJ3RvdWNoZW5kLnJlc2l6ZUNvbEdyaXAgbW91c2V1cC5yZXNpemVDb2xHcmlwJywgcmVzaXplRW5kKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuXHJcbiAgdmFyIG5ld1dpZHRoID0gZS5wYWdlWCAtIHJlc2l6ZUNvbHVtbkxlZnQgLSBHUklQU19XSURUSDtcclxuXHJcbiAgaWYobmV3V2lkdGggPCBNSU5fQ09MVU1OX1dJRFRIKVxyXG4gIHtcclxuICAgIG5ld1dpZHRoID0gTUlOX0NPTFVNTl9XSURUSDtcclxuICB9XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xIZWFkZXJJbnB1dCcgKyByZXNpemVGaWVsZCkuc3R5bGUud2lkdGggPSBuZXdXaWR0aCArICdweCc7ICAgIC8vcmVzaXplIHRoZSB3aWR0aCBvZiB0aGUgY29sdW1uIGhlYWRlclxyXG5cclxuICAvL3Jlc2l6ZSB0aGUgd2lkdGggb2YgZXZlcnkgY2VsbCBpbiB0aGUgY29sdW1uXHJcbiAgdmFyIGNvbHVtbkNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpZWxkSW5wdXQnICsgcmVzaXplRmllbGQpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY29sdW1uQ2VsbHMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgY29sdW1uQ2VsbHNbaV0uc3R5bGUud2lkdGggPSAobmV3V2lkdGggKyA4KSArICdweCc7XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHJlc2l6ZURyYWcgPSBmdW5jdGlvbihlKVxyXG57XHJcbiAgaWYoZS5wYWdlWCA+IHJlc2l6ZUNvbHVtbkxlZnQgKyBNSU5fQ09MVU1OX1dJRFRIICsgR1JJUFNfV0lEVEgpXHJcbiAge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS5sZWZ0ID0gZS5wYWdlWCArICdweCc7ICAgICAgLy9tb3ZlIHRoZSByZXNpemUgbGluZSBhcyB0aGUgdXNlciBkcmFncyBpdFxyXG4gIH1cclxufTsiLCJ2YXIgcHJvamVjdHMgPSBudWxsO1xyXG52YXIgdHJlZTtcclxuXHJcbnZhciBFTlRFUl9LRVkgPSAxMztcclxudmFyIE1JTl9DT0xVTU5fV0lEVEggPSA3MDtcclxudmFyIEdSSVBTX1dJRFRIID0gMTY7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEYXRhU2Nyb2xsKClcclxue1xyXG4gICQoJyNyZWRpcHMtZHJhZycpLnNjcm9sbFRvcCgkKCcjZGF0YS1jb250YWluZXInKS5zY3JvbGxUb3AoKSk7XHJcbiAgJCgnI2ZpZWxkcy1oZWFkZXItcm93Jykuc2Nyb2xsTGVmdCgkKCcjZGF0YS1jb250YWluZXInKS5zY3JvbGxMZWZ0KCkpO1xyXG59XHJcblxyXG52YXIgc2VsZWN0UHJvamVjdCA9IGZ1bmN0aW9uKClcclxue1xyXG4gIHZhciBwcm9qZWN0U2VsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdFNlbGVjdG9yJyk7XHJcbiAgdmFyIHNlbGVjdGVkT3B0aW9uID0gcHJvamVjdFNlbGVjdG9yLm9wdGlvbnNbcHJvamVjdFNlbGVjdG9yLnNlbGVjdGVkSW5kZXhdO1xyXG5cclxuICBpZihzZWxlY3RlZE9wdGlvbi5pZCA9PT0gXCJuZXdQcm9qZWN0T3B0aW9uXCIpXHJcbiAge1xyXG4gICAgJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0JykudmFsKFwiVHlwZSBOZXcgUHJvamVjdCBOYW1lIGFuZCBQcmVzcyBFbnRlciB0byBDcmVhdGVcIik7XHJcbiAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS5zaG93KCkuZm9jdXMoKS5zZWxlY3QoKTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIGlmKHByb2plY3RTZWxlY3Rvci52YWx1ZSA+IDAgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdFByb2plY3RPcHRpb24nKSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgdGhlIHNlbGVjdCBwcm9qZWN0IG9wdGlvbiwgb25jZSB0aGUgdXNlciBzZWxlY3RzIGEgcHJvamVjdFxyXG4gICAge1xyXG4gICAgICAkKCcjc2VsZWN0UHJvamVjdE9wdGlvbicpLnJlbW92ZSgpOyBcclxuICAgIH1cclxuXHJcbiAgICAkLmFqYXgoeyB0eXBlOiAnR0VUJywgdXJsOiAnYXBpL3RyZWU/cHJvamVjdElEPScgKyBwcm9qZWN0U2VsZWN0b3IudmFsdWUgfSkuZG9uZShmdW5jdGlvbihkYXRhKSAgICAgICAgICAgICAgIC8vcmVhZCB0cmVlIGZvciB0aGUgc2VsZWN0ZWQgcHJvamVjdCBmcm9tIHRoZSBkYXRhYmFzZVxyXG4gICAge1xyXG4gICAgICB0cmVlID0gZGF0YTtcclxuICAgICAgZGlzcGxheVNwcmVhZFNoZWV0KCk7XHJcbiAgICAgICQoJyN0cmVlLWNvbnRhaW5lcicpLmhpZGUoKTtcclxuICAgICAgLy9idWlsZFRyZWVWaWV3KHRyZWUpO1xyXG4gICAgfSk7ICBcclxuICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG59O1xyXG5cclxuZnVuY3Rpb24gcHJpbnRQcm9qZWN0KClcclxue1xyXG4gIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHRyZWUsIG51bGwsICdcXHQnKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc3BsYXlSYXdWYWx1ZShmaWVsZE5hbWUsIG5vZGVJRClcclxue1xyXG4gIHZhciBmaWVsZCA9IFByb2plY3QuZ2V0RmllbGQoZmllbGROYW1lKTtcclxuICB2YXIgbm9kZSA9IGZpbmROb2RlSW5UcmVlKHBhcnNlSW50KG5vZGVJRCkpO1xyXG4gIFxyXG4gIGlmKG5vZGUudmFsdWVzICYmIG5vZGUudmFsdWVzW2ZpZWxkLm5hbWVdKVxyXG4gIHtcclxuICAgIGNvbnNvbGUubG9nKG5vZGUudmFsdWVzW2ZpZWxkLm5hbWVdKTtcclxuICAgICQoJyMnICsgZmllbGROYW1lICsgbm9kZUlEKS52YWwobm9kZS52YWx1ZXNbZmllbGQubmFtZV0pO1xyXG4gIH0gIFxyXG4gIGVsc2VcclxuICB7XHJcbiAgICAkKCcjJyArIGZpZWxkTmFtZSArIG5vZGVJRCkudmFsKCcnKTtcclxuICB9XHJcbn1cclxuXHJcbnZhciBnZXREZXB0aCA9IGZ1bmN0aW9uKHJvdylcclxue1xyXG4gIHZhciBjbGFzc2VzID0gcm93LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgYyA9IGNsYXNzZXNbaV07XHJcblxyXG4gICAgaWYoYy5pbmRleE9mKCdkZXB0aCcpID4gLTEpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBwYXJzZUludChjLnJlcGxhY2UoJ2RlcHRoJywgJycpKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZ2V0UGFyZW50SUQgPSBmdW5jdGlvbihyb3cpXHJcbntcclxuICB2YXIgY2xhc3NlcyA9IHJvdy5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGMgPSBjbGFzc2VzW2ldO1xyXG5cclxuICAgIGlmKGMuaW5kZXhPZigncGFyZW50JykgPiAtMSlcclxuICAgIHtcclxuICAgICAgcmV0dXJuIHBhcnNlSW50KGMucmVwbGFjZSgncGFyZW50JywgJycpKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgcmVtb3ZlUGFyZW50ID0gZnVuY3Rpb24ocm93KVxyXG57XHJcbiAgdmFyIGNsYXNzZXMgPSByb3cuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIHZhciBjID0gY2xhc3Nlc1tpXTtcclxuXHJcbiAgICBpZihjLmluZGV4T2YoJ3BhcmVudCcpID4gLTEpXHJcbiAgICB7XHJcbiAgICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKGMpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciBnZXRBbmNlc3RvcnMgPSBmdW5jdGlvbihyb3cpXHJcbntcclxuICB2YXIgYW5jZXN0b3JzID0gW107XHJcbiAgdmFyIGNsYXNzZXMgPSByb3cuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIHZhciBjID0gY2xhc3Nlc1tpXTtcclxuXHJcbiAgICBpZihjLmluZGV4T2YoJ2FuY2VzdG9yJykgPiAtMSlcclxuICAgIHtcclxuICAgICAgYW5jZXN0b3JzLnB1c2goYyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gYW5jZXN0b3JzO1xyXG59O1xyXG5cclxudmFyIHJlbW92ZUFuY2VzdG9ycyA9IGZ1bmN0aW9uKHJvdylcclxue1xyXG4gIHZhciBjbGFzc2VzID0gcm93LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgYyA9IGNsYXNzZXNbaV07XHJcblxyXG4gICAgaWYoYy5pbmRleE9mKCdhbmNlc3RvcicpID4gLTEpXHJcbiAgICB7XHJcbiAgICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKGMpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciBhZGRBbmNlc3RvcnMgPSBmdW5jdGlvbihyb3csIGFuY2VzdG9ycylcclxue1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBhbmNlc3RvcnMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgcm93LmNsYXNzTGlzdC5hZGQoYW5jZXN0b3JzW2ldKTtcclxuICB9XHJcbn07XHJcblxyXG52YXIgc2V0TmV3QW5jZXN0b3JzID0gZnVuY3Rpb24ocm93LCBhbmNlc3RvcnMsIHBhcmVudElEKVxyXG57XHJcbiAgcmVtb3ZlUGFyZW50KHJvdyk7XHJcbiAgcm93LmNsYXNzTGlzdC5hZGQoJ3BhcmVudCcgKyBwYXJlbnRJRCk7XHJcbiAgcmVtb3ZlQW5jZXN0b3JzKHJvdyk7XHJcbiAgYWRkQW5jZXN0b3JzKHJvdywgYW5jZXN0b3JzKTtcclxufTtcclxuXHJcbnZhciBtb3ZlQXNzZW1ibHkgPSBmdW5jdGlvbihtb3ZlZElELCBuZXdQYXJlbnRJRCwgb2xkUGFyZW50SUQsIG5ld1BhcmVudFJvdykgICAgICAgICAgICAgICAgICAvL21vdmUgdGhlIG5vZGUvYXNzZW1ibHkgaW4gdGhlIHZpZXcgYW5kIHRoZSBtb2RlbCwgaW5jbHVkaW5nIGFsbCBkZXNjZW5kYW50IG5vZGVzXHJcbntcclxuICB2YXIgb2xkUGFyZW50Tm9kZSA9IGZpbmROb2RlSW5UcmVlKG9sZFBhcmVudElEKTtcclxuICB2YXIgbmV3UGFyZW50Tm9kZSA9IGZpbmROb2RlSW5UcmVlKG5ld1BhcmVudElEKTtcclxuICB2YXIgbW92ZWROb2RlICAgICA9IGZpbmROb2RlSW5UcmVlKG1vdmVkSUQpO1xyXG5cclxuICBpZihvbGRQYXJlbnROb2RlKVxyXG4gIHtcclxuICAgIGlmKG9sZFBhcmVudE5vZGUubm9kZXMgJiYgb2xkUGFyZW50Tm9kZS5ub2Rlcy5sZW5ndGggPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVtb3ZlIHRoZSBtb3ZlZCBub2RlIGZyb20gaXQncyBvbGQgcGFyZW50IGluIHRoZSBtb2RlbFxyXG4gICAge1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZFBhcmVudE5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAob2xkUGFyZW50Tm9kZS5ub2Rlc1tpXS5pZCA9PT0gbW92ZWRJRClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBvbGRQYXJlbnROb2RlLm5vZGVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBpZiAodHJlZS5ub2Rlc1tpXS5pZCA9PT0gbW92ZWRJRClcclxuICAgICAge1xyXG4gICAgICAgIHRyZWUubm9kZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9ICAgIFxyXG4gIH1cclxuICBcclxuICAvL1RPRE86IGlmIHRoZSBvbGQgcGFyZW50IGlzIGNoaWxkbGVzcyBub3csIHRoZW4gaGlkZSB0aGUgb2xkIHBhcmVudCdzIGV4cGFuZC9jb2xsYXBzZSBpY29uXHJcblxyXG4gIG5ld1BhcmVudE5vZGUubm9kZXMucHVzaChtb3ZlZE5vZGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCBtb3ZlZCBub2RlIHRvIGl0J3MgbmV3IHBhcmVudCBpbiB0aGUgbW9kZWxcclxuXHJcbiAgLy9maXggdXAgdGhlIGFuY2VzdG9ycyBjbGFzc2VzIGZvciB0aGUgbW92ZWQgcm93XHJcbiAgdmFyIG1vdmVkUm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvd2lkJyArIG1vdmVkSUQpO1xyXG4gIHZhciBtb3ZlZERhdGFSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YXJvd2lkJyArIG1vdmVkSUQpO1xyXG4gIHZhciBwYXJlbnREYXRhUm93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGFyb3dpZCcgKyBuZXdQYXJlbnRJRCk7XHJcbiAgXHJcbiAgdmFyIGFuY2VzdG9ycyA9IGdldEFuY2VzdG9ycyhuZXdQYXJlbnRSb3cpO1xyXG4gIGFuY2VzdG9ycy5wdXNoKCdhbmNlc3RvcicgKyBuZXdQYXJlbnRJRCk7XHJcbiAgc2V0TmV3QW5jZXN0b3JzKG1vdmVkUm93LCBhbmNlc3RvcnMsIG5ld1BhcmVudElEKTtcclxuXHJcbiAgLy9maXggdGhlIGRlcHRoIGZvciB0aGUgbW92ZWQgcm93XHJcbiAgdmFyIG9sZERlcHRoID0gZ2V0RGVwdGgobW92ZWRSb3cpO1xyXG4gIHZhciBuZXdEZXB0aCA9IGdldERlcHRoKG5ld1BhcmVudFJvdykrMTtcclxuICBtb3ZlZFJvdy5jbGFzc0xpc3QucmVtb3ZlKCdkZXB0aCcgKyBvbGREZXB0aCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgb2xkIGRlcHRoIGNsYXNzXHJcbiAgbW92ZWRSb3cuY2xhc3NMaXN0LmFkZCgnZGVwdGgnICsgbmV3RGVwdGgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIG5ldyBkZXB0aCBjbGFzc1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBhbmRJRCcgKyBtb3ZlZElEKS5zdHlsZS5tYXJnaW5MZWZ0ID0gKDEwICogbmV3RGVwdGgpICsgJ3B4JzsgICAgICAgICAgICAgICAgICAgICAgICAvL2NoYW5nZSB0aGUgaW5kZW50IG9mIHRoZSBtb3ZlZCBub2RlXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25vZGVJbnB1dCcgKyBtb3ZlZElEKS5zdHlsZS53aWR0aCA9IChERUZBVUxUX05PREVfSU5QVVRfV0lEVEgtbmV3RGVwdGgqMTApICsgJ3B4JzsgICAgIC8vY2hhbmdlIHRoZSBpbmRlbnQgb2YgdGhlIG1vdmVkIG5vZGVcclxuXHJcbiAgLy9tb3ZlIHRoZSB0YWJsZSByb3dzIGluIHRoZSB2aWV3XHJcbiAgJChtb3ZlZERhdGFSb3cpLnJlbW92ZSgpO1xyXG4gICQobW92ZWREYXRhUm93KS5pbnNlcnRBZnRlcihwYXJlbnREYXRhUm93KTsgICBcclxuICBcclxuICBpZihtb3ZlZE5vZGUubm9kZXMgJiYgbW92ZWROb2RlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gbW92ZWROb2RlLm5vZGVzLmxlbmd0aC0xOyBpID49IDA7IGktLSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdGVyYXRlIGJhY2t3YXJkcyB0byBwZXJzZXJ2ZSB0aGUgb3JkZXIgb2YgdGhlIGNoaWxkIG5vZGVzXHJcbiAgICB7XHJcbiAgICAgIG1vdmVOb2RlKG1vdmVkTm9kZS5ub2Rlc1tpXSwgbW92ZWROb2RlLm5vZGVzW2ldLmlkLCBtb3ZlZElELCBuZXdEZXB0aCsxLCBhbmNlc3RvcnMpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciBtb3ZlTm9kZSA9IGZ1bmN0aW9uKG5vZGUsIG5vZGVJRCwgcGFyZW50SUQsIG5ld0RlcHRoLCBhbmNlc3RvcnMpXHJcbntcclxuICB2YXIgbm9kZVJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb3dpZCcgKyBub2RlSUQpO1xyXG4gIHZhciBub2RlRGF0YVJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRhcm93aWQnICsgbm9kZUlEKTtcclxuICBcclxuICB2YXIgcGFyZW50Um93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvd2lkJyArIHBhcmVudElEKTtcclxuICB2YXIgcGFyZW50RGF0YVJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRhcm93aWQnICsgcGFyZW50SUQpO1xyXG4gIFxyXG4gIHZhciBvbGREZXB0aCA9IGdldERlcHRoKG5vZGVSb3cpO1xyXG5cclxuICB2YXIgbmV3QW5jZXN0b3JzID0gYW5jZXN0b3JzLnNsaWNlKDApO1xyXG4gIG5ld0FuY2VzdG9ycy5wdXNoKCdhbmNlc3RvcicgKyBwYXJlbnRJRCk7XHJcbiAgc2V0TmV3QW5jZXN0b3JzKG5vZGVSb3csIG5ld0FuY2VzdG9ycywgcGFyZW50SUQpO1xyXG5cclxuICBub2RlUm93LmNsYXNzTGlzdC5yZW1vdmUoJ2RlcHRoJyArIG9sZERlcHRoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSBvbGQgZGVwdGggY2xhc3NcclxuICBub2RlUm93LmNsYXNzTGlzdC5hZGQoJ2RlcHRoJyArIG5ld0RlcHRoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCBuZXcgZGVwdGggY2xhc3NcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kSUQnICsgbm9kZUlEKS5zdHlsZS5tYXJnaW5MZWZ0ID0gKDEwICogbmV3RGVwdGgpICsgJ3B4JzsgICAvL2NoYW5nZSB0aGUgaW5kZW50IG9mIHRoZSBtb3ZlZCBub2RlXHJcblxyXG4gICQobm9kZVJvdykucmVtb3ZlKCk7XHJcbiAgJChub2RlUm93KS5pbnNlcnRBZnRlcihwYXJlbnRSb3cpO1xyXG4gIFxyXG4gICQobm9kZURhdGFSb3cpLnJlbW92ZSgpO1xyXG4gICQobm9kZURhdGFSb3cpLmluc2VydEFmdGVyKHBhcmVudERhdGFSb3cpOyAgXHJcblxyXG4gIGlmKG5vZGUubm9kZXMgJiYgbm9kZS5ub2Rlcy5sZW5ndGggPiAwKVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSA9IG5vZGUubm9kZXMubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdGVyYXRlIGJhY2t3YXJkcyB0byBwZXJzZXJ2ZSB0aGUgb3JkZXIgb2YgdGhlIGNoaWxkIG5vZGVzXHJcbiAgICB7XHJcbiAgICAgIG1vdmVOb2RlKG5vZGUubm9kZXNbaV0sIG5vZGUubm9kZXNbaV0uaWQsIG5vZGVJRCwgbmV3RGVwdGgrMSwgbmV3QW5jZXN0b3JzKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZmluZE5vZGVJblRyZWUgPSBmdW5jdGlvbihub2RlSUQpXHJcbntcclxuICBpZih0cmVlLm5vZGVzICYmIHRyZWUubm9kZXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdHJlZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgICB2YXIgZm91bmROb2RlID0gZmluZE5vZGUobm9kZUlELCB0cmVlLm5vZGVzW2ldKTtcclxuXHJcbiAgICAgICAgaWYoZm91bmROb2RlKSB7IHJldHVybiBmb3VuZE5vZGU7IH1cclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZmluZE5vZGUgPSBmdW5jdGlvbihub2RlSUQsIG5vZGUpXHJcbntcclxuICBpZihub2RlLmlkID09PSBub2RlSUQpXHJcbiAge1xyXG4gICAgcmV0dXJuIG5vZGU7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBpZihub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMClcclxuICAgIHtcclxuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgZm91bmROb2RlID0gZmluZE5vZGUobm9kZUlELCBub2RlLm5vZGVzW2ldKTtcclxuXHJcbiAgICAgICAgaWYoZm91bmROb2RlKSB7IHJldHVybiBmb3VuZE5vZGU7IH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciBmaW5kUGFyZW50SW5UcmVlID0gZnVuY3Rpb24obm9kZUlEKVxyXG57XHJcbiAgaWYodHJlZS5ub2RlcyAmJiB0cmVlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kUGFyZW50ID0gZmluZFBhcmVudChub2RlSUQsIHRyZWUubm9kZXNbaV0sIG51bGwpO1xyXG5cclxuICAgICAgICBpZihmb3VuZFBhcmVudCkgeyByZXR1cm4gZm91bmRQYXJlbnQ7IH1cclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZmluZFBhcmVudCA9IGZ1bmN0aW9uKG5vZGVJRCwgbm9kZSwgcGFyZW50KVxyXG57XHJcbiAgaWYobm9kZS5pZCA9PT0gbm9kZUlEKVxyXG4gIHtcclxuICAgIHJldHVybiBwYXJlbnQ7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBpZihub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMClcclxuICAgIHtcclxuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgZm91bmRQYXJlbnQgPSBmaW5kUGFyZW50KG5vZGVJRCwgbm9kZS5ub2Rlc1tpXSwgbm9kZSk7XHJcblxyXG4gICAgICAgIGlmKGZvdW5kUGFyZW50KSB7IHJldHVybiBmb3VuZFBhcmVudDsgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIGRlbGV0ZU5vZGUgPSBmdW5jdGlvbihlbClcclxue1xyXG4gIHZhciByb3cgPSBnZXRBbmNlc3RvclRhZyhlbCwgJ3RyJyk7XHJcbiAgdmFyIG5vZGVJRCA9IHBhcnNlSW50KHJvdy5pZC5yZXBsYWNlKCdyb3dpZCcsICcnKSk7XHJcbiAgdmFyIG5vZGUgPSBmaW5kTm9kZUluVHJlZShub2RlSUQpO1xyXG4gIHZhciBwYXJlbnROb2RlID0gZmluZFBhcmVudEluVHJlZShub2RlSUQpO1xyXG4gIFxyXG4gIC8vcmVtb3ZlIHRoZSBub2RlIGZyb20gdGhlIHZpZXdcclxuICByZW1vdmVOb2RlUm93KG5vZGUpO1xyXG4gIFxyXG4gIC8vVE9ETzogaWYgcGFyZW50IGlzIGNoaWxkbGVzcyBub3csIHRoZW4gaGlkZSB0aGUgcGFyZW50J3MgZXhwYW5kL2NvbGxhcHNlIGljb24gXHJcbiAgXHJcbiAgLy9yZW1vdmUgdGhlIG5vZGUgZnJvbSB0aGUgbW9kZWxcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgcGFyZW50Tm9kZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICBpZihwYXJlbnROb2RlLm5vZGVzW2ldLmlkID09IG5vZGVJRClcclxuICAgIHtcclxuICAgICAgcGFyZW50Tm9kZS5ub2Rlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciByZW1vdmVOb2RlUm93ID0gZnVuY3Rpb24obm9kZSlcclxue1xyXG4gIHZhciByb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm93aWQnICsgbm9kZS5pZCk7XHJcbiAgJChyb3cpLnJlbW92ZSgpO1xyXG4gIFxyXG4gIGlmKG5vZGUubm9kZXMgJiYgbm9kZS5ub2Rlcy5sZW5ndGggPiAwKVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICByZW1vdmVOb2RlUm93KG5vZGUubm9kZXNbaV0pO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciBjb3B5Tm9kZSA9IGZ1bmN0aW9uKHNvdXJjZSlcclxue1xyXG4gIHZhciBub2RlSW5kZXg7XHJcbiAgdmFyIG5ld1Jvd01hcmt1cDtcclxuICB2YXIgc291cmNlUm93ID0gZ2V0QW5jZXN0b3JUYWcoc291cmNlLCAndHInKTtcclxuICB2YXIgbm9kZUlEID0gcGFyc2VJbnQoc291cmNlUm93LmlkLnJlcGxhY2UoJ3Jvd2lkJywgJycpKTtcclxuICBcclxuICB2YXIgc291cmNlTm9kZSA9IGZpbmROb2RlSW5UcmVlKG5vZGVJRCk7XHJcbiAgdmFyIHNvdXJjZVBhcmVudE5vZGUgPSBmaW5kUGFyZW50SW5UcmVlKG5vZGVJRCk7XHJcbiAgXHJcbiAgdmFyIG5ld05vZGUgPSBqUXVlcnkuZXh0ZW5kKHRydWUsIHt9LCBzb3VyY2VOb2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2xvbmUgdGhlIHNvdXJjZSBub2RlXHJcbiAgYXNzaWduTmV3Tm9kZUlEcyhuZXdOb2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYXNzaWduIHVuaXF1ZSBpZHMgdG8gZWFjaCBub2RlIGluIHRoZSBjbG9uZVxyXG4gIFxyXG4gIGlmKHNvdXJjZVBhcmVudE5vZGUgPT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2hhbmRsZSBjYXNlIHdoZXJlIHRoZSB1c2VyIHRyaWVzIHRvIGNvcHkgYSB0b3AgbGV2ZWwgbm9kZVxyXG4gIHtcclxuICAgIG5vZGVJbmRleCA9IGdldE5vZGVJbmRleCh0cmVlLm5vZGVzLCBzb3VyY2VOb2RlLmlkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICB0cmVlLm5vZGVzLnNwbGljZShub2RlSW5kZXgsIDAsIG5ld05vZGUpO1xyXG4gICAgbmV3Um93TWFya3VwID0gYWRkUm93KG5ld05vZGUsIDAsICcnLCAwKTsgICAgXHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICBub2RlSW5kZXggPSBnZXROb2RlSW5kZXgoc291cmNlUGFyZW50Tm9kZS5ub2Rlcywgc291cmNlTm9kZS5pZCk7XHJcbiAgICBzb3VyY2VQYXJlbnROb2RlLm5vZGVzLnNwbGljZShub2RlSW5kZXgsIDAsIG5ld05vZGUpO1xyXG4gICAgbmV3Um93TWFya3VwID0gZ2V0QXNzZW1ibHlNYXJrdXAobmV3Tm9kZS5pZCwgc291cmNlTm9kZS5pZCwgZ2V0RGVwdGgoc291cmNlUm93KSk7XHJcbiAgfVxyXG4gIFxyXG4gICQobmV3Um93TWFya3VwKS5pbnNlcnRCZWZvcmUoc291cmNlUm93KTtcclxuICB2YXIgbmV3Um93ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvd2lkJyArIG5ld05vZGUuaWQpO1xyXG4gIFJFRElQUy5kcmFnLmVuYWJsZURpdnMoJ2luaXQnLCBuZXdSb3cuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpKTtcclxufTtcclxuXHJcbnZhciBhc3NpZ25OZXdOb2RlSURzID0gZnVuY3Rpb24obm9kZSlcclxue1xyXG4gIG5vZGUuaWQgPSB0cmVlLm5leHROb2RlSUQrKztcclxuICBcclxuICBpZihub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbm9kZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgYXNzaWduTmV3Tm9kZUlEcyhub2RlLm5vZGVzW2ldKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZ2V0Tm9kZUluZGV4ID0gZnVuY3Rpb24obm9kZXMsIGlkKVxyXG57XHJcbiAgdmFyIGluZGV4ZXMgPSAkLm1hcChub2RlcywgZnVuY3Rpb24ob2JqLCBpbmRleCkgXHJcbiAge1xyXG4gICAgaWYob2JqLmlkID09IGlkKSBcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBpbmRleGVzWzBdO1xyXG59O1xyXG5cclxudmFyIGdldEFuY2VzdG9yVGFnID0gZnVuY3Rpb24gdXBUbyhlbCwgdGFnTmFtZSkgXHJcbntcclxuICB0YWdOYW1lID0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICB3aGlsZSAoZWwgJiYgZWwucGFyZW50Tm9kZSkgXHJcbiAge1xyXG4gICAgZWwgPSBlbC5wYXJlbnROb2RlO1xyXG4gICAgaWYgKGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IHRhZ05hbWUpIFxyXG4gICAge1xyXG4gICAgICByZXR1cm4gZWw7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gdG9nZ2xlKGVsKVxyXG57XHJcbiAgdmFyIHJvdyA9IGdldEFuY2VzdG9yVGFnKGVsLCAndHInKTtcclxuICB2YXIgaWQgPSBwYXJzZUludChyb3cuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gIHZhciBpY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ljb24nICsgaWQpO1xyXG5cclxuICBpZihyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2xsYXBzZWQnKSlcclxuICB7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFyZW50JyArIGlkKTtcclxuICAgIHZhciBjaGlsZHJlbkljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmljb25wJyArIGlkKTtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgY2hpbGRyZW5baV0uY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuSWNvbnMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGlmKGNoaWxkcmVuSWNvbnNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdnbHlwaGljb24tY2hldnJvbi1kb3duJykpXHJcbiAgICAgIHtcclxuICAgICAgICBjaGlsZHJlbkljb25zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2dseXBoaWNvbi1jaGV2cm9uLWRvd24nKTtcclxuICAgICAgICBjaGlsZHJlbkljb25zW2ldLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Jyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2dseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Jyk7XHJcbiAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbi1jaGV2cm9uLWRvd24nKTtcclxuICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzZWQnKTtcclxuICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdmFyIGRlc2NlbmRhbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFuY2VzdG9yJyArIGlkKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlc2NlbmRhbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBkZXNjZW5kYW50c1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG5cclxuICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZ2x5cGhpY29uLWNoZXZyb24tZG93bicpO1xyXG4gICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdnbHlwaGljb24tY2hldnJvbi1yaWdodCcpO1xyXG4gICAgcm93LmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGVkJyk7XHJcbiAgICByb3cuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7XHJcbiAgfVxyXG59XHJcblxyXG52YXIgdXBkYXRlTm9kZU5hbWUgPSBmdW5jdGlvbihlbClcclxue1xyXG4gIHZhciByb3cgPSBnZXRBbmNlc3RvclRhZyhlbCwgJ3RyJyk7XHJcbiAgdmFyIG5vZGVJRCA9IHBhcnNlSW50KHJvdy5pZC5yZXBsYWNlKCdyb3dpZCcsJycpKTtcclxuICB2YXIgbm9kZSA9IGZpbmROb2RlSW5UcmVlKG5vZGVJRCk7XHJcbiAgXHJcbiAgbm9kZS5uYW1lID0gZWwudmFsdWU7XHJcbiAgJCgnI25vZGVJbnB1dCcgKyBub2RlSUQpLmF0dHIoJ3ZhbHVlJywgbm9kZS5uYW1lKTsgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBpbiB0aGUgRE9NLCBzbyB0aGF0IHdoZW4gd2UgZHJhZy9tb3ZlIHRoZSByb3csIHRoZSB2YWx1ZSBpcyBjb3JyZWN0XHJcbn07XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVGaWVsZFZhbHVlKGZpZWxkLCBpZClcclxue1xyXG4gIHVwZGF0ZU5vZGVWYWx1ZUluVHJlZShpZCwgZmllbGQsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZpZWxkICsgaWQpLnZhbHVlKTtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgYWdncmVnYXRlX2FueSh0cmVlLm5vZGVzW2ldLCBmaWVsZCk7XHJcbiAgfSBcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlTm9kZVZhbHVlSW5UcmVlKGlkLCBmaWVsZCwgdmFsdWUpXHJcbntcclxuICB2YXIgbm9kZSA9IG51bGw7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIG5vZGUgPSB0cmVlLm5vZGVzW2ldO1xyXG4gICAgXHJcbiAgICBpZihub2RlLmlkID09IGlkKVxyXG4gICAge1xyXG4gICAgICBpZighbm9kZS52YWx1ZXMpIHsgbm9kZS52YWx1ZXMgPSB7fTsgfVxyXG4gICAgICBub2RlLnZhbHVlc1tmaWVsZF0gPSB2YWx1ZTsgICAgXHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7ICAgIFxyXG4gICAgICB1cGRhdGVOb2RlVmFsdWUoaWQsIG5vZGUsIGZpZWxkLCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVOb2RlVmFsdWUoaWQsIG5vZGUsIGZpZWxkLCB2YWx1ZSlcclxue1xyXG4gIHZhciBmb3VuZCA9IG51bGw7XHJcblxyXG4gIGlmKG5vZGUgJiYgbm9kZS5pZCA9PSBpZClcclxuICB7XHJcbiAgICByZXR1cm4gbm9kZTtcclxuICB9XHJcblxyXG4gIGlmKG5vZGUgJiYgbm9kZS5ub2RlcyAmJiBub2RlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGZvdW5kID0gdXBkYXRlTm9kZVZhbHVlKGlkLCBub2RlLm5vZGVzW2ldLCBmaWVsZCwgdmFsdWUpO1xyXG5cclxuICAgICAgaWYoZm91bmQpXHJcbiAgICAgIHtcclxuICAgICAgICBpZighZm91bmQudmFsdWVzKSB7IGZvdW5kLnZhbHVlcyA9IHt9OyB9XHJcbiAgICAgICAgZm91bmQudmFsdWVzW2ZpZWxkXSA9IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG51bGw7XHJcbn0iLCJ2YXIgRmllbGQgPSBmdW5jdGlvbihuYW1lKVxyXG57XHJcbiAgdGhpcy5uYW1lID0gbmFtZTtcclxuICB0aGlzLmRhdGF0eXBlID0gRmllbGQuTlVNQkVSO1xyXG4gIHRoaXMuZm9ybWF0ID0gRmllbGQuTlVNQkVSX0ZPUk1BVDtcclxuICB0aGlzLnByZWNpc2lvbiA9IDI7XHJcbiAgdGhpcy5hZ2dfdHlwZSA9IEZpZWxkLk5PX0FHR1JFR0FUSU9OO1xyXG4gIHRoaXMuYWdnX3F0eV9maWVsZCA9IG51bGw7XHJcbn07XHJcblxyXG5GaWVsZC5OVU1CRVIgPSAnMCc7XHJcbkZpZWxkLlNUUklORyA9ICcxJztcclxuRmllbGQuQ0hPSUNFID0gJzInO1xyXG5cclxuRmllbGQuTk9fQUdHUkVHQVRJT04gPSAnMCc7XHJcbkZpZWxkLlNVTV9BTllfQUdHUkVHQVRJT04gPSAnMSc7XHJcblxyXG5GaWVsZC5OVU1CRVJfRk9STUFUID0gJzAnO1xyXG5GaWVsZC5QRVJDRU5UX0ZPUk1BVCA9ICcxJztcclxuRmllbGQuU0NJRU5USUZJQ19GT1JNQVQgPSAnMic7XHJcblxyXG5GaWVsZC5mb3JtYXRWYWx1ZSA9IGZ1bmN0aW9uKGZpZWxkLCB2YWx1ZSlcclxue1xyXG4gIGlmKGZpZWxkLmRhdGF0eXBlID09PSBGaWVsZC5OVU1CRVIpXHJcbiAge1xyXG4gICAgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5OVU1CRVJfRk9STUFUKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gdmFsdWUudG9GaXhlZChmaWVsZC5wcmVjaXNpb24pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihmaWVsZC5mb3JtYXQgPT09IEZpZWxkLlBFUkNFTlRfRk9STUFUKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gKDEwMC4wICogdmFsdWUpLnRvRml4ZWQoZmllbGQucHJlY2lzaW9uKSArICclJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYoZmllbGQuZm9ybWF0ID09PSBGaWVsZC5TQ0lFTlRJRklDX0ZPUk1BVClcclxuICAgIHtcclxuICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkudG9FeHBvbmVudGlhbChmaWVsZC5wcmVjaXNpb24pO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlIGlmKGZpZWxkLmRhdGF0eXBlID09PSBGaWVsZC5TVFJJTkcpXHJcbiAge1xyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG4gIH0gXHJcbiAgZWxzZSBpZihmaWVsZC5kYXRhdHlwZSA9PT0gRmllbGQuQ0hPSUNFKVxyXG4gIHtcclxuICAgIC8vVE9ETzogaW1wbGVtZW50XHJcbiAgfSAgICAgIFxyXG59OyAgIiwidmFyIE1lbnUgPSBmdW5jdGlvbigpXHJcbntcclxuICB2YXIgaXRlbXMgPSBbXTtcclxuICBNZW51Lm1lbnUgPSB0aGlzO1xyXG59O1xyXG5cclxuTWVudS5tZW51O1xyXG5cclxuTWVudS5oYW5kbGVDbGljayA9IGZ1bmN0aW9uKGlkKVxyXG57XHJcbiAgdmFyIGNsaWNrZWQgPSBNZW51Lm1lbnUuZ2V0TWVudUl0ZW0oaWQsIE1lbnUubWVudSk7XHJcbiAgdmFyIHBhcmVudCA9IE1lbnUubWVudS5nZXRNZW51SXRlbVBhcmVudChpZCwgTWVudS5tZW51KTtcclxuXHJcbiAgaWYoY2xpY2tlZC5maWVsZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZSBtZW51IGl0ZW0gZG9lc24ndCBoYXZlIGEgZmllbGQgdGhlbiBpZ25vcmUgaXRcclxuICB7XHJcbiAgICB2YXIgZmllbGQgPSBQcm9qZWN0LmdldEZpZWxkKGNsaWNrZWQuZmllbGQubmFtZSk7XHJcbiAgICBmaWVsZFtjbGlja2VkLnZhck5hbWVdID0gY2xpY2tlZC52YWx1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2V0IHZhbHVlIGZvciB0aGUgZmllbGQgaW4gdGhlIG1vZGVsIGJhc2VkIG9uIHRoZSBjbGlja2VkIG1lbnUgaXRlbVxyXG4gIFxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHBhcmVudC5pdGVtcy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jbGVhciB0aGUgY2hlY2ttYXJrcyBmb3IgYWxsIGl0ZW0gb24gdGhlIHNhbWUgbWVudSBsZXZlbFxyXG4gICAge1xyXG4gICAgICAkKCcjbWVudUl0ZW0nICsgcGFyZW50Lml0ZW1zW2ldLmlkKS5yZW1vdmVDbGFzcygnY2hlY2tlZE1lbnVJdGVtJykuYWRkQ2xhc3MoJ3VuY2hlY2tlZE1lbnVJdGVtJyk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAkKCcjbWVudUl0ZW0nICsgaWQpLnJlbW92ZUNsYXNzKCd1bmNoZWNrZWRNZW51SXRlbScpLmFkZENsYXNzKCdjaGVja2VkTWVudUl0ZW0nKTsgICAgICAgICAgICAgICAgICAgICAvL2NoZWNrIHRoZSBpdGVtIHRoYXQgd2FzIGNsaWNrZWRcclxuICAgIFxyXG4gICAgaWYocGFyZW50ID09PSBNZW51Lm1lbnUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGlzIGlzIGEgdG9wIGxldmVsIG1lbnUgaXRlbSB0aGVuIHVwZGF0ZSB0aGUgZm9ybWF0dGluZywgc2luY2Ugd2Ugb25seSB3YW50IHRvIGRvIHRoaXMgb25jZSBwZXIgY2xpY2tcclxuICAgIHtcclxuICAgICAgUHJvamVjdC51cGRhdGVGaWVsZEZvcm1hdHRpbmcoZmllbGQpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbk1lbnUucHJvdG90eXBlLmdldE1lbnVJdGVtID0gZnVuY3Rpb24oaWQsIG1lbnVJdGVtKVxyXG57XHJcbiAgaWYoaWQgPT09IG1lbnVJdGVtLmlkKVxyXG4gIHtcclxuICAgIHJldHVybiBtZW51SXRlbTtcclxuICB9XHJcbiAgZWxzZSBpZihtZW51SXRlbS5pdGVtcyAmJiBtZW51SXRlbS5pdGVtcy5sZW5ndGggPiAwKVxyXG4gIHtcclxuICAgIHZhciBmb3VuZDtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBtZW51SXRlbS5pdGVtcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgZm91bmQgPSB0aGlzLmdldE1lbnVJdGVtKGlkLCBtZW51SXRlbS5pdGVtc1tpXSk7XHJcbiAgICAgIFxyXG4gICAgICBpZihmb3VuZClcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbk1lbnUucHJvdG90eXBlLmdldE1lbnVJdGVtUGFyZW50ID0gZnVuY3Rpb24oaWQsIG1lbnVJdGVtKVxyXG57XHJcbiAgaWYobWVudUl0ZW0uaXRlbXMgJiYgbWVudUl0ZW0uaXRlbXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbWVudUl0ZW0uaXRlbXMubGVuZ3RoOyBpKyspXHJcbiAgICB7IFxyXG4gICAgICBpZihtZW51SXRlbS5pdGVtc1tpXS5pZCA9PT0gaWQpXHJcbiAgICAgIHtcclxuICAgICAgICByZXR1cm4gbWVudUl0ZW07XHJcbiAgICAgIH1cclxuICAgICAgZWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kID0gdGhpcy5nZXRNZW51SXRlbVBhcmVudChpZCwgbWVudUl0ZW0uaXRlbXNbaV0pO1xyXG4gICAgICAgIGlmKGZvdW5kKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn07IiwidmFyIE1lbnVJdGVtID0gZnVuY3Rpb24oZGlzcGxheSwgdmFsdWUsIHZhck5hbWUsIGZpZWxkKVxyXG57XHJcbiAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTtcclxuICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgdGhpcy52YXJOYW1lID0gdmFyTmFtZTtcclxuICB0aGlzLmZpZWxkID0gZmllbGQ7XHJcbiAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gIHRoaXMuaWQgPSBNZW51SXRlbS5pZCsrO1xyXG4gIHRoaXMucGFyZW50ID0gLTE7XHJcblxyXG4gIGlmKGZpZWxkKVxyXG4gIHtcclxuICAgIHRoaXMuY2hlY2tlZCA9IGZpZWxkW3Zhck5hbWVdID09PSB2YWx1ZTtcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIHRoaXMuY2hlY2tlZCA9IGZhbHNlO1xyXG4gIH1cclxufTtcclxuXHJcbk1lbnVJdGVtLmlkID0gMDsiLCJmdW5jdGlvbiBQcm9qZWN0KClcclxue1xyXG4gIFxyXG59XHJcblxyXG5Qcm9qZWN0LmdldEZpZWxkID0gZnVuY3Rpb24obmFtZSlcclxue1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLmZpZWxkcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgZmllbGQgPSB0cmVlLmZpZWxkc1tpXTtcclxuICAgIGlmKGZpZWxkLm5hbWUgPT09IG5hbWUpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBmaWVsZDtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcblByb2plY3Quc2F2ZVRvRGF0YWJhc2UgPSBmdW5jdGlvbigpXHJcbntcclxuICAkLmFqYXgoeyB0eXBlOiAnUE9TVCcsIHVybDogJy9hcGkvdHJlZScsIGRhdGFUeXBlOiAnanNvbicsIGRhdGE6IHsganNvbjpKU09OLnN0cmluZ2lmeSh0cmVlKSB9IH0pO1xyXG59O1xyXG5cclxuUHJvamVjdC51cGRhdGVGaWVsZEZvcm1hdHRpbmcgPSBmdW5jdGlvbihmaWVsZCkgICAgICAgICAgICAgICAgIC8vZm9ybWF0cyBhbGwgdGhlIHZhbHVlcyBmb3IgdGhlIGZpZWxkICh0aGUgZW50aXJlIGNvbHVtbilcclxue1xyXG4gICQoJy5maWVsZElucHV0JyArIGZpZWxkLm5hbWUpLmVhY2goZnVuY3Rpb24oaW5kZXgpIFxyXG4gIHtcclxuICAgIHZhciBub2RlSUQgPSAkKHRoaXMpLmF0dHIoJ2lkJykucmVwbGFjZShmaWVsZC5uYW1lLCAnJyk7XHJcbiAgICB2YXIgbm9kZSA9IGZpbmROb2RlSW5UcmVlKHBhcnNlSW50KG5vZGVJRCkpO1xyXG4gICAgXHJcbiAgICBpZihub2RlLnZhbHVlcylcclxuICAgIHtcclxuICAgICAgdmFyIHZhbHVlID0gTnVtYmVyKG5vZGUudmFsdWVzW2ZpZWxkLm5hbWVdKTsgICAgICAgICAgICAgIC8vZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBtb2RlbFxyXG4gICAgICAkKHRoaXMpLnZhbChGaWVsZC5mb3JtYXRWYWx1ZShmaWVsZCwgdmFsdWUpKTsgICAgICAgICAgICAgLy9mb3JtYXQgdGhlIHZhbHVlIGFuZCBkaXNwbGF5IGl0XHJcbiAgICB9XHJcbn0pO1xyXG59O1xyXG5cclxuUHJvamVjdC5zd2l0Y2hWaWV3ID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgaWYoJCgnI3NwcmVhZFNoZWV0VmlldycpLmxlbmd0aClcclxuICB7XHJcbiAgICAkKCcjc3ByZWFkU2hlZXRWaWV3JykucmVtb3ZlKCk7XHJcbiAgICBkaXNwbGF5VHJlZVZpZXcodHJlZSk7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICAkKCcjdHJlZS1jb250YWluZXInKS5yZW1vdmUoKTtcclxuICAgIGRpc3BsYXlTcHJlYWRTaGVldCgpO1xyXG4gIH1cclxufTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=