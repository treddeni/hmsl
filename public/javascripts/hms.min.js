function aggregate_any(e,a){if(e.nodes&&0!==e.nodes.length){for(var n=0,l=0;l<e.nodes.length;l++)n+=aggregate_any(e.nodes[l],a);return e.values||(e.values={}),e.values[a]=n,document.getElementById(a+e.id).value=n,n}return e.values&&e.values[a]?parseFloat(e.values[a]):0}
var DOWN_ARROW_IMAGE_PATH="images/down-arrow.png",CHECK_MARK_IMAGE_PATH="images/checkmark.png",BLANK_MARK_IMAGE_PATH="images/blankmark.png";
"use strict";var REDIPS=REDIPS||{};REDIPS.drag=function(){var e,o,t,n,r,d,l,i,a,s,c,f,p,g,u,v,y,m,h,w,E,b,D,I,S,R,P,x,N,T,C,B,j,k=null,L={width:0,height:0},M={width:null,height:null,container:[],obj:null},O={page:{x:0,y:0},div:{x:0,y:0},flag:{x:0,y:0}},Y=[],H=[],W=null,_=null,X={x:0,y:0},A={x:0,y:0,value:7,flag:!1},V=!1,z=!1,F=null,q=null,K=null,$=null,G=null,J=null,Q=!1,U=!1,Z={colorTd:"#FFCFAE",colorTr:"#9BB3DA"},ee={enable:!0,bound:25,speed:20},oe={borderDisabled:"dotted",opacityDisabled:"",rowEmptyColor:"white"},te={},ne={keyDiv:!1,keyRow:!1,sendBack:!1,drop:!1},re={cloned:function(){},clonedDropped:function(){},clonedEnd1:function(){},clonedEnd2:function(){},dropped:function(){},droppedBefore:function(){},finish:function(){},notCloned:function(){},notMoved:function(){},rowChanged:function(){},rowClicked:function(){},rowCloned:function(){},rowDropped:function(){},rowDroppedBefore:function(){},rowDroppedSource:function(){},rowMoved:function(){},rowNotCloned:function(){},rowNotMoved:function(){}};return e=function(){if(W=document.getElementById("redips-drag"),j=m(),!document.getElementById("redips_clone")){var e=document.createElement("div");e.id="redips_clone",e.style.width=e.style.height="1px",W.appendChild(e)}o("init",".redips-drag"),T=document.getElementById("treeTable"),T.redips={},c(),REDIPS.event.add(window,"resize",c),REDIPS.event.add(window,"scroll",y)},n=function(e){var o,t,n,l,i=e||window.event;if(i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation(),V=i.shiftKey,window.getSelection)window.getSelection().removeAllRanges();else if(document.selection&&"Text"===document.selection.type)try{document.selection.empty()}catch(a){}return n=X.x=i.clientX,l=X.y=i.clientY,A.x=n,A.y=l,A.flag=!1,REDIPS.drag.objOld=U=Q||this,REDIPS.drag.obj=Q=this,z=Q.className.indexOf("redips-clone")>-1,REDIPS.drag.obj=Q=R(Q),y(),F=$=null,f(),K=q=F,J=G=$,REDIPS.drag.event.rowClicked(te.current),null!==F&&null!==$||(f(),K=q=F,J=G=$,null!==F&&null!==$)?(C=B=!1,REDIPS.event.add(document,"mousemove",d),REDIPS.event.add(document,"mouseup",r),null!==F&&(N=u(F)),t=D(T,"position"),"fixed"!==t&&(t=D(T.parentNode,"position")),o=v(Q,t),k=[l-o[0],o[1]-n,o[2]-l,n-o[3]],!1):!0},R=function(e){var o,t,n;return"DIV"===e.nodeName?(n=e,e=I("TR",e),void 0===e.redips&&(e.redips={}),e.redips.div=n,e):(t=e,o=document.createElement("table"),o.innerHTML='<tr id="'+t.id+'" class="'+t.classList+'">'+t.innerHTML+"</tr>",o.redips={},o.redips.sourceRow=t,E(t,o.rows[0]),document.getElementById("redips_clone").appendChild(o),o)},P=function(e){var o,t,n;n=function(e){var o;void 0!==e.redips&&e.redips.emptyRow?S(e,"empty",REDIPS.drag.style.rowEmptyColor):(o=I("TABLE",e),o.deleteRow(e.rowIndex))};var r=Q;e>T.rows.length-1&&(e=T.rows.length-1);var d=T.rows[e];t=r.getElementsByTagName("tr")[0],r.parentNode.removeChild(r),o=REDIPS.drag.event.rowDroppedBefore(T,r.redips.sourceRow.rowIndex),o!==!1&&(e<T.rows.length?d.parentNode.insertBefore(t,d.nextSibling):(d.parentNode.appendChild(t),d=T.rows[0]),B||n(r.redips.sourceRow),delete t.redips.emptyRow,REDIPS.drag.event.rowDropped(d))},r=function(e){var o,t,n,a,s,c,f=e||window.event;if(n=f.clientX,a=f.clientY,O.flag.x=O.flag.y=0,REDIPS.event.remove(document,"mousemove",d),REDIPS.event.remove(document,"mouseup",r),W.onselectstart=null,i(Q),M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,O.flag.x=O.flag.y=0,null===F||null===$)REDIPS.drag.event.notMoved();else{if(REDIPS.drag.td.target=te.target=T.rows[F].cells[$],g(F,N),o=F,C)if(K===o){for(t=Q.getElementsByTagName("tr")[0],U.style.backgroundColor=t.style.backgroundColor,s=0;s<t.cells.length;s++)U.cells[s].style.backgroundColor=t.cells[s].style.backgroundColor;Q.parentNode.removeChild(Q),delete U.redips.emptyRow,B?REDIPS.drag.event.rowNotCloned():REDIPS.drag.event.rowDroppedSource(te.target)}else P(o);else REDIPS.drag.event.rowNotMoved();B||A.flag?B&&K===F&&J===$?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):B&&REDIPS.drag.clone.drop===!1&&(n<T.redips.offset[3]||n>T.redips.offset[1]||a<T.redips.offset[0]||a>T.redips.offset[2])?(Q.parentNode.removeChild(Q),Y[U.id]-=1,REDIPS.drag.event.notCloned()):(c=REDIPS.drag.event.droppedBefore(te.target),l(c)):REDIPS.drag.event.notMoved(),y(),REDIPS.drag.event.finish()}q=G=null},l=function(e){var o,t=null;if(e!==!1){if(ne.sendBack===!0){o=te.target.getElementsByTagName("DIV");for(var n=0;n<o.length;n++)if(Q!==o[n]&&0===Q.id.indexOf(o[n].id)){t=o[n];break}if(t)return b(t,1),void Q.parentNode.removeChild(Q)}te.target.appendChild(Q),a(Q),REDIPS.drag.event.dropped(te.target),B&&(REDIPS.drag.event.clonedDropped(te.target),b(U,-1))}else B&&Q.parentNode&&Q.parentNode.removeChild(Q)},a=function(e,o){e.onmousedown=o===!1?null:n},i=function(e){e.style.top="",e.style.left="",e.style.position="",e.style.zIndex=""},d=function(e){var o,t,n,r,d,l,i,a=e||window.event,c=REDIPS.drag.scroll.bound;if(t=X.x=a.clientX,n=X.y=a.clientY,r=Math.abs(A.x-t),d=Math.abs(A.y-n),C||((z||REDIPS.drag.clone.keyRow===!0&&V)&&(B=!0),REDIPS.drag.objOld=U=Q,REDIPS.drag.obj=Q=R(Q),Q.style.zIndex=999,Q.style.position="fixed",y(),f(),B?REDIPS.drag.event.rowCloned():REDIPS.drag.event.rowMoved(),p(),t>L.width-k[1]&&(Q.style.left=L.width-(k[1]+k[3])+"px"),n>L.height-k[2]&&(Q.style.top=L.height-(k[0]+k[2])+"px")),C=!0,t>k[3]&&t<L.width-k[1]&&(Q.style.left=t-k[3]+"px"),n>k[0]&&n<L.height-k[2]&&(Q.style.top=n-k[0]+"px"),t<_[1]&&t>_[3]&&n<_[2]&&n>_[0]&&0===O.flag.x&&0===O.flag.y&&(H.containTable||t<H[3]||t>H[1]||n<H[0]||n>H[2])&&(f(),s()),REDIPS.drag.scroll.enable)for(O.page.x=c-(L.width/2>t?t-k[3]:L.width-t-k[1]),O.page.x>0?(O.page.x>c&&(O.page.x=c),i=0,O.page.x*=t<L.width/2?-1:1,O.page.x<0&&0>=i||O.page.x>0&&i>=M.width-L.width||0===O.flag.x++&&(REDIPS.event.remove(window,"scroll",y),h(window))):O.page.x=0,O.page.y=c-(L.height/2>n?n-k[0]:L.height-n-k[2]),O.page.y>0?(O.page.y>c&&(O.page.y=c),i=window.pageYOffset||document.documentElement.scrollTop,O.page.y*=n<L.height/2?-1:1,O.page.y<0&&0>=i||O.page.y>0&&i>=M.height-L.height||0===O.flag.y++&&(REDIPS.event.remove(window,"scroll",y),w(window))):O.page.y=0,l=0;l<M.container.length;l++){if(o=M.container[l],o.autoscroll&&t<o.offset[1]&&t>o.offset[3]&&n<o.offset[2]&&n>o.offset[0]){O.div.x=c-(o.midstX>t?t-k[3]-o.offset[3]:o.offset[1]-t-k[1]),O.div.x>0?(O.div.x>c&&(O.div.x=c),O.div.x*=t<o.midstX?-1:1,0===O.flag.x++&&(REDIPS.event.remove(o.div,"scroll",y),h(o.div))):O.div.x=0,O.div.y=c-(o.midstY>n?n-k[0]-o.offset[0]:o.offset[2]-n-k[2]),O.div.y>0?(O.div.y>c&&(O.div.y=c),O.div.y*=n<o.midstY?-1:1,0===O.flag.y++&&(REDIPS.event.remove(o.div,"scroll",y),w(o.div))):O.div.y=0;break}O.div.x=O.div.y=0}a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},s=function(){(F!==q||$!==G)&&(null!==q&&null!==G&&(g(q,N),REDIPS.drag.td.previous=te.previous=T.rows[q].cells[G],REDIPS.drag.td.current=te.current=T.rows[F].cells[$],F!==q&&REDIPS.drag.event.rowChanged(te.current)),p())},c=function(){L.width=window.innerWidth,L.height=window.innerHeight,M.width=document.documentElement.scrollWidth,M.height=document.documentElement.scrollHeight,y()},f=function(){var e,o,t,n,r,d,l=[];if(e=function(){null!==q&&null!==G&&(F=q,$=G)},n=X.x,r=X.y,l[0]=T.redips.offset[0],l[1]=T.redips.offset[1],l[2]=T.redips.offset[2],l[3]=T.redips.offset[3],void 0!==T.sca&&(l[0]=l[0]>T.sca.offset[0]?l[0]:T.sca.offset[0],l[1]=l[1]<T.sca.offset[1]?l[1]:T.sca.offset[1],l[2]=l[2]<T.sca.offset[2]?l[2]:T.sca.offset[2],l[3]=l[3]>T.sca.offset[3]?l[3]:T.sca.offset[3]),l[3]<n&&n<l[1]&&l[0]<r&&r<l[2]){for(o=T.redips.row_offset,F=0;F<o.length-1;F++)if(void 0!==o[F]){if(H[0]=o[F][0],void 0!==o[F+1])H[2]=o[F+1][0];else for(d=F+2;d<o.length;d++)if(void 0!==o[d]){H[2]=o[d][0];break}if(r<=H[2])break}t=F,F===o.length-1&&(H[0]=o[F][0],H[2]=T.redips.offset[2]),$=0,0>F||0>$?e():F!==t&&(H[0]=o[F][0],H[2]=H[0]+T.rows[F].cells[$].offsetHeight,(r<H[0]||r>H[2])&&e())}},p=function(){null!==F&&null!==$&&(N=u(F),g(F),q=F,G=$)},g=function(e,o){var t,n;t=T.rows[e];for(var r=0;r<t.cells.length;r++)n=t.cells[r].style,n.backgroundColor=void 0===o?REDIPS.drag.hover.colorTr:o.color[r].toString(),void 0!==REDIPS.drag.hover.borderTr&&(void 0===o?K>F?n.borderTop=REDIPS.drag.hover.borderTr:n.borderBottom=REDIPS.drag.hover.borderTr:(n.borderTopWidth=o.top[r][0],n.borderTopStyle=o.top[r][1],n.borderTopColor=o.top[r][2],n.borderBottomWidth=o.bottom[r][0],n.borderBottomStyle=o.bottom[r][1],n.borderBottomColor=o.bottom[r][2]))},u=function(e){var o,t,n={color:[],top:[],right:[],bottom:[],left:[]},r=function(e,o){var t="border"+o+"Width",n="border"+o+"Style",r="border"+o+"Color";return[D(e,t),D(e,n),D(e,r)]};o=T.rows[e];for(var d=0;d<o.cells.length;d++)t=o.cells[d],n.color[d]=t.style.backgroundColor,void 0!==REDIPS.drag.hover.borderTr&&(n.top[d]=r(t,"Top"),n.bottom[d]=r(t,"Bottom"));return n},v=function(e,o,t){var n=0,r=0,d=e;if("fixed"!==o&&(n=0-j[0],r=0-j[1]),void 0===t||t===!0){do n+=e.offsetLeft-e.scrollLeft,r+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName)}else do n+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;while(e&&"BODY"!==e.nodeName);return[r,n+d.offsetWidth,r+d.offsetHeight,n]},y=function(){var e,o,t;j=m(),e=[],o=D(T,"position"),"fixed"!==o&&(o=D(T.parentNode,"position"));for(var n=T.rows.length-1;n>=0;n--)"none"!==T.rows[n].style.display&&(e[n]=v(T.rows[n],o));T.redips.offset=v(T,o),T.redips.row_offset=e,_=v(W);for(var n=0;n<M.container.length;n++)o=D(M.container[n].div,"position"),t=v(M.container[n].div,o,!1),M.container[n].offset=t,M.container[n].midstX=(t[1]+t[3])/2,M.container[n].midstY=(t[0]+t[2])/2},m=function(){var e=window.pageYOffset||document.documentElement.scrollTop,o=0;return[o,e]},h=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.x>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[0],r=M.width-L.width,d=O.page.x):(n=M.obj.scrollLeft,r=M.obj.scrollWidth-M.obj.clientWidth,d=O.div.x),O.flag.x>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(d,0),n=m()[0],o=parseInt(Q.style.left,10),isNaN(o)&&(o=0)):M.obj.scrollLeft+=d,setTimeout(h,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.x=0,H=[0,0,0,0])},w=function(e){var o,t,n,r,d,l=X.x,i=X.y;O.flag.y>0&&(y(),f(),l<_[1]&&l>_[3]&&i<_[2]&&i>_[0]&&s()),"object"==typeof e&&(M.obj=e),M.obj===window?(n=t=m()[1],r=M.height-L.height,d=O.page.y):(n=M.obj.scrollTop,r=M.obj.scrollHeight-M.obj.clientHeight,d=O.div.y),O.flag.y>0&&(0>d&&n>0||d>0&&r>n)?(M.obj===window?(window.scrollBy(0,d),n=m()[1],o=parseInt(Q.style.top,10),isNaN(o)&&(o=0)):M.obj.scrollTop+=d,setTimeout(w,REDIPS.drag.scroll.speed)):(REDIPS.event.add(M.obj,"scroll",y),O.flag.y=0,H=[0,0,0,0])},E=function(e,o){var t,n=[];n[0]=function(e,o){e.redips&&(o.redips={},o.redips.enabled=e.redips.enabled,o.redips.container=e.redips.container,e.redips.enabled&&a(o))},n[1]=function(e,o){e.redips&&(o.redips={},o.redips.emptyRow=e.redips.emptyRow)},t=function(t){var r,d,l=["DIV","TR"];r=e.getElementsByTagName(l[t]),d=o.getElementsByTagName(l[t]);for(var i=0;i<d.length;i++)n[t](r[i],d[i])},"DIV"===e.nodeName?n[0](e,o):"TR"===e.nodeName&&n[1](e,o),t(0),t(1)},b=function(e,t){var n,r,d,l;l=e.className,n=l.match(/climit(\d)_(\d+)/),null!==n&&(r=parseInt(n[1],10),d=parseInt(n[2],10),0===d&&1===t&&(l+=" redips-clone",2===r&&o(!0,e)),d+=t,l=l.replace(/climit\d_\d+/g,"climit"+r+"_"+d),0>=d&&(l=l.replace("redips-clone",""),2===r?(o(!1,e),REDIPS.drag.event.clonedEnd2()):REDIPS.drag.event.clonedEnd1()),e.className=x(l))},o=function(e,o){var n=[];void 0===o?n=W.getElementsByTagName("div"):"string"==typeof o?n=document.querySelectorAll(o):"object"!=typeof o||"DIV"===o.nodeName&&-1!==o.className.indexOf("redips-drag")?n[0]=o:n=o.getElementsByTagName("div"),t(e,n)},t=function(e,o){var t,n,r,d,l,i,s,c,f,p,g,u=[],m=/\bredips-drag\b/i,h=/\bredips-noautoscroll\b/i;for(l=REDIPS.drag.style.opacityDisabled,e===!0||"init"===e?(d=REDIPS.drag.style.borderEnabled,i="move",f=!0):(d=REDIPS.drag.style.borderDisabled,i="auto",f=!1),t=0,n=0;t<o.length;t++)if(m.test(o[t].className))"init"===e||void 0===o[t].redips?(o[t].redips={},o[t].redips.container=W):e===!0&&"number"==typeof l?(o[t].style.opacity="",o[t].style.filter=""):e===!1&&"number"==typeof l&&(o[t].style.opacity=l/100,o[t].style.filter="alpha(opacity="+l+")"),a(o[t],f),o[t].style.borderStyle=d,o[t].style.cursor=i,o[t].redips.enabled=f;else if("init"===e&&(s=D(o[t],"overflow"),"visible"!==s)){for(REDIPS.event.add(o[t],"scroll",y),g=D(o[t],"position"),p=v(o[t],g,!1),c=!h.test(o[t].className),M.container[n]={div:o[t],offset:p,midstX:(p[1]+p[3])/2,midstY:(p[0]+p[2])/2,autoscroll:c},u=o[t].getElementsByTagName("table"),r=0;r<u.length;r++)u[r].sca=M.container[n];n++}},D=function(e,o){return e&&e.currentStyle?e.currentStyle[o]:e&&window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[o]:void 0},I=function(e,o){for(o=o.parentNode;o&&o.nodeName!==e;)o=o.parentNode;return o},x=function(e){return void 0!==e&&(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ")),e},S=function(e,o,t){var n,r,d;if("string"==typeof e&&(e=document.getElementById(e),e=I("TABLE",e)),"TR"===e.nodeName)for(n=e.getElementsByTagName("td"),r=0;r<n.length;r++)if(n[r].style.backgroundColor=t?t:"","empty"===o)n[r].innerHTML="";else for(d=0;d<n[r].childNodes.length;d++)1===n[r].childNodes[d].nodeType&&(n[r].childNodes[d].style.opacity=o/100,n[r].childNodes[d].style.filter="alpha(opacity="+o+")");else e.style.opacity=o/100,e.style.filter="alpha(opacity="+o+")",e.style.backgroundColor=t?t:""},{obj:Q,objOld:U,td:te,hover:Z,scroll:ee,style:oe,clone:ne,init:e,enableDrag:o,enableDivs:t,rowOpacity:S,getScrollPosition:m,getStyle:D,findParent:I,event:re}}(),REDIPS.event||(REDIPS.event=function(){var e,o;return e=function(e,o,t){e.addEventListener?e.addEventListener(o,t,!1):e.attachEvent?e.attachEvent("on"+o,t):e["on"+o]=t},o=function(e,o,t){e.removeEventListener?e.removeEventListener(o,t,!1):e.detachEvent?e.detachEvent("on"+o,t):e["on"+o]=null},{add:e,remove:o}}());
"use strict";var redips={};redips.init=function(){var e=REDIPS.drag;e.init(),e.event.rowDropped=function(t){var n=parseInt(e.objOld.id.replace("rowid","")),o=document.getElementById(e.objOld.id),d=parseInt(t.id.replace("rowid","")),r=getParentID(o);moveAssembly(n,d,r,t),refreshDataModelDisplay(),document.getElementById("expandID"+d).classList.remove("hide-expand"),document.getElementById("expandID"+d).classList.add("show-expand")},e.event.rowDroppedSource=function(){e.rowOpacity(e.objOld,100)},e.event.rowMoved=function(){e.rowOpacity(e.obj,85),e.rowOpacity(e.objOld,20,"White")},e.event.rowClicked=function(){},e.event.rowNotMoved=function(){},e.event.rowCloned=function(){},e.event.rowNotCloned=function(){},e.event.rowDeleted=function(){},e.event.rowUndeleted=function(){e.rowOpacity(e.objOld,100)}};
var Field=function(i){this.name=i,this.datatype=Field.NUMBER,this.format=Field.NUMBER_FORMAT,this.precision="0.00",this.agg_type=Field.NO_AGGREGATION,this.agg_qty_field=null};Field.NUMBER="0",Field.STRING="1",Field.CHOICE="2",Field.NO_AGGREGATION="0",Field.SUM_ANY_AGGREGATION="1",Field.NUMBER_FORMAT="0",Field.PERCENT_FORMAT="1",Field.SCIENTIFIC_FORMAT="2";
function initProjectActions(){$("#projectActionInput").keyup(function(e){e.keyCode==ENTER_KEY&&projectActionEnterPressed()})}var scrollBarWidth;$(document).ready(function(){scrollBarWidth=getScrollBarWidth(),document.onkeydown=checkKey,$.ajax({type:"GET",url:"api/projects"}).done(function(e){projects=e,$("#header").html(generateHeaderMarkup(projects.projects)),$("#editNewProjectNameInput").keyup(function(e){e.keyCode==ENTER_KEY&&createNewProject()})})});var getScrollBarWidth=function(){var e,t;return e=document.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t};
function checkKey(e){if(e=e||window.event,e.keyCode==KEY_UP_ARROW){e.preventDefault();var t=$(getAncestorTag(document.activeElement,"tr")).prev()[0];t&&$("#"+getNextElementID(t)).focus()}else if(e.keyCode==KEY_DOWN_ARROW){e.preventDefault();var n=$(getAncestorTag(document.activeElement,"tr")).next()[0];n&&$("#"+getNextElementID(n)).focus()}else e.keyCode==KEY_RIGHT_ARROW?(e.preventDefault(),$(getAncestorTag(document.activeElement,"td")).next().find("input").focus()):e.keyCode==KEY_LEFT_ARROW&&(e.preventDefault(),$(getAncestorTag(document.activeElement,"td")).prev().find("input").focus())}function getNextElementID(e){var t=document.activeElement.id;if(t.indexOf("nodeInput")>-1)return"nodeInput"+e.id.replace("rowid","");for(var n=document.activeElement.className.split(" "),r=0;r<n.length;r++){var a=n[r];if(a.indexOf("fieldInput")>-1&&"fieldInput"!=a){var c=a.replace("fieldInput","");return c+e.id.replace("datarowid","")}}}var KEY_UP_ARROW=38,KEY_DOWN_ARROW=40,KEY_LEFT_ARROW=37,KEY_RIGHT_ARROW=39;
function generateHeaderMarkup(e){for(var t='<select id="projectSelector" class="form-control" onchange="selectProject()"><option id="selectProjectOption" value="0">Select Project...</option>',n=0;n<e.length;n++)t+='<option value="'+e[n].id+'">'+e[n].name+"</option>";return t+='<option id="newProjectOption" value="-1">Create New Project...</option></select><input id="editNewProjectNameInput" class="form-control"></input><a href="#" id="save-database-button" class="btn btn-default" onclick="saveToDatabase()">Save to Database</a>'}function generateProjectSelectorMarkup(){return'<table><tr id="headerRow"><tr><div id="project-select-container"><select id="projectActionSelector" class="form-control" onchange="handleProjectAction()"><option value="blank"></option><option value="addField">Add Field</option></select><input id="projectActionInput" class="form-control"></input></div></tr><table>'}function generateFieldsRowMarkup(){for(var e='<table id="fieldHeaderTable"><tr id="fieldHeaderRow">',t=0;t<tree.fields.length;t++)e+=getFieldHeaderMarkup(tree.fields[t].name,t);return e+="</tr></table>"}function generateTreeMarkup(){for(var e='<table id="treeTable">',t=0;t<tree.nodes.length;t++)e+=addRow(tree.nodes[t],0,"",0);return e+="</table>"}function addRow(e,t,n,a){var i="",d="nodeRow depth"+t+" expanded parent"+a+" "+n,l=e.id,r='<div class="redips-drag pull-right"><i class="glyphicon glyphicon-move"></i></div>',o='<a href="#" class="pull-right btn btn-danger btn-xs delete-button" onclick="deleteNode(this)"><i class="glyphicon glyphicon-remove"></i></a>',s='<a href="#"  class="pull-right btn btn-info btn-xs copy-button" onclick="copyNode(this)"><i class="glyphicon glyphicon-plus"></i></a>',c='<a id="expandID'+l+'" href="#" style="margin-left:'+10*t+'px" onclick="toggle(this)" class="btn btn-xs show-expand"><span id="icon'+l+'" class="glyphicon glyphicon-chevron-down iconp'+a+'"></span></a>',p='<a id="expandID'+l+'" href="#" style="margin-left:'+10*t+'px" onclick="toggle(this)" class="btn btn-xs hide-expand"><span id="icon'+l+'" class="glyphicon glyphicon-chevron-down iconp'+a+'"></span></a>';if(i+='<tr id="rowid'+l+'" class="'+d+'"><td class="redips-rowhandler cell"><div class="node-container">',i+=o+s+r,i+=e.nodes&&e.nodes.length>0?c:p,i+='<input id="nodeInput'+e.id+'" class="node" type="text" value="'+e.name+'" style="width:'+(400-10*t)+'px" oninput="updateNodeName(this)"/></div></td></tr>',e.nodes&&e.nodes.length>0)for(var u=0;u<e.nodes.length;u++)i+=addRow(e.nodes[u],t+1,n+" ancestor"+l,l);return i}function generateDataMarkup(){for(var e='<table id="dataTable">',t=0;t<tree.nodes.length;t++)e+=addDataRow(tree.nodes[t]);return e+="</table>"}function addDataRow(e){for(var t='<tr id="datarowid'+e.id+'" class="dataRow">',n=0;n<tree.fields.length;n++)t+=e.values&&e.values[tree.fields[n].name]?getFieldCellMarkup(tree.fields[n].name,e.id,e.values[tree.fields[n].name]):getFieldCellMarkup(tree.fields[n].name,e.id,"");if(t+="</tr>",e.nodes&&e.nodes.length>0)for(var n=0;n<e.nodes.length;n++)t+=addDataRow(e.nodes[n]);return t}function addColumn(e){$("#fieldHeaderRow").append(getFieldHeaderMarkup(e,tree.fields.length)),$(".dataRow").each(function(t,n){$(n).append(getFieldCellMarkup(e,n.id.replace("datarowid","")))})}function getFieldHeaderMarkup(e,t){return'<td class="fieldHeaderCell"><div class="fieldHeaderContainer"><div class="moveColGrip"></div><div class="fieldNameInputContainer"><textarea id="colHeaderInput'+e+'" class="fieldNameInput">'+e+'</textarea></div><div class="fieldHeaderButton"><img src="images/down-arrow.png" onclick="showMenu(event, \''+e+'\');" style="cursor:pointer"/></div><div id="grip'+t+'" class="resizeColGrip" onmousedown="startResize(event, this)"></div></div></td>'}function getFieldCellMarkup(e,t,n){return'<td class="cell"><input class="fieldInput fieldInput'+e+'" type="text" id="'+e+t+'" value="'+n+'" oninput="updateFieldValue(\''+e+"', '"+t+"')\"/></td>"}function getAssemblyMarkup(e,t,n){var a=findNodeInTree(e),i=findParentInTree(e);return addRow(a,n,"ancestor"+i.id,i.id)}function getFieldMenuMarkup(e,t,n){var a=Project.getField(e),i={},d=new MenuItem("Number",Field.NUMBER,"datatype",a),l=new MenuItem("Format");l.items.push(new MenuItem("Number",Field.NUMBER_FORMAT,"format",a)),l.items.push(new MenuItem("Percent",Field.PERCENT_FORMAT,"format",a)),l.items.push(new MenuItem("Scientific",Field.SCIENTIFIC_FORMAT,"format",a)),d.items.push(l);var r=new MenuItem("Aggregation");r.items.push(new MenuItem("No Aggregation",Field.NO_AGGREGATION,"agg_type",a));for(var o=new MenuItem("Sum any defined children",Field.SUM_ANY_AGGREGATION,"agg_type",a),s=0;s<tree.fields.length;s++){var c=tree.fields[s];c.name!=a.name&&o.items.push(new MenuItem(c.name,c.name,"agg_qty_field",a))}r.items.push(o),d.items.push(r),i.items=[],i.items.push(d),i.items.push(new MenuItem("Text",Field.STRING,"datatype",a)),i.items.push(new MenuItem("Choice",Field.CHOICE,"datatype",a));var p='<div id="fieldMenu" style="left:'+t+"px;top:"+n+'px;">';return p+=generateMenuMarkup(i),p+="</div>"}function generateMenuMarkup(e){for(var t="<ul>",n=0;n<e.items.length;n++){var a=e.items[n];t+="<li>",t+=a.field?a.checked?'<img src="'+CHECK_MARK_IMAGE_PATH+'" style="margin-right:10px;"/><span onclick="MenuItem.handleClick(\''+a.field.name+"', '"+a.varName+"', '"+a.value+"');\">":'<img src="'+CHECK_MARK_IMAGE_PATH+'" style="visibility:hidden;margin-right:10px;"/><span onclick="MenuItem.handleClick(\''+a.field.name+"', '"+a.varName+"', '"+a.value+"');\">":"<span>",t+=a.display+"</span>",a.items&&a.items.length>0&&(t+=generateMenuMarkup(a)),t+="</li>"}return t+"</ul>"}
function displayProject(){$("#project-action-container").html(generateProjectSelectorMarkup()),$("#fields-header-row").html(generateFieldsRowMarkup()),$("#fields-header-row").css("right",scrollBarWidth+"px"),$("#data-container").html(generateDataMarkup()),$("#redips-drag").html(generateTreeMarkup()),$("#redips-drag").css("bottom",scrollBarWidth+"px"),redips.init(),initProjectActions()}function projectActionEnterPressed(){if("addField"==$("#projectActionSelector").val()){var e=$("#projectActionInput").val();tree.fields.push(new Field(e)),addColumn(e),$("#projectActionInput").hide(),$("#projectActionSelector").val("blank")}}function createNewProject(){$("#selectProjectOption").remove();var e=$("#editNewProjectNameInput").val();$("#editNewProjectNameInput").hide();var t=projects.nextProjectID.toString(),o=document.createElement("option");o.text=e,o.value=t,$(o).insertBefore("#projectSelector option:nth-child("+$("#projectSelector").length+")"),$("#projectSelector").val(t),$.ajax({type:"POST",url:"/api/addProject?projectName="+e}),tree={projectID:t,projectName:e,version:1,nextNodeID:2,fields:[],nodes:[{id:1,name:e,nodes:[]}]},displayProject(),saveToDatabase(),refreshDataModelDisplay()}function showMenu(e,t){0===$("#fieldMenu").length&&($(getFieldMenuMarkup(t,e.clientX,e.clientY)).appendTo("body"),$("#fieldMenu").mouseleave(function(){$("#fieldMenu").remove()}))}var handleProjectAction=function(){"addField"==$("#projectActionSelector").val()&&($("#projectActionInput").val("Type New Field Name and Press Enter to Create"),$("#projectActionInput").show().focus().select())};
var resizeColumnLeft=0,resizeField="0",startResize=function(e,i){$(document).bind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).bind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="visible",document.getElementById("resizeLine").style.left=e.pageX+"px",resizeColumnLeft=$(i.parentNode).position().left,resizeField=i.parentNode.id.replace("colHeader","")},resizeEnd=function(e){$(document).unbind("touchmove.resizeColGrip mousemove.resizeColGrip",resizeDrag).unbind("touchend.resizeColGrip mouseup.resizeColGrip",resizeEnd),document.getElementById("resizeLine").style.visibility="hidden";var i=e.pageX-resizeColumnLeft-GRIPS_WIDTH;i<MIN_COLUMN_WIDTH&&(i=MIN_COLUMN_WIDTH),document.getElementById("colHeaderInput"+resizeField).style.width=i+"px";for(var t=document.querySelectorAll(".fieldInput"+resizeField),r=0;r<t.length;r++)t[r].style.width=i+8+"px"},resizeDrag=function(e){e.pageX>resizeColumnLeft+MIN_COLUMN_WIDTH+GRIPS_WIDTH&&(document.getElementById("resizeLine").style.left=e.pageX+"px")};
function handleDataScroll(){$("#redips-drag").scrollTop($("#data-container").scrollTop()),$("#fields-header-row").scrollLeft($("#data-container").scrollLeft())}function toggle(e){var n=getAncestorTag(e,"tr"),t=parseInt(n.id.replace("rowid","")),o=document.getElementById("icon"+t);if(n.classList.contains("collapsed")){for(var r=document.querySelectorAll(".parent"+t),d=document.querySelectorAll(".iconp"+t),s=0;s<r.length;s++)r[s].style.display="",r[s].classList.add("collapsed");for(var s=0;s<d.length;s++)d[s].classList.contains("glyphicon-chevron-down")&&(d[s].classList.remove("glyphicon-chevron-down"),d[s].classList.add("glyphicon-chevron-right"));o.classList.remove("glyphicon-chevron-right"),o.classList.add("glyphicon-chevron-down"),n.classList.remove("collapsed"),n.classList.add("expanded")}else{for(var a=document.querySelectorAll(".ancestor"+t),s=0;s<a.length;s++)a[s].style.display="none";o.classList.remove("glyphicon-chevron-down"),o.classList.add("glyphicon-chevron-right"),n.classList.remove("expanded"),n.classList.add("collapsed")}}function updateFieldValue(e,n){updateNodeValueInTree(n,e,document.getElementById(e+n).value);for(var t=0;t<tree.nodes.length;t++)aggregate_any(tree.nodes[t],e);refreshDataModelDisplay()}function updateNodeValueInTree(e,n,t){for(var o=null,r=0;r<tree.nodes.length;r++)o=tree.nodes[r],o.id==e?(o.values||(o.values={}),o.values[n]=t):updateNodeValue(e,o,n,t)}function updateNodeValue(e,n,t,o){var r=null;if(n&&n.id==e)return n;if(n&&n.nodes&&n.nodes.length>0)for(var d=0;d<n.nodes.length;d++)if(r=updateNodeValue(e,n.nodes[d],t,o))return r.values||(r.values={}),r.values[t]=o,r;return null}var projects=null,tree,ENTER_KEY=13,MIN_COLUMN_WIDTH=70,GRIPS_WIDTH=16,selectProject=function(){var e=document.getElementById("projectSelector"),n=e.options[e.selectedIndex];"newProjectOption"==n.id?($("#editNewProjectNameInput").val("Type New Project Name and Press Enter to Create"),$("#editNewProjectNameInput").show().focus().select()):(e.value>0&&document.getElementById("selectProjectOption")&&$("#selectProjectOption").remove(),$.ajax({type:"GET",url:"api/tree?projectID="+e.value}).done(function(e){tree=e,displayProject(),refreshDataModelDisplay()}))},saveToDatabase=function(){$.ajax({type:"POST",url:"/api/tree",dataType:"json",data:{json:JSON.stringify(tree)}})},refreshDataModelDisplay=function(){},getDepth=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];if(o.indexOf("depth")>-1)return parseInt(o.replace("depth",""))}},getParentID=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];if(o.indexOf("parent")>-1)return parseInt(o.replace("parent",""))}},removeParent=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];o.indexOf("parent")>-1&&e.classList.remove(o)}},getAncestors=function(e){for(var n=[],t=e.className.split(" "),o=0;o<t.length;o++){var r=t[o];r.indexOf("ancestor")>-1&&n.push(r)}return n},removeAncestors=function(e){for(var n=e.className.split(" "),t=0;t<n.length;t++){var o=n[t];o.indexOf("ancestor")>-1&&e.classList.remove(o)}},addAncestors=function(e,n){for(var t=0;t<n.length;t++)e.classList.add(n[t])},setNewAncestors=function(e,n,t){removeParent(e),e.classList.add("parent"+t),removeAncestors(e),addAncestors(e,n)},moveAssembly=function(e,n,t,o){var r=findNodeInTree(t),d=findNodeInTree(n),s=findNodeInTree(e);if(r){if(r.nodes&&r.nodes.length>0)for(var a=0;a<r.nodes.length;a++)if(r.nodes[a].id===e){r.nodes.splice(a,1);break}}else for(var a=0;a<tree.nodes.length;a++)if(tree.nodes[a].id===e){tree.nodes.splice(a,1);break}d.nodes.push(s);var i=document.getElementById("rowid"+e),l=document.getElementById("datarowid"+e),c=document.getElementById("datarowid"+n),f=getAncestors(o);f.push("ancestor"+n),setNewAncestors(i,f,n);var u=getDepth(i),p=getDepth(o)+1;if(i.classList.remove("depth"+u),i.classList.add("depth"+p),document.getElementById("expandID"+e).style.marginLeft=10*p+"px",$(l).remove(),$(l).insertAfter(c),s.nodes&&s.nodes.length>0)for(var a=s.nodes.length-1;a>=0;a--)moveNode(s.nodes[a],s.nodes[a].id,e,p+1,f)},moveNode=function(e,n,t,o,r){var d=document.getElementById("rowid"+n),s=document.getElementById("datarowid"+n),a=document.getElementById("rowid"+t),i=document.getElementById("datarowid"+t),l=getDepth(d),c=r.slice(0);if(c.push("ancestor"+t),setNewAncestors(d,c,t),d.classList.remove("depth"+l),d.classList.add("depth"+o),document.getElementById("expandID"+n).style.marginLeft=10*o+"px",$(d).remove(),$(d).insertAfter(a),$(s).remove(),$(s).insertAfter(i),e.nodes&&e.nodes.length>0)for(var f=e.nodes.length-1;f>=0;f--)moveNode(e.nodes[f],e.nodes[f].id,n,o+1,c)},findNodeInTree=function(e){if(tree.nodes&&tree.nodes.length>0)for(var n=0;n<tree.nodes.length;n++){var t=findNode(e,tree.nodes[n]);if(t)return t}},findNode=function(e,n){if(n.id===e)return n;if(n.nodes&&n.nodes.length>0)for(var t=0;t<n.nodes.length;t++){var o=findNode(e,n.nodes[t]);if(o)return o}},findParentInTree=function(e){if(tree.nodes&&tree.nodes.length>0)for(var n=0;n<tree.nodes.length;n++){var t=findParent(e,tree.nodes[n],null);if(t)return t}},findParent=function(e,n,t){if(n.id===e)return t;if(n.nodes&&n.nodes.length>0)for(var o=0;o<n.nodes.length;o++){var r=findParent(e,n.nodes[o],n);if(r)return r}},deleteNode=function(e){var n=getAncestorTag(e,"tr"),t=parseInt(n.id.replace("rowid","")),o=findNodeInTree(t),r=findParentInTree(t);removeNodeRow(o);for(var d=0;d<r.nodes.length;d++)if(r.nodes[d].id==t){r.nodes.splice(d,1);break}refreshDataModelDisplay()},removeNodeRow=function(e){var n=document.getElementById("rowid"+e.id);if($(n).remove(),e.nodes&&e.nodes.length>0)for(var t=0;t<e.nodes.length;t++)removeNodeRow(e.nodes[t])},copyNode=function(e){var n,t,o=getAncestorTag(e,"tr"),r=parseInt(o.id.replace("rowid","")),d=findNodeInTree(r),s=findParentInTree(r),a=jQuery.extend(!0,{},d);assignNewNodeIDs(a),void 0===s?(n=getNodeIndex(tree.nodes,d.id),tree.nodes.splice(n,0,a),t=addRow(a,0,"",0)):(n=getNodeIndex(s.nodes,d.id),s.nodes.splice(n,0,a),t=getAssemblyMarkup(a.id,d.id,getDepth(o))),$(t).insertBefore(o);var i=document.getElementById("rowid"+a.id);REDIPS.drag.enableDivs("init",i.getElementsByTagName("div")),refreshDataModelDisplay()},assignNewNodeIDs=function(e){if(e.id=tree.nextNodeID++,e.nodes&&e.nodes.length>0)for(var n=0;n<e.nodes.length;n++)assignNewNodeIDs(e.nodes[n])},getNodeIndex=function(e,n){var t=$.map(e,function(e,t){return e.id==n?t:void 0});return t[0]},getAncestorTag=function(e,n){for(n=n.toLowerCase();e&&e.parentNode;)if(e=e.parentNode,e.tagName&&e.tagName.toLowerCase()==n)return e},updateNodeName=function(e){var n=getAncestorTag(e,"tr"),t=parseInt(n.id.replace("rowid","")),o=findNodeInTree(t);o.name=e.value,$("#nodeInput"+t).attr("value",o.name),refreshDataModelDisplay()};
var MenuItem=function(e,i,t,h){this.display=e,this.value=i,this.varName=t,this.field=h,this.items=[],this.checked=h?h[t]===i:!1};MenuItem.handleClick=function(e,i,t){Project.getField(e)[i]=t};
function Project(){}Project.getField=function(e){for(var r=0;r<tree.fields.length;r++){var t=tree.fields[r];if(t.name===e)return t}return null};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFnZy5qcyIsImNvbnN0YW50cy5qcyIsImRyYWctbGliLmpzIiwiZHJhZy5qcyIsIkZpZWxkLmpzIiwiaW5pdC5qcyIsImtleXMuanMiLCJtYXJrdXAuanMiLCJwcm9qZWN0LmpzIiwicmVzaXplLWNvbHVtbi5qcyIsInRyZWUuanMiLCJtb2RlbC9NZW51SXRlbS5qcyIsIm1vZGVsL1Byb2plY3QuanMiXSwibmFtZXMiOlsiYWdncmVnYXRlX2FueSIsIm5vZGUiLCJmaWVsZCIsIm5vZGVzIiwibGVuZ3RoIiwiY2hpbGRyZW5TdW0iLCJpIiwidmFsdWVzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImlkIiwidmFsdWUiLCJwYXJzZUZsb2F0IiwiRE9XTl9BUlJPV19JTUFHRV9QQVRIIiwiQ0hFQ0tfTUFSS19JTUFHRV9QQVRIIiwiQkxBTktfTUFSS19JTUFHRV9QQVRIIiwiUkVESVBTIiwiZHJhZyIsImluaXQiLCJlbmFibGVEcmFnIiwiZW5hYmxlRGl2cyIsImhhbmRsZXJPbk1vdXNlRG93biIsImhhbmRsZXJPbk1vdXNlVXAiLCJoYW5kbGVyT25Nb3VzZU1vdmUiLCJlbGVtZW50RHJvcCIsInJlc2V0U3R5bGVzIiwicmVnaXN0ZXJFdmVudHMiLCJjZWxsQ2hhbmdlZCIsImhhbmRsZXJPblJlc2l6ZSIsInNldFRhYmxlUm93Q29sdW1uIiwic2V0UG9zaXRpb24iLCJzZXRUZFN0eWxlIiwiZ2V0VGRTdHlsZSIsImJveE9mZnNldCIsImNhbGN1bGF0ZUNlbGxzIiwiZ2V0U2Nyb2xsUG9zaXRpb24iLCJhdXRvU2Nyb2xsWCIsImF1dG9TY3JvbGxZIiwiY29weVByb3BlcnRpZXMiLCJjbG9uZUxpbWl0IiwiZ2V0U3R5bGUiLCJmaW5kUGFyZW50Iiwicm93T3BhY2l0eSIsInJvd0Nsb25lIiwicm93RHJvcCIsIm5vcm1hbGl6ZSIsImJnU3R5bGVPbGQiLCJ0YWJsZSIsIm1vdmVkIiwiY2xvbmVkIiwid2luZG93U2Nyb2xsUG9zaXRpb24iLCJvYmpNYXJnaW4iLCJzY3JlZW4iLCJ3aWR0aCIsImhlaWdodCIsInNjcm9sbERhdGEiLCJjb250YWluZXIiLCJvYmoiLCJlZGdlIiwicGFnZSIsIngiLCJ5IiwiZGl2IiwiZmxhZyIsImNsb25lZElkIiwiY3VycmVudENlbGwiLCJkcmFnQ29udGFpbmVyIiwiZGl2Qm94IiwicG9pbnRlciIsInRocmVzaG9sZCIsInNoaWZ0S2V5IiwiY2xvbmVDbGFzcyIsInJvdyIsInJvd19vbGQiLCJyb3dfc291cmNlIiwiY2VsbCIsImNlbGxfb2xkIiwiY2VsbF9zb3VyY2UiLCJvYmpPbGQiLCJob3ZlciIsImNvbG9yVGQiLCJjb2xvclRyIiwic2Nyb2xsIiwiZW5hYmxlIiwiYm91bmQiLCJzcGVlZCIsInN0eWxlIiwiYm9yZGVyRGlzYWJsZWQiLCJvcGFjaXR5RGlzYWJsZWQiLCJyb3dFbXB0eUNvbG9yIiwidGQiLCJjbG9uZSIsImtleURpdiIsImtleVJvdyIsInNlbmRCYWNrIiwiZHJvcCIsImV2ZW50IiwiY2xvbmVkRHJvcHBlZCIsImNsb25lZEVuZDEiLCJjbG9uZWRFbmQyIiwiZHJvcHBlZCIsImRyb3BwZWRCZWZvcmUiLCJmaW5pc2giLCJub3RDbG9uZWQiLCJub3RNb3ZlZCIsInJvd0NoYW5nZWQiLCJyb3dDbGlja2VkIiwicm93Q2xvbmVkIiwicm93RHJvcHBlZCIsInJvd0Ryb3BwZWRCZWZvcmUiLCJyb3dEcm9wcGVkU291cmNlIiwicm93TW92ZWQiLCJyb3dOb3RDbG9uZWQiLCJyb3dOb3RNb3ZlZCIsInJlZGlwc0Nsb25lIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwicmVkaXBzIiwiYWRkIiwid2luZG93IiwiZSIsIm9mZnNldCIsInBvc2l0aW9uIiwiWCIsIlkiLCJldnQiLCJjYW5jZWxCdWJibGUiLCJzdG9wUHJvcGFnYXRpb24iLCJnZXRTZWxlY3Rpb24iLCJyZW1vdmVBbGxSYW5nZXMiLCJzZWxlY3Rpb24iLCJ0eXBlIiwiZW1wdHkiLCJlcnJvciIsImNsaWVudFgiLCJjbGllbnRZIiwidGhpcyIsImNsYXNzTmFtZSIsImluZGV4T2YiLCJjdXJyZW50IiwicGFyZW50Tm9kZSIsImVsIiwidGFibGVNaW5pIiwicm93T2JqIiwibm9kZU5hbWUiLCJ1bmRlZmluZWQiLCJpbm5lckhUTUwiLCJjbGFzc0xpc3QiLCJzb3VyY2VSb3ciLCJyb3dzIiwicm93SWR4IiwidHJNaW5pIiwiZGVsZXRlVGFibGVSb3ciLCJ0YmwiLCJlbXB0eVJvdyIsImRlbGV0ZVJvdyIsInJvd0luZGV4IiwidGFibGVSb3ciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwibmV4dFNpYmxpbmciLCJyX3JvdyIsIm10X3RyIiwicmVtb3ZlIiwib25zZWxlY3RzdGFydCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFdpZHRoIiwic2Nyb2xsSGVpZ2h0IiwidGFyZ2V0IiwiY2VsbHMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjbG9uZVNvdXJjZURpdiIsIm9ubW91c2Vkb3duIiwidG9wIiwibGVmdCIsInpJbmRleCIsInNjYSIsImRlbHRhWCIsImRlbHRhWSIsInNjcm9sbFBvc2l0aW9uIiwiTWF0aCIsImFicyIsImNvbnRhaW5UYWJsZSIsInBhZ2VZT2Zmc2V0Iiwic2Nyb2xsVG9wIiwiYXV0b3Njcm9sbCIsIm1pZHN0WCIsIm1pZHN0WSIsInByZXZpb3VzIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0Iiwicm93X29mZnNldCIsInJvd19mb3VuZCIsInRvcyIsIm9mZnNldEhlaWdodCIsInJpIiwidCIsInRyIiwicyIsImNvbG9yIiwidG9TdHJpbmciLCJib3JkZXJUciIsImJvcmRlclRvcCIsImJvcmRlckJvdHRvbSIsImJvcmRlclRvcFdpZHRoIiwiYm9yZGVyVG9wU3R5bGUiLCJib3JkZXJUb3BDb2xvciIsImJvcmRlckJvdHRvbVdpZHRoIiwiYm90dG9tIiwiYm9yZGVyQm90dG9tU3R5bGUiLCJib3JkZXJCb3R0b21Db2xvciIsImMiLCJyaWdodCIsImJvcmRlciIsIm5hbWUiLCJib3giLCJib3hfc2Nyb2xsIiwib0xlZnQiLCJvVG9wIiwiYm94T2xkIiwib2Zmc2V0TGVmdCIsInNjcm9sbExlZnQiLCJvZmZzZXRUb3AiLCJvZmZzZXRQYXJlbnQiLCJvZmZzZXRXaWR0aCIsImNiIiwiZGlzcGxheSIsInNjcm9sbFkiLCJzY3JvbGxYIiwic28iLCJwb3MiLCJvbGQiLCJtYXhzcCIsImVkZ2VDcm9zc2VkIiwiY2xpZW50V2lkdGgiLCJzY3JvbGxCeSIsInBhcnNlSW50IiwiaXNOYU4iLCJzZXRUaW1lb3V0IiwiY2xpZW50SGVpZ2h0Iiwic3JjIiwiY2xuIiwiY2hpbGRzIiwiY29weSIsImUxIiwiZTIiLCJlbmFibGVkIiwiZWwxIiwiZWwyIiwidG4iLCJtYXRjaEFycmF5IiwibGltaXRUeXBlIiwibGltaXQiLCJjbGFzc2VzIiwibWF0Y2giLCJyZXBsYWNlIiwiZW5hYmxlX2ZsYWciLCJxdWVyeVNlbGVjdG9yQWxsIiwiaiIsImsiLCJib3JkZXJTdHlsZSIsIm9wYWNpdHkiLCJjdXJzb3IiLCJvdmVyZmxvdyIsInRibHMiLCJyZWdleERyYWciLCJyZWdleE5vQXV0b3Njcm9sbCIsImJvcmRlckVuYWJsZWQiLCJ0ZXN0IiwiZmlsdGVyIiwic3R5bGVfbmFtZSIsImN1cnJlbnRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJkZWZhdWx0VmlldyIsInRhZ19uYW1lIiwic3RyIiwidGROb2RlTGlzdCIsImNoaWxkTm9kZXMiLCJub2RlVHlwZSIsImV2ZW50TmFtZSIsImhhbmRsZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJyZCIsIm5ld1BhcmVudFJvdyIsIm1vdmVkSUQiLCJtb3ZlZFJvdyIsIm5ld1BhcmVudElEIiwib2xkUGFyZW50SUQiLCJnZXRQYXJlbnRJRCIsIm1vdmVBc3NlbWJseSIsInJlZnJlc2hEYXRhTW9kZWxEaXNwbGF5Iiwicm93RGVsZXRlZCIsInJvd1VuZGVsZXRlZCIsIkZpZWxkIiwiZGF0YXR5cGUiLCJOVU1CRVIiLCJmb3JtYXQiLCJOVU1CRVJfRk9STUFUIiwicHJlY2lzaW9uIiwiYWdnX3R5cGUiLCJOT19BR0dSRUdBVElPTiIsImFnZ19xdHlfZmllbGQiLCJTVFJJTkciLCJDSE9JQ0UiLCJTVU1fQU5ZX0FHR1JFR0FUSU9OIiwiUEVSQ0VOVF9GT1JNQVQiLCJTQ0lFTlRJRklDX0ZPUk1BVCIsImluaXRQcm9qZWN0QWN0aW9ucyIsIiQiLCJrZXl1cCIsImtleUNvZGUiLCJFTlRFUl9LRVkiLCJwcm9qZWN0QWN0aW9uRW50ZXJQcmVzc2VkIiwic2Nyb2xsQmFyV2lkdGgiLCJyZWFkeSIsImdldFNjcm9sbEJhcldpZHRoIiwib25rZXlkb3duIiwiY2hlY2tLZXkiLCJhamF4IiwidXJsIiwiZG9uZSIsImRhdGEiLCJwcm9qZWN0cyIsImh0bWwiLCJnZW5lcmF0ZUhlYWRlck1hcmt1cCIsImNyZWF0ZU5ld1Byb2plY3QiLCJmaXJzdENoaWxkIiwiYm9keSIsIktFWV9VUF9BUlJPVyIsInByZXZlbnREZWZhdWx0IiwicHJldlJvdyIsImdldEFuY2VzdG9yVGFnIiwiYWN0aXZlRWxlbWVudCIsInByZXYiLCJnZXROZXh0RWxlbWVudElEIiwiZm9jdXMiLCJLRVlfRE9XTl9BUlJPVyIsIm5leHRSb3ciLCJuZXh0IiwiS0VZX1JJR0hUX0FSUk9XIiwiZmluZCIsIktFWV9MRUZUX0FSUk9XIiwibmV3Um93Iiwic3BsaXQiLCJmaWVsZE5hbWUiLCJtYXJrdXAiLCJnZW5lcmF0ZVByb2plY3RTZWxlY3Rvck1hcmt1cCIsImdlbmVyYXRlRmllbGRzUm93TWFya3VwIiwidHJlZSIsImZpZWxkcyIsImdldEZpZWxkSGVhZGVyTWFya3VwIiwiZ2VuZXJhdGVUcmVlTWFya3VwIiwiYWRkUm93IiwiZGVwdGgiLCJhbmNlc3RvcnMiLCJwYXJlbnQiLCJub2RlSUQiLCJkcmFnSGFuZGxlIiwiZGVsZXRlQnV0dG9uIiwiY29weUJ1dHRvbiIsInNob3dFeHBhbmRCdXR0b24iLCJoaWRlRXhwYW5kQnV0dG9uIiwiZ2VuZXJhdGVEYXRhTWFya3VwIiwiYWRkRGF0YVJvdyIsImdldEZpZWxkQ2VsbE1hcmt1cCIsImFkZENvbHVtbiIsImFwcGVuZCIsImVhY2giLCJpdGVtIiwiaW5kZXgiLCJnZXRBc3NlbWJseU1hcmt1cCIsIm5ld05vZGVJRCIsImZpbmROb2RlSW5UcmVlIiwiZmluZFBhcmVudEluVHJlZSIsImdldEZpZWxkTWVudU1hcmt1cCIsIlByb2plY3QiLCJnZXRGaWVsZCIsIm1lbnUiLCJudW1iZXJJdGVtIiwiTWVudUl0ZW0iLCJwcmVjaXNpb25JdGVtIiwiaXRlbXMiLCJwdXNoIiwiYWdncmVnYXRpb25JdGVtIiwic3VtQW55QWdnSXRlbSIsImYiLCJnZW5lcmF0ZU1lbnVNYXJrdXAiLCJjaGVja2VkIiwidmFyTmFtZSIsImRpc3BsYXlQcm9qZWN0IiwiY3NzIiwidmFsIiwiaGlkZSIsIm5ld1Byb2plY3ROYW1lIiwibmV3UHJvamVjdElEIiwibmV4dFByb2plY3RJRCIsIm9wdGlvbiIsInRleHQiLCJwcm9qZWN0SUQiLCJwcm9qZWN0TmFtZSIsInZlcnNpb24iLCJuZXh0Tm9kZUlEIiwic2F2ZVRvRGF0YWJhc2UiLCJzaG93TWVudSIsImFwcGVuZFRvIiwibW91c2VsZWF2ZSIsImhhbmRsZVByb2plY3RBY3Rpb24iLCJzaG93Iiwic2VsZWN0IiwicmVzaXplQ29sdW1uTGVmdCIsInJlc2l6ZUZpZWxkIiwic3RhcnRSZXNpemUiLCJncmlwIiwiYmluZCIsInJlc2l6ZURyYWciLCJyZXNpemVFbmQiLCJ2aXNpYmlsaXR5IiwicGFnZVgiLCJ1bmJpbmQiLCJuZXdXaWR0aCIsIkdSSVBTX1dJRFRIIiwiTUlOX0NPTFVNTl9XSURUSCIsImNvbHVtbkNlbGxzIiwiaGFuZGxlRGF0YVNjcm9sbCIsInRvZ2dsZSIsImljb24iLCJjb250YWlucyIsImNoaWxkcmVuIiwiY2hpbGRyZW5JY29ucyIsImRlc2NlbmRhbnRzIiwidXBkYXRlRmllbGRWYWx1ZSIsInVwZGF0ZU5vZGVWYWx1ZUluVHJlZSIsInVwZGF0ZU5vZGVWYWx1ZSIsImZvdW5kIiwic2VsZWN0UHJvamVjdCIsInByb2plY3RTZWxlY3RvciIsInNlbGVjdGVkT3B0aW9uIiwib3B0aW9ucyIsInNlbGVjdGVkSW5kZXgiLCJkYXRhVHlwZSIsImpzb24iLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0RGVwdGgiLCJyZW1vdmVQYXJlbnQiLCJnZXRBbmNlc3RvcnMiLCJyZW1vdmVBbmNlc3RvcnMiLCJhZGRBbmNlc3RvcnMiLCJzZXROZXdBbmNlc3RvcnMiLCJwYXJlbnRJRCIsIm9sZFBhcmVudE5vZGUiLCJuZXdQYXJlbnROb2RlIiwibW92ZWROb2RlIiwic3BsaWNlIiwibW92ZWREYXRhUm93IiwicGFyZW50RGF0YVJvdyIsIm9sZERlcHRoIiwibmV3RGVwdGgiLCJtYXJnaW5MZWZ0IiwiaW5zZXJ0QWZ0ZXIiLCJtb3ZlTm9kZSIsIm5vZGVSb3ciLCJub2RlRGF0YVJvdyIsInBhcmVudFJvdyIsIm5ld0FuY2VzdG9ycyIsInNsaWNlIiwiZm91bmROb2RlIiwiZmluZE5vZGUiLCJmb3VuZFBhcmVudCIsImRlbGV0ZU5vZGUiLCJyZW1vdmVOb2RlUm93IiwiY29weU5vZGUiLCJzb3VyY2UiLCJub2RlSW5kZXgiLCJuZXdSb3dNYXJrdXAiLCJzb3VyY2VOb2RlIiwic291cmNlUGFyZW50Tm9kZSIsIm5ld05vZGUiLCJqUXVlcnkiLCJleHRlbmQiLCJhc3NpZ25OZXdOb2RlSURzIiwiZ2V0Tm9kZUluZGV4IiwiaW5kZXhlcyIsIm1hcCIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsInVwZGF0ZU5vZGVOYW1lIiwiYXR0ciIsImhhbmRsZUNsaWNrIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFTQSxlQUFjQyxFQUFNQyxHQUUzQixHQUFJRCxFQUFLRSxPQUErQixJQUF0QkYsRUFBS0UsTUFBTUMsT0FZN0IsQ0FHRSxJQUFJLEdBRkFDLEdBQWMsRUFFVkMsRUFBSSxFQUFHQSxFQUFJTCxFQUFLRSxNQUFNQyxPQUFRRSxJQUVwQ0QsR0FBZUwsY0FBY0MsRUFB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RUFBVUEsRUFBUUMsY0FFWDVWLEdBQU1BLEVBQUdELFlBR2QsR0FEQUMsRUFBS0EsRUFBR0QsV0FDSkMsRUFBRzJWLFNBQVczVixFQUFHMlYsUUFBUUMsZUFBaUJELEVBRTVDLE1BQU8zVixJQW9EVDZWLGVBQWlCLFNBQVM3VixHQUU1QixHQUFJckUsR0FBTXVRLGVBQWVsTSxFQUFJLE1BQ3pCMk4sRUFBUzNILFNBQVNySyxFQUFJOUQsR0FBR3NQLFFBQVEsUUFBUSxLQUN6Qy9QLEVBQU91WCxlQUFlaEIsRUFFMUJ2VyxHQUFLc04sS0FBTzFFLEVBQUdsSSxNQUNmNlMsRUFBRSxhQUFlZ0QsR0FBUW1JLEtBQUssUUFBUzFlLEVBQUtzTixNQUM1QytFO0FDM2RGLEdBQUl5RixVQUFXLFNBQVM1SixFQUFTeE4sRUFBTzZYLEVBQVN0WSxHQUUvQ3NJLEtBQUsyRixRQUFVQSxFQUNmM0YsS0FBSzdILE1BQVFBLEVBQ2I2SCxLQUFLZ1EsUUFBVUEsRUFDZmhRLEtBQUt0SSxNQUFRQSxFQUNic0ksS0FBS3lQLFNBSUh6UCxLQUFLK1AsUUFGSnJZLEVBRWNBLEVBQU1zWSxLQUFhN1gsR0FJbkIsRUFJbkJvWCxVQUFTNkcsWUFBYyxTQUFTaEosRUFBVzRDLEVBQVM3WCxHQUVsRGdYLFFBQVFDLFNBQVNoQyxHQUFXNEMsR0FBVzdYO0FDcEJ6QyxRQUFTZ1gsWUFLVEEsUUFBUUMsU0FBVyxTQUFTckssR0FFMUIsSUFBSSxHQUFJak4sR0FBSSxFQUFHQSxFQUFJMFYsS0FBS0MsT0FBTzdWLE9BQVFFLElBQ3ZDLENBQ0UsR0FBSUosR0FBUThWLEtBQUtDLE9BQU8zVixFQUN4QixJQUFHSixFQUFNcU4sT0FBU0EsRUFFaEIsTUFBT3JOLEdBSVgsTUFBTyIsImZpbGUiOiJobXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gYWdncmVnYXRlX2FueShub2RlLCBmaWVsZClcclxue1xyXG4gIGlmKCFub2RlLm5vZGVzIHx8IG5vZGUubm9kZXMubGVuZ3RoID09PSAwKVxyXG4gIHtcclxuICAgIGlmKCFub2RlLnZhbHVlcyB8fCAhbm9kZS52YWx1ZXNbZmllbGRdKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gMC4wO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChub2RlLnZhbHVlc1tmaWVsZF0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdmFyIGNoaWxkcmVuU3VtID0gMC4wO1xyXG5cclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBjaGlsZHJlblN1bSArPSBhZ2dyZWdhdGVfYW55KG5vZGUubm9kZXNbaV0sIGZpZWxkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZighbm9kZS52YWx1ZXMpXHJcbiAgICB7XHJcbiAgICAgIG5vZGUudmFsdWVzID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgbm9kZS52YWx1ZXNbZmllbGRdID0gY2hpbGRyZW5TdW07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBtb2RlbFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGQgKyBub2RlLmlkKS52YWx1ZSA9IGNoaWxkcmVuU3VtOyAgICAgICAgIC8vdXBkYXRlIHRoZSB2aWV3XHJcblxyXG4gICAgcmV0dXJuIGNoaWxkcmVuU3VtO1xyXG4gIH1cclxufSIsInZhciBET1dOX0FSUk9XX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2Rvd24tYXJyb3cucG5nJztcclxudmFyIENIRUNLX01BUktfSU1BR0VfUEFUSCA9ICdpbWFnZXMvY2hlY2ttYXJrLnBuZyc7XHJcbnZhciBCTEFOS19NQVJLX0lNQUdFX1BBVEggPSAnaW1hZ2VzL2JsYW5rbWFyay5wbmcnOyIsIi8qXHJcbkNvcHlyaWdodCAoYykgMjAwOC0yMDExLCB3d3cucmVkaXBzLm5ldCBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5Db2RlIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0QgTGljZW5zZTogaHR0cDovL3d3dy5yZWRpcHMubmV0L2xpY2Vuc2UvXHJcbmh0dHA6Ly93d3cucmVkaXBzLm5ldC9qYXZhc2NyaXB0L2RyYWctYW5kLWRyb3AtdGFibGUtY29udGVudC9cclxuKi9cclxuXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIFJFRElQUyA9IFJFRElQUyB8fCB7fTsgICAgICAvL2NyZWF0ZSBSRURJUFMgbmFtZXNwYWNlIChpZiBpcyBub3QgYWxyZWFkeSBkZWZpbmVkIGluIGFub3RoZXIgUkVESVBTIHBhY2thZ2UpXHJcblxyXG4vL1JFRElQUy5kcmFnIGlzIGEgSmF2YVNjcmlwdCBkcmFnIGFuZCBkcm9wIGxpYnJhcnkgZm9jdXNlZCBvbiBkcmFnZ2luZyB0YWJsZSBjb250ZW50IChESVYgZWxlbWVudHMpIGFuZCB0YWJsZSByb3dzLlxyXG5SRURJUFMuZHJhZyA9IChmdW5jdGlvbiAoKVxyXG57XHJcbiAgICAvLyBtZXRob2RzXHJcbiAgdmFyIGluaXQsICAgICAgICAgICAvLyBpbml0aWFsaXphdGlvblxyXG4gICAgZW5hYmxlRHJhZywgICAgICAgICAvLyBtZXRob2QgYXR0YWNoZXMgLyBkZXRhY2hlcyBvbm1vdXNlZG93biBhbmQgb25zY3JvbGwgZXZlbnQgaGFuZGxlcnMgZm9yIERJViBlbGVtZW50c1xyXG4gICAgZW5hYmxlRGl2cyxcclxuICAgIGhhbmRsZXJPbk1vdXNlRG93biwgICAgIC8vIG9ubW91c2Vkb3duIGhhbmRsZXJcclxuICAgIGhhbmRsZXJPbk1vdXNlVXAsICAgICAvLyBvbm1vdXNldXAgaGFuZGxlclxyXG4gICAgaGFuZGxlck9uTW91c2VNb3ZlLCAgICAgLy8gb25tb3VzZW1vdmUgaGFuZGxlciBmb3IgdGhlIGRvY3VtZW50IGxldmVsXHJcbiAgICBlbGVtZW50RHJvcCwgICAgICAgIC8vIGRyb3AgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbFxyXG4gICAgcmVzZXRTdHlsZXMsICAgICAgICAvLyByZXNldCBvYmplY3Qgc3R5bGVzIGFmdGVyIGVsZW1lbnQgaXMgZHJvcHBlZFxyXG4gICAgcmVnaXN0ZXJFdmVudHMsICAgICAgIC8vIHJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3IgRElWIGVsZW1lbnRcclxuICAgIGNlbGxDaGFuZ2VkLCAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2QgY2FsbGVkIGZyb20gaGFuZGxlck9uTW91c2VNb3ZlKCksIGF1dG9TY3JvbGxYKCksIGF1dG9TY3JvbGxZKClcclxuICAgIGhhbmRsZXJPblJlc2l6ZSwgICAgICAvLyBvbnJlc2l6ZSB3aW5kb3cgZXZlbnQgaGFuZGxlclxyXG4gICAgc2V0VGFibGVSb3dDb2x1bW4sICAgICAgLy8gZnVuY3Rpb24gc2V0cyBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGxcclxuICAgIHNldFBvc2l0aW9uLCAgICAgICAgLy8gZnVuY3Rpb24gc2V0cyBjb2xvciBmb3IgdGhlIGN1cnJlbnQgdGFibGUgY2VsbCBhbmQgcmVtZW1iZXJzIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBjb2xvclxyXG4gICAgc2V0VGRTdHlsZSwgICAgICAgICAvLyBtZXRob2Qgc2V0cyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIGZvciBURFxyXG4gICAgZ2V0VGRTdHlsZSwgICAgICAgICAvLyBtZXRob2QgcmV0dXJucyBvYmplY3QgY29udGFpbmluZyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIGZvciBURFxyXG4gICAgYm94T2Zmc2V0LCAgICAgICAgICAvLyBjYWxjdWxhdGVzIG9iamVjdCAoYm94KSBvZmZzZXQgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdClcclxuICAgIGNhbGN1bGF0ZUNlbGxzLCAgICAgICAvLyBjYWxjdWxhdGVzIHRhYmxlIGNvbHVtbnMgYW5kIHJvdyBvZmZzZXRzIChjZWxscyBkaW1lbnNpb25zKVxyXG4gICAgZ2V0U2Nyb2xsUG9zaXRpb24sICAgICAgLy8gcmV0dXJucyBzY3JvbGwgcG9zaXRpb25zIGluIGFycmF5XHJcbiAgICBhdXRvU2Nyb2xsWCwgICAgICAgIC8vIGhvcml6b250YWwgYXV0byBzY3JvbGwgZnVuY3Rpb25cclxuICAgIGF1dG9TY3JvbGxZLCAgICAgICAgLy8gdmVydGljYWwgYXV0byBzY3JvbGwgZnVuY3Rpb25cclxuICAgIGNvcHlQcm9wZXJ0aWVzLCAgICAgICAvLyBtZXRob2QgY29waWVzIGN1c3RvbSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIGVsZW1lbnQgdG8gdGhlIGNsb25lZCBlbGVtZW50LlxyXG4gICAgY2xvbmVMaW1pdCwgICAgICAgICAvLyBjbG9uZSBsaW1pdCAoYWZ0ZXIgY2xvbmluZyBvYmplY3QsIHRha2UgY2FyZSBhYm91dCBjbGltaXQxX1ggb3IgY2xpbWl0Ml9YIGNsYXNzbmFtZXMpXHJcbiAgICBnZXRTdHlsZSwgICAgICAgICAvLyBtZXRob2QgcmV0dXJucyBzdHlsZSB2YWx1ZSBvZiByZXF1ZXN0ZWQgb2JqZWN0IGFuZCBzdHlsZSBuYW1lXHJcbiAgICBmaW5kUGFyZW50LCAgICAgICAgIC8vIG1ldGhvZCByZXR1cm5zIGEgcmVmZXJlbmNlIG9mIHRoZSByZXF1aXJlZCBwYXJlbnQgZWxlbWVudFxyXG4gICAgcm93T3BhY2l0eSwgICAgICAgICAvLyBtZXRob2Qgc2V0cyBvcGFjaXR5IHRvIHRhYmxlIHJvdyAoZWwsIG9wYWNpdHksIGNvbG9yKVxyXG4gICAgcm93Q2xvbmUsICAgICAgICAgLy8gY2xvbmUgdGFibGUgcm93IC0gaW5wdXQgcGFyYW1ldGVyIGlzIERJViB3aXRoIGNsYXNzIG5hbWUgXCJyZWRpcHMtcm93XCIgLT4gRElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiXHJcbiAgICByb3dEcm9wLCAgICAgICAgICAvLyBmdW5jdGlvbiBkcm9wcyAoZGVsZXRlIG9sZCAmIGluc2VydCBuZXcpIHRhYmxlIHJvdyAoaW5wdXQgcGFyYW1ldGVycyBhcmUgY3VycmVudCB0YWJsZSBhbmQgcm93KVxyXG4gICAgbm9ybWFsaXplLCAgICAgICAgICAvLyBwcml2YXRlIG1ldGhvZCByZXR1cm5zIG5vcm1hbGl6ZWQgc3BhY2VzIGZyb20gaW5wdXQgc3RyaW5nXHJcblxyXG4gICAgLy8gcHJpdmF0ZSBwYXJhbWV0ZXJzXHJcbiAgICBvYmpNYXJnaW4gPSBudWxsLCAgICAgLy8gc3BhY2UgZnJvbSBjbGlja2VkIHBvaW50IHRvIHRoZSBvYmplY3QgYm91bmRzICh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpXHJcblxyXG4gICAgLy8gd2luZG93IHdpZHRoIGFuZCBoZWlnaHQgKHBhcmFtZXRlcnMgYXJlIHNldCBpbiBvbmxvYWQgYW5kIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIpLCBqdXN0IGZvciBhIG5vdGU6IHdpbmRvdyBhbmQgV2luZG93IGlzIHJlc2VydmVkIHdvcmQgaW4gSlMgc28gSSBuYW1lZCB2YXJpYWJsZSBcInNjcmVlblwiKVxyXG4gICAgc2NyZWVuID0ge3dpZHRoOiAwLCBoZWlnaHQ6IDB9LFxyXG5cclxuICAgIC8vIGRlZmluZSBzY3JvbGwgb2JqZWN0IHdpdGggY29udGFpbmVkIHByb3BlcnRpZXMgKHRoaXMgaXMgcHJpdmF0ZSBwcm9wZXJ0eSlcclxuICAgIHNjcm9sbERhdGEgPSB7d2lkdGggOiBudWxsLCAvLyBzY3JvbGwgd2lkdGggb2YgdGhlIHdpbmRvdyAoaXQgaXMgdXN1YWxseSBncmVhdGVyIHRoZW4gd2luZG93KVxyXG4gICAgICAgIGhlaWdodCA6IG51bGwsICAgIC8vIHNjcm9sbCBoZWlnaHQgb2YgdGhlIHdpbmRvdyAoaXQgaXMgdXN1YWxseSBncmVhdGVyIHRoZW4gd2luZG93KVxyXG4gICAgICAgIGNvbnRhaW5lciA6IFtdLCAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzIChjb250YWlucyBhdXRvc2Nyb2xsIGFyZWFzLCByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5lciBhbmQgc2Nyb2xsIGRpcmVjdGlvbilcclxuICAgICAgICBvYmogOiBudWxsfSwgICAgLy8gc2Nyb2xsIG9iamVjdCAobmVlZGVkIGluIGF1dG9zY3JvbGwgZm9yIHJlY3Vyc2l2ZSBjYWxscylcclxuXHJcbiAgICBlZGdlID0ge3BhZ2U6IHt4OiAwLCB5OiAwfSwgLy8gYXV0b3Njcm9sbCBib3VuZCB2YWx1ZXMgZm9yIHBhZ2UgYW5kIGRpdiBhcyBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgIGRpdjogIHt4OiAwLCB5OiAwfSwgLy8gY2xvc2VyIHRvIHRoZSBlZGdlLCBmYXN0ZXIgc2Nyb2xsaW5nXHJcbiAgICAgICAgZmxhZzoge3g6IDAsIHk6IDB9fSwvLyBmbGFncyBhcmUgbmVlZGVkIHRvIHByZXZlbnQgbXVsdGlwbGUgY2FsbHMgb2YgYXV0b1Njcm9sbFggYW5kIGF1dG9TY3JvbGxZIGZyb20gb25tb3VzZW1vdmUgZXZlbnQgaGFuZGxlclxyXG5cclxuICAgIGJnU3R5bGVPbGQsICAgICAgICAgLy8gKG9iamVjdCkgb2xkIHRkIHN0eWxlcyAoYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlcylcclxuXHJcbiAgICB0YWJsZSwgICAgICAgIC8vIHRhYmxlIG9mZnNldHMgYW5kIHJvdyBvZmZzZXRzIChpbml0aWFsaXplZCBpbiBvbmxvYWQgZXZlbnQpXHJcbiAgICBtb3ZlZCwgICAgICAgICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBlbGVtZW50IGlzIG1vdmVkXHJcbiAgICBjbG9uZWQsICAgICAgICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBlbGVtZW50IGlzIGNsb25lZFxyXG4gICAgY2xvbmVkSWQgPSBbXSwgICAgICAgIC8vIG5lZWRlZCBmb3IgaW5jcmVtZW50IElEIG9mIGNsb25lZCBlbGVtZW50c1xyXG4gICAgY3VycmVudENlbGwgPSBbXSwgICAgIC8vIGN1cnJlbnQgY2VsbCBib3VuZHMgKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCkgYW5kIFwiY29udGFpblRhYmxlXCIgZmxhZyBmb3IgbmVzdGVkIHRhYmxlc1xyXG4gICAgZHJhZ0NvbnRhaW5lciA9IG51bGwsICAgLy8gZHJhZyBjb250YWluZXIgcmVmZXJlbmNlXHJcbiAgICBkaXZCb3ggPSBudWxsLCAgICAgICAgLy8gZGl2IGRyYWcgYm94OiB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgbWFyZ2luIChkZWNyZWFzZSBudW1iZXIgY2FsbHMgb2Ygc2V0VGFibGVSb3dDb2x1bW4pXHJcbiAgICBwb2ludGVyID0ge3g6IDAsIHk6IDB9LCAgIC8vIG1vdXNlIHBvaW50ZXIgcG9zaXRpb24gKHRoaXMgcHJvcGVydGllcyBhcmUgc2V0IGluIGhhbmRsZXJPbk1vdXNlTW92ZSgpIC0gbmVlZGVkIGZvciBhdXRvc2Nyb2xsKVxyXG4gICAgdGhyZXNob2xkID0ge3g6IDAsICAgICAgLy8gaW5pdGlhbCB4LCB5IHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICB2YWx1ZTogNywgICAvLyB0aHJlc2hvbGQgZGlzdGFuY2UgdmFsdWVcclxuICAgICAgICAgIGZsYWc6IGZhbHNlfSwgLy8gdGhyZXNob2xkIGZsYWdcclxuICAgIHNoaWZ0S2V5ID0gZmFsc2UsICAgICAvLyAoYm9vbGVhbikgdHJ1ZSBpZiBzaGlmdCBrZXkgaXMgcHJlc3NlZCAoc2V0IGluIGhhbmRsZXJfbW91c2Vkb3duKVxyXG4gICAgY2xvbmVDbGFzcyA9IGZhbHNlLCAgICAgLy8gKGJvb2xlYW4pIHRydWUgaWYgY2xpY2tlZCBlbGVtZW50IGNvbnRhaW5zIGNsb25lIGluIGNsYXNzIG5hbWUgKHNldCBpbiBoYW5kbGVyX21vdXNlZG93bilcclxuICAgIHdpbmRvd1Njcm9sbFBvc2l0aW9uLCAgIC8vIChhcnJheSkgdG9wIGFuZCBsZWZ0IHdpbmRvdyBvZmZzZXQgKHNldCBpbiBjYWxjdWxhdGVDZWxscyBhbmQgdXNlZCBpbiBib3hPZmZzZXQpXHJcblxyXG4gICAgLy8gc2VsZWN0ZWQsIHByZXZpb3VzIGFuZCBzb3VyY2Ugcm93IGFuZCBjZWxsIChwcml2YXRlIHBhcmFtZXRlcnMgdG9vKVxyXG4gICAgcm93ID0gbnVsbCxcclxuICAgIHJvd19vbGQgPSBudWxsLFxyXG4gICAgcm93X3NvdXJjZSA9IG51bGwsXHJcbiAgICBjZWxsID0gbnVsbCxcclxuICAgIGNlbGxfb2xkID0gbnVsbCxcclxuICAgIGNlbGxfc291cmNlID0gbnVsbCxcclxuXHJcbiAgICAvLyB2YXJpYWJsZXMgaW4gdGhlIHByaXZhdGUgc2NvcGUgcmV2ZWFsZWQgYXMgcHVibGljIChzZWUgaW5pdCgpIG1ldGhvZClcclxuICAgIG9iaiA9IGZhbHNlLCAgICAgICAgLy8gKG9iamVjdCkgbW92ZWQgb2JqZWN0XHJcbiAgICBvYmpPbGQgPSBmYWxzZSwgICAgICAgLy8gKG9iamVjdCkgcHJldmlvdXNseSBtb3ZlZCBvYmplY3QgKGJlZm9yZSBjbGlja2VkIG9yIGNsb25lZClcclxuICAgIGhvdmVyID0ge2NvbG9yVGQ6ICcjRkZDRkFFJywgY29sb3JUcjogJyM5QkIzREEnfSxcclxuICAgIHNjcm9sbCA9IHtlbmFibGUgOiB0cnVlLCAgLy8gKGJvb2xlYW4pIGVuYWJsZS9kaXNhYmxlIGF1dG9zY3JvbGwgZnVuY3Rpb24gKGRlZmF1bHQgaXMgdHJ1ZSlcclxuICAgICAgICBib3VuZCA6IDI1LCAgICAgLy8gKGludGVnZXIpIGJvdW5kIHdpZHRoIGZvciBhdXRvc2Nyb2xsXHJcbiAgICAgICAgc3BlZWQgOiAyMH0sICAgIC8vIChpbnRlZ2VyKSBzY3JvbGwgc3BlZWQgaW4gbWlsbGlzZWNvbmRzXHJcbiAgICBzdHlsZSA9IHsvL2JvcmRlckVuYWJsZWQgOiAnc29saWQnLCAvLyAoc3RyaW5nKSBib3JkZXIgc3R5bGUgZm9yIGVuYWJsZWQgZWxlbWVudHNcclxuICAgICAgICBib3JkZXJEaXNhYmxlZCA6ICdkb3R0ZWQnLCAgLy8gKHN0cmluZykgYm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICAgIG9wYWNpdHlEaXNhYmxlZCA6ICcnLCAgIC8vIChpbnRlZ2VyKSBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHNcclxuICAgICAgICByb3dFbXB0eUNvbG9yIDogJ3doaXRlJ30sIC8vIChzdHJpbmcpIGNvbG9yIG9mIGVtcHR5IHJvd1xyXG4gICAgdGQgPSB7fSwgICAgICAgICAgICAvLyAob2JqZWN0KSBjb250YWlucyByZWZlcmVuY2UgdG8gc291cmNlIChzZXQgaW4gb25tb3VzZWRvd24pLCBjdXJyZW50IChzZXQgaW4gb25tb3VzZW1vdmUgYW5kIGF1dG9zY3JvbGwpLCBwcmV2aW91cyAoc2V0IGluIG9ubW91c2Vtb3ZlIGFuZCBhdXRvc2Nyb2xsKSBhbmQgdGFyZ2V0IGNlbGwgKHNldCBpbiBvbm1vdXNldXApXHJcbiAgICBjbG9uZSA9IHtrZXlEaXYgOiBmYWxzZSwgICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIGVsZW1lbnRzIGNvdWxkIGJlIGNsb25lZCB3aXRoIHByZXNzZWQgU0hJRlQga2V5XHJcbiAgICAgICAga2V5Um93IDogZmFsc2UsICAgICAvLyAoYm9vbGVhbikgaWYgdHJ1ZSwgcm93cyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleVxyXG4gICAgICAgIHNlbmRCYWNrIDogZmFsc2UsICAgLy8gKGJvb2xlYW4pIGlmIHRydWUsIHRoZW4gY2xvbmVkIGVsZW1lbnQgY2FuIGJlIHJldHVybmVkIHRvIGl0cyBzb3VyY2VcclxuICAgICAgICBkcm9wIDogZmFsc2V9LCAgICAgIC8vIChib29sZWFuKSBpZiB0cnVlLCB0aGVuIGNsb25lZCBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIGRyb3BwZWQgdG8gdGhlIHRhYmxlIG5vIG1hdHRlciBpZiBkcm9wcGVkIG91dHNpZGUgb2YgdGhlIHRhYmxlXHJcbiAgICBcclxuICAgIGV2ZW50ID0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAob2JqZWN0KSBldmVudCBoYW5kbGVyc1xyXG4gICAge1xyXG4gICAgICBjbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgY2xvbmVkRHJvcHBlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBjbG9uZWRFbmQxIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGNsb25lZEVuZDIgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgZHJvcHBlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBkcm9wcGVkQmVmb3JlIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIGZpbmlzaCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICBub3RDbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgbm90TW92ZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Q2hhbmdlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dDbGlja2VkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Nsb25lZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dEcm9wcGVkIDogZnVuY3Rpb24gKCkge30sXHJcbiAgICAgIHJvd0Ryb3BwZWRCZWZvcmUgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93RHJvcHBlZFNvdXJjZSA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dNb3ZlZCA6IGZ1bmN0aW9uICgpIHt9LFxyXG4gICAgICByb3dOb3RDbG9uZWQgOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgICAgcm93Tm90TW92ZWQgOiBmdW5jdGlvbiAoKSB7fVxyXG4gICAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIERyYWcgY29udGFpbmVyIGluaXRpYWxpemF0aW9uLiBJdCBzaG91bGQgYmUgY2FsbGVkIGF0IGxlYXN0IG9uY2UgYW5kIGl0J3MgcG9zc2libGUgdG8gY2FsbCBhIG1ldGhvZCBtYW55IHRpbWVzLiBFdmVyeSBwYWdlIHNob3VsZCBoYXZlIGF0IGxlYXN0IG9uZSBkcmFnIGNvbnRhaW5lci5cclxuICAgKiBJZiBSRURJUFMuZHJhZy5pbml0KCkgaXMgY2FsbGVkIHdpdGhvdXQgaW5wdXQgcGFyYW1ldGVyLCBsaWJyYXJ5IHdpbGwgc2VhcmNoIGZvciBkcmFnIGNvbnRhaW5lciB3aXRoIGlkPVwicmVkaXBzLWRyYWdcIi5cclxuICAgKiBPbmx5IHRhYmxlcyBpbnNpZGUgZHJhZyBjb250YWluZXIgd2lsbCBiZSBzY2FubmVkLiBJdCBpcyBwb3NzaWJsZSB0byBoYXZlIHNldmVyYWwgZHJhZyBjb250YWluZXJzIHRvdGFseSBzZXBhcmF0ZWQgKGVsZW1lbnRzIGZyb20gb25lIGNvbnRhaW5lciB3aWxsIG5vdCBiZSB2aXNpYmxlIHRvIG90aGVyIGRyYWcgY29udGFpbmVycykuXHJcbiAgICogXCJpbml0XCIgbWV0aG9kIGNhbGxzIGVuYWJsZURyYWcuIElmIHRhYmxlcyBhcmUgZ2VuZXJhdGVkIGR5bmFtaWNhbGx5IHRoZW4gUkVESVBTLmluaXQoKSBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCB0byBzZXQgY3VzdG9tIHByb3BlcnRpZXMgdG8gdGFibGVzICh0YWJsZSBpbml0aWFsaXphdGlvbikuXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtkY10gRHJhZyBjb250YWluZXIgSWQgKGRlZmF1bHQgaXMgXCJyZWRpcHMtZHJhZ1wiKS5cclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGluaXQgZHJhZyBjb250YWluZXIgKHdpdGggZGVmYXVsdCBpZD1cInJlZGlwcy1kcmFnXCIpXHJcbiAgICogUkVESVBTLmRyYWcuaW5pdCgpO1xyXG4gICAqXHJcbiAgICogLy8gaW5pdCBkcmFnIGNvbnRhaW5lciB3aXRoIGlkPVwibXktZHJhZzFcIlxyXG4gICAqIFJFRElQUy5kcmFnLmluaXQoJ215LWRyYWcxJyk7XHJcbiAgICovXHJcbiAgaW5pdCA9IGZ1bmN0aW9uICgpXHJcbiAge1xyXG4gICAgZHJhZ0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWRpcHMtZHJhZycpOyAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgZHJhZyBjb250YWluZXJcclxuXHJcbiAgICB3aW5kb3dTY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5pdGlhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcblxyXG4gICAgLy8gYXBwZW5kIERJViBpZD1cInJlZGlwc19jbG9uZVwiIGlmIERJViBkb2Vzbid0IGV4aXN0IChuZWVkZWQgZm9yIGNsb25pbmcgRElWIGVsZW1lbnRzKVxyXG4gICAgLy8gaWYgYXV0b21hdGljIGNyZWF0aW9uIGlzbid0IHByZWNpc2UgZW5vdWdoLCB1c2VyIGNhbiBtYW51YWxseSBjcmVhdGUgYW5kIHBsYWNlIGVsZW1lbnQgd2l0aCBpZD1cInJlZGlwc19jbG9uZVwiIHRvIHByZXZlbnQgd2luZG93IGV4cGFuZGluZyAodGhlbiB0aGlzIGNvZGUgd2lsbCBiZSBza2lwcGVkKVxyXG4gICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVkaXBzX2Nsb25lJykpXHJcbiAgICB7XHJcbiAgICAgIHZhciByZWRpcHNDbG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICByZWRpcHNDbG9uZS5pZCA9ICdyZWRpcHNfY2xvbmUnO1xyXG4gICAgICByZWRpcHNDbG9uZS5zdHlsZS53aWR0aCA9IHJlZGlwc0Nsb25lLnN0eWxlLmhlaWdodCA9ICcxcHgnO1xyXG4gICAgICBkcmFnQ29udGFpbmVyLmFwcGVuZENoaWxkKHJlZGlwc0Nsb25lKTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVEcmFnKCdpbml0JywgJy5yZWRpcHMtZHJhZycpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhdHRhY2ggb25tb3VzZWRvd24gZXZlbnQgaGFuZGxlciB0byB0aGUgRElWIGVsZW1lbnRzLCBhdHRhY2ggb25zY3JvbGw9J2NhbGN1bGF0ZUNlbGxzJyBmb3IgRElWIGVsZW1lbnRzIHdpdGggJ3Njcm9sbCcgaW4gY2xhc3MgbmFtZSAocHJlcGFyZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhcylcclxuICAgIHRhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyZWVUYWJsZScpO1xyXG4gICAgdGFibGUucmVkaXBzID0ge307XHJcblxyXG4gICAgaGFuZGxlck9uUmVzaXplKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGluaXRpYWwgd2luZG93IHdpZHRoL2hlaWdodCwgc2Nyb2xsIHdpZHRoL2hlaWdodCBhbmQgZGVmaW5lIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIsIG9ucmVzaXplIGV2ZW50IGhhbmRsZXIgY2FsbHMgY2FsY3VsYXRlIGNvbHVtbnNcclxuICAgIFJFRElQUy5ldmVudC5hZGQod2luZG93LCAncmVzaXplJywgaGFuZGxlck9uUmVzaXplKTtcclxuICAgIFJFRElQUy5ldmVudC5hZGQod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgIC8vIGF0dGFjaCBvbnNjcm9sbCBldmVudCB0byB0aGUgd2luZG93IChuZWVkZWQgZm9yIHJlY2FsY3VsYXRpbmcgdGFibGUgY2VsbHMgcG9zaXRpb25zKVxyXG4gIH07XHJcblxyXG5cclxuICAvLyBvbm1vdXNlZG93biBldmVudCBoYW5kbGVyLiAgVGhpcyBldmVudCBoYW5kbGVyIGlzIGF0dGFjaGVkIHRvIGV2ZXJ5IERJViBlbGVtZW50IGluIGRyYWcgY29udGFpbmVyIChwbGVhc2Ugc2VlIFwiZW5hYmxlRHJhZ1wiKS5cclxuICBoYW5kbGVyT25Nb3VzZURvd24gPSBmdW5jdGlvbiAoZSlcclxuICB7XHJcbiAgICB2YXIgZXZ0ID0gZSB8fCB3aW5kb3cuZXZlbnQ7ICAgICAgICAgIC8vIGRlZmluZSBldmVudCAoY3Jvc3MgYnJvd3NlcilcclxuICAgIHZhciBvZmZzZXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2JqZWN0IG9mZnNldFxyXG4gICAgdmFyIHBvc2l0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGlvbiBvZiB0YWJsZSBvciBjb250YWluZXIgYm94IG9mIHRhYmxlIChpZiBoYXMgcG9zaXRpb246Zml4ZWQgdGhlbiBleGNsdWRlIHNjcm9sbCBvZmZzZXQpXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG5cclxuICAgIGV2dC5jYW5jZWxCdWJibGUgPSB0cnVlOyAgICAgICAgICAgICAgLy8gc3RvcCBldmVudCBwcm9wYWdhdGlvbiAob25seSBmaXJzdCBjbGlja2VkIGVsZW1lbnQgd2lsbCByZWdpc3RlciBvbm1vdXNlZG93biBldmVudCksIG5lZWRlZCBpbiBjYXNlIG9mIHBsYWNpbmcgdGFibGUgaW5zaWRlIG9mIDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiPiAoYWZ0ZXIgZWxlbWVudCB3YXMgZHJvcHBlZCB0byB0aGlzIHRhYmxlIGl0IGNvdWxkbid0IGJlIG1vdmVkIG91dCBhbnkgbW9yZSAtIHRhYmxlIGFuZCBlbGVtZW50IG1vdmVkIHRvZ2V0aGVyIGJlY2F1c2UgdGFibGUgY2FwdHVyZXMgbW91c2Vkb3duIGV2ZW50IGFsc28gaW4gYnViYmxpbmcgcHJvY2VzKVxyXG4gICAgaWYgKGV2dC5zdG9wUHJvcGFnYXRpb24pXHJcbiAgICB7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICBzaGlmdEtleSA9IGV2dC5zaGlmdEtleTsgICAgICAgICAgICAgIC8vIHNldCB0cnVlIG9yIGZhbHNlIGlmIHNoaWZ0IGtleSBpcyBwcmVzc2VkXHJcblxyXG4gICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGV4dCBzZWxlY3Rpb24gKENocm9tZSwgRkYsIE9wZXJhLCBTYWZhcmkpXHJcbiAgICB7XHJcbiAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiBkb2N1bWVudC5zZWxlY3Rpb24udHlwZSA9PT0gXCJUZXh0XCIpICAvLyBJRThcclxuICAgIHtcclxuICAgICAgdHJ5IHsgZG9jdW1lbnQuc2VsZWN0aW9uLmVtcHR5KCk7IH0gY2F0Y2ggKGVycm9yKSB7IH0gICAgICAgICAgICAgLy8gaWdub3JlIGVycm9yIHRvIGFzIGEgd29ya2Fyb3VuZCBmb3IgYnVnIGluIElFOFxyXG4gICAgfVxyXG5cclxuICAgIFggPSBwb2ludGVyLnggPSBldnQuY2xpZW50WDtcclxuICAgIFkgPSBwb2ludGVyLnkgPSBldnQuY2xpZW50WTtcclxuXHJcbiAgICB0aHJlc2hvbGQueCA9IFg7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBpbml0aWFsIHRocmVzaG9sZCBwb3NpdGlvbiAobmVlZGVkIGZvciBjYWxjdWxhdGluZyBkaXN0YW5jZSlcclxuICAgIHRocmVzaG9sZC55ID0gWTtcclxuICAgIHRocmVzaG9sZC5mbGFnID0gZmFsc2U7XHJcblxyXG4gICAgUkVESVBTLmRyYWcub2JqT2xkID0gb2JqT2xkID0gb2JqIHx8IHRoaXM7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1lbWJlciBwcmV2aW91cyBvYmplY3QgaWYgZGVmaW5lZCBvciBzZXQgdG8gdGhlIGNsaWNrZWQgb2JqZWN0XHJcbiAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSB0aGlzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCByZWZlcmVuY2UgdG8gdGhlIGNsaWNrZWQgb2JqZWN0XHJcblxyXG4gICAgY2xvbmVDbGFzcyA9IG9iai5jbGFzc05hbWUuaW5kZXhPZigncmVkaXBzLWNsb25lJykgPiAtMTsgICAgICAgICAgICAvLyBzZXQgdHJ1ZSBvciBmYWxzZSBpZiBjbGlja2VkIGVsZW1lbnQgY29udGFpbnMgXCJyZWRpcHMtY2xvbmVcIiBjbGFzcyBuYW1lIChuZWVkZWQgZm9yIGNsb25lIGVsZW1lbnQgYW5kIGNsb25lIHRhYmxlIHJvdylcclxuXHJcbiAgICBSRURJUFMuZHJhZy5vYmogPSBvYmogPSByb3dDbG9uZShvYmopOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgcmV0dXJuIHJlZmVyZW5jZSBvZiB0aGUgY3VycmVudCByb3cgKGRvIG5vdCBjbG9uZSlcclxuXHJcbiAgICBjYWxjdWxhdGVDZWxscygpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB1c2VyIGhhcyB1c2VkIGEgbW91c2UgZXZlbnQgdG8gaW5jcmVhc2UgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIHRhYmxlIC0gY2FsbCBjYWxjdWxhdGVDZWxscygpXHJcblxyXG4gICAgcm93ID0gY2VsbCA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCByb3cgYW5kIGNlbGwgaW5kZXhlcyAobmVlZGVkIGluIGNhc2Ugb2YgZW5hYmxlIC8gZGlzYWJsZSB0YWJsZXMpXHJcbiAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgYW5kIHJlbWVtYmVyIHNvdXJjZSBwb3NpdGlvbiAob2xkIHBvc2l0aW9uIGlzIGluaXRpYWxseSB0aGUgc2FtZSBhcyBzb3VyY2UgcG9zaXRpb24pXHJcbiAgICByb3dfc291cmNlID0gcm93X29sZCA9IHJvdztcclxuICAgIGNlbGxfc291cmNlID0gY2VsbF9vbGQgPSBjZWxsO1xyXG5cclxuICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0NsaWNrZWQodGQuY3VycmVudCk7XHJcblxyXG4gICAgLy8gaWYgc3RhcnQgcG9zaXRpb24gY2Fubm90IGJlIGRlZmluZWQgdGhlbiB1c2VyIHByb2JhYmx5IGNsaWNrZWQgb24gZWxlbWVudCB0aGF0IGJlbG9uZ3MgdG8gdGhlIGRpc2FibGVkIHRhYmxlIChvciBzb21ldGhpbmcgZWxzZSBoYXBwZW5lZCB0aGF0IHdhcyBub3Qgc3VwcG9zZWQgdG8gaGFwcGVuIC0gZXZlcnkgZWxlbWVudCBzaG91bGQgYmVsb25nIHRvIHRoZSB0YWJsZSkgdGhpcyBjb2RlIG11c3QgZ28gYWZ0ZXIgZXhlY3V0aW9uIG9mIGV2ZW50IGhhbmRsZXJzXHJcbiAgICBpZiAocm93ID09PSBudWxsIHx8IGNlbGwgPT09IG51bGwpXHJcbiAgICB7XHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcnVuIHNldFRhYmxlUm93Q29sdW1uKCkgYWdhaW4gYmVjYXVzZSBzb21lIG9mIHRhYmxlcyBtaWdodCBiZSBlbmFibGVkIGluIGhhbmRsZXIgZXZlbnRzIGFib3ZlXHJcbiAgICAgIHJvd19zb3VyY2UgPSByb3dfb2xkID0gcm93O1xyXG4gICAgICBjZWxsX3NvdXJjZSA9IGNlbGxfb2xkID0gY2VsbDtcclxuXHJcbiAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgY2VsbCA9PT0gbnVsbCkgIC8vIG5vLCBjbGlja2VkIGVsZW1lbnQgaXMgb24gdGhlIGRpc2FibGVkIHRhYmxlIC0gc29ycnlcclxuICAgICAge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZWQgPSBjbG9uZWQgPSBmYWxzZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBcIm1vdmVkXCIgZmxhZyAobmVlZGVkIGZvciBjbG9uZSBvYmplY3QgaW4gaGFuZGxlck9uTW91c2VNb3ZlKSBhbmQgXCJjbG9uZWRcIiBmbGFnXHJcblxyXG4gICAgUkVESVBTLmV2ZW50LmFkZChkb2N1bWVudCwgJ21vdXNlbW92ZScsIGhhbmRsZXJPbk1vdXNlTW92ZSk7ICAgICAgICAvLyBhY3RpdmF0ZSBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyIG9uIGRvY3VtZW50IG9iamVjdFxyXG4gICAgUkVESVBTLmV2ZW50LmFkZChkb2N1bWVudCwgJ21vdXNldXAnLCBoYW5kbGVyT25Nb3VzZVVwKTsgICAgICAgICAgICAvLyBhY3RpdmF0ZSBvbm1vdXNldXAgZXZlbnQgaGFuZGxlciBvbiBkb2N1bWVudCBvYmplY3RcclxuXHJcbiAgICBpZiAocm93ICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3IgaWYgaXMgcG9zc2libGVcclxuICAgIHtcclxuICAgICAgYmdTdHlsZU9sZCA9IGdldFRkU3R5bGUocm93KTtcclxuICAgIH1cclxuXHJcbiAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLCAncG9zaXRpb24nKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0YWJsZSBDU1MgcG9zaXRpb24gKG5lZWRlZCBmb3IgZXhjbHVzaW9uIFwic2Nyb2xsIG9mZnNldFwiIGlmIHRhYmxlIGJveCBoYXMgcG9zaXRpb24gZml4ZWQpXHJcblxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZSBkb2Vzbid0IGhhdmUgc3R5bGUgcG9zaXRpb246Zml4ZWQgdGhlbiB0YWJsZSBjb250YWluZXIgc2hvdWxkIGJlIHRlc3RlZFxyXG4gICAge1xyXG4gICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLnBhcmVudE5vZGUsICdwb3NpdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIG9mZnNldCA9IGJveE9mZnNldChvYmosIHBvc2l0aW9uKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2JqZWN0IG9mZnNldFxyXG4gICAgb2JqTWFyZ2luID0gW1kgLSBvZmZzZXRbMF0sIG9mZnNldFsxXSAtIFgsIG9mZnNldFsyXSAtIFksIFggLSBvZmZzZXRbM11dOyAgIC8vIGNhbGN1bGF0ZSBvZmZzZXQgZnJvbSB0aGUgY2xpY2tlZCBwb2ludCBpbnNpZGUgZWxlbWVudCB0byB0aGUgdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0IHNpZGUgb2YgdGhlIGVsZW1lbnRcclxuXHJcbiAgICByZXR1cm4gZmFsc2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzYWJsZSB0ZXh0IHNlbGVjdGlvbiBmb3Igbm9uIElFIGJyb3dzZXJzXHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZHMgcmV0dXJucyByZWZlcmVuY2UgdG8gdGhlIHRhYmxlIHJvdyBvciBjbG9uZXMgdGFibGUgcm93LlxyXG4gICAqIElmIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlRG93bjpcclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmlucHV0IHBhcmFtZXRlciBpcyBESVYgY2xhc3M9XCJyZWRpcHMtcm93XCI8L2xpPlxyXG4gICAqIDxsaT5tZXRob2Qgd2lsbCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjdXJyZW50IHJvdzwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBJZiBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZU1vdmU6XHJcbiAgICogPHVsPlxyXG4gICAqIDxsaT5pbnB1dCBwYXJhbWV0ZXIgaXMgVFIgKGN1cnJlbnQgcm93KSAtIHByZXZpb3VzbHkgcmV0dXJuZWQgd2l0aCB0aGlzIGZ1bmN0aW9uPC9saT5cclxuICAgKiA8bGk+bWV0aG9kIHdpbGwgY2xvbmUgY3VycmVudCByb3cgYW5kIHJldHVybiByZWZlcmVuY2Ugb2YgdGhlIGNsb25lZCByb3c8L2xpPlxyXG4gICAqIDwvdWw+XHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgRElWIGNsYXNzPVwicmVkaXBzLXJvd1wiIG9yIFRSIChjdXJyZW50IHJvdylcclxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gUmV0dXJucyByZWZlcmVuY2Ugb2YgdGhlIGN1cnJlbnQgcm93IG9yIGNsb25lIGN1cnJlbnQgcm93IGFuZCByZXR1cm4gcmVmZXJlbmNlIG9mIHRoZSBjbG9uZWQgcm93LlxyXG4gICAqL1xyXG4gIHJvd0Nsb25lID0gZnVuY3Rpb24gKGVsKVxyXG4gIHtcclxuICAgIHZhciB0YWJsZU1pbmk7ICAgICAgLy8gb3JpZ2luYWwgdGFibGUgaXMgY2xvbmVkIGFuZCBhbGwgcm93cyBleGNlcHQgcGlja2VkIHJvdyBhcmUgZGVsZXRlZFxyXG4gICAgdmFyIHJvd09iajsgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIHJvdyBvYmplY3RcclxuICAgIHZhciBkaXY7ICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSA8RElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiPiBlbGVtZW50XHJcblxyXG4gICAgaWYgKGVsLm5vZGVOYW1lID09PSAnRElWJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMSkgcm93Q2xvbmUgY2FsbCBpbiBvbm1vdXNlZG93biB3aWxsIHJldHVybiByZWZlcmVuY2Ugb2YgVFIgZWxlbWVudCAoaW5wdXQgcGFyYW1ldGVyIGlzIEhUTUxFbGVtZW50IDxkaXYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCI+KVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBlbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgcmVmZXJlbmNlIHRvIHRoZSA8RElWIGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvd1wiPlxyXG4gICAgICBlbCA9IGZpbmRQYXJlbnQoJ1RSJywgZWwpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluZCBwYXJlbnQgVFIgZWxlbWVudFxyXG4gICAgICBpZiAoZWwucmVkaXBzID09PSB1bmRlZmluZWQpIHsgZWwucmVkaXBzID0ge307IH0gICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZCAoaXQgaXMgb25seSBvbmUgcHJvcGVydHkgZm9yIG5vdylcclxuICAgICAgZWwucmVkaXBzLmRpdiA9IGRpdjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhdmUgcmVmZXJlbmNlIHRvIHRoZSBESVYgZWxlbWVudCBhcyByZWRpcHMuZGl2IHRoaXMgd2lsbCBtb3N0bHkgYmUgcmVmZXJlbmNlZCBhcyBvYmpPbGQucmVkaXBzLmRpdiAoYmVjYXVzZSBvYmpPbGQgaW4gcm93IGRyYWdnaW5nIGNvbnRleHQgaXMgcmVmZXJlbmNlIHRvIHRoZSBzb3VyY2Ugcm93KVxyXG4gICAgICByZXR1cm4gZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHJlZmVyZW5jZSB0byB0aGUgVFIgZWxlbWVudFxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMikgcm93Q2xvbmUgY2FsbCBpbiBvbm1vdXNlbW92ZSB3aWxsIGNsb25lIGN1cnJlbnQgcm93IChlbC5ub2RlTmFtZSA9PT0gJ1RSJylcclxuICAgIHtcclxuICAgICAgcm93T2JqID0gZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgc291cmNlIHJvd1xyXG5cclxuICAgICAgdGFibGVNaW5pID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcclxuICAgICAgdGFibGVNaW5pLmlubmVySFRNTCA9ICc8dHIgaWQ9XCInICsgcm93T2JqLmlkICsgJ1wiIGNsYXNzPVwiJyArIHJvd09iai5jbGFzc0xpc3QgKyAnXCI+JyArIHJvd09iai5pbm5lckhUTUwgKyAnPC90cj4nO1xyXG4gICAgICAvL3RhYmxlTWluaS5pbm5lckhUTUwgPSBnZXRBc3NlbWJseU1hcmt1cChwYXJzZUludChyb3dPYmouaWQucmVwbGFjZSgncm93aWQnLCAnJykpKTsgICAvL2NhbiBiZSB1c2VkIHRvIHNob3cgdGhlIGVudGlyZSBhc3NlbWJseSB3aGVuIGRyYWdnaW5nLCB0ZW5kcyB0byBzbG93IHRoaW5ncyBkb3duIGFuZCBiZSBjdW1iZXJzb21lXHJcblxyXG4gICAgICB0YWJsZU1pbmkucmVkaXBzID0ge307ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBhIFwicHJvcGVydHkgb2JqZWN0XCIgaW4gd2hpY2ggYWxsIGN1c3RvbSBwcm9wZXJ0aWVzIHdpbGwgYmUgc2F2ZWRcclxuICAgICAgdGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cgPSByb3dPYmo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHNvdXJjZSByb3cgcmVmZXJlbmNlIChuZWVkZWQgZm9yIHNvdXJjZSByb3cgZGVsZXRpb24gaW4gcm93RHJvcCBtZXRob2QpXHJcblxyXG4gICAgICBjb3B5UHJvcGVydGllcyhyb3dPYmosIHRhYmxlTWluaS5yb3dzWzBdKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgdG8gYWxsIGNoaWxkIERJViBlbGVtZW50cyBhbmQgc2V0IG9ubW91c2Vkb3duL29uZGJsY2xpY2sgZXZlbnQgaGFuZGxlcnNcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZGlwc19jbG9uZScpLmFwcGVuZENoaWxkKHRhYmxlTWluaSk7ICAgICAvLyBhcHBlbmQgY2xvbmVkIG1pbmkgdGFibGUgdG8gdGhlIERJViBpZD1cInJlZGlwc19jbG9uZVwiXHJcblxyXG4gICAgICByZXR1cm4gdGFibGVNaW5pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgZHJvcHMgdGFibGUgcm93IHRvIHRoZSB0YXJnZXQgcm93IGFuZCBjYWxscyB1c2VyIGV2ZW50IGhhbmRsZXJzLiBTb3VyY2Ugcm93IGlzIGRlbGV0ZWQgYW5kIGNsb25lZCByb3cgaXMgaW5zZXJ0ZWQgYXQgdGhlIG5ldyBwb3NpdGlvbi5cclxuICAgKiBNZXRob2QgdGFrZXMgY2FyZSBhYm91dCB0aGUgbGFzdCByb3cgaW4gdGhlIHRhYmxlIG9ubHkgaWYgdXNlciBkcmFncyBlbGVtZW50LiBJbiBjYXNlIG9mIG1vdmluZyByb3dzIHdpdGggbW92ZU9iamVjdCgpLCBjb250cm9sXHJcbiAgICogYW5kIGxvZ2ljIGZvciBsYXN0IHJvdyBpcyB0dXJuZWQgb2ZmLiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZVVwKClcclxuICAgKiBAcGFyYW0ge0ludGVnZXJ9IHRhYmxlSWR4IFRhYmxlIGluZGV4LlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gcm93SWR4IFJvdyBpbmRleC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBbdGFibGVNaW5pXSBSZWZlcmVuY2UgdG8gdGhlIG1pbmkgdGFibGUgKHRhYmxlIHRoYXQgY29udGFpbnMgb25seSBvbmUgcm93KS4gVGhpcyBpcyBhY3R1YWxseSBjbG9uZSBvZiBzb3VyY2Ugcm93LlxyXG4gICAqL1xyXG4gIHJvd0Ryb3AgPSBmdW5jdGlvbiAocm93SWR4KVxyXG4gIHtcclxuICAgIHZhciBkcm9wOyAgICAgICAgICAgICAgIC8vIChib29sZWFuKSBpZiBmYWxzZSB0aGVuIGRyb3BwaW5nIHJvdyB3aWxsIGJlIGNhbmNlbGVkXHJcbiAgICB2YXIgdHJNaW5pOyAgICAgICAgICAgICAvLyByZWZlcmVuY2UgdG8gdGhlIFRSIGluIG1pbmkgdGFibGVcclxuICAgIHZhciBkZWxldGVUYWJsZVJvdzsgICAgIC8vIGRlbGV0ZSByb3cgKHByaXZhdGUgbWV0aG9kKVxyXG5cclxuICAgIGRlbGV0ZVRhYmxlUm93ID0gZnVuY3Rpb24gKGVsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIHRhYmxlIHJvdyAtIGlucHV0IHBhcmVtZXRlciBpcyByb3cgcmVmZXJlbmNlIChwcml2YXRlIG1ldGhvZClcclxuICAgIHtcclxuICAgICAgdmFyIHRibDtcclxuXHJcbiAgICAgIGlmIChlbC5yZWRpcHMgPT09IHVuZGVmaW5lZCB8fCAhZWwucmVkaXBzLmVtcHR5Um93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBkb2Vzbid0IGhhdmUgY3VzdG9tIFwicmVkaXBzXCIgcHJvcGVydHkgb3IgaXMgbm90IG1hcmtlZCBhcyBlbXB0eSwgdGhlbiBpdCBjYW4gYmUgZGVsZXRlZFxyXG4gICAgICB7XHJcbiAgICAgICAgdGJsID0gZmluZFBhcmVudCgnVEFCTEUnLCBlbCk7XHJcbiAgICAgICAgdGJsLmRlbGV0ZVJvdyhlbC5yb3dJbmRleCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSwgcm93IGlzIG1hcmtlZCBhcyBcImVtcHR5XCIgYW5kIGl0IHdpbGwgYmUgb25seSBjb2xvcmVkIChub3QgZGVsZXRlZCksIGNvbnRlbnQgb2YgdGFibGUgY2VsbHMgd2lsbCBiZSBkZWxldGVkIGFuZCBiYWNrZ3JvdW5kIGNvbG9yIHdpbGwgYmUgc2V0IHRvIGRlZmF1bHQgY29sb3JcclxuICAgICAge1xyXG4gICAgICAgIHJvd09wYWNpdHkoZWwsICdlbXB0eScsIFJFRElQUy5kcmFnLnN0eWxlLnJvd0VtcHR5Q29sb3IpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciB0YWJsZU1pbmkgPSBvYmo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY3VycmVudGx5IGRyYWdnZWQgcm93IC0gbWluaSB0YWJsZVxyXG5cclxuICAgIGlmIChyb3dJZHggPiB0YWJsZS5yb3dzLmxlbmd0aCAtIDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGluZGV4IGlzIG91dCBvZiBib3VuZHMsIHRoZW4gc2V0IG1heCByb3cgaW5kZXggKHJvdyB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSB0YWJsZSBib3R0b20pXHJcbiAgICB7XHJcbiAgICAgIHJvd0lkeCA9IHRhYmxlLnJvd3MubGVuZ3RoIC0gMTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdGFibGVSb3cgPSB0YWJsZS5yb3dzW3Jvd0lkeF07XHJcblxyXG4gICAgdHJNaW5pID0gdGFibGVNaW5pLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpWzBdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBUUiBpbiBtaW5pIHRhYmxlIChtaW5pIHRhYmxlIGhhcyBvbmx5IG9uZSByb3cgLSBmaXJzdCByb3cpXHJcblxyXG4gICAgdGFibGVNaW5pLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGFibGVNaW5pKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXN0cm95IG1pbmkgdGFibGUgKG5vZGUgc3RpbGwgZXhpc3RzIGluIG1lbW9yeSlcclxuXHJcbiAgICBkcm9wID0gUkVESVBTLmRyYWcuZXZlbnQucm93RHJvcHBlZEJlZm9yZSh0YWJsZSwgdGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cucm93SW5kZXgpOyAgICAgIC8vIGNhbGwgZXZlbnQucm93RHJvcHBlZEJlZm9yZSgpIC0gdGhpcyBoYW5kbGVyIGNhbiByZXR1cm4gXCJmYWxzZVwiIHZhbHVlXHJcblxyXG4gICAgaWYgKGRyb3AgIT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBoYW5kbGVyIHJldHVybmVkIGZhbHNlIHRoZW4gcm93IGRyb3BwaW5nIHdpbGwgYmUgY2FuY2VsZWRcclxuICAgIHtcclxuICAgICAgaWYgKHJvd0lkeCA8IHRhYmxlLnJvd3MubGVuZ3RoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGlzIG5vdCBkcm9wcGVkIHRvIHRoZSBsYXN0IHJvdyBwb3NpdGlvblxyXG4gICAgICB7XHJcbiAgICAgICAgdGFibGVSb3cucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodHJNaW5pLCB0YWJsZVJvdy5uZXh0U2libGluZyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IGlzIGRyb3BwZWQgdG8gdGhlIGxhc3Qgcm93IHBvc2l0aW9uLCBpdCdzIHBvc3NpYmxlIHRvIHNldCB0YXJnZXQgcm93IGluZGV4IGdyZWF0ZXIgdGhlbiBudW1iZXIgb2Ygcm93cyAtIGluIHRoaXMgY2FzZSByb3cgd2lsbCBiZSBhcHBlbmRlZCB0byB0aGUgdGFibGUgZW5kXHJcbiAgICAgIHtcclxuICAgICAgICB0YWJsZVJvdy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRyTWluaSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IHNob3VsZCBiZSBhcHBlbmRlZFxyXG4gICAgICAgIHRhYmxlUm93ID0gdGFibGUucm93c1swXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSB1cHBlciByb3csIGFmdGVyIHJvdyBpcyBhcHBlbmRlZCwgdXBwZXIgcm93IHNob3VsZCBiZSB0ZXN0ZWQgaWYgY29udGFpbnMgXCJlbXB0eVJvd1wiIHNldCB0byB0cnVlLCB0aGlzIGNvdWxkIGhhcHBlbiBpbiBjYXNlIHdoZW4gcm93IGlzIG1vdmVkIHRvIHRoZSB0YWJsZSB3aXRoIG9ubHkgb25lIGVtcHR5IHJvd1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIWNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgc291cmNlIHJvdyBpZiByb3cgaXMgbm90IGNsb25lZFxyXG4gICAgICB7XHJcbiAgICAgICAgZGVsZXRlVGFibGVSb3codGFibGVNaW5pLnJlZGlwcy5zb3VyY2VSb3cpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBkZWxldGUgdHJNaW5pLnJlZGlwcy5lbXB0eVJvdzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgZW1wdHlSb3cgcHJvcGVydHkgZnJvbSBpbnNlcnRlZC9hcHBlbmRlZCByb3cgYmVjYXVzZSBlbXB0eVJvdyB3aWxsIGJlIHNldCBvbiBuZXh0IG1vdmUsIGNvcHlQcm9wZXJ0aWVzKCkgaW4gcm93Q2xvbmUoKSBjb3BpZWQgZW1wdHlSb3cgcHJvcGVydHkgdG8gdGhlIHJvdyBpbiB0YWJsZU1pbmksIG90aGVyd2lzZSByb3cgd2lsbCBiZSBvdmVyd3JpdHRlbiBhbmQgdGhhdCBpcyBub3QgZ29vZFxyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dEcm9wcGVkKHRhYmxlUm93KTsgICAgICAgICAvLyBjYWxsIHJvd0Ryb3BwZWQgZXZlbnQgaGFuZGxlclxyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBldmVudC5yb3dEcm9wcGVkQmVmb3JlKCkgcmV0dXJuZWQgXCJmYWxzZVwiIChpdCdzIHVwIHRvIHVzZXIgdG8gcmV0dXJuIHNvdXJjZSByb3cgb3BhY2l0eSB0byBpdHMgb3JpZ2luYWwgc3RhdGUpXHJcbiAgICB7XHJcbiAgICAgIC8vIHJvd09wYWNpdHkob2JqT2xkLCAxMDApO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBvbm1vdXNldXAgZXZlbnQgaGFuZGxlci5cclxuICAgKiBoYW5kbGVyT25Nb3VzZVVwIGlzIGF0dGFjaGVkIHRvIHRoZSBESVYgZWxlbWVudCBpbiBhIG1vbWVudCB3aGVuIERJViBlbGVtZW50IGlzIGNsaWNrZWQgKHRoaXMgaGFwcGVucyBpbiBoYW5kbGVyT25Nb3VzZURvd24pLlxyXG4gICAqIFRoaXMgZXZlbnQgaGFuZGxlciBkZXRhY2hlcyBvbm1vdXNlbW92ZSBhbmQgb25tb3VzZXVwIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGUgRXZlbnQgaW5mb3JtYXRpb24uXHJcbiAgICovXHJcbiAgaGFuZGxlck9uTW91c2VVcCA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgLy8gZGVmaW5lIGV2ZW50IChGRiAmIElFKVxyXG4gICAgdmFyIHJfcm93OyAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIG1vZGU9XCJyb3dcIlxyXG4gICAgdmFyIG10X3RyOyAgICAgICAgICAgICAgICAgICAgICAvLyBuZWVkZWQgZm9yIHJldHVybmluZyBjb2xvciB0byB0aGUgdGFibGUgY2VsbCAobXRfdHIgLSBcIm1pbmkgdGFibGVcIiBcInRhYmxlX3Jvd1wiKVxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAgICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBpOyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCBpbiBsb2NhbCBsb29wXHJcbiAgICB2YXIgZHJvcDsgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGZhbHNlIHRoZW4gZHJvcHBlZCBESVYgZWxlbWVudFxyXG5cclxuICAgIFggPSBldnQuY2xpZW50WDtcclxuICAgIFkgPSBldnQuY2xpZW50WTtcclxuXHJcbiAgICBlZGdlLmZsYWcueCA9IGVkZ2UuZmxhZy55ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHVybiBvZmYgYXV0b3Njcm9sbCBcImN1cnJlbnQgY2VsbFwiIGhhbmRsaW5nIChpZiB1c2VyIG1vdXNldXAgaW4gdGhlIG1pZGRsZSBvZiBhdXRvc2Nyb2xsaW5nKVxyXG5cclxuICAgIFJFRElQUy5ldmVudC5yZW1vdmUoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBoYW5kbGVyT25Nb3VzZU1vdmUpO1xyXG4gICAgUkVESVBTLmV2ZW50LnJlbW92ZShkb2N1bWVudCwgJ21vdXNldXAnLCBoYW5kbGVyT25Nb3VzZVVwKTtcclxuXHJcbiAgICBkcmFnQ29udGFpbmVyLm9uc2VsZWN0c3RhcnQgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWNoIGRyYWdDb250YWluZXIub25zZWxlY3RzdGFydCBoYW5kbGVyIHRvIGVuYWJsZSBzZWxlY3QgZm9yIElFNy9JRTggYnJvd3NlclxyXG5cclxuICAgIHJlc2V0U3R5bGVzKG9iaik7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvYmplY3Qgc3R5bGVzXHJcblxyXG4gICAgc2Nyb2xsRGF0YS53aWR0aCAgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg7XHJcbiAgICBzY3JvbGxEYXRhLmhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcblxyXG4gICAgZWRnZS5mbGFnLnggPSBlZGdlLmZsYWcueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IGF1dG9zY3JvbGwgZmxhZ3NcclxuXHJcbiAgICBpZiAocm93ID09PSBudWxsIHx8IGNlbGwgPT09IG51bGwpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGVsZW1lbnQgd2FzIGNsaWNrZWQgYW5kIGxlZnQgYnV0dG9uIHdhcyByZWxlYXNlZCwgYnV0IGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSB1bm1vdmFibGUgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RNb3ZlZCgpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZHJhZy50ZC50YXJnZXQgPSB0ZC50YXJnZXQgPSB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF07XHJcblxyXG4gICAgICBzZXRUZFN0eWxlKHJvdywgYmdTdHlsZU9sZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yIGZvciBkZXN0aW5hdGlvbiByb3dcclxuXHJcbiAgICAgIHJfcm93ID0gcm93O1xyXG5cclxuICAgICAgaWYgKCFtb3ZlZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByb3cgd2FzIGNsaWNrZWQgYW5kIG1vdXNlIGJ1dHRvbiB3YXMgcmVsZWFzZWQgcmlnaHQgYXdheSAocm93IHdhcyBub3QgbW92ZWQpXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5yb3dOb3RNb3ZlZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IHdhcyBtb3ZlZFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHJvd19zb3VyY2UgPT09IHJfcm93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGRyb3BwZWQgdG8gdGhlIHNvdXJjZSByb3dcclxuICAgICAgICB7XHJcbiAgICAgICAgICBtdF90ciA9IG9iai5nZXRFbGVtZW50c0J5VGFnTmFtZSgndHInKVswXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBUUiBpbiBtaW5pIHRhYmxlIChtaW5pIHRhYmxlIGhhcyBvbmx5IG9uZSByb3cpXHJcblxyXG4gICAgICAgICAgb2JqT2xkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG10X3RyLnN0eWxlLmJhY2tncm91bmRDb2xvcjsgICAgICAgICAgIC8vIHJldHVybiBjb2xvciB0byB0aGUgc291cmNlIHJvdyBmcm9tIHRoZSByb3cgb2YgY2xvbmVkIG1pbmkgdGFibGUsIGNvbG9yIG9mIHRoZSBzb3VyY2Ugcm93IGNhbiBiZSBjaGFuZ2VkIGluIGV2ZW50LnJvd01vdmVkKCkgKHdoZW4gdXNlciB3YW50cyB0byBtYXJrIHNvdXJjZSByb3cpXHJcblxyXG4gICAgICAgICAgZm9yIChpID0gMDsgaSA8IG10X3RyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBjb2xvciB0byB0aGUgZWFjaCB0YWJsZSBjZWxsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIG9iak9sZC5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBtdF90ci5jZWxsc1tpXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBjbG9uZWQgbWluaSB0YWJsZVxyXG4gICAgICAgICAgZGVsZXRlIG9iak9sZC5yZWRpcHMuZW1wdHlSb3c7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBlbXB0eVJvdyBwcm9wZXJ0eSBmcm9tIHNvdXJjZSByb3cgYmVjYXVzZSBlbXB0eVJvdyB3aWxsIGJlIHNldCBvbiBuZXh0IG1vdmUsIG90aGVyd2lzZSByb3cgd291bGQgYmUgb3ZlcndyaXR0ZW4gYW5kIHRoYXQncyBubyBnb29kXHJcblxyXG4gICAgICAgICAgaWYgKGNsb25lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyB3YXMgY2xvbmVkIGFuZCBkcm9wcGVkIHRvIHRoZSBzb3VyY2UgbG9jYXRpb24gdGhlbiBjYWxsIHJvd05vdENsb25lZCBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd05vdENsb25lZCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQucm93RHJvcHBlZFNvdXJjZSgpIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQucm93RHJvcHBlZFNvdXJjZSh0ZC50YXJnZXQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZHJvcHBlZCB0byB0aGUgbmV3IHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJvd0Ryb3Aocl9yb3cpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKCFjbG9uZWQgJiYgIXRocmVzaG9sZC5mbGFnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGlja2VkIGVsZW1lbnQgd2FzIG5vdCBtb3ZlZCAtIERJViBlbGVtZW50IGRpZG4ndCBjcm9zcyB0aHJlc2hvbGQgdmFsdWUsIGp1c3QgY2FsbCBldmVudC5ub3RNb3ZlZCBldmVudCBoYW5kbGVyXHJcbiAgICAgIHtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RNb3ZlZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGNsb25lZCAmJiByb3dfc291cmNlID09PSByb3cgJiYgY2VsbF9zb3VyY2UgPT09IGNlbGwpICAgICAgICAgICAgLy8gZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3BwZWQgb24gdGhlIHN0YXJ0IHBvc2l0aW9uXHJcbiAgICAgIHtcclxuICAgICAgICBvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopO1xyXG4gICAgICAgIGNsb25lZElkW29iak9sZC5pZF0gLT0gMTtcclxuICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5ub3RDbG9uZWQoKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChjbG9uZWQgJiYgUkVESVBTLmRyYWcuY2xvbmUuZHJvcCA9PT0gZmFsc2UgJiYgKFggPCB0YWJsZS5yZWRpcHMub2Zmc2V0WzNdIHx8IFggPiB0YWJsZS5yZWRpcHMub2Zmc2V0WzFdIHx8IFkgPCB0YWJsZS5yZWRpcHMub2Zmc2V0WzBdIHx8IFkgPiB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdKSkgICAgLy8gZGVsZXRlIGNsb25lZCBlbGVtZW50IGlmIGRyb3BwZWQgb3V0c2lkZSBjdXJyZW50IHRhYmxlIGFuZCBjbG9uZS5kcm9wIGlzIHNldCB0byBmYWxzZVxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTtcclxuICAgICAgICBjbG9uZWRJZFtvYmpPbGQuaWRdIC09IDE7XHJcbiAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQubm90Q2xvbmVkKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIGNhbGwgZXZlbnQuZHJvcHBlZEJlZm9yZSgpLCBhcHBlbmQgb2JqZWN0IHRvIHRoZSBjZWxsIGFuZCBjYWxsIGV2ZW50LmRyb3BwZWQoKVxyXG4gICAgICB7XHJcbiAgICAgICAgZHJvcCA9IFJFRElQUy5kcmFnLmV2ZW50LmRyb3BwZWRCZWZvcmUodGQudGFyZ2V0KTsgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5kcm9wcGVkQmVmb3JlIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICBlbGVtZW50RHJvcChkcm9wKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkcm9wIGVsZW1lbnQgdG8gdGhlIHRhYmxlIGNlbGwgKG9yIGRlbGV0ZSBjbG9uZWQgZWxlbWVudCBpZiBkcm9wPVwiZmFsc2VcIilcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWNhbGN1bGF0ZSB0YWJsZSBjZWxscyBhbmQgc2Nyb2xsZXJzIGJlY2F1c2UgY2VsbCBjb250ZW50IGNvdWxkIGNoYW5nZSByb3cgZGltZW5zaW9uc1xyXG4gICAgICBSRURJUFMuZHJhZy5ldmVudC5maW5pc2goKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgbGFzdCBldmVudCBoYW5kbGVyXHJcbiAgICB9XHJcblxyXG4gICAgcm93X29sZCA9IGNlbGxfb2xkID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IG9sZCBwb3NpdGlvbnNcclxuICB9O1xyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogRWxlbWVudCBkcm9wLiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgZnJvbSBoYW5kbGVyT25Nb3VzZVVwIGFuZCBhcHBlbmRzIGVsZW1lbnQgdG8gdGhlIHRhcmdldCB0YWJsZSBjZWxsLlxyXG4gICAqIElmIGlucHV0IHBhcmFtZXRlciBcImRyb3BcIiBpcyBzZXQgdG8gXCJmYWxzZVwiICh0aGlzIGlzIGFjdHVhbGx5IHJldHVybiB2YWx1ZSBmcm9tIGV2ZW50LmRyb3BwZWRCZWZvcmUpIHRoZW4gRElWIGVsZW1lbnRzIHdpbGwgbm90IGJlIGRyb3BwZWQgKG9ubHkgY2xvbmVkIGVsZW1lbnQgd2lsbCBiZSBkZWxldGVkKS5cclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtkcm9wXSBJZiBub3QgXCJmYWxzZVwiIHRoZW4gRElWIGVsZW1lbnQgd2lsbCBiZSBkcm9wcGVkIHRvIHRoZSBjZWxsLlxyXG4gICAqL1xyXG4gIGVsZW1lbnREcm9wID0gZnVuY3Rpb24gKGRyb3ApIFxyXG4gIHtcclxuICAgIHZhciBjbG9uZVNvdXJjZURpdiA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb25lIHNvdXJjZSBlbGVtZW50IChuZWVkZWQgaWYgY2xvbmUuc2VuZEJhY2sgaXMgc2V0IHRvIHRydWUpXHJcbiAgICB2YXIgZGl2OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub2RlTGlzdCBvZiBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGwgKG5lZWRlZCBpZiBjbG9uZS5zZW5kQmFjayBpcyBzZXQgdG8gdHJ1ZSlcclxuICAgIFxyXG4gICAgaWYgKGRyb3AgIT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgaW5wdXQgcGFyYW1ldGVyIGlzIG5vdCBcImZhbHNlXCIgdGhlbiBESVYgZWxlbWVudCB3aWxsIGJlIGRyb3BwZWQgdG8gdGhlIHRhYmxlIGNlbGxcclxuICAgIHtcclxuICAgICAgaWYgKGNsb25lLnNlbmRCYWNrID09PSB0cnVlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGNsb25lLnNlbmRCYWNrIGlzIHNldCB0byB0cnVlIHRoZW4gdHJ5IHRvIGZpbmQgc291cmNlIGVsZW1lbnQgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAge1xyXG4gICAgICAgIGRpdiA9IHRkLnRhcmdldC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnRElWJyk7ICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoIGFsbCBESVYgZWxlbWVudHMgaW4gdGFyZ2V0IGNlbGxcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpdi5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCBhbGwgRElWIGVsZW1lbnRzIGluIHRhcmdldCBjZWxsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgLy8gaWYgRElWIGluIHRhcmdldCBjZWxsIGlzIHNvdXJjZSBvZiBkcm9wcGVkIERJViBlbGVtZW50IChkcm9wcGVkIERJViBpZCBhbmQgaWQgb2YgRElWIGluIHRhcmdldCBjZWxsIGhhcyB0aGUgc2FtZSBuYW1lIGJlZ2lubmluZyBsaWtlIFwiZDEyYzJcIiBhbmQgXCJkMTJcIilcclxuICAgICAgICAgIC8vIG9mIGNvdXJzZSwgdGhlIGNhc2Ugd2hlcmUgc291cmNlIERJViBlbGVtZW50IGlzIGRyb3BwZWQgdG8gdGhlIGNlbGwgd2l0aCBjbG9uZWQgRElWIGVsZW1lbnQgc2hvdWxkIGJlIGV4Y2x1ZGVkIChwb3NzaWJsZSBpbiBjbGltaXQxIHR5cGUpXHJcbiAgICAgICAgICBpZiAob2JqICE9PSBkaXZbaV0gJiYgb2JqLmlkLmluZGV4T2YoZGl2W2ldLmlkKSA9PT0gMCkgXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGNsb25lU291cmNlRGl2ID0gZGl2W2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIGNsb25lU291cmNlRGl2IGVsZW1lbnRcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjbG9uZVNvdXJjZURpdikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY2xvbmUgc291cmNlIERJViBlbGVtZW50IGV4aXN0cyBpbiB0YXJnZXQgY2VsbFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNsb25lTGltaXQoY2xvbmVTb3VyY2VEaXYsIDEpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBjbGltaXQgY2xhc3MgKGluY3JlbWVudCBieSAxKVxyXG4gICAgICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGRyb3BwZWQgRElWIGVsZW1lbnRcclxuICAgICAgICAgIHJldHVybjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBmcm9tIHRoZSBtZXRob2QgKGV2ZXJ5dGhpbmcgaXMgZG9uZSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRkLnRhcmdldC5hcHBlbmRDaGlsZChvYmopO1xyXG4gICAgICBcclxuICAgICAgcmVnaXN0ZXJFdmVudHMob2JqKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgKEZJWCBmb3IgU2FmYXJpIE1vYmlsZSlcclxuICAgICAgUkVESVBTLmRyYWcuZXZlbnQuZHJvcHBlZCh0ZC50YXJnZXQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmRyb3BwZWQgYmVjYXVzZSBjbG9uZUxpbWl0IGNvdWxkIGNhbGwgZXZlbnQuY2xvbmVkRW5kMSBvciBldmVudC5jbG9uZWRFbmQyXHJcbiAgICAgIFxyXG4gICAgICBpZiAoY2xvbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9iamVjdCBpcyBjbG9uZWRcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LmNsb25lZERyb3BwZWQodGQudGFyZ2V0KTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgY2xvbmVkRHJvcHBlZCBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgY2xvbmVMaW1pdChvYmpPbGQsIC0xKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdDFfWCBvciBjbGltaXQyX1ggY2xhc3NuYW1lXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNsb25lZCAmJiBvYmoucGFyZW50Tm9kZSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9uZWQgZWxlbWVudCBzaG91bGQgYmUgZGVsZXRlZCAoaWYgbm90IGFscmVhZHkgZGVsZXRlZClcclxuICAgIHtcclxuICAgICAgb2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBSZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgZm9yIERJViBlbGVtZW50LlxyXG4gICAqIERJViBlbGVtZW50cyBzaG91bGQgaGF2ZSBvbmx5IG9ubW91c2Vkb3duICh1c2luZyB0cmFkaXRpb25hbCBldmVudCByZWdpc3RyYXRpb24gbW9kZWwpLlxyXG4gICAqIEkgaGFkIGEgcHJvYmxlbSB3aXRoIGFkdmFuY2VkIGV2ZW50IHJlZ2lzdHJhdGlvbiBtb2RlbC5cclxuICAgKiBJbiBjYXNlIG9mIHVzaW5nIGFkdmFuY2VkIG1vZGVsLCBzZWxlY3RlZCB0ZXh0IGFuZCBkcmFnZ2VkIERJViBlbGVtZW50IHdlcmUgaW4gY29sbGlzaW9uLlxyXG4gICAqIEl0IGxvb2tzIGxpa2Ugc2VsZWN0ZWQgdGV4dCB3YXMgYWJsZSB0byBkcmFnIGluc3RlYWQgb2YgRElWIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZGl2IFJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBmb3Igb25tb3VzZWRvd24sIG9udG91Y2hzdGFydCBhbmQgb25kYmxjbGljayB0byB0aGUgRElWIGVsZW1lbnQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufSBbZmxhZ10gSWYgc2V0IHRvIGZhbHNlIHRoZW4gZXZlbnQgbGlzdGVuZXJzIHdpbGwgYmUgZGVsZXRlZC5cclxuICAgKi9cclxuICByZWdpc3RlckV2ZW50cyA9IGZ1bmN0aW9uIChkaXYsIGZsYWcpXHJcbiAge1xyXG4gICAgaWYgKGZsYWcgPT09IGZhbHNlKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBmbGFnIGlzIHNlIHRvIGZhbHNlLCB0aGVuIHJlbW92ZSBldmVudCBsaXN0ZW5lcnMgb24gRElWIGVsZW1lbnRcclxuICAgIHtcclxuICAgICAgZGl2Lm9ubW91c2Vkb3duID0gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgZGl2Lm9ubW91c2Vkb3duID0gaGFuZGxlck9uTW91c2VEb3duO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICByZXNldFN0eWxlcyA9IGZ1bmN0aW9uIChlbCkgICAgICAgICAvLyBBZnRlciBlbGVtZW50IGlzIGRyb3BwZWQsIHN0eWxlcyBuZWVkIHRvIGJlIHJlc2V0LlxyXG4gIHtcclxuICAgIGVsLnN0eWxlLnRvcCAgPSAnJztcclxuICAgIGVsLnN0eWxlLmxlZnQgPSAnJztcclxuICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJyc7XHJcbiAgICBlbC5zdHlsZS56SW5kZXggPSAnJztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBvbm1vdXNlbW92ZSBldmVudCBoYW5kbGVyLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlTW92ZSBpcyBhdHRhY2hlZCB0byBkb2N1bWVudCBsZXZlbCBpbiBhIG1vbWVudCB3aGVuIERJViBlbGVtZW50IGlzIGNsaWNrZWQgKHRoaXMgaGFwcGVucyBpbiBoYW5kbGVyT25Nb3VzZURvd24pLlxyXG4gICAqIGhhbmRsZXJPbk1vdXNlVXAgZGV0YWNoZXMgb25tb3VzZW1vdmUgYW5kIG9ubW91c2V1cCBldmVudCBoYW5kbGVycy5cclxuICAgKiBAcGFyYW0ge0V2ZW50fSBlIEV2ZW50IGluZm9ybWF0aW9uLlxyXG4gICAqL1xyXG4gIGhhbmRsZXJPbk1vdXNlTW92ZSA9IGZ1bmN0aW9uIChlKVxyXG4gIHtcclxuICAgIHZhciBldnQgPSBlIHx8IHdpbmRvdy5ldmVudDsgICAgICAgICAgICAvLyBkZWZpbmUgZXZlbnQgKEZGICYgSUUpXHJcbiAgICB2YXIgYm91bmQgPSBSRURJUFMuZHJhZy5zY3JvbGwuYm91bmQ7ICAgLy8gcmVhZCBcImJvdW5kXCIgcHVibGljIHByb3BlcnR5IChtYXliZSBjb2RlIHdpbGwgYmUgZmFzdGVyLCBhbmQgaXQgd2lsbCBiZSBlYXNpZXIgdG8gcmVmZXJlbmNlIGluIG9ubW91c2Vtb3ZlIGhhbmRsZXIpXHJcbiAgICB2YXIgc2NhOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhXHJcbiAgICB2YXIgWCwgWTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWCBhbmQgWSBwb3NpdGlvbiBvZiBtb3VzZSBwb2ludGVyXHJcbiAgICB2YXIgZGVsdGFYLCBkZWx0YVk7ICAgICAgICAgICAgICAgICAgICAgLy8gZGVsdGEgZnJvbSBpbml0aWFsIHBvc2l0aW9uXHJcbiAgICB2YXIgaTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciBsb2NhbCBsb29wXHJcbiAgICB2YXIgc2Nyb2xsUG9zaXRpb247ICAgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHBvc2l0aW9uIHZhcmlhYmxlIG5lZWRlZCBmb3IgYXV0b3Njcm9sbCBjYWxsXHJcblxyXG4gICAgWCA9IHBvaW50ZXIueCA9IGV2dC5jbGllbnRYO1xyXG4gICAgWSA9IHBvaW50ZXIueSA9IGV2dC5jbGllbnRZO1xyXG5cclxuICAgIGRlbHRhWCA9IE1hdGguYWJzKHRocmVzaG9sZC54IC0gWCk7ICAgICAgICAgLy8gY2FsY3VsYXRlIGRlbHRhIGZyb20gaW5pdGlhbCBwb3NpdGlvblxyXG4gICAgZGVsdGFZID0gTWF0aC5hYnModGhyZXNob2xkLnkgLSBZKTtcclxuXHJcbiAgICBpZiAoIW1vdmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIFwibW92ZWRcIiBmbGFnIGlzbid0IHNldCAodGhpcyBpcyB0aGUgZmlyc3QgbW9tZW50IHdoZW4gb2JqZWN0IGlzIG1vdmVkKVxyXG4gICAge1xyXG4gICAgICAvL3JlbWVtYmVyIHJlZmVyZW5jZSBvZiB0aGUgc291cmNlIHJvdywgY2xvbmUgc291cmNlIHJvdyBhbmQgc2V0IG9iaiBhcyByZWZlcmVuY2UgdG8gdGhlIGN1cnJlbnQgcm93IHNldHRpbmdzIG9mIFwiY2xvbmVkXCIgZmxhZyBzaG91bGQgZ28gYmVmb3JlIGNhbGxpbmcgcm93Q2xvbmUoKSBiZWNhdXNlIFwiY2xvbmVkXCIgaXMgbmVlZGVkIGluIHJvd0Nsb25lKCkgdG8gY3V0IG91dCBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIG5hbWUgZnJvbSA8ZGl2IGNsYXNzPVwicmVkaXBzLWRyYWcgcmVkaXBzLXJvdyByZWRpcHMtY2xvbmVcIj4gZWxlbWVudHNcclxuICAgICAgaWYgKGNsb25lQ2xhc3MgfHwgKFJFRElQUy5kcmFnLmNsb25lLmtleVJvdyA9PT0gdHJ1ZSAmJiBzaGlmdEtleSkpXHJcbiAgICAgIHtcclxuICAgICAgICBjbG9uZWQgPSB0cnVlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBSRURJUFMuZHJhZy5vYmpPbGQgPSBvYmpPbGQgPSBvYmo7ICAgICAgICAvLyByZW1lbWJlciByZWZlcmVuY2UgdG8gdGhlIHNvdXJjZSByb3dcclxuICAgICAgUkVESVBTLmRyYWcub2JqID0gb2JqID0gcm93Q2xvbmUob2JqKTsgICAgLy8gY2xvbmUgc291cmNlIHJvdyBhbmQgc2V0IGFzIG9ialxyXG4gICAgICBvYmouc3R5bGUuekluZGV4ID0gOTk5OyAgICAgICAgICAgICAgICAgICAvLyBzZXQgaGlnaCB6LWluZGV4IGZvciBjbG9uZWQgbWluaSB0YWJsZVxyXG5cclxuICAgICAgb2JqLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsgICAgICAgICAgICAgLy8gc2V0IHN0eWxlIHRvIGZpeGVkIHRvIGFsbG93IGRyYWdnaW5nIERJViBvYmplY3RcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTsgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgY2FsY3VsYXRlIGNlbGxzIGZvciBjYXNlIHdoZXJlIG1vdmVkIGVsZW1lbnQgY2hhbmdlZCBjZWxsIGRpbWVuc2lvbiwgcGxhY2UgMyBlbGVtZW50cyBpbiB0aGUgc2FtZSBjZWxsIGluIGV4YW1wbGUwOCBhbmQgdHJ5IHRvIG1vdmUgb25lIG91dCBvZiB0aGUgdGFibGUgY2VsbFxyXG4gICAgICBzZXRUYWJsZVJvd0NvbHVtbigpOyAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSwgcm93IGFuZCBjb2x1bW5cclxuXHJcbiAgICAgIGlmIChjbG9uZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZXZlbnQgaGFuZGxlciAocm93IGNsb25lZC9tb3ZlZClcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0Nsb25lZCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd01vdmVkKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNldFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY29sb3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlIGNlbGwgYW5kIHJlbWVtYmVyIHByZXZpb3VzIHBvc2l0aW9uIGFuZCBjb2xvciwgc2V0UG9zaXRpb24oKSBtdXN0IGdvIGFmdGVyIGNhbGxpbmcgZXZlbnQubW92ZWQoKSBhbmQgZXZlbnQucm93TW92ZWQoKSBpZiB1c2VyIHdhbnRzIHRvIGNoYW5nZSBjb2xvciBvZiBzb3VyY2Ugcm93XHJcblxyXG4gICAgICBpZiAoWCA+IHNjcmVlbi53aWR0aCAtIG9iak1hcmdpblsxXSkgICAgLy8gaWYgZWxlbWVudCBpcyBmYXIgYXdheSBvbiB0aGUgcmlnaHQgc2lkZSBvZiBwYWdlLCBzZXQgcG9zc2libGUgcmlnaHQgcG9zaXRpb24gKHNjcmVlbi53aWR0aCAtIG9iamVjdCB3aWR0aCksIG9iak1hcmdpblsxXSArIG9iak1hcmdpblszXSA9IG9iamVjdCB3aWR0aFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnN0eWxlLmxlZnQgPSAoc2NyZWVuLndpZHRoIC0gKG9iak1hcmdpblsxXSArICBvYmpNYXJnaW5bM10pKSArICdweCc7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChZID4gc2NyZWVuLmhlaWdodCAtIG9iak1hcmdpblsyXSkgICAvLyBpZiBlbGVtZW50IGlzIGJlbG93IHBhZ2UgYm90dG9tLCBzZXQgcG9zc2libGUgbG93ZXIgcG9zaXRpb24gKHNjcmVlbi53aWR0aCAtIG9iamVjdCBoZWlnaHQpLCBvYmpNYXJnaW5bMF0gKyBvYmpNYXJnaW5bMl0gPSBvYmplY3QgaGVpZ2h0XHJcbiAgICAgIHtcclxuICAgICAgICBvYmouc3R5bGUudG9wICA9IChzY3JlZW4uaGVpZ2h0IC0gKG9iak1hcmdpblswXSArIG9iak1hcmdpblsyXSkpICsgJ3B4JztcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vdmVkID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBtb3ZlZF9mbGFnXHJcblxyXG4gICAgLy8gc2V0IGxlZnQgYW5kIHRvcCBzdHlsZXMgZm9yIHRoZSBtb3ZlZCBlbGVtZW50IGlmIGVsZW1lbnQgaXMgaW5zaWRlIHdpbmRvdywgdGhpcyBjb25kaXRpb25zIHdpbGwgc3RvcCBlbGVtZW50IG9uIHdpbmRvdyBib3VuZHNcclxuICAgIGlmIChYID4gb2JqTWFyZ2luWzNdICYmIFggPCBzY3JlZW4ud2lkdGggLSBvYmpNYXJnaW5bMV0pXHJcbiAgICB7XHJcbiAgICAgIG9iai5zdHlsZS5sZWZ0ID0gKFggLSBvYmpNYXJnaW5bM10pICsgJ3B4JztcclxuICAgIH1cclxuICAgIGlmIChZID4gb2JqTWFyZ2luWzBdICYmIFkgPCBzY3JlZW4uaGVpZ2h0IC0gb2JqTWFyZ2luWzJdKVxyXG4gICAge1xyXG4gICAgICBvYmouc3R5bGUudG9wICA9IChZIC0gb2JqTWFyZ2luWzBdKSArICdweCc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCAodGhpcyBjb25kaXRpb24gc2hvdWxkIHNwYXJlIENQVSk6IDEpIGlmIG1vdXNlIHBvaW50ZXIgaXMgaW5zaWRlIERJViBpZD1cInJlZGlwcy1kcmFnXCIgMikgYW5kIGF1dG9zY3JvbGwgaXMgbm90IHdvcmtpbmcgMykgYW5kIGN1cnJlbnQgdGFibGUgY29udGFpbnMgbmVzdGVkIHRhYmxlIG9yIGN1cnNvciBpcyBvdXRzaWRlIG9mIGN1cnJlbnQgY2VsbFxyXG4gICAgaWYgKFggPCBkaXZCb3hbMV0gJiYgWCA+IGRpdkJveFszXSAmJiBZIDwgZGl2Qm94WzJdICYmIFkgPiBkaXZCb3hbMF0gJiZcclxuICAgICAgZWRnZS5mbGFnLnggPT09IDAgJiYgZWRnZS5mbGFnLnkgPT09IDAgJiZcclxuICAgICAgKGN1cnJlbnRDZWxsLmNvbnRhaW5UYWJsZSB8fCAoWCA8IGN1cnJlbnRDZWxsWzNdIHx8IFggPiBjdXJyZW50Q2VsbFsxXSB8fCBZIDwgY3VycmVudENlbGxbMF0gfHwgWSA+IGN1cnJlbnRDZWxsWzJdKSkpXHJcbiAgICB7XHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAvLyBzZXQgY3VycmVudCB0YWJsZSByb3cgYW5kIHRhYmxlIGNlbGxcclxuICAgICAgY2VsbENoYW5nZWQoKTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG5ldyBsb2NhdGlvbiBpcyBpbnNpZGUgdGFibGUgYW5kIG5ldyBsb2NhdGlvbiBpcyBkaWZmZXJlbnQgdGhlbiBvbGQgbG9jYXRpb25cclxuICAgIH1cclxuXHJcbiAgICAvLyBpZiBhdXRvU2Nyb2xsIG9wdGlvbiBpcyBlbmFibGVkIChieSBkZWZhdWx0IGl0IGlzIGJ1dCBpdCBjYW4gYmUgdHVybmVkIG9mZilcclxuICAgIGlmIChSRURJUFMuZHJhZy5zY3JvbGwuZW5hYmxlKVxyXG4gICAge1xyXG4gICAgICBlZGdlLnBhZ2UueCA9IGJvdW5kIC0gKHNjcmVlbi53aWR0aCAvIDIgID4gWCA/IFggLSBvYmpNYXJnaW5bM10gOiBzY3JlZW4ud2lkdGggLSBYIC0gb2JqTWFyZ2luWzFdKTsgICAgICAgLy8gY2FsY3VsYXRlIGhvcml6b250YWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuXHJcbiAgICAgIGlmIChlZGdlLnBhZ2UueCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgIHtcclxuICAgICAgICBpZiAoZWRnZS5wYWdlLnggPiBib3VuZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2hlbiBvYmplY3QgaXMgb25seSBoYWxmIHZpc2libGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLnBhZ2UueCA9IGJvdW5kO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZ2V0IGhvcml6b250YWwgd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICAgIC8vc2Nyb2xsUG9zaXRpb24gPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSAwOyAgIC8vZGlzYWJsaW5nIGJlY2F1c2Ugd2Ugc2hvdWxkbid0IGhhdmUgdGhlIHVzZXIgc2Nyb2xsaW5nIGhvcml6b250YWxseSBhbmQgdGhpcyBpbXByb3ZlcyBwZXJmb3JtYW5jZSBmb3IgbGFyZ2UgdHJlZXNcclxuXHJcbiAgICAgICAgZWRnZS5wYWdlLnggKj0gWCA8IHNjcmVlbi53aWR0aCAvIDIgPyAtMSA6IDE7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvblxyXG5cclxuICAgICAgICAvLyBpZiBwYWdlIGJvdW5kIGlzIGNyb3NzZWQgYW5kIHRoaXMgdHdvIGNhc2VzIGFyZW4ndCBtZXQ6IDEpIHNjcm9sbGJhciBpcyBvbiB0aGUgbGVmdCBhbmQgdXNlciB3YW50cyB0byBzY3JvbGwgbGVmdCAyKSBzY3JvbGxiYXIgaXMgb24gdGhlIHJpZ2h0IGFuZCB1c2VyIHdhbnRzIHRvIHNjcm9sbCByaWdodFxyXG4gICAgICAgIGlmICghKChlZGdlLnBhZ2UueCA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPD0gMCkgfHwgKGVkZ2UucGFnZS54ID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA+PSAoc2Nyb2xsRGF0YS53aWR0aCAtIHNjcmVlbi53aWR0aCkpKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoZWRnZS5mbGFnLngrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlIGF1dG9zY3JvbGwgZnVuY3Rpb24gKHRoaXMgc2hvdWxkIGhhcHBlbiBvbmx5IG9uY2UpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAvLyByZXNldCBvbnNjcm9sbCBldmVudFxyXG4gICAgICAgICAgICBhdXRvU2Nyb2xsWCh3aW5kb3cpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB3aW5kb3cgYXV0b3Njcm9sbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlXHJcbiAgICAgIHtcclxuICAgICAgICBlZGdlLnBhZ2UueCA9IDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVkZ2UucGFnZS55ID0gYm91bmQgLSAoc2NyZWVuLmhlaWdodCAvIDIgPiBZID8gWSAtIG9iak1hcmdpblswXSA6IHNjcmVlbi5oZWlnaHQgLSBZIC0gb2JqTWFyZ2luWzJdKTsgICAgICAvLyBjYWxjdWxhdGUgdmVydGljYWxseSBjcm9zc2VkIHBhZ2UgYm91bmRcclxuICAgICAgXHJcbiAgICAgIGlmIChlZGdlLnBhZ2UueSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZFxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGVkZ2UucGFnZS55ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgbWF4IGNyb3NzZWQgYm91bmRcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlZGdlLnBhZ2UueSA9IGJvdW5kO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCB2ZXJ0aWNhbCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uXHJcbiAgICAgICAgZWRnZS5wYWdlLnkgKj0gWSA8IHNjcmVlbi5oZWlnaHQgLyAyID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc2Nyb2xsIGRpcmVjdGlvblxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghKChlZGdlLnBhZ2UueSA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPD0gMCkgfHwgKGVkZ2UucGFnZS55ID4gMCAmJiBzY3JvbGxQb3NpdGlvbiA+PSAoc2Nyb2xsRGF0YS5oZWlnaHQgLSBzY3JlZW4uaGVpZ2h0KSkpKSAgICAvLyBpZiBwYWdlIGJvdW5kIGlzIGNyb3NzZWQgYW5kIHRoaXMgdHdvIGNhc2VzIGFyZW4ndCBtZXQ6IDEpIHNjcm9sbGJhciBpcyBvbiB0aGUgcGFnZSB0b3AgYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIHVwIDIpIHNjcm9sbGJhciBpcyBvbiB0aGUgcGFnZSBib3R0b20gYW5kIHVzZXIgd2FudHMgdG8gc2Nyb2xsIGRvd25cclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZiAoZWRnZS5mbGFnLnkrKyA9PT0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmaXJlIGF1dG9zY3JvbGwgKHRoaXMgc2hvdWxkIGhhcHBlbiBvbmx5IG9uY2UpXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFJFRElQUy5ldmVudC5yZW1vdmUod2luZG93LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBvbnNjcm9sbCBldmVudFxyXG4gICAgICAgICAgICBhdXRvU2Nyb2xsWSh3aW5kb3cpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB3aW5kb3cgYXV0b3Njcm9sbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgZWRnZS5wYWdlLnkgPSAwO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgc2Nyb2xsRGF0YS5jb250YWluZXIubGVuZ3RoOyBpKyspICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVzdCBpZiBkcmFnZ2VkIG9iamVjdCBpcyBpbiBzY3JvbGxhYmxlIGNvbnRhaW5lciwgdGhpcyBjb2RlIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBpZiBzY3JvbGxhYmxlIGNvbnRhaW5lciAoRElWIHdpdGggb3ZlcmZsb3cgb3RoZXIgdGhhbiAndmlzaWJsZSkgZXhpc3RzIG9uIHBhZ2VcclxuICAgICAge1xyXG4gICAgICAgIHNjYSA9IHNjcm9sbERhdGEuY29udGFpbmVyW2ldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGN1cnJlbnQgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzY2EuYXV0b3Njcm9sbCAmJiBYIDwgc2NhLm9mZnNldFsxXSAmJiBYID4gc2NhLm9mZnNldFszXSAmJiBZIDwgc2NhLm9mZnNldFsyXSAmJiBZID4gc2NhLm9mZnNldFswXSkgLy8gaWYgZHJhZ2dlZCBvYmplY3QgaXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyIGFuZCBzY3JvbGxhYmxlIGNvbnRhaW5lciBoYXMgZW5hYmxlZCBhdXRvc2Nyb2xsIG9wdGlvblxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UuZGl2LnggPSBib3VuZCAtIChzY2EubWlkc3RYICA+IFggPyBYIC0gb2JqTWFyZ2luWzNdIC0gc2NhLm9mZnNldFszXSA6IHNjYS5vZmZzZXRbMV0gLSBYIC0gb2JqTWFyZ2luWzFdKTsgICAvLyBjYWxjdWxhdGUgaG9yaXpvbnRhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZWRnZS5kaXYueCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlLmRpdi54ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdoZW4gb2JqZWN0IGlzIG9ubHkgaGFsZiB2aXNpYmxlIChwYWdlIGlzIHNjcm9sbGVkIG9uIHRoYXQgb2JqZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZWRnZS5kaXYueCA9IGJvdW5kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlZGdlLmRpdi54ICo9IFggPCBzY2EubWlkc3RYID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb246IG5lZ2F0aXZlIC0gbGVmdCwgcG9zaXRpdmUgLSByaWdodFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZmxhZy54KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvbnNjcm9sbCBldmVudCBoYW5kbGVyIGFuZCBjYWxsIGF1dG9TY3JvbGxZIGZ1bmN0aW9uIG9ubHkgb25jZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZShzY2EuZGl2LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAgICAgICAgIGF1dG9TY3JvbGxYKHNjYS5kaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlZGdlLmRpdi54ID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgZWRnZS5kaXYueSA9IGJvdW5kIC0gKHNjYS5taWRzdFkgID4gWSA/IFkgLSBvYmpNYXJnaW5bMF0gLSBzY2Eub2Zmc2V0WzBdIDogc2NhLm9mZnNldFsyXSAtIFkgLSBvYmpNYXJnaW5bMl0pOyAgIC8vIGNhbGN1bGF0ZSB2ZXJ0aWNhbGx5IGNyb3NzZWQgcGFnZSBib3VuZFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAoZWRnZS5kaXYueSA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50IGNyb3NzZXMgcGFnZSBib3VuZCB0aGVuIHNldCBzY3JvbGwgZGlyZWN0aW9uIGFuZCBjYWxsIGF1dG8gc2Nyb2xsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChlZGdlLmRpdi55ID4gYm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbiBjYXNlIHdoZW4gb2JqZWN0IGlzIG9ubHkgaGFsZiB2aXNpYmxlIChwYWdlIGlzIHNjcm9sbGVkIG9uIHRoYXQgb2JqZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZWRnZS5kaXYueSA9IGJvdW5kO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlZGdlLmRpdi55ICo9IFkgPCBzY2EubWlkc3RZID8gLTEgOiAxOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHNjcm9sbCBkaXJlY3Rpb246IG5lZ2F0aXZlIC0gdXAsIHBvc2l0aXZlIC0gZG93blxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGVkZ2UuZmxhZy55KysgPT09IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBvbnNjcm9sbCBldmVudCBoYW5kbGVyIGFuZCBjYWxsIGF1dG9TY3JvbGxZIGZ1bmN0aW9uIG9ubHkgb25jZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgUkVESVBTLmV2ZW50LnJlbW92ZShzY2EuZGl2LCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpO1xyXG4gICAgICAgICAgICAgIGF1dG9TY3JvbGxZKHNjYS5kaXYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBlZGdlLmRpdi55ID0gMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJyZWFrIHRoZSBsb29wIChjaGVja2luZyBmb3Igb3RoZXIgc2Nyb2xsYWJsZSBjb250YWluZXJzIGlzIG5vdCBuZWVkZWQpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSAoSSBtZWFuIGRyYWdnZWQgb2JqZWN0IGlzbid0IGluc2lkZSBhbnkgb2Ygc2Nyb2xsYWJsZSBjb250YWluZXIpIHJlc2V0IGNyb3NzZWQgZWRnZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGVkZ2UuZGl2LnggPSBlZGdlLmRpdi55ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gc3RvcCBhbGwgcHJvcGFnYXRpb24gb2YgdGhlIGV2ZW50IGluIHRoZSBidWJibGluZyBwaGFzZS4gIChzYXZlIHN5c3RlbSByZXNvdXJjZXMgYnkgdHVybmluZyBvZmYgZXZlbnQgYnViYmxpbmcgLyBwcm9wYWdhdGlvbilcclxuICAgIGV2dC5jYW5jZWxCdWJibGUgPSB0cnVlO1xyXG4gICAgaWYgKGV2dC5zdG9wUHJvcGFnYXRpb24pIFxyXG4gICAge1xyXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gVGhpcyBtZXRob2QgaXMgY2FsbGVkIChmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSwgYXV0b1Njcm9sbFgsIGF1dG9TY3JvbGxZKSBpbiBjYXNlIG9mIGNoYW5nZSBvZiBjdXJyZW50IHRhYmxlIGNlbGwuXHJcbiAgLy8gV2hlbiBjaGFuZ2UgaGFwcGVucywgdGhlbiByZXR1cm4gYmFja2dyb3VuZCBjb2xvciB0byBvbGQgcG9zaXRpb24sIGhpZ2hsaWdodCBuZXcgcG9zaXRpb24sIGNhbGN1bGF0ZSBjZWxsIGJvdW5kYXJpZXMgYW5kIGNhbGwgZXZlbnQuY2hhbmdlZC5cclxuICBjZWxsQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIGlmICgocm93ICE9PSByb3dfb2xkIHx8IGNlbGwgIT09IGNlbGxfb2xkKSkgXHJcbiAgICB7XHJcbiAgICAgIGlmIChyb3dfb2xkICE9PSBudWxsICYmIGNlbGxfb2xkICE9PSBudWxsKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjZWxsIGJhY2tncm91bmQgY29sb3IgdG8gdGhlIHByZXZpb3VzIGNlbGxcclxuICAgICAge1xyXG4gICAgICAgIHNldFRkU3R5bGUocm93X29sZCwgYmdTdHlsZU9sZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciBmb3IgcHJldmlvdXMgdGFibGUgcm93XHJcbiAgICAgICAgUkVESVBTLmRyYWcudGQucHJldmlvdXMgPSB0ZC5wcmV2aW91cyA9IHRhYmxlLnJvd3Nbcm93X29sZF0uY2VsbHNbY2VsbF9vbGRdOyAgICAgIC8vIGRlZmluZSBwcmV2aW91cyB0YWJsZSBjZWxsXHJcbiAgICAgICAgUkVESVBTLmRyYWcudGQuY3VycmVudCA9IHRkLmN1cnJlbnQgPSB0YWJsZS5yb3dzW3Jvd10uY2VsbHNbY2VsbF07ICAgICAgICAgICAgICAgIC8vIGRlZmluZSBjdXJyZW50IHRhYmxlIGNlbGxcclxuXHJcbiAgICAgICAgaWYgKHJvdyAhPT0gcm93X29sZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciB0YWJsZSBvciByb3cgc2hvdWxkIGNoYW5nZSAoY2hhbmdpbmcgY2VsbCBpbiB0aGUgc2FtZSByb3cgd2lsbCBiZSBpZ25vcmVkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIFJFRElQUy5kcmFnLmV2ZW50LnJvd0NoYW5nZWQodGQuY3VycmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRQb3NpdGlvbigpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIEluIGluaXRpYWxpemF0aW9uIHBoYXNlLCB0aGlzIG1ldGhvZCBpcyBhdHRhY2hlZCBhcyBvbnJlc2l6ZSBldmVudCBoYW5kbGVyIGZvciB3aW5kb3cuICBJdCBhbHNvIGNhbGN1bGF0ZXMgd2luZG93IHdpZHRoIGFuZCB3aW5kb3cgaGVpZ2h0LiBSZXN1bHQgaXMgc2F2ZWQgaW4gdmFyaWFibGVzIHNjcmVlbi53aWR0aCBhbmQgc2NyZWVuLmhlaWdodCB2aXNpYmxlIGluc2lkZSBSRURJUFMuZHJhZyBwcml2YXRlIHNjb3BlLlxyXG4gIGhhbmRsZXJPblJlc2l6ZSA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHNjcmVlbi53aWR0aCAgPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIHNjcmVlbi5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICBcclxuICAgIHNjcm9sbERhdGEud2lkdGggID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoOyAgICAgLy8gc2V0IHNjcm9sbCBzaXplIChvbnJlc2l6ZSwgb25sb2FkIGFuZCBvbm1vdXNldXAgZXZlbnQpXHJcbiAgICBzY3JvbGxEYXRhLmhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcbiAgICBcclxuICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGNvbHVtcyBhbmQgcm93cyBvZmZzZXQgKGNlbGxzIGRpbWVuc2lvbnMpXHJcbiAgfTtcclxuXHJcbiAgLy8gTWV0aG9kIHNldHMgY3VycmVudCByb3cgYW5kIGNlbGwuICBDdXJyZW50IGNlbGwgcG9zaXRpb24gaXMgYmFzZWQgb24gcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlciBhbmQgY2FsY3VsYXRlZCBncmlkIG9mIHRhYmxlcyBpbnNpZGUgZHJhZyBjb250YWluZXIuXHJcbiAgLy8gUm93cyB3aXRoIGRpc3BsYXk9J25vbmUnIGFyZSBub3QgY29udGFpbmVkIGluIHJvd19vZmZzZXQgYXJyYXkgc28gcm93IGJvdW5kcyBjYWxjdWxhdGlvbiBzaG91bGQgdGFrZSBjYXJlIGFib3V0IHNwYXJzZSBhcnJheXMgKHNpbmNlIHZlcnNpb24gNC4zLjYpLlxyXG4gIHNldFRhYmxlUm93Q29sdW1uID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICB2YXIgcHJldmlvdXM7ICAgICAgIC8vIHNldCBwcmV2aW91cyBwb3NpdGlvbiAoY3VycmVudCBjZWxsIHdpbGwgbm90IGJlIGhpZ2hsaWdodGVkKVxyXG4gICAgdmFyIHJvd19vZmZzZXQ7ICAgICAvLyByb3cgb2Zmc2V0cyBmb3IgdGhlIHNlbGVjdGVkIHRhYmxlIChyb3cgYm94IGJvdW5kcylcclxuICAgIHZhciByb3dfZm91bmQ7ICAgICAgLy8gcmVtZW1iZXIgZm91bmQgcm93XHJcbiAgICB2YXIgdG9zID0gW107ICAgICAgIC8vIHRhYmxlIG9mZnNldFxyXG4gICAgdmFyIFgsIFk7ICAgICAgICAgICAvLyBYIGFuZCBZIHBvc2l0aW9uIG9mIG1vdXNlIHBvaW50ZXJcclxuICAgIHZhciBpOyAgICAgICAgICAgICAgLy8gdXNlZCBpbiBsb2NhbCBsb29wXHJcblxyXG4gICAgcHJldmlvdXMgPSBmdW5jdGlvbiAoKSAgICAvLyBzZXQgcHJldmlvdXMgcG9zaXRpb24gKGN1cnJlbnQgY2VsbCB3aWxsIG5vdCBiZSBoaWdobGlnaHRlZClcclxuICAgIHtcclxuICAgICAgaWYgKHJvd19vbGQgIT09IG51bGwgJiYgY2VsbF9vbGQgIT09IG51bGwpXHJcbiAgICAgIHtcclxuICAgICAgICByb3cgPSByb3dfb2xkO1xyXG4gICAgICAgIGNlbGwgPSBjZWxsX29sZDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBYID0gcG9pbnRlci54OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIFggYW5kIFkgcG9zaXRpb24gb2YgbW91c2UgcG9pbnRlclxyXG4gICAgWSA9IHBvaW50ZXIueTtcclxuXHJcbiAgICB0b3NbMF0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzBdOyAvLyB0b3BcclxuICAgIHRvc1sxXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbMV07IC8vIHJpZ2h0XHJcbiAgICB0b3NbMl0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdOyAvLyBib3R0b21cclxuICAgIHRvc1szXSA9IHRhYmxlLnJlZGlwcy5vZmZzZXRbM107IC8vIGxlZnRcclxuXHJcbiAgICAvLyBpZiB0YWJsZSBiZWxvbmdzIHRvIHRoZSBzY3JvbGxhYmxlIGNvbnRhaW5lciB0aGVuIHNldCBzY3JvbGxhYmxlIGNvbnRhaW5lciBvZmZzZXQgaWYgbmVlZGVkIGluIGNhc2Ugd2hlbiBzb21lIHBhcnRzIG9mIHRhYmxlIGFyZSBoaWRkZW4gKGZvciBleGFtcGxlIHdpdGggXCJvdmVyZmxvdzogYXV0b1wiKVxyXG4gICAgaWYgKHRhYmxlLnNjYSAhPT0gdW5kZWZpbmVkKVxyXG4gICAge1xyXG4gICAgICB0b3NbMF0gPSB0b3NbMF0gPiB0YWJsZS5zY2Eub2Zmc2V0WzBdID8gdG9zWzBdIDogdGFibGUuc2NhLm9mZnNldFswXTsgLy8gdG9wXHJcbiAgICAgIHRvc1sxXSA9IHRvc1sxXSA8IHRhYmxlLnNjYS5vZmZzZXRbMV0gPyB0b3NbMV0gOiB0YWJsZS5zY2Eub2Zmc2V0WzFdOyAvLyByaWdodFxyXG4gICAgICB0b3NbMl0gPSB0b3NbMl0gPCB0YWJsZS5zY2Eub2Zmc2V0WzJdID8gdG9zWzJdIDogdGFibGUuc2NhLm9mZnNldFsyXTsgLy8gYm90dG9tXHJcbiAgICAgIHRvc1szXSA9IHRvc1szXSA+IHRhYmxlLnNjYS5vZmZzZXRbM10gPyB0b3NbM10gOiB0YWJsZS5zY2Eub2Zmc2V0WzNdOyAvLyBsZWZ0XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRvc1szXSA8IFggJiYgWCA8IHRvc1sxXSAmJiB0b3NbMF0gPCBZICYmIFkgPCB0b3NbMl0pICAgICAgICAgICAgICAgICAvLyBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSB0YWJsZSAob3Igc2Nyb2xsYWJsZSBjb250YWluZXIpXHJcbiAgICB7XHJcbiAgICAgIHJvd19vZmZzZXQgPSB0YWJsZS5yZWRpcHMucm93X29mZnNldDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSByb3cgb2Zmc2V0cyBmb3IgdGhlIHNlbGVjdGVkIHRhYmxlIChyb3cgYm94IGJvdW5kcylcclxuXHJcbiAgICAgIGZvciAocm93ID0gMDsgcm93IDwgcm93X29mZnNldC5sZW5ndGggLSAxOyByb3crKykgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIGN1cnJlbnQgcm93IChsb29wIHNraXBzIGhpZGRlbiByb3dzKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKHJvd19vZmZzZXRbcm93XSA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJvdyBkb2Vzbid0IGV4aXN0IChpbiBjYXNlIG9mIGhpZGRlbiByb3cpIC0gc2tpcCBpdFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCB0b3AgYW5kIGJvdHRvbSBjZWxsIGJvdW5kc1xyXG5cclxuICAgICAgICBpZiAocm93X29mZnNldFtyb3cgKyAxXSAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGJvdHRvbSBjZWxsIGJvdW5kIChpZiBpcyBwb3NzaWJsZSkgLSBoaWRkZW4gcm93IGRvZXNuJ3QgZXhpc3RcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IHJvd19vZmZzZXRbcm93ICsgMV1bMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoaWRkZW4gcm93IChsaWtlIHN0eWxlLmRpc3BsYXkgPT09ICdub25lJylcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmb3IgKGkgPSByb3cgKyAyOyBpIDwgcm93X29mZnNldC5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgbmV4dCB2aXNpYmxlIHJvd1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAocm93X29mZnNldFtpXSAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2aXNpYmxlIHJvdyBmb3VuZFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY3VycmVudENlbGxbMl0gPSByb3dfb2Zmc2V0W2ldWzBdO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoWSA8PSBjdXJyZW50Q2VsbFsyXSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9wIGJvdW5kIG9mIHRoZSBuZXh0IHJvd1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcm93X2ZvdW5kID0gcm93OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgZm91bmQgcm93XHJcblxyXG4gICAgICBpZiAocm93ID09PSByb3dfb2Zmc2V0Lmxlbmd0aCAtIDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBsb29wIGV4Y2VlZHMsIHRoZW4gc2V0IGJvdW5kcyBmb3IgdGhlIGxhc3Qgcm93IChvZmZzZXQgZm9yIHRoZSBsYXN0IHJvdyBkb2Vzbid0IHdvcmsgaW4gSUU4LCBzbyB1c2UgdGFibGUgYm91bmRzKVxyXG4gICAgICB7XHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07XHJcbiAgICAgICAgY3VycmVudENlbGxbMl0gPSB0YWJsZS5yZWRpcHMub2Zmc2V0WzJdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjZWxsID0gMDtcclxuXHJcbiAgICAgIGlmIChyb3cgPCAwIHx8IGNlbGwgPCAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBjZWxsIDwgMCBvciByb3cgPCAwIHRoZW4gdXNlIGxhc3QgcG9zc2libGUgbG9jYXRpb25cclxuICAgICAge1xyXG4gICAgICAgIHByZXZpb3VzKCk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAocm93ICE9PSByb3dfZm91bmQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgY2VsbCBmb3VuZCBidXQgaWYgY3VycmVudCByb3cgZGlmZmVyIGZyb20gcHJldmlvdXNseSBmb3VuZCByb3cgKHRoYW5rcyB0b28gd2hpbGUgbG9vcCB3aXRoIHJvdy0tKSB0aGVuIHRlc3QgaWYgWSBpcyBpbnNpZGUgY3VycmVudCBjZWxsLCAodGhpcyBzaG91bGQgcHJldmVudCBjYXNlIHdoZXJlIFREIGJvcmRlciA+IDFweCBhbmQgdXBwZXIgY29sc3BhbmVkIHJvdyBsaWtlIGluIGV4YW1wbGUxNSkgbG9naWMgd2lsbCBlbmQgaW4gdXBwZXIgY29sc3BhbmVkIHJvdyB3aGlsZSBjdXJyZW50IHJvdyB3aWxsIG5vdCBtb3ZlIC0gYW5kIHRoYXQgd2FzIHdyb25nXHJcbiAgICAgIHtcclxuXHJcbiAgICAgICAgY3VycmVudENlbGxbMF0gPSByb3dfb2Zmc2V0W3Jvd11bMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWNhbGN1bGF0ZSB0b3AgYW5kIGJvdHRvbSByb3cgb2Zmc2V0IChhZ2FpbilcclxuICAgICAgICBjdXJyZW50Q2VsbFsyXSA9IGN1cnJlbnRDZWxsWzBdICsgdGFibGUucm93c1tyb3ddLmNlbGxzW2NlbGxdLm9mZnNldEhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKFkgPCBjdXJyZW50Q2VsbFswXSB8fCBZID4gY3VycmVudENlbGxbMl0pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBZIGlzIG91dHNpZGUgb2YgdGhlIGN1cnJlbnQgcm93LCByZXR1cm4gcHJldmlvdXMgbG9jYXRpb25cclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcmV2aW91cygpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCBzZXRzIGJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBjdXJyZW50IHRhYmxlIGNlbGwgYW5kIHJlbWVtYmVycyBwcmV2aW91cyBwb3NpdGlvbiBhbmQgYmFja2dyb3VuZCBjb2xvci4gIEl0IGlzIGNhbGxlZCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSBhbmQgY2VsbENoYW5nZWQuXHJcbiAgc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKVxyXG4gIHtcclxuICAgIGlmIChyb3cgIT09IG51bGwgJiYgY2VsbCAhPT0gbnVsbCkgICAgICAvLyBpbiBjYXNlIGlmIG9yZGluYXJ5IGVsZW1lbnQgaXMgcGxhY2VkIGluc2lkZSAnZGVueScgdGFibGUgY2VsbFxyXG4gICAge1xyXG4gICAgICBiZ1N0eWxlT2xkID0gZ2V0VGRTdHlsZShyb3cpOyAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3IgYmVmb3JlIHNldHRpbmcgdGhlIG5ldyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgIHNldFRkU3R5bGUocm93KTsgICAgICAgICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0IGN1cnJlbnQgVEQgLyBUUiAoY29sb3JzIGFuZCBzdHlsZXMgYXJlIHJlYWQgZnJvbSBwdWJsaWMgcHJvcGVydHkgXCJob3ZlclwiXHJcbiAgICAgIHJvd19vbGQgPSByb3c7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgY3VycmVudCBwb3NpdGlvbiAoZm9yIHJvdyBhbmQgY2VsbClcclxuICAgICAgY2VsbF9vbGQgPSBjZWxsO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZCBzZXRzIHRhYmxlIGNlbGwocykgYmFja2dyb3VuZCBzdHlsZXMgKGJhY2tncm91bmQgY29sb3JzIGFuZCBib3JkZXIgc3R5bGVzKS5cclxuICAgKiBJZiB0ZFN0eWxlIGlzIHVuZGVmaW5lZCB0aGVuIGN1cnJlbnQgdGQvdHIgd2lsbCBiZSBoaWdobGlnaHRlZCBmcm9tIHB1YmxpYyBwcm9wZXJ0eSBob3Zlci5jb2xvcl90ZCwgaG92ZXIuY29sb3JfdHIgLi4uXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfSByaSBSb3cgaW5kZXguXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHQgT2JqZWN0IGNvbnRhaW5zIGJhY2tncm91bmQgY29sb3IgYW5kIGJvcmRlciBzdHlsZXMgKFwidFwiIGlzIFREIHN0eWxlIG9iamVjdCBpcyBwcmVwYXJlZCBpbiBnZXRUZFN0eWxlIG1ldGhvZCkuXHJcbiAgICovXHJcbiAgc2V0VGRTdHlsZSA9IGZ1bmN0aW9uIChyaSwgdCkgXHJcbiAge1xyXG4gICAgdmFyIHRyLCBzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IGFuZCB0ZC5zdHlsZVxyXG5cclxuICAgIHRyID0gdGFibGUucm93c1tyaV07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHRhYmxlIHJvd1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyLmNlbGxzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbG9ycyB0byB0YWJsZSBjZWxscyAocmVzcGVjdGl2ZWx5KSBvciBmaXJzdCBjb2xvciB0byBhbGwgY2VsbHMgKGluIGNhc2Ugb2Ygc2V0dGluZ3MgaG92ZXIgdG8gdGhlIHJvdylcclxuICAgIHtcclxuICAgICAgcyA9IHRyLmNlbGxzW2ldLnN0eWxlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgcmVmZXJlbmNlIHRvIGN1cnJlbnQgVEQgc3R5bGVcclxuICAgICAgcy5iYWNrZ3JvdW5kQ29sb3IgPSAodCA9PT0gdW5kZWZpbmVkKSA/IFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVHIgOiB0LmNvbG9yW2ldLnRvU3RyaW5nKCk7ICAvLyBUUiBiYWNrZ3JvdW5kIGNvbG9yIC0gdGRTdHlsZSBpcyB1bmRlZmluZWQgdGhlbiBoaWdobGlnaHQgVEQgb3RoZXJ3aXNlIHJldHVybiBwcmV2aW91cyBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgIFxyXG4gICAgICBpZiAoUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHIgIT09IHVuZGVmaW5lZCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRSIGJvcmRlciAtIGlmIGhvdmVyLmJvcmRlclRkIGlzIHNldCB0aGVuIHRha2UgY2FyZSBvZiBib3JkZXIgc3R5bGVcclxuICAgICAge1xyXG4gICAgICAgIGlmICh0ID09PSB1bmRlZmluZWQpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBib3JkZXIgKGhpZ2hsaWdodCkgLSBzb3VyY2Ugcm93IHdpbGwgbm90IGhhdmUgYW55IGJvcmRlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlmIChyb3cgPCByb3dfc291cmNlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiByb3cgaXMgbW92ZWQgYWJvdmUgc291cmNlIHJvdyBpbiBjdXJyZW50IHRhYmxlXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHMuYm9yZGVyVG9wID0gUkVESVBTLmRyYWcuaG92ZXIuYm9yZGVyVHI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcm93IGlzIG1vdmVkIGJlbG93IHNvdXJjZSByb3cgaW4gY3VycmVudCB0YWJsZVxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBzLmJvcmRlckJvdHRvbSA9IFJFRElQUy5kcmFnLmhvdmVyLmJvcmRlclRyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gcHJldmlvdXMgc3RhdGUgYm9yZGVyVG9wIGFuZCBib3JkZXJCb3R0b20gKGV4aXQgZnJvbSBURClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBzLmJvcmRlclRvcFdpZHRoID0gdC50b3BbaV1bMF07XHJcbiAgICAgICAgICBzLmJvcmRlclRvcFN0eWxlID0gdC50b3BbaV1bMV07XHJcbiAgICAgICAgICBzLmJvcmRlclRvcENvbG9yID0gdC50b3BbaV1bMl07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbVdpZHRoID0gdC5ib3R0b21baV1bMF07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbVN0eWxlID0gdC5ib3R0b21baV1bMV07XHJcbiAgICAgICAgICBzLmJvcmRlckJvdHRvbUNvbG9yID0gdC5ib3R0b21baV1bMl07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gIC8vIE1ldGhvZCByZXR1cm5zIGJhY2tncm91bmQgYW5kIGJvcmRlciBzdHlsZXMgYXMgb2JqZWN0IGZvciB0aGUgaW5wdXQgcGFyYW1ldGVyIHJvdyBpbmRleCAocmkpLiAgQHJldHVybiB7T2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBiYWNrZ3JvdW5kIGNvbG9yIGFuZCBib3JkZXIgc3R5bGVzIChmb3IgdGhlIHJvdykuXHJcbiAgZ2V0VGRTdHlsZSA9IGZ1bmN0aW9uIChyaSkgXHJcbiAge1xyXG4gICAgdmFyIHRyLCBjOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IGFuZCB0ZCByZWZlcmVuY2UgICBcclxuICAgIHZhciB0ID0ge2NvbG9yOiBbXSwgdG9wOiBbXSwgcmlnaHQ6IFtdLCBib3R0b206IFtdLCBsZWZ0OiBbXX07ICAgICAgICAvLyBkZWZpbmUgVEQgc3R5bGUgb2JqZWN0IHdpdGggYmFja2dyb3VuZCBjb2xvciBhbmQgYm9yZGVyIHN0eWxlczogdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0XHJcbiAgICAgIFxyXG4gICAgdmFyIGJvcmRlciA9IGZ1bmN0aW9uIChjLCBuYW1lKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByaXZhdGUgbWV0aG9kIGdldHMgYm9yZGVyIHN0eWxlczogdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0XHJcbiAgICB7XHJcbiAgICAgIHZhciB3aWR0aCA9ICdib3JkZXInICsgbmFtZSArICdXaWR0aCcsIHN0eWxlID0gJ2JvcmRlcicgKyBuYW1lICsgJ1N0eWxlJywgY29sb3IgPSAnYm9yZGVyJyArIG5hbWUgKyAnQ29sb3InO1xyXG4gICAgICByZXR1cm4gW2dldFN0eWxlKGMsIHdpZHRoKSwgZ2V0U3R5bGUoYywgc3R5bGUpLCBnZXRTdHlsZShjLCBjb2xvcildO1xyXG4gICAgfTtcclxuXHJcbiAgICB0ciA9IHRhYmxlLnJvd3NbcmldOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHJlZmVyZW5jZSB0byB0aGUgY3VycmVudCB0YWJsZSByb3dcclxuICAgIFxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ci5jZWxscy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIHN0eWxlcyBmb3IgZWFjaCB0YWJsZSBjZWxsXHJcbiAgICB7XHJcbiAgICAgIGMgPSB0ci5jZWxsc1tpXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IFREIHJlZmVyZW5jZVxyXG4gICAgICB0LmNvbG9yW2ldID0gYy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlbWVtYmVyIGJhY2tncm91bmQgY29sb3JcclxuICAgICAgXHJcbiAgICAgIGlmIChSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUciAhPT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgdG9wIGFuZCBib3R0b20gVEQgYm9yZGVyIHN0eWxlcyBpZiBob3Zlci5ib3JkZXJUciBwcm9wZXJ0eSBpcyBzZXRcclxuICAgICAge1xyXG4gICAgICAgIHQudG9wW2ldID0gYm9yZGVyKGMsICdUb3AnKTtcclxuICAgICAgICB0LmJvdHRvbVtpXSA9IGJvcmRlcihjLCAnQm90dG9tJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdDtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgcmV0dXJucyBhcnJheSBvZiBlbGVtZW50IGJvdW5kcyAob2Zmc2V0KSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgKG5lZWRlZCBmb3IgdGFibGUgZ3JpZCBjYWxjdWxhdGlvbikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gYm94IEhUTUxFbGVtZW50IGZvciBib3ggbWV0cmljcy5cclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3Bvc2l0aW9uXSBIVE1MRWxlbWVudCBcInBvc2l0aW9uXCIgc3R5bGUuIEVsZW1lbnRzIHdpdGggc3R5bGUgXCJmaXhlZFwiIHdpbGwgbm90IGhhdmUgaW5jbHVkZWQgcGFnZSBzY3JvbGwgb2Zmc2V0LlxyXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2JveF9zY3JvbGxdIElmIHNldCB0byBcImZhbHNlXCIgdGhlbiBlbGVtZW50IHNjcm9sbCBvZmZzZXQgd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gY2FsY3VsYXRpb24gKGRlZmF1bHQgaXMgXCJ0cnVlXCIpLlxyXG4gICAqIEByZXR1cm4ge0FycmF5fSBCb3ggb2Zmc2V0IGFycmF5OiBbIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCBdXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBjYWxjdWxhdGUgYm94IG9mZnNldCBmb3IgdGhlIGRpdiBpZD1cInJlZGlwcy1kcmFnXCJcclxuICAgKiBkaXZib3ggPSBib3hPZmZzZXQoZHJhZ0NvbnRhaW5lcik7XHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBpbmNsdWRlIHNjcm9sbCBwb3NpdGlvbiBpbiBvZmZzZXRcclxuICAgKiBvZmZzZXQgPSBib3hPZmZzZXQocm93T2JqLCAnZml4ZWQnKTtcclxuICAgKiBAZXhhbXBsZVxyXG4gICAqIC8vIGdldCBESVYgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIGVsZW1lbnQgc2Nyb2xsIG9mZnNldFxyXG4gICAqIGNiID0gYm94T2Zmc2V0KGRpdiwgcG9zaXRpb24sIGZhbHNlKTtcclxuICAgKi9cclxuICBib3hPZmZzZXQgPSBmdW5jdGlvbiAoYm94LCBwb3NpdGlvbiwgYm94X3Njcm9sbClcclxuICB7XHJcbiAgICB2YXIgb0xlZnQgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgbGVmdCAodGFrZSBjYXJlIG9mIGhvcml6b250YWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgdmFyIG9Ub3AgID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IHRvcCAodGFrZSBjYXJlIG9kIHZlcnRpY2FsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIHZhciBib3hPbGQgPSBib3g7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgYm94IG9iamVjdFxyXG5cclxuICAgIGlmIChwb3NpdGlvbiAhPT0gJ2ZpeGVkJykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGFibGVfcG9zaXRpb24gaXMgdW5kZWZpbmVkLCAnJyBvciAncGFnZV9zY3JvbGwnIHRoZW4gaW5jbHVkZSBwYWdlIHNjcm9sbCBvZmZzZXQsIHdpbmRvd1Njcm9sbFBvc2l0aW9uIGlzIHNldCBpbiBjYWxjdWxhdGVDZWxscygpLCBjYWxjdWxhdGVDZWxscygpIGlzIGNhbGxlZCBvbiB3aW5kb3cgc2Nyb2xsIGV2ZW50XHJcbiAgICB7XHJcbiAgICAgIG9MZWZ0ID0gMCAtIHdpbmRvd1Njcm9sbFBvc2l0aW9uWzBdOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZSBvZmZzZXQgbGVmdCAodGFrZSBjYXJlIG9mIGhvcml6b250YWwgc2Nyb2xsIHBvc2l0aW9uKVxyXG4gICAgICBvVG9wICA9IDAgLSB3aW5kb3dTY3JvbGxQb3NpdGlvblsxXTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgb2Zmc2V0IHRvcCAodGFrZSBjYXJlIG9kIHZlcnRpY2FsIHNjcm9sbCBwb3NpdGlvbilcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYm94X3Njcm9sbCA9PT0gdW5kZWZpbmVkIHx8IGJveF9zY3JvbGwgPT09IHRydWUpICAgICAgICAgIC8vIGNsaW1iIHVwIHRocm91Z2ggRE9NIGhpZXJhcmNoeSAoZ2V0U2Nyb2xsUG9zaXRpb24oKSB0YWtlcyBjYXJlIGFib3V0IHBhZ2Ugc2Nyb2xsIHBvc2l0aW9ucylcclxuICAgIHtcclxuICAgICAgZG9cclxuICAgICAge1xyXG4gICAgICAgIG9MZWZ0ICs9IGJveC5vZmZzZXRMZWZ0IC0gYm94LnNjcm9sbExlZnQ7XHJcbiAgICAgICAgb1RvcCArPSBib3gub2Zmc2V0VG9wIC0gYm94LnNjcm9sbFRvcDtcclxuICAgICAgICBib3ggPSBib3gub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcbiAgICAgIHdoaWxlIChib3ggJiYgYm94Lm5vZGVOYW1lICE9PSAnQk9EWScpO1xyXG4gICAgfVxyXG4gICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbGltYiB1cCB0byB0aGUgQk9EWSBlbGVtZW50IGJ1dCB3aXRob3V0IHNjcm9sbCBwb3NpdGlvbnNcclxuICAgIHtcclxuICAgICAgZG9cclxuICAgICAge1xyXG4gICAgICAgIG9MZWZ0ICs9IGJveC5vZmZzZXRMZWZ0O1xyXG4gICAgICAgIG9Ub3AgKz0gYm94Lm9mZnNldFRvcDtcclxuICAgICAgICBib3ggPSBib3gub2Zmc2V0UGFyZW50O1xyXG4gICAgICB9XHJcbiAgICAgIHdoaWxlIChib3ggJiYgYm94Lm5vZGVOYW1lICE9PSAnQk9EWScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vICAgICAgICB0b3AgICAgICAgICAgICAgICAgIHJpZ2h0LCAgICAgICAgICAgICAgICAgICAgIGJvdHRvbSAgICAgICAgICAgbGVmdFxyXG4gICAgcmV0dXJuIFsgb1RvcCwgb0xlZnQgKyBib3hPbGQub2Zmc2V0V2lkdGgsIG9Ub3AgKyBib3hPbGQub2Zmc2V0SGVpZ2h0LCBvTGVmdCBdO1xyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCBpcyBjYWxsZWQgaW4gZXZlcnkgcG9zc2libGUgY2FzZSB3aGVuIHBvc2l0aW9uIG9yIHNpemUgb2YgdGFibGUgZ3JpZCBjb3VsZCBjaGFuZ2UgbGlrZTogcGFnZSBzY3JvbGxpbmcsIGVsZW1lbnQgZHJvcHBlZCB0byB0aGUgdGFibGUgY2VsbCwgZWxlbWVudCBzdGFydCBkcmFnZ2luZyBhbmQgc28gb24uXHJcbiAgLy8gSXQgY2FsY3VsYXRlcyB0YWJsZSByb3cgb2Zmc2V0cyAodGFibGUgZ3JpZCkgYW5kIHNhdmVzIHRvIHRoZSBcInRhYmxlc1wiIGFycmF5LlxyXG4gIC8vIFRhYmxlIHJvd3Mgd2l0aCBzdHlsZSBkaXNwbGF5PSdub25lJyBhcmUgc2tpcHBlZC5cclxuICBjYWxjdWxhdGVDZWxscyA9IGZ1bmN0aW9uICgpIFxyXG4gIHtcclxuICAgIHZhciByb3dfb2Zmc2V0OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm93IGJveFxyXG4gICAgdmFyIHBvc2l0aW9uOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBlbGVtZW50ICh0YWJsZSBvciB0YWJsZSBjb250YWluZXIpIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIFwicGFnZSBzY3JvbGxcIiBvZmZzZXQgc2hvdWxkIG5vdCBiZSBhZGRlZFxyXG4gICAgdmFyIGNiOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBib3ggb2Zmc2V0IGZvciBjb250YWluZXIgYm94IChjYilcclxuXHJcbiAgICB3aW5kb3dTY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZUNlbGxzKCkgaXMgY2FsbGVkIG9uIHdpbmRvdyBzY3JvbGwgZXZlbnQgc28gaGVyZSBpcyBwZXJmZWN0IHBsYWNlIHRvIHJlZnJlc2ggd2luZG93IHNjcm9sbCBwb3NpdGlvblxyXG4gICAgcm93X29mZnNldCA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIHJvd19vZmZzZXQgYXJyYXlcclxuICAgIFxyXG4gICAgcG9zaXRpb24gPSBnZXRTdHlsZSh0YWJsZSwgJ3Bvc2l0aW9uJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGFibGUgc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgXCJwYWdlIHNjcm9sbFwiIG9mZnNldCBmcm9tIGNhbGN1bGF0aW9uIGlmIG5lZWRlZClcclxuICAgIFxyXG4gICAgaWYgKHBvc2l0aW9uICE9PSAnZml4ZWQnKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0YWJsZSBkb2Vzbid0IGhhdmUgc3R5bGUgcG9zaXRpb246Zml4ZWQgdGhlbiB0YWJsZSBjb250YWluZXIgc2hvdWxkIGJlIHRlc3RlZFxyXG4gICAge1xyXG4gICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKHRhYmxlLnBhcmVudE5vZGUsICdwb3NpdGlvbicpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gdGFibGUucm93cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgICAgICAgICAgICAgICAgICAgIC8vIGJhY2t3YXJkIGxvb3AgaGFzIGJldHRlciBwZXJmb21hbmNlXHJcbiAgICB7XHJcbiAgICAgIGlmICh0YWJsZS5yb3dzW2ldLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJykgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCByb3dzIHRvIHRoZSBvZmZzZXQgYXJyYXkgaWYgcm93IGlzIG5vdCBoaWRkZW5cclxuICAgICAge1xyXG4gICAgICAgIHJvd19vZmZzZXRbaV0gPSBib3hPZmZzZXQodGFibGUucm93c1tpXSwgcG9zaXRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRhYmxlLnJlZGlwcy5vZmZzZXQgPSBib3hPZmZzZXQodGFibGUsIHBvc2l0aW9uKTsgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSB0YWJsZSBpbmZvcm1hdGlvbnMgKHRhYmxlIG9mZnNldCBhbmQgcm93IG9mZnNldHMpXHJcbiAgICB0YWJsZS5yZWRpcHMucm93X29mZnNldCA9IHJvd19vZmZzZXQ7XHJcblxyXG4gICAgZGl2Qm94ID0gYm94T2Zmc2V0KGRyYWdDb250YWluZXIpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgYm94IG9mZnNldCBmb3IgdGhlIGRpdiBpZD1yZWRpcHMtZHJhZ1xyXG4gICAgXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjcm9sbERhdGEuY29udGFpbmVyLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgc2Nyb2xsYWJsZSBjb250YWluZXIgYXJlYXMgaWYgbmVlZGVkXHJcbiAgICB7XHJcbiAgICAgIHBvc2l0aW9uID0gZ2V0U3R5bGUoc2Nyb2xsRGF0YS5jb250YWluZXJbaV0uZGl2LCAncG9zaXRpb24nKTsgICAgIC8vIHNldCBjb250YWluZXIgYm94IHN0eWxlIHBvc2l0aW9uICh0byBleGNsdWRlIHBhZ2Ugc2Nyb2xsIG9mZnNldCBmcm9tIGNhbGN1bGF0aW9uIGlmIG5lZWRlZClcclxuICAgICAgY2IgPSBib3hPZmZzZXQoc2Nyb2xsRGF0YS5jb250YWluZXJbaV0uZGl2LCBwb3NpdGlvbiwgZmFsc2UpOyAgICAgLy8gZ2V0IERJViBjb250YWluZXIgb2Zmc2V0IHdpdGggb3Igd2l0aG91dCBcInBhZ2Ugc2Nyb2xsXCIgYW5kIGV4Y2x1ZGVkIHNjcm9sbCBwb3NpdGlvbiBvZiB0aGUgY29udGVudFxyXG4gICAgICBcclxuICAgICAgc2Nyb2xsRGF0YS5jb250YWluZXJbaV0ub2Zmc2V0ID0gY2I7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJlcGFyZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBhcmVhc1xyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5taWRzdFggPSAoY2JbMV0gKyBjYlszXSkgLyAyO1xyXG4gICAgICBzY3JvbGxEYXRhLmNvbnRhaW5lcltpXS5taWRzdFkgPSAoY2JbMF0gKyBjYlsyXSkgLyAyO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE1ldGhvZCByZXR1cm5zIGN1cnJlbnQgcGFnZSBzY3JvbGwgdmFsdWVzIGFzIGFycmF5IChYIGFuZCBZIGF4aXMpLlxyXG4gIGdldFNjcm9sbFBvc2l0aW9uID0gZnVuY3Rpb24gKCkgXHJcbiAge1xyXG4gICAgdmFyIHNjcm9sbFkgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgIC8vdmFyIHNjcm9sbFggPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XHJcbiAgICB2YXIgc2Nyb2xsWCA9IDA7XHJcblxyXG4gICAgcmV0dXJuIFsgc2Nyb2xsWCwgc2Nyb2xsWSBdO1xyXG4gIH07XHJcblxyXG4gIC8vIEhvcml6b250YWwgYXV0byBzY3JvbGwgbWV0aG9kLiAgQHBhcmFtIHtIVE1MRWxlbWVudH0gc28gV2luZG93IG9yIERJViBlbGVtZW50IChzbyAtIHNjcm9sbCBvYmplY3QpLlxyXG4gIGF1dG9TY3JvbGxYID0gZnVuY3Rpb24gKHNvKSBcclxuICB7XHJcbiAgICB2YXIgcG9zLCAgICAgIC8vIGxlZnQgc3R5bGUgcG9zaXRpb25cclxuICAgICAgb2xkLCAgICAgIC8vIG9sZCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChuZWVkZWQgZm9yIHdpbmRvdyBzY3JvbGxpbmcpXHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uLCAvLyBkZWZpbmUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgbWF4c3AsICAgICAgLy8gbWF4aW11bSBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgZWRnZUNyb3NzZWQsICAvLyBjcm9zc2VkIGVkZ2UgZm9yIHdpbmRvdyBhbmQgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgWCA9IHBvaW50ZXIueCwgIC8vIGRlZmluZSBwb2ludGVyIFggcG9zaXRpb25cclxuICAgICAgWSA9IHBvaW50ZXIueTsgIC8vIGRlZmluZSBwb2ludGVyIFkgcG9zaXRpb25cclxuICAgIC8vIGlmIG1vdXNldXAgdGhlbiBzdG9wIGhhbmRsaW5nIFwiY3VycmVudCBjZWxsXCJcclxuICAgIGlmIChlZGdlLmZsYWcueCA+IDApIHtcclxuICAgICAgLy8gY2FsY3VsYXRlIGNlbGwgKGF1dG9zY3JvbGwgaXMgd29ya2luZylcclxuICAgICAgY2FsY3VsYXRlQ2VsbHMoKTtcclxuICAgICAgLy8gc2V0IGN1cnJlbnQgdGFibGUgcm93IGFuZCB0YWJsZSBjZWxsXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7XHJcbiAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlLCByb3cgYW5kIGNlbGwgaWYgbW91c2UgcG9pbnRlciBpcyBpbnNpZGUgRElWIGlkPVwicmVkaXBzLWRyYWdcIlxyXG4gICAgICBpZiAoWCA8IGRpdkJveFsxXSAmJiBYID4gZGl2Qm94WzNdICYmIFkgPCBkaXZCb3hbMl0gJiYgWSA+IGRpdkJveFswXSkge1xyXG4gICAgICAgIGNlbGxDaGFuZ2VkKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHNhdmUgc2Nyb2xsIG9iamVjdCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlIGZvciB0aGUgZmlyc3QgY2FsbCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZVxyXG4gICAgLy8gcmVjdXJzaXZlIGNhbGxzIHdpbGwgbm90IGVudGVyIHRoaXMgY29kZSBhbmQgcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxEYXRhLm9iaiB3aWxsIGJlIHByZXNlcnZlZFxyXG4gICAgaWYgKHR5cGVvZihzbykgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHNjcm9sbERhdGEub2JqID0gc287XHJcbiAgICB9XHJcbiAgICAvLyB3aW5kb3cgYXV0b3Njcm9sbCAoZGVmaW5lIGN1cnJlbnQsIG9sZCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICBpZiAoc2Nyb2xsRGF0YS5vYmogPT09IHdpbmRvdykge1xyXG4gICAgICBzY3JvbGxQb3NpdGlvbiA9IG9sZCA9IGdldFNjcm9sbFBvc2l0aW9uKClbMF07XHJcbiAgICAgIG1heHNwID0gc2Nyb2xsRGF0YS53aWR0aCAtIHNjcmVlbi53aWR0aDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLnBhZ2UueDtcclxuICAgIH1cclxuICAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIChkZWZpbmUgY3VycmVudCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICBlbHNlIHtcclxuICAgICAgc2Nyb2xsUG9zaXRpb24gPSBzY3JvbGxEYXRhLm9iai5zY3JvbGxMZWZ0O1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEub2JqLnNjcm9sbFdpZHRoIC0gc2Nyb2xsRGF0YS5vYmouY2xpZW50V2lkdGg7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5kaXYueDtcclxuICAgIH1cclxuICAgIC8vIGlmIHNjcm9sbGluZyBpcyBwb3NzaWJsZVxyXG4gICAgaWYgKGVkZ2UuZmxhZy54ID4gMCAmJiAoKGVkZ2VDcm9zc2VkIDwgMCAmJiBzY3JvbGxQb3NpdGlvbiA+IDApIHx8IChlZGdlQ3Jvc3NlZCA+IDAgJiYgc2Nyb2xsUG9zaXRpb24gPCBtYXhzcCkpKSB7XHJcbiAgICAgIC8vIGlmIG9iamVjdCBpcyB3aW5kb3dcclxuICAgICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpIHtcclxuICAgICAgICAvLyBzY3JvbGwgd2luZG93XHJcbiAgICAgICAgd2luZG93LnNjcm9sbEJ5KGVkZ2VDcm9zc2VkLCAwKTtcclxuICAgICAgICAvLyBnZXQgbmV3IHdpbmRvdyBzY3JvbGwgcG9zaXRpb24gKGFmdGVyIHNjcm9sbGluZylcclxuICAgICAgICAvLyBiZWNhdXNlIGF0IHBhZ2UgdG9wIG9yIGJvdHRvbSBlZGdlWSBjYW4gYmUgYmlnZ2VyIHRoZW4gdGhlIHJlc3Qgb2Ygc2Nyb2xsaW5nIGFyZWFcclxuICAgICAgICAvLyBpdCB3aWxsIGJlIG5pY2UgdG8ga25vdyBob3cgbXVjaCB3YXMgd2luZG93IHNjcm9sbGVkIGFmdGVyIHNjcm9sbEJ5IGNvbW1hbmRcclxuICAgICAgICBzY3JvbGxQb3NpdGlvbiA9IGdldFNjcm9sbFBvc2l0aW9uKClbMF07XHJcbiAgICAgICAgLy8gZ2V0IGN1cnJlbnQgb2JqZWN0IHRvcCBzdHlsZVxyXG4gICAgICAgIHBvcyA9IHBhcnNlSW50KG9iai5zdHlsZS5sZWZ0LCAxMCk7XHJcbiAgICAgICAgaWYgKGlzTmFOKHBvcykpIHtcclxuICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIG9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHNjcm9sbERhdGEub2JqLnNjcm9sbExlZnQgKz0gZWRnZUNyb3NzZWQ7XHJcbiAgICAgIH1cclxuICAgICAgLy8gcmVjdXJzaXZlIGF1dG9zY3JvbGwgY2FsbFxyXG4gICAgICBzZXRUaW1lb3V0KGF1dG9TY3JvbGxYLCBSRURJUFMuZHJhZy5zY3JvbGwuc3BlZWQpO1xyXG4gICAgfVxyXG4gICAgLy8gYXV0b3Njcm9sbCBpcyBlbmRlZDogZWxlbWVudCBpcyBvdXQgb2YgdGhlIHBhZ2UgZWRnZSBvciBtYXhpbXVtIHBvc2l0aW9uIGlzIHJlYWNoZWQgKGxlZnQgb3IgcmlnaHQpXHJcbiAgICBlbHNlIHtcclxuICAgICAgLy8gcmV0dXJuIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgKHRvIHdpbmRvdyBvciBkaXYgZWxlbWVudClcclxuICAgICAgUkVESVBTLmV2ZW50LmFkZChzY3JvbGxEYXRhLm9iaiwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTtcclxuICAgICAgLy8gcmVzZXQgYXV0byBzY3JvbGwgZmxhZyBYXHJcbiAgICAgIGVkZ2UuZmxhZy54ID0gMDtcclxuICAgICAgLy8gcmVzZXQgY3VycmVudCBjZWxsIHBvc2l0aW9uXHJcbiAgICAgIGN1cnJlbnRDZWxsID0gWzAsIDAsIDAsIDBdO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIFZlcnRpY2FsIGF1dG8gc2Nyb2xsIG1ldGhvZC4gIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNvIFdpbmRvdyBvciBESVYgZWxlbWVudCAoc28gLSBzY3JvbGwgb2JqZWN0KS5cclxuICBhdXRvU2Nyb2xsWSA9IGZ1bmN0aW9uIChzbykgXHJcbiAge1xyXG4gICAgdmFyIHBvcywgICAgICAvLyB0b3Agc3R5bGUgcG9zaXRpb25cclxuICAgICAgb2xkLCAgICAgIC8vIG9sZCB3aW5kb3cgc2Nyb2xsIHBvc2l0aW9uIChuZWVkZWQgZm9yIHdpbmRvdyBzY3JvbGxpbmcpXHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uLCAvLyBkZWZpbmUgY3VycmVudCBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgbWF4c3AsICAgICAgLy8gbWF4aW11bSBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgZWRnZUNyb3NzZWQsICAvLyBjcm9zc2VkIGVkZ2UgZm9yIHdpbmRvdyBhbmQgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgWCA9IHBvaW50ZXIueCwgIC8vIGRlZmluZSBwb2ludGVyIFggcG9zaXRpb25cclxuICAgICAgWSA9IHBvaW50ZXIueTsgIC8vIGRlZmluZSBwb2ludGVyIFkgcG9zaXRpb25cclxuICAgIFxyXG4gICAgaWYgKGVkZ2UuZmxhZy55ID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBtb3VzZXVwIHRoZW4gc3RvcCBoYW5kbGluZyBcImN1cnJlbnQgY2VsbFwiXHJcbiAgICB7XHJcbiAgICAgIGNhbGN1bGF0ZUNlbGxzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBjZWxsIChhdXRvc2Nyb2xsIGlzIHdvcmtpbmcpXHJcbiAgICAgIHNldFRhYmxlUm93Q29sdW1uKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBjdXJyZW50IHRhYmxlIHJvdyBhbmQgdGFibGUgY2VsbFxyXG4gICAgICBcclxuICAgICAgaWYgKFggPCBkaXZCb3hbMV0gJiYgWCA+IGRpdkJveFszXSAmJiBZIDwgZGl2Qm94WzJdICYmIFkgPiBkaXZCb3hbMF0pICAgLy8gc2V0IGN1cnJlbnQgdGFibGUsIHJvdyBhbmQgY2VsbCBpZiBtb3VzZSBwb2ludGVyIGlzIGluc2lkZSBESVYgaWQ9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICAgIHtcclxuICAgICAgICBjZWxsQ2hhbmdlZCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIHNhdmUgc2Nyb2xsIG9iamVjdCB0byB0aGUgZ2xvYmFsIHZhcmlhYmxlIGZvciB0aGUgZmlyc3QgY2FsbCBmcm9tIGhhbmRsZXJPbk1vdXNlTW92ZSwgcmVjdXJzaXZlIGNhbGxzIHdpbGwgbm90IGVudGVyIHRoaXMgY29kZSBhbmQgcmVmZXJlbmNlIHRvIHRoZSBzY3JvbGxEYXRhLm9iaiB3aWxsIGJlIHByZXNlcnZlZFxyXG4gICAgaWYgKHR5cGVvZihzbykgPT09ICdvYmplY3QnKSBcclxuICAgIHtcclxuICAgICAgc2Nyb2xsRGF0YS5vYmogPSBzbztcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHNjcm9sbERhdGEub2JqID09PSB3aW5kb3cpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aW5kb3cgYXV0b3Njcm9sbCAoZGVmaW5lIGN1cnJlbnQsIG9sZCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gb2xkID0gZ2V0U2Nyb2xsUG9zaXRpb24oKVsxXTtcclxuICAgICAgbWF4c3AgPSBzY3JvbGxEYXRhLmhlaWdodCAtIHNjcmVlbi5oZWlnaHQ7XHJcbiAgICAgIGVkZ2VDcm9zc2VkID0gZWRnZS5wYWdlLnk7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNjcm9sbGFibGUgY29udGFpbmVyIChkZWZpbmUgY3VycmVudCBhbmQgbWF4aW11bSBzY3JvbGwgcG9zaXRpb24pXHJcbiAgICB7XHJcbiAgICAgIHNjcm9sbFBvc2l0aW9uID0gc2Nyb2xsRGF0YS5vYmouc2Nyb2xsVG9wO1xyXG4gICAgICBtYXhzcCA9IHNjcm9sbERhdGEub2JqLnNjcm9sbEhlaWdodCAtIHNjcm9sbERhdGEub2JqLmNsaWVudEhlaWdodDtcclxuICAgICAgZWRnZUNyb3NzZWQgPSBlZGdlLmRpdi55O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBpZiBzY3JvbGxpbmcgaXMgcG9zc2libGVcclxuICAgIGlmIChlZGdlLmZsYWcueSA+IDAgJiYgKChlZGdlQ3Jvc3NlZCA8IDAgJiYgc2Nyb2xsUG9zaXRpb24gPiAwKSB8fCAoZWRnZUNyb3NzZWQgPiAwICYmIHNjcm9sbFBvc2l0aW9uIDwgbWF4c3ApKSkgXHJcbiAgICB7XHJcbiAgICAgIGlmIChzY3JvbGxEYXRhLm9iaiA9PT0gd2luZG93KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG9iamVjdCBpcyB3aW5kb3dcclxuICAgICAge1xyXG4gICAgICAgIHdpbmRvdy5zY3JvbGxCeSgwLCBlZGdlQ3Jvc3NlZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzY3JvbGwgd2luZG93XHJcbiAgICAgICAgc2Nyb2xsUG9zaXRpb24gPSBnZXRTY3JvbGxQb3NpdGlvbigpWzFdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBuZXcgd2luZG93IHNjcm9sbCBwb3NpdGlvbiAoYWZ0ZXIgc2Nyb2xsaW5nKSwgYmVjYXVzZSBhdCBwYWdlIHRvcCBvciBib3R0b20gZWRnZVkgY2FuIGJlIGJpZ2dlciB0aGVuIHRoZSByZXN0IG9mIHNjcm9sbGluZyBhcmVhLCBpdCB3aWxsIGJlIG5pY2UgdG8ga25vdyBob3cgbXVjaCB3YXMgd2luZG93IHNjcm9sbGVkIGFmdGVyIHNjcm9sbEJ5IGNvbW1hbmRcclxuICAgICAgICBwb3MgPSBwYXJzZUludChvYmouc3R5bGUudG9wLCAxMCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgb2JqZWN0IHRvcCBzdHlsZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpc05hTihwb3MpKSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwb3MgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvciBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICB7XHJcbiAgICAgICAgc2Nyb2xsRGF0YS5vYmouc2Nyb2xsVG9wICs9IGVkZ2VDcm9zc2VkO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBzZXRUaW1lb3V0KGF1dG9TY3JvbGxZLCBSRURJUFMuZHJhZy5zY3JvbGwuc3BlZWQpOyAgICAgICAgICAgICAgICAgICAgICAvLyByZWN1cnNpdmUgYXV0b3Njcm9sbCBjYWxsXHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF1dG9zY3JvbGwgaXMgZW5kZWQ6IGVsZW1lbnQgaXMgb3V0IG9mIHRoZSBwYWdlIGVkZ2Ugb3IgbWF4aW11bSBwb3NpdGlvbiBpcyByZWFjaGVkICh0b3Agb3IgYm90dG9tKVxyXG4gICAge1xyXG4gICAgICBSRURJUFMuZXZlbnQuYWRkKHNjcm9sbERhdGEub2JqLCAnc2Nyb2xsJywgY2FsY3VsYXRlQ2VsbHMpOyAgICAgICAgICAgICAvLyByZXR1cm4gb25zY3JvbGwgZXZlbnQgaGFuZGxlciAodG8gd2luZG93IG9yIGRpdiBlbGVtZW50KVxyXG4gICAgICBlZGdlLmZsYWcueSA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXNldCBhdXRvIHNjcm9sbCBmbGFnIFlcclxuICAgICAgY3VycmVudENlbGwgPSBbMCwgMCwgMCwgMF07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgY3VycmVudCBjZWxsIHBvc2l0aW9uXHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIGNvcGllcyBjdXN0b20gcHJvcGVydGllcyBmcm9tIHNvdXJjZSBlbGVtZW50IHRvIHRoZSBjbG9uZWQgZWxlbWVudCBhbmQgc2V0cyBldmVudCBoYW5kbGVycyAob25tb3VzZWRvd24gYW5kIG9uZGJsY2xpY2spLlxyXG4gICAqIFRoaXMgYWN0aW9uIHdpbGwgYmUgdGFrZW4gb24gRElWIGVsZW1lbnQgaXRzZWxmIGFuZCBhbGwgY2hpbGQgRElWIGVsZW1lbnRzLlxyXG4gICAqIE5lZWRlZCBpbiBjYXNlIHdoZW4gRElWIGVsZW1lbnQgaXMgY2xvbmVkIG9yIFJPVyBpcyBjbG9uZWQgKGZvciBkcmFnZ2luZyBtb2RlPVwicm93XCIpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHNyYyBTb3VyY2UgZWxlbWVudCAoRElWIG9yIFRSIGVsZW1lbnQpLlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNsbiBDbG9uZWQgZWxlbWVudCAoRElWIG9yIFRSIGVsZW1lbnQpLlxyXG4gICAqL1xyXG4gIGNvcHlQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHNyYywgY2xuKSBcclxuICB7XHJcbiAgICB2YXIgY29weSA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBtZXRob2RcclxuICAgIHZhciBjaGlsZHM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3B5IHByb3BlcnRpZXMgZm9yIGNoaWxkIGVsZW1lbnRzICh0aGlzIG1ldGhvZCBjYWxscyBcImNvcHlcIiBtZXRob2QpXHJcbiAgICBcclxuICAgIGNvcHlbMF0gPSBmdW5jdGlvbiAoZTEsIGUyKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY29weSBtZXRob2QgZm9yIERJViBlbGVtZW50cyAoZTEgc291cmNlIGVsZW1lbnQsIGUyIGNsb25lZCBlbGVtZW50KSwgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80MDk0ODExL2phdmFzY3JpcHQtY2xvbmVub2RlLWFuZC1wcm9wZXJ0aWVzXHJcbiAgICB7XHJcbiAgICAgIGlmIChlMS5yZWRpcHMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgcmVkaXBzIHByb3BlcnR5IGV4aXN0cyBpbiBzb3VyY2UgZWxlbWVudCwgY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVuYWJsZWQsICByZWRpcHMuY29udGFpbmVyIC4uLilcclxuICAgICAge1xyXG4gICAgICAgIGUyLnJlZGlwcyA9IHt9O1xyXG4gICAgICAgIGUyLnJlZGlwcy5lbmFibGVkID0gZTEucmVkaXBzLmVuYWJsZWQ7XHJcbiAgICAgICAgZTIucmVkaXBzLmNvbnRhaW5lciA9IGUxLnJlZGlwcy5jb250YWluZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGUxLnJlZGlwcy5lbmFibGVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9ubW91c2Vkb3duIGV2ZW50IGhhbmRsZXIgaWYgc291cmNlIGVsZW1lbnQgaXMgZW5hYmxlZFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJlZ2lzdGVyRXZlbnRzKGUyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNvcHlbMV0gPSBmdW5jdGlvbiAoZTEsIGUyKSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgY29weSBtZXRob2QgZm9yIFRSIGVsZW1lbnRzIFxyXG4gICAge1xyXG4gICAgICBpZiAoZTEucmVkaXBzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHJlZGlwcyBwcm9wZXJ0eSBleGlzdHMgaW4gc291cmNlIGVsZW1lbnQsIGNvcHkgY3VzdG9tIHByb3BlcnRpZXMgKHJlZGlwcy5lbXB0eVJvdyAuLi4pXHJcbiAgICAgIHtcclxuICAgICAgICBlMi5yZWRpcHMgPSB7fTtcclxuICAgICAgICBlMi5yZWRpcHMuZW1wdHlSb3cgPSBlMS5yZWRpcHMuZW1wdHlSb3c7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIGNoaWxkcyA9IGZ1bmN0aW9uIChlKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmUgbWV0aG9kIHRvIGNvcHkgcHJvcGVydGllcyBmb3IgY2hpbGQgZWxlbWVudHMgKGlucHV0IHBhcmFtZXRlciBpcyBlbGVtZW50IGluZGV4IDAgLSBESVYsIDEgLSBUUilcclxuICAgIHtcclxuICAgICAgdmFyIGVsMSwgZWwyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0aW9uIG9mIERJVi9UUiBlbGVtZW50cyBpbiBzb3VyY2UgYW5kIGNsb25lZCBlbGVtZW50XHJcbiAgICAgIHZhciB0biA9IFsnRElWJywgJ1RSJ107ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFnIG5hbWVcclxuICAgICAgXHJcbiAgICAgIGVsMSA9IHNyYy5nZXRFbGVtZW50c0J5VGFnTmFtZSh0bltlXSk7ICAgICAgICAgICAgLy8gY29sbGVjdCBjaGlsZCBESVYvVFIgZWxlbWVudHMgZnJvbSB0aGUgc291cmNlIGVsZW1lbnQgKHBvc3NpYmxlIGlmIGRpdiBlbGVtZW50IGNvbnRhaW5zIHRhYmxlKVxyXG4gICAgICBlbDIgPSBjbG4uZ2V0RWxlbWVudHNCeVRhZ05hbWUodG5bZV0pOyAgICAgICAgICAgIC8vIGNvbGxlY3QgY2hpbGQgRElWL1RSIGVsZW1lbnRzIGZyb20gY2xvbmVkIGVsZW1lbnRcclxuICAgICAgXHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWwyLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgLy8gY29weSBjdXN0b20gcHJvcGVydGllcyAocmVkaXBzLmVuYWJsZWQsICByZWRpcHMuY29udGFpbmVyIC4uLikgYW5kIHNldCBldmVudCBoYW5kbGVycyB0byBjaGlsZCBESVYgZWxlbWVudHNcclxuICAgICAge1xyXG4gICAgICAgIGNvcHlbZV0oZWwxW2ldLCBlbDJbaV0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBpZiAoc3JjLm5vZGVOYW1lID09PSAnRElWJykgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgc291cmNlIGVsZW1lbnQgaXMgRElWIGVsZW1lbnQgdGhlbiBjb3B5IGN1c3RvbSBwcm9wZXJ0aWVzIGZvciBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBjb3B5WzBdKHNyYywgY2xuKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHNyYy5ub2RlTmFtZSA9PT0gJ1RSJykgICAgICAgICAgICAgICAgICAgICAvLyBpZiBzb3VyY2UgZWxlbWVudCBpcyBUUiBlbGVtZW50IHRoZW4gY29weSBjdXN0b20gcHJvcGVydGllcyBmb3IgVFIgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBjb3B5WzFdKHNyYywgY2xuKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY2hpbGRzKDApOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcHJvcGVydGllcyBmb3IgRElWIGNoaWxkIGVsZW1lbnRzXHJcbiAgICBjaGlsZHMoMSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIGZvciBUUiBjaGlsZCBlbGVtZW50c1xyXG4gIH07XHJcblxyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgdXBkYXRlcyBjbGltaXQxX1ggb3IgY2xpbWl0Ml9YIGNsYXNzIG5hbWUgKFggZGVmaW5lcyBjbG9uaW5nIGxpbWl0KS5cclxuICAgKiA8dWw+XHJcbiAgICogPGxpPmNsaW1pdDFfWCAtIGFmdGVyIGNsb25pbmcgWCBlbGVtZW50cywgbGFzdCBlbGVtZW50IHdpbGwgYmUgbm9ybWFsIGRyYWctYWJsZSBlbGVtZW50PC9saT5cclxuICAgKiA8bGk+Y2xpbWl0Ml9YIC0gYWZ0ZXIgY2xvbmluZyBYIGVsZW1lbnRzLCBsYXN0IGVsZW1lbnQgd2lsbCBzdGF5IHVubW92YWJsZTwvbGk+XHJcbiAgICogPC91bD5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBFbGVtZW50IG9uIHdoaWNoIGNuYW1lIGNsYXNzIHNob3VsZCBiZSB1cGRhdGVkLlxyXG4gICAqIEBwYXJhbSB7SW50ZWdlcn0gdmFsdWUgSW5jcmVtZW50IG9yIGRlY3JlbWVudCBjbGltaXQgdmFsdWUuXHJcbiAgICovXHJcbiAgY2xvbmVMaW1pdCA9IGZ1bmN0aW9uIChlbCwgdmFsdWUpIFxyXG4gIHtcclxuICAgIHZhciBtYXRjaEFycmF5OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1hdGNoIGFycmF5XHJcbiAgICB2YXIgbGltaXRUeXBlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW1pdCB0eXBlICgxIC0gY2xvbmUgYmVjb21lcyBcIm5vcm1hbFwiIGRyYWcgZWxlbWVudCBhdCBsYXN0OyAyIC0gY2xvbmUgZWxlbWVudCBzdGF5cyBpbW1vdmFibGUpXHJcbiAgICB2YXIgbGltaXQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW1pdCBudW1iZXJcclxuICAgIHZhciBjbGFzc2VzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsYXNzIG5hbWVzIG9mIGNsb25lIGVsZW1lbnRcclxuICAgIFxyXG4gICAgY2xhc3NlcyA9IGVsLmNsYXNzTmFtZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVhZCBjbGFzcyBuYW1lIGZyb20gZWxlbWVudFxyXG4gICAgbWF0Y2hBcnJheSA9IGNsYXNzZXMubWF0Y2goL2NsaW1pdChcXGQpXyhcXGQrKS8pOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaCBjbGltaXQgY2xhc3MgbmFtZVxyXG4gICAgXHJcbiAgICBpZiAobWF0Y2hBcnJheSAhPT0gbnVsbCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgY2xhc3MgY29udGFpbnMgY2xpbWl0XHJcbiAgICB7XHJcbiAgICAgIGxpbWl0VHlwZSA9IHBhcnNlSW50KG1hdGNoQXJyYXlbMV0sIDEwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIGxpbWl0VHlwZSAoMSBvciAyKSBhbmQgbGltaXRcclxuICAgICAgbGltaXQgPSBwYXJzZUludChtYXRjaEFycmF5WzJdLCAxMCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAobGltaXQgPT09IDAgJiYgdmFsdWUgPT09IDEpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY3VycmVudCBsaW1pdCBpcyAwIGFuZCBzaG91bGQgYmUgc2V0IHRvIDEgdGhlbiByZXR1cm4gXCJjbG9uaW5nXCIgdG8gdGhlIERJViBlbGVtZW50XHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzc2VzICs9ICcgcmVkaXBzLWNsb25lJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBcInJlZGlwcy1jbG9uZVwiIGNsYXNzIHRvIGNsYXNzIGF0dHJpYnV0ZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsaW1pdFR5cGUgPT09IDIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5hYmxlIERJViBlbGVtZW50IGZvciBjbGltaXQyIHR5cGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbmFibGVEcmFnKHRydWUsIGVsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGxpbWl0ICs9IHZhbHVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgbGltaXQgdmFsdWVcclxuICAgICAgY2xhc3NlcyA9IGNsYXNzZXMucmVwbGFjZSgvY2xpbWl0XFxkX1xcZCsvZywgJ2NsaW1pdCcgKyBsaW1pdFR5cGUgKyAnXycgKyBsaW1pdCk7ICAgICAgICAgLy8gdXBkYXRlIGNsaW1pdCBjbGFzcyBuYW1lIHdpdGggbmV3IGxpbWl0IHZhbHVlXHJcbiAgICAgIFxyXG4gICAgICBpZiAobGltaXQgPD0gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVzdCBpZiBsaW1pdCBkcm9wcyB0byB6ZXJvXHJcbiAgICAgIHtcclxuICAgICAgICBjbGFzc2VzID0gY2xhc3Nlcy5yZXBsYWNlKCdyZWRpcHMtY2xvbmUnLCAnJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vIG1vcmUgY2xvbmluZywgY3V0IG91dCBcInJlZGlwcy1jbG9uZVwiIGZyb20gY2xhc3MgbmFtZVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsaW1pdFR5cGUgPT09IDIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgbGltaXQgdHlwZSBpcyAyIHRoZW4gZGlzYWJsZSBjbG9uZSBlbGVtZW50IChpdCB3aWxsIHN0YXkgaW4gY2VsbClcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbmFibGVEcmFnKGZhbHNlLCBlbCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHNvdXJjZSBESVYgZWxlbWVudFxyXG4gICAgICAgICAgUkVESVBTLmRyYWcuZXZlbnQuY2xvbmVkRW5kMigpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBldmVudC5jbG9uZWRFbmQyIGhhbmRsZXJcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBcclxuICAgICAgICB7XHJcbiAgICAgICAgICBSRURJUFMuZHJhZy5ldmVudC5jbG9uZWRFbmQxKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIGV2ZW50LmNsb25lZEVuZDEgaGFuZGxlclxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZWwuY2xhc3NOYW1lID0gbm9ybWFsaXplKGNsYXNzZXMpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSBzcGFjZXMgYW5kIHJldHVybiBjbGFzc2VzIHRvIHRoZSBjbG9uZSBvYmplY3RcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBNZXRob2QgYXR0YWNoZXMgLyBkZXRhY2hlcyBvbm1vdXNlZG93biwgb250b3VjaHN0YXJ0IGFuZCBvbmRibGNsaWNrIGV2ZW50cyB0byBESVYgZWxlbWVudHMgYW5kIGF0dGFjaGVzIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSBzY3JvbGwgY29udGFpbmVycyBpbiBpbml0aWFsaXphdGlvbiBwaGFzZS5cclxuICAgKiBJdCBhbHNvIGNhbiBiZSB1c2VkIGZvciBlbGVtZW50IGluaXRpYWxpemF0aW9uIGFmdGVyIERJViBlbGVtZW50IHdhcyBtYW51YWxseSBhZGRlZCB0byB0aGUgdGFibGUuXHJcbiAgICogSWYgY2xhc3MgYXR0cmlidXRlIG9mIERJViBjb250YWluZXIgY29udGFpbnMgXCJyZWRpcHMtbm9hdXRvc2Nyb2xsXCIgY2xhc3MgbmFtZSB0aGVuIGF1dG9TY3JvbGwgb3B0aW9uIHdpbGwgYmUgZGlzYWJsZWQuXHJcbiAgICogQHBhcmFtIHtCb29sZWFufFN0cmluZ30gZW5hYmxlX2ZsYWcgRW5hYmxlIC8gZGlzYWJsZSBlbGVtZW50IChvciBlbGVtZW50IHN1YnRyZWUgbGlrZSB0YWJsZSwgZHJhZ2dpbmcgY29udGFpbmVyIC4uLikuXHJcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxTdHJpbmd9IFtlbF0gSFRNTCBub2RlIG9yIENTUyBzZWxlY3RvciB0byBlbmFibGUgLyBkaXNhYmxlLiBQYXJhbWV0ZXIgZGVmaW5lcyBlbGVtZW50IHJlZmVyZW5jZSBvciBDU1Mgc2VsZWN0b3Igb2YgRElWIGVsZW1lbnRzIHRvIGVuYWJsZSAvIGRpc2FibGUuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBlbmFibGUgZWxlbWVudCB3aXRoIGlkPVwiaWQxMjNcIiAoZWxlbWVudCBpZCBzaG91bGQgYmUgYSBzdHJpbmcgYWNjb3JkaW5nIHRvIERPTSBkb2NzKVxyXG4gICAqIHJkLmVuYWJsZURyYWcodHJ1ZSwgJyNpZDEyMycpO1xyXG4gICAqXHJcbiAgICogLy8gb3IgaW5pdCBtYW51YWxseSBhZGRlZCBlbGVtZW50IHdpdGgga25vd24gaWRcclxuICAgKiBSRURJUFMuZHJhZy5lbmFibGVEcmFnKHRydWUsICcjaWQyMzQnKTtcclxuICAgKlxyXG4gICAqIC8vIGRpc2FibGUgYWxsIERJViBlbGVtZW50cyBpbiBkcmFnMSBzdWJ0cmVlXHJcbiAgICogcmQuZW5hYmxlRHJhZyhmYWxzZSwgJyNkcmFnMSBkaXYnKVxyXG4gICAqXHJcbiAgICogLy8gaW5pdCBESVYgZWxlbWVudHMgaW4gZHJhZ2dpbmcgYXJlYSAoaW5jbHVkaW5nIG5ld2x5IGFkZGVkIERJViBlbGVtZW50KVxyXG4gICAqIC8vIERJViBpbml0aWFsaXphdGlvbiB3aWxsIHdvcmsgaWYgdGFibGUgbm9kZSBzdGF5cyBpbnRhY3QgKHRhYmxlIGlzIG5vdCBnZW5lcmF0ZWQgZHluYW1pY2FsbHkpXHJcbiAgICogUkVESVBTLmRyYWcuZW5hYmxlRHJhZygnaW5pdCcpO1xyXG4gICAqXHJcbiAgICogLy8gaW5pdCBhZGRlZCBlbGVtZW50IHdpdGggcmVmZXJlbmNlIG15RWxlbWVudFxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcodHJ1ZSwgbXlFbGVtZW50KTtcclxuICAgKlxyXG4gICAqIC8vIGRpc2FibGUgYWxsIERJViBlbGVtZW50cyB3aXRoaW4gVEQgKHRkIGlzIHJlZmVyZW5jZSB0byBURCBub2RlKVxyXG4gICAqIFJFRElQUy5kcmFnLmVuYWJsZURyYWcoZmFsc2UsIHRkKTtcclxuICAgKi9cclxuICBlbmFibGVEcmFnID0gZnVuY3Rpb24gKGVuYWJsZV9mbGFnLCBlbCkgXHJcbiAge1xyXG4gICAgdmFyIGRpdiA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbGxlY3Rpb24gb2YgZGl2IGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0YWJsZXMgb3Igb25lIGRpdiBlbGVtZW50XHJcbiAgICBcclxuICAgIGlmIChlbCA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IERJViBlbGVtZW50cyBpbnNpZGUgY3VycmVudCBkcmFnIGFyZWEgKGRyYWcgZWxlbWVudHMgYW5kIHNjcm9sbCBjb250YWluZXJzKSBlLmcuIGVuYWJsZURyYWcodHJ1ZSlcclxuICAgIHtcclxuICAgICAgZGl2ID0gZHJhZ0NvbnRhaW5lci5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2Jyk7XHJcbiAgICB9ICAgIFxyXG4gICAgZWxzZSBpZiAodHlwZW9mKGVsKSA9PT0gJ3N0cmluZycpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiZWxcIiBpcyBzdHJpbmcgKENTUyBzZWxlY3RvcikgLSBpdCBjYW4gY29sbGVjdCBvbmUgRElWIGVsZW1lbnQgKGxpa2UgXCIjZDEyXCIpIG9yIG1hbnkgRElWIGVsZW1lbnRzIChsaWtlIFwiI2RyYWcxIGRpdlwiKVxyXG4gICAge1xyXG4gICAgICBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZihlbCkgPT09ICdvYmplY3QnICYmIChlbC5ub2RlTmFtZSAhPT0gJ0RJVicgfHwgZWwuY2xhc3NOYW1lLmluZGV4T2YoJ3JlZGlwcy1kcmFnJykgPT09IC0xKSkgICAgICAvLyBcImVsXCIgaXMgbm9kZSByZWZlcmVuY2UgdG8gZWxlbWVudCB0aGF0IGlzIG5vdCBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiXHJcbiAgICB7XHJcbiAgICAgIGRpdiA9IGVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKTtcclxuICAgIH1cclxuICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub25lIG9mIGFib3ZlLCBlbCBpcyBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZ1wiLCBzbyBwcmVwYXJlIGFycmF5IHdpdGggb25lIERJViBlbGVtZW50XHJcbiAgICB7XHJcbiAgICAgIGRpdlswXSA9IGVsO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBlbmFibGVEaXZzKGVuYWJsZV9mbGFnLCBkaXYpO1xyXG4gIH07XHJcbiAgXHJcbiAgXHJcbiAgZW5hYmxlRGl2cyA9IGZ1bmN0aW9uKGVuYWJsZV9mbGFnLCBkaXYpXHJcbiAge1xyXG4gICAgIHZhciBpLCBqLCBrLCAgICAvLyBsb2NhbCB2YXJpYWJsZXMgdXNlZCBpbiBsb29wXHJcbiAgICAgIHRibHMgPSBbXSwgICAgLy8gY29sbGVjdGlvbiBvZiB0YWJsZXMgaW5zaWRlIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgIGJvcmRlclN0eWxlLCAgLy8gYm9yZGVyIHN0eWxlIChzb2xpZCBvciBkb3R0ZWQpXHJcbiAgICAgIG9wYWNpdHksICAgIC8vIChpbnRlZ2VyKSBzZXQgb3BhY2l0eSBmb3IgZW5hYmxlZCAvIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgIGN1cnNvciwgICAgIC8vIGN1cnNvciBzdHlsZSAobW92ZSBvciBhdXRvKVxyXG4gICAgICBvdmVyZmxvdywgICAvLyBjc3MgdmFsdWUgb2Ygb3ZlcmZsb3cgcHJvcGVydHlcclxuICAgICAgYXV0b3Njcm9sbCwgICAvLyBib29sZWFuIC0gaWYgc2Nyb2xsYWJsZSBjb250YWluZXIgd2lsbCBoYXZlIGF1dG9zY3JvbGwgb3B0aW9uIChkZWZhdWx0IGlzIHRydWUpXHJcbiAgICAgIGVuYWJsZWQsICAgIC8vIGVuYWJsZWQgcHJvcGVydHkgKHRydWUgb3IgZmFsc2UpXHJcbiAgICAgIGNiLCAgICAgICAvLyBib3ggb2Zmc2V0IGZvciBjb250YWluZXIgYm94IChjYilcclxuICAgICAgcG9zaXRpb24sICAgLy8gaWYgdGFibGUgY29udGFpbmVyIGhhcyBwb3NpdGlvbjpmaXhlZCB0aGVuIFwicGFnZSBzY3JvbGxcIiBvZmZzZXQgc2hvdWxkIG5vdCBiZSBhZGRlZFxyXG4gICAgICByZWdleERyYWcgPSAvXFxicmVkaXBzLWRyYWdcXGIvaSwgLy8gcmVndWxhciBleHByZXNzaW9uIHRvIHNlYXJjaCBcInJlZGlwcy1kcmFnXCIgY2xhc3MgbmFtZVxyXG4gICAgICByZWdleE5vQXV0b3Njcm9sbCA9IC9cXGJyZWRpcHMtbm9hdXRvc2Nyb2xsXFxiL2k7IC8vIHJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzZWFyY2ggXCJyZWRpcHMtbm9hdXRvc2Nyb2xsXCIgY2xhc3MgbmFtZSAgIFxyXG5cclxuICAgIG9wYWNpdHkgPSBSRURJUFMuZHJhZy5zdHlsZS5vcGFjaXR5RGlzYWJsZWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgZGlzYWJsZWQgZWxlbWVudHMgZnJvbSBwdWJsaWMgcHJvcGVydHkgXCJvcGFjaXR5RGlzYWJsZWRcIlxyXG4gICAgXHJcbiAgICBpZiAoZW5hYmxlX2ZsYWcgPT09IHRydWUgfHwgZW5hYmxlX2ZsYWcgPT09ICdpbml0JykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHN0eWxlcyBmb3IgZW5hYmxlZCBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBib3JkZXJTdHlsZSA9IFJFRElQUy5kcmFnLnN0eWxlLmJvcmRlckVuYWJsZWQ7XHJcbiAgICAgIGN1cnNvciA9ICdtb3ZlJztcclxuICAgICAgZW5hYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBzZXQgc3R5bGVzIGZvciBkaXNhYmxlZCBESVYgZWxlbWVudFxyXG4gICAge1xyXG4gICAgICBib3JkZXJTdHlsZSA9IFJFRElQUy5kcmFnLnN0eWxlLmJvcmRlckRpc2FibGVkO1xyXG4gICAgICBjdXJzb3IgPSAnYXV0byc7XHJcbiAgICAgIGVuYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gICAgXHJcbiAgICBcclxuICAgIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgZGl2Lmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWluIGxvb3AgdGhhdCBnb2VzIHRocm91Z2ggYWxsIERJViBlbGVtZW50c1xyXG4gICAgeyAgICBcclxuICAgICAgaWYgKHJlZ2V4RHJhZy50ZXN0KGRpdltpXS5jbGFzc05hbWUpKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBESVYgZWxlbWVudCBjb250YWlucyBcInJlZGlwcy1kcmFnXCIgY2xhc3MgbmFtZVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKGVuYWJsZV9mbGFnID09PSAnaW5pdCcgfHwgZGl2W2ldLnJlZGlwcyA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHJlZmVyZW5jZSB0byB0aGUgRElWIGNvbnRhaW5lciAoaW5pdGlhbGl6YXRpb24gb3IgbmV3bHkgYWRkZWQgZWxlbWVudCB0byB0aGUgdGFibGUpIHRoaXMgcHJvcGVydHkgc2hvdWxkIG5vdCBiZSBjaGFuZ2VkIGluIGxhdGVyIGVsZW1lbnQgZW5hYmxlL2Rpc2FibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBkaXZbaV0ucmVkaXBzID0ge307ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgXCJwcm9wZXJ0eSBvYmplY3RcIiBpbiB3aGljaCBhbGwgY3VzdG9tIHByb3BlcnRpZXMgd2lsbCBiZSBzYXZlZFxyXG4gICAgICAgICAgZGl2W2ldLnJlZGlwcy5jb250YWluZXIgPSBkcmFnQ29udGFpbmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlbmFibGVfZmxhZyA9PT0gdHJ1ZSAmJiB0eXBlb2Yob3BhY2l0eSkgPT09ICdudW1iZXInKSAgICAgICAgICAgICAgICAvLyByZW1vdmUgb3BhY2l0eSBtYXNrXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLm9wYWNpdHkgPSAnJztcclxuICAgICAgICAgIGRpdltpXS5zdHlsZS5maWx0ZXIgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZW5hYmxlX2ZsYWcgPT09IGZhbHNlICYmIHR5cGVvZihvcGFjaXR5KSA9PT0gJ251bWJlcicpICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIGRpc2FibGVkIGVsZW1lbnRzXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5IC8gMTAwO1xyXG4gICAgICAgICAgZGl2W2ldLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZWdpc3RlckV2ZW50cyhkaXZbaV0sIGVuYWJsZWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWdpc3RlciBldmVudCBsaXN0ZW5lciBmb3IgRElWIGVsZW1lbnRcclxuICAgICAgICBcclxuICAgICAgICBkaXZbaV0uc3R5bGUuYm9yZGVyU3R5bGUgPSBib3JkZXJTdHlsZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgc3R5bGVzIGZvciBESVYgZWxlbWVudFxyXG4gICAgICAgIGRpdltpXS5zdHlsZS5jdXJzb3IgPSBjdXJzb3I7XHJcbiAgICAgICAgZGl2W2ldLnJlZGlwcy5lbmFibGVkID0gZW5hYmxlZDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGVuYWJsZWQgcHJvcGVydHkgdG8gdGhlIERJViBlbGVtZW50ICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGVuYWJsZV9mbGFnID09PSAnaW5pdCcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXR0YWNoIG9uc2Nyb2xsIGV2ZW50IHRvIHRoZSBESVYgZWxlbWVudCBpbiBpbml0IHBoYXNlIG9ubHkgaWYgRElWIGVsZW1lbnQgaGFzIG92ZXJmbG93IG90aGVyIHRoYW4gZGVmYXVsdCB2YWx1ZSAndmlzaWJsZScgYW5kIHRoYXQgbWVhbnMgc2Nyb2xsYWJsZSBESVYgY29udGFpbmVyXHJcbiAgICAgIHtcclxuICAgICAgICBvdmVyZmxvdyA9IGdldFN0eWxlKGRpdltpXSwgJ292ZXJmbG93Jyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhc2sgZm9yIG92ZXJmbG93IHN0eWxlXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG92ZXJmbG93ICE9PSAndmlzaWJsZScpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgRElWIGlzIHNjcm9sbGFibGVcclxuICAgICAgICB7XHJcbiAgICAgICAgICBSRURJUFMuZXZlbnQuYWRkKGRpdltpXSwgJ3Njcm9sbCcsIGNhbGN1bGF0ZUNlbGxzKTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmaW5lIG9uc2Nyb2xsIGV2ZW50IGhhbmRsZXIgZm9yIHNjcm9sbGFibGUgY29udGFpbmVyXHJcbiAgICAgICAgICBwb3NpdGlvbiA9IGdldFN0eWxlKGRpdltpXSwgJ3Bvc2l0aW9uJyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGNvbnRhaW5lciBib3ggc3R5bGUgcG9zaXRpb24gKHRvIGV4Y2x1ZGUgcGFnZSBzY3JvbGwgb2Zmc2V0IGZyb20gY2FsY3VsYXRpb24gaWYgbmVlZGVkKVxyXG4gICAgICAgICAgY2IgPSBib3hPZmZzZXQoZGl2W2ldLCBwb3NpdGlvbiwgZmFsc2UpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBESVYgY29udGFpbmVyIG9mZnNldCB3aXRoIG9yIHdpdGhvdXQgXCJwYWdlIHNjcm9sbFwiIGFuZCBleGNsdWRlZCBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGNvbnRlbnRcclxuICAgICAgICAgIGF1dG9zY3JvbGwgPSAhcmVnZXhOb0F1dG9zY3JvbGwudGVzdChkaXZbaV0uY2xhc3NOYW1lKTsgICAgICAgICAgICAgICAgICAgICAvLyBzZWFyY2ggZm9yIHJlZGlwcy1ub2F1dG9zY3JvbGwgb3B0aW9uXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHNjcm9sbERhdGEuY29udGFpbmVyW2pdID0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIHNjcm9sbGFibGUgY29udGFpbmVyIGFyZWFzXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRpdiA6IGRpdltpXSwgICAgICAgICAgICAgICAgIC8vIHJlZmVyZW5jZSB0byB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgICAgb2Zmc2V0IDogY2IsICAgICAgICAgICAgICAgICAgLy8gYm94IG9mZnNldCBvZiB0aGUgc2Nyb2xsYWJsZSBjb250YWluZXJcclxuICAgICAgICAgICAgbWlkc3RYIDogKGNiWzFdICsgY2JbM10pIC8gMiwgLy8gbWlkZGxlIFhcclxuICAgICAgICAgICAgbWlkc3RZIDogKGNiWzBdICsgY2JbMl0pIC8gMiwgLy8gbWlkZGxlIFlcclxuICAgICAgICAgICAgYXV0b3Njcm9sbCA6IGF1dG9zY3JvbGwgICAgICAgLy8gYXV0b3Njcm9sbCBlbmFibGVkIG9yIGRpc2FibGVkICh0cnVlIG9yIGZhbHNlKVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgdGJscyA9IGRpdltpXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndGFibGUnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlYXJjaCBmb3IgdGFibGVzIGluc2lkZSBzY3JvbGxhYmxlIGNvbnRhaW5lclxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgdGJscy5sZW5ndGg7IGsrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCBnb2VzIHRocm91Z2ggZm91bmQgdGFibGVzIGluc2lkZSBzY3JvbGxhYmxlIGFyZWFcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdGJsc1trXS5zY2EgPSBzY3JvbGxEYXRhLmNvbnRhaW5lcltqXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYSByZWZlcmVuY2UgdG8gdGhlIGNvcnJlc3BvbmRpbmcgc2Nyb2xsYWJsZSBhcmVhXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGorKzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbmNyZWFzZSBzY3JvbGxhYmxlIGNvbnRhaW5lciBjb3VudGVyXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9ICAgXHJcbiAgfTtcclxuXHJcbiAgLy9NZXRob2QgcmV0dXJucyBzdHlsZSB2YWx1ZSBmb3IgcmVxdWVzdGVkIEhUTUwgZWxlbWVudCBhbmQgc3R5bGUgbmFtZS5cclxuICBnZXRTdHlsZSA9IGZ1bmN0aW9uIChlbCwgc3R5bGVfbmFtZSkgXHJcbiAge1xyXG4gICAgaWYgKGVsICYmIGVsLmN1cnJlbnRTdHlsZSkgXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBlbC5jdXJyZW50U3R5bGVbc3R5bGVfbmFtZV07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChlbCAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSkgXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsLCBudWxsKVtzdHlsZV9uYW1lXTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBmaW5kIHRoZSBmaXJzdCBwYXJlbnQgZWxlbWVudCBvZiBlbCB3aXRoIHRoZSB0YWcgbmFtZSB0YWdfbmFtZSBcclxuICBmaW5kUGFyZW50ID0gZnVuY3Rpb24gKHRhZ19uYW1lLCBlbCkgXHJcbiAge1xyXG4gICAgZWwgPSBlbC5wYXJlbnROb2RlOyAgICAgICAgICAgICAgICAgLy8gc2V0IFwiZWxcIiB0byB0aGUgbmV4dCBub2RlICh0byBwcmV2ZW50IGZpbmRpbmcgbm9kZSBpdHNlbGYpXHJcbiAgICBcclxuICAgIHdoaWxlIChlbCkgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IGxvb3BcclxuICAgIHtcclxuICAgICAgaWYgKGVsLm5vZGVOYW1lID09PSB0YWdfbmFtZSkgICAgIC8vIG5vZGUgaXMgZm91bmRcclxuICAgICAge1xyXG4gICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9kZSBpcyBmb3VuZCBhbmQgbG9vcCBjYW4gYmUgZW5kZWRcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZWwgPSBlbC5wYXJlbnROb2RlOyAgICAgICAgICAgICAgIC8vIG1vdmUgb24gdG8gdGhlIHBhcmVudCBub2RlXHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBlbDtcclxuICB9O1xyXG5cclxuICAvL0Z1bmN0aW9uIHJldHVybnMgYSBzdHJpbmcgaW4gd2hpY2ggYWxsIG9mIHRoZSBwcmVjZWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlIHNwYWNlIGhhcyBiZWVuIHJlbW92ZWQsIGFuZCBpbiB3aGljaCBhbGwgaW50ZXJuYWwgc2VxdWVuY2VzIG9mIHdoaXRlIGlzIHJlcGxhY2VkIHdpdGggb25lIHdoaXRlIHNwYWNlLlxyXG4gIG5vcm1hbGl6ZSA9IGZ1bmN0aW9uIChzdHIpIFxyXG4gIHtcclxuICAgIGlmIChzdHIgIT09IHVuZGVmaW5lZCkgXHJcbiAgICB7XHJcbiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykucmVwbGFjZSgvXFxzezIsfS9nLCAnICcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gc3RyOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gbm9ybWFsaXplZCBzdHJpbmcgKHdpdGhvdXQgcHJlY2VkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXMpXHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kIHNldHMgb3BhY2l0eSB0byB0YWJsZSByb3cgb3IgZGVsZXRlcyByb3cgY29udGVudC5cclxuICAgKiBJbnB1dCBwYXJhbWV0ZXIgXCJlbFwiIGlzIHJlZmVyZW5jZSB0byB0aGUgdGFibGUgcm93IG9yIHJlZmVyZW5jZSB0byB0aGUgY2xvbmVkIG1pbmkgdGFibGUgKHdoZW4gcm93IGlzIG1vdmVkKS5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ30gZWwgSWQgb2Ygcm93IGhhbmRsZXIgKGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHJlZGlwcy1yb3dcIikgb3IgcmVmZXJlbmNlIHRvIGVsZW1lbnQgKHNvdXJjZSByb3cgb3IgbWluaSB0YWJsZSkuXHJcbiAgICogQHBhcmFtIHtJbnRlZ2VyfFN0cmluZ30gb3BhY2l0eSBPcGFjaXR5IGxldmVsIChmcm9tIDAgdG8gMTAwKSBvciBcImVtcHR5XCIgKHRoZW4gY29udGVudCBvZiB0YWJsZSBjZWxscyBpbiByb3cgd2lsbCBiZSBkZWxldGVkIC0gaW4gdGhhdCBjYXNlIGZpcnN0IHBhcmFtZXRlciBzaG91bGQgYmUgVFIpLlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbY29sb3JdIEJhY2tncm91bmQgY29sb3IuXHJcbiAgICogQGV4YW1wbGVcclxuICAgKiAvLyBzZXQgcmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZyBsaWJyYXJ5XHJcbiAgICogcmQgPSBSRURJUFMuZHJhZztcclxuICAgKlxyXG4gICAqIC8vIG1ha2Ugcm93IHNlbWktdHJhbnNwYXJlbnRcclxuICAgKiByZC5yb3dPcGFjaXR5KHJvd09iaiwgNTApO1xyXG4gICAqXHJcbiAgICogLy8gc2V0IHJvdyBhcyBlbXB0eSBhbmQgd2hpdGUgKGNvbnRlbnQgaW4gdGFibGUgY2VsbHMgd2lsbCBiZSBkZWxldGVkKVxyXG4gICAqIHJkLnJvd09wYWNpdHkocm93T2JqLCAnZW1wdHknLCAnV2hpdGUnKTtcclxuICAgKi9cclxuICByb3dPcGFjaXR5ID0gZnVuY3Rpb24gKGVsLCBvcGFjaXR5LCBjb2xvcikgXHJcbiAge1xyXG4gICAgdmFyIHRkTm9kZUxpc3Q7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWJsZSBjZWxsc1xyXG4gICAgdmFyIGksIGo7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29wIHZhcmlhYmxlc1xyXG4gICAgXHJcbiAgICBpZiAodHlwZW9mKGVsKSA9PT0gJ3N0cmluZycpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGlucHV0IHBhcmFtZXRlciBpcyBzdHJpbmcgKHRoaXMgc2hvdWxkIGJlIGVsZW1lbnQgaWQpLCB0aGVuIHNldCBlbGVtZW50IHJlZmVyZW5jZVxyXG4gICAge1xyXG4gICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKTtcclxuICAgICAgZWwgPSBmaW5kUGFyZW50KCdUQUJMRScsIGVsKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWwgY291bGQgYmUgcmVmZXJlbmNlIG9mIHRoZSBESVYgY2xhc3M9XCJyZWRpcHMtZHJhZyByZWRpcHMtcm93XCIgKHJvdyBoYW5kbGVyKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoZWwubm9kZU5hbWUgPT09ICdUUicpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIGVsIGlzIFRSLCB0aGVuIHNldCBiYWNrZ3JvdW5kIGNvbG9yIHRvIGVhY2ggY2VsbCAoaWYgbmVlZGVkKSBhbmQgYXBwbHkgb3BhY2l0eVxyXG4gICAge1xyXG4gICAgICB0ZE5vZGVMaXN0ID0gZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3RkJyk7ICAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IHRhYmxlIGNlbGwgZnJvbSB0aGUgcm93XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGROb2RlTGlzdC5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgb3BhY2l0eSBmb3IgRElWIGVsZW1lbnRcclxuICAgICAge1xyXG4gICAgICAgIHRkTm9kZUxpc3RbaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3IgPyBjb2xvciA6ICcnOyAvLyBzZXQgYmFja2dyb3VuZCBjb2xvciB0byB0YWJsZSBjZWxsIGlmIG5lZWRlZFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChvcGFjaXR5ID09PSAnZW1wdHknKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBvcGFjaXR5IGlzIHNldCB0byBcImVtcHR5XCIgdGhlbiBkZWxldGUgY2VsbCBjb250ZW50XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdGROb2RlTGlzdFtpXS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSBzZXQgb3BhY2l0eSB0byBldmVyeSBjaGlsZCBub2RlIGluIHRhYmxlIGNlbGxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzLmxlbmd0aDsgaisrKSAgIC8vIGxvb3AgdGhyb3VnaCBjaGlsZCBub2RlcyBvZiBldmVyeSB0YWJsZSBjZWxsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIGFwcGx5IHN0eWxlcyBvbmx5IHRvIEVsZW1lbnQgbm9kZXMgKG5vdCB0ZXh0IG5vZGVzLCBhdHRyaWJ1dGVzIC4uLiksIGh0dHA6Ly9jb2RlLnN0ZXBoZW5tb3JsZXkub3JnL2phdmFzY3JpcHQvZG9tLW5vZGV0eXBlLWNvbnN0YW50cy9cclxuICAgICAgICAgICAgaWYgKHRkTm9kZUxpc3RbaV0uY2hpbGROb2Rlc1tqXS5ub2RlVHlwZSA9PT0gMSkgXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICB0ZE5vZGVMaXN0W2ldLmNoaWxkTm9kZXNbal0uc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7XHJcbiAgICAgICAgICAgICAgdGROb2RlTGlzdFtpXS5jaGlsZE5vZGVzW2pdLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gcm93IGlzIG1vdmVkIHRoZW4gUkVESVBTLmRyYWcgd2lsbCBjcmVhdGUgbWluaSB0YWJsZSB3aXRoIG9uZSByb3csIGFsbCBicm93c2VycyAoSUU4LCBPcGVyYTExLCBGRjMuNiwgQ2hyb21lMTApIGNhbiBzZXQgb3BhY2l0eSB0byB0aGUgdGFibGVcclxuICAgIHtcclxuICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHkgLyAxMDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIEZGLCBDaHJvbWUsIE9wZXJhXHJcbiAgICAgIGVsLnN0eWxlLmZpbHRlciA9ICdhbHBoYShvcGFjaXR5PScgKyBvcGFjaXR5ICsgJyknOyAgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBJRVxyXG4gICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvciA/IGNvbG9yIDogJyc7ICAgICAgICAgICAgICAvLyBzZXQgYmFja2dyb3VuZCBjb2xvclxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICAvKiBwdWJsaWMgcHJvcGVydGllcyAqL1xyXG4gICAgb2JqIDogb2JqLCAgICAgICAgICAgICAgICAgIC8vVHlwZTogSFRNTEVsZW1lbnQgLSBDdXJyZW50bHkgbW92ZWQgRElWIGVsZW1lbnQuIFJlZmVyZW5jZSB0byB0aGUgUkVESVBTLmRyYWcub2JqIChkcmFnZ2VkIERJViBlbGVtZW50KSBpcyB2aXNpYmxlIGFuZCBjYW4gYmUgdXNlZCBpbiBhcHByb3ByaWF0ZSBldmVudCBoYW5kbGVycy5cclxuICAgIG9iak9sZCAgOiBvYmpPbGQsICAgICAgICAgICAvL1R5cGU6IEhUTUxFbGVtZW50IC0gUHJldmlvdXNseSBtb3ZlZCBESVYgZWxlbWVudCAoYmVmb3JlIGNsaWNrZWQgb3IgY2xvbmVkKS4gSW4gY2FzZSB3aGVuIERJViBlbGVtZW50IGlzIGNsb25lZCwgb2JqIGlzIHJlZmVyZW5jZSBvZiBjdXJyZW50IChjbG9uZWQpIERJViBlbGVtZW50IHdoaWxlIG9iak9sZCBpcyByZWZlcmVuY2Ugb2YgYm90dG9tIChvcmlnaW4pIERJViBlbGVtZW50LlxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgY29udGFpbnMgcmVmZXJlbmNlIHRvIHByZXZpb3VzLCBzb3VyY2UsIGN1cnJlbnQgYW5kIHRhcmdldCB0YWJsZSBjZWxsLiBUZCByZWZlcmVuY2VzIGNhbiBiZSB1c2VkIGluIGV2ZW50IGhhbmRsZXJzLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQuc291cmNlIC0gcmVmZXJlbmNlIHRvIHNvdXJjZSB0YWJsZSBjZWxsIChzZXQgaW4gb25tb3VzZWRvd24pPC9saT5cclxuICAgICAqIDxsaT57SFRNTEVsZW1lbnR9IHRkLnByZXZpb3VzIC0gcmVmZXJlbmNlIHRvIHByZXZpb3VzIHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCk8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQuY3VycmVudCAtIHJlZmVyZW5jZSB0byBjdXJyZW50IHRhYmxlIGNlbGwgKHNldCBpbiBvbm1vdXNlbW92ZSBhbmQgYXV0b3Njcm9sbCk8L2xpPlxyXG4gICAgICogPGxpPntIVE1MRWxlbWVudH0gdGQudGFyZ2V0IC0gcmVmZXJlbmNlIHRvIHRhcmdldCB0YWJsZSBjZWxsICh0YXJnZXQgdGFibGUgY2VsbCBpcyBzZXQgaW4gYSBtb21lbnQgb2YgZHJvcHBpbmcgZWxlbWVudCB0byB0aGUgdGFibGUgY2VsbCk8L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICB0ZCA6IHRkLFxyXG4gICAgLyoqXHJcbiAgICAgKiBIb3ZlciBvYmplY3QgY29udGFpbnMgNCBwcm9wZXJ0aWVzOiBjb2xvclRkLCBjb2xvclRyLCBib3JkZXJUZCBhbmQgYm9yZGVyVHIuIGNvbG9yVGQgYW5kIGNvbG9yVHIgZGVmaW5lIGhvdmVyIGNvbG9yIGZvciBESVYgZWxlbWVudCBhbmQgdGFibGUgcm93LlxyXG4gICAgICogSWYgYm9yZGVyVGQgaXMgZGVmaW5lZCwgdGhlbiBoaWdobGlnaHRlZCBjZWxsIHdpbGwgaGF2ZSBib3JkZXIuIElmIGJvcmRlclRyIGlzIGRlZmluZWQgdGhlbiBoaWdobGlnaHRlZCByb3cgd2lsbCBoYXZlIG9ubHkgdG9wIG9yIGJvdHRvbSBib3JkZXIuXHJcbiAgICAgKiBUb3AgYm9yZGVyIHNob3dzIHRoYXQgcm93IHdpbGwgYmUgcGxhY2VkIGFib3ZlIGN1cnJlbnQgcm93LCB3aGlsZSBib3R0b20gYm9yZGVyIHNob3dzIHRoYXQgY3VycmVudCByb3cgd2lsbCBiZSBwbGFjZWQgYmVsb3cgY3VycmVudCByb3cuXHJcbiAgICAgKiBTb21lIGJyb3dzZXJzIG1heSBoYXZlIHByb2JsZW0gd2l0aCBcImJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZVwiIHRhYmxlIHN0eWxlIGFuZCBib3JkZXIgaGlnaGxpZ2h0aW5nLlxyXG4gICAgICogSW4gdGhhdCBjYXNlIHRyeSB3aXRob3V0IGNvbGxhcHNpbmcgVEQgYm9yZGVycyAoZS5nIHNldCBcImJvcmRlci1zcGFjaW5nOjBcIiBhbmQgc21hbGxlciBcInRkLmJvcmRlci13aWR0aFwiKS5cclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICogQG5hbWUgUkVESVBTLmRyYWcjaG92ZXJcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBzZXQgXCIjOUJCM0RBXCIgYXMgaG92ZXIgY29sb3IgZm9yIFREXHJcbiAgICAgKiBSRURJUFMuZHJhZy5ob3Zlci5jb2xvclRkID0gJyM5QkIzREEnO1xyXG4gICAgICpcclxuICAgICAqIC8vIG9yIHNldCBcIkxpbWVcIiBhcyBob3ZlciBjb2xvciBmb3IgVFJcclxuICAgICAqIFJFRElQUy5kcmFnLmhvdmVyLmNvbG9yVHIgPSAnTGltZSc7XHJcbiAgICAgKlxyXG4gICAgICogLy8gc2V0IHJlZCBib3JkZXIgZm9yIGhpZ2hsaWdodGVkIFREXHJcbiAgICAgKiBSRURJUFMuZHJhZy5ob3Zlci5ib3JkZXJUZCA9ICcycHggc29saWQgcmVkJztcclxuICAgICAqL1xyXG4gICAgaG92ZXIgOiBob3ZlcixcclxuICAgIC8qKlxyXG4gICAgICogU2Nyb2xsIG9iamVjdCBjb250YWlucyBwcm9wZXJ0aWVzIG5lZWRlZCBmb3IgYXV0b3Njcm9sbCBvcHRpb24uXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IHNjcm9sbC5lbmFibGUgLSBFbmFibGUgLyBkaXNhYmxlIGF1dG9zY3JvbGwgb3B0aW9uLiBCeSBkZWZhdWx0IGF1dG9zY3JvbGwgaXMgZW5hYmxlZCBidXQgaXQgY2FuIGJlIHVzZWZ1bGwgaW4gc29tZSBjYXNlcyB0byBjb21wbGV0ZWx5IHR1cm4gb2ZmIGF1dG9zY3JvbGwgKGlmIGFwcGxpY2F0aW9uIGRvZXNuJ3QgbmVlZCBhdXRvc2Nyb2xsaW5nIHBhZ2Ugbm9yIGF1dG9zY3JvbGxpbmcgRElWIGNvbnRhaW5lcikuIFR1cm5pbmcgb2ZmIGF1dG9zY3JvbGwgd2lsbCBzcGVlZCB1cCBhcHBsaWNhdGlvbiBiZWNhdXNlIGV4dHJhIGNhbGN1bGF0aW9ucyB3aWxsIGJlIHNraXBwZWQuIERlZmF1bHQgaXMgdHJ1ZTwvbGk+XHJcbiAgICAgKiA8bGk+e0ludGVnZXJ9IHNjcm9sbC5ib3VuZCAtIEJvdW5kIHNpemUgZm9yIHRyaWdnZXJpbmcgcGFnZSBhdXRvU2Nyb2xsIG9yIGF1dG9TY3JvbGwgb2Ygc2Nyb2xsYWJsZSBESVYgY29udGFpbmVyLiBEZWZhdWx0IHZhbHVlIGlzIDI1IChweCkuPC9saT5cclxuICAgICAqIDxsaT57SW50ZWdlcn0gc2Nyb2xsLnNwZWVkIC0gQXV0b3Njcm9sbCBwYXVzZSBpbiBtaWxsaXNlY29uZHMuIERlZmF1bHQgdmFsdWUgaXMgMjAgKG1pbGxpc2Vjb25kcykuPC9saT5cclxuICAgICAqIDwvdWw+XHJcbiAgICAgKiBAdHlwZSBPYmplY3RcclxuICAgICAqL1xyXG4gICAgc2Nyb2xsIDogc2Nyb2xsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgY29udGFpbnMgc3R5bGVzIChjb2xvcnMsIG9wYWNpdHkgbGV2ZWxzKSBmb3IgRElWIGVsZW1lbnRzIGFuZCB0YWJsZSByb3dzLlxyXG4gICAgICogPHVsPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLmJvcmRlckVuYWJsZWQgLSBCb3JkZXIgc3R5bGUgZm9yIGVuYWJsZWQgRElWIGVsZW1lbnRzLiBEZWZhdWx0IGlzIFwic29saWRcIi48L2xpPlxyXG4gICAgICogPGxpPntTdHJpbmd9IHN0eWxlLmJvcmRlckRpc2FibGVkIC0gQm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBESVYgZWxlbWVudHMuIERlZmF1bHQgaXMgXCJkb3R0ZWRcIi48L2xpPlxyXG4gICAgICogPGxpPntJbnRlZ2VyfSBzdHlsZS5vcGFjaXR5RGlzYWJsZWQgLSBPcGFjaXR5IGxldmVsIGZvciBkaXNhYmxlZCBlbGVtZW50cy4gRGVmYXVsdCBpcyBlbXB0eSBzdHJpbmcuPC9saT5cclxuICAgICAqIDxsaT57U3RyaW5nfSBzdHlsZS5yb3dFbXB0eUNvbG9yIC0gXCJFbXB0eSByb3dcIiBjb2xvci4gV2hlbiBsYXN0IHJvdyBmcm9tIHRhYmxlIGlzIG1vdmVkIHRoZW4gdGhpcyBjb2xvciB3aWxsIGJlIHNldCB0byBcImVtcHR5IHJvd1wiLiBEZWZhdWx0IGlzIFwid2hpdGVcIi48L2xpPlxyXG4gICAgICogPC91bD5cclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBkZWZpbmUgYm9yZGVyIHN0eWxlIGZvciBkaXNhYmxlZCBlbGVtZW50c1xyXG4gICAgICogUkVESVBTLmRyYWcuc3R5bGUuYm9yZGVyRGlzYWJsZWQgPSAnZGFzaGVkJztcclxuICAgICAqIEB0eXBlIE9iamVjdFxyXG4gICAgICovXHJcbiAgICBzdHlsZSA6IHN0eWxlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBPYmplY3QgZGVmaW5lcyBzZXZlcmFsIHJ1bGVzIHJlbGF0ZWQgdG8gY2xvbmluZyBESVYgZWxlbWVudHMgbGlrZSBlbmFibGUgY2xvbmluZyB3aXRoIHNoaWZ0IGtleSwgZW5hYmxlIHJldHVybmluZyBjbG9uZWQgRElWIGVsZW1lbnQgdG8gaXRzIHNvdXJjZSBhbmQgc28gb24uXHJcbiAgICAgKiBJbnN0ZWFkIG9mIG1vdmluZywgRElWIGVsZW1lbnQgLyByb3cgd2lsbCBiZSBjbG9uZWQgYW5kIHJlYWR5IGZvciBkcmFnZ2luZy5cclxuICAgICAqIEp1c3QgcHJlc3MgU0hJRlQga2V5IGFuZCB0cnkgdG8gZHJhZyBESVYgZWxlbWVudCAvIHJvdy5cclxuICAgICAqIGlmIGNsb25lLnNlbmRCYWNrIHByb3BlcnR5IHNldCB0byB0cnVlLCBjbG9uZWQgRElWIGVsZW1lbnQgd2lsbCBiZSBkZWxldGVkIHdoZW4gZHJvcHBlZCB0byB0aGUgY2VsbCBjb250YWluaW5nIGl0cyBzb3VyY2UgY2xvbmUgZWxlbWVudC5cclxuICAgICAqIElmIGV4aXN0cywgXCJjbGltaXRcIiBjbGFzcyB3aWxsIGJlIHVwZGF0ZWQgKGluY3JlYXNlZCBieSAxKS5cclxuICAgICAqIGNsb25lLmRyb3AgcHJvcGVydHkgZGVmaW5lcyBwbGFjaW5nIGNsb25lZCBESVYgZWxlbWVudCAoZHJvcHBlZCBvdXRzaWRlIGFueSB0YWJsZSkgdG8gdGhlIGxhc3QgbWFya2VkIHBvc2l0aW9uLlxyXG4gICAgICogSWYgdGhpcyBwcm9wZXJ0eSBpcyBzZXQgdG8gdHJ1ZSwgdGhlIGNsb25lZCBESVYgZWxlbWVudCB3aWxsIGJlIGFsd2F5cyBwbGFjZWQgdG8gdGhlIHRhYmxlIGNlbGwuXHJcbiAgICAgKiA8dWw+XHJcbiAgICAgKiA8bGk+e0Jvb2xlYW59IGNsb25lLmtleURpdiAtIElmIHNldCB0byB0cnVlLCBhbGwgRElWIGVsZW1lbnRzIG9uIHRhYmxlcyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5rZXlSb3cgLSBJZiBzZXQgdG8gdHJ1ZSwgdGFibGUgcm93cyBjb3VsZCBiZSBjbG9uZWQgd2l0aCBwcmVzc2VkIFNISUZUIGtleS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5zZW5kQmFjayAtIElmIHNldCB0byB0cnVlLCBjbG9uZWQgZWxlbWVudCBjYW4gYmUgcmV0dXJuZWQgdG8gaXRzIHNvdXJjZS4gRGVmYXVsdCBpcyBmYWxzZS48L2xpPlxyXG4gICAgICogPGxpPntCb29sZWFufSBjbG9uZS5kcm9wIC0gSWYgc2V0IHRvIHRydWUsIGNsb25lZCBlbGVtZW50IHdpbGwgYmUgYWx3YXlzIHBsYWNlZCB0byB0aGUgdGFibGUgKHRvIHRoZSBsYXN0IHBvc3NpYmxlIGNlbGwpIG5vIG1hdHRlciBpZiBpcyBkcm9wcGVkIG91dHNpZGUgdGhlIHRhYmxlLiBEZWZhdWx0IGlzIGZhbHNlLjwvbGk+XHJcbiAgICAgKiA8L3VsPlxyXG4gICAgICogQHR5cGUgT2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGNsb25lIDogY2xvbmUsXHJcbiAgICAvKiBwdWJsaWMgbWV0aG9kcyAoZG9jdW1lbnRlZCBpbiBtYWluIGNvZGUpICovXHJcbiAgICBpbml0IDogaW5pdCxcclxuICAgIGVuYWJsZURyYWcgOiBlbmFibGVEcmFnLFxyXG4gICAgZW5hYmxlRGl2cyA6IGVuYWJsZURpdnMsXHJcbiAgICByb3dPcGFjaXR5IDogcm93T3BhY2l0eSxcclxuICAgIGdldFNjcm9sbFBvc2l0aW9uIDogZ2V0U2Nyb2xsUG9zaXRpb24sXHJcbiAgICBnZXRTdHlsZSA6IGdldFN0eWxlLFxyXG4gICAgZmluZFBhcmVudCA6IGZpbmRQYXJlbnQsXHJcbiAgICBldmVudCA6IGV2ZW50XHJcbiAgfTtcclxufSgpKTtcclxuXHJcblxyXG5pZiAoIVJFRElQUy5ldmVudCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgUkVESVBTLmV2ZW50IGlzbid0IGFscmVhZHkgZGVmaW5lZCAoZnJvbSBvdGhlciBSRURJUFMgZmlsZSlcclxue1xyXG4gIFJFRElQUy5ldmVudCA9IChmdW5jdGlvbiAoKSBcclxuICB7XHJcbiAgICB2YXIgYWRkO1xyXG4gICAgdmFyIHJlbW92ZTtcclxuXHJcbiAgICBhZGQgPSBmdW5jdGlvbiAob2JqLCBldmVudE5hbWUsIGhhbmRsZXIpICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXJcclxuICAgIHtcclxuICAgICAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgZmFsc2UpOyAgICAgICAgLy8gKGZhbHNlKSByZWdpc3RlciBldmVudCBpbiBidWJibGUgcGhhc2UgKGV2ZW50IHByb3BhZ2F0ZXMgZnJvbSBmcm9tIHRhcmdldCBlbGVtZW50IHVwIHRvIHRoZSBET00gcm9vdClcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGhhbmRsZXIpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgXHJcbiAgICAgIHtcclxuICAgICAgICBvYmpbJ29uJyArIGV2ZW50TmFtZV0gPSBoYW5kbGVyO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIChvYmosIGV2ZW50TmFtZSwgaGFuZGxlcikgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBldmVudCBsaXN0ZW5lclxyXG4gICAge1xyXG4gICAgICBpZiAob2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIpIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAob2JqLmRldGFjaEV2ZW50KSBcclxuICAgICAge1xyXG4gICAgICAgIG9iai5kZXRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBoYW5kbGVyKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIFxyXG4gICAgICB7XHJcbiAgICAgICAgb2JqWydvbicgKyBldmVudE5hbWVdID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4geyBhZGQ6IGFkZCwgcmVtb3ZlOiByZW1vdmUgfTtcclxuICB9KCkpO1xyXG59IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgcmVkaXBzID0ge307XHJcblxyXG5yZWRpcHMuaW5pdCA9IGZ1bmN0aW9uICgpIFxyXG57XHJcbiAgdmFyIHJkID0gUkVESVBTLmRyYWc7ICAgLy8gcmVmZXJlbmNlIHRvIHRoZSBSRURJUFMuZHJhZyBsaWJyYXJ5XHJcblxyXG4gIHJkLmluaXQoKTtcclxuXHJcbiAgLy9yZC5jbG9uZS5rZXlEaXYgPSByZC5jbG9uZS5rZXlSb3cgPSB0cnVlOyAgIC8vIGVuYWJsZSBjbG9uZSBlbGVtZW50IGFuZCBjbG9uZSByb3cgd2l0aCBzaGlmdCBrZXlcclxuXHJcbiAgcmQuZXZlbnQucm93RHJvcHBlZCA9IGZ1bmN0aW9uIChuZXdQYXJlbnRSb3cpXHJcbiAge1xyXG4gICAgdmFyIG1vdmVkSUQgICAgICAgPSBwYXJzZUludChyZC5vYmpPbGQuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gICAgdmFyIG1vdmVkUm93ICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZC5vYmpPbGQuaWQpO1xyXG4gICAgdmFyIG5ld1BhcmVudElEICAgPSBwYXJzZUludChuZXdQYXJlbnRSb3cuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gICAgdmFyIG9sZFBhcmVudElEICAgPSBnZXRQYXJlbnRJRChtb3ZlZFJvdyk7XHJcblxyXG4gICAgbW92ZUFzc2VtYmx5KG1vdmVkSUQsIG5ld1BhcmVudElELCBvbGRQYXJlbnRJRCwgbmV3UGFyZW50Um93KTsgIC8vbW92ZSB0aGUgbm9kZSBpbiB0aGUgZGF0YSwgaW5jbHVkaW5nIGFsbCBkZXNjZW5kYW50IG5vZGVzXHJcblxyXG4gICAgcmVmcmVzaERhdGFNb2RlbERpc3BsYXkoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETzogdGVtcCBmb3IgZGlzcGxheWluZyB0aGUgbW9kZWwgb24gdGhlIHBhZ2UgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlc1xyXG5cclxuICAgIC8vc2hvdyB0aGUgZXhwYW5kIGJ1dHRvbiBmb3IgdGhlIG5ldyBwYXJlbnQsIGluIGNhc2UgaXQgd2FzIHByZXZpb3VzbHkgY2hpbGRsZXNzXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kSUQnICsgbmV3UGFyZW50SUQpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUtZXhwYW5kJyk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kSUQnICsgbmV3UGFyZW50SUQpLmNsYXNzTGlzdC5hZGQoJ3Nob3ctZXhwYW5kJyk7XHJcbiAgfTtcclxuXHJcbiAgcmQuZXZlbnQucm93RHJvcHBlZFNvdXJjZSA9IGZ1bmN0aW9uICgpICAgICAgICAgLy8gcm93IHdhcyBkcm9wcGVkIHRvIHRoZSBzb3VyY2UgLSBldmVudCBoYW5kbGVyLCBtaW5pIHRhYmxlIChjbG9uZWQgcm93KSB3aWxsIGJlIGRlbGV0ZWQgYW5kIHNvdXJjZSByb3cgc2hvdWxkIHJldHVybiB0byBvcmlnaW5hbCBzdGF0ZVxyXG4gIHtcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAxMDApOyAgICAgICAgICAgICAgICAvLyBtYWtlIHNvdXJjZSByb3cgY29tcGxldGVseSB2aXNpYmxlIChubyBvcGFjaXR5KVxyXG4gIH07XHJcblxyXG4gIHJkLmV2ZW50LnJvd01vdmVkID0gZnVuY3Rpb24gKClcclxuICB7XHJcbiAgICByZC5yb3dPcGFjaXR5KHJkLm9iaiwgODUpOyAgICAgICAgICAgICAgICAgICAgLy8gc2V0IG9wYWNpdHkgZm9yIG1vdmVkIHJvdywgcmQub2JqIGlzIHJlZmVyZW5jZSBvZiBjbG9uZWQgcm93IChtaW5pIHRhYmxlKVxyXG4gICAgcmQucm93T3BhY2l0eShyZC5vYmpPbGQsIDIwLCAnV2hpdGUnKTsgICAgICAgIC8vIHNldCBvcGFjaXR5IGZvciBzb3VyY2Ugcm93IGFuZCBjaGFuZ2Ugc291cmNlIHJvdyBiYWNrZ3JvdW5kIGNvbG9yLCBvYmoub2JqT2xkIGlzIHJlZmVyZW5jZSBvZiBzb3VyY2Ugcm93XHJcbiAgfTtcclxuXHJcbiAgcmQuZXZlbnQucm93Q2xpY2tlZCAgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Tm90TW92ZWQgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Q2xvbmVkICAgID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93Tm90Q2xvbmVkID0gZnVuY3Rpb24gKCkge307XHJcbiAgcmQuZXZlbnQucm93RGVsZXRlZCAgID0gZnVuY3Rpb24gKCkge307XHJcblxyXG4gIHJkLmV2ZW50LnJvd1VuZGVsZXRlZCA9IGZ1bmN0aW9uICgpICAgICAgICAgICAgIC8vIHJvdyBpcyB1bmRlbGV0ZWQgKHJldHVybiBzb3VyY2Ugcm93IHRvIG9yaWdpbmFsIHN0YXRlKVxyXG4gIHtcclxuICAgIHJkLnJvd09wYWNpdHkocmQub2JqT2xkLCAxMDApO1xyXG4gIH07XHJcbn07XHJcbiIsInZhciBGaWVsZCA9IGZ1bmN0aW9uKG5hbWUpXHJcbntcclxuICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gIHRoaXMuZGF0YXR5cGUgPSBGaWVsZC5OVU1CRVI7XHJcbiAgdGhpcy5mb3JtYXQgPSBGaWVsZC5OVU1CRVJfRk9STUFUO1xyXG4gIHRoaXMucHJlY2lzaW9uID0gJzAuMDAnO1xyXG4gIHRoaXMuYWdnX3R5cGUgPSBGaWVsZC5OT19BR0dSRUdBVElPTjtcclxuICB0aGlzLmFnZ19xdHlfZmllbGQgPSBudWxsO1xyXG59O1xyXG5cclxuRmllbGQuTlVNQkVSID0gJzAnO1xyXG5GaWVsZC5TVFJJTkcgPSAnMSc7XHJcbkZpZWxkLkNIT0lDRSA9ICcyJztcclxuXHJcbkZpZWxkLk5PX0FHR1JFR0FUSU9OID0gJzAnO1xyXG5GaWVsZC5TVU1fQU5ZX0FHR1JFR0FUSU9OID0gJzEnO1xyXG5cclxuRmllbGQuTlVNQkVSX0ZPUk1BVCA9ICcwJztcclxuRmllbGQuUEVSQ0VOVF9GT1JNQVQgPSAnMSc7XHJcbkZpZWxkLlNDSUVOVElGSUNfRk9STUFUID0gJzInOyIsInZhciBzY3JvbGxCYXJXaWR0aDtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKClcclxueyAgXHJcbiAgc2Nyb2xsQmFyV2lkdGggPSBnZXRTY3JvbGxCYXJXaWR0aCgpO1xyXG4gIFxyXG4gIGRvY3VtZW50Lm9ua2V5ZG93biA9IGNoZWNrS2V5OyBcclxuICBcclxuICAkLmFqYXgoeyB0eXBlOiAnR0VUJywgdXJsOiAnYXBpL3Byb2plY3RzJ30pLmRvbmUoZnVuY3Rpb24oZGF0YSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVhZCBwcm9qZWN0cyBmcm9tIHRoZSBzZXJ2ZXJcclxuICB7IFxyXG4gICAgcHJvamVjdHMgPSBkYXRhOyBcclxuICAgIFxyXG4gICAgLy9UT0RPOiByZWFkIGZpZWxkcyBmcm9tIHRoZSBkYXRhYmFzZSAocHV0IHRoZW0gaW4gdGhlIHRyZWU/KVxyXG4gIFxyXG4gICAgJCgnI2hlYWRlcicpLmh0bWwoZ2VuZXJhdGVIZWFkZXJNYXJrdXAocHJvamVjdHMucHJvamVjdHMpKTtcclxuICAgIFxyXG4gICAgJCgnI2VkaXROZXdQcm9qZWN0TmFtZUlucHV0Jykua2V5dXAoZnVuY3Rpb24oZSlcclxuICAgIHtcclxuICAgICAgaWYoZS5rZXlDb2RlID09IEVOVEVSX0tFWSlcclxuICAgICAge1xyXG4gICAgICAgIGNyZWF0ZU5ld1Byb2plY3QoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gaW5pdFByb2plY3RBY3Rpb25zKClcclxue1xyXG4gICQoJyNwcm9qZWN0QWN0aW9uSW5wdXQnKS5rZXl1cChmdW5jdGlvbihlKVxyXG4gIHtcclxuICAgIGlmKGUua2V5Q29kZSA9PSBFTlRFUl9LRVkpXHJcbiAgICB7XHJcbiAgICAgIHByb2plY3RBY3Rpb25FbnRlclByZXNzZWQoKTtcclxuICAgIH1cclxuICB9KTsgXHJcbn1cclxuXHJcbnZhciBnZXRTY3JvbGxCYXJXaWR0aCA9IGZ1bmN0aW9uKCkgXHJcbntcclxuICB2YXIgZGl2LCB3aWR0aDtcclxuICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBkaXYuaW5uZXJIVE1MID0gJzxkaXYgc3R5bGU9XCJ3aWR0aDo1MHB4O2hlaWdodDo1MHB4O3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTUwcHg7dG9wOi01MHB4O292ZXJmbG93OmF1dG87XCI+PGRpdiBzdHlsZT1cIndpZHRoOjFweDtoZWlnaHQ6MTAwcHg7XCI+PC9kaXY+PC9kaXY+JztcclxuICBkaXYgPSBkaXYuZmlyc3RDaGlsZDtcclxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XHJcbiAgd2lkdGggPSBkaXYub2Zmc2V0V2lkdGggLSBkaXYuY2xpZW50V2lkdGg7XHJcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkaXYpO1xyXG4gIHJldHVybiB3aWR0aDtcclxufTsiLCJ2YXIgS0VZX1VQX0FSUk9XID0gMzg7XHJcbnZhciBLRVlfRE9XTl9BUlJPVyA9IDQwO1xyXG52YXIgS0VZX0xFRlRfQVJST1cgPSAzNztcclxudmFyIEtFWV9SSUdIVF9BUlJPVyA9IDM5O1xyXG5cclxuZnVuY3Rpb24gY2hlY2tLZXkoZSkgXHJcbntcclxuICBlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XHJcblxyXG4gIGlmIChlLmtleUNvZGUgPT0gS0VZX1VQX0FSUk9XKSBcclxuICB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgcHJldlJvdyA9ICQoZ2V0QW5jZXN0b3JUYWcoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgJ3RyJykpLnByZXYoKVswXTtcclxuICAgIFxyXG4gICAgaWYocHJldlJvdylcclxuICAgIHtcclxuICAgICAgJCgnIycgKyBnZXROZXh0RWxlbWVudElEKHByZXZSb3cpKS5mb2N1cygpO1xyXG4gICAgfSAgICAgIFxyXG4gIH1cclxuICBlbHNlIGlmIChlLmtleUNvZGUgPT0gS0VZX0RPV05fQVJST1cpIFxyXG4gIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciBuZXh0Um93ID0gJChnZXRBbmNlc3RvclRhZyhkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndHInKSkubmV4dCgpWzBdO1xyXG4gICAgXHJcbiAgICBpZihuZXh0Um93KVxyXG4gICAge1xyXG4gICAgICAkKCcjJyArIGdldE5leHRFbGVtZW50SUQobmV4dFJvdykpLmZvY3VzKCk7XHJcbiAgICB9ICAgICAgIFxyXG4gIH1cclxuICBlbHNlIGlmIChlLmtleUNvZGUgPT0gS0VZX1JJR0hUX0FSUk9XKSBcclxuICB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkKGdldEFuY2VzdG9yVGFnKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsICd0ZCcpKS5uZXh0KCkuZmluZCgnaW5wdXQnKS5mb2N1cygpOyAgXHJcbiAgfVxyXG4gIGVsc2UgaWYgKGUua2V5Q29kZSA9PSBLRVlfTEVGVF9BUlJPVykgXHJcbiAge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJChnZXRBbmNlc3RvclRhZyhkb2N1bWVudC5hY3RpdmVFbGVtZW50LCAndGQnKSkucHJldigpLmZpbmQoJ2lucHV0JykuZm9jdXMoKTsgIFxyXG4gIH0gICAgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE5leHRFbGVtZW50SUQobmV3Um93KVxyXG57XHJcbiAgdmFyIGlkID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5pZDsgIFxyXG4gIGlmKGlkLmluZGV4T2YoJ25vZGVJbnB1dCcpID4gLTEpXHJcbiAge1xyXG4gICAgcmV0dXJuICdub2RlSW5wdXQnICsgbmV3Um93LmlkLnJlcGxhY2UoJ3Jvd2lkJywnJyk7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICB2YXIgY2xhc3NlcyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIHZhciBjID0gY2xhc3Nlc1tpXTtcclxuXHJcbiAgICAgIGlmKGMuaW5kZXhPZignZmllbGRJbnB1dCcpID4gLTEgJiYgYyAhPSAnZmllbGRJbnB1dCcpXHJcbiAgICAgIHtcclxuICAgICAgICB2YXIgZmllbGROYW1lID0gYy5yZXBsYWNlKCdmaWVsZElucHV0JywgJycpO1xyXG4gICAgICAgIHJldHVybiBmaWVsZE5hbWUgKyBuZXdSb3cuaWQucmVwbGFjZSgnZGF0YXJvd2lkJywnJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9ICAgXHJcbn0iLCJmdW5jdGlvbiBnZW5lcmF0ZUhlYWRlck1hcmt1cChwcm9qZWN0cylcclxue1xyXG4gIHZhciBtYXJrdXAgPSAnPHNlbGVjdCBpZD1cInByb2plY3RTZWxlY3RvclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgb25jaGFuZ2U9XCJzZWxlY3RQcm9qZWN0KClcIj4nXHJcbiAgKyAnPG9wdGlvbiBpZD1cInNlbGVjdFByb2plY3RPcHRpb25cIiB2YWx1ZT1cIjBcIj5TZWxlY3QgUHJvamVjdC4uLjwvb3B0aW9uPic7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBwcm9qZWN0cy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICBtYXJrdXAgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgcHJvamVjdHNbaV0uaWQgKyAnXCI+JyArIHByb2plY3RzW2ldLm5hbWUgKyAnPC9vcHRpb24+JztcclxuICB9XHJcblxyXG4gIG1hcmt1cCArPSAnPG9wdGlvbiBpZD1cIm5ld1Byb2plY3RPcHRpb25cIiB2YWx1ZT1cIi0xXCI+Q3JlYXRlIE5ldyBQcm9qZWN0Li4uPC9vcHRpb24+PC9zZWxlY3Q+J1xyXG4gICsgJzxpbnB1dCBpZD1cImVkaXROZXdQcm9qZWN0TmFtZUlucHV0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj48L2lucHV0PidcclxuICArICc8YSBocmVmPVwiI1wiIGlkPVwic2F2ZS1kYXRhYmFzZS1idXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIG9uY2xpY2s9XCJzYXZlVG9EYXRhYmFzZSgpXCI+U2F2ZSB0byBEYXRhYmFzZTwvYT4nO1xyXG4gIC8vbWFya3VwICs9ICc8YSBocmVmPVwiI1wiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgaWQ9XCJzYXZlLWZpbGUtYnV0dG9uXCIgb25jbGljaz1cInNhdmVMb2NhbGx5KClcIj5TYXZlIGFzIEZpbGU8L2E+JztcclxuICBcclxuICAvL21hcmt1cCArPSAnPGRpdiBjbGFzcz1cImRyb3Bkb3duXCI+PGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBkcm9wZG93bi10b2dnbGVcIiB0eXBlPVwiYnV0dG9uXCIgaWQ9XCJtZW51MVwiIGRhdGEtdG9nZ2xlPVwiZHJvcGRvd25cIj4nO1xyXG4gIC8vbWFya3VwICs9ICc8c3BhbiBjbGFzcz1cImNhcmV0XCI+PC9zcGFuPjwvYnV0dG9uPic7XHJcbiAgLy9tYXJrdXAgKz0gJzx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIiByb2xlPVwibWVudVwiIGFyaWEtbGFiZWxsZWRieT1cIm1lbnUxXCI+JztcclxuICAvL21hcmt1cCArPSAnPGxpIHJvbGU9XCJwcmVzZW50YXRpb25cIj48YSByb2xlPVwibWVudWl0ZW1cIiB0YWJpbmRleD1cIi0xXCIgaHJlZj1cIiNcIj5IVE1MPC9hPjwvbGk+JztcclxuICAvL21hcmt1cCArPSAnPC91bD48L2Rpdj4nOyAgXHJcbiAgXHJcbiAgcmV0dXJuIG1hcmt1cDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVQcm9qZWN0U2VsZWN0b3JNYXJrdXAoKVxyXG57XHJcbiAgcmV0dXJuICc8dGFibGU+PHRyIGlkPVwiaGVhZGVyUm93XCI+PHRyPjxkaXYgaWQ9XCJwcm9qZWN0LXNlbGVjdC1jb250YWluZXJcIj4nXHJcbiAgKyAnPHNlbGVjdCBpZD1cInByb2plY3RBY3Rpb25TZWxlY3RvclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgb25jaGFuZ2U9XCJoYW5kbGVQcm9qZWN0QWN0aW9uKClcIj48b3B0aW9uIHZhbHVlPVwiYmxhbmtcIj48L29wdGlvbj4nXHJcbiAgKyAnPG9wdGlvbiB2YWx1ZT1cImFkZEZpZWxkXCI+QWRkIEZpZWxkPC9vcHRpb24+J1xyXG4gICsgJzwvc2VsZWN0PidcclxuICArICc8aW5wdXQgaWQ9XCJwcm9qZWN0QWN0aW9uSW5wdXRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPjwvaW5wdXQ+J1xyXG4gICsgJzwvZGl2PjwvdHI+PHRhYmxlPic7IFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUZpZWxkc1Jvd01hcmt1cCgpXHJcbnsgIFxyXG4gIHZhciBtYXJrdXAgPSAnPHRhYmxlIGlkPVwiZmllbGRIZWFkZXJUYWJsZVwiPjx0ciBpZD1cImZpZWxkSGVhZGVyUm93XCI+JztcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUuZmllbGRzLmxlbmd0aDsgaSsrKSAgICAgICAgICAgICAgLy9hZGQgdGFibGUgaGVhZGVycyB3aXRoIHRoZSBmaWVsZCBuYW1lc1xyXG4gIHtcclxuICAgIG1hcmt1cCArPSBnZXRGaWVsZEhlYWRlck1hcmt1cCh0cmVlLmZpZWxkc1tpXS5uYW1lLCBpKTtcclxuICB9XHJcblxyXG4gIG1hcmt1cCArPSAnPC90cj48L3RhYmxlPic7XHJcbiAgcmV0dXJuIG1hcmt1cDsgIFxyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVRyZWVNYXJrdXAoKVxyXG57XHJcbiAgdmFyIG1hcmt1cCA9ICc8dGFibGUgaWQ9XCJ0cmVlVGFibGVcIj4nO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgdHJlZS5ub2Rlcy5sZW5ndGg7IGkrKykgICAgICAgIC8vYWRkIHJvdyBmb3IgZWFjaCBub2RlXHJcbiAge1xyXG4gICAgbWFya3VwICs9IGFkZFJvdyh0cmVlLm5vZGVzW2ldLCAwLCAnJywgMCk7XHJcbiAgfVxyXG5cclxuICBtYXJrdXAgKz0gJzwvdGFibGU+JztcclxuICByZXR1cm4gbWFya3VwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRSb3cobm9kZSwgZGVwdGgsIGFuY2VzdG9ycywgcGFyZW50KSAgICAgICAvL2FkZCBub2RlIGFuZCBkYXRhIGlucHV0IGZvciBlYWNoIGZpZWxkXHJcbntcclxuICB2YXIgbWFya3VwID0gJyc7XHJcbiAgdmFyIGNsYXNzZXMgPSAnbm9kZVJvdyBkZXB0aCcgKyBkZXB0aCArICcgZXhwYW5kZWQgcGFyZW50JyArIHBhcmVudCArICcgJyArIGFuY2VzdG9ycztcclxuICB2YXIgbm9kZUlEID0gbm9kZS5pZDtcclxuXHJcbiAgdmFyIGRyYWdIYW5kbGUgPSAnPGRpdiBjbGFzcz1cInJlZGlwcy1kcmFnIHB1bGwtcmlnaHRcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tbW92ZVwiPjwvaT48L2Rpdj4nO1xyXG4gIHZhciBkZWxldGVCdXR0b24gPSAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cInB1bGwtcmlnaHQgYnRuIGJ0bi1kYW5nZXIgYnRuLXhzIGRlbGV0ZS1idXR0b25cIiBvbmNsaWNrPVwiZGVsZXRlTm9kZSh0aGlzKVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1yZW1vdmVcIj48L2k+PC9hPic7XHJcbiAgdmFyIGNvcHlCdXR0b24gPSAnPGEgaHJlZj1cIiNcIiAgY2xhc3M9XCJwdWxsLXJpZ2h0IGJ0biBidG4taW5mbyBidG4teHMgY29weS1idXR0b25cIiBvbmNsaWNrPVwiY29weU5vZGUodGhpcylcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tcGx1c1wiPjwvaT48L2E+JztcclxuICB2YXIgc2hvd0V4cGFuZEJ1dHRvbiA9ICc8YSBpZD1cImV4cGFuZElEJyArIG5vZGVJRCArICdcIiBocmVmPVwiI1wiIHN0eWxlPVwibWFyZ2luLWxlZnQ6JyArIChkZXB0aCoxMCkgKyAncHhcIiBvbmNsaWNrPVwidG9nZ2xlKHRoaXMpXCIgY2xhc3M9XCJidG4gYnRuLXhzIHNob3ctZXhwYW5kXCI+PHNwYW4gaWQ9XCJpY29uJyArIG5vZGVJRCArICdcIiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duIGljb25wJyArIHBhcmVudCArICdcIj48L3NwYW4+PC9hPic7XHJcbiAgdmFyIGhpZGVFeHBhbmRCdXR0b24gPSAnPGEgaWQ9XCJleHBhbmRJRCcgKyBub2RlSUQgKyAnXCIgaHJlZj1cIiNcIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OicgKyAoZGVwdGgqMTApICsgJ3B4XCIgb25jbGljaz1cInRvZ2dsZSh0aGlzKVwiIGNsYXNzPVwiYnRuIGJ0bi14cyBoaWRlLWV4cGFuZFwiPjxzcGFuIGlkPVwiaWNvbicgKyBub2RlSUQgKyAnXCIgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93biBpY29ucCcgKyBwYXJlbnQgKyAnXCI+PC9zcGFuPjwvYT4nO1xyXG5cclxuICBtYXJrdXAgKz0gJzx0ciBpZD1cInJvd2lkJyArIG5vZGVJRCArICdcIiBjbGFzcz1cIicgKyBjbGFzc2VzICsgJ1wiPjx0ZCBjbGFzcz1cInJlZGlwcy1yb3doYW5kbGVyIGNlbGxcIj48ZGl2IGNsYXNzPVwibm9kZS1jb250YWluZXJcIj4nO1xyXG4gIG1hcmt1cCArPSBkZWxldGVCdXR0b24gKyBjb3B5QnV0dG9uICsgZHJhZ0hhbmRsZTtcclxuXHJcbiAgaWYobm9kZS5ub2RlcyAmJiBub2RlLm5vZGVzLmxlbmd0aCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiBub2RlIGlzIGEgcGFyZW50XHJcbiAge1xyXG4gICAgbWFya3VwICs9IHNob3dFeHBhbmRCdXR0b247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2hvdyB0aGUgZXhwYW5zaW9uIGJ1dHRvblxyXG4gIH1cclxuICBlbHNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lmIG5vZGUgaXMgYSBsZWFmXHJcbiAge1xyXG4gICAgbWFya3VwICs9IGhpZGVFeHBhbmRCdXR0b247ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaGlkZSB0aGUgZXhwYW5zaW9uIGJ1dHRvblxyXG4gIH1cclxuXHJcbiAgbWFya3VwICs9ICc8aW5wdXQgaWQ9XCJub2RlSW5wdXQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cIm5vZGVcIiB0eXBlPVwidGV4dFwiIHZhbHVlPVwiJyArIG5vZGUubmFtZSArICdcIiBzdHlsZT1cIndpZHRoOicgKyAoNDAwLWRlcHRoKjEwKSArICdweFwiIG9uaW5wdXQ9XCJ1cGRhdGVOb2RlTmFtZSh0aGlzKVwiLz48L2Rpdj48L3RkPjwvdHI+JztcclxuXHJcbiAgaWYobm9kZS5ub2RlcyAmJiBub2RlLm5vZGVzLmxlbmd0aCA+IDApICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgdGhlIGNoaWxkcmVuIG9mIHRoaXMgbm9kZSBiZWxvdyB0aGlzIG5vZGUncyByb3dcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbm9kZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9IGFkZFJvdyhub2RlLm5vZGVzW2ldLCBkZXB0aCsxLCBhbmNlc3RvcnMgKyAnIGFuY2VzdG9yJyArIG5vZGVJRCwgbm9kZUlEKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBtYXJrdXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlRGF0YU1hcmt1cCgpXHJcbntcclxuICB2YXIgbWFya3VwID0gJzx0YWJsZSBpZD1cImRhdGFUYWJsZVwiPic7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLm5vZGVzLmxlbmd0aDsgaSsrKSAgICAgICAgLy9hZGQgcm93IGZvciBlYWNoIG5vZGVcclxuICB7XHJcbiAgICBtYXJrdXAgKz0gYWRkRGF0YVJvdyh0cmVlLm5vZGVzW2ldKTtcclxuICB9XHJcblxyXG4gIG1hcmt1cCArPSAnPC90YWJsZT4nO1xyXG4gIHJldHVybiBtYXJrdXA7ICBcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkRGF0YVJvdyhub2RlKVxyXG57XHJcbiAgdmFyIG1hcmt1cCA9ICc8dHIgaWQ9XCJkYXRhcm93aWQnICsgbm9kZS5pZCArICdcIiBjbGFzcz1cImRhdGFSb3dcIj4nO1xyXG4gIFxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLmZpZWxkcy5sZW5ndGg7IGkrKykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgdGhlIGRhdGEgaW5wdXRzIGZvciBlYWNoIGZpZWxkc1xyXG4gIHtcclxuICAgIGlmKG5vZGUudmFsdWVzICYmIG5vZGUudmFsdWVzW3RyZWUuZmllbGRzW2ldLm5hbWVdKVxyXG4gICAge1xyXG4gICAgICBtYXJrdXAgKz0gZ2V0RmllbGRDZWxsTWFya3VwKHRyZWUuZmllbGRzW2ldLm5hbWUsIG5vZGUuaWQsIG5vZGUudmFsdWVzW3RyZWUuZmllbGRzW2ldLm5hbWVdKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgbWFya3VwICs9IGdldEZpZWxkQ2VsbE1hcmt1cCh0cmVlLmZpZWxkc1tpXS5uYW1lLCBub2RlLmlkLCAnJyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIG1hcmt1cCArPSAnPC90cj4nO1xyXG4gIFxyXG4gIGlmKG5vZGUubm9kZXMgJiYgbm9kZS5ub2Rlcy5sZW5ndGggPiAwKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIHRoZSBjaGlsZHJlbiBvZiB0aGlzIG5vZGUgYmVsb3cgdGhpcyBub2RlJ3Mgcm93XHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIG1hcmt1cCArPSBhZGREYXRhUm93KG5vZGUubm9kZXNbaV0pO1xyXG4gICAgfVxyXG4gIH0gIFxyXG4gIFxyXG4gIHJldHVybiBtYXJrdXA7ICBcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQ29sdW1uKGZpZWxkTmFtZSlcclxue1xyXG4gICQoJyNmaWVsZEhlYWRlclJvdycpLmFwcGVuZChnZXRGaWVsZEhlYWRlck1hcmt1cChmaWVsZE5hbWUsIHRyZWUuZmllbGRzLmxlbmd0aCkpOyAgICAvL2FkZCBmaWVsZCBoZWFkZXJcclxuICBcclxuICAkKCcuZGF0YVJvdycpLmVhY2goZnVuY3Rpb24oaSwgaXRlbSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgY2VsbCBmb3IgZWFjaCBub2RlXHJcbiAge1xyXG4gICAgJChpdGVtKS5hcHBlbmQoZ2V0RmllbGRDZWxsTWFya3VwKGZpZWxkTmFtZSwgaXRlbS5pZC5yZXBsYWNlKCdkYXRhcm93aWQnLCAnJykpKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RmllbGRIZWFkZXJNYXJrdXAoZmllbGROYW1lLCBpbmRleClcclxue1xyXG4gIHJldHVybiAnPHRkIGNsYXNzPVwiZmllbGRIZWFkZXJDZWxsXCI+PGRpdiBjbGFzcz1cImZpZWxkSGVhZGVyQ29udGFpbmVyXCI+J1xyXG4gICsgJzxkaXYgY2xhc3M9XCJtb3ZlQ29sR3JpcFwiPjwvZGl2PidcclxuICArICc8ZGl2IGNsYXNzPVwiZmllbGROYW1lSW5wdXRDb250YWluZXJcIj48dGV4dGFyZWEgaWQ9XCJjb2xIZWFkZXJJbnB1dCcgKyBmaWVsZE5hbWUgKyAnXCIgY2xhc3M9XCJmaWVsZE5hbWVJbnB1dFwiPicgKyBmaWVsZE5hbWUgKyAnPC90ZXh0YXJlYT48L2Rpdj4nXHJcbiAgKyAnPGRpdiBjbGFzcz1cImZpZWxkSGVhZGVyQnV0dG9uXCI+J1xyXG4gICsgJzxpbWcgc3JjPVwiaW1hZ2VzL2Rvd24tYXJyb3cucG5nXCIgb25jbGljaz1cInNob3dNZW51KGV2ZW50LCBcXCcnICsgZmllbGROYW1lICsgJ1xcJyk7XCIgc3R5bGU9XCJjdXJzb3I6cG9pbnRlclwiLz4nXHJcbiAgKyAnPC9kaXY+J1xyXG4gICsgJzxkaXYgaWQ9XCJncmlwJyArIGluZGV4ICsgJ1wiIGNsYXNzPVwicmVzaXplQ29sR3JpcFwiIG9ubW91c2Vkb3duPVwic3RhcnRSZXNpemUoZXZlbnQsIHRoaXMpXCI+PC9kaXY+J1xyXG4gICsgJzwvZGl2PjwvdGQ+JztcclxuICAvL3JldHVybiAnPHRoIGlkPVwiY29sSGVhZGVyJyArIGZpZWxkTmFtZSArICdcIiBjbGFzcz1cImhlYWRlclwiPjxkaXYgY2xhc3M9XCJtb3ZlQ29sR3JpcFwiPjwvZGl2PjxpbnB1dCBpZD1cImNvbEhlYWRlcklucHV0JyArIGZpZWxkTmFtZSArICdcIiBjbGFzcz1cImZpZWxkTmFtZUlucHV0XCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIicgKyBmaWVsZE5hbWUgKyAnXCIvPjxkaXYgaWQ9XCJncmlwJyArIGluZGV4ICsgJ1wiIGNsYXNzPVwicmVzaXplQ29sR3JpcFwiIG9ubW91c2Vkb3duPVwic3RhcnRSZXNpemUoZXZlbnQsIHRoaXMpXCI+PC9kaXY+PC90aD4nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGaWVsZENlbGxNYXJrdXAoZmllbGROYW1lLCBub2RlSUQsIHZhbHVlKVxyXG57ICBcclxuICByZXR1cm4gJzx0ZCBjbGFzcz1cImNlbGxcIj48aW5wdXQgY2xhc3M9XCJmaWVsZElucHV0IGZpZWxkSW5wdXQnICsgZmllbGROYW1lICsgJ1wiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCInICsgZmllbGROYW1lICsgbm9kZUlEICsgJ1wiIHZhbHVlPVwiJyArIHZhbHVlICsgJ1wiIG9uaW5wdXQ9XCJ1cGRhdGVGaWVsZFZhbHVlKFxcJycgKyBmaWVsZE5hbWUgKyAnXFwnLCBcXCcnICsgbm9kZUlEICsgJ1xcJylcIi8+PC90ZD4nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRBc3NlbWJseU1hcmt1cChub2RlSUQsIG5ld05vZGVJRCwgZGVwdGgpXHJcbntcclxuICB2YXIgbm9kZSAgICA9IGZpbmROb2RlSW5UcmVlKG5vZGVJRCk7XHJcbiAgdmFyIHBhcmVudCAgPSBmaW5kUGFyZW50SW5UcmVlKG5vZGVJRCk7XHJcbiAgcmV0dXJuIGFkZFJvdyhub2RlLCBkZXB0aCwgJ2FuY2VzdG9yJyArIHBhcmVudC5pZCwgcGFyZW50LmlkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RmllbGRNZW51TWFya3VwKGZpZWxkTmFtZSwgeCwgeSlcclxue1xyXG4gIHZhciBmaWVsZCA9IFByb2plY3QuZ2V0RmllbGQoZmllbGROYW1lKTtcclxuICBcclxuICB2YXIgbWVudSA9IHt9O1xyXG5cclxuICB2YXIgbnVtYmVySXRlbSA9IG5ldyBNZW51SXRlbSgnTnVtYmVyJywgRmllbGQuTlVNQkVSLCAnZGF0YXR5cGUnLCBmaWVsZCk7XHJcbiAgdmFyIHByZWNpc2lvbkl0ZW0gPSBuZXcgTWVudUl0ZW0oJ0Zvcm1hdCcpO1xyXG4gIFxyXG4gIHByZWNpc2lvbkl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJ051bWJlcicsIEZpZWxkLk5VTUJFUl9GT1JNQVQsICdmb3JtYXQnLCBmaWVsZCkpO1xyXG4gIHByZWNpc2lvbkl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJ1BlcmNlbnQnLCBGaWVsZC5QRVJDRU5UX0ZPUk1BVCwgJ2Zvcm1hdCcsIGZpZWxkKSk7XHJcbiAgcHJlY2lzaW9uSXRlbS5pdGVtcy5wdXNoKG5ldyBNZW51SXRlbSgnU2NpZW50aWZpYycsIEZpZWxkLlNDSUVOVElGSUNfRk9STUFULCAnZm9ybWF0JywgZmllbGQpKTtcclxuICBudW1iZXJJdGVtLml0ZW1zLnB1c2gocHJlY2lzaW9uSXRlbSk7XHJcbiAgXHJcbiAgdmFyIGFnZ3JlZ2F0aW9uSXRlbSA9IG5ldyBNZW51SXRlbSgnQWdncmVnYXRpb24nKTtcclxuICBhZ2dyZWdhdGlvbkl0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJ05vIEFnZ3JlZ2F0aW9uJywgRmllbGQuTk9fQUdHUkVHQVRJT04sICdhZ2dfdHlwZScsIGZpZWxkKSk7XHJcbiAgXHJcbiAgdmFyIHN1bUFueUFnZ0l0ZW0gPSBuZXcgTWVudUl0ZW0oJ1N1bSBhbnkgZGVmaW5lZCBjaGlsZHJlbicsIEZpZWxkLlNVTV9BTllfQUdHUkVHQVRJT04sICdhZ2dfdHlwZScsIGZpZWxkKTtcclxuICBcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgdHJlZS5maWVsZHMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGYgPSB0cmVlLmZpZWxkc1tpXTtcclxuICAgIFxyXG4gICAgaWYoZi5uYW1lICE9IGZpZWxkLm5hbWUpXHJcbiAgICB7XHJcbiAgICAgIHN1bUFueUFnZ0l0ZW0uaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oZi5uYW1lLCBmLm5hbWUsICdhZ2dfcXR5X2ZpZWxkJywgZmllbGQpKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgYWdncmVnYXRpb25JdGVtLml0ZW1zLnB1c2goc3VtQW55QWdnSXRlbSk7XHJcbiAgbnVtYmVySXRlbS5pdGVtcy5wdXNoKGFnZ3JlZ2F0aW9uSXRlbSk7XHJcbiAgXHJcbiAgbWVudS5pdGVtcyA9IFtdO1xyXG4gIG1lbnUuaXRlbXMucHVzaChudW1iZXJJdGVtKTtcclxuICBtZW51Lml0ZW1zLnB1c2gobmV3IE1lbnVJdGVtKCdUZXh0JywgRmllbGQuU1RSSU5HLCAnZGF0YXR5cGUnLCBmaWVsZCkpO1xyXG4gIG1lbnUuaXRlbXMucHVzaChuZXcgTWVudUl0ZW0oJ0Nob2ljZScsIEZpZWxkLkNIT0lDRSwgJ2RhdGF0eXBlJywgZmllbGQpKTtcclxuICBcclxuICB2YXIgbWFya3VwID0gJzxkaXYgaWQ9XCJmaWVsZE1lbnVcIiBzdHlsZT1cImxlZnQ6JyArIHggKyAncHg7dG9wOicgKyB5ICsgJ3B4O1wiPic7XHJcbiAgXHJcbiAgbWFya3VwICs9IGdlbmVyYXRlTWVudU1hcmt1cChtZW51KTtcclxuICBcclxuICBtYXJrdXAgKz0gJzwvZGl2Pic7XHJcbiAgcmV0dXJuIG1hcmt1cDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVNZW51TWFya3VwKG1lbnUpXHJcbntcclxuICB2YXIgbWFya3VwID0gJzx1bD4nO1xyXG4gIFxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBtZW51Lml0ZW1zLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIHZhciBpdGVtID0gbWVudS5pdGVtc1tpXTtcclxuICAgIFxyXG4gICAgbWFya3VwICs9ICc8bGk+JztcclxuICAgIFxyXG4gICAgaWYoaXRlbS5maWVsZClcclxuICAgIHtcclxuICAgICAgaWYoaXRlbS5jaGVja2VkKVxyXG4gICAgICB7XHJcbiAgICAgICAgbWFya3VwICs9ICc8aW1nIHNyYz1cIicgKyBDSEVDS19NQVJLX0lNQUdFX1BBVEggKyAnXCIgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6MTBweDtcIi8+PHNwYW4gb25jbGljaz1cIk1lbnVJdGVtLmhhbmRsZUNsaWNrKFxcJycgKyBpdGVtLmZpZWxkLm5hbWUgKyAnXFwnLCBcXCcnICsgaXRlbS52YXJOYW1lICsgJ1xcJywgXFwnJyArIGl0ZW0udmFsdWUgKyAnXFwnKTtcIj4nO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2VcclxuICAgICAge1xyXG4gICAgICAgIG1hcmt1cCArPSAnPGltZyBzcmM9XCInICsgQ0hFQ0tfTUFSS19JTUFHRV9QQVRIICsgJ1wiIHN0eWxlPVwidmlzaWJpbGl0eTpoaWRkZW47bWFyZ2luLXJpZ2h0OjEwcHg7XCIvPjxzcGFuIG9uY2xpY2s9XCJNZW51SXRlbS5oYW5kbGVDbGljayhcXCcnICsgaXRlbS5maWVsZC5uYW1lICsgJ1xcJywgXFwnJyArIGl0ZW0udmFyTmFtZSArICdcXCcsIFxcJycgKyBpdGVtLnZhbHVlICsgJ1xcJyk7XCI+JztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICBtYXJrdXAgKz0gJzxzcGFuPic7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSBpdGVtLmRpc3BsYXkgKyAnPC9zcGFuPic7XHJcblxyXG4gICAgaWYoaXRlbS5pdGVtcyAmJiBpdGVtLml0ZW1zLmxlbmd0aCA+IDApXHJcbiAgICB7XHJcbiAgICAgIG1hcmt1cCArPSBnZW5lcmF0ZU1lbnVNYXJrdXAoaXRlbSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIG1hcmt1cCArPSAnPC9saT4nO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gbWFya3VwICsgJzwvdWw+JztcclxufSIsImZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0KClcclxue1xyXG4gICQoJyNwcm9qZWN0LWFjdGlvbi1jb250YWluZXInKS5odG1sKGdlbmVyYXRlUHJvamVjdFNlbGVjdG9yTWFya3VwKCkpO1xyXG4gICQoJyNmaWVsZHMtaGVhZGVyLXJvdycpLmh0bWwoZ2VuZXJhdGVGaWVsZHNSb3dNYXJrdXAoKSk7XHJcbiAgJCgnI2ZpZWxkcy1oZWFkZXItcm93JykuY3NzKCdyaWdodCcsIHNjcm9sbEJhcldpZHRoICsgJ3B4Jyk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Nob3J0ZW4gdGhlIHdpZHRoIG9mIHRoZSBmaWVsZHNSb3cgYnkgdGhlIHdpZHRoIG9mIHRoZSBzY3JvbGwgYmFyXHJcbiAgJChcIiNkYXRhLWNvbnRhaW5lclwiKS5odG1sKGdlbmVyYXRlRGF0YU1hcmt1cCgpKTsgXHJcblx0JChcIiNyZWRpcHMtZHJhZ1wiKS5odG1sKGdlbmVyYXRlVHJlZU1hcmt1cCgpKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYXBwZW5kIHRoZSBtYXJrdXAgdG8gdGhlIERPTVxyXG4gICQoJyNyZWRpcHMtZHJhZycpLmNzcygnYm90dG9tJywgc2Nyb2xsQmFyV2lkdGggKyAncHgnKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zaG9ydGVuIHRoZSBoZWlnaHQgb2YgdGhlIHRyZWUgc2VjdGlvbiBieSB0aGUgd2lkdGggb2YgdGhlIHNjcm9sbCBiYXJcclxuXHRyZWRpcHMuaW5pdCgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaW5pdGlhbGl6ZSB0cmVlIGRyYWcvZHJvcCBsaWJyYXJ5XHJcblx0aW5pdFByb2plY3RBY3Rpb25zKCk7XHRcclxufVxyXG5cclxudmFyIGhhbmRsZVByb2plY3RBY3Rpb24gPSBmdW5jdGlvbigpXHJcbntcclxuXHRpZigkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCkgPT0gJ2FkZEZpZWxkJylcclxuXHR7XHJcbiAgICAkKCcjcHJvamVjdEFjdGlvbklucHV0JykudmFsKFwiVHlwZSBOZXcgRmllbGQgTmFtZSBhbmQgUHJlc3MgRW50ZXIgdG8gQ3JlYXRlXCIpO1xyXG5cdFx0JCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnNob3coKS5mb2N1cygpLnNlbGVjdCgpO1xyXG5cdH1cdFxyXG59O1xyXG5cclxuZnVuY3Rpb24gcHJvamVjdEFjdGlvbkVudGVyUHJlc3NlZCgpXHJcbntcclxuXHRpZigkKCcjcHJvamVjdEFjdGlvblNlbGVjdG9yJykudmFsKCkgPT0gJ2FkZEZpZWxkJylcclxuXHR7XHJcblx0XHR2YXIgZmllbGROYW1lID0gJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLnZhbCgpO1xyXG5cdFx0dHJlZS5maWVsZHMucHVzaChuZXcgRmllbGQoZmllbGROYW1lKSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgbmV3IGZpZWxkIHRvIHRoZSBtb2RlbFxyXG4gICAgYWRkQ29sdW1uKGZpZWxkTmFtZSk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgY29sdW1uIGZvciBuZXcgZmllbGQgdG8gdGhlIHZpZXdcclxuXHRcdFxyXG4gICAgJCgnI3Byb2plY3RBY3Rpb25JbnB1dCcpLmhpZGUoKTtcclxuICAgICQoJyNwcm9qZWN0QWN0aW9uU2VsZWN0b3InKS52YWwoJ2JsYW5rJyk7XHJcblx0fVx0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU5ld1Byb2plY3QoKVxyXG57XHJcblx0JCgnI3NlbGVjdFByb2plY3RPcHRpb24nKS5yZW1vdmUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSB0aGUgc2VsZWN0IHByb2plY3Qgb3B0aW9uLCBvbmNlIHRoZSB1c2VyIHNlbGVjdHMgYSBwcm9qZWN0IFxyXG5cdFxyXG5cdHZhciBuZXdQcm9qZWN0TmFtZSA9ICQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLnZhbCgpO1xyXG5cdCQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLmhpZGUoKTtcclxuXHRcclxuXHQvL2FkZCBhbiBvcHRpb24gZm9yIHRoZSBuZXcgcHJvamVjdCB0byB0aGUgcHJvamVjdHMgbGlzdCwgc2VsZWN0IHRoYXQgb3B0aW9uXHJcblx0dmFyIG5ld1Byb2plY3RJRCA9IHByb2plY3RzLm5leHRQcm9qZWN0SUQudG9TdHJpbmcoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IG5lZWQgdG8gZ2V0IHRoaXMgZnJvbSB0aGUgZGF0YWJhc2UgdG8gaW5zdXJlIHdlIGdldCB0aGUgY29ycmVjdCBpZFxyXG5cdHZhciBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG5cdG9wdGlvbi50ZXh0ID0gbmV3UHJvamVjdE5hbWU7XHJcblx0b3B0aW9uLnZhbHVlID0gbmV3UHJvamVjdElEOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuXHQkKG9wdGlvbikuaW5zZXJ0QmVmb3JlKCcjcHJvamVjdFNlbGVjdG9yIG9wdGlvbjpudGgtY2hpbGQoJyArICQoJyNwcm9qZWN0U2VsZWN0b3InKS5sZW5ndGggKyAnKScpO1xyXG5cdCQoJyNwcm9qZWN0U2VsZWN0b3InKS52YWwobmV3UHJvamVjdElEKTtcclxuXHRcclxuXHQkLmFqYXgoeyB0eXBlOiAnUE9TVCcsIHVybDogJy9hcGkvYWRkUHJvamVjdD9wcm9qZWN0TmFtZT0nICsgbmV3UHJvamVjdE5hbWUgfSk7ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCB0aGUgbmV3IHByb2plY3QgdG8gdGhlIHByb2plY3RzIGRvY3VtZW50IGluIHRoZSBkYXRhYmFzZVxyXG5cdFxyXG5cdC8vY3JlYXRlIGEgdG9wIG5vZGUgYW5kIHRyZWUgZm9yIHRoZSBwcm9qZWN0XHJcblx0dHJlZSA9IHsgXCJwcm9qZWN0SURcIjogbmV3UHJvamVjdElELCBcInByb2plY3ROYW1lXCI6IG5ld1Byb2plY3ROYW1lLCBcInZlcnNpb25cIjogMSwgXCJuZXh0Tm9kZUlEXCI6IDIsIFwiZmllbGRzXCI6IFtdLCBcIm5vZGVzXCI6IFt7IFwiaWRcIjogMSwgXCJuYW1lXCI6IG5ld1Byb2plY3ROYW1lLCBcIm5vZGVzXCI6IFtdIH1dIH07XHJcbiAgZGlzcGxheVByb2plY3QoKTtcclxuXHRcclxuXHRzYXZlVG9EYXRhYmFzZSgpO1xyXG5cdHJlZnJlc2hEYXRhTW9kZWxEaXNwbGF5KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiB0ZW1wIGZvciBkaXNwbGF5aW5nIHRoZSBtb2RlbCBvbiB0aGUgcGFnZSBmb3IgZGVidWdnaW5nIHB1cnBvc2VzIFx0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dNZW51KGUsIGZpZWxkTmFtZSlcclxue1xyXG4gIGlmKCQoJyNmaWVsZE1lbnUnKS5sZW5ndGggPT09IDApXHJcbiAge1xyXG4gICAgJChnZXRGaWVsZE1lbnVNYXJrdXAoZmllbGROYW1lLCBlLmNsaWVudFgsIGUuY2xpZW50WSkpLmFwcGVuZFRvKCdib2R5Jyk7XHJcbiAgICAkKCcjZmllbGRNZW51JykubW91c2VsZWF2ZShmdW5jdGlvbigpIHsgJCgnI2ZpZWxkTWVudScpLnJlbW92ZSgpOyB9KTtcclxuICB9XHJcbn0iLCJ2YXIgcmVzaXplQ29sdW1uTGVmdCA9IDA7XHJcbnZhciByZXNpemVGaWVsZCA9ICcwJztcclxuXHJcbnZhciBzdGFydFJlc2l6ZSA9IGZ1bmN0aW9uKGUsIGdyaXApXHJcbntcclxuICAkKGRvY3VtZW50KS5iaW5kKCd0b3VjaG1vdmUucmVzaXplQ29sR3JpcCBtb3VzZW1vdmUucmVzaXplQ29sR3JpcCcsIHJlc2l6ZURyYWcpLmJpbmQoJ3RvdWNoZW5kLnJlc2l6ZUNvbEdyaXAgbW91c2V1cC5yZXNpemVDb2xHcmlwJywgcmVzaXplRW5kKTtcclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNpemVMaW5lJykuc3R5bGUubGVmdCA9IGUucGFnZVggKyAncHgnO1xyXG5cclxuICByZXNpemVDb2x1bW5MZWZ0ID0gJChncmlwLnBhcmVudE5vZGUpLnBvc2l0aW9uKCkubGVmdDsgICAgICAgICAgICAgICAgICAgIC8vc2F2ZSB0aGUgbGVmdCBwb3NpdGlvbiBvZiB0aGUgY29sdW1uIGJlaW5nIHJlc2l6ZWRcclxuICByZXNpemVGaWVsZCA9IGdyaXAucGFyZW50Tm9kZS5pZC5yZXBsYWNlKCdjb2xIZWFkZXInLCAnJyk7ICAgICAgICAgICAgICAgIC8vc2F2ZSB0aGUgZmllbGQgb2YgdGhlIGNvbHVtbiBiZWluZyByZXNpemVkXHJcbn07XHJcblxyXG52YXIgcmVzaXplRW5kID0gZnVuY3Rpb24oZSlcclxue1xyXG4gICQoZG9jdW1lbnQpLnVuYmluZCgndG91Y2htb3ZlLnJlc2l6ZUNvbEdyaXAgbW91c2Vtb3ZlLnJlc2l6ZUNvbEdyaXAnLCByZXNpemVEcmFnKS51bmJpbmQoJ3RvdWNoZW5kLnJlc2l6ZUNvbEdyaXAgbW91c2V1cC5yZXNpemVDb2xHcmlwJywgcmVzaXplRW5kKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzaXplTGluZScpLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuXHJcbiAgdmFyIG5ld1dpZHRoID0gZS5wYWdlWCAtIHJlc2l6ZUNvbHVtbkxlZnQgLSBHUklQU19XSURUSDtcclxuXHJcbiAgaWYobmV3V2lkdGggPCBNSU5fQ09MVU1OX1dJRFRIKVxyXG4gIHtcclxuICAgIG5ld1dpZHRoID0gTUlOX0NPTFVNTl9XSURUSDtcclxuICB9XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb2xIZWFkZXJJbnB1dCcgKyByZXNpemVGaWVsZCkuc3R5bGUud2lkdGggPSBuZXdXaWR0aCArICdweCc7ICAgIC8vcmVzaXplIHRoZSB3aWR0aCBvZiB0aGUgY29sdW1uIGhlYWRlclxyXG5cclxuICAvL3Jlc2l6ZSB0aGUgd2lkdGggb2YgZXZlcnkgY2VsbCBpbiB0aGUgY29sdW1uXHJcbiAgdmFyIGNvbHVtbkNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpZWxkSW5wdXQnICsgcmVzaXplRmllbGQpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY29sdW1uQ2VsbHMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgY29sdW1uQ2VsbHNbaV0uc3R5bGUud2lkdGggPSAobmV3V2lkdGggKyA4KSArICdweCc7XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHJlc2l6ZURyYWcgPSBmdW5jdGlvbihlKVxyXG57XHJcbiAgaWYoZS5wYWdlWCA+IHJlc2l6ZUNvbHVtbkxlZnQgKyBNSU5fQ09MVU1OX1dJRFRIICsgR1JJUFNfV0lEVEgpXHJcbiAge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2l6ZUxpbmUnKS5zdHlsZS5sZWZ0ID0gZS5wYWdlWCArICdweCc7ICAgICAgLy9tb3ZlIHRoZSByZXNpemUgbGluZSBhcyB0aGUgdXNlciBkcmFncyBpdFxyXG4gIH1cclxufTsiLCJ2YXIgcHJvamVjdHMgPSBudWxsO1xyXG52YXIgdHJlZTtcclxuXHJcbnZhciBFTlRFUl9LRVkgPSAxMztcclxudmFyIE1JTl9DT0xVTU5fV0lEVEggPSA3MDtcclxudmFyIEdSSVBTX1dJRFRIID0gMTY7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEYXRhU2Nyb2xsKClcclxue1xyXG4gICQoJyNyZWRpcHMtZHJhZycpLnNjcm9sbFRvcCgkKCcjZGF0YS1jb250YWluZXInKS5zY3JvbGxUb3AoKSk7XHJcbiAgJCgnI2ZpZWxkcy1oZWFkZXItcm93Jykuc2Nyb2xsTGVmdCgkKCcjZGF0YS1jb250YWluZXInKS5zY3JvbGxMZWZ0KCkpO1xyXG59XHJcblxyXG52YXIgc2VsZWN0UHJvamVjdCA9IGZ1bmN0aW9uKClcclxue1xyXG4gIHZhciBwcm9qZWN0U2VsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdFNlbGVjdG9yJyk7XHJcbiAgdmFyIHNlbGVjdGVkT3B0aW9uID0gcHJvamVjdFNlbGVjdG9yLm9wdGlvbnNbcHJvamVjdFNlbGVjdG9yLnNlbGVjdGVkSW5kZXhdO1xyXG5cclxuICBpZihzZWxlY3RlZE9wdGlvbi5pZCA9PSBcIm5ld1Byb2plY3RPcHRpb25cIilcclxuICB7XHJcbiAgICAkKCcjZWRpdE5ld1Byb2plY3ROYW1lSW5wdXQnKS52YWwoXCJUeXBlIE5ldyBQcm9qZWN0IE5hbWUgYW5kIFByZXNzIEVudGVyIHRvIENyZWF0ZVwiKTtcclxuICAgICQoJyNlZGl0TmV3UHJvamVjdE5hbWVJbnB1dCcpLnNob3coKS5mb2N1cygpLnNlbGVjdCgpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgaWYocHJvamVjdFNlbGVjdG9yLnZhbHVlID4gMCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0UHJvamVjdE9wdGlvbicpKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSB0aGUgc2VsZWN0IHByb2plY3Qgb3B0aW9uLCBvbmNlIHRoZSB1c2VyIHNlbGVjdHMgYSBwcm9qZWN0XHJcbiAgICB7XHJcbiAgICAgICQoJyNzZWxlY3RQcm9qZWN0T3B0aW9uJykucmVtb3ZlKCk7IFxyXG4gICAgfVxyXG5cclxuICAgICQuYWpheCh7IHR5cGU6ICdHRVQnLCB1cmw6ICdhcGkvdHJlZT9wcm9qZWN0SUQ9JyArIHByb2plY3RTZWxlY3Rvci52YWx1ZSB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpICAgICAgICAgICAgICAgLy9yZWFkIHRyZWUgZm9yIHRoZSBzZWxlY3RlZCBwcm9qZWN0IGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICB7XHJcbiAgICAgIHRyZWUgPSBkYXRhO1xyXG4gICAgICBkaXNwbGF5UHJvamVjdCgpO1xyXG4gICAgICByZWZyZXNoRGF0YU1vZGVsRGlzcGxheSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IHRlbXAgZm9yIGRpc3BsYXlpbmcgdGhlIG1vZGVsIG9uIHRoZSBwYWdlIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXNcclxuICAgIH0pOyAgXHJcbiAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxufTtcclxuXHJcbnZhciBzYXZlVG9EYXRhYmFzZSA9IGZ1bmN0aW9uKClcclxue1xyXG4gICQuYWpheCh7IHR5cGU6ICdQT1NUJywgdXJsOiAnL2FwaS90cmVlJywgZGF0YVR5cGU6ICdqc29uJywgZGF0YToge2pzb246SlNPTi5zdHJpbmdpZnkodHJlZSl9IH0pO1xyXG59O1xyXG5cclxudmFyIHJlZnJlc2hEYXRhTW9kZWxEaXNwbGF5ID0gZnVuY3Rpb24oKVxyXG57XHJcbiAgLy92YXIgZGF0YU1vZGVsVGV4dEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YS1tb2RlbCcpO1xyXG4gIC8vZGF0YU1vZGVsVGV4dEFyZWEudmFsdWUgPSBKU09OLnN0cmluZ2lmeSh0cmVlLCBudWxsLCAnXFx0Jyk7XHJcbn07XHJcblxyXG52YXIgZ2V0RGVwdGggPSBmdW5jdGlvbihyb3cpXHJcbntcclxuICB2YXIgY2xhc3NlcyA9IHJvdy5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGMgPSBjbGFzc2VzW2ldO1xyXG5cclxuICAgIGlmKGMuaW5kZXhPZignZGVwdGgnKSA+IC0xKVxyXG4gICAge1xyXG4gICAgICByZXR1cm4gcGFyc2VJbnQoYy5yZXBsYWNlKCdkZXB0aCcsICcnKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIGdldFBhcmVudElEID0gZnVuY3Rpb24ocm93KVxyXG57XHJcbiAgdmFyIGNsYXNzZXMgPSByb3cuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBjbGFzc2VzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIHZhciBjID0gY2xhc3Nlc1tpXTtcclxuXHJcbiAgICBpZihjLmluZGV4T2YoJ3BhcmVudCcpID4gLTEpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBwYXJzZUludChjLnJlcGxhY2UoJ3BhcmVudCcsICcnKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHJlbW92ZVBhcmVudCA9IGZ1bmN0aW9uKHJvdylcclxue1xyXG4gIHZhciBjbGFzc2VzID0gcm93LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgYyA9IGNsYXNzZXNbaV07XHJcblxyXG4gICAgaWYoYy5pbmRleE9mKCdwYXJlbnQnKSA+IC0xKVxyXG4gICAge1xyXG4gICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShjKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZ2V0QW5jZXN0b3JzID0gZnVuY3Rpb24ocm93KVxyXG57XHJcbiAgdmFyIGFuY2VzdG9ycyA9IFtdO1xyXG4gIHZhciBjbGFzc2VzID0gcm93LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xyXG5cclxuICBmb3IodmFyIGkgPSAwOyBpIDwgY2xhc3Nlcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgYyA9IGNsYXNzZXNbaV07XHJcblxyXG4gICAgaWYoYy5pbmRleE9mKCdhbmNlc3RvcicpID4gLTEpXHJcbiAgICB7XHJcbiAgICAgIGFuY2VzdG9ycy5wdXNoKGMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGFuY2VzdG9ycztcclxufTtcclxuXHJcbnZhciByZW1vdmVBbmNlc3RvcnMgPSBmdW5jdGlvbihyb3cpXHJcbntcclxuICB2YXIgY2xhc3NlcyA9IHJvdy5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgdmFyIGMgPSBjbGFzc2VzW2ldO1xyXG5cclxuICAgIGlmKGMuaW5kZXhPZignYW5jZXN0b3InKSA+IC0xKVxyXG4gICAge1xyXG4gICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShjKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgYWRkQW5jZXN0b3JzID0gZnVuY3Rpb24ocm93LCBhbmNlc3RvcnMpXHJcbntcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgYW5jZXN0b3JzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIHJvdy5jbGFzc0xpc3QuYWRkKGFuY2VzdG9yc1tpXSk7XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIHNldE5ld0FuY2VzdG9ycyA9IGZ1bmN0aW9uKHJvdywgYW5jZXN0b3JzLCBwYXJlbnRJRClcclxue1xyXG4gIHJlbW92ZVBhcmVudChyb3cpO1xyXG4gIHJvdy5jbGFzc0xpc3QuYWRkKCdwYXJlbnQnICsgcGFyZW50SUQpO1xyXG4gIHJlbW92ZUFuY2VzdG9ycyhyb3cpO1xyXG4gIGFkZEFuY2VzdG9ycyhyb3csIGFuY2VzdG9ycyk7XHJcbn07XHJcblxyXG52YXIgbW92ZUFzc2VtYmx5ID0gZnVuY3Rpb24obW92ZWRJRCwgbmV3UGFyZW50SUQsIG9sZFBhcmVudElELCBuZXdQYXJlbnRSb3cpICAgICAgICAgICAgICAgICAgLy9tb3ZlIHRoZSBub2RlL2Fzc2VtYmx5IGluIHRoZSB2aWV3IGFuZCB0aGUgbW9kZWwsIGluY2x1ZGluZyBhbGwgZGVzY2VuZGFudCBub2Rlc1xyXG57XHJcbiAgdmFyIG9sZFBhcmVudE5vZGUgPSBmaW5kTm9kZUluVHJlZShvbGRQYXJlbnRJRCk7XHJcbiAgdmFyIG5ld1BhcmVudE5vZGUgPSBmaW5kTm9kZUluVHJlZShuZXdQYXJlbnRJRCk7XHJcbiAgdmFyIG1vdmVkTm9kZSAgICAgPSBmaW5kTm9kZUluVHJlZShtb3ZlZElEKTtcclxuXHJcbiAgaWYob2xkUGFyZW50Tm9kZSlcclxuICB7XHJcbiAgICBpZihvbGRQYXJlbnROb2RlLm5vZGVzICYmIG9sZFBhcmVudE5vZGUubm9kZXMubGVuZ3RoID4gMCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW92ZSB0aGUgbW92ZWQgbm9kZSBmcm9tIGl0J3Mgb2xkIHBhcmVudCBpbiB0aGUgbW9kZWxcclxuICAgIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGRQYXJlbnROb2RlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKG9sZFBhcmVudE5vZGUubm9kZXNbaV0uaWQgPT09IG1vdmVkSUQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgb2xkUGFyZW50Tm9kZS5ub2Rlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgaWYgKHRyZWUubm9kZXNbaV0uaWQgPT09IG1vdmVkSUQpXHJcbiAgICAgIHtcclxuICAgICAgICB0cmVlLm5vZGVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfSAgICBcclxuICB9XHJcbiAgXHJcbiAgLy9UT0RPOiBpZiB0aGUgb2xkIHBhcmVudCBpcyBjaGlsZGxlc3Mgbm93LCB0aGVuIGhpZGUgdGhlIG9sZCBwYXJlbnQncyBleHBhbmQvY29sbGFwc2UgaWNvblxyXG5cclxuICBuZXdQYXJlbnROb2RlLm5vZGVzLnB1c2gobW92ZWROb2RlKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWRkIG1vdmVkIG5vZGUgdG8gaXQncyBuZXcgcGFyZW50IGluIHRoZSBtb2RlbFxyXG5cclxuICAvL2ZpeCB1cCB0aGUgYW5jZXN0b3JzIGNsYXNzZXMgZm9yIHRoZSBtb3ZlZCByb3dcclxuICB2YXIgbW92ZWRSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm93aWQnICsgbW92ZWRJRCk7XHJcbiAgdmFyIG1vdmVkRGF0YVJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRhcm93aWQnICsgbW92ZWRJRCk7XHJcbiAgdmFyIHBhcmVudERhdGFSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YXJvd2lkJyArIG5ld1BhcmVudElEKTtcclxuICBcclxuICB2YXIgYW5jZXN0b3JzID0gZ2V0QW5jZXN0b3JzKG5ld1BhcmVudFJvdyk7XHJcbiAgYW5jZXN0b3JzLnB1c2goJ2FuY2VzdG9yJyArIG5ld1BhcmVudElEKTtcclxuICBzZXROZXdBbmNlc3RvcnMobW92ZWRSb3csIGFuY2VzdG9ycywgbmV3UGFyZW50SUQpO1xyXG5cclxuICAvL2ZpeCB0aGUgZGVwdGggZm9yIHRoZSBtb3ZlZCByb3dcclxuICB2YXIgb2xkRGVwdGggPSBnZXREZXB0aChtb3ZlZFJvdyk7XHJcbiAgdmFyIG5ld0RlcHRoID0gZ2V0RGVwdGgobmV3UGFyZW50Um93KSsxO1xyXG4gIG1vdmVkUm93LmNsYXNzTGlzdC5yZW1vdmUoJ2RlcHRoJyArIG9sZERlcHRoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgb2xkIGRlcHRoIGNsYXNzXHJcbiAgbW92ZWRSb3cuY2xhc3NMaXN0LmFkZCgnZGVwdGgnICsgbmV3RGVwdGgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FkZCBuZXcgZGVwdGggY2xhc3NcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwYW5kSUQnICsgbW92ZWRJRCkuc3R5bGUubWFyZ2luTGVmdCA9ICgxMCAqIG5ld0RlcHRoKSArICdweCc7ICAgIC8vY2hhbmdlIHRoZSBpbmRlbnQgb2YgdGhlIG1vdmVkIG5vZGVcclxuXHJcbiAgLy9tb3ZlIHRoZSB0YWJsZSByb3dzIGluIHRoZSB2aWV3XHJcbiAgJChtb3ZlZERhdGFSb3cpLnJlbW92ZSgpO1xyXG4gICQobW92ZWREYXRhUm93KS5pbnNlcnRBZnRlcihwYXJlbnREYXRhUm93KTsgICBcclxuICBcclxuICBpZihtb3ZlZE5vZGUubm9kZXMgJiYgbW92ZWROb2RlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gbW92ZWROb2RlLm5vZGVzLmxlbmd0aC0xOyBpID49IDA7IGktLSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0ZSBiYWNrd2FyZHMgdG8gcGVyc2VydmUgdGhlIG9yZGVyIG9mIHRoZSBjaGlsZCBub2Rlc1xyXG4gICAge1xyXG4gICAgICBtb3ZlTm9kZShtb3ZlZE5vZGUubm9kZXNbaV0sIG1vdmVkTm9kZS5ub2Rlc1tpXS5pZCwgbW92ZWRJRCwgbmV3RGVwdGgrMSwgYW5jZXN0b3JzKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgbW92ZU5vZGUgPSBmdW5jdGlvbihub2RlLCBub2RlSUQsIHBhcmVudElELCBuZXdEZXB0aCwgYW5jZXN0b3JzKVxyXG57XHJcbiAgdmFyIG5vZGVSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm93aWQnICsgbm9kZUlEKTtcclxuICB2YXIgbm9kZURhdGFSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YXJvd2lkJyArIG5vZGVJRCk7XHJcbiAgXHJcbiAgdmFyIHBhcmVudFJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb3dpZCcgKyBwYXJlbnRJRCk7XHJcbiAgdmFyIHBhcmVudERhdGFSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YXJvd2lkJyArIHBhcmVudElEKTtcclxuICBcclxuICB2YXIgb2xkRGVwdGggPSBnZXREZXB0aChub2RlUm93KTtcclxuXHJcbiAgdmFyIG5ld0FuY2VzdG9ycyA9IGFuY2VzdG9ycy5zbGljZSgwKTtcclxuICBuZXdBbmNlc3RvcnMucHVzaCgnYW5jZXN0b3InICsgcGFyZW50SUQpO1xyXG4gIHNldE5ld0FuY2VzdG9ycyhub2RlUm93LCBuZXdBbmNlc3RvcnMsIHBhcmVudElEKTtcclxuXHJcbiAgbm9kZVJvdy5jbGFzc0xpc3QucmVtb3ZlKCdkZXB0aCcgKyBvbGREZXB0aCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgb2xkIGRlcHRoIGNsYXNzXHJcbiAgbm9kZVJvdy5jbGFzc0xpc3QuYWRkKCdkZXB0aCcgKyBuZXdEZXB0aCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hZGQgbmV3IGRlcHRoIGNsYXNzXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cGFuZElEJyArIG5vZGVJRCkuc3R5bGUubWFyZ2luTGVmdCA9ICgxMCAqIG5ld0RlcHRoKSArICdweCc7ICAgLy9jaGFuZ2UgdGhlIGluZGVudCBvZiB0aGUgbW92ZWQgbm9kZVxyXG5cclxuICAkKG5vZGVSb3cpLnJlbW92ZSgpO1xyXG4gICQobm9kZVJvdykuaW5zZXJ0QWZ0ZXIocGFyZW50Um93KTtcclxuICBcclxuICAkKG5vZGVEYXRhUm93KS5yZW1vdmUoKTtcclxuICAkKG5vZGVEYXRhUm93KS5pbnNlcnRBZnRlcihwYXJlbnREYXRhUm93KTsgIFxyXG5cclxuICBpZihub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSBub2RlLm5vZGVzLmxlbmd0aC0xOyBpID49IDA7IGktLSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXRlcmF0ZSBiYWNrd2FyZHMgdG8gcGVyc2VydmUgdGhlIG9yZGVyIG9mIHRoZSBjaGlsZCBub2Rlc1xyXG4gICAge1xyXG4gICAgICBtb3ZlTm9kZShub2RlLm5vZGVzW2ldLCBub2RlLm5vZGVzW2ldLmlkLCBub2RlSUQsIG5ld0RlcHRoKzEsIG5ld0FuY2VzdG9ycyk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIGZpbmROb2RlSW5UcmVlID0gZnVuY3Rpb24obm9kZUlEKVxyXG57XHJcbiAgaWYodHJlZS5ub2RlcyAmJiB0cmVlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kTm9kZSA9IGZpbmROb2RlKG5vZGVJRCwgdHJlZS5ub2Rlc1tpXSk7XHJcblxyXG4gICAgICAgIGlmKGZvdW5kTm9kZSkgeyByZXR1cm4gZm91bmROb2RlOyB9XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIGZpbmROb2RlID0gZnVuY3Rpb24obm9kZUlELCBub2RlKVxyXG57XHJcbiAgaWYobm9kZS5pZCA9PT0gbm9kZUlEKVxyXG4gIHtcclxuICAgIHJldHVybiBub2RlO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgaWYobm9kZS5ub2RlcyAmJiBub2RlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAgICB7XHJcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kTm9kZSA9IGZpbmROb2RlKG5vZGVJRCwgbm9kZS5ub2Rlc1tpXSk7XHJcblxyXG4gICAgICAgIGlmKGZvdW5kTm9kZSkgeyByZXR1cm4gZm91bmROb2RlOyB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZmluZFBhcmVudEluVHJlZSA9IGZ1bmN0aW9uKG5vZGVJRClcclxue1xyXG4gIGlmKHRyZWUubm9kZXMgJiYgdHJlZS5ub2Rlcy5sZW5ndGggPiAwKVxyXG4gIHtcclxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBmb3VuZFBhcmVudCA9IGZpbmRQYXJlbnQobm9kZUlELCB0cmVlLm5vZGVzW2ldLCBudWxsKTtcclxuXHJcbiAgICAgICAgaWYoZm91bmRQYXJlbnQpIHsgcmV0dXJuIGZvdW5kUGFyZW50OyB9XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIGZpbmRQYXJlbnQgPSBmdW5jdGlvbihub2RlSUQsIG5vZGUsIHBhcmVudClcclxue1xyXG4gIGlmKG5vZGUuaWQgPT09IG5vZGVJRClcclxuICB7XHJcbiAgICByZXR1cm4gcGFyZW50O1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgaWYobm9kZS5ub2RlcyAmJiBub2RlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAgICB7XHJcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBub2RlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gICAgICB7XHJcbiAgICAgICAgdmFyIGZvdW5kUGFyZW50ID0gZmluZFBhcmVudChub2RlSUQsIG5vZGUubm9kZXNbaV0sIG5vZGUpO1xyXG5cclxuICAgICAgICBpZihmb3VuZFBhcmVudCkgeyByZXR1cm4gZm91bmRQYXJlbnQ7IH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbnZhciBkZWxldGVOb2RlID0gZnVuY3Rpb24oZWwpXHJcbntcclxuICB2YXIgcm93ID0gZ2V0QW5jZXN0b3JUYWcoZWwsICd0cicpO1xyXG4gIHZhciBub2RlSUQgPSBwYXJzZUludChyb3cuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gIHZhciBub2RlID0gZmluZE5vZGVJblRyZWUobm9kZUlEKTtcclxuICB2YXIgcGFyZW50Tm9kZSA9IGZpbmRQYXJlbnRJblRyZWUobm9kZUlEKTtcclxuICBcclxuICAvL3JlbW92ZSB0aGUgbm9kZSBmcm9tIHRoZSB2aWV3XHJcbiAgcmVtb3ZlTm9kZVJvdyhub2RlKTtcclxuICBcclxuICAvL1RPRE86IGlmIHBhcmVudCBpcyBjaGlsZGxlc3Mgbm93LCB0aGVuIGhpZGUgdGhlIHBhcmVudCdzIGV4cGFuZC9jb2xsYXBzZSBpY29uIFxyXG4gIFxyXG4gIC8vcmVtb3ZlIHRoZSBub2RlIGZyb20gdGhlIG1vZGVsXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHBhcmVudE5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgaWYocGFyZW50Tm9kZS5ub2Rlc1tpXS5pZCA9PSBub2RlSUQpXHJcbiAgICB7XHJcbiAgICAgIHBhcmVudE5vZGUubm9kZXMuc3BsaWNlKGksIDEpO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcmVmcmVzaERhdGFNb2RlbERpc3BsYXkoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETzogdGVtcCBmb3IgZGlzcGxheWluZyB0aGUgbW9kZWwgb24gdGhlIHBhZ2UgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlc1xyXG59O1xyXG5cclxudmFyIHJlbW92ZU5vZGVSb3cgPSBmdW5jdGlvbihub2RlKVxyXG57XHJcbiAgdmFyIHJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb3dpZCcgKyBub2RlLmlkKTtcclxuICAkKHJvdykucmVtb3ZlKCk7XHJcbiAgXHJcbiAgaWYobm9kZS5ub2RlcyAmJiBub2RlLm5vZGVzLmxlbmd0aCA+IDApXHJcbiAge1xyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IG5vZGUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIHJlbW92ZU5vZGVSb3cobm9kZS5ub2Rlc1tpXSk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxudmFyIGNvcHlOb2RlID0gZnVuY3Rpb24oc291cmNlKVxyXG57XHJcbiAgdmFyIG5vZGVJbmRleDtcclxuICB2YXIgbmV3Um93TWFya3VwO1xyXG4gIHZhciBzb3VyY2VSb3cgPSBnZXRBbmNlc3RvclRhZyhzb3VyY2UsICd0cicpO1xyXG4gIHZhciBub2RlSUQgPSBwYXJzZUludChzb3VyY2VSb3cuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gIFxyXG4gIHZhciBzb3VyY2VOb2RlID0gZmluZE5vZGVJblRyZWUobm9kZUlEKTtcclxuICB2YXIgc291cmNlUGFyZW50Tm9kZSA9IGZpbmRQYXJlbnRJblRyZWUobm9kZUlEKTtcclxuICBcclxuICB2YXIgbmV3Tm9kZSA9IGpRdWVyeS5leHRlbmQodHJ1ZSwge30sIHNvdXJjZU5vZGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jbG9uZSB0aGUgc291cmNlIG5vZGVcclxuICBhc3NpZ25OZXdOb2RlSURzKG5ld05vZGUpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hc3NpZ24gdW5pcXVlIGlkcyB0byBlYWNoIG5vZGUgaW4gdGhlIGNsb25lXHJcbiAgXHJcbiAgaWYoc291cmNlUGFyZW50Tm9kZSA9PT0gdW5kZWZpbmVkKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaGFuZGxlIGNhc2Ugd2hlcmUgdGhlIHVzZXIgdHJpZXMgdG8gY29weSBhIHRvcCBsZXZlbCBub2RlXHJcbiAge1xyXG4gICAgbm9kZUluZGV4ID0gZ2V0Tm9kZUluZGV4KHRyZWUubm9kZXMsIHNvdXJjZU5vZGUuaWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIHRyZWUubm9kZXMuc3BsaWNlKG5vZGVJbmRleCwgMCwgbmV3Tm9kZSk7XHJcbiAgICBuZXdSb3dNYXJrdXAgPSBhZGRSb3cobmV3Tm9kZSwgMCwgJycsIDApOyAgICBcclxuICB9XHJcbiAgZWxzZVxyXG4gIHtcclxuICAgIG5vZGVJbmRleCA9IGdldE5vZGVJbmRleChzb3VyY2VQYXJlbnROb2RlLm5vZGVzLCBzb3VyY2VOb2RlLmlkKTtcclxuICAgIHNvdXJjZVBhcmVudE5vZGUubm9kZXMuc3BsaWNlKG5vZGVJbmRleCwgMCwgbmV3Tm9kZSk7XHJcbiAgICBuZXdSb3dNYXJrdXAgPSBnZXRBc3NlbWJseU1hcmt1cChuZXdOb2RlLmlkLCBzb3VyY2VOb2RlLmlkLCBnZXREZXB0aChzb3VyY2VSb3cpKTtcclxuICB9XHJcbiAgXHJcbiAgJChuZXdSb3dNYXJrdXApLmluc2VydEJlZm9yZShzb3VyY2VSb3cpO1xyXG4gIHZhciBuZXdSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm93aWQnICsgbmV3Tm9kZS5pZCk7XHJcbiAgUkVESVBTLmRyYWcuZW5hYmxlRGl2cygnaW5pdCcsIG5ld1Jvdy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2JykpO1xyXG4gIFxyXG4gIHJlZnJlc2hEYXRhTW9kZWxEaXNwbGF5KCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IHRlbXAgZm9yIGRpc3BsYXlpbmcgdGhlIG1vZGVsIG9uIHRoZSBwYWdlIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXNcclxufTtcclxuXHJcbnZhciBhc3NpZ25OZXdOb2RlSURzID0gZnVuY3Rpb24obm9kZSlcclxue1xyXG4gIG5vZGUuaWQgPSB0cmVlLm5leHROb2RlSUQrKztcclxuICBcclxuICBpZihub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbm9kZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgYXNzaWduTmV3Tm9kZUlEcyhub2RlLm5vZGVzW2ldKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG52YXIgZ2V0Tm9kZUluZGV4ID0gZnVuY3Rpb24obm9kZXMsIGlkKVxyXG57XHJcbiAgdmFyIGluZGV4ZXMgPSAkLm1hcChub2RlcywgZnVuY3Rpb24ob2JqLCBpbmRleCkgXHJcbiAge1xyXG4gICAgaWYob2JqLmlkID09IGlkKSBcclxuICAgIHtcclxuICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBpbmRleGVzWzBdO1xyXG59O1xyXG5cclxudmFyIGdldEFuY2VzdG9yVGFnID0gZnVuY3Rpb24gdXBUbyhlbCwgdGFnTmFtZSkgXHJcbntcclxuICB0YWdOYW1lID0gdGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICB3aGlsZSAoZWwgJiYgZWwucGFyZW50Tm9kZSkgXHJcbiAge1xyXG4gICAgZWwgPSBlbC5wYXJlbnROb2RlO1xyXG4gICAgaWYgKGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09IHRhZ05hbWUpIFxyXG4gICAge1xyXG4gICAgICByZXR1cm4gZWw7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gdG9nZ2xlKGVsKVxyXG57XHJcbiAgdmFyIHJvdyA9IGdldEFuY2VzdG9yVGFnKGVsLCAndHInKTtcclxuICB2YXIgaWQgPSBwYXJzZUludChyb3cuaWQucmVwbGFjZSgncm93aWQnLCAnJykpO1xyXG4gIHZhciBpY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ljb24nICsgaWQpO1xyXG5cclxuICBpZihyb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2xsYXBzZWQnKSlcclxuICB7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFyZW50JyArIGlkKTtcclxuICAgIHZhciBjaGlsZHJlbkljb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmljb25wJyArIGlkKTtcclxuXHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGNoaWxkcmVuW2ldLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgY2hpbGRyZW5baV0uY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuSWNvbnMubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIGlmKGNoaWxkcmVuSWNvbnNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdnbHlwaGljb24tY2hldnJvbi1kb3duJykpXHJcbiAgICAgIHtcclxuICAgICAgICBjaGlsZHJlbkljb25zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2dseXBoaWNvbi1jaGV2cm9uLWRvd24nKTtcclxuICAgICAgICBjaGlsZHJlbkljb25zW2ldLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Jyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ2dseXBoaWNvbi1jaGV2cm9uLXJpZ2h0Jyk7XHJcbiAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2dseXBoaWNvbi1jaGV2cm9uLWRvd24nKTtcclxuICAgIHJvdy5jbGFzc0xpc3QucmVtb3ZlKCdjb2xsYXBzZWQnKTtcclxuICAgIHJvdy5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpO1xyXG4gIH1cclxuICBlbHNlXHJcbiAge1xyXG4gICAgdmFyIGRlc2NlbmRhbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFuY2VzdG9yJyArIGlkKTtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlc2NlbmRhbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAge1xyXG4gICAgICBkZXNjZW5kYW50c1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG5cclxuICAgIGljb24uY2xhc3NMaXN0LnJlbW92ZSgnZ2x5cGhpY29uLWNoZXZyb24tZG93bicpO1xyXG4gICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdnbHlwaGljb24tY2hldnJvbi1yaWdodCcpO1xyXG4gICAgcm93LmNsYXNzTGlzdC5yZW1vdmUoJ2V4cGFuZGVkJyk7XHJcbiAgICByb3cuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2VkJyk7XHJcbiAgfVxyXG59XHJcblxyXG52YXIgdXBkYXRlTm9kZU5hbWUgPSBmdW5jdGlvbihlbClcclxue1xyXG4gIHZhciByb3cgPSBnZXRBbmNlc3RvclRhZyhlbCwgJ3RyJyk7XHJcbiAgdmFyIG5vZGVJRCA9IHBhcnNlSW50KHJvdy5pZC5yZXBsYWNlKCdyb3dpZCcsJycpKTtcclxuICB2YXIgbm9kZSA9IGZpbmROb2RlSW5UcmVlKG5vZGVJRCk7XHJcbiAgXHJcbiAgbm9kZS5uYW1lID0gZWwudmFsdWU7XHJcbiAgJCgnI25vZGVJbnB1dCcgKyBub2RlSUQpLmF0dHIoJ3ZhbHVlJywgbm9kZS5uYW1lKTsgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBpbiB0aGUgRE9NLCBzbyB0aGF0IHdoZW4gd2UgZHJhZy9tb3ZlIHRoZSByb3csIHRoZSB2YWx1ZSBpcyBjb3JyZWN0XHJcbiAgcmVmcmVzaERhdGFNb2RlbERpc3BsYXkoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETzogdGVtcCBmb3IgZGlzcGxheWluZyB0aGUgbW9kZWwgb24gdGhlIHBhZ2UgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlc1xyXG59O1xyXG5cclxuZnVuY3Rpb24gdXBkYXRlRmllbGRWYWx1ZShmaWVsZCwgaWQpXHJcbntcclxuICB1cGRhdGVOb2RlVmFsdWVJblRyZWUoaWQsIGZpZWxkLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWVsZCArIGlkKS52YWx1ZSk7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLm5vZGVzLmxlbmd0aDsgaSsrKVxyXG4gIHtcclxuICAgIGFnZ3JlZ2F0ZV9hbnkodHJlZS5ub2Rlc1tpXSwgZmllbGQpO1xyXG4gIH1cclxuICBcclxuICByZWZyZXNoRGF0YU1vZGVsRGlzcGxheSgpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IHRlbXAgZm9yIGRpc3BsYXlpbmcgdGhlIG1vZGVsIG9uIHRoZSBwYWdlIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMgIFxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVOb2RlVmFsdWVJblRyZWUoaWQsIGZpZWxkLCB2YWx1ZSlcclxue1xyXG4gIHZhciBub2RlID0gbnVsbDtcclxuXHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IHRyZWUubm9kZXMubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgbm9kZSA9IHRyZWUubm9kZXNbaV07XHJcbiAgICBcclxuICAgIGlmKG5vZGUuaWQgPT0gaWQpXHJcbiAgICB7XHJcbiAgICAgIGlmKCFub2RlLnZhbHVlcykgeyBub2RlLnZhbHVlcyA9IHt9OyB9XHJcbiAgICAgIG5vZGUudmFsdWVzW2ZpZWxkXSA9IHZhbHVlOyAgICBcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHsgICAgXHJcbiAgICAgIHVwZGF0ZU5vZGVWYWx1ZShpZCwgbm9kZSwgZmllbGQsIHZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZU5vZGVWYWx1ZShpZCwgbm9kZSwgZmllbGQsIHZhbHVlKVxyXG57XHJcbiAgdmFyIGZvdW5kID0gbnVsbDtcclxuXHJcbiAgaWYobm9kZSAmJiBub2RlLmlkID09IGlkKVxyXG4gIHtcclxuICAgIHJldHVybiBub2RlO1xyXG4gIH1cclxuXHJcbiAgaWYobm9kZSAmJiBub2RlLm5vZGVzICYmIG5vZGUubm9kZXMubGVuZ3RoID4gMClcclxuICB7XHJcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbm9kZS5ub2Rlcy5sZW5ndGg7IGkrKylcclxuICAgIHtcclxuICAgICAgZm91bmQgPSB1cGRhdGVOb2RlVmFsdWUoaWQsIG5vZGUubm9kZXNbaV0sIGZpZWxkLCB2YWx1ZSk7XHJcblxyXG4gICAgICBpZihmb3VuZClcclxuICAgICAge1xyXG4gICAgICAgIGlmKCFmb3VuZC52YWx1ZXMpIHsgZm91bmQudmFsdWVzID0ge307IH1cclxuICAgICAgICBmb3VuZC52YWx1ZXNbZmllbGRdID0gdmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIGZvdW5kO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbnVsbDtcclxufSIsInZhciBNZW51SXRlbSA9IGZ1bmN0aW9uKGRpc3BsYXksIHZhbHVlLCB2YXJOYW1lLCBmaWVsZClcclxue1xyXG4gIHRoaXMuZGlzcGxheSA9IGRpc3BsYXk7XHJcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gIHRoaXMudmFyTmFtZSA9IHZhck5hbWU7XHJcbiAgdGhpcy5maWVsZCA9IGZpZWxkO1xyXG4gIHRoaXMuaXRlbXMgPSBbXTtcclxuICBcclxuICBpZihmaWVsZClcclxuICB7XHJcbiAgICB0aGlzLmNoZWNrZWQgPSBmaWVsZFt2YXJOYW1lXSA9PT0gdmFsdWU7XHJcbiAgfVxyXG4gIGVsc2VcclxuICB7XHJcbiAgICB0aGlzLmNoZWNrZWQgPSBmYWxzZTtcclxuICB9XHJcbn07XHJcblxyXG5NZW51SXRlbS5oYW5kbGVDbGljayA9IGZ1bmN0aW9uKGZpZWxkTmFtZSwgdmFyTmFtZSwgdmFsdWUpXHJcbntcclxuICBQcm9qZWN0LmdldEZpZWxkKGZpZWxkTmFtZSlbdmFyTmFtZV0gPSB2YWx1ZTtcclxufTsiLCJmdW5jdGlvbiBQcm9qZWN0KClcclxue1xyXG4gIFxyXG59XHJcblxyXG5Qcm9qZWN0LmdldEZpZWxkID0gZnVuY3Rpb24obmFtZSlcclxue1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB0cmVlLmZpZWxkcy5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICB2YXIgZmllbGQgPSB0cmVlLmZpZWxkc1tpXTtcclxuICAgIGlmKGZpZWxkLm5hbWUgPT09IG5hbWUpXHJcbiAgICB7XHJcbiAgICAgIHJldHVybiBmaWVsZDtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIG51bGw7XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=